var _D=Object.defineProperty;var SD=(n,e,t)=>e in n?_D(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t;var ve=(n,e,t)=>(SD(n,typeof e!="symbol"?e+"":e,t),t),q0=(n,e,t)=>{if(!e.has(n))throw TypeError("Cannot "+t)};var I=(n,e,t)=>(q0(n,e,"read from private field"),t?t.call(n):e.get(n)),ye=(n,e,t)=>{if(e.has(n))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(n):e.set(n,t)},fe=(n,e,t,r)=>(q0(n,e,"write to private field"),r?r.call(n,t):e.set(n,t),t);var wc=(n,e,t,r)=>({set _(i){fe(n,e,i,t)},get _(){return I(n,e,r)}}),ue=(n,e,t)=>(q0(n,e,"access private method"),t);import{b as le,A as bn,C as kD,k as CD,F as AD,l as TD,n as OD,p as MD,q as PD,e as Ue,r as We,t as ND,x as Tn,y as fn,z as DD,B as Rr,_ as du,a as dr,o as ge,c as we,d as ce,D as Wy,w as an,E as ml,G as Vy,H as zs,m as Ka,I as RD,J as Uy,K as Zd,L as ae,M as Ce,N as xO,O as Ec,P as yl,h as Ln,Q as _t,R as dn,S as aa,T as Za,U as O2,V as wO,W as Gt,X as Wi,Y as EO,Z as Us,$ as td,a0 as LD,a1 as ID,a2 as FD,a3 as BD,a4 as _O,a5 as zD,a6 as Dw,a7 as Rw,a8 as $D,a9 as jD,aa as Lw,ab as qD}from"./index-7fe48c48.js";import{R as GD,F as WD,D as VD}from"./ReloadOutlined-5bd8abd1.js";var UD={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M868 545.5L536.1 163a31.96 31.96 0 00-48.3 0L156 545.5a7.97 7.97 0 006 13.2h81c4.6 0 9-2 12.1-5.5L474 300.9V864c0 4.4 3.6 8 8 8h60c4.4 0 8-3.6 8-8V300.9l218.9 252.3c3 3.5 7.4 5.5 12.1 5.5h81c6.8 0 10.5-8 6-13.2z"}}]},name:"arrow-up",theme:"outlined"};const HD=UD;function Iw(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?Object(arguments[e]):{},r=Object.keys(t);typeof Object.getOwnPropertySymbols=="function"&&(r=r.concat(Object.getOwnPropertySymbols(t).filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable}))),r.forEach(function(i){YD(n,i,t[i])})}return n}function YD(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}var M2=function(e,t){var r=Iw({},e,t.attrs);return le(bn,Iw({},r,{icon:HD}),null)};M2.displayName="ArrowUpOutlined";M2.inheritAttrs=!1;const Fw=M2;var XD={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M632 888H392c-4.4 0-8 3.6-8 8v32c0 17.7 14.3 32 32 32h192c17.7 0 32-14.3 32-32v-32c0-4.4-3.6-8-8-8zM512 64c-181.1 0-328 146.9-328 328 0 121.4 66 227.4 164 284.1V792c0 17.7 14.3 32 32 32h264c17.7 0 32-14.3 32-32V676.1c98-56.7 164-162.7 164-284.1 0-181.1-146.9-328-328-328zm127.9 549.8L604 634.6V752H420V634.6l-35.9-20.8C305.4 568.3 256 484.5 256 392c0-141.4 114.6-256 256-256s256 114.6 256 256c0 92.5-49.4 176.3-128.1 221.8z"}}]},name:"bulb",theme:"outlined"};const KD=XD;function Bw(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?Object(arguments[e]):{},r=Object.keys(t);typeof Object.getOwnPropertySymbols=="function"&&(r=r.concat(Object.getOwnPropertySymbols(t).filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable}))),r.forEach(function(i){ZD(n,i,t[i])})}return n}function ZD(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}var P2=function(e,t){var r=Bw({},e,t.attrs);return le(bn,Bw({},r,{icon:KD}),null)};P2.displayName="BulbOutlined";P2.inheritAttrs=!1;const JD=P2;var QD={icon:{tag:"svg",attrs:{viewBox:"0 0 1024 1024",focusable:"false"},children:[{tag:"path",attrs:{d:"M715.8 493.5L335 165.1c-14.2-12.2-35-1.2-35 18.5v656.8c0 19.7 20.8 30.7 35 18.5l380.8-328.4c10.9-9.4 10.9-27.6 0-37z"}}]},name:"caret-right",theme:"outlined"};const eR=QD;function zw(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?Object(arguments[e]):{},r=Object.keys(t);typeof Object.getOwnPropertySymbols=="function"&&(r=r.concat(Object.getOwnPropertySymbols(t).filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable}))),r.forEach(function(i){tR(n,i,t[i])})}return n}function tR(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}var N2=function(e,t){var r=zw({},e,t.attrs);return le(bn,zw({},r,{icon:eR}),null)};N2.displayName="CaretRightOutlined";N2.inheritAttrs=!1;const nR=N2;function $w(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?Object(arguments[e]):{},r=Object.keys(t);typeof Object.getOwnPropertySymbols=="function"&&(r=r.concat(Object.getOwnPropertySymbols(t).filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable}))),r.forEach(function(i){rR(n,i,t[i])})}return n}function rR(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}var D2=function(e,t){var r=$w({},e,t.attrs);return le(bn,$w({},r,{icon:kD}),null)};D2.displayName="ClockCircleOutlined";D2.inheritAttrs=!1;const iR=D2;var aR={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M811.4 368.9C765.6 248 648.9 162 512.2 162S258.8 247.9 213 368.8C126.9 391.5 63.5 470.2 64 563.6 64.6 668 145.6 752.9 247.6 762c4.7.4 8.7-3.3 8.7-8v-60.4c0-4-3-7.4-7-7.9-27-3.4-52.5-15.2-72.1-34.5-24-23.5-37.2-55.1-37.2-88.6 0-28 9.1-54.4 26.2-76.4 16.7-21.4 40.2-36.9 66.1-43.7l37.9-10 13.9-36.7c8.6-22.8 20.6-44.2 35.7-63.5 14.9-19.2 32.6-36 52.4-50 41.1-28.9 89.5-44.2 140-44.2s98.9 15.3 140 44.3c19.9 14 37.5 30.8 52.4 50 15.1 19.3 27.1 40.7 35.7 63.5l13.8 36.6 37.8 10c54.2 14.4 92.1 63.7 92.1 120 0 33.6-13.2 65.1-37.2 88.6-19.5 19.2-44.9 31.1-71.9 34.5-4 .5-6.9 3.9-6.9 7.9V754c0 4.7 4.1 8.4 8.8 8 101.7-9.2 182.5-94 183.2-198.2.6-93.4-62.7-172.1-148.6-194.9z"}},{tag:"path",attrs:{d:"M376.9 656.4c1.8-33.5 15.7-64.7 39.5-88.6 25.4-25.5 60-39.8 96-39.8 36.2 0 70.3 14.1 96 39.8 1.4 1.4 2.7 2.8 4.1 4.3l-25 19.6a8 8 0 003 14.1l98.2 24c5 1.2 9.9-2.6 9.9-7.7l.5-101.3c0-6.7-7.6-10.5-12.9-6.3L663 532.7c-36.6-42-90.4-68.6-150.5-68.6-107.4 0-195 85.1-199.4 191.7-.2 4.5 3.4 8.3 8 8.3H369c4.2-.1 7.7-3.4 7.9-7.7zM703 664h-47.9c-4.2 0-7.7 3.3-8 7.6-1.8 33.5-15.7 64.7-39.5 88.6-25.4 25.5-60 39.8-96 39.8-36.2 0-70.3-14.1-96-39.8-1.4-1.4-2.7-2.8-4.1-4.3l25-19.6a8 8 0 00-3-14.1l-98.2-24c-5-1.2-9.9 2.6-9.9 7.7l-.4 101.4c0 6.7 7.6 10.5 12.9 6.3l23.2-18.2c36.6 42 90.4 68.6 150.5 68.6 107.4 0 195-85.1 199.4-191.7.2-4.5-3.4-8.3-8-8.3z"}}]},name:"cloud-sync",theme:"outlined"};const sR=aR;function jw(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?Object(arguments[e]):{},r=Object.keys(t);typeof Object.getOwnPropertySymbols=="function"&&(r=r.concat(Object.getOwnPropertySymbols(t).filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable}))),r.forEach(function(i){oR(n,i,t[i])})}return n}function oR(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}var R2=function(e,t){var r=jw({},e,t.attrs);return le(bn,jw({},r,{icon:sR}),null)};R2.displayName="CloudSyncOutlined";R2.inheritAttrs=!1;const uR=R2;var lR={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M518.3 459a8 8 0 00-12.6 0l-112 141.7a7.98 7.98 0 006.3 12.9h73.9V856c0 4.4 3.6 8 8 8h60c4.4 0 8-3.6 8-8V613.7H624c6.7 0 10.4-7.7 6.3-12.9L518.3 459z"}},{tag:"path",attrs:{d:"M811.4 366.7C765.6 245.9 648.9 160 512.2 160S258.8 245.8 213 366.6C127.3 389.1 64 467.2 64 560c0 110.5 89.5 200 199.9 200H304c4.4 0 8-3.6 8-8v-60c0-4.4-3.6-8-8-8h-40.1c-33.7 0-65.4-13.4-89-37.7-23.5-24.2-36-56.8-34.9-90.6.9-26.4 9.9-51.2 26.2-72.1 16.7-21.3 40.1-36.8 66.1-43.7l37.9-9.9 13.9-36.6c8.6-22.8 20.6-44.1 35.7-63.4a245.6 245.6 0 0152.4-49.9c41.1-28.9 89.5-44.2 140-44.2s98.9 15.3 140 44.2c19.9 14 37.5 30.8 52.4 49.9 15.1 19.3 27.1 40.7 35.7 63.4l13.8 36.5 37.8 10C846.1 454.5 884 503.8 884 560c0 33.1-12.9 64.3-36.3 87.7a123.07 123.07 0 01-87.6 36.3H720c-4.4 0-8 3.6-8 8v60c0 4.4 3.6 8 8 8h40.1C870.5 760 960 670.5 960 560c0-92.7-63.1-170.7-148.6-193.3z"}}]},name:"cloud-upload",theme:"outlined"};const cR=lR;function qw(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?Object(arguments[e]):{},r=Object.keys(t);typeof Object.getOwnPropertySymbols=="function"&&(r=r.concat(Object.getOwnPropertySymbols(t).filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable}))),r.forEach(function(i){hR(n,i,t[i])})}return n}function hR(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}var L2=function(e,t){var r=qw({},e,t.attrs);return le(bn,qw({},r,{icon:cR}),null)};L2.displayName="CloudUploadOutlined";L2.inheritAttrs=!1;const dR=L2;var fR={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"defs",attrs:{},children:[{tag:"style",attrs:{}}]},{tag:"path",attrs:{d:"M573 421c-23.1 0-41 17.9-41 40s17.9 40 41 40c21.1 0 39-17.9 39-40s-17.9-40-39-40zm-280 0c-23.1 0-41 17.9-41 40s17.9 40 41 40c21.1 0 39-17.9 39-40s-17.9-40-39-40z"}},{tag:"path",attrs:{d:"M894 345a343.92 343.92 0 00-189-130v.1c-17.1-19-36.4-36.5-58-52.1-163.7-119-393.5-82.7-513 81-96.3 133-92.2 311.9 6 439l.8 132.6c0 3.2.5 6.4 1.5 9.4a31.95 31.95 0 0040.1 20.9L309 806c33.5 11.9 68.1 18.7 102.5 20.6l-.5.4c89.1 64.9 205.9 84.4 313 49l127.1 41.4c3.2 1 6.5 1.6 9.9 1.6 17.7 0 32-14.3 32-32V753c88.1-119.6 90.4-284.9 1-408zM323 735l-12-5-99 31-1-104-8-9c-84.6-103.2-90.2-251.9-11-361 96.4-132.2 281.2-161.4 413-66 132.2 96.1 161.5 280.6 66 412-80.1 109.9-223.5 150.5-348 102zm505-17l-8 10 1 104-98-33-12 5c-56 20.8-115.7 22.5-171 7l-.2-.1A367.31 367.31 0 00729 676c76.4-105.3 88.8-237.6 44.4-350.4l.6.4c23 16.5 44.1 37.1 62 62 72.6 99.6 68.5 235.2-8 330z"}},{tag:"path",attrs:{d:"M433 421c-23.1 0-41 17.9-41 40s17.9 40 41 40c21.1 0 39-17.9 39-40s-17.9-40-39-40z"}}]},name:"comment",theme:"outlined"};const gR=fR;function Gw(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?Object(arguments[e]):{},r=Object.keys(t);typeof Object.getOwnPropertySymbols=="function"&&(r=r.concat(Object.getOwnPropertySymbols(t).filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable}))),r.forEach(function(i){pR(n,i,t[i])})}return n}function pR(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}var I2=function(e,t){var r=Gw({},e,t.attrs);return le(bn,Gw({},r,{icon:gR}),null)};I2.displayName="CommentOutlined";I2.inheritAttrs=!1;const vR=I2;var mR={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372zm198.4-588.1a32 32 0 00-24.5.5L414.9 415 296.4 686c-3.6 8.2-3.6 17.5 0 25.7 3.4 7.8 9.7 13.9 17.7 17 3.8 1.5 7.7 2.2 11.7 2.2 4.4 0 8.7-.9 12.8-2.7l271-118.6 118.5-271a32.06 32.06 0 00-17.7-42.7zM576.8 534.4l26.2 26.2-42.4 42.4-26.2-26.2L380 644.4 447.5 490 422 464.4l42.4-42.4 25.5 25.5L644.4 380l-67.6 154.4zM464.4 422L422 464.4l25.5 25.6 86.9 86.8 26.2 26.2 42.4-42.4-26.2-26.2-86.8-86.9z"}}]},name:"compass",theme:"outlined"};const yR=mR;function Ww(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?Object(arguments[e]):{},r=Object.keys(t);typeof Object.getOwnPropertySymbols=="function"&&(r=r.concat(Object.getOwnPropertySymbols(t).filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable}))),r.forEach(function(i){bR(n,i,t[i])})}return n}function bR(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}var F2=function(e,t){var r=Ww({},e,t.attrs);return le(bn,Ww({},r,{icon:yR}),null)};F2.displayName="CompassOutlined";F2.inheritAttrs=!1;const xR=F2;function Vw(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?Object(arguments[e]):{},r=Object.keys(t);typeof Object.getOwnPropertySymbols=="function"&&(r=r.concat(Object.getOwnPropertySymbols(t).filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable}))),r.forEach(function(i){wR(n,i,t[i])})}return n}function wR(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}var B2=function(e,t){var r=Vw({},e,t.attrs);return le(bn,Vw({},r,{icon:CD}),null)};B2.displayName="CopyOutlined";B2.inheritAttrs=!1;const ER=B2;var _R={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M888.3 693.2c-42.5-24.6-94.3-18-129.2 12.8l-53-30.7V523.6c0-15.7-8.4-30.3-22-38.1l-136-78.3v-67.1c44.2-15 76-56.8 76-106.1 0-61.9-50.1-112-112-112s-112 50.1-112 112c0 49.3 31.8 91.1 76 106.1v67.1l-136 78.3c-13.6 7.8-22 22.4-22 38.1v151.6l-53 30.7c-34.9-30.8-86.8-37.4-129.2-12.8-53.5 31-71.7 99.4-41 152.9 30.8 53.5 98.9 71.9 152.2 41 42.5-24.6 62.7-73 53.6-118.8l48.7-28.3 140.6 81c6.8 3.9 14.4 5.9 22 5.9s15.2-2 22-5.9L674.5 740l48.7 28.3c-9.1 45.7 11.2 94.2 53.6 118.8 53.3 30.9 121.5 12.6 152.2-41 30.8-53.6 12.6-122-40.7-152.9zm-673 138.4a47.6 47.6 0 01-65.2-17.6c-13.2-22.9-5.4-52.3 17.5-65.5a47.6 47.6 0 0165.2 17.6c13.2 22.9 5.4 52.3-17.5 65.5zM522 463.8zM464 234a48.01 48.01 0 0196 0 48.01 48.01 0 01-96 0zm170 446.2l-122 70.3-122-70.3V539.8l122-70.3 122 70.3v140.4zm239.9 133.9c-13.2 22.9-42.4 30.8-65.2 17.6-22.8-13.2-30.7-42.6-17.5-65.5s42.4-30.8 65.2-17.6c22.9 13.2 30.7 42.5 17.5 65.5z"}}]},name:"deployment-unit",theme:"outlined"};const SR=_R;function Uw(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?Object(arguments[e]):{},r=Object.keys(t);typeof Object.getOwnPropertySymbols=="function"&&(r=r.concat(Object.getOwnPropertySymbols(t).filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable}))),r.forEach(function(i){kR(n,i,t[i])})}return n}function kR(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}var z2=function(e,t){var r=Uw({},e,t.attrs);return le(bn,Uw({},r,{icon:SR}),null)};z2.displayName="DeploymentUnitOutlined";z2.inheritAttrs=!1;const CR=z2;function Hw(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?Object(arguments[e]):{},r=Object.keys(t);typeof Object.getOwnPropertySymbols=="function"&&(r=r.concat(Object.getOwnPropertySymbols(t).filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable}))),r.forEach(function(i){AR(n,i,t[i])})}return n}function AR(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}var $2=function(e,t){var r=Hw({},e,t.attrs);return le(bn,Hw({},r,{icon:AD}),null)};$2.displayName="FileOutlined";$2.inheritAttrs=!1;const TR=$2;function Yw(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?Object(arguments[e]):{},r=Object.keys(t);typeof Object.getOwnPropertySymbols=="function"&&(r=r.concat(Object.getOwnPropertySymbols(t).filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable}))),r.forEach(function(i){OR(n,i,t[i])})}return n}function OR(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}var j2=function(e,t){var r=Yw({},e,t.attrs);return le(bn,Yw({},r,{icon:TD}),null)};j2.displayName="FileTextOutlined";j2.inheritAttrs=!1;const MR=j2;function Xw(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?Object(arguments[e]):{},r=Object.keys(t);typeof Object.getOwnPropertySymbols=="function"&&(r=r.concat(Object.getOwnPropertySymbols(t).filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable}))),r.forEach(function(i){PR(n,i,t[i])})}return n}function PR(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}var q2=function(e,t){var r=Xw({},e,t.attrs);return le(bn,Xw({},r,{icon:OD}),null)};q2.displayName="FolderOpenOutlined";q2.inheritAttrs=!1;const NR=q2;var DR={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M854.4 800.9c.2-.3.5-.6.7-.9C920.6 722.1 960 621.7 960 512s-39.4-210.1-104.8-288c-.2-.3-.5-.5-.7-.8-1.1-1.3-2.1-2.5-3.2-3.7-.4-.5-.8-.9-1.2-1.4l-4.1-4.7-.1-.1c-1.5-1.7-3.1-3.4-4.6-5.1l-.1-.1c-3.2-3.4-6.4-6.8-9.7-10.1l-.1-.1-4.8-4.8-.3-.3c-1.5-1.5-3-2.9-4.5-4.3-.5-.5-1-1-1.6-1.5-1-1-2-1.9-3-2.8-.3-.3-.7-.6-1-1C736.4 109.2 629.5 64 512 64s-224.4 45.2-304.3 119.2c-.3.3-.7.6-1 1-1 .9-2 1.9-3 2.9-.5.5-1 1-1.6 1.5-1.5 1.4-3 2.9-4.5 4.3l-.3.3-4.8 4.8-.1.1c-3.3 3.3-6.5 6.7-9.7 10.1l-.1.1c-1.6 1.7-3.1 3.4-4.6 5.1l-.1.1c-1.4 1.5-2.8 3.1-4.1 4.7-.4.5-.8.9-1.2 1.4-1.1 1.2-2.1 2.5-3.2 3.7-.2.3-.5.5-.7.8C103.4 301.9 64 402.3 64 512s39.4 210.1 104.8 288c.2.3.5.6.7.9l3.1 3.7c.4.5.8.9 1.2 1.4l4.1 4.7c0 .1.1.1.1.2 1.5 1.7 3 3.4 4.6 5l.1.1c3.2 3.4 6.4 6.8 9.6 10.1l.1.1c1.6 1.6 3.1 3.2 4.7 4.7l.3.3c3.3 3.3 6.7 6.5 10.1 9.6 80.1 74 187 119.2 304.5 119.2s224.4-45.2 304.3-119.2a300 300 0 0010-9.6l.3-.3c1.6-1.6 3.2-3.1 4.7-4.7l.1-.1c3.3-3.3 6.5-6.7 9.6-10.1l.1-.1c1.5-1.7 3.1-3.3 4.6-5 0-.1.1-.1.1-.2 1.4-1.5 2.8-3.1 4.1-4.7.4-.5.8-.9 1.2-1.4a99 99 0 003.3-3.7zm4.1-142.6c-13.8 32.6-32 62.8-54.2 90.2a444.07 444.07 0 00-81.5-55.9c11.6-46.9 18.8-98.4 20.7-152.6H887c-3 40.9-12.6 80.6-28.5 118.3zM887 484H743.5c-1.9-54.2-9.1-105.7-20.7-152.6 29.3-15.6 56.6-34.4 81.5-55.9A373.86 373.86 0 01887 484zM658.3 165.5c39.7 16.8 75.8 40 107.6 69.2a394.72 394.72 0 01-59.4 41.8c-15.7-45-35.8-84.1-59.2-115.4 3.7 1.4 7.4 2.9 11 4.4zm-90.6 700.6c-9.2 7.2-18.4 12.7-27.7 16.4V697a389.1 389.1 0 01115.7 26.2c-8.3 24.6-17.9 47.3-29 67.8-17.4 32.4-37.8 58.3-59 75.1zm59-633.1c11 20.6 20.7 43.3 29 67.8A389.1 389.1 0 01540 327V141.6c9.2 3.7 18.5 9.1 27.7 16.4 21.2 16.7 41.6 42.6 59 75zM540 640.9V540h147.5c-1.6 44.2-7.1 87.1-16.3 127.8l-.3 1.2A445.02 445.02 0 00540 640.9zm0-156.9V383.1c45.8-2.8 89.8-12.5 130.9-28.1l.3 1.2c9.2 40.7 14.7 83.5 16.3 127.8H540zm-56 56v100.9c-45.8 2.8-89.8 12.5-130.9 28.1l-.3-1.2c-9.2-40.7-14.7-83.5-16.3-127.8H484zm-147.5-56c1.6-44.2 7.1-87.1 16.3-127.8l.3-1.2c41.1 15.6 85 25.3 130.9 28.1V484H336.5zM484 697v185.4c-9.2-3.7-18.5-9.1-27.7-16.4-21.2-16.7-41.7-42.7-59.1-75.1-11-20.6-20.7-43.3-29-67.8 37.2-14.6 75.9-23.3 115.8-26.1zm0-370a389.1 389.1 0 01-115.7-26.2c8.3-24.6 17.9-47.3 29-67.8 17.4-32.4 37.8-58.4 59.1-75.1 9.2-7.2 18.4-12.7 27.7-16.4V327zM365.7 165.5c3.7-1.5 7.3-3 11-4.4-23.4 31.3-43.5 70.4-59.2 115.4-21-12-40.9-26-59.4-41.8 31.8-29.2 67.9-52.4 107.6-69.2zM165.5 365.7c13.8-32.6 32-62.8 54.2-90.2 24.9 21.5 52.2 40.3 81.5 55.9-11.6 46.9-18.8 98.4-20.7 152.6H137c3-40.9 12.6-80.6 28.5-118.3zM137 540h143.5c1.9 54.2 9.1 105.7 20.7 152.6a444.07 444.07 0 00-81.5 55.9A373.86 373.86 0 01137 540zm228.7 318.5c-39.7-16.8-75.8-40-107.6-69.2 18.5-15.8 38.4-29.7 59.4-41.8 15.7 45 35.8 84.1 59.2 115.4-3.7-1.4-7.4-2.9-11-4.4zm292.6 0c-3.7 1.5-7.3 3-11 4.4 23.4-31.3 43.5-70.4 59.2-115.4 21 12 40.9 26 59.4 41.8a373.81 373.81 0 01-107.6 69.2z"}}]},name:"global",theme:"outlined"};const RR=DR;function Kw(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?Object(arguments[e]):{},r=Object.keys(t);typeof Object.getOwnPropertySymbols=="function"&&(r=r.concat(Object.getOwnPropertySymbols(t).filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable}))),r.forEach(function(i){LR(n,i,t[i])})}return n}function LR(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}var G2=function(e,t){var r=Kw({},e,t.attrs);return le(bn,Kw({},r,{icon:RR}),null)};G2.displayName="GlobalOutlined";G2.inheritAttrs=!1;const IR=G2;var FR={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M304 176h80v672h-80zm408 0h-64c-4.4 0-8 3.6-8 8v656c0 4.4 3.6 8 8 8h64c4.4 0 8-3.6 8-8V184c0-4.4-3.6-8-8-8z"}}]},name:"pause",theme:"outlined"};const BR=FR;function Zw(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?Object(arguments[e]):{},r=Object.keys(t);typeof Object.getOwnPropertySymbols=="function"&&(r=r.concat(Object.getOwnPropertySymbols(t).filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable}))),r.forEach(function(i){zR(n,i,t[i])})}return n}function zR(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}var W2=function(e,t){var r=Zw({},e,t.attrs);return le(bn,Zw({},r,{icon:BR}),null)};W2.displayName="PauseOutlined";W2.inheritAttrs=!1;const Jw=W2;var $R={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M696 480H544V328c0-4.4-3.6-8-8-8h-48c-4.4 0-8 3.6-8 8v152H328c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8h152v152c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8V544h152c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8z"}},{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z"}}]},name:"plus-circle",theme:"outlined"};const jR=$R;function Qw(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?Object(arguments[e]):{},r=Object.keys(t);typeof Object.getOwnPropertySymbols=="function"&&(r=r.concat(Object.getOwnPropertySymbols(t).filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable}))),r.forEach(function(i){qR(n,i,t[i])})}return n}function qR(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}var V2=function(e,t){var r=Qw({},e,t.attrs);return le(bn,Qw({},r,{icon:jR}),null)};V2.displayName="PlusCircleOutlined";V2.inheritAttrs=!1;const GR=V2;var WR={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"defs",attrs:{},children:[{tag:"style",attrs:{}}]},{tag:"path",attrs:{d:"M931.4 498.9L94.9 79.5c-3.4-1.7-7.3-2.1-11-1.2a15.99 15.99 0 00-11.7 19.3l86.2 352.2c1.3 5.3 5.2 9.6 10.4 11.3l147.7 50.7-147.6 50.7c-5.2 1.8-9.1 6-10.3 11.3L72.2 926.5c-.9 3.7-.5 7.6 1.2 10.9 3.9 7.9 13.5 11.1 21.5 7.2l836.5-417c3.1-1.5 5.6-4.1 7.2-7.1 3.9-8 .7-17.6-7.2-21.6zM170.8 826.3l50.3-205.6 295.2-101.3c2.3-.8 4.2-2.6 5-5 1.4-4.2-.8-8.7-5-10.2L221.1 403 171 198.2l628 314.9-628.2 313.2z"}}]},name:"send",theme:"outlined"};const VR=WR;function eE(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?Object(arguments[e]):{},r=Object.keys(t);typeof Object.getOwnPropertySymbols=="function"&&(r=r.concat(Object.getOwnPropertySymbols(t).filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable}))),r.forEach(function(i){UR(n,i,t[i])})}return n}function UR(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}var U2=function(e,t){var r=eE({},e,t.attrs);return le(bn,eE({},r,{icon:VR}),null)};U2.displayName="SendOutlined";U2.inheritAttrs=!1;const HR=U2,SO="/assets/sidebar_left-12614cf2.svg";function kO(n){return MD()?(PD(n),!0):!1}function Jd(n){return typeof n=="function"?n():Ue(n)}const Qd=typeof window<"u"&&typeof document<"u";typeof WorkerGlobalScope<"u"&&globalThis instanceof WorkerGlobalScope;const YR=Object.prototype.toString,XR=n=>YR.call(n)==="[object Object]",Rh=()=>{},KR=ZR();function ZR(){var n,e;return Qd&&((n=window==null?void 0:window.navigator)==null?void 0:n.userAgent)&&(/iP(?:ad|hone|od)/.test(window.navigator.userAgent)||((e=window==null?void 0:window.navigator)==null?void 0:e.maxTouchPoints)>2&&/iPad|Macintosh/.test(window==null?void 0:window.navigator.userAgent))}function JR(n){let e;function t(){return e||(e=n()),e}return t.reset=async()=>{const r=e;e=void 0,r&&await r},t}function QR(n,e,t={}){const{immediate:r=!0}=t,i=We(!1);let a=null;function s(){a&&(clearTimeout(a),a=null)}function o(){i.value=!1,s()}function u(...l){s(),i.value=!0,a=setTimeout(()=>{i.value=!1,a=null,n(...l)},Jd(e))}return r&&(i.value=!0,Qd&&u()),kO(o),{isPending:ND(i),start:u,stop:o}}function $u(n){var e;const t=Jd(n);return(e=t==null?void 0:t.$el)!=null?e:t}const CO=Qd?window:void 0,AO=Qd?window.navigator:void 0;function sl(...n){let e,t,r,i;if(typeof n[0]=="string"||Array.isArray(n[0])?([t,r,i]=n,e=CO):[e,t,r,i]=n,!e)return Rh;Array.isArray(t)||(t=[t]),Array.isArray(r)||(r=[r]);const a=[],s=()=>{a.forEach(c=>c()),a.length=0},o=(c,h,d,f)=>(c.addEventListener(h,d,f),()=>c.removeEventListener(h,d,f)),u=Tn(()=>[$u(e),Jd(i)],([c,h])=>{if(s(),!c)return;const d=XR(h)?{...h}:h;a.push(...t.flatMap(f=>r.map(g=>o(c,f,g,d))))},{immediate:!0,flush:"post"}),l=()=>{u(),s()};return kO(l),l}let tE=!1;function nE(n,e,t={}){const{window:r=CO,ignore:i=[],capture:a=!0,detectIframe:s=!1}=t;if(!r)return Rh;KR&&!tE&&(tE=!0,Array.from(r.document.body.children).forEach(d=>d.addEventListener("click",Rh)),r.document.documentElement.addEventListener("click",Rh));let o=!0;const u=d=>i.some(f=>{if(typeof f=="string")return Array.from(r.document.querySelectorAll(f)).some(g=>g===d.target||d.composedPath().includes(g));{const g=$u(f);return g&&(d.target===g||d.composedPath().includes(g))}}),c=[sl(r,"click",d=>{const f=$u(n);if(!(!f||f===d.target||d.composedPath().includes(f))){if(d.detail===0&&(o=!u(d)),!o){o=!0;return}e(d)}},{passive:!0,capture:a}),sl(r,"pointerdown",d=>{const f=$u(n);o=!u(d)&&!!(f&&!d.composedPath().includes(f))},{passive:!0}),s&&sl(r,"blur",d=>{setTimeout(()=>{var f;const g=$u(n);((f=r.document.activeElement)==null?void 0:f.tagName)==="IFRAME"&&!(g!=null&&g.contains(r.document.activeElement))&&e(d)},0)})].filter(Boolean);return()=>c.forEach(d=>d())}function eL(){const n=We(!1),e=DD();return e&&Rr(()=>{n.value=!0},e),n}function TO(n){const e=eL();return fn(()=>(e.value,!!n()))}function rE(n,e={}){const{controls:t=!1,navigator:r=AO}=e,i=TO(()=>r&&"permissions"in r);let a;const s=typeof n=="string"?{name:n}:n,o=We(),u=()=>{a&&(o.value=a.state)},l=JR(async()=>{if(i.value){if(!a)try{a=await r.permissions.query(s),sl(a,"change",u),u()}catch{o.value="prompt"}return a}});return l(),t?{state:o,isSupported:i,query:l}:o}function tL(n={}){const{navigator:e=AO,read:t=!1,source:r,copiedDuring:i=1500,legacy:a=!1}=n,s=TO(()=>e&&"clipboard"in e),o=rE("clipboard-read"),u=rE("clipboard-write"),l=fn(()=>s.value||a),c=We(""),h=We(!1),d=QR(()=>h.value=!1,i);function f(){s.value&&m(o.value)?e.clipboard.readText().then(y=>{c.value=y}):c.value=v()}l.value&&t&&sl(["copy","cut"],f);async function g(y=Jd(r)){l.value&&y!=null&&(s.value&&m(u.value)?await e.clipboard.writeText(y):p(y),c.value=y,h.value=!0,d.start())}function p(y){const b=document.createElement("textarea");b.value=y??"",b.style.position="absolute",b.style.opacity="0",document.body.appendChild(b),b.select(),document.execCommand("copy"),b.remove()}function v(){var y,b,x;return(x=(b=(y=document==null?void 0:document.getSelection)==null?void 0:y.call(document))==null?void 0:b.toString())!=null?x:""}function m(y){return y==="granted"||y==="prompt"}return{isSupported:l,text:c,copied:h,copy:g}}const nL={class:"input-area"},rL={class:"input-options"},iL={class:"options__left"},aL={class:"options__right"},sL={__name:"MessageInputComponent",props:{modelValue:{type:String,default:""},placeholder:{type:String,default:"输入问题..."},isLoading:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},sendButtonDisabled:{type:Boolean,default:!1},autoSize:{type:Object,default:()=>({minRows:2,maxRows:6})},sendIcon:{type:String,default:"ArrowUpOutlined"},customClasses:{type:Object,default:()=>({})}},emits:["update:modelValue","send","keydown"],setup(n,{emit:e}){const t=n,r="http://125.35.255.179:39001/v1/document/parse",i=e,a=We(null),s=We(!1),o=(p,v,m)=>{const y=p.file.response;p.file.status==="done"&&(y.code===0?(a.value=y.data,s.value=!1,Ka.success("文件上传成功")):(a.value=null,s.value=!1,Ka.error("文件上传失败,原因是："+y.message)))},u={SendOutlined:HR,ArrowUpOutlined:Fw,PauseOutlined:Jw},l=fn(()=>t.isLoading?Jw:u[t.sendIcon]||Fw),c=fn(()=>t.isLoading||s.value?uR:dR),h=fn({get:()=>t.modelValue,set:p=>i("update:modelValue",p)}),d=p=>{s.value?i("keydown",p,{action:"stop_upload",result:a.value}):i("keydown",p,{uploadResult:a.value})},f=()=>{s.value?i("send",{action:"stop_upload",result:a.value}):i("send",{uploadResult:a.value})},g=p=>(s.value=!0,!0);return(p,v)=>{const m=dr("a-textarea"),y=dr("a-button"),b=dr("a-upload"),x=dr("a-tooltip");return ge(),we("div",{class:zs([n.customClasses,"input-box"])},[ce("div",nL,[le(m,{value:h.value,"onUpdate:value":v[0]||(v[0]=w=>h.value=w),"auto-size":n.autoSize,disabled:n.disabled,placeholder:n.placeholder,class:"user-input",onKeydown:d},null,8,["value","auto-size","disabled","placeholder"])]),ce("div",rL,[ce("div",iL,[Wy(p.$slots,"options-left",{},()=>[le(x,{placement:"left",title:"只能上传一个文件,且格式为‘pdf, xlsx, doc, docx,txt’"},{default:an(()=>[le(b,{accept:".pdf,.xlsx,.doc,.docx,.txt",action:r,"before-upload":g,disabled:!n.sendButtonDisabled||s.value,multiple:!1,onChange:o},{default:an(()=>[le(y,{shape:"circle",type:"primary"},{icon:an(()=>[(ge(),ml(Vy(c.value),{class:"send-btn"}))]),_:1})]),_:1},8,["disabled"])]),_:1})],!0)]),ce("div",aL,[le(x,{title:n.isLoading?"停止回答":""},{default:an(()=>[le(y,{disabled:n.sendButtonDisabled||s.value,type:"link",onClick:f},{icon:an(()=>[(ge(),ml(Vy(l.value),{class:"send-btn"}))]),_:1},8,["disabled"])]),_:1},8,["title"])])])],2)}}},oL=du(sL,[["__scopeId","data-v-91cd6976"]]);function U(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}function iE(n,e){for(var t=0;t<e.length;t++){var r=e[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(n,RD(r.key),r)}}function H(n,e,t){return e&&iE(n.prototype,e),t&&iE(n,t),Object.defineProperty(n,"prototype",{writable:!1}),n}function Hy(n,e){(e==null||e>n.length)&&(e=n.length);for(var t=0,r=Array(e);t<e;t++)r[t]=n[t];return r}function uL(n){if(Array.isArray(n))return Hy(n)}function lL(n){if(typeof Symbol<"u"&&n[Symbol.iterator]!=null||n["@@iterator"]!=null)return Array.from(n)}function H2(n,e){if(n){if(typeof n=="string")return Hy(n,e);var t={}.toString.call(n).slice(8,-1);return t==="Object"&&n.constructor&&(t=n.constructor.name),t==="Map"||t==="Set"?Array.from(n):t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?Hy(n,e):void 0}}function cL(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function at(n){return uL(n)||lL(n)||H2(n)||cL()}function Jo(n){return Jo=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Jo(n)}function OO(){try{var n=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(OO=function(){return!!n})()}function hL(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function dL(n,e){if(e&&(Uy(e)=="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return hL(n)}function Te(n,e,t){return e=Jo(e),dL(n,OO()?Reflect.construct(e,t||[],Jo(n).constructor):e.apply(n,t))}function Yy(n,e){return Yy=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,r){return t.__proto__=r,t},Yy(n,e)}function Oe(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(e&&e.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,"prototype",{writable:!1}),e&&Yy(n,e)}function fL(n){if(Array.isArray(n))return n}function gL(n,e){var t=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(t!=null){var r,i,a,s,o=[],u=!0,l=!1;try{if(a=(t=t.call(n)).next,e===0){if(Object(t)!==t)return;u=!1}else for(;!(u=(r=a.call(t)).done)&&(o.push(r.value),o.length!==e);u=!0);}catch(c){l=!0,i=c}finally{try{if(!u&&t.return!=null&&(s=t.return(),Object(s)!==s))return}finally{if(l)throw i}}return o}}function pL(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Ee(n,e){return fL(n)||gL(n,e)||H2(n,e)||pL()}var MO={exports:{}};(function(n){var e=Object.prototype.hasOwnProperty,t="~";function r(){}Object.create&&(r.prototype=Object.create(null),new r().__proto__||(t=!1));function i(u,l,c){this.fn=u,this.context=l,this.once=c||!1}function a(u,l,c,h,d){if(typeof c!="function")throw new TypeError("The listener must be a function");var f=new i(c,h||u,d),g=t?t+l:l;return u._events[g]?u._events[g].fn?u._events[g]=[u._events[g],f]:u._events[g].push(f):(u._events[g]=f,u._eventsCount++),u}function s(u,l){--u._eventsCount===0?u._events=new r:delete u._events[l]}function o(){this._events=new r,this._eventsCount=0}o.prototype.eventNames=function(){var l=[],c,h;if(this._eventsCount===0)return l;for(h in c=this._events)e.call(c,h)&&l.push(t?h.slice(1):h);return Object.getOwnPropertySymbols?l.concat(Object.getOwnPropertySymbols(c)):l},o.prototype.listeners=function(l){var c=t?t+l:l,h=this._events[c];if(!h)return[];if(h.fn)return[h.fn];for(var d=0,f=h.length,g=new Array(f);d<f;d++)g[d]=h[d].fn;return g},o.prototype.listenerCount=function(l){var c=t?t+l:l,h=this._events[c];return h?h.fn?1:h.length:0},o.prototype.emit=function(l,c,h,d,f,g){var p=t?t+l:l;if(!this._events[p])return!1;var v=this._events[p],m=arguments.length,y,b;if(v.fn){switch(v.once&&this.removeListener(l,v.fn,void 0,!0),m){case 1:return v.fn.call(v.context),!0;case 2:return v.fn.call(v.context,c),!0;case 3:return v.fn.call(v.context,c,h),!0;case 4:return v.fn.call(v.context,c,h,d),!0;case 5:return v.fn.call(v.context,c,h,d,f),!0;case 6:return v.fn.call(v.context,c,h,d,f,g),!0}for(b=1,y=new Array(m-1);b<m;b++)y[b-1]=arguments[b];v.fn.apply(v.context,y)}else{var x=v.length,w;for(b=0;b<x;b++)switch(v[b].once&&this.removeListener(l,v[b].fn,void 0,!0),m){case 1:v[b].fn.call(v[b].context);break;case 2:v[b].fn.call(v[b].context,c);break;case 3:v[b].fn.call(v[b].context,c,h);break;case 4:v[b].fn.call(v[b].context,c,h,d);break;default:if(!y)for(w=1,y=new Array(m-1);w<m;w++)y[w-1]=arguments[w];v[b].fn.apply(v[b].context,y)}}return!0},o.prototype.on=function(l,c,h){return a(this,l,c,h,!1)},o.prototype.once=function(l,c,h){return a(this,l,c,h,!0)},o.prototype.removeListener=function(l,c,h,d){var f=t?t+l:l;if(!this._events[f])return this;if(!c)return s(this,f),this;var g=this._events[f];if(g.fn)g.fn===c&&(!d||g.once)&&(!h||g.context===h)&&s(this,f);else{for(var p=0,v=[],m=g.length;p<m;p++)(g[p].fn!==c||d&&!g[p].once||h&&g[p].context!==h)&&v.push(g[p]);v.length?this._events[f]=v.length===1?v[0]:v:s(this,f)}return this},o.prototype.removeAllListeners=function(l){var c;return l?(c=t?t+l:l,this._events[c]&&s(this,c)):(this._events=new r,this._eventsCount=0),this},o.prototype.off=o.prototype.removeListener,o.prototype.addListener=o.prototype.on,o.prefixed=t,o.EventEmitter=o,n.exports=o})(MO);var vL=MO.exports;const PO=Zd(vL);var gt=1e-6,zt=typeof Float32Array<"u"?Float32Array:Array;Math.hypot||(Math.hypot=function(){for(var n=0,e=arguments.length;e--;)n+=arguments[e]*arguments[e];return Math.sqrt(n)});function NO(){var n=new zt(9);return zt!=Float32Array&&(n[1]=0,n[2]=0,n[3]=0,n[5]=0,n[6]=0,n[7]=0),n[0]=1,n[4]=1,n[8]=1,n}function mL(n,e){return n[0]=e[0],n[1]=e[1],n[2]=e[2],n[3]=e[4],n[4]=e[5],n[5]=e[6],n[6]=e[8],n[7]=e[9],n[8]=e[10],n}function yL(n,e,t,r,i,a,s,o,u){var l=new zt(9);return l[0]=n,l[1]=e,l[2]=t,l[3]=r,l[4]=i,l[5]=a,l[6]=s,l[7]=o,l[8]=u,l}function nt(){var n=new zt(16);return zt!=Float32Array&&(n[1]=0,n[2]=0,n[3]=0,n[4]=0,n[6]=0,n[7]=0,n[8]=0,n[9]=0,n[11]=0,n[12]=0,n[13]=0,n[14]=0),n[0]=1,n[5]=1,n[10]=1,n[15]=1,n}function DO(n){var e=new zt(16);return e[0]=n[0],e[1]=n[1],e[2]=n[2],e[3]=n[3],e[4]=n[4],e[5]=n[5],e[6]=n[6],e[7]=n[7],e[8]=n[8],e[9]=n[9],e[10]=n[10],e[11]=n[11],e[12]=n[12],e[13]=n[13],e[14]=n[14],e[15]=n[15],e}function Qo(n,e){return n[0]=e[0],n[1]=e[1],n[2]=e[2],n[3]=e[3],n[4]=e[4],n[5]=e[5],n[6]=e[6],n[7]=e[7],n[8]=e[8],n[9]=e[9],n[10]=e[10],n[11]=e[11],n[12]=e[12],n[13]=e[13],n[14]=e[14],n[15]=e[15],n}function RO(n,e,t,r,i,a,s,o,u,l,c,h,d,f,g,p){var v=new zt(16);return v[0]=n,v[1]=e,v[2]=t,v[3]=r,v[4]=i,v[5]=a,v[6]=s,v[7]=o,v[8]=u,v[9]=l,v[10]=c,v[11]=h,v[12]=d,v[13]=f,v[14]=g,v[15]=p,v}function Xy(n,e,t,r,i,a,s,o,u,l,c,h,d,f,g,p,v){return n[0]=e,n[1]=t,n[2]=r,n[3]=i,n[4]=a,n[5]=s,n[6]=o,n[7]=u,n[8]=l,n[9]=c,n[10]=h,n[11]=d,n[12]=f,n[13]=g,n[14]=p,n[15]=v,n}function is(n){return n[0]=1,n[1]=0,n[2]=0,n[3]=0,n[4]=0,n[5]=1,n[6]=0,n[7]=0,n[8]=0,n[9]=0,n[10]=1,n[11]=0,n[12]=0,n[13]=0,n[14]=0,n[15]=1,n}function LO(n,e){if(n===e){var t=e[1],r=e[2],i=e[3],a=e[6],s=e[7],o=e[11];n[1]=e[4],n[2]=e[8],n[3]=e[12],n[4]=t,n[6]=e[9],n[7]=e[13],n[8]=r,n[9]=a,n[11]=e[14],n[12]=i,n[13]=s,n[14]=o}else n[0]=e[0],n[1]=e[4],n[2]=e[8],n[3]=e[12],n[4]=e[1],n[5]=e[5],n[6]=e[9],n[7]=e[13],n[8]=e[2],n[9]=e[6],n[10]=e[10],n[11]=e[14],n[12]=e[3],n[13]=e[7],n[14]=e[11],n[15]=e[15];return n}function Ei(n,e){var t=e[0],r=e[1],i=e[2],a=e[3],s=e[4],o=e[5],u=e[6],l=e[7],c=e[8],h=e[9],d=e[10],f=e[11],g=e[12],p=e[13],v=e[14],m=e[15],y=t*o-r*s,b=t*u-i*s,x=t*l-a*s,w=r*u-i*o,E=r*l-a*o,_=i*l-a*u,S=c*p-h*g,C=c*v-d*g,k=c*m-f*g,A=h*v-d*p,T=h*m-f*p,O=d*m-f*v,P=y*O-b*T+x*A+w*k-E*C+_*S;return P?(P=1/P,n[0]=(o*O-u*T+l*A)*P,n[1]=(i*T-r*O-a*A)*P,n[2]=(p*_-v*E+m*w)*P,n[3]=(d*E-h*_-f*w)*P,n[4]=(u*k-s*O-l*C)*P,n[5]=(t*O-i*k+a*C)*P,n[6]=(v*x-g*_-m*b)*P,n[7]=(c*_-d*x+f*b)*P,n[8]=(s*T-o*k+l*S)*P,n[9]=(r*k-t*T-a*S)*P,n[10]=(g*E-p*x+m*y)*P,n[11]=(h*x-c*E-f*y)*P,n[12]=(o*C-s*A-u*S)*P,n[13]=(t*A-r*C+i*S)*P,n[14]=(p*b-g*w-v*y)*P,n[15]=(c*w-h*b+d*y)*P,n):null}function bL(n,e){var t=e[0],r=e[1],i=e[2],a=e[3],s=e[4],o=e[5],u=e[6],l=e[7],c=e[8],h=e[9],d=e[10],f=e[11],g=e[12],p=e[13],v=e[14],m=e[15];return n[0]=o*(d*m-f*v)-h*(u*m-l*v)+p*(u*f-l*d),n[1]=-(r*(d*m-f*v)-h*(i*m-a*v)+p*(i*f-a*d)),n[2]=r*(u*m-l*v)-o*(i*m-a*v)+p*(i*l-a*u),n[3]=-(r*(u*f-l*d)-o*(i*f-a*d)+h*(i*l-a*u)),n[4]=-(s*(d*m-f*v)-c*(u*m-l*v)+g*(u*f-l*d)),n[5]=t*(d*m-f*v)-c*(i*m-a*v)+g*(i*f-a*d),n[6]=-(t*(u*m-l*v)-s*(i*m-a*v)+g*(i*l-a*u)),n[7]=t*(u*f-l*d)-s*(i*f-a*d)+c*(i*l-a*u),n[8]=s*(h*m-f*p)-c*(o*m-l*p)+g*(o*f-l*h),n[9]=-(t*(h*m-f*p)-c*(r*m-a*p)+g*(r*f-a*h)),n[10]=t*(o*m-l*p)-s*(r*m-a*p)+g*(r*l-a*o),n[11]=-(t*(o*f-l*h)-s*(r*f-a*h)+c*(r*l-a*o)),n[12]=-(s*(h*v-d*p)-c*(o*v-u*p)+g*(o*d-u*h)),n[13]=t*(h*v-d*p)-c*(r*v-i*p)+g*(r*d-i*h),n[14]=-(t*(o*v-u*p)-s*(r*v-i*p)+g*(r*u-i*o)),n[15]=t*(o*d-u*h)-s*(r*d-i*h)+c*(r*u-i*o),n}function IO(n){var e=n[0],t=n[1],r=n[2],i=n[3],a=n[4],s=n[5],o=n[6],u=n[7],l=n[8],c=n[9],h=n[10],d=n[11],f=n[12],g=n[13],p=n[14],v=n[15],m=e*s-t*a,y=e*o-r*a,b=e*u-i*a,x=t*o-r*s,w=t*u-i*s,E=r*u-i*o,_=l*g-c*f,S=l*p-h*f,C=l*v-d*f,k=c*p-h*g,A=c*v-d*g,T=h*v-d*p;return m*T-y*A+b*k+x*C-w*S+E*_}function On(n,e,t){var r=e[0],i=e[1],a=e[2],s=e[3],o=e[4],u=e[5],l=e[6],c=e[7],h=e[8],d=e[9],f=e[10],g=e[11],p=e[12],v=e[13],m=e[14],y=e[15],b=t[0],x=t[1],w=t[2],E=t[3];return n[0]=b*r+x*o+w*h+E*p,n[1]=b*i+x*u+w*d+E*v,n[2]=b*a+x*l+w*f+E*m,n[3]=b*s+x*c+w*g+E*y,b=t[4],x=t[5],w=t[6],E=t[7],n[4]=b*r+x*o+w*h+E*p,n[5]=b*i+x*u+w*d+E*v,n[6]=b*a+x*l+w*f+E*m,n[7]=b*s+x*c+w*g+E*y,b=t[8],x=t[9],w=t[10],E=t[11],n[8]=b*r+x*o+w*h+E*p,n[9]=b*i+x*u+w*d+E*v,n[10]=b*a+x*l+w*f+E*m,n[11]=b*s+x*c+w*g+E*y,b=t[12],x=t[13],w=t[14],E=t[15],n[12]=b*r+x*o+w*h+E*p,n[13]=b*i+x*u+w*d+E*v,n[14]=b*a+x*l+w*f+E*m,n[15]=b*s+x*c+w*g+E*y,n}function zo(n,e,t){var r=t[0],i=t[1],a=t[2],s,o,u,l,c,h,d,f,g,p,v,m;return e===n?(n[12]=e[0]*r+e[4]*i+e[8]*a+e[12],n[13]=e[1]*r+e[5]*i+e[9]*a+e[13],n[14]=e[2]*r+e[6]*i+e[10]*a+e[14],n[15]=e[3]*r+e[7]*i+e[11]*a+e[15]):(s=e[0],o=e[1],u=e[2],l=e[3],c=e[4],h=e[5],d=e[6],f=e[7],g=e[8],p=e[9],v=e[10],m=e[11],n[0]=s,n[1]=o,n[2]=u,n[3]=l,n[4]=c,n[5]=h,n[6]=d,n[7]=f,n[8]=g,n[9]=p,n[10]=v,n[11]=m,n[12]=s*r+c*i+g*a+e[12],n[13]=o*r+h*i+p*a+e[13],n[14]=u*r+d*i+v*a+e[14],n[15]=l*r+f*i+m*a+e[15]),n}function FO(n,e,t){var r=t[0],i=t[1],a=t[2];return n[0]=e[0]*r,n[1]=e[1]*r,n[2]=e[2]*r,n[3]=e[3]*r,n[4]=e[4]*i,n[5]=e[5]*i,n[6]=e[6]*i,n[7]=e[7]*i,n[8]=e[8]*a,n[9]=e[9]*a,n[10]=e[10]*a,n[11]=e[11]*a,n[12]=e[12],n[13]=e[13],n[14]=e[14],n[15]=e[15],n}function xL(n,e,t,r){var i=r[0],a=r[1],s=r[2],o=Math.hypot(i,a,s),u,l,c,h,d,f,g,p,v,m,y,b,x,w,E,_,S,C,k,A,T,O,P,R;return o<gt?null:(o=1/o,i*=o,a*=o,s*=o,u=Math.sin(t),l=Math.cos(t),c=1-l,h=e[0],d=e[1],f=e[2],g=e[3],p=e[4],v=e[5],m=e[6],y=e[7],b=e[8],x=e[9],w=e[10],E=e[11],_=i*i*c+l,S=a*i*c+s*u,C=s*i*c-a*u,k=i*a*c-s*u,A=a*a*c+l,T=s*a*c+i*u,O=i*s*c+a*u,P=a*s*c-i*u,R=s*s*c+l,n[0]=h*_+p*S+b*C,n[1]=d*_+v*S+x*C,n[2]=f*_+m*S+w*C,n[3]=g*_+y*S+E*C,n[4]=h*k+p*A+b*T,n[5]=d*k+v*A+x*T,n[6]=f*k+m*A+w*T,n[7]=g*k+y*A+E*T,n[8]=h*O+p*P+b*R,n[9]=d*O+v*P+x*R,n[10]=f*O+m*P+w*R,n[11]=g*O+y*P+E*R,e!==n&&(n[12]=e[12],n[13]=e[13],n[14]=e[14],n[15]=e[15]),n)}function BO(n,e,t){var r=Math.sin(t),i=Math.cos(t),a=e[4],s=e[5],o=e[6],u=e[7],l=e[8],c=e[9],h=e[10],d=e[11];return e!==n&&(n[0]=e[0],n[1]=e[1],n[2]=e[2],n[3]=e[3],n[12]=e[12],n[13]=e[13],n[14]=e[14],n[15]=e[15]),n[4]=a*i+l*r,n[5]=s*i+c*r,n[6]=o*i+h*r,n[7]=u*i+d*r,n[8]=l*i-a*r,n[9]=c*i-s*r,n[10]=h*i-o*r,n[11]=d*i-u*r,n}function zO(n,e,t){var r=Math.sin(t),i=Math.cos(t),a=e[0],s=e[1],o=e[2],u=e[3],l=e[8],c=e[9],h=e[10],d=e[11];return e!==n&&(n[4]=e[4],n[5]=e[5],n[6]=e[6],n[7]=e[7],n[12]=e[12],n[13]=e[13],n[14]=e[14],n[15]=e[15]),n[0]=a*i-l*r,n[1]=s*i-c*r,n[2]=o*i-h*r,n[3]=u*i-d*r,n[8]=a*r+l*i,n[9]=s*r+c*i,n[10]=o*r+h*i,n[11]=u*r+d*i,n}function wL(n,e,t){var r=Math.sin(t),i=Math.cos(t),a=e[0],s=e[1],o=e[2],u=e[3],l=e[4],c=e[5],h=e[6],d=e[7];return e!==n&&(n[8]=e[8],n[9]=e[9],n[10]=e[10],n[11]=e[11],n[12]=e[12],n[13]=e[13],n[14]=e[14],n[15]=e[15]),n[0]=a*i+l*r,n[1]=s*i+c*r,n[2]=o*i+h*r,n[3]=u*i+d*r,n[4]=l*i-a*r,n[5]=c*i-s*r,n[6]=h*i-o*r,n[7]=d*i-u*r,n}function Ia(n,e){return n[0]=1,n[1]=0,n[2]=0,n[3]=0,n[4]=0,n[5]=1,n[6]=0,n[7]=0,n[8]=0,n[9]=0,n[10]=1,n[11]=0,n[12]=e[0],n[13]=e[1],n[14]=e[2],n[15]=1,n}function Cs(n,e){return n[0]=e[0],n[1]=0,n[2]=0,n[3]=0,n[4]=0,n[5]=e[1],n[6]=0,n[7]=0,n[8]=0,n[9]=0,n[10]=e[2],n[11]=0,n[12]=0,n[13]=0,n[14]=0,n[15]=1,n}function $O(n,e,t){var r=t[0],i=t[1],a=t[2],s=Math.hypot(r,i,a),o,u,l;return s<gt?null:(s=1/s,r*=s,i*=s,a*=s,o=Math.sin(e),u=Math.cos(e),l=1-u,n[0]=r*r*l+u,n[1]=i*r*l+a*o,n[2]=a*r*l-i*o,n[3]=0,n[4]=r*i*l-a*o,n[5]=i*i*l+u,n[6]=a*i*l+r*o,n[7]=0,n[8]=r*a*l+i*o,n[9]=i*a*l-r*o,n[10]=a*a*l+u,n[11]=0,n[12]=0,n[13]=0,n[14]=0,n[15]=1,n)}function jO(n,e){var t=Math.sin(e),r=Math.cos(e);return n[0]=1,n[1]=0,n[2]=0,n[3]=0,n[4]=0,n[5]=r,n[6]=t,n[7]=0,n[8]=0,n[9]=-t,n[10]=r,n[11]=0,n[12]=0,n[13]=0,n[14]=0,n[15]=1,n}function qO(n,e){var t=Math.sin(e),r=Math.cos(e);return n[0]=r,n[1]=0,n[2]=-t,n[3]=0,n[4]=0,n[5]=1,n[6]=0,n[7]=0,n[8]=t,n[9]=0,n[10]=r,n[11]=0,n[12]=0,n[13]=0,n[14]=0,n[15]=1,n}function Ky(n,e){var t=Math.sin(e),r=Math.cos(e);return n[0]=r,n[1]=t,n[2]=0,n[3]=0,n[4]=-t,n[5]=r,n[6]=0,n[7]=0,n[8]=0,n[9]=0,n[10]=1,n[11]=0,n[12]=0,n[13]=0,n[14]=0,n[15]=1,n}function GO(n,e,t){var r=e[0],i=e[1],a=e[2],s=e[3],o=r+r,u=i+i,l=a+a,c=r*o,h=r*u,d=r*l,f=i*u,g=i*l,p=a*l,v=s*o,m=s*u,y=s*l;return n[0]=1-(f+p),n[1]=h+y,n[2]=d-m,n[3]=0,n[4]=h-y,n[5]=1-(c+p),n[6]=g+v,n[7]=0,n[8]=d+m,n[9]=g-v,n[10]=1-(c+f),n[11]=0,n[12]=t[0],n[13]=t[1],n[14]=t[2],n[15]=1,n}function EL(n,e){var t=new zt(3),r=-e[0],i=-e[1],a=-e[2],s=e[3],o=e[4],u=e[5],l=e[6],c=e[7],h=r*r+i*i+a*a+s*s;return h>0?(t[0]=(o*s+c*r+u*a-l*i)*2/h,t[1]=(u*s+c*i+l*r-o*a)*2/h,t[2]=(l*s+c*a+o*i-u*r)*2/h):(t[0]=(o*s+c*r+u*a-l*i)*2,t[1]=(u*s+c*i+l*r-o*a)*2,t[2]=(l*s+c*a+o*i-u*r)*2),GO(n,e,t),n}function nd(n,e){return n[0]=e[12],n[1]=e[13],n[2]=e[14],n}function eu(n,e){var t=e[0],r=e[1],i=e[2],a=e[4],s=e[5],o=e[6],u=e[8],l=e[9],c=e[10];return n[0]=Math.hypot(t,r,i),n[1]=Math.hypot(a,s,o),n[2]=Math.hypot(u,l,c),n}function rd(n,e){var t=new zt(3);eu(t,e);var r=1/t[0],i=1/t[1],a=1/t[2],s=e[0]*r,o=e[1]*i,u=e[2]*a,l=e[4]*r,c=e[5]*i,h=e[6]*a,d=e[8]*r,f=e[9]*i,g=e[10]*a,p=s+c+g,v=0;return p>0?(v=Math.sqrt(p+1)*2,n[3]=.25*v,n[0]=(h-f)/v,n[1]=(d-u)/v,n[2]=(o-l)/v):s>c&&s>g?(v=Math.sqrt(1+s-c-g)*2,n[3]=(h-f)/v,n[0]=.25*v,n[1]=(o+l)/v,n[2]=(d+u)/v):c>g?(v=Math.sqrt(1+c-s-g)*2,n[3]=(d-u)/v,n[0]=(o+l)/v,n[1]=.25*v,n[2]=(h+f)/v):(v=Math.sqrt(1+g-s-c)*2,n[3]=(o-l)/v,n[0]=(d+u)/v,n[1]=(h+f)/v,n[2]=.25*v),n}function _L(n,e,t,r){var i=e[0],a=e[1],s=e[2],o=e[3],u=i+i,l=a+a,c=s+s,h=i*u,d=i*l,f=i*c,g=a*l,p=a*c,v=s*c,m=o*u,y=o*l,b=o*c,x=r[0],w=r[1],E=r[2];return n[0]=(1-(g+v))*x,n[1]=(d+b)*x,n[2]=(f-y)*x,n[3]=0,n[4]=(d-b)*w,n[5]=(1-(h+v))*w,n[6]=(p+m)*w,n[7]=0,n[8]=(f+y)*E,n[9]=(p-m)*E,n[10]=(1-(h+g))*E,n[11]=0,n[12]=t[0],n[13]=t[1],n[14]=t[2],n[15]=1,n}function ol(n,e,t,r,i){var a=e[0],s=e[1],o=e[2],u=e[3],l=a+a,c=s+s,h=o+o,d=a*l,f=a*c,g=a*h,p=s*c,v=s*h,m=o*h,y=u*l,b=u*c,x=u*h,w=r[0],E=r[1],_=r[2],S=i[0],C=i[1],k=i[2],A=(1-(p+m))*w,T=(f+x)*w,O=(g-b)*w,P=(f-x)*E,R=(1-(d+m))*E,N=(v+y)*E,D=(g+b)*_,M=(v-y)*_,F=(1-(d+p))*_;return n[0]=A,n[1]=T,n[2]=O,n[3]=0,n[4]=P,n[5]=R,n[6]=N,n[7]=0,n[8]=D,n[9]=M,n[10]=F,n[11]=0,n[12]=t[0]+S-(A*S+P*C+D*k),n[13]=t[1]+C-(T*S+R*C+M*k),n[14]=t[2]+k-(O*S+N*C+F*k),n[15]=1,n}function Y2(n,e){var t=e[0],r=e[1],i=e[2],a=e[3],s=t+t,o=r+r,u=i+i,l=t*s,c=r*s,h=r*o,d=i*s,f=i*o,g=i*u,p=a*s,v=a*o,m=a*u;return n[0]=1-h-g,n[1]=c+m,n[2]=d-v,n[3]=0,n[4]=c-m,n[5]=1-l-g,n[6]=f+p,n[7]=0,n[8]=d+v,n[9]=f-p,n[10]=1-l-h,n[11]=0,n[12]=0,n[13]=0,n[14]=0,n[15]=1,n}function SL(n,e,t,r,i,a,s){var o=1/(t-e),u=1/(i-r),l=1/(a-s);return n[0]=a*2*o,n[1]=0,n[2]=0,n[3]=0,n[4]=0,n[5]=a*2*u,n[6]=0,n[7]=0,n[8]=(t+e)*o,n[9]=(i+r)*u,n[10]=(s+a)*l,n[11]=-1,n[12]=0,n[13]=0,n[14]=s*a*2*l,n[15]=0,n}function WO(n,e,t,r,i){var a=1/Math.tan(e/2),s;return n[0]=a/t,n[1]=0,n[2]=0,n[3]=0,n[4]=0,n[5]=a,n[6]=0,n[7]=0,n[8]=0,n[9]=0,n[11]=-1,n[12]=0,n[13]=0,n[15]=0,i!=null&&i!==1/0?(s=1/(r-i),n[10]=(i+r)*s,n[14]=2*i*r*s):(n[10]=-1,n[14]=-2*r),n}var kL=WO;function CL(n,e,t,r,i){var a=1/Math.tan(e/2),s;return n[0]=a/t,n[1]=0,n[2]=0,n[3]=0,n[4]=0,n[5]=a,n[6]=0,n[7]=0,n[8]=0,n[9]=0,n[11]=-1,n[12]=0,n[13]=0,n[15]=0,i!=null&&i!==1/0?(s=1/(r-i),n[10]=i*s,n[14]=i*r*s):(n[10]=-1,n[14]=-r),n}function AL(n,e,t,r){var i=Math.tan(e.upDegrees*Math.PI/180),a=Math.tan(e.downDegrees*Math.PI/180),s=Math.tan(e.leftDegrees*Math.PI/180),o=Math.tan(e.rightDegrees*Math.PI/180),u=2/(s+o),l=2/(i+a);return n[0]=u,n[1]=0,n[2]=0,n[3]=0,n[4]=0,n[5]=l,n[6]=0,n[7]=0,n[8]=-((s-o)*u*.5),n[9]=(i-a)*l*.5,n[10]=r/(t-r),n[11]=-1,n[12]=0,n[13]=0,n[14]=r*t/(t-r),n[15]=0,n}function VO(n,e,t,r,i,a,s){var o=1/(e-t),u=1/(r-i),l=1/(a-s);return n[0]=-2*o,n[1]=0,n[2]=0,n[3]=0,n[4]=0,n[5]=-2*u,n[6]=0,n[7]=0,n[8]=0,n[9]=0,n[10]=2*l,n[11]=0,n[12]=(e+t)*o,n[13]=(i+r)*u,n[14]=(s+a)*l,n[15]=1,n}var UO=VO;function HO(n,e,t,r,i,a,s){var o=1/(e-t),u=1/(r-i),l=1/(a-s);return n[0]=-2*o,n[1]=0,n[2]=0,n[3]=0,n[4]=0,n[5]=-2*u,n[6]=0,n[7]=0,n[8]=0,n[9]=0,n[10]=l,n[11]=0,n[12]=(e+t)*o,n[13]=(i+r)*u,n[14]=a*l,n[15]=1,n}function YO(n,e,t,r){var i,a,s,o,u,l,c,h,d,f,g=e[0],p=e[1],v=e[2],m=r[0],y=r[1],b=r[2],x=t[0],w=t[1],E=t[2];return Math.abs(g-x)<gt&&Math.abs(p-w)<gt&&Math.abs(v-E)<gt?is(n):(c=g-x,h=p-w,d=v-E,f=1/Math.hypot(c,h,d),c*=f,h*=f,d*=f,i=y*d-b*h,a=b*c-m*d,s=m*h-y*c,f=Math.hypot(i,a,s),f?(f=1/f,i*=f,a*=f,s*=f):(i=0,a=0,s=0),o=h*s-d*a,u=d*i-c*s,l=c*a-h*i,f=Math.hypot(o,u,l),f?(f=1/f,o*=f,u*=f,l*=f):(o=0,u=0,l=0),n[0]=i,n[1]=o,n[2]=c,n[3]=0,n[4]=a,n[5]=u,n[6]=h,n[7]=0,n[8]=s,n[9]=l,n[10]=d,n[11]=0,n[12]=-(i*g+a*p+s*v),n[13]=-(o*g+u*p+l*v),n[14]=-(c*g+h*p+d*v),n[15]=1,n)}function TL(n,e,t,r){var i=e[0],a=e[1],s=e[2],o=r[0],u=r[1],l=r[2],c=i-t[0],h=a-t[1],d=s-t[2],f=c*c+h*h+d*d;f>0&&(f=1/Math.sqrt(f),c*=f,h*=f,d*=f);var g=u*d-l*h,p=l*c-o*d,v=o*h-u*c;return f=g*g+p*p+v*v,f>0&&(f=1/Math.sqrt(f),g*=f,p*=f,v*=f),n[0]=g,n[1]=p,n[2]=v,n[3]=0,n[4]=h*v-d*p,n[5]=d*g-c*v,n[6]=c*p-h*g,n[7]=0,n[8]=c,n[9]=h,n[10]=d,n[11]=0,n[12]=i,n[13]=a,n[14]=s,n[15]=1,n}function OL(n){return"mat4("+n[0]+", "+n[1]+", "+n[2]+", "+n[3]+", "+n[4]+", "+n[5]+", "+n[6]+", "+n[7]+", "+n[8]+", "+n[9]+", "+n[10]+", "+n[11]+", "+n[12]+", "+n[13]+", "+n[14]+", "+n[15]+")"}function ML(n){return Math.hypot(n[0],n[1],n[2],n[3],n[4],n[5],n[6],n[7],n[8],n[9],n[10],n[11],n[12],n[13],n[14],n[15])}function PL(n,e,t){return n[0]=e[0]+t[0],n[1]=e[1]+t[1],n[2]=e[2]+t[2],n[3]=e[3]+t[3],n[4]=e[4]+t[4],n[5]=e[5]+t[5],n[6]=e[6]+t[6],n[7]=e[7]+t[7],n[8]=e[8]+t[8],n[9]=e[9]+t[9],n[10]=e[10]+t[10],n[11]=e[11]+t[11],n[12]=e[12]+t[12],n[13]=e[13]+t[13],n[14]=e[14]+t[14],n[15]=e[15]+t[15],n}function XO(n,e,t){return n[0]=e[0]-t[0],n[1]=e[1]-t[1],n[2]=e[2]-t[2],n[3]=e[3]-t[3],n[4]=e[4]-t[4],n[5]=e[5]-t[5],n[6]=e[6]-t[6],n[7]=e[7]-t[7],n[8]=e[8]-t[8],n[9]=e[9]-t[9],n[10]=e[10]-t[10],n[11]=e[11]-t[11],n[12]=e[12]-t[12],n[13]=e[13]-t[13],n[14]=e[14]-t[14],n[15]=e[15]-t[15],n}function NL(n,e,t){return n[0]=e[0]*t,n[1]=e[1]*t,n[2]=e[2]*t,n[3]=e[3]*t,n[4]=e[4]*t,n[5]=e[5]*t,n[6]=e[6]*t,n[7]=e[7]*t,n[8]=e[8]*t,n[9]=e[9]*t,n[10]=e[10]*t,n[11]=e[11]*t,n[12]=e[12]*t,n[13]=e[13]*t,n[14]=e[14]*t,n[15]=e[15]*t,n}function DL(n,e,t,r){return n[0]=e[0]+t[0]*r,n[1]=e[1]+t[1]*r,n[2]=e[2]+t[2]*r,n[3]=e[3]+t[3]*r,n[4]=e[4]+t[4]*r,n[5]=e[5]+t[5]*r,n[6]=e[6]+t[6]*r,n[7]=e[7]+t[7]*r,n[8]=e[8]+t[8]*r,n[9]=e[9]+t[9]*r,n[10]=e[10]+t[10]*r,n[11]=e[11]+t[11]*r,n[12]=e[12]+t[12]*r,n[13]=e[13]+t[13]*r,n[14]=e[14]+t[14]*r,n[15]=e[15]+t[15]*r,n}function Zy(n,e){return n[0]===e[0]&&n[1]===e[1]&&n[2]===e[2]&&n[3]===e[3]&&n[4]===e[4]&&n[5]===e[5]&&n[6]===e[6]&&n[7]===e[7]&&n[8]===e[8]&&n[9]===e[9]&&n[10]===e[10]&&n[11]===e[11]&&n[12]===e[12]&&n[13]===e[13]&&n[14]===e[14]&&n[15]===e[15]}function RL(n,e){var t=n[0],r=n[1],i=n[2],a=n[3],s=n[4],o=n[5],u=n[6],l=n[7],c=n[8],h=n[9],d=n[10],f=n[11],g=n[12],p=n[13],v=n[14],m=n[15],y=e[0],b=e[1],x=e[2],w=e[3],E=e[4],_=e[5],S=e[6],C=e[7],k=e[8],A=e[9],T=e[10],O=e[11],P=e[12],R=e[13],N=e[14],D=e[15];return Math.abs(t-y)<=gt*Math.max(1,Math.abs(t),Math.abs(y))&&Math.abs(r-b)<=gt*Math.max(1,Math.abs(r),Math.abs(b))&&Math.abs(i-x)<=gt*Math.max(1,Math.abs(i),Math.abs(x))&&Math.abs(a-w)<=gt*Math.max(1,Math.abs(a),Math.abs(w))&&Math.abs(s-E)<=gt*Math.max(1,Math.abs(s),Math.abs(E))&&Math.abs(o-_)<=gt*Math.max(1,Math.abs(o),Math.abs(_))&&Math.abs(u-S)<=gt*Math.max(1,Math.abs(u),Math.abs(S))&&Math.abs(l-C)<=gt*Math.max(1,Math.abs(l),Math.abs(C))&&Math.abs(c-k)<=gt*Math.max(1,Math.abs(c),Math.abs(k))&&Math.abs(h-A)<=gt*Math.max(1,Math.abs(h),Math.abs(A))&&Math.abs(d-T)<=gt*Math.max(1,Math.abs(d),Math.abs(T))&&Math.abs(f-O)<=gt*Math.max(1,Math.abs(f),Math.abs(O))&&Math.abs(g-P)<=gt*Math.max(1,Math.abs(g),Math.abs(P))&&Math.abs(p-R)<=gt*Math.max(1,Math.abs(p),Math.abs(R))&&Math.abs(v-N)<=gt*Math.max(1,Math.abs(v),Math.abs(N))&&Math.abs(m-D)<=gt*Math.max(1,Math.abs(m),Math.abs(D))}var KO=On,LL=XO;const IL=Object.freeze(Object.defineProperty({__proto__:null,add:PL,adjoint:bL,clone:DO,copy:Qo,create:nt,determinant:IO,equals:RL,exactEquals:Zy,frob:ML,fromQuat:Y2,fromQuat2:EL,fromRotation:$O,fromRotationTranslation:GO,fromRotationTranslationScale:_L,fromRotationTranslationScaleOrigin:ol,fromScaling:Cs,fromTranslation:Ia,fromValues:RO,fromXRotation:jO,fromYRotation:qO,fromZRotation:Ky,frustum:SL,getRotation:rd,getScaling:eu,getTranslation:nd,identity:is,invert:Ei,lookAt:YO,mul:KO,multiply:On,multiplyScalar:NL,multiplyScalarAndAdd:DL,ortho:UO,orthoNO:VO,orthoZO:HO,perspective:kL,perspectiveFromFieldOfView:AL,perspectiveNO:WO,perspectiveZO:CL,rotate:xL,rotateX:BO,rotateY:zO,rotateZ:wL,scale:FO,set:Xy,str:OL,sub:LL,subtract:XO,targetTo:TL,translate:zo,transpose:LO},Symbol.toStringTag,{value:"Module"}));function Ie(){var n=new zt(3);return zt!=Float32Array&&(n[0]=0,n[1]=0,n[2]=0),n}function Ui(n){var e=new zt(3);return e[0]=n[0],e[1]=n[1],e[2]=n[2],e}function Zi(n){var e=n[0],t=n[1],r=n[2];return Math.hypot(e,t,r)}function st(n,e,t){var r=new zt(3);return r[0]=n,r[1]=e,r[2]=t,r}function _i(n,e){return n[0]=e[0],n[1]=e[1],n[2]=e[2],n}function An(n,e,t,r){return n[0]=e,n[1]=t,n[2]=r,n}function Ja(n,e,t){return n[0]=e[0]+t[0],n[1]=e[1]+t[1],n[2]=e[2]+t[2],n}function Jy(n,e,t){return n[0]=e[0]-t[0],n[1]=e[1]-t[1],n[2]=e[2]-t[2],n}function FL(n,e,t){return n[0]=e[0]*t[0],n[1]=e[1]*t[1],n[2]=e[2]*t[2],n}function BL(n,e,t){return n[0]=Math.min(e[0],t[0]),n[1]=Math.min(e[1],t[1]),n[2]=Math.min(e[2],t[2]),n}function zL(n,e,t){return n[0]=Math.max(e[0],t[0]),n[1]=Math.max(e[1],t[1]),n[2]=Math.max(e[2],t[2]),n}function id(n,e,t){return n[0]=e[0]*t,n[1]=e[1]*t,n[2]=e[2]*t,n}function $L(n,e){var t=e[0]-n[0],r=e[1]-n[1],i=e[2]-n[2];return Math.hypot(t,r,i)}function $s(n,e){var t=e[0],r=e[1],i=e[2],a=t*t+r*r+i*i;return a>0&&(a=1/Math.sqrt(a)),n[0]=e[0]*a,n[1]=e[1]*a,n[2]=e[2]*a,n}function Si(n,e){return n[0]*e[0]+n[1]*e[1]+n[2]*e[2]}function Lh(n,e,t){var r=e[0],i=e[1],a=e[2],s=t[0],o=t[1],u=t[2];return n[0]=i*u-a*o,n[1]=a*s-r*u,n[2]=r*o-i*s,n}function Qy(n,e,t,r){var i=e[0],a=e[1],s=e[2];return n[0]=i+r*(t[0]-i),n[1]=a+r*(t[1]-a),n[2]=s+r*(t[2]-s),n}function Mn(n,e,t){var r=e[0],i=e[1],a=e[2],s=t[3]*r+t[7]*i+t[11]*a+t[15];return s=s||1,n[0]=(t[0]*r+t[4]*i+t[8]*a+t[12])/s,n[1]=(t[1]*r+t[5]*i+t[9]*a+t[13])/s,n[2]=(t[2]*r+t[6]*i+t[10]*a+t[14])/s,n}function jL(n,e,t){var r=e[0],i=e[1],a=e[2];return n[0]=r*t[0]+i*t[3]+a*t[6],n[1]=r*t[1]+i*t[4]+a*t[7],n[2]=r*t[2]+i*t[5]+a*t[8],n}function qL(n,e,t){var r=t[0],i=t[1],a=t[2],s=t[3],o=e[0],u=e[1],l=e[2],c=i*l-a*u,h=a*o-r*l,d=r*u-i*o,f=i*d-a*h,g=a*c-r*d,p=r*h-i*c,v=s*2;return c*=v,h*=v,d*=v,f*=2,g*=2,p*=2,n[0]=o+c+f,n[1]=u+h+g,n[2]=l+d+p,n}function Au(n,e){var t=n[0],r=n[1],i=n[2],a=e[0],s=e[1],o=e[2];return Math.abs(t-a)<=gt*Math.max(1,Math.abs(t),Math.abs(a))&&Math.abs(r-s)<=gt*Math.max(1,Math.abs(r),Math.abs(s))&&Math.abs(i-o)<=gt*Math.max(1,Math.abs(i),Math.abs(o))}var GL=Jy,aE=$L,ZO=Zi;(function(){var n=Ie();return function(e,t,r,i,a,s){var o,u;for(t||(t=3),r||(r=0),i?u=Math.min(i*t+r,e.length):u=e.length,o=r;o<u;o+=t)n[0]=e[o],n[1]=e[o+1],n[2]=e[o+2],a(n,n,s),e[o]=n[0],e[o+1]=n[1],e[o+2]=n[2];return e}})();function ki(){var n=new zt(4);return zt!=Float32Array&&(n[0]=0,n[1]=0,n[2]=0,n[3]=0),n}function ju(n,e,t,r){var i=new zt(4);return i[0]=n,i[1]=e,i[2]=t,i[3]=r,i}function WL(n,e){return n[0]=e[0],n[1]=e[1],n[2]=e[2],n[3]=e[3],n}function VL(n,e,t,r,i){return n[0]=e,n[1]=t,n[2]=r,n[3]=i,n}function UL(n,e){var t=e[0],r=e[1],i=e[2],a=e[3],s=t*t+r*r+i*i+a*a;return s>0&&(s=1/Math.sqrt(s)),n[0]=t*s,n[1]=r*s,n[2]=i*s,n[3]=a*s,n}function ta(n,e,t){var r=e[0],i=e[1],a=e[2],s=e[3];return n[0]=t[0]*r+t[4]*i+t[8]*a+t[12]*s,n[1]=t[1]*r+t[5]*i+t[9]*a+t[13]*s,n[2]=t[2]*r+t[6]*i+t[10]*a+t[14]*s,n[3]=t[3]*r+t[7]*i+t[11]*a+t[15]*s,n}(function(){var n=ki();return function(e,t,r,i,a,s){var o,u;for(t||(t=4),r||(r=0),i?u=Math.min(i*t+r,e.length):u=e.length,o=r;o<u;o+=t)n[0]=e[o],n[1]=e[o+1],n[2]=e[o+2],n[3]=e[o+3],a(n,n,s),e[o]=n[0],e[o+1]=n[1],e[o+2]=n[2],e[o+3]=n[3];return e}})();function Wt(){var n=new zt(4);return zt!=Float32Array&&(n[0]=0,n[1]=0,n[2]=0),n[3]=1,n}function ja(n,e,t){t=t*.5;var r=Math.sin(t);return n[0]=r*e[0],n[1]=r*e[1],n[2]=r*e[2],n[3]=Math.cos(t),n}function Qa(n,e,t){var r=e[0],i=e[1],a=e[2],s=e[3],o=t[0],u=t[1],l=t[2],c=t[3];return n[0]=r*c+s*o+i*l-a*u,n[1]=i*c+s*u+a*o-r*l,n[2]=a*c+s*l+r*u-i*o,n[3]=s*c-r*o-i*u-a*l,n}function G0(n,e,t,r){var i=e[0],a=e[1],s=e[2],o=e[3],u=t[0],l=t[1],c=t[2],h=t[3],d,f,g,p,v;return f=i*u+a*l+s*c+o*h,f<0&&(f=-f,u=-u,l=-l,c=-c,h=-h),1-f>gt?(d=Math.acos(f),g=Math.sin(d),p=Math.sin((1-r)*d)/g,v=Math.sin(r*d)/g):(p=1-r,v=r),n[0]=p*i+v*u,n[1]=p*a+v*l,n[2]=p*s+v*c,n[3]=p*o+v*h,n}function W0(n,e){var t=e[0],r=e[1],i=e[2],a=e[3],s=t*t+r*r+i*i+a*a,o=s?1/s:0;return n[0]=-t*o,n[1]=-r*o,n[2]=-i*o,n[3]=a*o,n}function HL(n,e){var t=e[0]+e[4]+e[8],r;if(t>0)r=Math.sqrt(t+1),n[3]=.5*r,r=.5/r,n[0]=(e[5]-e[7])*r,n[1]=(e[6]-e[2])*r,n[2]=(e[1]-e[3])*r;else{var i=0;e[4]>e[0]&&(i=1),e[8]>e[i*3+i]&&(i=2);var a=(i+1)%3,s=(i+2)%3;r=Math.sqrt(e[i*3+i]-e[a*3+a]-e[s*3+s]+1),n[i]=.5*r,r=.5/r,n[3]=(e[a*3+s]-e[s*3+a])*r,n[a]=(e[a*3+i]+e[i*3+a])*r,n[s]=(e[s*3+i]+e[i*3+s])*r}return n}function _c(n,e,t,r){var i=.5*Math.PI/180;e*=i,t*=i,r*=i;var a=Math.sin(e),s=Math.cos(e),o=Math.sin(t),u=Math.cos(t),l=Math.sin(r),c=Math.cos(r);return n[0]=a*u*c-s*o*l,n[1]=s*o*c+a*u*l,n[2]=s*u*l-a*o*c,n[3]=s*u*c+a*o*l,n}var YL=ju,Sc=WL,sE=VL,oE=Qa,ad=UL;(function(){var n=Ie(),e=st(1,0,0),t=st(0,1,0);return function(r,i,a){var s=Si(i,a);return s<-.999999?(Lh(n,e,i),ZO(n)<1e-6&&Lh(n,t,i),$s(n,n),ja(r,n,Math.PI),r):s>.999999?(r[0]=0,r[1]=0,r[2]=0,r[3]=1,r):(Lh(n,i,a),r[0]=n[0],r[1]=n[1],r[2]=n[2],r[3]=1+s,ad(r,r))}})();(function(){var n=Wt(),e=Wt();return function(t,r,i,a,s,o){return G0(n,r,s,o),G0(e,i,a,o),G0(t,n,e,2*o*(1-o)),t}})();(function(){var n=NO();return function(e,t,r,i){return n[0]=r[0],n[3]=r[1],n[6]=r[2],n[1]=i[0],n[4]=i[1],n[7]=i[2],n[2]=-t[0],n[5]=-t[1],n[8]=-t[2],ad(e,HL(e,n))}})();function X2(){var n=new zt(2);return zt!=Float32Array&&(n[0]=0,n[1]=0),n}function XL(n,e){return n[0]=e[0],n[1]=e[1],n}function KL(n,e,t){return n[0]=e,n[1]=t,n}function ZL(n,e){var t=e[0],r=e[1],i=t*t+r*r;return i>0&&(i=1/Math.sqrt(i)),n[0]=e[0]*i,n[1]=e[1]*i,n}function JL(n,e){return n[0]*e[0]+n[1]*e[1]}function QL(n,e){return n[0]===e[0]&&n[1]===e[1]}(function(){var n=X2();return function(e,t,r,i,a,s){var o,u;for(t||(t=2),r||(r=0),i?u=Math.min(i*t+r,e.length):u=e.length,o=r;o<u;o+=t)n[0]=e[o],n[1]=e[o+1],a(n,n,s),e[o]=n[0],e[o+1]=n[1];return e}})();var eI=function(n){return n!==null&&typeof n!="function"&&isFinite(n.length)};const bl=eI;var tI=function(n,e){return bl(n)?n.indexOf(e)>-1:!1};const nI=tI;var rI=function(n,e){if(!bl(n))return n;for(var t=[],r=0;r<n.length;r++){var i=n[r];e(i,r)&&t.push(i)}return t};const iI=rI;var aI=function(n,e){return e===void 0&&(e=[]),iI(n,function(t){return!nI(e,t)})};const sI=aI;function se(n){return typeof n=="function"}function de(n){return n==null}function Er(n){return Array.isArray(n)}const Nt=function(n){var e=typeof n;return n!==null&&e==="object"||e==="function"};function JO(n,e){if(n){var t;if(Er(n))for(var r=0,i=n.length;r<i&&(t=e(n[r],r),t!==!1);r++);else if(Nt(n)){for(var a in n)if(n.hasOwnProperty(a)&&(t=e(n[a],a),t===!1))break}}}var oI=function(n){return typeof n=="object"&&n!==null};const eb=oI;var uI={}.toString,lI=function(n,e){return uI.call(n)==="[object "+e+"]"};const QO=lI;var cI=function(n){if(!eb(n)||!QO(n,"Object"))return!1;if(Object.getPrototypeOf(n)===null)return!0;for(var e=n;Object.getPrototypeOf(e)!==null;)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(n)===e};const tu=cI;function sd(n){if(!Array.isArray(n))return-1/0;var e=n.length;if(!e)return-1/0;for(var t=n[0],r=1;r<e;r++)t=Math.max(t,n[r]);return t}const od=function(n){if(Er(n))return n.reduce(function(e,t){return Math.min(e,t)},n[0])};var hI=function(n,e,t){if(!Er(n)&&!tu(n))return n;var r=t;return JO(n,function(i,a){r=e(r,i,a)}),r};const dI=hI;function qe(n){return typeof n=="string"}function fI(n,e){e===void 0&&(e=new Map);var t=[];if(Array.isArray(n))for(var r=0,i=n.length;r<i;r++){var a=n[r];e.has(a)||(t.push(a),e.set(a,!0))}return t}var gI=Object.prototype.hasOwnProperty;function ef(n,e){if(!e||!Er(n))return{};for(var t={},r=se(e)?e:function(o){return o[e]},i,a=0;a<n.length;a++){var s=n[a];i=r(s),gI.call(t,i)?t[i].push(s):t[i]=[s]}return t}var pI=function(n,e,t){return n<e?e:n>t?t:n};const St=pI;function re(n){return typeof n=="number"}var vI=1e-5;function ul(n,e,t){return t===void 0&&(t=vI),n===e||Math.abs(n-e)<t}const mI=function(n,e){if(Er(n)){for(var t,r=-1/0,i=0;i<n.length;i++){var a=n[i],s=se(e)?e(a):a[e];s>r&&(t=a,r=s)}return t}},yI=function(n,e){if(Er(n)){for(var t,r=1/0,i=0;i<n.length;i++){var a=n[i],s=se(e)?e(a):a[e];s<r&&(t=a,r=s)}return t}};var bI=function(n,e){return(n%e+e)%e};const eM=bI,tM=function(n){return de(n)?"":n.toString()};var xI=function(n){var e=tM(n);return e.charAt(0).toLowerCase()+e.substring(1)};const wI=xI;function EI(n,e){return!n||!e?n:n.replace(/\\?\{([^{}]+)\}/g,function(t,r){return t.charAt(0)==="\\"?t.slice(1):e[r]===void 0?"":e[r]})}var _I=function(n){var e=tM(n);return e.charAt(0).toUpperCase()+e.substring(1)};const ud=_I;var SI={}.toString,kI=function(n){return SI.call(n).replace(/^\[object /,"").replace(/]$/,"")};const CI=kI;var AI=function(n){return QO(n,"Boolean")};const xl=AI;function TI(n){return n instanceof Date}function OI(n){return n===null}var MI=Object.prototype,PI=function(n){var e=n&&n.constructor,t=typeof e=="function"&&e.prototype||MI;return n===t};const NI=PI;var DI=function(n){return n===void 0};const me=DI;var tb=function(n){if(typeof n!="object"||n===null)return n;var e;if(Er(n)){e=[];for(var t=0,r=n.length;t<r;t++)typeof n[t]=="object"&&n[t]!=null?e[t]=tb(n[t]):e[t]=n[t]}else{e={};for(var i in n)typeof n[i]=="object"&&n[i]!=null?e[i]=tb(n[i]):e[i]=n[i]}return e};const nu=tb;function Xl(n,e,t){var r;return function(){var i=this,a=arguments,s=function(){r=null,t||n.apply(i,a)},o=t&&!r;clearTimeout(r),r=setTimeout(s,e),o&&n.apply(i,a)}}function RI(n){var e,t,r,i=n||1;function a(o,u){++e>i&&(r=t,s(1),++e),t[o]=u}function s(o){e=0,t=Object.create(null),o||(r=Object.create(null))}return s(),{clear:s,has:function(o){return t[o]!==void 0||r[o]!==void 0},get:function(o){var u=t[o];if(u!==void 0)return u;if((u=r[o])!==void 0)return a(o,u),u},set:function(o,u){t[o]!==void 0?t[o]=u:a(o,u)}}}var V0=new Map;function nb(n,e,t){t===void 0&&(t=128);var r=function(){for(var i=[],a=0;a<arguments.length;a++)i[a]=arguments[a];var s=e?e.apply(this,i):i[0];V0.has(n)||V0.set(n,RI(t));var o=V0.get(n);if(o.has(s))return o.get(s);var u=n.apply(this,i);return o.set(s,u),u};return r}var LI=5;function II(n,e){if(Object.hasOwn)return Object.hasOwn(n,e);if(n==null)throw new TypeError("Cannot convert undefined or null to object");return Object.prototype.hasOwnProperty.call(Object(n),e)}function nM(n,e,t,r){t=t||0,r=r||LI;for(var i in e)if(II(e,i)){var a=e[i];a!==null&&tu(a)?(tu(n[i])||(n[i]={}),t<r?nM(n[i],a,t+1,r):n[i]=e[i]):Er(a)?(n[i]=[],n[i]=n[i].concat(a)):a!==void 0&&(n[i]=a)}}var FI=function(n){for(var e=[],t=1;t<arguments.length;t++)e[t-1]=arguments[t];for(var r=0;r<e.length;r+=1)nM(n,e[r]);return n};const jn=FI;var BI=Object.prototype.hasOwnProperty;function wi(n){if(de(n))return!0;if(bl(n))return!n.length;var e=CI(n);if(e==="Map"||e==="Set")return!n.size;if(NI(n))return!Object.keys(n).length;for(var t in n)if(BI.call(n,t))return!1;return!0}var rb=function(n,e){if(n===e)return!0;if(!n||!e||qe(n)||qe(e))return!1;if(bl(n)||bl(e)){if(n.length!==e.length)return!1;for(var t=!0,r=0;r<n.length&&(t=rb(n[r],e[r]),!!t);r++);return t}if(eb(n)||eb(e)){var i=Object.keys(n),a=Object.keys(e);if(i.length!==a.length)return!1;for(var t=!0,r=0;r<i.length&&(t=rb(n[i[r]],e[i[r]]),!!t);r++);return t}return!1};const Dt=rb,Fn=function(n,e,t){for(var r=0,i=qe(e)?e.split("."):e;n&&r<i.length;)n=n[i[r++]];return n===void 0||r<i.length?t:n},wl=function(n,e,t){var r=n,i=qe(e)?e.split("."):e;return i.forEach(function(a,s){s<i.length-1?(Nt(r[a])||(r[a]=re(i[s+1])?[]:{}),r=r[a]):r[a]=t}),n};var zI=Object.prototype.hasOwnProperty;const Hs=function(n,e){if(n===null||!tu(n))return{};var t={};return JO(e,function(r){zI.call(n,r)&&(t[r]=n[r])}),t},K2=function(n,e){return dI(n,function(t,r,i){return e.includes(i)||(t[i]=r),t},{})},rM=function(n,e,t){var r,i,a,s,o=0;t||(t={});var u=function(){o=t.leading===!1?0:Date.now(),r=null,s=n.apply(i,a),r||(i=a=null)},l=function(){var c=Date.now();!o&&t.leading===!1&&(o=c);var h=e-(c-o);return i=this,a=arguments,h<=0||h>e?(r&&(clearTimeout(r),r=null),o=c,s=n.apply(i,a),r||(i=a=null)):!r&&t.trailing!==!1&&(r=setTimeout(u,h)),s};return l.cancel=function(){clearTimeout(r),o=0,r=i=a=null},l};var kc={};const $I=function(n){return n=n||"g",kc[n]?kc[n]+=1:kc[n]=1,n+kc[n]},U0=function(){},ib=function(n){return n};var ab=function(n,e){return ab=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])},ab(n,e)};function Ne(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");ab(n,e);function t(){this.constructor=n}n.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}var V=function(){return V=Object.assign||function(e){for(var t,r=1,i=arguments.length;r<i;r++){t=arguments[r];for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])}return e},V.apply(this,arguments)};function At(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(n);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(t[r[i]]=n[r[i]]);return t}function Pe(n,e,t,r){function i(a){return a instanceof t?a:new t(function(s){s(a)})}return new(t||(t=Promise))(function(a,s){function o(c){try{l(r.next(c))}catch(h){s(h)}}function u(c){try{l(r.throw(c))}catch(h){s(h)}}function l(c){c.done?a(c.value):i(c.value).then(o,u)}l((r=r.apply(n,e||[])).next())})}function Kl(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function L(n,e){var t=typeof Symbol=="function"&&n[Symbol.iterator];if(!t)return n;var r=t.call(n),i,a=[],s;try{for(;(e===void 0||e-- >0)&&!(i=r.next()).done;)a.push(i.value)}catch(o){s={error:o}}finally{try{i&&!i.done&&(t=r.return)&&t.call(r)}finally{if(s)throw s.error}}return a}function jI(){for(var n=0,e=0,t=arguments.length;e<t;e++)n+=arguments[e].length;for(var r=Array(n),i=0,e=0;e<t;e++)for(var a=arguments[e],s=0,o=a.length;s<o;s++,i++)r[i]=a[s];return r}function te(n,e,t){if(t||arguments.length===2)for(var r=0,i=e.length,a;r<i;r++)(a||!(r in e))&&(a||(a=Array.prototype.slice.call(e,0,r)),a[r]=e[r]);return n.concat(a||Array.prototype.slice.call(e))}function H0(n,e,t,r){if(t==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?n!==e||!r:!e.has(n))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t==="m"?r:t==="a"?r.call(n):r?r.value:e.get(n)}var iM={x1:0,y1:0,x2:0,y2:0,x:0,y:0,qx:null,qy:null};function qI(n,e,t){if(n[t].length>7){n[t].shift();for(var r=n[t],i=t;r.length;)e[t]="A",n.splice(i+=1,0,["C"].concat(r.splice(0,6)));n.splice(t,1)}}var ll={a:7,c:6,h:1,l:2,m:2,r:4,q:4,s:4,t:2,v:1,z:0};function aM(n){return Array.isArray(n)&&n.every(function(e){var t=e[0].toLowerCase();return ll[t]===e.length-1&&"achlmqstvz".includes(t)})}function sM(n){return aM(n)&&n.every(function(e){var t=e[0];return t===t.toUpperCase()})}function oM(n){return sM(n)&&n.every(function(e){var t=e[0];return"ACLMQZ".includes(t)})}function uE(n){for(var e=n.pathValue[n.segmentStart],t=e.toLowerCase(),r=n.data;r.length>=ll[t]&&(t==="m"&&r.length>2?(n.segments.push([e].concat(r.splice(0,2))),t="l",e=e==="m"?"l":"L"):n.segments.push([e].concat(r.splice(0,ll[t]))),!!ll[t]););}function GI(n){var e=n.index,t=n.pathValue,r=t.charCodeAt(e);if(r===48){n.param=0,n.index+=1;return}if(r===49){n.param=1,n.index+=1;return}n.err='[path-util]: invalid Arc flag "'.concat(t[e],'", expecting 0 or 1 at index ').concat(e)}function WI(n){return n>=48&&n<=57||n===43||n===45||n===46}function vo(n){return n>=48&&n<=57}function VI(n){var e=n.max,t=n.pathValue,r=n.index,i=r,a=!1,s=!1,o=!1,u=!1,l;if(i>=e){n.err="[path-util]: Invalid path value at index ".concat(i,', "pathValue" is missing param');return}if(l=t.charCodeAt(i),(l===43||l===45)&&(i+=1,l=t.charCodeAt(i)),!vo(l)&&l!==46){n.err="[path-util]: Invalid path value at index ".concat(i,', "').concat(t[i],'" is not a number');return}if(l!==46){if(a=l===48,i+=1,l=t.charCodeAt(i),a&&i<e&&l&&vo(l)){n.err="[path-util]: Invalid path value at index ".concat(r,', "').concat(t[r],'" illegal number');return}for(;i<e&&vo(t.charCodeAt(i));)i+=1,s=!0;l=t.charCodeAt(i)}if(l===46){for(u=!0,i+=1;vo(t.charCodeAt(i));)i+=1,o=!0;l=t.charCodeAt(i)}if(l===101||l===69){if(u&&!s&&!o){n.err="[path-util]: Invalid path value at index ".concat(i,', "').concat(t[i],'" invalid float exponent');return}if(i+=1,l=t.charCodeAt(i),(l===43||l===45)&&(i+=1),i<e&&vo(t.charCodeAt(i)))for(;i<e&&vo(t.charCodeAt(i));)i+=1;else{n.err="[path-util]: Invalid path value at index ".concat(i,', "').concat(t[i],'" invalid integer exponent');return}}n.index=i,n.param=+n.pathValue.slice(r,i)}function UI(n){var e=[5760,6158,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8239,8287,12288,65279];return n===10||n===13||n===8232||n===8233||n===32||n===9||n===11||n===12||n===160||n>=5760&&e.includes(n)}function Ih(n){for(var e=n.pathValue,t=n.max;n.index<t&&UI(e.charCodeAt(n.index));)n.index+=1}function HI(n){switch(n|32){case 109:case 122:case 108:case 104:case 118:case 99:case 115:case 113:case 116:case 97:return!0;default:return!1}}function YI(n){return(n|32)===97}function XI(n){var e=n.max,t=n.pathValue,r=n.index,i=t.charCodeAt(r),a=ll[t[r].toLowerCase()];if(n.segmentStart=r,!HI(i)){n.err='[path-util]: Invalid path value "'.concat(t[r],'" is not a path command');return}if(n.index+=1,Ih(n),n.data=[],!a){uE(n);return}for(;;){for(var s=a;s>0;s-=1){if(YI(i)&&(s===3||s===4)?GI(n):VI(n),n.err.length)return;n.data.push(n.param),Ih(n),n.index<e&&t.charCodeAt(n.index)===44&&(n.index+=1,Ih(n))}if(n.index>=n.max||!WI(t.charCodeAt(n.index)))break}uE(n)}var KI=function(){function n(e){this.pathValue=e,this.segments=[],this.max=e.length,this.index=0,this.param=0,this.segmentStart=0,this.data=[],this.err=""}return n}();function ZI(n){if(aM(n))return[].concat(n);var e=new KI(n);for(Ih(e);e.index<e.max&&!e.err.length;)XI(e);return e.err?e.err:e.segments}function JI(n){if(sM(n))return[].concat(n);var e=ZI(n),t=0,r=0,i=0,a=0;return e.map(function(s){var o=s.slice(1).map(Number),u=s[0],l=u.toUpperCase();if(u==="M")return t=o[0],r=o[1],i=t,a=r,["M",t,r];var c;if(u!==l)switch(l){case"A":c=[l,o[0],o[1],o[2],o[3],o[4],o[5]+t,o[6]+r];break;case"V":c=[l,o[0]+r];break;case"H":c=[l,o[0]+t];break;default:{var h=o.map(function(f,g){return f+(g%2?r:t)});c=[l].concat(h)}}else c=[l].concat(o);var d=c.length;switch(l){case"Z":t=i,r=a;break;case"H":t=c[1];break;case"V":r=c[1];break;default:t=c[d-2],r=c[d-1],l==="M"&&(i=t,a=r)}return c})}function QI(n,e){var t=n[0],r=e.x1,i=e.y1,a=e.x2,s=e.y2,o=n.slice(1).map(Number),u=n;if("TQ".includes(t)||(e.qx=null,e.qy=null),t==="H")u=["L",n[1],i];else if(t==="V")u=["L",r,n[1]];else if(t==="S"){var l=r*2-a,c=i*2-s;e.x1=l,e.y1=c,u=["C",l,c].concat(o)}else if(t==="T"){var h=r*2-e.qx,d=i*2-e.qy;e.qx=h,e.qy=d,u=["Q",h,d].concat(o)}else if(t==="Q"){var f=o[0],g=o[1];e.qx=f,e.qy=g}return u}function ld(n){if(oM(n))return[].concat(n);for(var e=JI(n),t=V({},iM),r=0;r<e.length;r+=1){e[r]=QI(e[r],t);var i=e[r],a=i.length;t.x1=+i[a-2],t.y1=+i[a-1],t.x2=+i[a-4]||t.x1,t.y2=+i[a-3]||t.y1}return e}function e9(n){return oM(n)&&n.every(function(e){var t=e[0];return"MC".includes(t)})}function Cc(n,e,t){var r=n*Math.cos(t)-e*Math.sin(t),i=n*Math.sin(t)+e*Math.cos(t);return{x:r,y:i}}function Z2(n,e,t,r,i,a,s,o,u,l){var c=n,h=e,d=t,f=r,g=o,p=u,v=Math.PI*120/180,m=Math.PI/180*(+i||0),y=[],b,x,w,E,_;if(l)x=l[0],w=l[1],E=l[2],_=l[3];else{b=Cc(c,h,-m),c=b.x,h=b.y,b=Cc(g,p,-m),g=b.x,p=b.y;var S=(c-g)/2,C=(h-p)/2,k=S*S/(d*d)+C*C/(f*f);k>1&&(k=Math.sqrt(k),d*=k,f*=k);var A=d*d,T=f*f,O=(a===s?-1:1)*Math.sqrt(Math.abs((A*T-A*C*C-T*S*S)/(A*C*C+T*S*S)));E=O*d*C/f+(c+g)/2,_=O*-f*S/d+(h+p)/2,x=Math.asin(((h-_)/f*Math.pow(10,9)>>0)/Math.pow(10,9)),w=Math.asin(((p-_)/f*Math.pow(10,9)>>0)/Math.pow(10,9)),x=c<E?Math.PI-x:x,w=g<E?Math.PI-w:w,x<0&&(x=Math.PI*2+x),w<0&&(w=Math.PI*2+w),s&&x>w&&(x-=Math.PI*2),!s&&w>x&&(w-=Math.PI*2)}var P=w-x;if(Math.abs(P)>v){var R=w,N=g,D=p;w=x+v*(s&&w>x?1:-1),g=E+d*Math.cos(w),p=_+f*Math.sin(w),y=Z2(g,p,d,f,i,0,s,N,D,[w,R,E,_])}P=w-x;var M=Math.cos(x),F=Math.sin(x),j=Math.cos(w),B=Math.sin(w),$=Math.tan(P/4),W=4/3*d*$,Y=4/3*f*$,K=[c,h],ee=[c+W*F,h-Y*M],ie=[g+W*B,p-Y*j],_e=[g,p];if(ee[0]=2*K[0]-ee[0],ee[1]=2*K[1]-ee[1],l)return ee.concat(ie,_e,y);y=ee.concat(ie,_e,y);for(var Ae=[],Be=0,Fe=y.length;Be<Fe;Be+=1)Ae[Be]=Be%2?Cc(y[Be-1],y[Be],m).y:Cc(y[Be],y[Be+1],m).x;return Ae}function t9(n,e,t,r,i,a){var s=.3333333333333333,o=2/3;return[s*n+o*t,s*e+o*r,s*i+o*t,s*a+o*r,i,a]}function Na(n,e,t){var r=n[0],i=n[1],a=e[0],s=e[1];return[r+(a-r)*t,i+(s-i)*t]}var lE=function(n,e,t,r){var i=.5,a=Na([n,e],[t,r],i);return te(te([],a,!0),[t,r,t,r],!1)};function n9(n,e){var t=n[0],r=n.slice(1).map(Number),i=r[0],a=r[1],s,o=e.x1,u=e.y1,l=e.x,c=e.y;switch("TQ".includes(t)||(e.qx=null,e.qy=null),t){case"M":return e.x=i,e.y=a,n;case"A":return s=[o,u].concat(r),["C"].concat(Z2(s[0],s[1],s[2],s[3],s[4],s[5],s[6],s[7],s[8],s[9]));case"Q":return e.qx=i,e.qy=a,s=[o,u].concat(r),["C"].concat(t9(s[0],s[1],s[2],s[3],s[4],s[5]));case"L":return["C"].concat(lE(o,u,i,a));case"Z":return o===l&&u===c?["C",o,u,l,c,l,c]:["C"].concat(lE(o,u,l,c))}return n}function sb(n,e){if(e===void 0&&(e=!1),e9(n)){var t=[].concat(n);return e?[t,[]]:t}for(var r=ld(n),i=V({},iM),a=[],s="",o=r.length,u,l,c=[],h=0;h<o;h+=1){r[h]&&(s=r[h][0]),a[h]=s;var d=n9(r[h],i);r[h]=d,qI(r,a,h),o=r.length,s==="Z"&&c.push(h),u=r[h],l=u.length,i.x1=+u[l-2],i.y1=+u[l-1],i.x2=+u[l-4]||i.x1,i.y2=+u[l-3]||i.y1}return e?[r,c]:r}function r9(n){return n.map(function(e){return Array.isArray(e)?[].concat(e):e})}function i9(n){var e=n.slice(1).map(function(t,r,i){return r?i[r-1].slice(-2).concat(t.slice(1)):n[0].slice(1).concat(t.slice(1))}).map(function(t){return t.map(function(r,i){return t[t.length-i-2*(1-i%2)]})}).reverse();return[["M"].concat(e[0].slice(0,2))].concat(e.map(function(t){return["C"].concat(t.slice(2))}))}function Hn(n,e){return Math.sqrt((n[0]-e[0])*(n[0]-e[0])+(n[1]-e[1])*(n[1]-e[1]))}function ob(n,e,t,r,i){var a=Hn([n,e],[t,r]),s={x:0,y:0};if(typeof i=="number")if(i<=0)s={x:n,y:e};else if(i>=a)s={x:t,y:r};else{var o=Na([n,e],[t,r],i/a),u=o[0],l=o[1];s={x:u,y:l}}return{length:a,point:s,min:{x:Math.min(n,t),y:Math.min(e,r)},max:{x:Math.max(n,t),y:Math.max(e,r)}}}function cE(n,e){var t=n.x,r=n.y,i=e.x,a=e.y,s=t*i+r*a,o=Math.sqrt((Math.pow(t,2)+Math.pow(r,2))*(Math.pow(i,2)+Math.pow(a,2))),u=t*a-r*i<0?-1:1,l=u*Math.acos(s/o);return l}function a9(n,e,t,r,i,a,s,o,u,l){var c=Math.abs,h=Math.sin,d=Math.cos,f=Math.sqrt,g=Math.PI,p=c(t),v=c(r),m=(i%360+360)%360,y=m*(g/180);if(n===o&&e===u)return{x:n,y:e};if(p===0||v===0)return ob(n,e,o,u,l).point;var b=(n-o)/2,x=(e-u)/2,w={x:d(y)*b+h(y)*x,y:-h(y)*b+d(y)*x},E=Math.pow(w.x,2)/Math.pow(p,2)+Math.pow(w.y,2)/Math.pow(v,2);E>1&&(p*=f(E),v*=f(E));var _=Math.pow(p,2)*Math.pow(v,2)-Math.pow(p,2)*Math.pow(w.y,2)-Math.pow(v,2)*Math.pow(w.x,2),S=Math.pow(p,2)*Math.pow(w.y,2)+Math.pow(v,2)*Math.pow(w.x,2),C=_/S;C=C<0?0:C;var k=(a!==s?1:-1)*f(C),A={x:k*(p*w.y/v),y:k*(-(v*w.x)/p)},T={x:d(y)*A.x-h(y)*A.y+(n+o)/2,y:h(y)*A.x+d(y)*A.y+(e+u)/2},O={x:(w.x-A.x)/p,y:(w.y-A.y)/v},P=cE({x:1,y:0},O),R={x:(-w.x-A.x)/p,y:(-w.y-A.y)/v},N=cE(O,R);!s&&N>0?N-=2*g:s&&N<0&&(N+=2*g),N%=2*g;var D=P+N*l,M=p*d(D),F=v*h(D),j={x:d(y)*M-h(y)*F+T.x,y:h(y)*M+d(y)*F+T.y};return j}function s9(n,e,t,r,i,a,s,o,u,l,c){var h,d=c.bbox,f=d===void 0?!0:d,g=c.length,p=g===void 0?!0:g,v=c.sampleSize,m=v===void 0?30:v,y=typeof l=="number",b=n,x=e,w=0,E=[b,x,w],_=[b,x],S=0,C={x:0,y:0},k=[{x:b,y:x}];y&&l<=0&&(C={x:b,y:x});for(var A=0;A<=m;A+=1){if(S=A/m,h=a9(n,e,t,r,i,a,s,o,u,S),b=h.x,x=h.y,f&&k.push({x:b,y:x}),p&&(w+=Hn(_,[b,x])),_=[b,x],y&&w>=l&&l>E[2]){var T=(w-l)/(w-E[2]);C={x:_[0]*(1-T)+E[0]*T,y:_[1]*(1-T)+E[1]*T}}E=[b,x,w]}return y&&l>=w&&(C={x:o,y:u}),{length:w,point:C,min:{x:Math.min.apply(null,k.map(function(O){return O.x})),y:Math.min.apply(null,k.map(function(O){return O.y}))},max:{x:Math.max.apply(null,k.map(function(O){return O.x})),y:Math.max.apply(null,k.map(function(O){return O.y}))}}}function o9(n,e,t,r,i,a,s,o,u){var l=1-u;return{x:Math.pow(l,3)*n+3*Math.pow(l,2)*u*t+3*l*Math.pow(u,2)*i+Math.pow(u,3)*s,y:Math.pow(l,3)*e+3*Math.pow(l,2)*u*r+3*l*Math.pow(u,2)*a+Math.pow(u,3)*o}}function uM(n,e,t,r,i,a,s,o,u,l){var c,h=l.bbox,d=h===void 0?!0:h,f=l.length,g=f===void 0?!0:f,p=l.sampleSize,v=p===void 0?10:p,m=typeof u=="number",y=n,b=e,x=0,w=[y,b,x],E=[y,b],_=0,S={x:0,y:0},C=[{x:y,y:b}];m&&u<=0&&(S={x:y,y:b});for(var k=0;k<=v;k+=1){if(_=k/v,c=o9(n,e,t,r,i,a,s,o,_),y=c.x,b=c.y,d&&C.push({x:y,y:b}),g&&(x+=Hn(E,[y,b])),E=[y,b],m&&x>=u&&u>w[2]){var A=(x-u)/(x-w[2]);S={x:E[0]*(1-A)+w[0]*A,y:E[1]*(1-A)+w[1]*A}}w=[y,b,x]}return m&&u>=x&&(S={x:s,y:o}),{length:x,point:S,min:{x:Math.min.apply(null,C.map(function(T){return T.x})),y:Math.min.apply(null,C.map(function(T){return T.y}))},max:{x:Math.max.apply(null,C.map(function(T){return T.x})),y:Math.max.apply(null,C.map(function(T){return T.y}))}}}function u9(n,e,t,r,i,a,s){var o=1-s;return{x:Math.pow(o,2)*n+2*o*s*t+Math.pow(s,2)*i,y:Math.pow(o,2)*e+2*o*s*r+Math.pow(s,2)*a}}function l9(n,e,t,r,i,a,s,o){var u,l=o.bbox,c=l===void 0?!0:l,h=o.length,d=h===void 0?!0:h,f=o.sampleSize,g=f===void 0?10:f,p=typeof s=="number",v=n,m=e,y=0,b=[v,m,y],x=[v,m],w=0,E={x:0,y:0},_=[{x:v,y:m}];p&&s<=0&&(E={x:v,y:m});for(var S=0;S<=g;S+=1){if(w=S/g,u=u9(n,e,t,r,i,a,w),v=u.x,m=u.y,c&&_.push({x:v,y:m}),d&&(y+=Hn(x,[v,m])),x=[v,m],p&&y>=s&&s>b[2]){var C=(y-s)/(y-b[2]);E={x:x[0]*(1-C)+b[0]*C,y:x[1]*(1-C)+b[1]*C}}b=[v,m,y]}return p&&s>=y&&(E={x:i,y:a}),{length:y,point:E,min:{x:Math.min.apply(null,_.map(function(k){return k.x})),y:Math.min.apply(null,_.map(function(k){return k.y}))},max:{x:Math.max.apply(null,_.map(function(k){return k.x})),y:Math.max.apply(null,_.map(function(k){return k.y}))}}}function lM(n,e,t){for(var r,i,a,s,o,u,l=ld(n),c=typeof e=="number",h,d=[],f,g=0,p=0,v=0,m=0,y,b=[],x=[],w=0,E={x:0,y:0},_=E,S=E,C=E,k=0,A=0,T=l.length;A<T;A+=1)y=l[A],f=y[0],h=f==="M",d=h?d:[g,p].concat(y.slice(1)),h?(v=y[1],m=y[2],E={x:v,y:m},_=E,w=0,c&&e<.001&&(C=E)):f==="L"?(r=ob(d[0],d[1],d[2],d[3],(e||0)-k),w=r.length,E=r.min,_=r.max,S=r.point):f==="A"?(i=s9(d[0],d[1],d[2],d[3],d[4],d[5],d[6],d[7],d[8],(e||0)-k,t||{}),w=i.length,E=i.min,_=i.max,S=i.point):f==="C"?(a=uM(d[0],d[1],d[2],d[3],d[4],d[5],d[6],d[7],(e||0)-k,t||{}),w=a.length,E=a.min,_=a.max,S=a.point):f==="Q"?(s=l9(d[0],d[1],d[2],d[3],d[4],d[5],(e||0)-k,t||{}),w=s.length,E=s.min,_=s.max,S=s.point):f==="Z"&&(d=[g,p,v,m],o=ob(d[0],d[1],d[2],d[3],(e||0)-k),w=o.length,E=o.min,_=o.max,S=o.point),c&&k<e&&k+w>=e&&(C=S),x.push(_),b.push(E),k+=w,u=f!=="Z"?y.slice(-2):[v,m],g=u[0],p=u[1];return c&&e>=k&&(C={x:g,y:p}),{length:k,point:C,min:{x:Math.min.apply(null,b.map(function(O){return O.x})),y:Math.min.apply(null,b.map(function(O){return O.y}))},max:{x:Math.max.apply(null,x.map(function(O){return O.x})),y:Math.max.apply(null,x.map(function(O){return O.y}))}}}function c9(n,e){return lM(n,void 0,V(V({},e),{bbox:!1,length:!0})).length}function h9(n){var e=n.length,t=e-1;return n.map(function(r,i){return n.map(function(a,s){var o=i+s,u;return s===0||n[o]&&n[o][0]==="M"?(u=n[o],["M"].concat(u.slice(-2))):(o>=e&&(o-=t),n[o])})})}function d9(n,e){var t=n.length-1,r=[],i=0,a=0,s=h9(n);return s.forEach(function(o,u){n.slice(1).forEach(function(l,c){a+=Hn(n[(u+c)%t].slice(-2),e[c%t].slice(-2))}),r[u]=a,a=0}),i=r.indexOf(Math.min.apply(null,r)),s[i]}function f9(n,e,t,r,i,a,s,o){return 3*((o-e)*(t+i)-(s-n)*(r+a)+r*(n-i)-t*(e-a)+o*(i+n/3)-s*(a+e/3))/20}function g9(n){var e=0,t=0,r=0;return sb(n).map(function(i){var a;switch(i[0]){case"M":return e=i[1],t=i[2],0;default:var s=i.slice(1),o=s[0],u=s[1],l=s[2],c=s[3],h=s[4],d=s[5];return r=f9(e,t,o,u,l,c,h,d),a=i.slice(-2),e=a[0],t=a[1],r}}).reduce(function(i,a){return i+a},0)}function hE(n){return g9(n)>=0}function p9(n,e,t){return lM(n,e,V(V({},t),{bbox:!1,length:!0})).point}function v9(n,e){e===void 0&&(e=.5);var t=n.slice(0,2),r=n.slice(2,4),i=n.slice(4,6),a=n.slice(6,8),s=Na(t,r,e),o=Na(r,i,e),u=Na(i,a,e),l=Na(s,o,e),c=Na(o,u,e),h=Na(l,c,e);return[["C"].concat(s,l,h),["C"].concat(c,u,a)]}function dE(n){return n.map(function(e,t,r){var i=t&&r[t-1].slice(-2).concat(e.slice(1)),a=t?uM(i[0],i[1],i[2],i[3],i[4],i[5],i[6],i[7],i[8],{bbox:!1}).length:0,s;return t?s=a?v9(i):[e,e]:s=[e],{s:e,ss:s,l:a}})}function cM(n,e,t){var r=dE(n),i=dE(e),a=r.length,s=i.length,o=r.filter(function(v){return v.l}).length,u=i.filter(function(v){return v.l}).length,l=r.filter(function(v){return v.l}).reduce(function(v,m){var y=m.l;return v+y},0)/o||0,c=i.filter(function(v){return v.l}).reduce(function(v,m){var y=m.l;return v+y},0)/u||0,h=t||Math.max(a,s),d=[l,c],f=[h-a,h-s],g=0,p=[r,i].map(function(v,m){return v.l===h?v.map(function(y){return y.s}):v.map(function(y,b){return g=b&&f[m]&&y.l>=d[m],f[m]-=g?1:0,g?y.ss:[y.s]}).flat()});return p[0].length===p[1].length?p:cM(p[0],p[1],h)}function ub(n){var e=document.createElement("div");e.innerHTML=n;var t=e.childNodes[0];return t&&e.contains(t)&&e.removeChild(t),t}function m9(n,e){for(;!{}.hasOwnProperty.call(n,e)&&(n=Jo(n))!==null;);return n}function lb(){return lb=typeof Reflect<"u"&&Reflect.get?Reflect.get.bind():function(n,e,t){var r=m9(n,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(arguments.length<3?n:t):i.value}},lb.apply(null,arguments)}function fE(n,e,t,r){var i=lb(Jo(1&r?n.prototype:n),e,t);return 2&r&&typeof i=="function"?function(a){return i.apply(t,a)}:i}function sa(n,e,t,r){var i=n-t,a=e-r;return Math.sqrt(i*i+a*a)}function hM(n,e){var t=Math.min.apply(Math,te([],L(n),!1)),r=Math.min.apply(Math,te([],L(e),!1)),i=Math.max.apply(Math,te([],L(n),!1)),a=Math.max.apply(Math,te([],L(e),!1));return{x:t,y:r,width:i-t,height:a-r}}function y9(n,e,t){return Math.atan(-e/n*Math.tan(t))}function b9(n,e,t){return Math.atan(e/(n*Math.tan(t)))}function x9(n,e,t,r,i,a){return t*Math.cos(i)*Math.cos(a)-r*Math.sin(i)*Math.sin(a)+n}function w9(n,e,t,r,i,a){return t*Math.sin(i)*Math.cos(a)+r*Math.cos(i)*Math.sin(a)+e}function E9(n,e,t,r,i,a,s){for(var o=y9(t,r,i),u=1/0,l=-1/0,c=[a,s],h=-Math.PI*2;h<=Math.PI*2;h+=Math.PI){var d=o+h;a<s?a<d&&d<s&&c.push(d):s<d&&d<a&&c.push(d)}for(var h=0;h<c.length;h++){var f=x9(n,e,t,r,i,c[h]);f<u&&(u=f),f>l&&(l=f)}for(var g=b9(t,r,i),p=1/0,v=-1/0,m=[a,s],h=-Math.PI*2;h<=Math.PI*2;h+=Math.PI){var y=g+h;a<s?a<y&&y<s&&m.push(y):s<y&&y<a&&m.push(y)}for(var h=0;h<m.length;h++){var b=w9(n,e,t,r,i,m[h]);b<p&&(p=b),b>v&&(v=b)}return{x:u,y:p,width:l-u,height:v-p}}var _9=1e-4;function dM(n,e,t,r,i,a){var s=-1,o=1/0,u=[t,r],l=20;a&&a>200&&(l=a/10);for(var c=1/l,h=c/10,d=0;d<=l;d++){var f=d*c,g=[i.apply(void 0,te([],L(n.concat([f])),!1)),i.apply(void 0,te([],L(e.concat([f])),!1))],p=sa(u[0],u[1],g[0],g[1]);p<o&&(s=f,o=p)}if(s===0)return{x:n[0],y:e[0]};if(s===1){var v=n.length;return{x:n[v-1],y:e[v-1]}}o=1/0;for(var d=0;d<32&&!(h<_9);d++){var m=s-h,y=s+h,g=[i.apply(void 0,te([],L(n.concat([m])),!1)),i.apply(void 0,te([],L(e.concat([m])),!1))],p=sa(u[0],u[1],g[0],g[1]);if(m>=0&&p<o)s=m,o=p;else{var b=[i.apply(void 0,te([],L(n.concat([y])),!1)),i.apply(void 0,te([],L(e.concat([y])),!1))],x=sa(u[0],u[1],b[0],b[1]);y<=1&&x<o?(s=y,o=x):h*=.5}}return{x:i.apply(void 0,te([],L(n.concat([s])),!1)),y:i.apply(void 0,te([],L(e.concat([s])),!1))}}function fM(n,e,t,r){return sa(n,e,t,r)}function gM(n,e,t,r,i){return{x:(1-i)*n+i*t,y:(1-i)*e+i*r}}function S9(n,e,t,r,i,a){var s=[t-n,r-e];if(QL(s,[0,0]))return Math.sqrt((i-n)*(i-n)+(a-e)*(a-e));var o=[-s[1],s[0]];ZL(o,o);var u=[i-n,a-e];return Math.abs(JL(u,o))}function cb(n,e,t,r,i){var a=1-i;return a*a*a*n+3*e*i*a*a+3*t*i*i*a+r*i*i*i}function gE(n,e,t,r){var i=-3*n+9*e-9*t+3*r,a=6*n-12*e+6*t,s=3*e-3*n,o=[],u,l,c;if(ul(i,0))ul(a,0)||(u=-s/a,u>=0&&u<=1&&o.push(u));else{var h=a*a-4*i*s;ul(h,0)?o.push(-a/(2*i)):h>0&&(c=Math.sqrt(h),u=(-a+c)/(2*i),l=(-a-c)/(2*i),u>=0&&u<=1&&o.push(u),l>=0&&l<=1&&o.push(l))}return o}function k9(n,e,t,r,i,a,s,o){for(var u=[n,s],l=[e,o],c=gE(n,t,i,s),h=gE(e,r,a,o),d=0;d<c.length;d++)u.push(cb(n,t,i,s,c[d]));for(var d=0;d<h.length;d++)l.push(cb(e,r,a,o,h[d]));return hM(u,l)}function C9(n,e,t,r,i,a,s,o,u,l,c){return dM([n,t,i,s],[e,r,a,o],u,l,cb,c)}function pE(n,e,t,r,i,a,s,o,u,l,c){var h=C9(n,e,t,r,i,a,s,o,u,l,c);return sa(h.x,h.y,u,l)}function A9(n){if(n.length<2)return 0;for(var e=0,t=0;t<n.length-1;t++){var r=n[t],i=n[t+1];e+=sa(r[0],r[1],i[0],i[1])}return e}function T9(n){return A9(n)}function hb(n,e,t,r){var i=1-r;return i*i*n+2*r*i*e+r*r*t}function vE(n,e,t){var r=n+t-2*e;if(ul(r,0))return[.5];var i=(n-e)/r;return i<=1&&i>=0?[i]:[]}function O9(n,e,t,r,i,a){var s=vE(n,t,i)[0],o=vE(e,r,a)[0],u=[n,i],l=[e,a];return s!==void 0&&u.push(hb(n,t,i,s)),o!==void 0&&l.push(hb(e,r,a,o)),hM(u,l)}function M9(n,e,t,r,i,a,s,o){return dM([n,t,i],[e,r,a],s,o,hb)}function P9(n,e,t,r,i,a,s,o){var u=M9(n,e,t,r,i,a,s,o);return sa(u.x,u.y,s,o)}function vn(){vn=function(){return e};var n,e={},t=Object.prototype,r=t.hasOwnProperty,i=Object.defineProperty||function(N,D,M){N[D]=M.value},a=typeof Symbol=="function"?Symbol:{},s=a.iterator||"@@iterator",o=a.asyncIterator||"@@asyncIterator",u=a.toStringTag||"@@toStringTag";function l(N,D,M){return Object.defineProperty(N,D,{value:M,enumerable:!0,configurable:!0,writable:!0}),N[D]}try{l({},"")}catch{l=function(M,F,j){return M[F]=j}}function c(N,D,M,F){var j=D&&D.prototype instanceof m?D:m,B=Object.create(j.prototype),$=new P(F||[]);return i(B,"_invoke",{value:k(N,M,$)}),B}function h(N,D,M){try{return{type:"normal",arg:N.call(D,M)}}catch(F){return{type:"throw",arg:F}}}e.wrap=c;var d="suspendedStart",f="suspendedYield",g="executing",p="completed",v={};function m(){}function y(){}function b(){}var x={};l(x,s,function(){return this});var w=Object.getPrototypeOf,E=w&&w(w(R([])));E&&E!==t&&r.call(E,s)&&(x=E);var _=b.prototype=m.prototype=Object.create(x);function S(N){["next","throw","return"].forEach(function(D){l(N,D,function(M){return this._invoke(D,M)})})}function C(N,D){function M(j,B,$,W){var Y=h(N[j],N,B);if(Y.type!=="throw"){var K=Y.arg,ee=K.value;return ee&&Uy(ee)=="object"&&r.call(ee,"__await")?D.resolve(ee.__await).then(function(ie){M("next",ie,$,W)},function(ie){M("throw",ie,$,W)}):D.resolve(ee).then(function(ie){K.value=ie,$(K)},function(ie){return M("throw",ie,$,W)})}W(Y.arg)}var F;i(this,"_invoke",{value:function(B,$){function W(){return new D(function(Y,K){M(B,$,Y,K)})}return F=F?F.then(W,W):W()}})}function k(N,D,M){var F=d;return function(j,B){if(F===g)throw Error("Generator is already running");if(F===p){if(j==="throw")throw B;return{value:n,done:!0}}for(M.method=j,M.arg=B;;){var $=M.delegate;if($){var W=A($,M);if(W){if(W===v)continue;return W}}if(M.method==="next")M.sent=M._sent=M.arg;else if(M.method==="throw"){if(F===d)throw F=p,M.arg;M.dispatchException(M.arg)}else M.method==="return"&&M.abrupt("return",M.arg);F=g;var Y=h(N,D,M);if(Y.type==="normal"){if(F=M.done?p:f,Y.arg===v)continue;return{value:Y.arg,done:M.done}}Y.type==="throw"&&(F=p,M.method="throw",M.arg=Y.arg)}}}function A(N,D){var M=D.method,F=N.iterator[M];if(F===n)return D.delegate=null,M==="throw"&&N.iterator.return&&(D.method="return",D.arg=n,A(N,D),D.method==="throw")||M!=="return"&&(D.method="throw",D.arg=new TypeError("The iterator does not provide a '"+M+"' method")),v;var j=h(F,N.iterator,D.arg);if(j.type==="throw")return D.method="throw",D.arg=j.arg,D.delegate=null,v;var B=j.arg;return B?B.done?(D[N.resultName]=B.value,D.next=N.nextLoc,D.method!=="return"&&(D.method="next",D.arg=n),D.delegate=null,v):B:(D.method="throw",D.arg=new TypeError("iterator result is not an object"),D.delegate=null,v)}function T(N){var D={tryLoc:N[0]};1 in N&&(D.catchLoc=N[1]),2 in N&&(D.finallyLoc=N[2],D.afterLoc=N[3]),this.tryEntries.push(D)}function O(N){var D=N.completion||{};D.type="normal",delete D.arg,N.completion=D}function P(N){this.tryEntries=[{tryLoc:"root"}],N.forEach(T,this),this.reset(!0)}function R(N){if(N||N===""){var D=N[s];if(D)return D.call(N);if(typeof N.next=="function")return N;if(!isNaN(N.length)){var M=-1,F=function j(){for(;++M<N.length;)if(r.call(N,M))return j.value=N[M],j.done=!1,j;return j.value=n,j.done=!0,j};return F.next=F}}throw new TypeError(Uy(N)+" is not iterable")}return y.prototype=b,i(_,"constructor",{value:b,configurable:!0}),i(b,"constructor",{value:y,configurable:!0}),y.displayName=l(b,u,"GeneratorFunction"),e.isGeneratorFunction=function(N){var D=typeof N=="function"&&N.constructor;return!!D&&(D===y||(D.displayName||D.name)==="GeneratorFunction")},e.mark=function(N){return Object.setPrototypeOf?Object.setPrototypeOf(N,b):(N.__proto__=b,l(N,u,"GeneratorFunction")),N.prototype=Object.create(_),N},e.awrap=function(N){return{__await:N}},S(C.prototype),l(C.prototype,o,function(){return this}),e.AsyncIterator=C,e.async=function(N,D,M,F,j){j===void 0&&(j=Promise);var B=new C(c(N,D,M,F),j);return e.isGeneratorFunction(D)?B:B.next().then(function($){return $.done?$.value:B.next()})},S(_),l(_,u,"Generator"),l(_,s,function(){return this}),l(_,"toString",function(){return"[object Generator]"}),e.keys=function(N){var D=Object(N),M=[];for(var F in D)M.push(F);return M.reverse(),function j(){for(;M.length;){var B=M.pop();if(B in D)return j.value=B,j.done=!1,j}return j.done=!0,j}},e.values=R,P.prototype={constructor:P,reset:function(D){if(this.prev=0,this.next=0,this.sent=this._sent=n,this.done=!1,this.delegate=null,this.method="next",this.arg=n,this.tryEntries.forEach(O),!D)for(var M in this)M.charAt(0)==="t"&&r.call(this,M)&&!isNaN(+M.slice(1))&&(this[M]=n)},stop:function(){this.done=!0;var D=this.tryEntries[0].completion;if(D.type==="throw")throw D.arg;return this.rval},dispatchException:function(D){if(this.done)throw D;var M=this;function F(K,ee){return $.type="throw",$.arg=D,M.next=K,ee&&(M.method="next",M.arg=n),!!ee}for(var j=this.tryEntries.length-1;j>=0;--j){var B=this.tryEntries[j],$=B.completion;if(B.tryLoc==="root")return F("end");if(B.tryLoc<=this.prev){var W=r.call(B,"catchLoc"),Y=r.call(B,"finallyLoc");if(W&&Y){if(this.prev<B.catchLoc)return F(B.catchLoc,!0);if(this.prev<B.finallyLoc)return F(B.finallyLoc)}else if(W){if(this.prev<B.catchLoc)return F(B.catchLoc,!0)}else{if(!Y)throw Error("try statement without catch or finally");if(this.prev<B.finallyLoc)return F(B.finallyLoc)}}}},abrupt:function(D,M){for(var F=this.tryEntries.length-1;F>=0;--F){var j=this.tryEntries[F];if(j.tryLoc<=this.prev&&r.call(j,"finallyLoc")&&this.prev<j.finallyLoc){var B=j;break}}B&&(D==="break"||D==="continue")&&B.tryLoc<=M&&M<=B.finallyLoc&&(B=null);var $=B?B.completion:{};return $.type=D,$.arg=M,B?(this.method="next",this.next=B.finallyLoc,v):this.complete($)},complete:function(D,M){if(D.type==="throw")throw D.arg;return D.type==="break"||D.type==="continue"?this.next=D.arg:D.type==="return"?(this.rval=this.arg=D.arg,this.method="return",this.next="end"):D.type==="normal"&&M&&(this.next=M),v},finish:function(D){for(var M=this.tryEntries.length-1;M>=0;--M){var F=this.tryEntries[M];if(F.finallyLoc===D)return this.complete(F.completion,F.afterLoc),O(F),v}},catch:function(D){for(var M=this.tryEntries.length-1;M>=0;--M){var F=this.tryEntries[M];if(F.tryLoc===D){var j=F.completion;if(j.type==="throw"){var B=j.arg;O(F)}return B}}throw Error("illegal catch attempt")},delegateYield:function(D,M,F){return this.delegate={iterator:R(D),resultName:M,nextLoc:F},this.method==="next"&&(this.arg=n),v}},e}function mE(n,e,t,r,i,a,s){try{var o=n[a](s),u=o.value}catch(l){return void t(l)}o.done?e(u):Promise.resolve(u).then(r,i)}function as(n){return function(){var e=this,t=arguments;return new Promise(function(r,i){var a=n.apply(e,t);function s(u){mE(a,r,i,s,o,"next",u)}function o(u){mE(a,r,i,s,o,"throw",u)}s(void 0)})}}function As(n,e){var t=typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(!t){if(Array.isArray(n)||(t=H2(n))||e&&n&&typeof n.length=="number"){t&&(n=t);var r=0,i=function(){};return{s:i,n:function(){return r>=n.length?{done:!0}:{done:!1,value:n[r++]}},e:function(l){throw l},f:i}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var a,s=!0,o=!1;return{s:function(){t=t.call(n)},n:function(){var l=t.next();return s=l.done,l},e:function(l){o=!0,a=l},f:function(){try{s||t.return==null||t.return()}finally{if(o)throw a}}}}function N9(n,e){if(n==null)return{};var t={};for(var r in n)if({}.hasOwnProperty.call(n,r)){if(e.indexOf(r)!==-1)continue;t[r]=n[r]}return t}function to(n,e){if(n==null)return{};var t,r,i=N9(n,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(n);for(r=0;r<a.length;r++)t=a[r],e.indexOf(t)===-1&&{}.propertyIsEnumerable.call(n,t)&&(i[t]=n[t])}return i}/*!
 * @antv/g-lite
 * @description A core module for rendering engine implements DOM API.
 * @version 2.2.18
 * @date 4/14/2025, 2:53:27 AM
 * @author AntVis
 * @docs https://g.antv.antgroup.com/
 */var D9=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},pM={exports:{}};(function(n,e){(function(t,r){n.exports=r()})(D9,function(){function t(w,E,_,S,C){r(w,E,_||0,S||w.length-1,C||a)}function r(w,E,_,S,C){for(;S>_;){if(S-_>600){var k=S-_+1,A=E-_+1,T=Math.log(k),O=.5*Math.exp(2*T/3),P=.5*Math.sqrt(T*O*(k-O)/k)*(A-k/2<0?-1:1),R=Math.max(_,Math.floor(E-A*O/k+P)),N=Math.min(S,Math.floor(E+(k-A)*O/k+P));r(w,E,R,N,C)}var D=w[E],M=_,F=S;for(i(w,_,E),C(w[S],D)>0&&i(w,_,S);M<F;){for(i(w,M,F),M++,F--;C(w[M],D)<0;)M++;for(;C(w[F],D)>0;)F--}C(w[_],D)===0?i(w,_,F):(F++,i(w,F,S)),F<=E&&(_=F+1),E<=F&&(S=F-1)}}function i(w,E,_){var S=w[E];w[E]=w[_],w[_]=S}function a(w,E){return w<E?-1:w>E?1:0}var s=function(E){E===void 0&&(E=9),this._maxEntries=Math.max(4,E),this._minEntries=Math.max(2,Math.ceil(this._maxEntries*.4)),this.clear()};s.prototype.all=function(){return this._all(this.data,[])},s.prototype.search=function(E){var _=this.data,S=[];if(!y(E,_))return S;for(var C=this.toBBox,k=[];_;){for(var A=0;A<_.children.length;A++){var T=_.children[A],O=_.leaf?C(T):T;y(E,O)&&(_.leaf?S.push(T):m(E,O)?this._all(T,S):k.push(T))}_=k.pop()}return S},s.prototype.collides=function(E){var _=this.data;if(!y(E,_))return!1;for(var S=[];_;){for(var C=0;C<_.children.length;C++){var k=_.children[C],A=_.leaf?this.toBBox(k):k;if(y(E,A)){if(_.leaf||m(E,A))return!0;S.push(k)}}_=S.pop()}return!1},s.prototype.load=function(E){if(!(E&&E.length))return this;if(E.length<this._minEntries){for(var _=0;_<E.length;_++)this.insert(E[_]);return this}var S=this._build(E.slice(),0,E.length-1,0);if(!this.data.children.length)this.data=S;else if(this.data.height===S.height)this._splitRoot(this.data,S);else{if(this.data.height<S.height){var C=this.data;this.data=S,S=C}this._insert(S,this.data.height-S.height-1,!0)}return this},s.prototype.insert=function(E){return E&&this._insert(E,this.data.height-1),this},s.prototype.clear=function(){return this.data=b([]),this},s.prototype.remove=function(E,_){if(!E)return this;for(var S=this.data,C=this.toBBox(E),k=[],A=[],T,O,P;S||k.length;){if(S||(S=k.pop(),O=k[k.length-1],T=A.pop(),P=!0),S.leaf){var R=o(E,S.children,_);if(R!==-1)return S.children.splice(R,1),k.push(S),this._condense(k),this}!P&&!S.leaf&&m(S,C)?(k.push(S),A.push(T),T=0,O=S,S=S.children[0]):O?(T++,S=O.children[T],P=!1):S=null}return this},s.prototype.toBBox=function(E){return E},s.prototype.compareMinX=function(E,_){return E.minX-_.minX},s.prototype.compareMinY=function(E,_){return E.minY-_.minY},s.prototype.toJSON=function(){return this.data},s.prototype.fromJSON=function(E){return this.data=E,this},s.prototype._all=function(E,_){for(var S=[];E;)E.leaf?_.push.apply(_,E.children):S.push.apply(S,E.children),E=S.pop();return _},s.prototype._build=function(E,_,S,C){var k=S-_+1,A=this._maxEntries,T;if(k<=A)return T=b(E.slice(_,S+1)),u(T,this.toBBox),T;C||(C=Math.ceil(Math.log(k)/Math.log(A)),A=Math.ceil(k/Math.pow(A,C-1))),T=b([]),T.leaf=!1,T.height=C;var O=Math.ceil(k/A),P=O*Math.ceil(Math.sqrt(A));x(E,_,S,P,this.compareMinX);for(var R=_;R<=S;R+=P){var N=Math.min(R+P-1,S);x(E,R,N,O,this.compareMinY);for(var D=R;D<=N;D+=O){var M=Math.min(D+O-1,N);T.children.push(this._build(E,D,M,C-1))}}return u(T,this.toBBox),T},s.prototype._chooseSubtree=function(E,_,S,C){for(;C.push(_),!(_.leaf||C.length-1===S);){for(var k=1/0,A=1/0,T=void 0,O=0;O<_.children.length;O++){var P=_.children[O],R=f(P),N=p(E,P)-R;N<A?(A=N,k=R<k?R:k,T=P):N===A&&R<k&&(k=R,T=P)}_=T||_.children[0]}return _},s.prototype._insert=function(E,_,S){var C=S?E:this.toBBox(E),k=[],A=this._chooseSubtree(C,this.data,_,k);for(A.children.push(E),c(A,C);_>=0&&k[_].children.length>this._maxEntries;)this._split(k,_),_--;this._adjustParentBBoxes(C,k,_)},s.prototype._split=function(E,_){var S=E[_],C=S.children.length,k=this._minEntries;this._chooseSplitAxis(S,k,C);var A=this._chooseSplitIndex(S,k,C),T=b(S.children.splice(A,S.children.length-A));T.height=S.height,T.leaf=S.leaf,u(S,this.toBBox),u(T,this.toBBox),_?E[_-1].children.push(T):this._splitRoot(S,T)},s.prototype._splitRoot=function(E,_){this.data=b([E,_]),this.data.height=E.height+1,this.data.leaf=!1,u(this.data,this.toBBox)},s.prototype._chooseSplitIndex=function(E,_,S){for(var C,k=1/0,A=1/0,T=_;T<=S-_;T++){var O=l(E,0,T,this.toBBox),P=l(E,T,S,this.toBBox),R=v(O,P),N=f(O)+f(P);R<k?(k=R,C=T,A=N<A?N:A):R===k&&N<A&&(A=N,C=T)}return C||S-_},s.prototype._chooseSplitAxis=function(E,_,S){var C=E.leaf?this.compareMinX:h,k=E.leaf?this.compareMinY:d,A=this._allDistMargin(E,_,S,C),T=this._allDistMargin(E,_,S,k);A<T&&E.children.sort(C)},s.prototype._allDistMargin=function(E,_,S,C){E.children.sort(C);for(var k=this.toBBox,A=l(E,0,_,k),T=l(E,S-_,S,k),O=g(A)+g(T),P=_;P<S-_;P++){var R=E.children[P];c(A,E.leaf?k(R):R),O+=g(A)}for(var N=S-_-1;N>=_;N--){var D=E.children[N];c(T,E.leaf?k(D):D),O+=g(T)}return O},s.prototype._adjustParentBBoxes=function(E,_,S){for(var C=S;C>=0;C--)c(_[C],E)},s.prototype._condense=function(E){for(var _=E.length-1,S=void 0;_>=0;_--)E[_].children.length===0?_>0?(S=E[_-1].children,S.splice(S.indexOf(E[_]),1)):this.clear():u(E[_],this.toBBox)};function o(w,E,_){if(!_)return E.indexOf(w);for(var S=0;S<E.length;S++)if(_(w,E[S]))return S;return-1}function u(w,E){l(w,0,w.children.length,E,w)}function l(w,E,_,S,C){C||(C=b(null)),C.minX=1/0,C.minY=1/0,C.maxX=-1/0,C.maxY=-1/0;for(var k=E;k<_;k++){var A=w.children[k];c(C,w.leaf?S(A):A)}return C}function c(w,E){return w.minX=Math.min(w.minX,E.minX),w.minY=Math.min(w.minY,E.minY),w.maxX=Math.max(w.maxX,E.maxX),w.maxY=Math.max(w.maxY,E.maxY),w}function h(w,E){return w.minX-E.minX}function d(w,E){return w.minY-E.minY}function f(w){return(w.maxX-w.minX)*(w.maxY-w.minY)}function g(w){return w.maxX-w.minX+(w.maxY-w.minY)}function p(w,E){return(Math.max(E.maxX,w.maxX)-Math.min(E.minX,w.minX))*(Math.max(E.maxY,w.maxY)-Math.min(E.minY,w.minY))}function v(w,E){var _=Math.max(w.minX,E.minX),S=Math.max(w.minY,E.minY),C=Math.min(w.maxX,E.maxX),k=Math.min(w.maxY,E.maxY);return Math.max(0,C-_)*Math.max(0,k-S)}function m(w,E){return w.minX<=E.minX&&w.minY<=E.minY&&E.maxX<=w.maxX&&E.maxY<=w.maxY}function y(w,E){return E.minX<=w.maxX&&E.minY<=w.maxY&&E.maxX>=w.minX&&E.maxY>=w.minY}function b(w){return{children:w,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function x(w,E,_,S,C){for(var k=[E,_];k.length;)if(_=k.pop(),E=k.pop(),!(_-E<=S)){var A=E+Math.ceil((_-E)/S/2)*S;t(w,A,E,_,C),k.push(E,A,A,_)}}return s})})(pM);var R9=pM.exports,q=function(n){return n.GROUP="g",n.FRAGMENT="fragment",n.CIRCLE="circle",n.ELLIPSE="ellipse",n.IMAGE="image",n.RECT="rect",n.LINE="line",n.POLYLINE="polyline",n.POLYGON="polygon",n.TEXT="text",n.PATH="path",n.HTML="html",n.MESH="mesh",n}({}),Fh=function(n){return n[n.ZERO=0]="ZERO",n[n.NEGATIVE_ONE=1]="NEGATIVE_ONE",n}({}),cs=function(){function n(){U(this,n),this.plugins=[]}return H(n,[{key:"addRenderingPlugin",value:function(t){this.plugins.push(t),this.context.renderingPlugins.push(t)}},{key:"removeAllRenderingPlugins",value:function(){var t=this;this.plugins.forEach(function(r){var i=t.context.renderingPlugins.indexOf(r);i>=0&&t.context.renderingPlugins.splice(i,1)})}}])}(),L9=function(){function n(e){U(this,n),this.clipSpaceNearZ=Fh.NEGATIVE_ONE,this.plugins=[],this.config=Ce({enableDirtyCheck:!0,enableCulling:!1,enableAutoRendering:!0,enableDirtyRectangleRendering:!0,enableDirtyRectangleRenderingDebug:!1,enableSizeAttenuation:!0,enableRenderingOptimization:!1},e)}return H(n,[{key:"registerPlugin",value:function(t){var r=this.plugins.findIndex(function(i){return i===t});r===-1&&this.plugins.push(t)}},{key:"unregisterPlugin",value:function(t){var r=this.plugins.findIndex(function(i){return i===t});r>-1&&this.plugins.splice(r,1)}},{key:"getPlugins",value:function(){return this.plugins}},{key:"getPlugin",value:function(t){return this.plugins.find(function(r){return r.name===t})}},{key:"getConfig",value:function(){return this.config}},{key:"setConfig",value:function(t){Object.assign(this.config,t)}}])}(),Y0=Ja,mo=_i,I9=zL,F9=BL,yE=id,X0=GL,rt=function(){function n(){U(this,n),this.center=[0,0,0],this.halfExtents=[0,0,0],this.min=[0,0,0],this.max=[0,0,0]}return H(n,[{key:"update",value:function(t,r){mo(this.center,t),mo(this.halfExtents,r),X0(this.min,this.center,this.halfExtents),Y0(this.max,this.center,this.halfExtents)}},{key:"setMinMax",value:function(t,r){Y0(this.center,r,t),yE(this.center,this.center,.5),X0(this.halfExtents,r,t),yE(this.halfExtents,this.halfExtents,.5),mo(this.min,t),mo(this.max,r)}},{key:"getMin",value:function(){return this.min}},{key:"getMax",value:function(){return this.max}},{key:"add",value:function(t){if(!n.isEmpty(t)){if(n.isEmpty(this)){this.setMinMax(t.getMin(),t.getMax());return}var r=this.center,i=r[0],a=r[1],s=r[2],o=this.halfExtents,u=o[0],l=o[1],c=o[2],h=i-u,d=i+u,f=a-l,g=a+l,p=s-c,v=s+c,m=t.center,y=m[0],b=m[1],x=m[2],w=t.halfExtents,E=w[0],_=w[1],S=w[2],C=y-E,k=y+E,A=b-_,T=b+_,O=x-S,P=x+S;C<h&&(h=C),k>d&&(d=k),A<f&&(f=A),T>g&&(g=T),O<p&&(p=O),P>v&&(v=P),r[0]=(h+d)*.5,r[1]=(f+g)*.5,r[2]=(p+v)*.5,o[0]=(d-h)*.5,o[1]=(g-f)*.5,o[2]=(v-p)*.5,this.min[0]=h,this.min[1]=f,this.min[2]=p,this.max[0]=d,this.max[1]=g,this.max[2]=v}}},{key:"setFromTransformedAABB",value:function(t,r){var i=this.center,a=this.halfExtents,s=t.center,o=t.halfExtents,u=r[0],l=r[4],c=r[8],h=r[1],d=r[5],f=r[9],g=r[2],p=r[6],v=r[10],m=Math.abs(u),y=Math.abs(l),b=Math.abs(c),x=Math.abs(h),w=Math.abs(d),E=Math.abs(f),_=Math.abs(g),S=Math.abs(p),C=Math.abs(v);i[0]=r[12]+u*s[0]+l*s[1]+c*s[2],i[1]=r[13]+h*s[0]+d*s[1]+f*s[2],i[2]=r[14]+g*s[0]+p*s[1]+v*s[2],a[0]=m*o[0]+y*o[1]+b*o[2],a[1]=x*o[0]+w*o[1]+E*o[2],a[2]=_*o[0]+S*o[1]+C*o[2],X0(this.min,i,a),Y0(this.max,i,a)}},{key:"intersects",value:function(t){var r=this.getMax(),i=this.getMin(),a=t.getMax(),s=t.getMin();return i[0]<=a[0]&&r[0]>=s[0]&&i[1]<=a[1]&&r[1]>=s[1]&&i[2]<=a[2]&&r[2]>=s[2]}},{key:"intersection",value:function(t){if(!this.intersects(t))return null;var r=new n,i=I9([0,0,0],this.getMin(),t.getMin()),a=F9([0,0,0],this.getMax(),t.getMax());return r.setMinMax(i,a),r}},{key:"getNegativeFarPoint",value:function(t){return t.pnVertexFlag===273?mo([0,0,0],this.min):t.pnVertexFlag===272?[this.min[0],this.min[1],this.max[2]]:t.pnVertexFlag===257?[this.min[0],this.max[1],this.min[2]]:t.pnVertexFlag===256?[this.min[0],this.max[1],this.max[2]]:t.pnVertexFlag===17?[this.max[0],this.min[1],this.min[2]]:t.pnVertexFlag===16?[this.max[0],this.min[1],this.max[2]]:t.pnVertexFlag===1?[this.max[0],this.max[1],this.min[2]]:[this.max[0],this.max[1],this.max[2]]}},{key:"getPositiveFarPoint",value:function(t){return t.pnVertexFlag===273?mo([0,0,0],this.max):t.pnVertexFlag===272?[this.max[0],this.max[1],this.min[2]]:t.pnVertexFlag===257?[this.max[0],this.min[1],this.max[2]]:t.pnVertexFlag===256?[this.max[0],this.min[1],this.min[2]]:t.pnVertexFlag===17?[this.min[0],this.max[1],this.max[2]]:t.pnVertexFlag===16?[this.min[0],this.max[1],this.min[2]]:t.pnVertexFlag===1?[this.min[0],this.min[1],this.max[2]]:[this.min[0],this.min[1],this.min[2]]}}],[{key:"isEmpty",value:function(t){return!t||t.halfExtents[0]===0&&t.halfExtents[1]===0&&t.halfExtents[2]===0}}])}(),B9=function(){function n(e,t){U(this,n),this.distance=e||0,this.normal=t||st(0,1,0),this.updatePNVertexFlag()}return H(n,[{key:"updatePNVertexFlag",value:function(){this.pnVertexFlag=(+(this.normal[0]>=0)<<8)+(+(this.normal[1]>=0)<<4)+ +(this.normal[2]>=0)}},{key:"distanceToPoint",value:function(t){return Si(t,this.normal)-this.distance}},{key:"normalize",value:function(){var t=1/ZO(this.normal);id(this.normal,this.normal,t),this.distance*=t}},{key:"intersectsLine",value:function(t,r,i){var a=this.distanceToPoint(t),s=this.distanceToPoint(r),o=a/(a-s),u=o>=0&&o<=1;return u&&i&&Qy(i,t,r,o),u}}])}(),yo=function(n){return n[n.OUTSIDE=4294967295]="OUTSIDE",n[n.INSIDE=0]="INSIDE",n[n.INDETERMINATE=2147483647]="INDETERMINATE",n}({}),z9=function(){function n(e){if(U(this,n),this.planes=[],e)this.planes=e;else for(var t=0;t<6;t++)this.planes.push(new B9)}return H(n,[{key:"extractFromVPMatrix",value:function(t){var r=Ee(t,16),i=r[0],a=r[1],s=r[2],o=r[3],u=r[4],l=r[5],c=r[6],h=r[7],d=r[8],f=r[9],g=r[10],p=r[11],v=r[12],m=r[13],y=r[14],b=r[15];An(this.planes[0].normal,o-i,h-u,p-d),this.planes[0].distance=b-v,An(this.planes[1].normal,o+i,h+u,p+d),this.planes[1].distance=b+v,An(this.planes[2].normal,o+a,h+l,p+f),this.planes[2].distance=b+m,An(this.planes[3].normal,o-a,h-l,p-f),this.planes[3].distance=b-m,An(this.planes[4].normal,o-s,h-c,p-g),this.planes[4].distance=b-y,An(this.planes[5].normal,o+s,h+c,p+g),this.planes[5].distance=b+y,this.planes.forEach(function(x){x.normalize(),x.updatePNVertexFlag()})}}])}(),gn=function(){function n(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;U(this,n),this.x=0,this.y=0,this.x=e,this.y=t}return H(n,[{key:"clone",value:function(){return new n(this.x,this.y)}},{key:"copyFrom",value:function(t){this.x=t.x,this.y=t.y}}])}(),ru=function(){function n(e,t,r,i){U(this,n),this.x=e,this.y=t,this.width=r,this.height=i,this.left=e,this.right=e+r,this.top=t,this.bottom=t+i}return H(n,[{key:"toJSON",value:function(){}}],[{key:"fromRect",value:function(t){return new n(t.x,t.y,t.width,t.height)}},{key:"applyTransform",value:function(t,r){var i=ju(t.x,t.y,0,1),a=ju(t.x+t.width,t.y,0,1),s=ju(t.x,t.y+t.height,0,1),o=ju(t.x+t.width,t.y+t.height,0,1),u=ki(),l=ki(),c=ki(),h=ki();ta(u,i,r),ta(l,a,r),ta(c,s,r),ta(h,o,r);var d=Math.min(u[0],l[0],c[0],h[0]),f=Math.min(u[1],l[1],c[1],h[1]),g=Math.max(u[0],l[0],c[0],h[0]),p=Math.max(u[1],l[1],c[1],h[1]);return n.fromRect({x:d,y:f,width:g-d,height:p-f})}}])}(),He="Method not implemented.",bo="Use document.documentElement instead.",$9="Cannot append a destroyed element.";function $o(n){return n===void 0?0:n>360||n<-360?n%360:n}var K0=Ie();function In(n){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!0;return Array.isArray(n)&&n.length===3?r?Ui(n):_i(K0,n):re(n)?r?st(n,e,t):An(K0,n,e,t):r?st(n[0],n[1]||e,n[2]||t):An(K0,n[0],n[1]||e,n[2]||t)}var j9=Math.PI/180;function Ye(n){return n*j9}var q9=180/Math.PI;function Yn(n){return n*q9}function G9(n){return 360*n}var cd=Math.PI/2;function W9(n,e){var t=e[0],r=e[1],i=e[2],a=e[3],s=t*t,o=r*r,u=i*i,l=a*a,c=s+o+u+l,h=t*a-r*i;return h>.499995*c?(n[0]=cd,n[1]=2*Math.atan2(r,t),n[2]=0):h<-.499995*c?(n[0]=-cd,n[1]=2*Math.atan2(r,t),n[2]=0):(n[0]=Math.asin(2*(t*i-a*r)),n[1]=Math.atan2(2*(t*a+r*i),1-2*(u+l)),n[2]=Math.atan2(2*(t*r+i*a),1-2*(o+u))),n}function V9(n,e){var t,r,i=eu(Ie(),e),a=Ee(i,3),s=a[0],o=a[1],u=a[2],l=Math.asin(-e[2]/s);return l<cd?l>-cd?(t=Math.atan2(e[6]/o,e[10]/u),r=Math.atan2(e[1]/s,e[0]/s)):(r=0,t=-Math.atan2(e[4]/o,e[5]/o)):(r=0,t=Math.atan2(e[4]/o,e[5]/o)),n[0]=t,n[1]=l,n[2]=r,n}function Z0(n,e){return e.length===16?V9(n,e):W9(n,e)}function U9(n,e,t,r,i){var a=Math.cos(n),s=Math.sin(n);return yL(r*a,i*s,0,-r*s,i*a,0,e,t,1)}function H9(n,e,t,r,i,a,s){var o=arguments.length>7&&arguments[7]!==void 0?arguments[7]:!1,u=2*a,l=t-e,c=r-i,h=u/l,d=u/c,f=(t+e)/l,g=(r+i)/c,p,v,m=s-a,y=s*a;return o?(p=-s/m,v=-y/m):(p=-(s+a)/m,v=-2*y/m),n[0]=h,n[1]=0,n[2]=0,n[3]=0,n[4]=0,n[5]=d,n[6]=0,n[7]=0,n[8]=f,n[9]=g,n[10]=p,n[11]=-1,n[12]=0,n[13]=0,n[14]=v,n[15]=0,n}function bE(n){var e=n[0],t=n[1],r=n[3],i=n[4],a=Math.sqrt(e*e+t*t),s=Math.sqrt(r*r+i*i),o=e*i-t*r;if(o<0&&(e<i?a=-a:s=-s),a){var u=1/a;e*=u,t*=u}if(s){var l=1/s;r*=l,i*=l}var c=Math.atan2(t,e),h=Yn(c);return[n[6],n[7],a,s,h]}var gi=nt(),Gr=nt(),Tu=ki(),pe=[Ie(),Ie(),Ie()],xE=Ie();function Y9(n,e,t,r,i,a){if(!X9(gi,n)||(Qo(Gr,gi),Gr[3]=0,Gr[7]=0,Gr[11]=0,Gr[15]=1,Math.abs(IO(Gr))<1e-8))return!1;var s=gi[3],o=gi[7],u=gi[11],l=gi[12],c=gi[13],h=gi[14],d=gi[15];if(s!==0||o!==0||u!==0){Tu[0]=s,Tu[1]=o,Tu[2]=u,Tu[3]=d;var f=Ei(Gr,Gr);if(!f)return!1;LO(Gr,Gr),ta(i,Tu,Gr)}else i[0]=i[1]=i[2]=0,i[3]=1;if(e[0]=l,e[1]=c,e[2]=h,K9(pe,gi),t[0]=Zi(pe[0]),$s(pe[0],pe[0]),r[0]=Si(pe[0],pe[1]),J0(pe[1],pe[1],pe[0],1,-r[0]),t[1]=Zi(pe[1]),$s(pe[1],pe[1]),r[0]/=t[1],r[1]=Si(pe[0],pe[2]),J0(pe[2],pe[2],pe[0],1,-r[1]),r[2]=Si(pe[1],pe[2]),J0(pe[2],pe[2],pe[1],1,-r[2]),t[2]=Zi(pe[2]),$s(pe[2],pe[2]),r[1]/=t[2],r[2]/=t[2],Lh(xE,pe[1],pe[2]),Si(pe[0],xE)<0)for(var g=0;g<3;g++)t[g]*=-1,pe[g][0]*=-1,pe[g][1]*=-1,pe[g][2]*=-1;return a[0]=.5*Math.sqrt(Math.max(1+pe[0][0]-pe[1][1]-pe[2][2],0)),a[1]=.5*Math.sqrt(Math.max(1-pe[0][0]+pe[1][1]-pe[2][2],0)),a[2]=.5*Math.sqrt(Math.max(1-pe[0][0]-pe[1][1]+pe[2][2],0)),a[3]=.5*Math.sqrt(Math.max(1+pe[0][0]+pe[1][1]+pe[2][2],0)),pe[2][1]>pe[1][2]&&(a[0]=-a[0]),pe[0][2]>pe[2][0]&&(a[1]=-a[1]),pe[1][0]>pe[0][1]&&(a[2]=-a[2]),!0}function X9(n,e){var t=e[15];if(t===0)return!1;for(var r=1/t,i=0;i<16;i++)n[i]=e[i]*r;return!0}function K9(n,e){n[0][0]=e[0],n[0][1]=e[1],n[0][2]=e[2],n[1][0]=e[4],n[1][1]=e[5],n[1][2]=e[6],n[2][0]=e[8],n[2][1]=e[9],n[2][2]=e[10]}function J0(n,e,t,r,i){n[0]=e[0]*r+t[0]*i,n[1]=e[1]*r+t[1]*i,n[2]=e[2]*r+t[2]*i}var Ve=function(n){return n[n.ORBITING=0]="ORBITING",n[n.EXPLORING=1]="EXPLORING",n[n.TRACKING=2]="TRACKING",n}({}),db=function(n){return n[n.DEFAULT=0]="DEFAULT",n[n.ROTATIONAL=1]="ROTATIONAL",n[n.TRANSLATIONAL=2]="TRANSLATIONAL",n[n.CINEMATIC=3]="CINEMATIC",n}({}),Tr=function(n){return n[n.ORTHOGRAPHIC=0]="ORTHOGRAPHIC",n[n.PERSPECTIVE=1]="PERSPECTIVE",n}({}),vM={UPDATED:"updated"},wE=2e-4,mM=function(){function n(){U(this,n),this.clipSpaceNearZ=Fh.NEGATIVE_ONE,this.eventEmitter=new PO,this.matrix=nt(),this.right=st(1,0,0),this.up=st(0,1,0),this.forward=st(0,0,1),this.position=st(0,0,1),this.focalPoint=st(0,0,0),this.distanceVector=st(0,0,-1),this.distance=1,this.azimuth=0,this.elevation=0,this.roll=0,this.relAzimuth=0,this.relElevation=0,this.relRoll=0,this.dollyingStep=0,this.maxDistance=1/0,this.minDistance=-1/0,this.zoom=1,this.rotateWorld=!1,this.fov=30,this.near=.1,this.far=1e3,this.aspect=1,this.projectionMatrix=nt(),this.projectionMatrixInverse=nt(),this.jitteredProjectionMatrix=void 0,this.enableUpdate=!0,this.type=Ve.EXPLORING,this.trackingMode=db.DEFAULT,this.projectionMode=Tr.PERSPECTIVE,this.frustum=new z9,this.orthoMatrix=nt()}return H(n,[{key:"isOrtho",value:function(){return this.projectionMode===Tr.ORTHOGRAPHIC}},{key:"getProjectionMode",value:function(){return this.projectionMode}},{key:"getPerspective",value:function(){return this.jitteredProjectionMatrix||this.projectionMatrix}},{key:"getPerspectiveInverse",value:function(){return this.projectionMatrixInverse}},{key:"getFrustum",value:function(){return this.frustum}},{key:"getPosition",value:function(){return this.position}},{key:"getFocalPoint",value:function(){return this.focalPoint}},{key:"getDollyingStep",value:function(){return this.dollyingStep}},{key:"getNear",value:function(){return this.near}},{key:"getFar",value:function(){return this.far}},{key:"getZoom",value:function(){return this.zoom}},{key:"getOrthoMatrix",value:function(){return this.orthoMatrix}},{key:"getView",value:function(){return this.view}},{key:"setEnableUpdate",value:function(t){this.enableUpdate=t}},{key:"setType",value:function(t,r){return this.type=t,this.type===Ve.EXPLORING?this.setWorldRotation(!0):this.setWorldRotation(!1),this._getAngles(),this.type===Ve.TRACKING&&r!==void 0&&this.setTrackingMode(r),this}},{key:"setProjectionMode",value:function(t){return this.projectionMode=t,this}},{key:"setTrackingMode",value:function(t){if(this.type!==Ve.TRACKING)throw new Error("Impossible to set a tracking mode if the camera is not of tracking type");return this.trackingMode=t,this}},{key:"setWorldRotation",value:function(t){return this.rotateWorld=t,this._getAngles(),this}},{key:"getViewTransform",value:function(){return Ei(nt(),this.matrix)}},{key:"getWorldTransform",value:function(){return this.matrix}},{key:"jitterProjectionMatrix",value:function(t,r){var i=Ia(nt(),[t,r,0]);this.jitteredProjectionMatrix=On(nt(),i,this.projectionMatrix)}},{key:"clearJitterProjectionMatrix",value:function(){this.jitteredProjectionMatrix=void 0}},{key:"setMatrix",value:function(t){return this.matrix=t,this._update(),this}},{key:"setProjectionMatrix",value:function(t){this.projectionMatrix=t}},{key:"setFov",value:function(t){return this.setPerspective(this.near,this.far,t,this.aspect),this}},{key:"setAspect",value:function(t){return this.setPerspective(this.near,this.far,this.fov,t),this}},{key:"setNear",value:function(t){return this.projectionMode===Tr.PERSPECTIVE?this.setPerspective(t,this.far,this.fov,this.aspect):this.setOrthographic(this.left,this.rright,this.top,this.bottom,t,this.far),this}},{key:"setFar",value:function(t){return this.projectionMode===Tr.PERSPECTIVE?this.setPerspective(this.near,t,this.fov,this.aspect):this.setOrthographic(this.left,this.rright,this.top,this.bottom,this.near,t),this}},{key:"setViewOffset",value:function(t,r,i,a,s,o){return this.aspect=t/r,this.view===void 0&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=t,this.view.fullHeight=r,this.view.offsetX=i,this.view.offsetY=a,this.view.width=s,this.view.height=o,this.projectionMode===Tr.PERSPECTIVE?this.setPerspective(this.near,this.far,this.fov,this.aspect):this.setOrthographic(this.left,this.rright,this.top,this.bottom,this.near,this.far),this}},{key:"clearViewOffset",value:function(){return this.view!==void 0&&(this.view.enabled=!1),this.projectionMode===Tr.PERSPECTIVE?this.setPerspective(this.near,this.far,this.fov,this.aspect):this.setOrthographic(this.left,this.rright,this.top,this.bottom,this.near,this.far),this}},{key:"setZoom",value:function(t){return this.zoom=t,this.projectionMode===Tr.ORTHOGRAPHIC?this.setOrthographic(this.left,this.rright,this.top,this.bottom,this.near,this.far):this.projectionMode===Tr.PERSPECTIVE&&this.setPerspective(this.near,this.far,this.fov,this.aspect),this}},{key:"setZoomByViewportPoint",value:function(t,r){var i=this.canvas.viewport2Canvas({x:r[0],y:r[1]}),a=i.x,s=i.y,o=this.roll;this.rotate(0,0,-o),this.setPosition(a,s),this.setFocalPoint(a,s),this.setZoom(t),this.rotate(0,0,o);var u=this.canvas.viewport2Canvas({x:r[0],y:r[1]}),l=u.x,c=u.y,h=st(l-a,c-s,0),d=Si(h,this.right)/Zi(this.right),f=Si(h,this.up)/Zi(this.up),g=this.getPosition(),p=Ee(g,2),v=p[0],m=p[1],y=this.getFocalPoint(),b=Ee(y,2),x=b[0],w=b[1];return this.setPosition(v-d,m-f),this.setFocalPoint(x-d,w-f),this}},{key:"setPerspective",value:function(t,r,i,a){var s;this.projectionMode=Tr.PERSPECTIVE,this.fov=i,this.near=t,this.far=r,this.aspect=a;var o=this.near*Math.tan(Ye(.5*this.fov))/this.zoom,u=2*o,l=this.aspect*u,c=-.5*l;if((s=this.view)!==null&&s!==void 0&&s.enabled){var h=this.view.fullWidth,d=this.view.fullHeight;c+=this.view.offsetX*l/h,o-=this.view.offsetY*u/d,l*=this.view.width/h,u*=this.view.height/d}return H9(this.projectionMatrix,c,c+l,o-u,o,t,this.far,this.clipSpaceNearZ===Fh.ZERO),Ei(this.projectionMatrixInverse,this.projectionMatrix),this.triggerUpdate(),this}},{key:"setOrthographic",value:function(t,r,i,a,s,o){var u;this.projectionMode=Tr.ORTHOGRAPHIC,this.rright=r,this.left=t,this.top=i,this.bottom=a,this.near=s,this.far=o;var l=(this.rright-this.left)/(2*this.zoom),c=(this.top-this.bottom)/(2*this.zoom),h=(this.rright+this.left)/2,d=(this.top+this.bottom)/2,f=h-l,g=h+l,p=d+c,v=d-c;if((u=this.view)!==null&&u!==void 0&&u.enabled){var m=(this.rright-this.left)/this.view.fullWidth/this.zoom,y=(this.top-this.bottom)/this.view.fullHeight/this.zoom;f+=m*this.view.offsetX,g=f+m*this.view.width,p-=y*this.view.offsetY,v=p-y*this.view.height}return this.clipSpaceNearZ===Fh.NEGATIVE_ONE?UO(this.projectionMatrix,f,g,p,v,s,o):HO(this.projectionMatrix,f,g,p,v,s,o),Ei(this.projectionMatrixInverse,this.projectionMatrix),this._getOrthoMatrix(),this.triggerUpdate(),this}},{key:"setPosition",value:function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.position[1],i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:this.position[2],a=In(t,r,i);return this._setPosition(a),this.setFocalPoint(this.focalPoint),this.triggerUpdate(),this}},{key:"setFocalPoint",value:function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.focalPoint[1],i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:this.focalPoint[2],a=st(0,1,0);if(this.focalPoint=In(t,r,i),this.trackingMode===db.CINEMATIC){var s=Jy(Ie(),this.focalPoint,this.position);t=s[0],r=s[1],i=s[2];var o=Zi(s),u=Yn(Math.asin(r/o)),l=90+Yn(Math.atan2(i,t)),c=nt();zO(c,c,Ye(l)),BO(c,c,Ye(u)),a=Mn(Ie(),[0,1,0],c)}return Ei(this.matrix,YO(nt(),this.position,this.focalPoint,a)),this._getAxes(),this._getDistance(),this._getAngles(),this.triggerUpdate(),this}},{key:"getDistance",value:function(){return this.distance}},{key:"getDistanceVector",value:function(){return this.distanceVector}},{key:"setDistance",value:function(t){if(this.distance===t||t<0)return this;this.distance=t,this.distance<wE&&(this.distance=wE),this.dollyingStep=this.distance/100;var r=Ie();t=this.distance;var i=this.forward,a=this.focalPoint;return r[0]=t*i[0]+a[0],r[1]=t*i[1]+a[1],r[2]=t*i[2]+a[2],this._setPosition(r),this.triggerUpdate(),this}},{key:"setMaxDistance",value:function(t){return this.maxDistance=t,this}},{key:"setMinDistance",value:function(t){return this.minDistance=t,this}},{key:"setAzimuth",value:function(t){return this.azimuth=$o(t),this.computeMatrix(),this._getAxes(),this.type===Ve.ORBITING||this.type===Ve.EXPLORING?this._getPosition():this.type===Ve.TRACKING&&this._getFocalPoint(),this.triggerUpdate(),this}},{key:"getAzimuth",value:function(){return this.azimuth}},{key:"setElevation",value:function(t){return this.elevation=$o(t),this.computeMatrix(),this._getAxes(),this.type===Ve.ORBITING||this.type===Ve.EXPLORING?this._getPosition():this.type===Ve.TRACKING&&this._getFocalPoint(),this.triggerUpdate(),this}},{key:"getElevation",value:function(){return this.elevation}},{key:"setRoll",value:function(t){return this.roll=$o(t),this.computeMatrix(),this._getAxes(),this.type===Ve.ORBITING||this.type===Ve.EXPLORING?this._getPosition():this.type===Ve.TRACKING&&this._getFocalPoint(),this.triggerUpdate(),this}},{key:"getRoll",value:function(){return this.roll}},{key:"_update",value:function(){this._getAxes(),this._getPosition(),this._getDistance(),this._getAngles(),this._getOrthoMatrix(),this.triggerUpdate()}},{key:"computeMatrix",value:function(){var t=ja(Wt(),[0,0,1],Ye(this.roll));is(this.matrix);var r=ja(Wt(),[1,0,0],Ye((this.rotateWorld&&this.type!==Ve.TRACKING||this.type===Ve.TRACKING?1:-1)*this.elevation)),i=ja(Wt(),[0,1,0],Ye((this.rotateWorld&&this.type!==Ve.TRACKING||this.type===Ve.TRACKING?1:-1)*this.azimuth)),a=Qa(Wt(),i,r);a=Qa(Wt(),a,t);var s=Y2(nt(),a);this.type===Ve.ORBITING||this.type===Ve.EXPLORING?(zo(this.matrix,this.matrix,this.focalPoint),On(this.matrix,this.matrix,s),zo(this.matrix,this.matrix,[0,0,this.distance])):this.type===Ve.TRACKING&&(zo(this.matrix,this.matrix,this.position),On(this.matrix,this.matrix,s))}},{key:"_setPosition",value:function(t,r,i){this.position=In(t,r,i);var a=this.matrix;a[12]=this.position[0],a[13]=this.position[1],a[14]=this.position[2],a[15]=1,this._getOrthoMatrix()}},{key:"_getAxes",value:function(){_i(this.right,In(ta(ki(),[1,0,0,0],this.matrix))),_i(this.up,In(ta(ki(),[0,1,0,0],this.matrix))),_i(this.forward,In(ta(ki(),[0,0,1,0],this.matrix))),$s(this.right,this.right),$s(this.up,this.up),$s(this.forward,this.forward)}},{key:"_getAngles",value:function(){var t=this.distanceVector[0],r=this.distanceVector[1],i=this.distanceVector[2],a=Zi(this.distanceVector);if(a===0){this.elevation=0,this.azimuth=0;return}this.type===Ve.TRACKING?(this.elevation=Yn(Math.asin(r/a)),this.azimuth=Yn(Math.atan2(-t,-i))):this.rotateWorld?(this.elevation=Yn(Math.asin(r/a)),this.azimuth=Yn(Math.atan2(-t,-i))):(this.elevation=-Yn(Math.asin(r/a)),this.azimuth=-Yn(Math.atan2(-t,-i)))}},{key:"_getPosition",value:function(){_i(this.position,In(ta(ki(),[0,0,0,1],this.matrix))),this._getDistance()}},{key:"_getFocalPoint",value:function(){jL(this.distanceVector,[0,0,-this.distance],mL(NO(),this.matrix)),Ja(this.focalPoint,this.position,this.distanceVector),this._getDistance()}},{key:"_getDistance",value:function(){this.distanceVector=Jy(Ie(),this.focalPoint,this.position),this.distance=Zi(this.distanceVector),this.dollyingStep=this.distance/100}},{key:"_getOrthoMatrix",value:function(){if(this.projectionMode===Tr.ORTHOGRAPHIC){var t=this.position,r=ja(Wt(),[0,0,1],-this.roll*Math.PI/180);ol(this.orthoMatrix,r,st((this.rright-this.left)/2-t[0],(this.top-this.bottom)/2-t[1],0),st(this.zoom,this.zoom,1),t)}}},{key:"triggerUpdate",value:function(){if(this.enableUpdate){var t=this.getViewTransform(),r=On(nt(),this.getPerspective(),t);this.getFrustum().extractFromVPMatrix(r),this.eventEmitter.emit(vM.UPDATED)}}},{key:"rotate",value:function(t,r,i){throw new Error(He)}},{key:"pan",value:function(t,r){throw new Error(He)}},{key:"dolly",value:function(t){throw new Error(He)}},{key:"createLandmark",value:function(t,r){throw new Error(He)}},{key:"gotoLandmark",value:function(t,r){throw new Error(He)}},{key:"cancelLandmarkAnimation",value:function(){throw new Error(He)}}])}(),Z9=function(n){return n[n.Standard=0]="Standard",n}({}),hd=function(n){return n[n.ADDED=0]="ADDED",n[n.REMOVED=1]="REMOVED",n[n.Z_INDEX_CHANGED=2]="Z_INDEX_CHANGED",n}({}),yM={absolutePath:[],hasArc:!1,segments:[],polygons:[],polylines:[],curve:null,totalLength:0,rect:new ru(0,0,0,0)},J=function(n){return n.COORDINATE="<coordinate>",n.COLOR="<color>",n.PAINT="<paint>",n.NUMBER="<number>",n.ANGLE="<angle>",n.OPACITY_VALUE="<opacity-value>",n.SHADOW_BLUR="<shadow-blur>",n.LENGTH="<length>",n.PERCENTAGE="<percentage>",n.LENGTH_PERCENTAGE="<length> | <percentage>",n.LENGTH_PERCENTAGE_12="[<length> | <percentage>]{1,2}",n.LENGTH_PERCENTAGE_14="[<length> | <percentage>]{1,4}",n.LIST_OF_POINTS="<list-of-points>",n.PATH="<path>",n.FILTER="<filter>",n.Z_INDEX="<z-index>",n.OFFSET_DISTANCE="<offset-distance>",n.DEFINED_PATH="<defined-path>",n.MARKER="<marker>",n.TRANSFORM="<transform>",n.TRANSFORM_ORIGIN="<transform-origin>",n.TEXT="<text>",n.TEXT_TRANSFORM="<text-transform>",n}({});function J2(n,e,t){n.prototype=e.prototype=t,t.constructor=n}function bM(n,e){var t=Object.create(n.prototype);for(var r in e)t[r]=e[r];return t}function Zl(){}var El=.7,dd=1/El,jo="\\s*([+-]?\\d+)\\s*",_l="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Oi="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",J9=/^#([0-9a-f]{3,8})$/,Q9=new RegExp(`^rgb\\(${jo},${jo},${jo}\\)$`),e7=new RegExp(`^rgb\\(${Oi},${Oi},${Oi}\\)$`),t7=new RegExp(`^rgba\\(${jo},${jo},${jo},${_l}\\)$`),n7=new RegExp(`^rgba\\(${Oi},${Oi},${Oi},${_l}\\)$`),r7=new RegExp(`^hsl\\(${_l},${Oi},${Oi}\\)$`),i7=new RegExp(`^hsla\\(${_l},${Oi},${Oi},${_l}\\)$`),EE={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};J2(Zl,tf,{copy(n){return Object.assign(new this.constructor,this,n)},displayable(){return this.rgb().displayable()},hex:_E,formatHex:_E,formatHex8:a7,formatHsl:s7,formatRgb:SE,toString:SE});function _E(){return this.rgb().formatHex()}function a7(){return this.rgb().formatHex8()}function s7(){return xM(this).formatHsl()}function SE(){return this.rgb().formatRgb()}function tf(n){var e,t;return n=(n+"").trim().toLowerCase(),(e=J9.exec(n))?(t=e[1].length,e=parseInt(e[1],16),t===6?kE(e):t===3?new Jn(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):t===8?Ac(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):t===4?Ac(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=Q9.exec(n))?new Jn(e[1],e[2],e[3],1):(e=e7.exec(n))?new Jn(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=t7.exec(n))?Ac(e[1],e[2],e[3],e[4]):(e=n7.exec(n))?Ac(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=r7.exec(n))?TE(e[1],e[2]/100,e[3]/100,1):(e=i7.exec(n))?TE(e[1],e[2]/100,e[3]/100,e[4]):EE.hasOwnProperty(n)?kE(EE[n]):n==="transparent"?new Jn(NaN,NaN,NaN,0):null}function kE(n){return new Jn(n>>16&255,n>>8&255,n&255,1)}function Ac(n,e,t,r){return r<=0&&(n=e=t=NaN),new Jn(n,e,t,r)}function o7(n){return n instanceof Zl||(n=tf(n)),n?(n=n.rgb(),new Jn(n.r,n.g,n.b,n.opacity)):new Jn}function u7(n,e,t,r){return arguments.length===1?o7(n):new Jn(n,e,t,r??1)}function Jn(n,e,t,r){this.r=+n,this.g=+e,this.b=+t,this.opacity=+r}J2(Jn,u7,bM(Zl,{brighter(n){return n=n==null?dd:Math.pow(dd,n),new Jn(this.r*n,this.g*n,this.b*n,this.opacity)},darker(n){return n=n==null?El:Math.pow(El,n),new Jn(this.r*n,this.g*n,this.b*n,this.opacity)},rgb(){return this},clamp(){return new Jn(js(this.r),js(this.g),js(this.b),fd(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:CE,formatHex:CE,formatHex8:l7,formatRgb:AE,toString:AE}));function CE(){return`#${Ps(this.r)}${Ps(this.g)}${Ps(this.b)}`}function l7(){return`#${Ps(this.r)}${Ps(this.g)}${Ps(this.b)}${Ps((isNaN(this.opacity)?1:this.opacity)*255)}`}function AE(){const n=fd(this.opacity);return`${n===1?"rgb(":"rgba("}${js(this.r)}, ${js(this.g)}, ${js(this.b)}${n===1?")":`, ${n})`}`}function fd(n){return isNaN(n)?1:Math.max(0,Math.min(1,n))}function js(n){return Math.max(0,Math.min(255,Math.round(n)||0))}function Ps(n){return n=js(n),(n<16?"0":"")+n.toString(16)}function TE(n,e,t,r){return r<=0?n=e=t=NaN:t<=0||t>=1?n=e=NaN:e<=0&&(n=NaN),new ti(n,e,t,r)}function xM(n){if(n instanceof ti)return new ti(n.h,n.s,n.l,n.opacity);if(n instanceof Zl||(n=tf(n)),!n)return new ti;if(n instanceof ti)return n;n=n.rgb();var e=n.r/255,t=n.g/255,r=n.b/255,i=Math.min(e,t,r),a=Math.max(e,t,r),s=NaN,o=a-i,u=(a+i)/2;return o?(e===a?s=(t-r)/o+(t<r)*6:t===a?s=(r-e)/o+2:s=(e-t)/o+4,o/=u<.5?a+i:2-a-i,s*=60):o=u>0&&u<1?0:s,new ti(s,o,u,n.opacity)}function c7(n,e,t,r){return arguments.length===1?xM(n):new ti(n,e,t,r??1)}function ti(n,e,t,r){this.h=+n,this.s=+e,this.l=+t,this.opacity=+r}J2(ti,c7,bM(Zl,{brighter(n){return n=n==null?dd:Math.pow(dd,n),new ti(this.h,this.s,this.l*n,this.opacity)},darker(n){return n=n==null?El:Math.pow(El,n),new ti(this.h,this.s,this.l*n,this.opacity)},rgb(){var n=this.h%360+(this.h<0)*360,e=isNaN(n)||isNaN(this.s)?0:this.s,t=this.l,r=t+(t<.5?t:1-t)*e,i=2*t-r;return new Jn(Q0(n>=240?n-240:n+120,i,r),Q0(n,i,r),Q0(n<120?n+240:n-120,i,r),this.opacity)},clamp(){return new ti(OE(this.h),Tc(this.s),Tc(this.l),fd(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const n=fd(this.opacity);return`${n===1?"hsl(":"hsla("}${OE(this.h)}, ${Tc(this.s)*100}%, ${Tc(this.l)*100}%${n===1?")":`, ${n})`}`}}));function OE(n){return n=(n||0)%360,n<0?n+360:n}function Tc(n){return Math.max(0,Math.min(1,n||0))}function Q0(n,e,t){return(n<60?e+(t-e)*n/60:n<180?t:n<240?e+(t-e)*(240-n)/60:e)*255}function $t(n,e){if(typeof n!="function"||e!=null&&typeof e!="function")throw new TypeError("Expected a function");var t=function(){for(var i=arguments.length,a=new Array(i),s=0;s<i;s++)a[s]=arguments[s];var o=e?e.apply(this,a):a[0],u=t.cache;if(u.has(o))return u.get(o);var l=n.apply(this,a);return t.cache=u.set(o,l)||u,l};return t.cache=new($t.Cache||Map),$t.cacheList.push(t.cache),t}$t.Cache=Map;$t.cacheList=[];$t.clearCache=function(){$t.cacheList.forEach(function(n){return n.clear()})};var Q=function(n){return n[n.kUnknown=0]="kUnknown",n[n.kNumber=1]="kNumber",n[n.kPercentage=2]="kPercentage",n[n.kEms=3]="kEms",n[n.kPixels=4]="kPixels",n[n.kRems=5]="kRems",n[n.kDegrees=6]="kDegrees",n[n.kRadians=7]="kRadians",n[n.kGradians=8]="kGradians",n[n.kTurns=9]="kTurns",n[n.kMilliseconds=10]="kMilliseconds",n[n.kSeconds=11]="kSeconds",n[n.kInteger=12]="kInteger",n}({}),ei=function(n){return n[n.kUNumber=0]="kUNumber",n[n.kUPercent=1]="kUPercent",n[n.kULength=2]="kULength",n[n.kUAngle=3]="kUAngle",n[n.kUTime=4]="kUTime",n[n.kUOther=5]="kUOther",n}({}),h7=function(n){return n[n.kYes=0]="kYes",n[n.kNo=1]="kNo",n}({}),d7=function(n){return n[n.kYes=0]="kYes",n[n.kNo=1]="kNo",n}({}),f7=[{name:"em",unit_type:Q.kEms},{name:"px",unit_type:Q.kPixels},{name:"deg",unit_type:Q.kDegrees},{name:"rad",unit_type:Q.kRadians},{name:"grad",unit_type:Q.kGradians},{name:"ms",unit_type:Q.kMilliseconds},{name:"s",unit_type:Q.kSeconds},{name:"rem",unit_type:Q.kRems},{name:"turn",unit_type:Q.kTurns}],iu=function(n){return n[n.kUnknownType=0]="kUnknownType",n[n.kUnparsedType=1]="kUnparsedType",n[n.kKeywordType=2]="kKeywordType",n[n.kUnitType=3]="kUnitType",n[n.kSumType=4]="kSumType",n[n.kProductType=5]="kProductType",n[n.kNegateType=6]="kNegateType",n[n.kInvertType=7]="kInvertType",n[n.kMinType=8]="kMinType",n[n.kMaxType=9]="kMaxType",n[n.kClampType=10]="kClampType",n[n.kTransformType=11]="kTransformType",n[n.kPositionType=12]="kPositionType",n[n.kURLImageType=13]="kURLImageType",n[n.kColorType=14]="kColorType",n[n.kUnsupportedColorType=15]="kUnsupportedColorType",n}({}),g7=function(e){return f7.find(function(t){return t.name===e}).unit_type},p7=function(e){return e?e==="number"?Q.kNumber:e==="percent"||e==="%"?Q.kPercentage:g7(e):Q.kUnknown},v7=function(e){switch(e){case Q.kNumber:case Q.kInteger:return ei.kUNumber;case Q.kPercentage:return ei.kUPercent;case Q.kPixels:return ei.kULength;case Q.kMilliseconds:case Q.kSeconds:return ei.kUTime;case Q.kDegrees:case Q.kRadians:case Q.kGradians:case Q.kTurns:return ei.kUAngle;default:return ei.kUOther}},m7=function(e){switch(e){case ei.kUNumber:return Q.kNumber;case ei.kULength:return Q.kPixels;case ei.kUPercent:return Q.kPercentage;case ei.kUTime:return Q.kSeconds;case ei.kUAngle:return Q.kDegrees;default:return Q.kUnknown}},ME=function(e){var t=1;switch(e){case Q.kPixels:case Q.kDegrees:case Q.kSeconds:break;case Q.kMilliseconds:t=.001;break;case Q.kRadians:t=180/Math.PI;break;case Q.kGradians:t=.9;break;case Q.kTurns:t=360;break}return t},fb=function(e){switch(e){case Q.kNumber:case Q.kInteger:return"";case Q.kPercentage:return"%";case Q.kEms:return"em";case Q.kRems:return"rem";case Q.kPixels:return"px";case Q.kDegrees:return"deg";case Q.kRadians:return"rad";case Q.kGradians:return"grad";case Q.kMilliseconds:return"ms";case Q.kSeconds:return"s";case Q.kTurns:return"turn"}return""},nf=function(){function n(){U(this,n)}return H(n,[{key:"toString",value:function(){return this.buildCSSText(h7.kNo,d7.kNo,"")}},{key:"isNumericValue",value:function(){return this.getType()>=iu.kUnitType&&this.getType()<=iu.kClampType}}],[{key:"isAngle",value:function(t){return t===Q.kDegrees||t===Q.kRadians||t===Q.kGradians||t===Q.kTurns}},{key:"isLength",value:function(t){return t>=Q.kEms&&t<Q.kDegrees}},{key:"isRelativeUnit",value:function(t){return t===Q.kPercentage||t===Q.kEms||t===Q.kRems}},{key:"isTime",value:function(t){return t===Q.kSeconds||t===Q.kMilliseconds}}])}(),y7=function(n){function e(t){var r;return U(this,e),r=Te(this,e),r.colorSpace=t,r}return Oe(e,n),H(e,[{key:"getType",value:function(){return iu.kColorType}},{key:"to",value:function(r){return this}}])}(nf),qa=function(n){return n[n.Constant=0]="Constant",n[n.LinearGradient=1]="LinearGradient",n[n.RadialGradient=2]="RadialGradient",n}({}),Oc=function(n){function e(t,r){var i;return U(this,e),i=Te(this,e),i.type=t,i.value=r,i}return Oe(e,n),H(e,[{key:"clone",value:function(){return new e(this.type,this.value)}},{key:"buildCSSText",value:function(r,i,a){return a}},{key:"getType",value:function(){return iu.kColorType}}])}(nf),Fr=function(n){function e(t){var r;return U(this,e),r=Te(this,e),r.value=t,r}return Oe(e,n),H(e,[{key:"clone",value:function(){return new e(this.value)}},{key:"getType",value:function(){return iu.kKeywordType}},{key:"buildCSSText",value:function(r,i,a){return a+this.value}}])}(nf),b7=function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"",r="";return Number.isFinite(e)?r="NaN":e>0?r="infinity":r="-infinity",r+=t},gb=function(e){return m7(v7(e))},rn=function(n){function e(t){var r,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Q.kNumber;U(this,e),r=Te(this,e);var a;return typeof i=="string"?a=p7(i):a=i,r.unit=a,r.value=t,r}return Oe(e,n),H(e,[{key:"clone",value:function(){return new e(this.value,this.unit)}},{key:"equals",value:function(r){var i=r;return this.value===i.value&&this.unit===i.unit}},{key:"getType",value:function(){return iu.kUnitType}},{key:"convertTo",value:function(r){if(this.unit===r)return new e(this.value,this.unit);var i=gb(this.unit);if(i!==gb(r)||i===Q.kUnknown)return null;var a=ME(this.unit)/ME(r);return new e(this.value*a,r)}},{key:"buildCSSText",value:function(r,i,a){var s;switch(this.unit){case Q.kUnknown:break;case Q.kInteger:s=Number(this.value).toFixed(0);break;case Q.kNumber:case Q.kPercentage:case Q.kEms:case Q.kRems:case Q.kPixels:case Q.kDegrees:case Q.kRadians:case Q.kGradians:case Q.kMilliseconds:case Q.kSeconds:case Q.kTurns:{var o=-999999,u=999999,l=this.value,c=fb(this.unit);if(l<o||l>u){var h=fb(this.unit);!Number.isFinite(l)||Number.isNaN(l)?s=b7(l,h):s=l+(h||"")}else s="".concat(l).concat(c)}}return a+=s,a}}])}(nf),Wr=new rn(0,"px");new rn(1,"px");var Ys=new rn(0,"deg"),Q2=function(n){function e(t,r,i){var a,s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:1,o=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!1;return U(this,e),a=Te(this,e,["rgb"]),a.r=t,a.g=r,a.b=i,a.alpha=s,a.isNone=o,a}return Oe(e,n),H(e,[{key:"clone",value:function(){return new e(this.r,this.g,this.b,this.alpha)}},{key:"buildCSSText",value:function(r,i,a){return"".concat(a,"rgba(").concat(this.r,",").concat(this.g,",").concat(this.b,",").concat(this.alpha,")")}}])}(y7),PE=new Fr("unset"),x7=new Fr("initial"),w7=new Fr("inherit"),eg={"":PE,unset:PE,initial:x7,inherit:w7},E7=function(e){return eg[e]||(eg[e]=new Fr(e)),eg[e]},wM=new Q2(0,0,0,0,!0),EM=new Q2(0,0,0,0),_7=$t(function(n,e,t,r){return new Q2(n,e,t,r)},function(n,e,t,r){return"rgba(".concat(n,",").concat(e,",").concat(t,",").concat(r,")")}),vt=function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Q.kNumber;return new rn(e,t)};new rn(50,"%");function S7(n){var e=n.type,t=n.value;return e==="hex"?"#".concat(t):e==="literal"?t:e==="rgb"?"rgb(".concat(t.join(","),")"):"rgba(".concat(t.join(","),")")}var k7=function(){var n={linearGradient:/^(linear\-gradient)/i,repeatingLinearGradient:/^(repeating\-linear\-gradient)/i,radialGradient:/^(radial\-gradient)/i,repeatingRadialGradient:/^(repeating\-radial\-gradient)/i,conicGradient:/^(conic\-gradient)/i,sideOrCorner:/^to (left (top|bottom)|right (top|bottom)|top (left|right)|bottom (left|right)|left|right|top|bottom)/i,extentKeywords:/^(closest\-side|closest\-corner|farthest\-side|farthest\-corner|contain|cover)/,positionKeywords:/^(left|center|right|top|bottom)/i,pixelValue:/^(-?(([0-9]*\.[0-9]+)|([0-9]+\.?)))px/,percentageValue:/^(-?(([0-9]*\.[0-9]+)|([0-9]+\.?)))\%/,emValue:/^(-?(([0-9]*\.[0-9]+)|([0-9]+\.?)))em/,angleValue:/^(-?(([0-9]*\.[0-9]+)|([0-9]+\.?)))deg/,startCall:/^\(/,endCall:/^\)/,comma:/^,/,hexColor:/^\#([0-9a-fA-F]+)/,literalColor:/^([a-zA-Z]+)/,rgbColor:/^rgb/i,rgbaColor:/^rgba/i,number:/^(([0-9]*\.[0-9]+)|([0-9]+\.?))/},e="";function t(D){throw new Error("".concat(e,": ").concat(D))}function r(){var D=i();return e.length>0&&t("Invalid input not EOF"),D}function i(){return b(a)}function a(){return s("linear-gradient",n.linearGradient,u)||s("repeating-linear-gradient",n.repeatingLinearGradient,u)||s("radial-gradient",n.radialGradient,h)||s("repeating-radial-gradient",n.repeatingRadialGradient,h)||s("conic-gradient",n.conicGradient,h)}function s(D,M,F){return o(M,function(j){var B=F();return B&&(R(n.comma)||t("Missing comma before color stops")),{type:D,orientation:B,colorStops:b(x)}})}function o(D,M){var F=R(D);if(F){R(n.startCall)||t("Missing (");var j=M(F);return R(n.endCall)||t("Missing )"),j}}function u(){return l()||c()}function l(){return P("directional",n.sideOrCorner,1)}function c(){return P("angular",n.angleValue,1)}function h(){var D,M=d(),F;return M&&(D=[],D.push(M),F=e,R(n.comma)&&(M=d(),M?D.push(M):e=F)),D}function d(){var D=f()||g();if(D)D.at=v();else{var M=p();if(M){D=M;var F=v();F&&(D.at=F)}else{var j=m();j&&(D={type:"default-radial",at:j})}}return D}function f(){var D=P("shape",/^(circle)/i,0);return D&&(D.style=O()||p()),D}function g(){var D=P("shape",/^(ellipse)/i,0);return D&&(D.style=A()||p()),D}function p(){return P("extent-keyword",n.extentKeywords,1)}function v(){if(P("position",/^at/,0)){var D=m();return D||t("Missing positioning value"),D}}function m(){var D=y();if(D.x||D.y)return{type:"position",value:D}}function y(){return{x:A(),y:A()}}function b(D){var M=D(),F=[];if(M)for(F.push(M);R(n.comma);)M=D(),M?F.push(M):t("One extra comma");return F}function x(){var D=w();return D||t("Expected color definition"),D.length=A(),D}function w(){return _()||C()||S()||E()}function E(){return P("literal",n.literalColor,0)}function _(){return P("hex",n.hexColor,1)}function S(){return o(n.rgbColor,function(){return{type:"rgb",value:b(k)}})}function C(){return o(n.rgbaColor,function(){return{type:"rgba",value:b(k)}})}function k(){return R(n.number)[1]}function A(){return P("%",n.percentageValue,1)||T()||O()}function T(){return P("position-keyword",n.positionKeywords,1)}function O(){return P("px",n.pixelValue,1)||P("em",n.emValue,1)}function P(D,M,F){var j=R(M);if(j)return{type:D,value:j[F]}}function R(D){var M=/^[\n\r\t\s]+/.exec(e);M&&N(M[0].length);var F=D.exec(e);return F&&N(F[0].length),F}function N(D){e=e.substring(D)}return function(D){return e=D,r()}}();function C7(n,e,t,r){var i=Ye(r.value),a=0,s=0,o=a+e/2,u=s+t/2,l=Math.abs(e*Math.cos(i))+Math.abs(t*Math.sin(i)),c=n[0]+o-Math.cos(i)*l/2,h=n[1]+u-Math.sin(i)*l/2,d=n[0]+o+Math.cos(i)*l/2,f=n[1]+u+Math.sin(i)*l/2;return{x1:c,y1:h,x2:d,y2:f}}function A7(n,e,t,r,i,a){var s=r.value,o=i.value;r.unit===Q.kPercentage&&(s=r.value/100*e),i.unit===Q.kPercentage&&(o=i.value/100*t);var u=Math.max(Hn([0,0],[s,o]),Hn([0,t],[s,o]),Hn([e,t],[s,o]),Hn([e,0],[s,o]));return a&&(a instanceof rn?u=a.value:a instanceof Fr&&(a.value==="closest-side"?u=Math.min(s,e-s,o,t-o):a.value==="farthest-side"?u=Math.max(s,e-s,o,t-o):a.value==="closest-corner"&&(u=Math.min(Hn([0,0],[s,o]),Hn([0,t],[s,o]),Hn([e,t],[s,o]),Hn([e,0],[s,o]))))),{x:s+n[0],y:o+n[1],r:u}}var T7=/^l\s*\(\s*([\d.]+)\s*\)\s*(.*)/i,O7=/^r\s*\(\s*([\d.]+)\s*,\s*([\d.]+)\s*,\s*([\d.]+)\s*\)\s*(.*)/i,M7=/^p\s*\(\s*([axyn])\s*\)\s*(.*)/i,_M=/[\d.]+:(#[^\s]+|[^\)]+\))/gi;function P7(n){var e,t=n.length;if(n[t-1].length=(e=n[t-1].length)!==null&&e!==void 0?e:{type:"%",value:"100"},t>1){var r;n[0].length=(r=n[0].length)!==null&&r!==void 0?r:{type:"%",value:"0"}}for(var i=0,a=Number(n[0].length.value),s=1;s<t;s++){var o,u=(o=n[s].length)===null||o===void 0?void 0:o.value;if(!de(u)&&!de(a)){for(var l=1;l<s-i;l++)n[i+l].length={type:"%",value:"".concat(a+(Number(u)-a)*l/(s-i))};i=s,a=Number(u)}}}var N7={left:270-90,top:0-90,bottom:180-90,right:90-90,"left top":315-90,"top left":315-90,"left bottom":225-90,"bottom left":225-90,"right top":45-90,"top right":45-90,"right bottom":135-90,"bottom right":135-90},D7=$t(function(n){var e;return n.type==="angular"?e=Number(n.value):e=N7[n.value]||0,vt(e,"deg")}),R7=$t(function(n){var e=50,t=50,r="%",i="%";if((n==null?void 0:n.type)==="position"){var a=n.value,s=a.x,o=a.y;(s==null?void 0:s.type)==="position-keyword"&&(s.value==="left"?e=0:s.value==="center"?e=50:s.value==="right"?e=100:s.value==="top"?t=0:s.value==="bottom"&&(t=100)),(o==null?void 0:o.type)==="position-keyword"&&(o.value==="left"?e=0:o.value==="center"?t=50:o.value==="right"?e=100:o.value==="top"?t=0:o.value==="bottom"&&(t=100)),((s==null?void 0:s.type)==="px"||(s==null?void 0:s.type)==="%"||(s==null?void 0:s.type)==="em")&&(r=s==null?void 0:s.type,e=Number(s.value)),((o==null?void 0:o.type)==="px"||(o==null?void 0:o.type)==="%"||(o==null?void 0:o.type)==="em")&&(i=o==null?void 0:o.type,t=Number(o.value))}return{cx:vt(e,r),cy:vt(t,i)}}),L7=$t(function(n){if(n.indexOf("linear")>-1||n.indexOf("radial")>-1){var e=k7(n);return e.map(function(o){var u=o.type,l=o.orientation,c=o.colorStops;P7(c);var h=c.map(function(b){return{offset:vt(Number(b.length.value),"%"),color:S7(b)}});if(u==="linear-gradient")return new Oc(qa.LinearGradient,{angle:l?D7(l):Ys,steps:h});if(u==="radial-gradient"&&(l||(l=[{type:"shape",value:"circle"}]),l[0].type==="shape"&&l[0].value==="circle")){var d=R7(l[0].at),f=d.cx,g=d.cy,p;if(l[0].style){var v=l[0].style,m=v.type,y=v.value;m==="extent-keyword"?p=E7(y):p=vt(y,m)}return new Oc(qa.RadialGradient,{cx:f,cy:g,size:p,steps:h})}})}var t=n[0];if(n[1]==="("||n[2]==="("){if(t==="l"){var r=T7.exec(n);if(r){var i,a=((i=r[2].match(_M))===null||i===void 0?void 0:i.map(function(o){return o.split(":")}))||[];return[new Oc(qa.LinearGradient,{angle:vt(parseFloat(r[1]),"deg"),steps:a.map(function(o){var u=Ee(o,2),l=u[0],c=u[1];return{offset:vt(Number(l)*100,"%"),color:c}})})]}}else if(t==="r"){var s=I7(n);if(s)if(qe(s))n=s;else return[new Oc(qa.RadialGradient,s)]}else if(t==="p")return F7(n)}});function I7(n){var e=O7.exec(n);if(e){var t,r=((t=e[4].match(_M))===null||t===void 0?void 0:t.map(function(i){return i.split(":")}))||[];return{cx:vt(50,"%"),cy:vt(50,"%"),steps:r.map(function(i){var a=Ee(i,2),s=a[0],o=a[1];return{offset:vt(Number(s)*100,"%"),color:o}})}}return null}function F7(n){var e=M7.exec(n);if(e){var t=e[1],r=e[2];switch(t){case"a":t="repeat";break;case"x":t="repeat-x";break;case"y":t="repeat-y";break;case"n":t="no-repeat";break;default:t="no-repeat"}return{image:r,repetition:t}}return null}function Xs(n){return n&&!!n.image}function gd(n){return n&&!de(n.r)&&!de(n.g)&&!de(n.b)}var cl=$t(function(n){if(Xs(n))return Ce({repetition:"repeat"},n);if(de(n)&&(n=""),n==="transparent")return EM;if(n==="currentColor")n="black";else if(n==="none")return wM;var e=L7(n);if(e)return e;var t=tf(n),r=[0,0,0,0];return t!==null&&(r[0]=t.r||0,r[1]=t.g||0,r[2]=t.b||0,r[3]=t.opacity),_7.apply(void 0,r)});function B7(n,e){if(!(!gd(n)||!gd(e)))return[[Number(n.r),Number(n.g),Number(n.b),Number(n.alpha)],[Number(e.r),Number(e.g),Number(e.b),Number(e.alpha)],function(t){var r=t.slice();if(r[3])for(var i=0;i<3;i++)r[i]=Math.round(St(r[i],0,255));return r[3]=St(r[3],0,1),"rgba(".concat(r.join(","),")")}]}function Jl(n,e){if(de(e))return vt(0,"px");if(e="".concat(e).trim().toLowerCase(),isFinite(Number(e))){if("px".search(n)>=0)return vt(Number(e),"px");if("deg".search(n)>=0)return vt(Number(e),"deg")}var t=[];e=e.replace(n,function(i){return t.push(i),"U".concat(i)});var r="U(".concat(n.source,")");return t.map(function(i){return vt(Number(e.replace(new RegExp("U".concat(i),"g"),"").replace(new RegExp(r,"g"),"*0")),i)})[0]}var SM=function(e){return Jl(new RegExp("px","g"),e)},z7=$t(SM),$7=function(e){return Jl(new RegExp("%","g"),e)};$t($7);var kM=function(e){return re(e)||isFinite(Number(e))?vt(Number(e)||0,"px"):Jl(new RegExp("px|%|em|rem","g"),e)},pb=$t(kM),CM=function(e){return Jl(new RegExp("deg|rad|grad|turn","g"),e)},j7=$t(CM);function q7(n,e,t,r){var i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0,a="",s=n.value||0,o=e.value||0,u=gb(n.unit),l=n.convertTo(u),c=e.convertTo(u);return l&&c?(s=l.value,o=c.value,a=fb(n.unit)):(rn.isLength(n.unit)||rn.isLength(e.unit))&&(s=ur(n,i,t),o=ur(e,i,t),a="px"),[s,o,function(h){return r&&(h=Math.max(h,0)),h+a}]}function Xn(n){var e=0;return n.unit===Q.kDegrees?e=n.value:n.unit===Q.kRadians?e=Yn(Number(n.value)):n.unit===Q.kTurns?e=G9(Number(n.value)):n.value&&(e=n.value),e}function NE(n,e){var t;return Array.isArray(n)?t=n.map(function(r){return Number(r)}):qe(n)?t=n.split(" ").map(function(r){return Number(r)}):re(n)&&(t=[n]),e===2?t.length===1?[t[0],t[0]]:[t[0],t[1]]:e===4?t.length===1?[t[0],t[0],t[0],t[0]]:t.length===2?[t[0],t[1],t[0],t[1]]:t.length===3?[t[0],t[1],t[2],t[1]]:[t[0],t[1],t[2],t[3]]:e==="even"&&t.length%2===1?[].concat(at(t),at(t)):t}function ur(n,e,t){var r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(n.unit===Q.kPixels)return Number(n.value);if(n.unit===Q.kPercentage&&t){var i=t.nodeName===q.GROUP?t.getLocalBounds():t.getGeometryBounds();return(r?i.min[e]:0)+n.value/100*i.halfExtents[e]*2}return 0}var G7=function(e){return Jl(/deg|rad|grad|turn|px|%/g,e)},W7=["blur","brightness","drop-shadow","contrast","grayscale","sepia","saturate","hue-rotate","invert"];function V7(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"";if(n=n.toLowerCase().trim(),n==="none")return[];for(var e=/\s*([\w-]+)\(([^)]*)\)/g,t=[],r,i=0;r=e.exec(n);){if(r.index!==i)return[];if(i=r.index+r[0].length,W7.indexOf(r[1])>-1&&t.push({name:r[1],params:r[2].split(" ").map(function(a){return G7(a)||cl(a)})}),e.lastIndex===n.length)return t}return[]}function AM(n){return n.toString()}var TM=function(e){return typeof e=="number"?vt(e):/^\s*[-+]?(\d*\.)?\d+\s*$/.test(e)?vt(Number(e)):vt(0)},vb=$t(TM);$t(function(n){return qe(n)?n.split(" ").map(vb):n.map(vb)});function ex(n,e){return[n,e,AM]}function tx(n,e){return function(t,r){return[t,r,function(i){return AM(St(i,n,e))}]}}function OM(n,e){if(n.length===e.length)return[n,e,function(t){return t}]}function mb(n){return n.parsedStyle.d.totalLength===0&&(n.parsedStyle.d.totalLength=c9(n.parsedStyle.d.absolutePath)),n.parsedStyle.d.totalLength}function U7(n){return n.parsedStyle.points.totalLength===0&&(n.parsedStyle.points.totalLength=T9(n.parsedStyle.points.points)),n.parsedStyle.points.totalLength}function H7(n){for(var e=0;e<n.length;e++){var t=n[e-1],r=n[e],i=r[0];if(i==="M"&&t){var a=t[0],s=[r[1],r[2]],o=void 0;a==="L"||a==="M"?o=[t[1],t[2]]:(a==="C"||a==="A"||a==="Q")&&(o=[t[t.length-2],t[t.length-1]]),o&&pd(s,o)&&(n.splice(e,1),e--)}}}function Y7(n){for(var e=!1,t=n.length,r=0;r<t;r++){var i=n[r],a=i[0];if(a==="C"||a==="A"||a==="Q"){e=!0;break}}return e}function X7(n){for(var e=[],t=[],r=[],i=0;i<n.length;i++){var a=n[i],s=a[0];s==="M"?(r.length&&(t.push(r),r=[]),r.push([a[1],a[2]])):s==="Z"?r.length&&(e.push(r),r=[]):r.push([a[1],a[2]])}return r.length>0&&t.push(r),{polygons:e,polylines:t}}function pd(n,e){return n[0]===e[0]&&n[1]===e[1]}function K7(n,e){for(var t=[],r=[],i=[],a=0;a<n.length;a++){var s=n[a],o=s.currentPoint,u=s.params,l=s.prePoint,c=void 0;switch(s.command){case"Q":c=O9(l[0],l[1],u[1],u[2],u[3],u[4]);break;case"C":c=k9(l[0],l[1],u[1],u[2],u[3],u[4],u[5],u[6]);break;case"A":var h=s.arcParams;c=E9(h.cx,h.cy,h.rx,h.ry,h.xRotation,h.startAngle,h.endAngle);break;default:t.push(o[0]),r.push(o[1]);break}c&&(s.box=c,t.push(c.x,c.x+c.width),r.push(c.y,c.y+c.height)),e&&(s.command==="L"||s.command==="M")&&s.prePoint&&s.nextPoint&&i.push(s)}t=t.filter(function(x){return!Number.isNaN(x)&&x!==1/0&&x!==-1/0}),r=r.filter(function(x){return!Number.isNaN(x)&&x!==1/0&&x!==-1/0});var d=od(t),f=od(r),g=sd(t),p=sd(r);if(i.length===0)return{x:d,y:f,width:g-d,height:p-f};for(var v=0;v<i.length;v++){var m=i[v],y=m.currentPoint,b=void 0;y[0]===d?(b=Mc(m,e),d-=b.xExtra):y[0]===g&&(b=Mc(m,e),g+=b.xExtra),y[1]===f?(b=Mc(m,e),f-=b.yExtra):y[1]===p&&(b=Mc(m,e),p+=b.yExtra)}return{x:d,y:f,width:g-d,height:p-f}}function Mc(n,e){var t=n.prePoint,r=n.currentPoint,i=n.nextPoint,a=Math.pow(r[0]-t[0],2)+Math.pow(r[1]-t[1],2),s=Math.pow(r[0]-i[0],2)+Math.pow(r[1]-i[1],2),o=Math.pow(t[0]-i[0],2)+Math.pow(t[1]-i[1],2),u=Math.acos((a+s-o)/(2*Math.sqrt(a)*Math.sqrt(s)));if(!u||Math.sin(u)===0||ul(u,0))return{xExtra:0,yExtra:0};var l=Math.abs(Math.atan2(i[1]-r[1],i[0]-r[0])),c=Math.abs(Math.atan2(i[0]-r[0],i[1]-r[1]));l=l>Math.PI/2?Math.PI-l:l,c=c>Math.PI/2?Math.PI-c:c;var h={xExtra:Math.cos(u/2-l)*(e/2*(1/Math.sin(u/2)))-e/2||0,yExtra:Math.cos(c-u/2)*(e/2*(1/Math.sin(u/2)))-e/2||0};return h}function DE(n,e){return[e[0]+(e[0]-n[0]),e[1]+(e[1]-n[1])]}var RE=function(e,t){var r=e.x*t.x+e.y*t.y,i=Math.sqrt((Math.pow(e.x,2)+Math.pow(e.y,2))*(Math.pow(t.x,2)+Math.pow(t.y,2))),a=e.x*t.y-e.y*t.x<0?-1:1,s=a*Math.acos(r/i);return s},LE=function(e,t,r,i,a,s,o,u){t=Math.abs(t),r=Math.abs(r),i=eM(i,360);var l=Ye(i);if(e.x===o.x&&e.y===o.y)return{x:e.x,y:e.y,ellipticalArcAngle:0};if(t===0||r===0)return{x:0,y:0,ellipticalArcAngle:0};var c=(e.x-o.x)/2,h=(e.y-o.y)/2,d={x:Math.cos(l)*c+Math.sin(l)*h,y:-Math.sin(l)*c+Math.cos(l)*h},f=Math.pow(d.x,2)/Math.pow(t,2)+Math.pow(d.y,2)/Math.pow(r,2);f>1&&(t*=Math.sqrt(f),r*=Math.sqrt(f));var g=Math.pow(t,2)*Math.pow(r,2)-Math.pow(t,2)*Math.pow(d.y,2)-Math.pow(r,2)*Math.pow(d.x,2),p=Math.pow(t,2)*Math.pow(d.y,2)+Math.pow(r,2)*Math.pow(d.x,2),v=g/p;v=v<0?0:v;var m=(a!==s?1:-1)*Math.sqrt(v),y={x:m*(t*d.y/r),y:m*(-(r*d.x)/t)},b={x:Math.cos(l)*y.x-Math.sin(l)*y.y+(e.x+o.x)/2,y:Math.sin(l)*y.x+Math.cos(l)*y.y+(e.y+o.y)/2},x={x:(d.x-y.x)/t,y:(d.y-y.y)/r},w=RE({x:1,y:0},x),E={x:(-d.x-y.x)/t,y:(-d.y-y.y)/r},_=RE(x,E);!s&&_>0?_-=2*Math.PI:s&&_<0&&(_+=2*Math.PI),_%=2*Math.PI;var S=w+_*u,C=t*Math.cos(S),k=r*Math.sin(S),A={x:Math.cos(l)*C-Math.sin(l)*k+b.x,y:Math.sin(l)*C+Math.cos(l)*k+b.y,ellipticalArcStartAngle:w,ellipticalArcEndAngle:w+_,ellipticalArcAngle:S,ellipticalArcCenter:b,resultantRx:t,resultantRy:r};return A};function Z7(n){for(var e=[],t=null,r=null,i=null,a=0,s=n.length,o=0;o<s;o++){var u=n[o];r=n[o+1];var l=u[0],c={command:l,prePoint:t,params:u,startTangent:null,endTangent:null,currentPoint:null,nextPoint:null,arcParams:null,box:null,cubicParams:null};switch(l){case"M":i=[u[1],u[2]],a=o;break;case"A":var h=J7(t,u);c.arcParams=h;break}if(l==="Z")t=i,r=n[a+1];else{var d=u.length;t=[u[d-2],u[d-1]]}r&&r[0]==="Z"&&(r=n[a],e[a]&&(e[a].prePoint=t)),c.currentPoint=t,e[a]&&pd(t,e[a].currentPoint)&&(e[a].prePoint=c.prePoint);var f=r?[r[r.length-2],r[r.length-1]]:null;c.nextPoint=f;var g=c.prePoint;if(["L","H","V"].includes(l))c.startTangent=[g[0]-t[0],g[1]-t[1]],c.endTangent=[t[0]-g[0],t[1]-g[1]];else if(l==="Q"){var p=[u[1],u[2]];c.startTangent=[g[0]-p[0],g[1]-p[1]],c.endTangent=[t[0]-p[0],t[1]-p[1]]}else if(l==="T"){var v=e[o-1],m=DE(v.currentPoint,g);v.command==="Q"?(c.command="Q",c.startTangent=[g[0]-m[0],g[1]-m[1]],c.endTangent=[t[0]-m[0],t[1]-m[1]]):(c.command="TL",c.startTangent=[g[0]-t[0],g[1]-t[1]],c.endTangent=[t[0]-g[0],t[1]-g[1]])}else if(l==="C"){var y=[u[1],u[2]],b=[u[3],u[4]];c.startTangent=[g[0]-y[0],g[1]-y[1]],c.endTangent=[t[0]-b[0],t[1]-b[1]],c.startTangent[0]===0&&c.startTangent[1]===0&&(c.startTangent=[y[0]-b[0],y[1]-b[1]]),c.endTangent[0]===0&&c.endTangent[1]===0&&(c.endTangent=[b[0]-y[0],b[1]-y[1]])}else if(l==="S"){var x=e[o-1],w=DE(x.currentPoint,g),E=[u[1],u[2]];x.command==="C"?(c.command="C",c.startTangent=[g[0]-w[0],g[1]-w[1]],c.endTangent=[t[0]-E[0],t[1]-E[1]]):(c.command="SQ",c.startTangent=[g[0]-E[0],g[1]-E[1]],c.endTangent=[t[0]-E[0],t[1]-E[1]])}else if(l==="A"){var _=IE(c,0),S=_.x,C=_.y,k=IE(c,1,!1),A=k.x,T=k.y;c.startTangent=[S,C],c.endTangent=[A,T]}e.push(c)}return e}function IE(n,e){var t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,r=n.arcParams,i=r.rx,a=i===void 0?0:i,s=r.ry,o=s===void 0?0:s,u=r.xRotation,l=r.arcFlag,c=r.sweepFlag,h=LE({x:n.prePoint[0],y:n.prePoint[1]},a,o,u,!!l,!!c,{x:n.currentPoint[0],y:n.currentPoint[1]},e),d=LE({x:n.prePoint[0],y:n.prePoint[1]},a,o,u,!!l,!!c,{x:n.currentPoint[0],y:n.currentPoint[1]},t?e+.005:e-.005),f=d.x-h.x,g=d.y-h.y,p=Math.sqrt(f*f+g*g);return{x:-f/p,y:-g/p}}function Pc(n){return Math.sqrt(n[0]*n[0]+n[1]*n[1])}function yb(n,e){return Pc(n)*Pc(e)?(n[0]*e[0]+n[1]*e[1])/(Pc(n)*Pc(e)):1}function FE(n,e){return(n[0]*e[1]<n[1]*e[0]?-1:1)*Math.acos(yb(n,e))}function J7(n,e){var t=e[1],r=e[2],i=eM(Ye(e[3]),Math.PI*2),a=e[4],s=e[5],o=n[0],u=n[1],l=e[6],c=e[7],h=Math.cos(i)*(o-l)/2+Math.sin(i)*(u-c)/2,d=-1*Math.sin(i)*(o-l)/2+Math.cos(i)*(u-c)/2,f=h*h/(t*t)+d*d/(r*r);f>1&&(t*=Math.sqrt(f),r*=Math.sqrt(f));var g=t*t*(d*d)+r*r*(h*h),p=g?Math.sqrt((t*t*(r*r)-g)/g):1;a===s&&(p*=-1),isNaN(p)&&(p=0);var v=r?p*t*d/r:0,m=t?p*-r*h/t:0,y=(o+l)/2+Math.cos(i)*v-Math.sin(i)*m,b=(u+c)/2+Math.sin(i)*v+Math.cos(i)*m,x=[(h-v)/t,(d-m)/r],w=[(-1*h-v)/t,(-1*d-m)/r],E=FE([1,0],x),_=FE(x,w);return yb(x,w)<=-1&&(_=Math.PI),yb(x,w)>=1&&(_=0),s===0&&_>0&&(_-=2*Math.PI),s===1&&_<0&&(_+=2*Math.PI),{cx:y,cy:b,rx:pd(n,[l,c])?0:t,ry:pd(n,[l,c])?0:r,startAngle:E,endAngle:E+_,xRotation:i,arcFlag:a,sweepFlag:s}}var MM=function(e){if(e===""||Array.isArray(e)&&e.length===0)return{absolutePath:[],hasArc:!1,segments:[],polygons:[],polylines:[],curve:null,totalLength:0,rect:{x:0,y:0,width:0,height:0}};var t;try{t=ld(e)}catch{t=ld(""),console.error("[g]: Invalid SVG Path definition: ".concat(e))}H7(t);var r=Y7(t),i=X7(t),a=i.polygons,s=i.polylines,o=Z7(t),u=K7(o,0),l=u.x,c=u.y,h=u.width,d=u.height;return{absolutePath:t,hasArc:r,segments:o,polygons:a,polylines:s,totalLength:0,rect:{x:Number.isFinite(l)?l:0,y:Number.isFinite(c)?c:0,width:Number.isFinite(h)?h:0,height:Number.isFinite(d)?d:0}}},Q7=$t(MM);function PM(n){return qe(n)?Q7(n):MM(n)}function eF(n,e,t){var r=n.curve,i=e.curve;(!r||r.length===0)&&(r=sb(n.absolutePath,!1),n.curve=r),(!i||i.length===0)&&(i=sb(e.absolutePath,!1),e.curve=i);var a=[r,i];r.length!==i.length&&(a=cM(r,i));var s=hE(a[0])!==hE(a[1])?i9(a[0]):r9(a[0]);return[s,d9(a[1],s),function(o){return o}]}function tF(n,e){var t;return qe(n)?t=n.split(" ").map(function(r){var i=r.split(","),a=Ee(i,2),s=a[0],o=a[1];return[Number(s),Number(o)]}):t=n,{points:t,totalLength:0,segments:[]}}function nF(n,e){return[n.points,e.points,function(t){return t}]}var Et=null,qo=/\s*(\w+)\(([^)]*)\)/g;function Wn(n){return function(e){var t=0;return n.map(function(r){return r===Et?e[t++]:r})}}function bs(n){return n}var Sl={matrix:["NNNNNN",[Et,Et,0,0,Et,Et,0,0,0,0,1,0,Et,Et,0,1],bs],matrix3d:["NNNNNNNNNNNNNNNN",bs],rotate:["A"],rotateX:["A"],rotateY:["A"],rotateZ:["A"],rotate3d:["NNNA"],perspective:["L"],scale:["Nn",Wn([Et,Et,new rn(1)]),bs],scaleX:["N",Wn([Et,new rn(1),new rn(1)]),Wn([Et,new rn(1)])],scaleY:["N",Wn([new rn(1),Et,new rn(1)]),Wn([new rn(1),Et])],scaleZ:["N",Wn([new rn(1),new rn(1),Et])],scale3d:["NNN",bs],skew:["Aa",null,bs],skewX:["A",null,Wn([Et,Ys])],skewY:["A",null,Wn([Ys,Et])],translate:["Tt",Wn([Et,Et,Wr]),bs],translateX:["T",Wn([Et,Wr,Wr]),Wn([Et,Wr])],translateY:["T",Wn([Wr,Et,Wr]),Wn([Wr,Et])],translateZ:["L",Wn([Wr,Wr,Et])],translate3d:["TTL",bs]};function NM(n){for(var e=[],t=n.length,r=0;r<t;r++){var i=n[r],a=i[0],s=i.slice(1);a==="translate"||a==="skew"?s.length===1&&s.push(0):a==="scale"&&s.length===1&&s.push(s[0]);var o=Sl[a];if(!o)return[];var u=s.map(function(l){return vt(l)});e.push({t:a,d:u})}return e}function DM(n){if(Array.isArray(n))return NM(n);if(n=(n||"none").trim(),n==="none")return[];var e=[],t,r=0;for(qo.lastIndex=0;t=qo.exec(n);){if(t.index!==r)return[];r=t.index+t[0].length;var i=t[1],a=Sl[i];if(!a)return[];var s=t[2].split(","),o=a[0];if(o.length<s.length)return[];for(var u=[],l=0;l<o.length;l++){var c=s[l],h=o[l],d=void 0;if(c?d={A:function(g){return g.trim()==="0"?Ys:j7(g)},N:vb,T:pb,L:z7}[h.toUpperCase()](c):d={a:Ys,n:u[0],t:Wr}[h],d===void 0)return[];u.push(d)}if(e.push({t:i,d:u}),qo.lastIndex===n.length)return e}return[]}function rF(n){if(Array.isArray(n))return NM(n);if(n=(n||"none").trim(),n==="none")return[];var e=[],t,r=0;for(qo.lastIndex=0;t=qo.exec(n);){if(t.index!==r)return[];r=t.index+t[0].length;var i=t[1],a=Sl[i];if(!a)return[];var s=t[2].split(","),o=a[0];if(o.length<s.length)return[];for(var u=[],l=0;l<o.length;l++){var c=s[l],h=o[l],d=void 0;if(c?d={A:function(g){return g.trim()==="0"?Ys:CM(g)},N:TM,T:kM,L:SM}[h.toUpperCase()](c):d={a:Ys,n:u[0],t:Wr}[h],d===void 0)return[];u.push(d)}if(e.push({t:i,d:u}),qo.lastIndex===n.length)return e}return[]}function iF(n){var e,t,r,i;switch(n.t){case"rotateX":return i=Ye(Xn(n.d[0])),[1,0,0,0,0,Math.cos(i),Math.sin(i),0,0,-Math.sin(i),Math.cos(i),0,0,0,0,1];case"rotateY":return i=Ye(Xn(n.d[0])),[Math.cos(i),0,-Math.sin(i),0,0,1,0,0,Math.sin(i),0,Math.cos(i),0,0,0,0,1];case"rotate":case"rotateZ":return i=Ye(Xn(n.d[0])),[Math.cos(i),Math.sin(i),0,0,-Math.sin(i),Math.cos(i),0,0,0,0,1,0,0,0,0,1];case"rotate3d":e=n.d[0].value,t=n.d[1].value,r=n.d[2].value,i=Ye(Xn(n.d[3]));var a=e*e+t*t+r*r;if(a===0)e=1,t=0,r=0;else if(a!==1){var s=Math.sqrt(a);e/=s,t/=s,r/=s}var o=Math.sin(i/2),u=o*Math.cos(i/2),l=o*o;return[1-2*(t*t+r*r)*l,2*(e*t*l+r*u),2*(e*r*l-t*u),0,2*(e*t*l-r*u),1-2*(e*e+r*r)*l,2*(t*r*l+e*u),0,2*(e*r*l+t*u),2*(t*r*l-e*u),1-2*(e*e+t*t)*l,0,0,0,0,1];case"scale":return[n.d[0].value,0,0,0,0,n.d[1].value,0,0,0,0,1,0,0,0,0,1];case"scaleX":return[n.d[0].value,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];case"scaleY":return[1,0,0,0,0,n.d[0].value,0,0,0,0,1,0,0,0,0,1];case"scaleZ":return[1,0,0,0,0,1,0,0,0,0,n.d[0].value,0,0,0,0,1];case"scale3d":return[n.d[0].value,0,0,0,0,n.d[1].value,0,0,0,0,n.d[2].value,0,0,0,0,1];case"skew":var c=Ye(Xn(n.d[0])),h=Ye(Xn(n.d[1]));return[1,Math.tan(h),0,0,Math.tan(c),1,0,0,0,0,1,0,0,0,0,1];case"skewX":return i=Ye(Xn(n.d[0])),[1,0,0,0,Math.tan(i),1,0,0,0,0,1,0,0,0,0,1];case"skewY":return i=Ye(Xn(n.d[0])),[1,Math.tan(i),0,0,0,1,0,0,0,0,1,0,0,0,0,1];case"translate":return e=ur(n.d[0],0,null)||0,t=ur(n.d[1],0,null)||0,[1,0,0,0,0,1,0,0,0,0,1,0,e,t,0,1];case"translateX":return e=ur(n.d[0],0,null)||0,[1,0,0,0,0,1,0,0,0,0,1,0,e,0,0,1];case"translateY":return t=ur(n.d[0],0,null)||0,[1,0,0,0,0,1,0,0,0,0,1,0,0,t,0,1];case"translateZ":return r=ur(n.d[0],0,null)||0,[1,0,0,0,0,1,0,0,0,0,1,0,0,0,r,1];case"translate3d":return e=ur(n.d[0],0,null)||0,t=ur(n.d[1],0,null)||0,r=ur(n.d[2],0,null)||0,[1,0,0,0,0,1,0,0,0,0,1,0,e,t,r,1];case"perspective":var d=ur(n.d[0],0,null)||0,f=d?-1/d:0;return[1,0,0,0,0,1,0,0,0,0,1,f,0,0,0,1];case"matrix":return[n.d[0].value,n.d[1].value,0,0,n.d[2].value,n.d[3].value,0,0,0,0,1,0,n.d[4].value,n.d[5].value,0,1];case"matrix3d":return n.d.map(function(g){return g.value})}}function aF(n,e){return[n[0]*e[0]+n[4]*e[1]+n[8]*e[2]+n[12]*e[3],n[1]*e[0]+n[5]*e[1]+n[9]*e[2]+n[13]*e[3],n[2]*e[0]+n[6]*e[1]+n[10]*e[2]+n[14]*e[3],n[3]*e[0]+n[7]*e[1]+n[11]*e[2]+n[15]*e[3],n[0]*e[4]+n[4]*e[5]+n[8]*e[6]+n[12]*e[7],n[1]*e[4]+n[5]*e[5]+n[9]*e[6]+n[13]*e[7],n[2]*e[4]+n[6]*e[5]+n[10]*e[6]+n[14]*e[7],n[3]*e[4]+n[7]*e[5]+n[11]*e[6]+n[15]*e[7],n[0]*e[8]+n[4]*e[9]+n[8]*e[10]+n[12]*e[11],n[1]*e[8]+n[5]*e[9]+n[9]*e[10]+n[13]*e[11],n[2]*e[8]+n[6]*e[9]+n[10]*e[10]+n[14]*e[11],n[3]*e[8]+n[7]*e[9]+n[11]*e[10]+n[15]*e[11],n[0]*e[12]+n[4]*e[13]+n[8]*e[14]+n[12]*e[15],n[1]*e[12]+n[5]*e[13]+n[9]*e[14]+n[13]*e[15],n[2]*e[12]+n[6]*e[13]+n[10]*e[14]+n[14]*e[15],n[3]*e[12]+n[7]*e[13]+n[11]*e[14]+n[15]*e[15]]}function sF(n){return n.length===0?[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]:n.map(iF).reduce(aF)}function BE(n){var e=[0,0,0],t=[1,1,1],r=[0,0,0],i=[0,0,0,1],a=[0,0,0,1];return Y9(sF(n),e,t,r,i,a),[[e,t,r,a,i]]}var oF=function(){function n(r,i){for(var a=[[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0]],s=0;s<4;s++)for(var o=0;o<4;o++)for(var u=0;u<4;u++)a[s][o]+=i[s][u]*r[u][o];return a}function e(r){return r[0][2]===0&&r[0][3]===0&&r[1][2]===0&&r[1][3]===0&&r[2][0]===0&&r[2][1]===0&&r[2][2]===1&&r[2][3]===0&&r[3][2]===0&&r[3][3]===1}function t(r,i,a,s,o){for(var u=[[1,0,0,0],[0,1,0,0],[0,0,1,0],[0,0,0,1]],l=0;l<4;l++)u[l][3]=o[l];for(var c=0;c<3;c++)for(var h=0;h<3;h++)u[3][c]+=r[h]*u[h][c];var d=s[0],f=s[1],g=s[2],p=s[3],v=[[1,0,0,0],[0,1,0,0],[0,0,1,0],[0,0,0,1]];v[0][0]=1-2*(f*f+g*g),v[0][1]=2*(d*f-g*p),v[0][2]=2*(d*g+f*p),v[1][0]=2*(d*f+g*p),v[1][1]=1-2*(d*d+g*g),v[1][2]=2*(f*g-d*p),v[2][0]=2*(d*g-f*p),v[2][1]=2*(f*g+d*p),v[2][2]=1-2*(d*d+f*f),u=n(u,v);var m=[[1,0,0,0],[0,1,0,0],[0,0,1,0],[0,0,0,1]];a[2]&&(m[2][1]=a[2],u=n(u,m)),a[1]&&(m[2][1]=0,m[2][0]=a[0],u=n(u,m)),a[0]&&(m[2][0]=0,m[1][0]=a[0],u=n(u,m));for(var y=0;y<3;y++)for(var b=0;b<3;b++)u[y][b]*=i[y];return e(u)?[u[0][0],u[0][1],u[1][0],u[1][1],u[3][0],u[3][1]]:u[0].concat(u[1],u[2],u[3])}return t}();function uF(n){return n.toFixed(6).replace(".000000","")}function tg(n,e){var t,r;return n.decompositionPair!==e&&(n.decompositionPair=e,t=BE(n)),e.decompositionPair!==n&&(e.decompositionPair=n,r=BE(e)),t[0]===null||r[0]===null?[[!1],[!0],function(i){return i?e[0].d:n[0].d}]:(t[0].push(0),r[0].push(1),[t,r,function(i){var a=cF(t[0][3],r[0][3],i[5]),s=oF(i[0],i[1],i[2],a,i[4]),o=s.map(uF).join(",");return o}])}function lF(n,e){for(var t=0,r=0;r<n.length;r++)t+=n[r]*e[r];return t}function cF(n,e,t){var r=lF(n,e);r=St(r,-1,1);var i=[];if(r===1)i=n;else for(var a=Math.acos(r),s=Math.sin(t*a)*1/Math.sqrt(1-r*r),o=0;o<4;o++)i.push(n[o]*(Math.cos(t*a)-r*s)+e[o]*s);return i}function ng(n){return n.replace(/[XY]/,"")}function rg(n){return n.replace(/(X|Y|Z|3d)?$/,"3d")}var hF=function(e,t){return e==="perspective"&&t==="perspective"||(e==="matrix"||e==="matrix3d")&&(t==="matrix"||t==="matrix3d")};function dF(n,e,t){var r=!1;if(!n.length||!e.length){n.length||(r=!0,n=e,e=[]);for(var i=function(){var A=n[a],T=A.t,O=A.d,P=T.substring(0,5)==="scale"?1:0;e.push({t:T,d:O.map(function(R){return typeof R=="number"?vt(P):vt(P,R.unit)})})},a=0;a<n.length;a++)i()}var s=[],o=[],u=[];if(n.length!==e.length){var l=tg(n,e);s=[l[0]],o=[l[1]],u=[["matrix",[l[2]]]]}else for(var c=0;c<n.length;c++){var h=n[c].t,d=e[c].t,f=n[c].d,g=e[c].d,p=Sl[h],v=Sl[d],m=void 0;if(hF(h,d)){var y=tg([n[c]],[e[c]]);s.push(y[0]),o.push(y[1]),u.push(["matrix",[y[2]]]);continue}else if(h===d)m=h;else if(p[2]&&v[2]&&ng(h)===ng(d))m=ng(h),f=p[2](f),g=v[2](g);else if(p[1]&&v[1]&&rg(h)===rg(d))m=rg(h),f=p[1](f),g=v[1](g);else{var b=tg(n,e);s=[b[0]],o=[b[1]],u=[["matrix",[b[2]]]];break}for(var x=[],w=[],E=[],_=0;_<f.length;_++){var S=q7(f[_],g[_],t,!1,_);x[_]=S[0],w[_]=S[1],E.push(S[2])}s.push(x),o.push(w),u.push([m,E])}if(r){var C=s;s=o,o=C}return[s,o,function(k){return k.map(function(A,T){var O=A.map(function(P,R){return u[T][1][R](P)}).join(",");return u[T][0]==="matrix"&&O.split(",").length===16&&(u[T][0]="matrix3d"),u[T][0]==="matrix3d"&&O.split(",").length===6&&(u[T][0]="matrix"),"".concat(u[T][0],"(").concat(O,")")}).join(" ")}]}var fF=$t(function(n){if(qe(n)){if(n==="text-anchor")return[vt(0,"px"),vt(0,"px")];var e=n.split(" ");return e.length===1&&(e[0]==="top"||e[0]==="bottom"?(e[1]=e[0],e[0]="center"):e[1]="center"),e.length!==2?null:[pb(zE(e[0])),pb(zE(e[1]))]}return[vt(n[0]||0,"px"),vt(n[1]||0,"px")]});function zE(n){return n==="center"?"50%":n==="left"||n==="top"?"0%":n==="right"||n==="bottom"?"100%":n}var nx=[{n:"display",k:["none"]},{n:"opacity",int:!0,inh:!0,d:"1",syntax:J.OPACITY_VALUE},{n:"fillOpacity",int:!0,inh:!0,d:"1",syntax:J.OPACITY_VALUE},{n:"strokeOpacity",int:!0,inh:!0,d:"1",syntax:J.OPACITY_VALUE},{n:"fill",int:!0,k:["none"],d:"none",syntax:J.PAINT},{n:"fillRule",k:["nonzero","evenodd"],d:"nonzero"},{n:"stroke",int:!0,k:["none"],d:"none",syntax:J.PAINT,l:!0},{n:"shadowType",k:["inner","outer","both"],d:"outer",l:!0},{n:"shadowColor",int:!0,syntax:J.COLOR},{n:"shadowOffsetX",int:!0,l:!0,d:"0",syntax:J.LENGTH_PERCENTAGE},{n:"shadowOffsetY",int:!0,l:!0,d:"0",syntax:J.LENGTH_PERCENTAGE},{n:"shadowBlur",int:!0,l:!0,d:"0",syntax:J.SHADOW_BLUR},{n:"lineWidth",int:!0,inh:!0,d:"1",l:!0,a:["strokeWidth"],syntax:J.LENGTH_PERCENTAGE},{n:"increasedLineWidthForHitTesting",inh:!0,d:"0",l:!0,syntax:J.LENGTH_PERCENTAGE},{n:"lineJoin",inh:!0,l:!0,a:["strokeLinejoin"],k:["miter","bevel","round"],d:"miter"},{n:"lineCap",inh:!0,l:!0,a:["strokeLinecap"],k:["butt","round","square"],d:"butt"},{n:"lineDash",int:!0,inh:!0,k:["none"],a:["strokeDasharray"],syntax:J.LENGTH_PERCENTAGE_12},{n:"lineDashOffset",int:!0,inh:!0,d:"0",a:["strokeDashoffset"],syntax:J.LENGTH_PERCENTAGE},{n:"offsetPath",syntax:J.DEFINED_PATH},{n:"offsetDistance",int:!0,syntax:J.OFFSET_DISTANCE},{n:"dx",int:!0,l:!0,d:"0",syntax:J.LENGTH_PERCENTAGE},{n:"dy",int:!0,l:!0,d:"0",syntax:J.LENGTH_PERCENTAGE},{n:"zIndex",ind:!0,int:!0,d:"0",k:["auto"],syntax:J.Z_INDEX},{n:"visibility",k:["visible","hidden"],ind:!0,inh:!0,int:!0,d:"visible"},{n:"pointerEvents",inh:!0,k:["none","auto","stroke","fill","painted","visible","visiblestroke","visiblefill","visiblepainted","all"],d:"auto"},{n:"filter",ind:!0,l:!0,k:["none"],d:"none",syntax:J.FILTER},{n:"clipPath",syntax:J.DEFINED_PATH},{n:"textPath",syntax:J.DEFINED_PATH},{n:"textPathSide",k:["left","right"],d:"left"},{n:"textPathStartOffset",l:!0,d:"0",syntax:J.LENGTH_PERCENTAGE},{n:"transform",p:100,int:!0,k:["none"],d:"none",syntax:J.TRANSFORM},{n:"transformOrigin",p:100,d:"0 0",l:!0,syntax:J.TRANSFORM_ORIGIN},{n:"cx",int:!0,l:!0,d:"0",syntax:J.COORDINATE},{n:"cy",int:!0,l:!0,d:"0",syntax:J.COORDINATE},{n:"cz",int:!0,l:!0,d:"0",syntax:J.COORDINATE},{n:"r",int:!0,l:!0,d:"0",syntax:J.LENGTH_PERCENTAGE},{n:"rx",int:!0,l:!0,d:"0",syntax:J.LENGTH_PERCENTAGE},{n:"ry",int:!0,l:!0,d:"0",syntax:J.LENGTH_PERCENTAGE},{n:"x",int:!0,l:!0,d:"0",syntax:J.COORDINATE},{n:"y",int:!0,l:!0,d:"0",syntax:J.COORDINATE},{n:"z",int:!0,l:!0,d:"0",syntax:J.COORDINATE},{n:"width",int:!0,l:!0,k:["auto","fit-content","min-content","max-content"],d:"0",syntax:J.LENGTH_PERCENTAGE},{n:"height",int:!0,l:!0,k:["auto","fit-content","min-content","max-content"],d:"0",syntax:J.LENGTH_PERCENTAGE},{n:"radius",int:!0,l:!0,d:"0",syntax:J.LENGTH_PERCENTAGE_14},{n:"x1",int:!0,l:!0,syntax:J.COORDINATE},{n:"y1",int:!0,l:!0,syntax:J.COORDINATE},{n:"z1",int:!0,l:!0,syntax:J.COORDINATE},{n:"x2",int:!0,l:!0,syntax:J.COORDINATE},{n:"y2",int:!0,l:!0,syntax:J.COORDINATE},{n:"z2",int:!0,l:!0,syntax:J.COORDINATE},{n:"d",int:!0,l:!0,d:"",syntax:J.PATH,p:50},{n:"points",int:!0,l:!0,syntax:J.LIST_OF_POINTS,p:50},{n:"text",l:!0,d:"",syntax:J.TEXT,p:50},{n:"textTransform",l:!0,inh:!0,k:["capitalize","uppercase","lowercase","none"],d:"none",syntax:J.TEXT_TRANSFORM,p:51},{n:"font",l:!0},{n:"fontSize",int:!0,inh:!0,d:"16px",l:!0,syntax:J.LENGTH_PERCENTAGE},{n:"fontFamily",l:!0,inh:!0,d:"sans-serif"},{n:"fontStyle",l:!0,inh:!0,k:["normal","italic","oblique"],d:"normal"},{n:"fontWeight",l:!0,inh:!0,k:["normal","bold","bolder","lighter"],d:"normal"},{n:"fontVariant",l:!0,inh:!0,k:["normal","small-caps"],d:"normal"},{n:"lineHeight",l:!0,syntax:J.LENGTH,int:!0,d:"0"},{n:"letterSpacing",l:!0,syntax:J.LENGTH,int:!0,d:"0"},{n:"miterLimit",l:!0,syntax:J.NUMBER,d:function(e){return e===q.PATH||e===q.POLYGON||e===q.POLYLINE?"4":"10"}},{n:"wordWrap",l:!0},{n:"wordWrapWidth",l:!0},{n:"maxLines",l:!0},{n:"textOverflow",l:!0,d:"clip"},{n:"leading",l:!0},{n:"textBaseline",l:!0,inh:!0,k:["top","hanging","middle","alphabetic","ideographic","bottom"],d:"alphabetic"},{n:"textAlign",l:!0,inh:!0,k:["start","center","middle","end","left","right"],d:"start"},{n:"markerStart",syntax:J.MARKER},{n:"markerEnd",syntax:J.MARKER},{n:"markerMid",syntax:J.MARKER},{n:"markerStartOffset",syntax:J.LENGTH,l:!0,int:!0,d:"0"},{n:"markerEndOffset",syntax:J.LENGTH,l:!0,int:!0,d:"0"}],gF=new Set(nx.filter(function(n){return!!n.l}).map(function(n){return n.n})),RM={},pF=function(){function n(e){var t=this;U(this,n),this.runtime=e,nx.forEach(function(r){t.registerMetadata(r)})}return H(n,[{key:"registerMetadata",value:function(t){[t.n].concat(at(t.a||[])).forEach(function(r){RM[r]=t})}},{key:"getPropertySyntax",value:function(t){return this.runtime.CSSPropertySyntaxFactory[t]}},{key:"processProperties",value:function(t,r){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{skipUpdateAttribute:!1,skipParse:!1,forceUpdateGeometry:!1,usedAttributes:[],memoize:!0};Object.assign(t.attributes,r);var a=t.parsedStyle.clipPath,s=t.parsedStyle.offsetPath;vF(t,r);var o=!!i.forceUpdateGeometry;if(!o){for(var u in r)if(gF.has(u)){o=!0;break}}var l=LM(t);l.has("fill")&&r.fill&&(t.parsedStyle.fill=cl(r.fill)),l.has("stroke")&&r.stroke&&(t.parsedStyle.stroke=cl(r.stroke)),l.has("shadowColor")&&r.shadowColor&&(t.parsedStyle.shadowColor=cl(r.shadowColor)),l.has("filter")&&r.filter&&(t.parsedStyle.filter=V7(r.filter)),l.has("radius")&&!de(r.radius)&&(t.parsedStyle.radius=NE(r.radius,4)),l.has("lineDash")&&!de(r.lineDash)&&(t.parsedStyle.lineDash=NE(r.lineDash,"even")),l.has("points")&&r.points&&(t.parsedStyle.points=tF(r.points)),l.has("d")&&r.d===""&&(t.parsedStyle.d=Ce({},yM)),l.has("d")&&r.d&&(t.parsedStyle.d=PM(r.d)),l.has("textTransform")&&r.textTransform&&this.runtime.CSSPropertySyntaxFactory[J.TEXT_TRANSFORM].calculator(null,null,{value:r.textTransform},t,null),l.has("clipPath")&&!me(r.clipPath)&&this.runtime.CSSPropertySyntaxFactory[J.DEFINED_PATH].calculator("clipPath",a,r.clipPath,t,this.runtime),l.has("offsetPath")&&r.offsetPath&&this.runtime.CSSPropertySyntaxFactory[J.DEFINED_PATH].calculator("offsetPath",s,r.offsetPath,t,this.runtime),l.has("transform")&&r.transform&&(t.parsedStyle.transform=DM(r.transform)),l.has("transformOrigin")&&r.transformOrigin&&(t.parsedStyle.transformOrigin=fF(r.transformOrigin)),l.has("markerStart")&&r.markerStart&&(t.parsedStyle.markerStart=this.runtime.CSSPropertySyntaxFactory[J.MARKER].calculator(null,r.markerStart,r.markerStart,null,null)),l.has("markerEnd")&&r.markerEnd&&(t.parsedStyle.markerEnd=this.runtime.CSSPropertySyntaxFactory[J.MARKER].calculator(null,r.markerEnd,r.markerEnd,null,null)),l.has("markerMid")&&r.markerMid&&(t.parsedStyle.markerMid=this.runtime.CSSPropertySyntaxFactory[J.MARKER].calculator("",r.markerMid,r.markerMid,null,null)),l.has("zIndex")&&!de(r.zIndex)&&this.runtime.CSSPropertySyntaxFactory[J.Z_INDEX].postProcessor(t),l.has("offsetDistance")&&!de(r.offsetDistance)&&this.runtime.CSSPropertySyntaxFactory[J.OFFSET_DISTANCE].postProcessor(t),l.has("transform")&&r.transform&&this.runtime.CSSPropertySyntaxFactory[J.TRANSFORM].postProcessor(t),l.has("transformOrigin")&&r.transformOrigin&&this.runtime.CSSPropertySyntaxFactory[J.TRANSFORM_ORIGIN].postProcessor(t),o&&(t.geometry.dirty=!0,t.renderable.boundsDirty=!0,t.renderable.renderBoundsDirty=!0,i.forceUpdateGeometry||this.runtime.sceneGraphService.dirtifyToRoot(t))}},{key:"updateGeometry",value:function(t){var r=t.nodeName,i=this.runtime.geometryUpdaterFactory[r];if(i){var a=t.geometry;a.contentBounds||(a.contentBounds=new rt),a.renderBounds||(a.renderBounds=new rt);var s=t.parsedStyle,o=i.update(s,t),u=o.cx,l=u===void 0?0:u,c=o.cy,h=c===void 0?0:c,d=o.cz,f=d===void 0?0:d,g=o.hwidth,p=g===void 0?0:g,v=o.hheight,m=v===void 0?0:v,y=o.hdepth,b=y===void 0?0:y,x=[Math.abs(p),Math.abs(m),b],w=s.stroke,E=s.lineWidth,_=E===void 0?1:E,S=s.increasedLineWidthForHitTesting,C=S===void 0?0:S,k=s.shadowType,A=k===void 0?"outer":k,T=s.shadowColor,O=s.filter,P=O===void 0?[]:O,R=s.transformOrigin,N=[l,h,f];a.contentBounds.update(N,x);var D=r===q.POLYLINE||r===q.POLYGON||r===q.PATH?Math.SQRT2:.5,M=w&&!w.isNone;if(M){var F=((_||0)+(C||0))*D;x[0]+=F,x[1]+=F}if(a.renderBounds.update(N,x),T&&A&&A!=="inner"){var j=a.renderBounds,B=j.min,$=j.max,W=s.shadowBlur,Y=s.shadowOffsetX,K=s.shadowOffsetY,ee=W||0,ie=Y||0,_e=K||0,Ae=B[0]-ee+ie,Be=$[0]+ee+ie,Fe=B[1]-ee+_e,Ze=$[1]+ee+_e;B[0]=Math.min(B[0],Ae),$[0]=Math.max($[0],Be),B[1]=Math.min(B[1],Fe),$[1]=Math.max($[1],Ze),a.renderBounds.setMinMax(B,$)}P.forEach(function(ze){var Pn=ze.name,En=ze.params;if(Pn==="blur"){var $i=En[0].value;a.renderBounds.update(a.renderBounds.center,Ja(a.renderBounds.halfExtents,a.renderBounds.halfExtents,[$i,$i,0]))}else if(Pn==="drop-shadow"){var ji=En[0].value,Gn=En[1].value,mt=En[2].value,jr=a.renderBounds,Jt=jr.min,tr=jr.max,qr=Jt[0]-mt+ji,cn=tr[0]+mt+ji,go=Jt[1]-mt+Gn,qi=tr[1]+mt+Gn;Jt[0]=Math.min(Jt[0],qr),tr[0]=Math.max(tr[0],cn),Jt[1]=Math.min(Jt[1],go),tr[1]=Math.max(tr[1],qi),a.renderBounds.setMinMax(Jt,tr)}}),t.geometry.dirty=!1;var Kt=p<0,$r=m<0,Re=(Kt?-1:1)*(R?ur(R[0],0,t,!0):0),Zt=($r?-1:1)*(R?ur(R[1],1,t,!0):0);(Re||Zt)&&t.setOrigin(Re,Zt)}}},{key:"updateSizeAttenuation",value:function(t,r){t.style.isSizeAttenuation?(t.style.rawLineWidth||(t.style.rawLineWidth=t.style.lineWidth),t.style.lineWidth=(t.style.rawLineWidth||1)/r,t.nodeName===q.CIRCLE&&(t.style.rawR||(t.style.rawR=t.style.r),t.style.r=(t.style.rawR||1)/r)):(t.style.rawLineWidth&&(t.style.lineWidth=t.style.rawLineWidth,delete t.style.rawLineWidth),t.nodeName===q.CIRCLE&&t.style.rawR&&(t.style.r=t.style.rawR,delete t.style.rawR))}}])}();function vF(n,e){var t=LM(n);for(var r in e)t.has(r)&&(n.parsedStyle[r]=e[r])}function LM(n){return n.constructor.PARSED_STYLE_LIST}var mF=function(){function n(){U(this,n),this.mixer=ex}return H(n,[{key:"calculator",value:function(t,r,i,a){return Xn(i)}}])}(),yF=function(){function n(){U(this,n)}return H(n,[{key:"calculator",value:function(t,r,i,a,s){return i instanceof Fr&&(i=null),s.sceneGraphService.updateDisplayObjectDependency(t,r,i,a),t==="clipPath"&&a.forEach(function(o){o.childNodes.length===0&&s.sceneGraphService.dirtifyToRoot(o)}),i}}])}(),bF=function(){function n(){U(this,n),this.parser=cl,this.mixer=B7}return H(n,[{key:"calculator",value:function(t,r,i,a){return i instanceof Fr?i.value==="none"?wM:EM:i}}])}(),xF=function(){function n(){U(this,n)}return H(n,[{key:"calculator",value:function(t,r,i){return i instanceof Fr?[]:i}}])}();function $E(n){var e=n.parsedStyle,t=e.fontSize;return de(t)?null:t}var bb=function(){function n(){U(this,n),this.mixer=ex}return H(n,[{key:"calculator",value:function(t,r,i,a,s){if(re(i))return i;if(rn.isRelativeUnit(i.unit)){if(i.unit===Q.kPercentage)return 0;if(i.unit===Q.kEms){if(a.parentNode){var o=$E(a.parentNode);if(o)return o*=i.value,o}return 0}if(i.unit===Q.kRems){var u;if(a!=null&&(u=a.ownerDocument)!==null&&u!==void 0&&u.documentElement){var l=$E(a.ownerDocument.documentElement);if(l)return l*=i.value,l}return 0}}else return i.value}}])}(),wF=function(){function n(){U(this,n),this.mixer=OM}return H(n,[{key:"calculator",value:function(t,r,i){return i.map(function(a){return a.value})}}])}(),EF=function(){function n(){U(this,n),this.mixer=OM}return H(n,[{key:"calculator",value:function(t,r,i){return i.map(function(a){return a.value})}}])}(),_F=function(){function n(){U(this,n)}return H(n,[{key:"calculator",value:function(t,r,i,a){var s;i instanceof Fr&&(i=null);var o=(s=i)===null||s===void 0?void 0:s.cloneNode(!0);return o&&(o.style.isMarker=!0),o}}])}(),SF=function(){function n(){U(this,n),this.mixer=ex}return H(n,[{key:"calculator",value:function(t,r,i){return i.value}}])}(),kF=function(){function n(){U(this,n),this.mixer=tx(0,1)}return H(n,[{key:"calculator",value:function(t,r,i){return i.value}},{key:"postProcessor",value:function(t){var r=t.parsedStyle,i=r.offsetPath,a=r.offsetDistance;if(i){var s=i.nodeName;if(s===q.LINE||s===q.PATH||s===q.POLYLINE){var o=i.getPoint(a);o&&t.setLocalPosition(o.x,o.y)}}}}])}(),CF=function(){function n(){U(this,n),this.mixer=tx(0,1)}return H(n,[{key:"calculator",value:function(t,r,i){return i.value}}])}(),AF=function(){function n(){U(this,n),this.parser=PM,this.mixer=eF}return H(n,[{key:"calculator",value:function(t,r,i){return i instanceof Fr&&i.value==="unset"?{absolutePath:[],hasArc:!1,segments:[],polygons:[],polylines:[],curve:null,totalLength:0,rect:new ru(0,0,0,0)}:i}}])}(),TF=H(function n(){U(this,n),this.mixer=nF}),OF=function(n){function e(){var t;U(this,e);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return t=Te(this,e,[].concat(i)),t.mixer=tx(0,1/0),t}return Oe(e,n),H(e)}(bb),MF=function(){function n(){U(this,n)}return H(n,[{key:"calculator",value:function(t,r,i,a){return i instanceof Fr?i.value==="unset"?"":i.value:"".concat(i)}},{key:"postProcessor",value:function(t){t.nodeValue="".concat(t.parsedStyle.text)||""}}])}(),PF=function(){function n(){U(this,n)}return H(n,[{key:"calculator",value:function(t,r,i,a){var s=a.getAttribute("text");if(s){var o=s;i.value==="capitalize"?o=s.charAt(0).toUpperCase()+s.slice(1):i.value==="lowercase"?o=s.toLowerCase():i.value==="uppercase"&&(o=s.toUpperCase()),a.parsedStyle.text=o}return i.value}}])}(),ig=new WeakMap;function NF(n,e,t){if(n){var r=typeof n=="string"?document.getElementById(n):n;ig.has(r)&&ig.get(r).destroy(t),ig.set(r,e)}}var rx=typeof window<"u"&&typeof window.document<"u";function DF(n){return!!n.getAttribute}function RF(n,e){for(var t=0,r=n.length;t<r;){var i=t+r>>>1;IM(n[i],e)<0?t=i+1:r=i}return t}function IM(n,e){var t=Number(n.parsedStyle.zIndex||0),r=Number(e.parsedStyle.zIndex||0);if(t===r){var i=n.parentNode;if(i){var a=i.childNodes||[];return a.indexOf(n)-a.indexOf(e)}}return t-r}function FM(n){var e=n;do{var t,r=(t=e.parsedStyle)===null||t===void 0?void 0:t.clipPath;if(r)return e;e=e.parentElement}while(e!==null);return null}var jE="px";function LF(n,e,t){rx&&n.style&&(n.style.width=e+jE,n.style.height=t+jE)}function BM(n,e){if(rx)return document.defaultView.getComputedStyle(n,null).getPropertyValue(e)}function IF(n){var e=BM(n,"width");return e==="auto"?n.offsetWidth:parseFloat(e)}function FF(n){var e=BM(n,"height");return e==="auto"?n.offsetHeight:parseFloat(e)}var BF=1,zF={touchstart:"pointerdown",touchend:"pointerup",touchendoutside:"pointerupoutside",touchmove:"pointermove",touchcancel:"pointercancel"},xb=typeof performance=="object"&&performance.now?performance:Date;function vd(n){return n.nodeName===q.FRAGMENT?!0:n.getRootNode().nodeName===q.FRAGMENT}function no(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"auto",e=arguments.length>1?arguments[1]:void 0,t=arguments.length>2?arguments[2]:void 0,r=!1,i=!1,a=!!e&&!e.isNone,s=!!t&&!t.isNone;return n==="visiblepainted"||n==="painted"||n==="auto"?(r=a,i=s):n==="visiblefill"||n==="fill"?r=!0:n==="visiblestroke"||n==="stroke"?i=!0:(n==="visible"||n==="all")&&(r=!0,i=!0),[r,i]}var $F=1,jF=function(){return $F++},Mi=typeof self=="object"&&self.self===self?self:typeof global=="object"&&global.global===global?global:{},qF=Date.now(),GF=function(){return Mi.performance&&typeof Mi.performance.now=="function"?Mi.performance.now():Date.now()-qF},qu={},qE=Date.now(),WF=function(e){if(typeof e!="function")throw new TypeError("".concat(e," is not a function"));var t=Date.now(),r=t-qE,i=r>16?0:16-r,a=jF();return qu[a]=e,Object.keys(qu).length>1||setTimeout(function(){qE=t;var s=qu;qu={},Object.keys(s).forEach(function(o){return s[o](GF())})},i),a},VF=function(e){delete qu[e]},UF=["","webkit","moz","ms","o"],zM=function(e){return typeof e!="string"?WF:e===""?Mi.requestAnimationFrame:Mi["".concat(e,"RequestAnimationFrame")]},HF=function(e){return typeof e!="string"?VF:e===""?Mi.cancelAnimationFrame:Mi["".concat(e,"CancelAnimationFrame")]||Mi["".concat(e,"CancelRequestAnimationFrame")]},YF=function(e,t){for(var r=0;e[r]!==void 0;){if(t(e[r]))return e[r];r+=1}},$M=YF(UF,function(n){return!!zM(n)}),ix=zM($M),jM=HF($M);Mi.requestAnimationFrame=ix;Mi.cancelAnimationFrame=jM;var XF=function(){function n(){U(this,n),this.callbacks=[]}return H(n,[{key:"getCallbacksNum",value:function(){return this.callbacks.length}},{key:"tapPromise",value:function(t,r){this.callbacks.push(r)}},{key:"promise",value:function(){for(var t=arguments.length,r=new Array(t),i=0;i<t;i++)r[i]=arguments[i];return Promise.all(this.callbacks.map(function(a){return a.apply(void 0,r)}))}}])}(),KF=function(){function n(){U(this,n),this.callbacks=[]}return H(n,[{key:"tapPromise",value:function(t,r){this.callbacks.push(r)}},{key:"promise",value:function(){var e=as(vn().mark(function r(){var i,a,s,o,u=arguments;return vn().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:if(!this.callbacks.length){c.next=14;break}return c.next=3,(i=this.callbacks)[0].apply(i,u);case 3:a=c.sent,s=0;case 5:if(!(s<this.callbacks.length-1)){c.next=13;break}return o=this.callbacks[s],c.next=9,o(a);case 9:a=c.sent;case 10:s++,c.next=5;break;case 13:return c.abrupt("return",a);case 14:return c.abrupt("return",null);case 15:case"end":return c.stop()}},r,this)}));function t(){return e.apply(this,arguments)}return t}()}])}(),Nn=function(){function n(){U(this,n),this.callbacks=[]}return H(n,[{key:"tap",value:function(t,r){this.callbacks.push(r)}},{key:"call",value:function(){for(var t=arguments.length,r=new Array(t),i=0;i<t;i++)r[i]=arguments[i];var a=arguments;this.callbacks.forEach(function(s){s.apply(void 0,a)})}}])}(),ag=function(){function n(){U(this,n),this.callbacks=[]}return H(n,[{key:"tap",value:function(t,r){this.callbacks.push(r)}},{key:"call",value:function(){for(var t=arguments.length,r=new Array(t),i=0;i<t;i++)r[i]=arguments[i];if(this.callbacks.length){for(var a=arguments,s=this.callbacks[0].apply(void 0,a),o=0;o<this.callbacks.length-1;o++){var u=this.callbacks[o];s=u(s)}return s}return null}}])}(),ZF=["serif","sans-serif","monospace","cursive","fantasy","system-ui"],JF=/([\"\'])[^\'\"]+\1/;function QF(n){for(var e=n.fontSize,t=e===void 0?16:e,r=n.fontFamily,i=r===void 0?"sans-serif":r,a=n.fontStyle,s=a===void 0?"normal":a,o=n.fontVariant,u=o===void 0?"normal":o,l=n.fontWeight,c=l===void 0?"normal":l,h=re(t)&&"".concat(t,"px")||"16px",d=i.split(","),f=d.length-1;f>=0;f--){var g=d[f].trim();!JF.test(g)&&ZF.indexOf(g)<0&&(g='"'.concat(g,'"')),d[f]=g}return"".concat(s," ").concat(u," ").concat(c," ").concat(h," ").concat(d.join(","))}function sg(n,e,t){return is(n),n[4]=Math.tan(e),n[1]=Math.tan(t),n}var Mt=nt(),eB=nt(),tB={scale:function(e){Cs(Mt,[e[0].value,e[1].value,1])},scaleX:function(e){Cs(Mt,[e[0].value,1,1])},scaleY:function(e){Cs(Mt,[1,e[0].value,1])},scaleZ:function(e){Cs(Mt,[1,1,e[0].value])},scale3d:function(e){Cs(Mt,[e[0].value,e[1].value,e[2].value])},translate:function(e){Ia(Mt,[e[0].value,e[1].value,0])},translateX:function(e){Ia(Mt,[e[0].value,0,0])},translateY:function(e){Ia(Mt,[0,e[0].value,0])},translateZ:function(e){Ia(Mt,[0,0,e[0].value])},translate3d:function(e){Ia(Mt,[e[0].value,e[1].value,e[2].value])},rotate:function(e){Ky(Mt,Ye(Xn(e[0])))},rotateX:function(e){jO(Mt,Ye(Xn(e[0])))},rotateY:function(e){qO(Mt,Ye(Xn(e[0])))},rotateZ:function(e){Ky(Mt,Ye(Xn(e[0])))},rotate3d:function(e){$O(Mt,Ye(Xn(e[3])),[e[0].value,e[1].value,e[2].value])},skew:function(e){sg(Mt,Ye(e[0].value),Ye(e[1].value))},skewX:function(e){sg(Mt,Ye(e[0].value),0)},skewY:function(e){sg(Mt,0,Ye(e[0].value))},matrix:function(e){Xy(Mt,e[0].value,e[1].value,0,0,e[2].value,e[3].value,0,0,0,0,1,0,e[4].value,e[5].value,0,1)},matrix3d:function(e){Xy.apply(IL,[Mt].concat(at(e.map(function(t){return t.value}))))}},nB=st(1,1,1),rB=Ie(),GE={translate:function(e,t){X.sceneGraphService.setLocalScale(e,nB,!1),X.sceneGraphService.setLocalEulerAngles(e,rB,void 0,void 0,!1),X.sceneGraphService.setLocalPosition(e,[t[0].value,t[1].value,0],!1),X.sceneGraphService.dirtifyLocal(e,e.transformable)}};function qM(n,e){if(n.length){if(n.length===1&&GE[n[0].t]){GE[n[0].t](e,n[0].d);return}for(var t=is(eB),r=0;r<n.length;r++){var i=n[r],a=i.t,s=i.d,o=tB[a];o&&(o(s),KO(t,t,Mt))}e.setLocalTransform(t)}else e.resetLocalTransform();return e.getLocalTransform()}var iB=function(){function n(){U(this,n),this.parser=rF,this.mixer=dF}return H(n,[{key:"calculator",value:function(t,r,i,a){return i instanceof Fr?[]:i}},{key:"postProcessor",value:function(t){qM(t.parsedStyle.transform,t)}}])}(),aB=function(){function n(){U(this,n)}return H(n,[{key:"postProcessor",value:function(t){var r=t.parsedStyle.transformOrigin;r[0].unit===Q.kPixels&&r[1].unit===Q.kPixels?t.setOrigin(r[0].value,r[1].value):t.getGeometryBounds()}}])}(),sB=function(){function n(){U(this,n)}return H(n,[{key:"calculator",value:function(t,r,i,a){return i.value}},{key:"postProcessor",value:function(t){if(t.parentNode){var r=t.parentNode,i=r.renderable,a=r.sortable;i&&(i.dirty=!0),a&&(a.dirty=!0,a.dirtyReason=hd.Z_INDEX_CHANGED)}}}])}(),oB=function(){function n(){U(this,n)}return H(n,[{key:"update",value:function(t,r){var i=t.cx,a=i===void 0?0:i,s=t.cy,o=s===void 0?0:s,u=t.r,l=u===void 0?0:u;return{cx:a,cy:o,hwidth:l,hheight:l}}}])}(),uB=function(){function n(){U(this,n)}return H(n,[{key:"update",value:function(t,r){var i=t.cx,a=i===void 0?0:i,s=t.cy,o=s===void 0?0:s,u=t.rx,l=u===void 0?0:u,c=t.ry,h=c===void 0?0:c;return{cx:a,cy:o,hwidth:l,hheight:h}}}])}(),lB=function(){function n(){U(this,n)}return H(n,[{key:"update",value:function(t){var r=t.x1,i=t.y1,a=t.x2,s=t.y2,o=Math.min(r,a),u=Math.max(r,a),l=Math.min(i,s),c=Math.max(i,s),h=u-o,d=c-l,f=h/2,g=d/2;return{cx:o+f,cy:l+g,hwidth:f,hheight:g}}}])}(),cB=function(){function n(){U(this,n)}return H(n,[{key:"update",value:function(t){var r=t.d,i=r.rect,a=i.x,s=i.y,o=i.width,u=i.height,l=o/2,c=u/2;return{cx:a+l,cy:s+c,hwidth:l,hheight:c}}}])}(),hB=function(){function n(){U(this,n)}return H(n,[{key:"update",value:function(t){if(t.points&&Er(t.points.points)){var r=t.points.points,i=Math.min.apply(Math,at(r.map(function(d){return d[0]}))),a=Math.max.apply(Math,at(r.map(function(d){return d[0]}))),s=Math.min.apply(Math,at(r.map(function(d){return d[1]}))),o=Math.max.apply(Math,at(r.map(function(d){return d[1]}))),u=a-i,l=o-s,c=u/2,h=l/2;return{cx:i+c,cy:s+h,hwidth:c,hheight:h}}return{cx:0,cy:0,hwidth:0,hheight:0}}}])}(),dB=function(){function n(){U(this,n)}return H(n,[{key:"update",value:function(t,r){var i=t.x,a=i===void 0?0:i,s=t.y,o=s===void 0?0:s,u=t.src,l=t.width,c=l===void 0?0:l,h=t.height,d=h===void 0?0:h,f=c,g=d;return u&&!qe(u)&&(f||(f=u.width,t.width=f),g||(g=u.height,t.height=g)),{cx:a+f/2,cy:o+g/2,hwidth:f/2,hheight:g/2}}}])}(),fB=function(){function n(e){U(this,n),this.globalRuntime=e}return H(n,[{key:"isReadyToMeasure",value:function(t,r){var i=t.text;return i}},{key:"update",value:function(t,r){var i,a=t.text,s=t.textAlign,o=s===void 0?"start":s,u=t.lineWidth,l=u===void 0?1:u,c=t.textBaseline,h=c===void 0?"alphabetic":c,d=t.dx,f=d===void 0?0:d,g=t.dy,p=g===void 0?0:g,v=t.x,m=v===void 0?0:v,y=t.y,b=y===void 0?0:y;if(!this.isReadyToMeasure(t,r))return t.metrics={font:"",width:0,height:0,lines:[],lineWidths:[],lineHeight:0,maxLineWidth:0,fontProperties:{ascent:0,descent:0,fontSize:0},lineMetrics:[]},{hwidth:0,hheight:0,cx:0,cy:0};var x=(r==null||(i=r.ownerDocument)===null||i===void 0||(i=i.defaultView)===null||i===void 0?void 0:i.getConfig())||{},w=x.offscreenCanvas,E=this.globalRuntime.textService.measureText(a,t,w);t.metrics=E;var _=E.width,S=E.height,C=_/2,k=S/2,A=m+C;o==="center"||o==="middle"?A+=l/2-C:(o==="right"||o==="end")&&(A+=l-C*2);var T=b-k;return h==="middle"?T+=k:h==="top"||h==="hanging"?T+=k*2:h==="alphabetic"||(h==="bottom"||h==="ideographic")&&(T+=0),f&&(A+=f),p&&(T+=p),{cx:A,cy:T,hwidth:C,hheight:k}}}])}(),gB=function(){function n(){U(this,n)}return H(n,[{key:"update",value:function(t,r){return{cx:0,cy:0,hwidth:0,hheight:0}}}])}(),pB=function(){function n(){U(this,n)}return H(n,[{key:"update",value:function(t,r){var i=t.x,a=i===void 0?0:i,s=t.y,o=s===void 0?0:s,u=t.width,l=u===void 0?0:u,c=t.height,h=c===void 0?0:c;return{cx:a+l/2,cy:o+h/2,hwidth:l/2,hheight:h/2}}}])}(),rf=function(){function n(e){U(this,n),this.eventPhase=n.prototype.NONE,this.bubbles=!0,this.cancelBubble=!0,this.cancelable=!1,this.defaultPrevented=!1,this.propagationStopped=!1,this.propagationImmediatelyStopped=!1,this.layer=new gn,this.page=new gn,this.canvas=new gn,this.viewport=new gn,this.composed=!1,this.NONE=0,this.CAPTURING_PHASE=1,this.AT_TARGET=2,this.BUBBLING_PHASE=3,this.manager=e}return H(n,[{key:"name",get:function(){return this.type}},{key:"layerX",get:function(){return this.layer.x}},{key:"layerY",get:function(){return this.layer.y}},{key:"pageX",get:function(){return this.page.x}},{key:"pageY",get:function(){return this.page.y}},{key:"x",get:function(){return this.canvas.x}},{key:"y",get:function(){return this.canvas.y}},{key:"canvasX",get:function(){return this.canvas.x}},{key:"canvasY",get:function(){return this.canvas.y}},{key:"viewportX",get:function(){return this.viewport.x}},{key:"viewportY",get:function(){return this.viewport.y}},{key:"composedPath",value:function(){return this.manager&&(!this.path||this.path[0]!==this.target)&&(this.path=this.target?this.manager.propagationPath(this.target):[]),this.path}},{key:"propagationPath",get:function(){return this.composedPath()}},{key:"preventDefault",value:function(){this.nativeEvent instanceof Event&&this.nativeEvent.cancelable&&this.nativeEvent.preventDefault(),this.defaultPrevented=!0}},{key:"stopImmediatePropagation",value:function(){this.propagationImmediatelyStopped=!0}},{key:"stopPropagation",value:function(){this.propagationStopped=!0}},{key:"initEvent",value:function(){}},{key:"initUIEvent",value:function(){}},{key:"clone",value:function(){throw new Error(He)}}])}(),GM=function(n){function e(){var t;U(this,e);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return t=Te(this,e,[].concat(i)),t.client=new gn,t.movement=new gn,t.offset=new gn,t.global=new gn,t.screen=new gn,t}return Oe(e,n),H(e,[{key:"clientX",get:function(){return this.client.x}},{key:"clientY",get:function(){return this.client.y}},{key:"movementX",get:function(){return this.movement.x}},{key:"movementY",get:function(){return this.movement.y}},{key:"offsetX",get:function(){return this.offset.x}},{key:"offsetY",get:function(){return this.offset.y}},{key:"globalX",get:function(){return this.global.x}},{key:"globalY",get:function(){return this.global.y}},{key:"screenX",get:function(){return this.screen.x}},{key:"screenY",get:function(){return this.screen.y}},{key:"getModifierState",value:function(r){return"getModifierState"in this.nativeEvent&&this.nativeEvent.getModifierState(r)}},{key:"initMouseEvent",value:function(){throw new Error(He)}}])}(rf),md=function(n){function e(){var t;U(this,e);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return t=Te(this,e,[].concat(i)),t.width=0,t.height=0,t.isPrimary=!1,t}return Oe(e,n),H(e,[{key:"getCoalescedEvents",value:function(){return this.type==="pointermove"||this.type==="mousemove"||this.type==="touchmove"?[this]:[]}},{key:"getPredictedEvents",value:function(){throw new Error("getPredictedEvents is not supported!")}},{key:"clone",value:function(){return this.manager.clonePointerEvent(this)}}])}(GM),wb=function(n){function e(){return U(this,e),Te(this,e,arguments)}return Oe(e,n),H(e,[{key:"clone",value:function(){return this.manager.cloneWheelEvent(this)}}])}(GM),It=function(n){function e(t,r){var i;return U(this,e),i=Te(this,e,[null]),i.type=t,i.detail=r,Object.assign(i,r),i}return Oe(e,n),H(e)}(rf),WE=new WeakMap,WM=function(){function n(){U(this,n),this.emitter=new PO}return H(n,[{key:"on",value:function(t,r,i){return this.addEventListener(t,r,i),this}},{key:"addEventListener",value:function(t,r,i){var a=!1,s=!1;if(xl(i))a=i;else if(i){var o=i.capture;a=o===void 0?!1:o;var u=i.once;s=u===void 0?!1:u}a&&(t+="capture"),r=se(r)?r:r.handleEvent;var l=se(r)?void 0:r;return s?this.emitter.once(t,r,l):this.emitter.on(t,r,l),this}},{key:"off",value:function(t,r,i){return t?this.removeEventListener(t,r,i):this.removeAllEventListeners(),this}},{key:"removeAllEventListeners",value:function(){var t;(t=this.emitter)===null||t===void 0||t.removeAllListeners()}},{key:"removeEventListener",value:function(t,r,i){var a;if(!this.emitter)return this;var s=xl(i)?i:i==null?void 0:i.capture;s&&(t+="capture"),r=se(r)?r:(a=r)===null||a===void 0?void 0:a.handleEvent;var o=se(r)?void 0:r;return this.emitter.off(t,r,o),this}},{key:"emit",value:function(t,r){this.dispatchEvent(new It(t,r))}},{key:"dispatchEvent",value:function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,i=WE.get(this);if(!i){var a;this.document?i=this:this.defaultView?i=this.defaultView:i=(a=this.ownerDocument)===null||a===void 0?void 0:a.defaultView,i&&WE.set(this,i)}if(i){if(t.manager=i.getEventService(),!t.manager)return!1;t.defaultPrevented=!1,t.path?t.path.length=0:t.page=[],r||(t.target=this),t.manager.dispatchEvent(t,t.type,r)}else this.emitter.emit(t.type,t);return!t.defaultPrevented}}])}(),yt=function(n){function e(){var t;U(this,e);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return t=Te(this,e,[].concat(i)),t.shadow=!1,t.ownerDocument=null,t.isConnected=!1,t.baseURI="",t.childNodes=[],t.nodeType=0,t.nodeName="",t.nodeValue=null,t.parentNode=null,t}return Oe(e,n),H(e,[{key:"textContent",get:function(){var r="";this.nodeName===q.TEXT&&(r+=this.style.text);var i=As(this.childNodes),a;try{for(i.s();!(a=i.n()).done;){var s=a.value;s.nodeName===q.TEXT?r+=s.nodeValue:r+=s.textContent}}catch(o){i.e(o)}finally{i.f()}return r},set:function(r){var i=this;this.childNodes.slice().forEach(function(a){i.removeChild(a)}),this.nodeName===q.TEXT&&(this.style.text="".concat(r))}},{key:"getRootNode",value:function(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return this.parentNode?this.parentNode.getRootNode(r):r.composed&&this.host?this.host.getRootNode(r):this}},{key:"hasChildNodes",value:function(){return this.childNodes.length>0}},{key:"isDefaultNamespace",value:function(r){throw new Error(He)}},{key:"lookupNamespaceURI",value:function(r){throw new Error(He)}},{key:"lookupPrefix",value:function(r){throw new Error(He)}},{key:"normalize",value:function(){throw new Error(He)}},{key:"isEqualNode",value:function(r){return this===r}},{key:"isSameNode",value:function(r){return this.isEqualNode(r)}},{key:"parent",get:function(){return this.parentNode}},{key:"parentElement",get:function(){return null}},{key:"nextSibling",get:function(){return null}},{key:"previousSibling",get:function(){return null}},{key:"firstChild",get:function(){return this.childNodes.length>0?this.childNodes[0]:null}},{key:"lastChild",get:function(){return this.childNodes.length>0?this.childNodes[this.childNodes.length-1]:null}},{key:"compareDocumentPosition",value:function(r){if(r===this)return 0;for(var i=r,a=this,s=[i],o=[a];(u=i.parentNode)!==null&&u!==void 0?u:a.parentNode;){var u;i=i.parentNode?(s.push(i.parentNode),i.parentNode):i,a=a.parentNode?(o.push(a.parentNode),a.parentNode):a}if(i!==a)return e.DOCUMENT_POSITION_DISCONNECTED|e.DOCUMENT_POSITION_IMPLEMENTATION_SPECIFIC|e.DOCUMENT_POSITION_PRECEDING;var l=s.length>o.length?s:o,c=l===s?o:s;if(l[l.length-c.length]===c[0])return l===s?e.DOCUMENT_POSITION_CONTAINED_BY|e.DOCUMENT_POSITION_FOLLOWING:e.DOCUMENT_POSITION_CONTAINS|e.DOCUMENT_POSITION_PRECEDING;for(var h=l.length-c.length,d=c.length-1;d>=0;d--){var f=c[d],g=l[h+d];if(g!==f){var p=f.parentNode.childNodes;return p.indexOf(f)<p.indexOf(g)?c===s?e.DOCUMENT_POSITION_PRECEDING:e.DOCUMENT_POSITION_FOLLOWING:l===s?e.DOCUMENT_POSITION_PRECEDING:e.DOCUMENT_POSITION_FOLLOWING}}return e.DOCUMENT_POSITION_FOLLOWING}},{key:"contain",value:function(r){return this.contains(r)}},{key:"contains",value:function(r){for(var i=r;i&&this!==i;)i=i.parentNode;return!!i}},{key:"getAncestor",value:function(r){for(var i=this;r>0&&i;)i=i.parentNode,r--;return i}},{key:"forEach",value:function(r){for(var i=[this];i.length>0;){var a=i.pop(),s=r(a);if(s===!1)break;for(var o=a.childNodes.length-1;o>=0;o--)i.push(a.childNodes[o])}}}],[{key:"isNode",value:function(r){return!!r.childNodes}}])}(WM);yt.DOCUMENT_POSITION_DISCONNECTED=1;yt.DOCUMENT_POSITION_PRECEDING=2;yt.DOCUMENT_POSITION_FOLLOWING=4;yt.DOCUMENT_POSITION_CONTAINS=8;yt.DOCUMENT_POSITION_CONTAINED_BY=16;yt.DOCUMENT_POSITION_IMPLEMENTATION_SPECIFIC=32;var vB=2048,mB=function(){function n(e,t){var r=this;U(this,n),this.nativeHTMLMap=new WeakMap,this.cursor="default",this.mappingTable={},this.mappingState={trackingData:{}},this.eventPool=new Map,this.tmpMatrix=nt(),this.tmpVec3=Ie(),this.onPointerDown=function(i){var a=r.createPointerEvent(i);if(r.dispatchEvent(a,"pointerdown"),a.pointerType==="touch")r.dispatchEvent(a,"touchstart");else if(a.pointerType==="mouse"||a.pointerType==="pen"){var s=a.button===2;r.dispatchEvent(a,s?"rightdown":"mousedown")}var o=r.trackingData(i.pointerId);o.pressTargetsByButton[i.button]=a.composedPath(),r.freeEvent(a)},this.onPointerUp=function(i){var a=xb.now(),s=r.createPointerEvent(i,void 0,void 0,r.context.config.alwaysTriggerPointerEventOnCanvas?r.rootTarget:void 0);if(r.dispatchEvent(s,"pointerup"),s.pointerType==="touch")r.dispatchEvent(s,"touchend");else if(s.pointerType==="mouse"||s.pointerType==="pen"){var o=s.button===2;r.dispatchEvent(s,o?"rightup":"mouseup")}var u=r.trackingData(i.pointerId),l=r.findMountedTarget(u.pressTargetsByButton[i.button]),c=l;if(l&&!s.composedPath().includes(l)){for(var h=l;h&&!s.composedPath().includes(h);){if(s.currentTarget=h,r.notifyTarget(s,"pointerupoutside"),s.pointerType==="touch")r.notifyTarget(s,"touchendoutside");else if(s.pointerType==="mouse"||s.pointerType==="pen"){var d=s.button===2;r.notifyTarget(s,d?"rightupoutside":"mouseupoutside")}yt.isNode(h)&&(h=h.parentNode)}delete u.pressTargetsByButton[i.button],c=h}if(c){var f,g=r.clonePointerEvent(s,"click");g.target=c,g.path=[],u.clicksByButton[i.button]||(u.clicksByButton[i.button]={clickCount:0,target:g.target,timeStamp:a});var p=r.context.renderingContext.root.ownerDocument.defaultView,v=u.clicksByButton[i.button];v.target===g.target&&a-v.timeStamp<p.getConfig().dblClickSpeed?++v.clickCount:v.clickCount=1,v.target=g.target,v.timeStamp=a,g.detail=v.clickCount,(f=s.detail)!==null&&f!==void 0&&f.preventClick||(!r.context.config.useNativeClickEvent&&(g.pointerType==="mouse"||g.pointerType==="touch")&&r.dispatchEvent(g,"click"),r.dispatchEvent(g,"pointertap")),r.freeEvent(g)}r.freeEvent(s)},this.onPointerMove=function(i){var a=r.createPointerEvent(i,void 0,void 0,r.context.config.alwaysTriggerPointerEventOnCanvas?r.rootTarget:void 0),s=a.pointerType==="mouse"||a.pointerType==="pen",o=r.trackingData(i.pointerId),u=r.findMountedTarget(o.overTargets);if(o.overTargets&&u!==a.target){var l=i.type==="mousemove"?"mouseout":"pointerout",c=r.createPointerEvent(i,l,u||void 0);if(r.dispatchEvent(c,"pointerout"),s&&r.dispatchEvent(c,"mouseout"),!a.composedPath().includes(u)){var h=r.createPointerEvent(i,"pointerleave",u||void 0);for(h.eventPhase=h.AT_TARGET;h.target&&!a.composedPath().includes(h.target);)h.currentTarget=h.target,r.notifyTarget(h),s&&r.notifyTarget(h,"mouseleave"),yt.isNode(h.target)&&(h.target=h.target.parentNode);r.freeEvent(h)}r.freeEvent(c)}if(u!==a.target){var d=i.type==="mousemove"?"mouseover":"pointerover",f=r.clonePointerEvent(a,d);r.dispatchEvent(f,"pointerover"),s&&r.dispatchEvent(f,"mouseover");for(var g=u&&yt.isNode(u)&&u.parentNode;g&&g!==(yt.isNode(r.rootTarget)&&r.rootTarget.parentNode)&&g!==a.target;)g=g.parentNode;var p=!g||g===(yt.isNode(r.rootTarget)&&r.rootTarget.parentNode);if(p){var v=r.clonePointerEvent(a,"pointerenter");for(v.eventPhase=v.AT_TARGET;v.target&&v.target!==u&&v.target!==(yt.isNode(r.rootTarget)&&r.rootTarget.parentNode);)v.currentTarget=v.target,r.notifyTarget(v),s&&r.notifyTarget(v,"mouseenter"),yt.isNode(v.target)&&(v.target=v.target.parentNode);r.freeEvent(v)}r.freeEvent(f)}r.dispatchEvent(a,"pointermove"),a.pointerType==="touch"&&r.dispatchEvent(a,"touchmove"),s&&(r.dispatchEvent(a,"mousemove"),r.cursor=r.getCursor(a.target)),o.overTargets=a.composedPath(),r.freeEvent(a)},this.onPointerOut=function(i){var a=r.trackingData(i.pointerId);if(a.overTargets){var s=i.pointerType==="mouse"||i.pointerType==="pen",o=r.findMountedTarget(a.overTargets),u=r.createPointerEvent(i,"pointerout",o||void 0);r.dispatchEvent(u),s&&r.dispatchEvent(u,"mouseout");var l=r.createPointerEvent(i,"pointerleave",o||void 0);for(l.eventPhase=l.AT_TARGET;l.target&&l.target!==(yt.isNode(r.rootTarget)&&r.rootTarget.parentNode);)l.currentTarget=l.target,r.notifyTarget(l),s&&r.notifyTarget(l,"mouseleave"),yt.isNode(l.target)&&(l.target=l.target.parentNode);a.overTargets=null,r.freeEvent(u),r.freeEvent(l)}r.cursor=null},this.onPointerOver=function(i){var a=r.trackingData(i.pointerId),s=r.createPointerEvent(i),o=s.pointerType==="mouse"||s.pointerType==="pen";r.dispatchEvent(s,"pointerover"),o&&r.dispatchEvent(s,"mouseover"),s.pointerType==="mouse"&&(r.cursor=r.getCursor(s.target));var u=r.clonePointerEvent(s,"pointerenter");for(u.eventPhase=u.AT_TARGET;u.target&&u.target!==(yt.isNode(r.rootTarget)&&r.rootTarget.parentNode);)u.currentTarget=u.target,r.notifyTarget(u),o&&r.notifyTarget(u,"mouseenter"),yt.isNode(u.target)&&(u.target=u.target.parentNode);a.overTargets=s.composedPath(),r.freeEvent(s),r.freeEvent(u)},this.onPointerUpOutside=function(i){var a=r.trackingData(i.pointerId),s=r.findMountedTarget(a.pressTargetsByButton[i.button]),o=r.createPointerEvent(i);if(s){for(var u=s;u;)o.currentTarget=u,r.notifyTarget(o,"pointerupoutside"),o.pointerType==="touch"||(o.pointerType==="mouse"||o.pointerType==="pen")&&r.notifyTarget(o,o.button===2?"rightupoutside":"mouseupoutside"),yt.isNode(u)&&(u=u.parentNode);delete a.pressTargetsByButton[i.button]}r.freeEvent(o)},this.onWheel=function(i){var a=r.createWheelEvent(i);r.dispatchEvent(a),r.freeEvent(a)},this.onClick=function(i){if(r.context.config.useNativeClickEvent){var a=r.createPointerEvent(i);r.dispatchEvent(a),r.freeEvent(a)}},this.onPointerCancel=function(i){var a=r.createPointerEvent(i,void 0,void 0,r.context.config.alwaysTriggerPointerEventOnCanvas?r.rootTarget:void 0);r.dispatchEvent(a),r.freeEvent(a)},this.globalRuntime=e,this.context=t}return H(n,[{key:"init",value:function(){this.rootTarget=this.context.renderingContext.root.parentNode,this.addEventMapping("pointerdown",this.onPointerDown),this.addEventMapping("pointerup",this.onPointerUp),this.addEventMapping("pointermove",this.onPointerMove),this.addEventMapping("pointerout",this.onPointerOut),this.addEventMapping("pointerleave",this.onPointerOut),this.addEventMapping("pointercancel",this.onPointerCancel),this.addEventMapping("pointerover",this.onPointerOver),this.addEventMapping("pointerupoutside",this.onPointerUpOutside),this.addEventMapping("wheel",this.onWheel),this.addEventMapping("click",this.onClick)}},{key:"destroy",value:function(){this.mappingTable={},this.mappingState={},this.eventPool.clear()}},{key:"getScale",value:function(){var t=this.context.contextService.getBoundingClientRect(),r=1,i=1,a=this.context.contextService.getDomElement();if(a&&t){var s=a.offsetWidth,o=a.offsetHeight;s&&o&&(r=t.width/s,i=t.height/o)}return{scaleX:r,scaleY:i,bbox:t}}},{key:"client2Viewport",value:function(t){var r=this.getScale(),i=r.scaleX,a=r.scaleY,s=r.bbox;return new gn((t.x-((s==null?void 0:s.left)||0))/i,(t.y-((s==null?void 0:s.top)||0))/a)}},{key:"viewport2Client",value:function(t){var r=this.getScale(),i=r.scaleX,a=r.scaleY,s=r.bbox;return new gn((t.x+((s==null?void 0:s.left)||0))*i,(t.y+((s==null?void 0:s.top)||0))*a)}},{key:"viewport2Canvas",value:function(t){var r=t.x,i=t.y,a=this.rootTarget.defaultView,s=a.getCamera(),o=this.context.config,u=o.width,l=o.height,c=s.getPerspectiveInverse(),h=s.getWorldTransform(),d=On(this.tmpMatrix,h,c),f=An(this.tmpVec3,r/u*2-1,(1-i/l)*2-1,0);return Mn(f,f,d),new gn(f[0],f[1])}},{key:"canvas2Viewport",value:function(t){var r=this.rootTarget.defaultView,i=r.getCamera(),a=i.getPerspective(),s=i.getViewTransform(),o=On(this.tmpMatrix,a,s),u=An(this.tmpVec3,t.x,t.y,0);Mn(this.tmpVec3,this.tmpVec3,o);var l=this.context.config,c=l.width,h=l.height;return new gn((u[0]+1)/2*c,(1-(u[1]+1)/2)*h)}},{key:"setPickHandler",value:function(t){this.pickHandler=t}},{key:"addEventMapping",value:function(t,r){this.mappingTable[t]||(this.mappingTable[t]=[]),this.mappingTable[t].push({fn:r,priority:0}),this.mappingTable[t].sort(function(i,a){return i.priority-a.priority})}},{key:"mapEvent",value:function(t){if(this.rootTarget){var r=this.mappingTable[t.type];if(r)for(var i=0,a=r.length;i<a;i++)r[i].fn(t);else console.warn("[EventService]: Event mapping not defined for ".concat(t.type))}}},{key:"dispatchEvent",value:function(t,r,i){if(!i)t.propagationStopped=!1,t.propagationImmediatelyStopped=!1,this.propagate(t,r);else{t.eventPhase=t.AT_TARGET;var a=this.rootTarget.defaultView||null;t.currentTarget=a,this.notifyListeners(t,r)}}},{key:"propagate",value:function(t,r){if(t.target){var i=t.composedPath();t.eventPhase=t.CAPTURING_PHASE;for(var a=i.length-1;a>=1;a--)if(t.currentTarget=i[a],this.notifyTarget(t,r),t.propagationStopped||t.propagationImmediatelyStopped)return;if(t.eventPhase=t.AT_TARGET,t.currentTarget=t.target,this.notifyTarget(t,r),!(t.propagationStopped||t.propagationImmediatelyStopped)){var s=i.indexOf(t.currentTarget);t.eventPhase=t.BUBBLING_PHASE;for(var o=s+1;o<i.length;o++)if(t.currentTarget=i[o],this.notifyTarget(t,r),t.propagationStopped||t.propagationImmediatelyStopped)return}}}},{key:"propagationPath",value:function(t){var r=[t],i=this.rootTarget.defaultView||null;if(i&&i===t)return r.unshift(i.document),r;for(var a=0;a<vB&&t!==this.rootTarget;a++)yt.isNode(t)&&t.parentNode&&(r.push(t.parentNode),t=t.parentNode);return i&&r.push(i),r}},{key:"hitTest",value:function(t){var r=t.viewportX,i=t.viewportY,a=this.context.config,s=a.width,o=a.height,u=a.disableHitTesting;return r<0||i<0||r>s||i>o?null:!u&&this.pickHandler(t)||this.rootTarget||null}},{key:"isNativeEventFromCanvas",value:function(t,r){var i,a=r==null?void 0:r.target;if((i=a)!==null&&i!==void 0&&i.shadowRoot&&(a=r.composedPath()[0]),a){if(a===t)return!0;if(t&&t.contains)return t.contains(a)}return r!=null&&r.composedPath?r.composedPath().indexOf(t)>-1:!1}},{key:"getExistedHTML",value:function(t){if(t.nativeEvent.composedPath)for(var r=0,i=t.nativeEvent.composedPath();r<i.length;r++){var a=i[r],s=this.nativeHTMLMap.get(a);if(s)return s}return null}},{key:"pickTarget",value:function(t){return this.hitTest({clientX:t.clientX,clientY:t.clientY,viewportX:t.viewportX,viewportY:t.viewportY,x:t.canvasX,y:t.canvasY})}},{key:"createPointerEvent",value:function(t,r,i,a){var s=this.allocateEvent(md);this.copyPointerData(t,s),this.copyMouseData(t,s),this.copyData(t,s),s.nativeEvent=t.nativeEvent,s.originalEvent=t;var o=this.getExistedHTML(s),u=this.context.contextService.getDomElement();return s.target=i??(o||this.isNativeEventFromCanvas(u,s.nativeEvent)&&this.pickTarget(s)||a),typeof r=="string"&&(s.type=r),s}},{key:"createWheelEvent",value:function(t){var r=this.allocateEvent(wb);this.copyWheelData(t,r),this.copyMouseData(t,r),this.copyData(t,r),r.nativeEvent=t.nativeEvent,r.originalEvent=t;var i=this.getExistedHTML(r),a=this.context.contextService.getDomElement();return r.target=i||this.isNativeEventFromCanvas(a,r.nativeEvent)&&this.pickTarget(r),r}},{key:"trackingData",value:function(t){return this.mappingState.trackingData[t]||(this.mappingState.trackingData[t]={pressTargetsByButton:{},clicksByButton:{},overTarget:null}),this.mappingState.trackingData[t]}},{key:"cloneWheelEvent",value:function(t){var r=this.allocateEvent(wb);return r.nativeEvent=t.nativeEvent,r.originalEvent=t.originalEvent,this.copyWheelData(t,r),this.copyMouseData(t,r),this.copyData(t,r),r.target=t.target,r.path=t.composedPath().slice(),r.type=t.type,r}},{key:"clonePointerEvent",value:function(t,r){var i=this.allocateEvent(md);return i.nativeEvent=t.nativeEvent,i.originalEvent=t.originalEvent,this.copyPointerData(t,i),this.copyMouseData(t,i),this.copyData(t,i),i.target=t.target,i.path=t.composedPath().slice(),i.type=r??i.type,i}},{key:"copyPointerData",value:function(t,r){r.pointerId=t.pointerId,r.width=t.width,r.height=t.height,r.isPrimary=t.isPrimary,r.pointerType=t.pointerType,r.pressure=t.pressure,r.tangentialPressure=t.tangentialPressure,r.tiltX=t.tiltX,r.tiltY=t.tiltY,r.twist=t.twist}},{key:"copyMouseData",value:function(t,r){r.altKey=t.altKey,r.button=t.button,r.buttons=t.buttons,r.ctrlKey=t.ctrlKey,r.metaKey=t.metaKey,r.shiftKey=t.shiftKey,r.client.copyFrom(t.client),r.movement.copyFrom(t.movement),r.canvas.copyFrom(t.canvas),r.screen.copyFrom(t.screen),r.global.copyFrom(t.global),r.offset.copyFrom(t.offset)}},{key:"copyWheelData",value:function(t,r){r.deltaMode=t.deltaMode,r.deltaX=t.deltaX,r.deltaY=t.deltaY,r.deltaZ=t.deltaZ}},{key:"copyData",value:function(t,r){r.isTrusted=t.isTrusted,r.timeStamp=xb.now(),r.type=t.type,r.detail=t.detail,r.view=t.view,r.page.copyFrom(t.page),r.viewport.copyFrom(t.viewport)}},{key:"allocateEvent",value:function(t){this.eventPool.has(t)||this.eventPool.set(t,[]);var r=this.eventPool.get(t).pop()||new t(this);return r.eventPhase=r.NONE,r.currentTarget=null,r.path=[],r.target=null,r}},{key:"freeEvent",value:function(t){if(t.manager!==this)throw new Error("It is illegal to free an event not managed by this EventBoundary!");var r=t.constructor;this.eventPool.has(r)||this.eventPool.set(r,[]),this.eventPool.get(r).push(t)}},{key:"notifyTarget",value:function(t,r){r=r??t.type;var i=t.eventPhase===t.CAPTURING_PHASE||t.eventPhase===t.AT_TARGET?"".concat(r,"capture"):r;this.notifyListeners(t,i),t.eventPhase===t.AT_TARGET&&this.notifyListeners(t,r)}},{key:"notifyListeners",value:function(t,r){var i=t.currentTarget.emitter,a=i._events[r];if(a)if("fn"in a)a.once&&i.removeListener(r,a.fn,void 0,!0),a.fn.call(t.currentTarget||a.context,t);else for(var s=0;s<a.length&&!t.propagationImmediatelyStopped;s++)a[s].once&&i.removeListener(r,a[s].fn,void 0,!0),a[s].fn.call(t.currentTarget||a[s].context,t)}},{key:"findMountedTarget",value:function(t){if(!t)return null;for(var r=t[t.length-1],i=t.length-2;i>=0;i--){var a=t[i];if(a===this.rootTarget||yt.isNode(a)&&a.parentNode===r)r=t[i];else break}return r}},{key:"getCursor",value:function(t){for(var r=t;r;){var i=DF(r)&&r.getAttribute("cursor");if(i)return i;r=yt.isNode(r)&&r.parentNode}}}])}(),ax=function(){function n(){U(this,n)}return H(n,[{key:"getOrCreateCanvas",value:function(t,r){if(this.canvas)return this.canvas;if(t||X.offscreenCanvas)this.canvas=t||X.offscreenCanvas,this.context=this.canvas.getContext("2d",Ce({willReadFrequently:!0},r));else try{this.canvas=new window.OffscreenCanvas(0,0),this.context=this.canvas.getContext("2d",Ce({willReadFrequently:!0},r)),(!this.context||!this.context.measureText)&&(this.canvas=document.createElement("canvas"),this.context=this.canvas.getContext("2d"))}catch{this.canvas=document.createElement("canvas"),this.context=this.canvas.getContext("2d",Ce({willReadFrequently:!0},r))}return this.canvas.width=10,this.canvas.height=10,this.canvas}},{key:"getOrCreateContext",value:function(t,r){return this.context?this.context:(this.getOrCreateCanvas(t,r),this.context)}}],[{key:"createCanvas",value:function(){try{return new window.OffscreenCanvas(0,0)}catch{}try{return document.createElement("canvas")}catch{}return null}}])}(),Go=function(n){return n[n.CAMERA_CHANGED=0]="CAMERA_CHANGED",n[n.DISPLAY_OBJECT_CHANGED=1]="DISPLAY_OBJECT_CHANGED",n[n.NONE=2]="NONE",n}({}),yB=function(){function n(e,t){U(this,n),this.inited=!1,this.stats={total:0,rendered:0},this.zIndexCounter=0,this.hooks={init:new Nn,initAsync:new XF,dirtycheck:new ag,cull:new ag,beginFrame:new Nn,beforeRender:new Nn,render:new Nn,afterRender:new Nn,endFrame:new Nn,destroy:new Nn,pick:new KF,pickSync:new ag,pointerDown:new Nn,pointerUp:new Nn,pointerMove:new Nn,pointerOut:new Nn,pointerOver:new Nn,pointerWheel:new Nn,pointerCancel:new Nn,click:new Nn},this.globalRuntime=e,this.context=t}return H(n,[{key:"init",value:function(t){var r=this,i=Ce(Ce({},this.globalRuntime),this.context);this.context.renderingPlugins.forEach(function(a){a.apply(i,r.globalRuntime)}),this.hooks.init.call(),this.hooks.initAsync.getCallbacksNum()===0?(this.inited=!0,t()):this.hooks.initAsync.promise().then(function(){r.inited=!0,t()}).catch(function(a){})}},{key:"getStats",value:function(){return this.stats}},{key:"disableDirtyRectangleRendering",value:function(){var t=this.context.config.renderer,r=t.getConfig(),i=r.enableDirtyRectangleRendering;return!i||this.context.renderingContext.renderReasons.has(Go.CAMERA_CHANGED)}},{key:"render",value:function(t,r,i){var a=this;this.stats.total=0,this.stats.rendered=0,this.zIndexCounter=0;var s=this.context.renderingContext;if(this.globalRuntime.sceneGraphService.syncHierarchy(s.root),this.globalRuntime.sceneGraphService.triggerPendingEvents(),s.renderReasons.size&&this.inited){s.dirtyRectangleRenderingDisabled=this.disableDirtyRectangleRendering();var o=s.renderReasons.size===1&&s.renderReasons.has(Go.CAMERA_CHANGED),u=!t.disableRenderHooks||!(t.disableRenderHooks&&o);u&&this.renderDisplayObject(s.root,t,s),this.hooks.beginFrame.call(r),u&&s.renderListCurrentFrame.forEach(function(l){a.hooks.beforeRender.call(l),a.hooks.render.call(l),a.hooks.afterRender.call(l)}),this.hooks.endFrame.call(r),s.renderListCurrentFrame=[],s.renderReasons.clear(),i()}}},{key:"renderDisplayObject",value:function(t,r,i){var a=this,s=r.renderer.getConfig(),o=s.enableDirtyCheck,u=s.enableCulling;function l(p){var v=p.renderable,m=p.sortable,y=o?v.dirty||i.dirtyRectangleRenderingDisabled?p:null:p;if(y){var b=u?a.hooks.cull.call(y,a.context.camera):y;b&&(a.stats.rendered+=1,i.renderListCurrentFrame.push(b))}v.dirty=!1,m.renderOrder=a.zIndexCounter,a.zIndexCounter+=1,a.stats.total+=1,m.dirty&&(a.sort(p,m),m.dirty=!1,m.dirtyChildren=[],m.dirtyReason=void 0)}for(var c=[t];c.length>0;){var h,d=c.pop();l(d);for(var f=((h=d.sortable)===null||h===void 0||(h=h.sorted)===null||h===void 0?void 0:h.length)>0?d.sortable.sorted:d.childNodes,g=f.length-1;g>=0;g--)c.push(f[g])}}},{key:"sort",value:function(t,r){var i,a;(r==null||(i=r.sorted)===null||i===void 0?void 0:i.length)>0&&r.dirtyReason!==hd.Z_INDEX_CHANGED?r.dirtyChildren.forEach(function(s){var o=r.sorted.indexOf(s);o>-1&&r.sorted.splice(o,1);var u=t.childNodes.indexOf(s);if(u>-1)if(r.sorted.length===0)r.sorted.push(s);else{var l=RF(r.sorted,s);r.sorted.splice(l,0,s)}}):r.sorted=t.childNodes.slice().sort(IM),((a=r.sorted)===null||a===void 0?void 0:a.length)>0&&t.childNodes.filter(function(s){return s.parsedStyle.zIndex}).length===0&&(r.sorted=[])}},{key:"destroy",value:function(){this.inited=!1,this.hooks.destroy.call(),this.globalRuntime.sceneGraphService.clearPendingEvents()}},{key:"dirtify",value:function(){this.context.renderingContext.renderReasons.add(Go.DISPLAY_OBJECT_CHANGED)}}])}(),bB=/\[\s*(.*)=(.*)\s*\]/,xB=function(){function n(){U(this,n)}return H(n,[{key:"selectOne",value:function(t,r){var i=this;if(t.startsWith("."))return r.find(function(u){return((u==null?void 0:u.classList)||[]).indexOf(i.getIdOrClassname(t))>-1});if(t.startsWith("#"))return r.find(function(u){return u.id===i.getIdOrClassname(t)});if(t.startsWith("[")){var a=this.getAttribute(t),s=a.name,o=a.value;return s?r.find(function(u){return r!==u&&(s==="name"?u.name===o:i.attributeToString(u,s)===o)}):null}return r.find(function(u){return r!==u&&u.nodeName===t})}},{key:"selectAll",value:function(t,r){var i=this;if(t.startsWith("."))return r.findAll(function(u){return r!==u&&((u==null?void 0:u.classList)||[]).indexOf(i.getIdOrClassname(t))>-1});if(t.startsWith("#"))return r.findAll(function(u){return r!==u&&u.id===i.getIdOrClassname(t)});if(t.startsWith("[")){var a=this.getAttribute(t),s=a.name,o=a.value;return s?r.findAll(function(u){return r!==u&&(s==="name"?u.name===o:i.attributeToString(u,s)===o)}):[]}return r.findAll(function(u){return r!==u&&u.nodeName===t})}},{key:"is",value:function(t,r){if(t.startsWith("."))return r.className===this.getIdOrClassname(t);if(t.startsWith("#"))return r.id===this.getIdOrClassname(t);if(t.startsWith("[")){var i=this.getAttribute(t),a=i.name,s=i.value;return a==="name"?r.name===s:this.attributeToString(r,a)===s}return r.nodeName===t}},{key:"getIdOrClassname",value:function(t){return t.substring(1)}},{key:"getAttribute",value:function(t){var r=t.match(bB),i="",a="";return r&&r.length>2&&(i=r[1].replace(/"/g,""),a=r[2].replace(/"/g,"")),{name:i,value:a}}},{key:"attributeToString",value:function(t,r){if(!t.getAttribute)return"";var i=t.getAttribute(r);return de(i)?"":i.toString?i.toString():""}}])}(),De=function(n){return n.ATTR_MODIFIED="DOMAttrModified",n.INSERTED="DOMNodeInserted",n.MOUNTED="DOMNodeInsertedIntoDocument",n.REMOVED="removed",n.UNMOUNTED="DOMNodeRemovedFromDocument",n.REPARENT="reparent",n.DESTROY="destroy",n.BOUNDS_CHANGED="bounds-changed",n.CULLED="culled",n}({}),Pi=function(n){function e(t,r,i,a,s,o,u,l){var c;return U(this,e),c=Te(this,e,[null]),c.relatedNode=r,c.prevValue=i,c.newValue=a,c.attrName=s,c.attrChange=o,c.prevParsedValue=u,c.newParsedValue=l,c.type=t,c}return Oe(e,n),H(e)}(rf);Pi.ADDITION=2;Pi.MODIFICATION=1;Pi.REMOVAL=3;function VE(n){var e=n.renderable;e&&(e.renderBoundsDirty=!0,e.boundsDirty=!0)}var wB=new Pi(De.REPARENT,null,"","","",0,"",""),EB=X2(),Nc=Ie(),_B=st(1,1,1),SB=nt(),kB=X2(),xa=Ie(),xo=nt(),wa=Wt(),CB=Ie(),AB=Wt(),TB=Ie(),Ou=Ie(),xs=Ie(),Dc=nt(),UE=Wt(),HE=Wt(),Rc=Wt(),og={affectChildren:!0},OB=function(){function n(e){U(this,n),this.pendingEvents=new Map,this.boundsChangedEvent=new It(De.BOUNDS_CHANGED),this.displayObjectDependencyMap=new WeakMap,this.runtime=e}return H(n,[{key:"matches",value:function(t,r){return this.runtime.sceneGraphSelector.is(t,r)}},{key:"querySelector",value:function(t,r){return this.runtime.sceneGraphSelector.selectOne(t,r)}},{key:"querySelectorAll",value:function(t,r){return this.runtime.sceneGraphSelector.selectAll(t,r)}},{key:"attach",value:function(t,r,i){var a,s=!1;t.parentNode&&(s=t.parentNode!==r,this.detach(t));var o=t.nodeName===q.FRAGMENT,u=vd(r);t.parentNode=r;var l=o?t.childNodes:[t];re(i)?l.forEach(function(f){r.childNodes.splice(i,0,f),f.parentNode=r}):l.forEach(function(f){r.childNodes.push(f),f.parentNode=r});var c=r,h=c.sortable;if((h!=null&&(a=h.sorted)!==null&&a!==void 0&&a.length||h.dirty||t.parsedStyle.zIndex)&&(h.dirtyChildren.indexOf(t)===-1&&h.dirtyChildren.push(t),h.dirty=!0,h.dirtyReason=hd.ADDED),!u){if(o)this.dirtifyFragment(t);else{var d=t.transformable;d&&this.dirtifyWorld(t,d)}s&&t.dispatchEvent(wB)}}},{key:"detach",value:function(t){var r,i;if(t.parentNode){var a=t.transformable,s=t.parentNode,o=s.sortable;(o!=null&&(r=o.sorted)!==null&&r!==void 0&&r.length||(i=t.style)!==null&&i!==void 0&&i.zIndex)&&(o.dirtyChildren.indexOf(t)===-1&&o.dirtyChildren.push(t),o.dirty=!0,o.dirtyReason=hd.REMOVED);var u=t.parentNode.childNodes.indexOf(t);u>-1&&t.parentNode.childNodes.splice(u,1),a&&this.dirtifyWorld(t,a),t.parentNode=null}}},{key:"getOrigin",value:function(t){return t.getGeometryBounds(),t.transformable.origin}},{key:"setOrigin",value:function(t,r){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0;typeof r=="number"&&(r=[r,i,a]);var s=t.transformable;if(!(r[0]===s.origin[0]&&r[1]===s.origin[1]&&r[2]===s.origin[2])){var o=s.origin;o[0]=r[0],o[1]=r[1],o[2]=r[2]||0,this.dirtifyLocal(t,s)}}},{key:"rotate",value:function(t,r){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0;typeof r=="number"&&(r=st(r,i,a));var s=t.transformable;if(t.parentNode===null||!t.parentNode.transformable)this.rotateLocal(t,r);else{var o=wa;_c(o,r[0],r[1],r[2]);var u=this.getRotation(t),l=this.getRotation(t.parentNode);Sc(Rc,l),W0(Rc,Rc),Qa(o,Rc,o),Qa(s.localRotation,o,u),ad(s.localRotation,s.localRotation),this.dirtifyLocal(t,s)}}},{key:"rotateLocal",value:function(t,r){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0;typeof r=="number"&&(r=st(r,i,a));var s=t.transformable;_c(HE,r[0],r[1],r[2]),oE(s.localRotation,s.localRotation,HE),this.dirtifyLocal(t,s)}},{key:"setEulerAngles",value:function(t,r){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0;typeof r=="number"&&(r=st(r,i,a));var s=t.transformable;if(t.parentNode===null||!t.parentNode.transformable)this.setLocalEulerAngles(t,r);else{_c(s.localRotation,r[0],r[1],r[2]);var o=this.getRotation(t.parentNode);Sc(UE,W0(wa,o)),oE(s.localRotation,s.localRotation,UE),this.dirtifyLocal(t,s)}}},{key:"setLocalEulerAngles",value:function(t,r){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0,s=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!0;typeof r=="number"&&(r=st(r,i,a));var o=t.transformable;_c(o.localRotation,r[0],r[1],r[2]),s&&this.dirtifyLocal(t,o)}},{key:"translateLocal",value:function(t,r){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0;typeof r=="number"&&(r=st(r,i,a));var s=t.transformable;Au(r,Nc)||(qL(r,r,s.localRotation),Ja(s.localPosition,s.localPosition,r),this.dirtifyLocal(t,s))}},{key:"setPosition",value:function(t,r){var i,a=t.transformable;if(xs[0]=r[0],xs[1]=r[1],xs[2]=(i=r[2])!==null&&i!==void 0?i:0,!Au(this.getPosition(t),xs)){if(_i(a.position,xs),t.parentNode===null||!t.parentNode.transformable)_i(a.localPosition,xs);else{var s=t.parentNode.transformable;Qo(Dc,s.worldTransform),Ei(Dc,Dc),Mn(a.localPosition,xs,Dc)}this.dirtifyLocal(t,a)}}},{key:"setLocalPosition",value:function(t,r){var i,a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,s=t.transformable;Ou[0]=r[0],Ou[1]=r[1],Ou[2]=(i=r[2])!==null&&i!==void 0?i:0,!Au(s.localPosition,Ou)&&(_i(s.localPosition,Ou),a&&this.dirtifyLocal(t,s))}},{key:"scaleLocal",value:function(t,r){var i,a=t.transformable;FL(a.localScale,a.localScale,An(xa,r[0],r[1],(i=r[2])!==null&&i!==void 0?i:1)),this.dirtifyLocal(t,a)}},{key:"setLocalScale",value:function(t,r){var i,a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,s=t.transformable;An(xa,r[0],r[1],(i=r[2])!==null&&i!==void 0?i:s.localScale[2]),!Au(xa,s.localScale)&&(_i(s.localScale,xa),a&&this.dirtifyLocal(t,s))}},{key:"translate",value:function(t,r){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0;typeof r=="number"&&(r=An(xa,r,i,a)),!Au(r,Nc)&&(Ja(xa,this.getPosition(t),r),this.setPosition(t,xa))}},{key:"setRotation",value:function(t,r,i,a,s){var o=t.transformable;if(typeof r=="number"&&(r=YL(r,i,a,s)),t.parentNode===null||!t.parentNode.transformable)this.setLocalRotation(t,r);else{var u=this.getRotation(t.parentNode);Sc(wa,u),W0(wa,wa),Qa(o.localRotation,wa,r),ad(o.localRotation,o.localRotation),this.dirtifyLocal(t,o)}}},{key:"setLocalRotation",value:function(t,r,i,a,s){var o=arguments.length>5&&arguments[5]!==void 0?arguments[5]:!0;typeof r=="number"&&(r=sE(wa,r,i,a,s));var u=t.transformable;Sc(u.localRotation,r),o&&this.dirtifyLocal(t,u)}},{key:"setLocalSkew",value:function(t,r,i){var a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!0;typeof r=="number"&&(r=KL(kB,r,i));var s=t.transformable;XL(s.localSkew,r),a&&this.dirtifyLocal(t,s)}},{key:"dirtifyLocal",value:function(t,r){vd(t)||r.localDirtyFlag||(r.localDirtyFlag=!0,r.dirtyFlag||this.dirtifyWorld(t,r))}},{key:"dirtifyWorld",value:function(t,r){r.dirtyFlag||this.unfreezeParentToRoot(t),this.dirtifyWorldInternal(t,r),this.dirtifyToRoot(t,!0)}},{key:"dirtifyFragment",value:function(t){var r=t.transformable;r&&(r.frozen=!1,r.dirtyFlag=!0,r.localDirtyFlag=!0);var i=t.renderable;i&&(i.renderBoundsDirty=!0,i.boundsDirty=!0,i.dirty=!0);for(var a=t.childNodes.length,s=0;s<a;s++)this.dirtifyFragment(t.childNodes[s]);t.nodeName===q.FRAGMENT&&this.pendingEvents.set(t,!1)}},{key:"triggerPendingEvents",value:function(){var t=this,r=new Set,i=function(s,o){!s.isConnected||r.has(s)||s.nodeName===q.FRAGMENT||(t.boundsChangedEvent.detail=o,t.boundsChangedEvent.target=s,s.isMutationObserved?s.dispatchEvent(t.boundsChangedEvent):s.ownerDocument.defaultView.dispatchEvent(t.boundsChangedEvent,!0),r.add(s))};this.pendingEvents.forEach(function(a,s){s.nodeName!==q.FRAGMENT&&(og.affectChildren=a,a?s.forEach(function(o){i(o,og)}):i(s,og))}),r.clear(),this.clearPendingEvents()}},{key:"clearPendingEvents",value:function(){this.pendingEvents.clear()}},{key:"dirtifyToRoot",value:function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,i=t;for(i.renderable&&(i.renderable.dirty=!0);i;)VE(i),i=i.parentNode;r&&t.forEach(function(a){VE(a)}),this.informDependentDisplayObjects(t),this.pendingEvents.set(t,r)}},{key:"updateDisplayObjectDependency",value:function(t,r,i,a){if(r&&r!==i){var s=this.displayObjectDependencyMap.get(r);if(s&&s[t]){var o=s[t].indexOf(a);s[t].splice(o,1)}}if(i){var u=this.displayObjectDependencyMap.get(i);u||(this.displayObjectDependencyMap.set(i,{}),u=this.displayObjectDependencyMap.get(i)),u[t]||(u[t]=[]),u[t].push(a)}}},{key:"informDependentDisplayObjects",value:function(t){var r=this,i=this.displayObjectDependencyMap.get(t);i&&Object.keys(i).forEach(function(a){i[a].forEach(function(s){r.dirtifyToRoot(s,!0),s.dispatchEvent(new Pi(De.ATTR_MODIFIED,s,r,r,a,Pi.MODIFICATION,r,r)),s.isCustomElement&&s.isConnected&&s.attributeChangedCallback&&s.attributeChangedCallback(a,r,r)})})}},{key:"getPosition",value:function(t){var r=t.transformable;return nd(r.position,this.getWorldTransform(t,r))}},{key:"getRotation",value:function(t){var r=t.transformable;return rd(r.rotation,this.getWorldTransform(t,r))}},{key:"getScale",value:function(t){var r=t.transformable;return eu(r.scaling,this.getWorldTransform(t,r))}},{key:"getWorldTransform",value:function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:t.transformable;return!r.localDirtyFlag&&!r.dirtyFlag||(t.parentNode&&t.parentNode.transformable&&this.getWorldTransform(t.parentNode),this.sync(t,r)),r.worldTransform}},{key:"getLocalPosition",value:function(t){return t.transformable.localPosition}},{key:"getLocalRotation",value:function(t){return t.transformable.localRotation}},{key:"getLocalScale",value:function(t){return t.transformable.localScale}},{key:"getLocalSkew",value:function(t){return t.transformable.localSkew}},{key:"calcLocalTransform",value:function(t){var r=t.localSkew[0]!==0||t.localSkew[1]!==0;if(r){ol(t.localTransform,t.localRotation,t.localPosition,st(1,1,1),t.origin),(t.localSkew[0]!==0||t.localSkew[1]!==0)&&(is(xo),xo[4]=Math.tan(t.localSkew[0]),xo[1]=Math.tan(t.localSkew[1]),On(t.localTransform,t.localTransform,xo));var i=ol(xo,sE(wa,0,0,0,1),An(xa,1,1,1),t.localScale,t.origin);On(t.localTransform,t.localTransform,i)}else{var a=t.localTransform,s=t.localPosition,o=t.localRotation,u=t.localScale,l=t.origin,c=s[0]!==0||s[1]!==0||s[2]!==0,h=o[3]!==1||o[0]!==0||o[1]!==0||o[2]!==0,d=u[0]!==1||u[1]!==1||u[2]!==1,f=l[0]!==0||l[1]!==0||l[2]!==0;!h&&!d&&!f?c?Ia(a,s):is(a):ol(a,o,s,u,l)}}},{key:"getLocalTransform",value:function(t){var r=t.transformable;return r.localDirtyFlag&&(this.calcLocalTransform(r),r.localDirtyFlag=!1),r.localTransform}},{key:"setLocalTransform",value:function(t,r){var i=nd(CB,r),a=rd(AB,r),s=eu(TB,r);this.setLocalScale(t,s,!1),this.setLocalPosition(t,i,!1),this.setLocalRotation(t,a,void 0,void 0,void 0,!1),this.dirtifyLocal(t,t.transformable)}},{key:"resetLocalTransform",value:function(t){this.setLocalScale(t,_B,!1),this.setLocalPosition(t,Nc,!1),this.setLocalEulerAngles(t,Nc,void 0,void 0,!1),this.setLocalSkew(t,EB,void 0,!1),this.dirtifyLocal(t,t.transformable)}},{key:"getTransformedGeometryBounds",value:function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,i=arguments.length>2?arguments[2]:void 0,a=this.getGeometryBounds(t,r);if(!rt.isEmpty(a)){var s=i||new rt;return s.setFromTransformedAABB(a,this.getWorldTransform(t)),s}return null}},{key:"getGeometryBounds",value:function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,i=t,a=i.geometry;a.dirty&&X.styleValueRegistry.updateGeometry(t);var s=r?a.renderBounds:a.contentBounds||null;return s||new rt}},{key:"getBounds",value:function(t){var r=this,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,a=t,s=a.renderable;if(!s.boundsDirty&&!i&&s.bounds)return s.bounds;if(!s.renderBoundsDirty&&i&&s.renderBounds)return s.renderBounds;var o=i?s.renderBounds:s.bounds,u=this.getTransformedGeometryBounds(t,i,o),l=t.childNodes;if(l.forEach(function(d){var f=r.getBounds(d,i);f&&(u?u.add(f):(u=o||new rt,u.update(f.center,f.halfExtents)))}),u||(u=new rt),i){var c=FM(t);if(c){var h=c.parsedStyle.clipPath.getBounds(i);u?h&&(u=h.intersection(u)):u.update(h.center,h.halfExtents)}}return i?(s.renderBounds=u,s.renderBoundsDirty=!1):(s.bounds=u,s.boundsDirty=!1),u}},{key:"getLocalBounds",value:function(t){if(t.parentNode){var r=SB;t.parentNode.transformable&&(r=Ei(xo,this.getWorldTransform(t.parentNode)));var i=this.getBounds(t);if(!rt.isEmpty(i)){var a=new rt;return a.setFromTransformedAABB(i,r),a}}return this.getBounds(t)}},{key:"getBoundingClientRect",value:function(t){var r,i,a=this.getGeometryBounds(t);rt.isEmpty(a)||(i=new rt,i.setFromTransformedAABB(a,this.getWorldTransform(t)));var s=(r=t.ownerDocument)===null||r===void 0||(r=r.defaultView)===null||r===void 0?void 0:r.getContextService().getBoundingClientRect();if(i){var o=i.getMin(),u=Ee(o,2),l=u[0],c=u[1],h=i.getMax(),d=Ee(h,2),f=d[0],g=d[1];return new ru(l+((s==null?void 0:s.left)||0),c+((s==null?void 0:s.top)||0),f-l,g-c)}return new ru((s==null?void 0:s.left)||0,(s==null?void 0:s.top)||0,0,0)}},{key:"dirtifyWorldInternal",value:function(t,r){var i=this;if(!r.dirtyFlag){r.dirtyFlag=!0,r.frozen=!1,t.childNodes.forEach(function(o){var u=o.transformable;u.dirtyFlag||i.dirtifyWorldInternal(o,u)});var a=t,s=a.renderable;s&&(s.renderBoundsDirty=!0,s.boundsDirty=!0,s.dirty=!0)}}},{key:"syncHierarchy",value:function(t){var r=t.transformable;if(!r.frozen){r.frozen=!0,(r.localDirtyFlag||r.dirtyFlag)&&this.sync(t,r);for(var i=t.childNodes,a=0;a<i.length;a++)this.syncHierarchy(i[a])}}},{key:"sync",value:function(t,r){if(r.localDirtyFlag&&(this.calcLocalTransform(r),r.localDirtyFlag=!1),r.dirtyFlag){var i=t.parentNode,a=i&&i.transformable;i===null||!a?Qo(r.worldTransform,r.localTransform):On(r.worldTransform,a.worldTransform,r.localTransform),r.dirtyFlag=!1}}},{key:"unfreezeParentToRoot",value:function(t){for(var r=t.parentNode;r;){var i=r.transformable;i&&(i.frozen=!1),r=r.parentNode}}}])}(),ws={MetricsString:"|ÉqÅ",BaselineSymbol:"M",BaselineMultiplier:1.4,HeightMultiplier:2,Newlines:[10,13],BreakingSpaces:[9,32,8192,8193,8194,8195,8196,8197,8198,8200,8201,8202,8287,12288]},YE=/[a-zA-Z0-9\u00C0-\u00D6\u00D8-\u00f6\u00f8-\u00ff!"#$%&'()*+,-./:;]/,MB=/[!%),.:;?\]}¢°·'""†‡›℃∶、。〃〆〕〗〞﹚﹜！＂％＇），．：；？！］｝～]/,PB=/[$(£¥·'"〈《「『【〔〖〝﹙﹛＄（．［｛￡￥]/,NB=/[!),.:;?\]}¢·–—'"•"、。〆〞〕〉》」︰︱︲︳﹐﹑﹒﹓﹔﹕﹖﹘﹚﹜！），．：；？︶︸︺︼︾﹀﹂﹗］｜｝､]/,DB=/[([{£¥'"‵〈《「『〔〝︴﹙﹛（｛︵︷︹︻︽︿﹁﹃﹏]/,RB=/[)\]｝〕〉》」』】〙〗〟'"｠»ヽヾーァィゥェォッャュョヮヵヶぁぃぅぇぉっゃゅょゎゕゖㇰㇱㇲㇳㇴㇵㇶㇷㇸㇹㇺㇻㇼㇽㇾㇿ々〻‐゠–〜?!‼⁇⁈⁉・、:;,。.]/,LB=/[([｛〔〈《「『【〘〖〝'"｟«—...‥〳〴〵]/,IB=/[!%),.:;?\]}¢°'"†‡℃〆〈《「『〕！％），．：；？］｝]/,FB=/[$([{£¥'"々〇〉》」〔＄（［｛｠￥￦#]/,BB=new RegExp("".concat(MB.source,"|").concat(NB.source,"|").concat(RB.source,"|").concat(IB.source)),zB=new RegExp("".concat(PB.source,"|").concat(DB.source,"|").concat(LB.source,"|").concat(FB.source)),$B=function(){function n(e){var t=this;U(this,n),this.fontMetricsCache={},this.shouldBreakByKinsokuShorui=function(r,i){return t.isBreakingSpace(i)?!1:!!(r&&(zB.exec(i)||BB.exec(r)))},this.trimByKinsokuShorui=function(r){var i=at(r),a=i[i.length-2];if(!a)return r;var s=a[a.length-1];return i[i.length-2]=a.slice(0,-1),i[i.length-1]=s+i[i.length-1],i},this.runtime=e}return H(n,[{key:"measureFont",value:function(t,r){if(this.fontMetricsCache[t])return this.fontMetricsCache[t];var i={ascent:0,descent:0,fontSize:0},a=this.runtime.offscreenCanvasCreator.getOrCreateCanvas(r),s=this.runtime.offscreenCanvasCreator.getOrCreateContext(r,{willReadFrequently:!0});s.font=t;var o=ws.MetricsString+ws.BaselineSymbol,u=Math.ceil(s.measureText(o).width),l=Math.ceil(s.measureText(ws.BaselineSymbol).width),c=ws.HeightMultiplier*l;l=l*ws.BaselineMultiplier|0,a.width=u,a.height=c,s.fillStyle="#f00",s.fillRect(0,0,u,c),s.font=t,s.textBaseline="alphabetic",s.fillStyle="#000",s.fillText(o,0,l);var h=s.getImageData(0,0,u||1,c||1).data,d=h.length,f=u*4,g=0,p=0,v=!1;for(g=0;g<l;++g){for(var m=0;m<f;m+=4)if(h[p+m]!==255){v=!0;break}if(!v)p+=f;else break}for(i.ascent=l-g,p=d-f,v=!1,g=c;g>l;--g){for(var y=0;y<f;y+=4)if(h[p+y]!==255){v=!0;break}if(!v)p-=f;else break}return i.descent=g-l,i.fontSize=i.ascent+i.descent,this.fontMetricsCache[t]=i,i}},{key:"measureText",value:function(t,r,i){var a=r.fontSize,s=a===void 0?16:a,o=r.wordWrap,u=o===void 0?!1:o,l=r.lineHeight,c=r.lineWidth,h=c===void 0?1:c,d=r.textBaseline,f=d===void 0?"alphabetic":d,g=r.textAlign,p=g===void 0?"start":g,v=r.letterSpacing,m=v===void 0?0:v,y=r.textPath;r.textPathSide,r.textPathStartOffset;var b=r.leading,x=b===void 0?0:b,w=QF(r),E=this.measureFont(w,i);E.fontSize===0&&(E.fontSize=s,E.ascent=s);var _=this.runtime.offscreenCanvasCreator.getOrCreateContext(i);_.font=w,r.isOverflowing=!1;var S=u?this.wordWrap(t,r,i):t,C=S.split(/(?:\r\n|\r|\n)/),k=new Array(C.length),A=0;if(y){y.getTotalLength();for(var T=0;T<C.length;T++)_.measureText(C[T]).width+(C[T].length-1)*m}else{for(var O=0;O<C.length;O++){var P=_.measureText(C[O]).width+(C[O].length-1)*m;k[O]=P,A=Math.max(A,P)}var R=A+h,N=l||E.fontSize+h,D=Math.max(N,E.fontSize+h)+(C.length-1)*(N+x);N+=x;var M=0;return f==="middle"?M=-D/2:f==="bottom"||f==="alphabetic"||f==="ideographic"?M=-D:(f==="top"||f==="hanging")&&(M=0),{font:w,width:R,height:D,lines:C,lineWidths:k,lineHeight:N,maxLineWidth:A,fontProperties:E,lineMetrics:k.map(function(F,j){var B=0;return p==="center"||p==="middle"?B-=F/2:(p==="right"||p==="end")&&(B-=F),new ru(B-h/2,M+j*N,F+h,N)})}}}},{key:"wordWrap",value:function(t,r,i){var a=this,s=this,o=r.wordWrapWidth,u=o===void 0?0:o,l=r.letterSpacing,c=l===void 0?0:l,h=r.maxLines,d=h===void 0?1/0:h,f=r.textOverflow,g=this.runtime.offscreenCanvasCreator.getOrCreateContext(i),p=u+c,v="";f==="ellipsis"?v="...":f&&f!=="clip"&&(v=f);var m=Array.from(t),y=[],b=0,x=0,w=0,E={},_=function(M){return a.getFromCache(M,c,E,g)},S=_(v);function C(D,M,F,j){for(;_(D)<j&&M<m.length-1&&!s.isNewline(m[M+1]);)M+=1,D+=m[M];for(;_(D)>j&&M>F;)M-=1,D=D.slice(0,-1);return{lineTxt:D,txtLastCharIndex:M}}function k(D,M){if(!(S<=0||S>p)){if(!y[D]){y[D]=v;return}var F=C(y[D],M,w+1,p-S);y[D]=F.lineTxt+v}}for(var A=0;A<m.length;A++){var T=m[A],O=m[A-1],P=m[A+1],R=_(T);if(this.isNewline(T)){if(b+1>=d){r.isOverflowing=!0,A<m.length-1&&k(b,A-1);break}w=A-1,b+=1,x=0,y[b]="";continue}if(x>0&&x+R>p){var N=C(y[b],A-1,w+1,p);if(N.txtLastCharIndex!==A-1){if(y[b]=N.lineTxt,N.txtLastCharIndex===m.length-1)break;A=N.txtLastCharIndex+1,T=m[A],O=m[A-1],P=m[A+1],R=_(T)}if(b+1>=d){r.isOverflowing=!0,k(b,A-1);break}if(w=A-1,b+=1,x=0,y[b]="",this.isBreakingSpace(T))continue;this.canBreakInLastChar(T)||(y=this.trimToBreakable(y),x=this.sumTextWidthByCache(y[b]||"",_)),this.shouldBreakByKinsokuShorui(T,P)&&(y=this.trimByKinsokuShorui(y),x+=_(O||""))}x+=R,y[b]=(y[b]||"")+T}return y.join(`
`)}},{key:"isBreakingSpace",value:function(t){return typeof t!="string"?!1:ws.BreakingSpaces.indexOf(t.charCodeAt(0))>=0}},{key:"isNewline",value:function(t){return typeof t!="string"?!1:ws.Newlines.indexOf(t.charCodeAt(0))>=0}},{key:"trimToBreakable",value:function(t){var r=at(t),i=r[r.length-2],a=this.findBreakableIndex(i);if(a===-1||!i)return r;var s=i.slice(a,a+1),o=this.isBreakingSpace(s),u=a+1,l=a+(o?0:1);return r[r.length-1]+=i.slice(u,i.length),r[r.length-2]=i.slice(0,l),r}},{key:"canBreakInLastChar",value:function(t){return!(t&&YE.test(t))}},{key:"sumTextWidthByCache",value:function(t,r){return t.split("").reduce(function(i,a){return i+r(a)},0)}},{key:"findBreakableIndex",value:function(t){for(var r=t.length-1;r>=0;r--)if(!YE.test(t[r]))return r;return-1}},{key:"getFromCache",value:function(t,r,i,a){var s=i[t];if(typeof s!="number"){var o=t.length*r,u=a.measureText(t);s=u.width+o,i[t]=s}return s}}])}(),X={},jB=function(n){var e=new dB,t=new hB;return n={},ae(ae(ae(ae(ae(ae(ae(ae(ae(ae(n,q.FRAGMENT,null),q.CIRCLE,new oB),q.ELLIPSE,new uB),q.RECT,e),q.IMAGE,e),q.GROUP,new gB),q.LINE,new lB),q.TEXT,new fB(X)),q.POLYLINE,t),q.POLYGON,t),ae(ae(ae(n,q.PATH,new cB),q.HTML,new pB),q.MESH,null)}(),qB=function(n){var e=new bF,t=new bb;return n={},ae(ae(ae(ae(ae(ae(ae(ae(ae(ae(n,J.PERCENTAGE,null),J.NUMBER,new SF),J.ANGLE,new mF),J.DEFINED_PATH,new yF),J.PAINT,e),J.COLOR,e),J.FILTER,new xF),J.LENGTH,t),J.LENGTH_PERCENTAGE,t),J.LENGTH_PERCENTAGE_12,new wF),ae(ae(ae(ae(ae(ae(ae(ae(ae(ae(n,J.LENGTH_PERCENTAGE_14,new EF),J.COORDINATE,new bb),J.OFFSET_DISTANCE,new kF),J.OPACITY_VALUE,new CF),J.PATH,new AF),J.LIST_OF_POINTS,new TF),J.SHADOW_BLUR,new OF),J.TEXT,new MF),J.TEXT_TRANSFORM,new PF),J.TRANSFORM,new iB),ae(ae(ae(n,J.TRANSFORM_ORIGIN,new aB),J.Z_INDEX,new sB),J.MARKER,new _F)}(),GB=function(){return typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{}};X.CameraContribution=mM;X.AnimationTimeline=null;X.EasingFunction=null;X.offscreenCanvasCreator=new ax;X.sceneGraphSelector=new xB;X.sceneGraphService=new OB(X);X.textService=new $B(X);X.geometryUpdaterFactory=jB;X.CSSPropertySyntaxFactory=qB;X.styleValueRegistry=new pF(X);X.layoutRegistry=null;X.globalThis=GB();X.enableStyleSyntax=!0;X.enableSizeAttenuation=!1;var WB=0,Eb=new Pi(De.INSERTED,null,"","","",0,"",""),_b=new Pi(De.REMOVED,null,"","","",0,"",""),VM=new It(De.DESTROY),VB=function(n){function e(){var t;U(this,e);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return t=Te(this,e,[].concat(i)),t.entity=WB++,t.renderable={bounds:void 0,boundsDirty:!0,renderBounds:void 0,renderBoundsDirty:!0,dirtyRenderBounds:void 0,dirty:!1},t.cullable={strategy:Z9.Standard,visibilityPlaneMask:-1,visible:!0,enable:!0},t.transformable={dirtyFlag:!1,localDirtyFlag:!1,frozen:!1,localPosition:[0,0,0],localRotation:[0,0,0,1],localScale:[1,1,1],localTransform:[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],localSkew:[0,0],position:[0,0,0],rotation:[0,0,0,1],scaling:[1,1,1],worldTransform:[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],origin:[0,0,0]},t.sortable={dirty:!1,sorted:void 0,renderOrder:0,dirtyChildren:[],dirtyReason:void 0},t.geometry={contentBounds:void 0,renderBounds:void 0,dirty:!0},t.rBushNode={aabb:void 0},t.namespaceURI="g",t.scrollLeft=0,t.scrollTop=0,t.clientTop=0,t.clientLeft=0,t.destroyed=!1,t.style={},t.computedStyle={},t.parsedStyle={},t.attributes={},t}return Oe(e,n),H(e,[{key:"className",get:function(){return this.getAttribute("class")||""},set:function(r){this.setAttribute("class",r)}},{key:"classList",get:function(){return this.className.split(" ").filter(function(r){return r!==""})}},{key:"tagName",get:function(){return this.nodeName}},{key:"children",get:function(){return this.childNodes}},{key:"childElementCount",get:function(){return this.childNodes.length}},{key:"firstElementChild",get:function(){return this.firstChild}},{key:"lastElementChild",get:function(){return this.lastChild}},{key:"parentElement",get:function(){return this.parentNode}},{key:"nextSibling",get:function(){if(this.parentNode){var r=this.parentNode.childNodes.indexOf(this);return this.parentNode.childNodes[r+1]||null}return null}},{key:"previousSibling",get:function(){if(this.parentNode){var r=this.parentNode.childNodes.indexOf(this);return this.parentNode.childNodes[r-1]||null}return null}},{key:"cloneNode",value:function(r){throw new Error(He)}},{key:"appendChild",value:function(r,i){var a;if(r.destroyed)throw new Error($9);return X.sceneGraphService.attach(r,this,i),(a=this.ownerDocument)!==null&&a!==void 0&&a.defaultView&&(!vd(this)&&r.nodeName===q.FRAGMENT?this.ownerDocument.defaultView.mountFragment(r):this.ownerDocument.defaultView.mountChildren(r)),this.isMutationObserved&&(Eb.relatedNode=this,r.dispatchEvent(Eb)),r}},{key:"insertBefore",value:function(r,i){if(!i)this.appendChild(r);else{r.parentElement&&r.parentElement.removeChild(r);var a=this.childNodes.indexOf(i);a===-1?this.appendChild(r):this.appendChild(r,a)}return r}},{key:"replaceChild",value:function(r,i){var a=this.childNodes.indexOf(i);return this.removeChild(i),this.appendChild(r,a),i}},{key:"removeChild",value:function(r){var i;return _b.relatedNode=this,r.dispatchEvent(_b),(i=r.ownerDocument)!==null&&i!==void 0&&i.defaultView&&r.ownerDocument.defaultView.unmountChildren(r),X.sceneGraphService.detach(r),r}},{key:"removeChildren",value:function(){for(var r=this.childNodes.length-1;r>=0;r--){var i=this.childNodes[r];this.removeChild(i)}}},{key:"destroyChildren",value:function(){for(var r=this.childNodes.length-1;r>=0;r--){var i=this.childNodes[r];i.childNodes.length>0&&i.destroyChildren(),i.destroy()}}},{key:"matches",value:function(r){return X.sceneGraphService.matches(r,this)}},{key:"getElementById",value:function(r){return X.sceneGraphService.querySelector("#".concat(r),this)}},{key:"getElementsByName",value:function(r){return X.sceneGraphService.querySelectorAll('[name="'.concat(r,'"]'),this)}},{key:"getElementsByClassName",value:function(r){return X.sceneGraphService.querySelectorAll(".".concat(r),this)}},{key:"getElementsByTagName",value:function(r){return X.sceneGraphService.querySelectorAll(r,this)}},{key:"querySelector",value:function(r){return X.sceneGraphService.querySelector(r,this)}},{key:"querySelectorAll",value:function(r){return X.sceneGraphService.querySelectorAll(r,this)}},{key:"closest",value:function(r){var i=this;do{if(X.sceneGraphService.matches(r,i))return i;i=i.parentElement}while(i!==null);return null}},{key:"find",value:function(r){var i=this,a=null;return this.forEach(function(s){return s!==i&&r(s)?(a=s,!1):!0}),a}},{key:"findAll",value:function(r){var i=this,a=[];return this.forEach(function(s){s!==i&&r(s)&&a.push(s)}),a}},{key:"after",value:function(){var r=this;if(this.parentNode){for(var i=this.parentNode.childNodes.indexOf(this),a=arguments.length,s=new Array(a),o=0;o<a;o++)s[o]=arguments[o];s.forEach(function(u,l){var c;return(c=r.parentNode)===null||c===void 0?void 0:c.appendChild(u,i+l+1)})}}},{key:"before",value:function(){if(this.parentNode){for(var r,i=this.parentNode.childNodes.indexOf(this),a=arguments.length,s=new Array(a),o=0;o<a;o++)s[o]=arguments[o];var u=s[0],l=s.slice(1);this.parentNode.appendChild(u,i),(r=u).after.apply(r,at(l))}}},{key:"replaceWith",value:function(){this.after.apply(this,arguments),this.remove()}},{key:"append",value:function(){for(var r=this,i=arguments.length,a=new Array(i),s=0;s<i;s++)a[s]=arguments[s];a.forEach(function(o){return r.appendChild(o)})}},{key:"prepend",value:function(){for(var r=this,i=arguments.length,a=new Array(i),s=0;s<i;s++)a[s]=arguments[s];a.forEach(function(o,u){return r.appendChild(o,u)})}},{key:"replaceChildren",value:function(){for(;this.childNodes.length&&this.firstChild;)this.removeChild(this.firstChild);this.append.apply(this,arguments)}},{key:"remove",value:function(){return this.parentNode?this.parentNode.removeChild(this):this}},{key:"destroy",value:function(){this.destroyChildren(),this.dispatchEvent(VM),this.remove(),this.emitter.removeAllListeners(),this.destroyed=!0}},{key:"getGeometryBounds",value:function(){return X.sceneGraphService.getGeometryBounds(this)}},{key:"getRenderBounds",value:function(){return X.sceneGraphService.getBounds(this,!0)}},{key:"getBounds",value:function(){return X.sceneGraphService.getBounds(this)}},{key:"getLocalBounds",value:function(){return X.sceneGraphService.getLocalBounds(this)}},{key:"getBoundingClientRect",value:function(){return X.sceneGraphService.getBoundingClientRect(this)}},{key:"getClientRects",value:function(){return[this.getBoundingClientRect()]}},{key:"computedStyleMap",value:function(){return new Map(Object.entries(this.computedStyle))}},{key:"getAttributeNames",value:function(){return Object.keys(this.attributes)}},{key:"getAttribute",value:function(r){if(typeof r!="symbol"){var i=this.attributes[r];return i}}},{key:"hasAttribute",value:function(r){return this.getAttributeNames().includes(r)}},{key:"hasAttributes",value:function(){return!!this.getAttributeNames().length}},{key:"removeAttribute",value:function(r){this.setAttribute(r,null),delete this.attributes[r]}},{key:"setAttribute",value:function(r,i,a,s){this.attributes[r]=i}},{key:"getAttributeNS",value:function(r,i){throw new Error(He)}},{key:"getAttributeNode",value:function(r){throw new Error(He)}},{key:"getAttributeNodeNS",value:function(r,i){throw new Error(He)}},{key:"hasAttributeNS",value:function(r,i){throw new Error(He)}},{key:"removeAttributeNS",value:function(r,i){throw new Error(He)}},{key:"removeAttributeNode",value:function(r){throw new Error(He)}},{key:"setAttributeNS",value:function(r,i,a){throw new Error(He)}},{key:"setAttributeNode",value:function(r){throw new Error(He)}},{key:"setAttributeNodeNS",value:function(r){throw new Error(He)}},{key:"toggleAttribute",value:function(r,i){throw new Error(He)}}])}(yt);function je(n){return!!(n!=null&&n.nodeName)}var UB=X.globalThis.Proxy?X.globalThis.Proxy:function(){},mi=new Pi(De.ATTR_MODIFIED,null,null,null,null,Pi.MODIFICATION,null,null),Mu=Ie(),HB=Wt(),lt=function(n){function e(t){var r;return U(this,e),r=Te(this,e),r.isCustomElement=!1,r.isMutationObserved=!1,r.activeAnimations=[],r.config=t,r.id=t.id||"",r.name=t.name||"",(t.className||t.class)&&(r.className=t.className||t.class),r.nodeName=t.type||q.GROUP,t.initialParsedStyle&&Object.assign(r.parsedStyle,t.initialParsedStyle),r.initAttributes(t.style),X.enableStyleSyntax&&(r.style=new UB({setProperty:function(a,s){r.setAttribute(a,s)},getPropertyValue:function(a){return r.getAttribute(a)},removeProperty:function(a){r.removeAttribute(a)},item:function(){return""}},{get:function(a,s){return a[s]!==void 0?a[s]:r.getAttribute(s)},set:function(a,s,o){return r.setAttribute(s,o),!0}})),r}return Oe(e,n),H(e,[{key:"destroy",value:function(){fE(e,"destroy",this,3)([]),this.getAnimations().forEach(function(r){r.cancel()})}},{key:"cloneNode",value:function(r,i){var a=Ce({},this.attributes);for(var s in a){var o=a[s];je(o)&&s!=="clipPath"&&s!=="offsetPath"&&s!=="textPath"&&(a[s]=o.cloneNode(r)),i&&(a[s]=i(s,o))}var u=new this.constructor(Ce(Ce({},this.config),{},{style:a}));return u.setLocalTransform(this.getLocalTransform()),r&&this.children.forEach(function(l){if(!l.style.isMarker){var c=l.cloneNode(r);u.appendChild(c)}}),u}},{key:"initAttributes",value:function(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},i={forceUpdateGeometry:!0};X.styleValueRegistry.processProperties(this,r,i),this.renderable.dirty=!0}},{key:"setAttribute",value:function(r,i){var a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!0;me(i)||(a||i!==this.attributes[r])&&(this.internalSetAttribute(r,i,{memoize:s}),fE(e,"setAttribute",this,3)([r,i]))}},{key:"internalSetAttribute",value:function(r,i){var a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},s=this.renderable,o=this.attributes[r],u=this.parsedStyle[r];X.styleValueRegistry.processProperties(this,ae({},r,i),a),s.dirty=!0;var l=this.parsedStyle[r];if(this.isConnected&&(mi.relatedNode=this,mi.prevValue=o,mi.newValue=i,mi.attrName=r,mi.prevParsedValue=u,mi.newParsedValue=l,this.isMutationObserved?this.dispatchEvent(mi):(mi.target=this,this.ownerDocument.defaultView.dispatchEvent(mi,!0))),this.isCustomElement&&this.isConnected||!this.isCustomElement){var c,h;(c=(h=this).attributeChangedCallback)===null||c===void 0||c.call(h,r,o,i,u,l)}}},{key:"getBBox",value:function(){var r=this.getBounds(),i=r.getMin(),a=Ee(i,2),s=a[0],o=a[1],u=r.getMax(),l=Ee(u,2),c=l[0],h=l[1];return new ru(s,o,c-s,h-o)}},{key:"setOrigin",value:function(r){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0;return X.sceneGraphService.setOrigin(this,In(r,i,a,!1)),this}},{key:"getOrigin",value:function(){return X.sceneGraphService.getOrigin(this)}},{key:"setPosition",value:function(r){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0;return X.sceneGraphService.setPosition(this,In(r,i,a,!1)),this}},{key:"setLocalPosition",value:function(r){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0;return X.sceneGraphService.setLocalPosition(this,In(r,i,a,!1)),this}},{key:"translate",value:function(r){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0;return X.sceneGraphService.translate(this,In(r,i,a,!1)),this}},{key:"translateLocal",value:function(r){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0;return X.sceneGraphService.translateLocal(this,In(r,i,a,!1)),this}},{key:"getPosition",value:function(){return X.sceneGraphService.getPosition(this)}},{key:"getLocalPosition",value:function(){return X.sceneGraphService.getLocalPosition(this)}},{key:"scale",value:function(r,i,a){return this.scaleLocal(r,i,a)}},{key:"scaleLocal",value:function(r,i,a){return typeof r=="number"&&(i=i||r,a=a||r,r=In(r,i,a,!1)),X.sceneGraphService.scaleLocal(this,r),this}},{key:"setLocalScale",value:function(r,i,a){return typeof r=="number"&&(i=i||r,a=a||r,r=In(r,i,a,!1)),X.sceneGraphService.setLocalScale(this,r),this}},{key:"getLocalScale",value:function(){return X.sceneGraphService.getLocalScale(this)}},{key:"getScale",value:function(){return X.sceneGraphService.getScale(this)}},{key:"getEulerAngles",value:function(){var r=Z0(Mu,X.sceneGraphService.getWorldTransform(this)),i=Ee(r,3),a=i[2];return Yn(a)}},{key:"getLocalEulerAngles",value:function(){var r=Z0(Mu,X.sceneGraphService.getLocalRotation(this)),i=Ee(r,3),a=i[2];return Yn(a)}},{key:"setEulerAngles",value:function(r){return X.sceneGraphService.setEulerAngles(this,0,0,r),this}},{key:"setLocalEulerAngles",value:function(r){return X.sceneGraphService.setLocalEulerAngles(this,0,0,r),this}},{key:"rotateLocal",value:function(r,i,a){return de(i)&&de(a)?X.sceneGraphService.rotateLocal(this,0,0,r):X.sceneGraphService.rotateLocal(this,r,i,a),this}},{key:"rotate",value:function(r,i,a){return de(i)&&de(a)?X.sceneGraphService.rotate(this,0,0,r):X.sceneGraphService.rotate(this,r,i,a),this}},{key:"setRotation",value:function(r,i,a,s){return X.sceneGraphService.setRotation(this,r,i,a,s),this}},{key:"setLocalRotation",value:function(r,i,a,s){return X.sceneGraphService.setLocalRotation(this,r,i,a,s),this}},{key:"setLocalSkew",value:function(r,i){return X.sceneGraphService.setLocalSkew(this,r,i),this}},{key:"getRotation",value:function(){return X.sceneGraphService.getRotation(this)}},{key:"getLocalRotation",value:function(){return X.sceneGraphService.getLocalRotation(this)}},{key:"getLocalSkew",value:function(){return X.sceneGraphService.getLocalSkew(this)}},{key:"getLocalTransform",value:function(){return X.sceneGraphService.getLocalTransform(this)}},{key:"getWorldTransform",value:function(){return X.sceneGraphService.getWorldTransform(this)}},{key:"setLocalTransform",value:function(r){return X.sceneGraphService.setLocalTransform(this,r),this}},{key:"resetLocalTransform",value:function(){X.sceneGraphService.resetLocalTransform(this)}},{key:"getAnimations",value:function(){return this.activeAnimations}},{key:"animate",value:function(r,i){var a,s=(a=this.ownerDocument)===null||a===void 0?void 0:a.timeline;return s?s.play(this,r,i):null}},{key:"isVisible",value:function(){var r;return((r=this.parsedStyle)===null||r===void 0?void 0:r.visibility)!=="hidden"}},{key:"interactive",get:function(){return this.isInteractive()},set:function(r){this.style.pointerEvents=r?"auto":"none"}},{key:"isInteractive",value:function(){var r;return((r=this.parsedStyle)===null||r===void 0?void 0:r.pointerEvents)!=="none"}},{key:"isCulled",value:function(){return!!(this.cullable&&this.cullable.enable&&!this.cullable.visible)}},{key:"toFront",value:function(){return this.parentNode&&(this.style.zIndex=Math.max.apply(Math,at(this.parentNode.children.map(function(r){return Number(r.style.zIndex)})))+1),this}},{key:"toBack",value:function(){return this.parentNode&&(this.style.zIndex=Math.min.apply(Math,at(this.parentNode.children.map(function(r){return Number(r.style.zIndex)})))-1),this}},{key:"getConfig",value:function(){return this.config}},{key:"attr",value:function(){for(var r=this,i=arguments.length,a=new Array(i),s=0;s<i;s++)a[s]=arguments[s];var o=a[0],u=a[1];return o?Nt(o)?(Object.keys(o).forEach(function(l){r.setAttribute(l,o[l])}),this):a.length===2?(this.setAttribute(o,u),this):this.attributes[o]:this.attributes}},{key:"getMatrix",value:function(r){var i=r||this.getWorldTransform(),a=nd(Mu,i),s=Ee(a,2),o=s[0],u=s[1],l=eu(Mu,i),c=Ee(l,2),h=c[0],d=c[1],f=rd(HB,i),g=Z0(Mu,f),p=Ee(g,3),v=p[0],m=p[2];return U9(v||m,o,u,h,d)}},{key:"getLocalMatrix",value:function(){return this.getMatrix(this.getLocalTransform())}},{key:"setMatrix",value:function(r){var i=bE(r),a=Ee(i,5),s=a[0],o=a[1],u=a[2],l=a[3],c=a[4];this.setEulerAngles(c).setPosition(s,o).setLocalScale(u,l)}},{key:"setLocalMatrix",value:function(r){var i=bE(r),a=Ee(i,5),s=a[0],o=a[1],u=a[2],l=a[3],c=a[4];this.setLocalEulerAngles(c).setLocalPosition(s,o).setLocalScale(u,l)}},{key:"show",value:function(){this.forEach(function(r){r.style.visibility="visible"})}},{key:"hide",value:function(){this.forEach(function(r){r.style.visibility="hidden"})}},{key:"getCount",value:function(){return this.childElementCount}},{key:"getParent",value:function(){return this.parentElement}},{key:"getChildren",value:function(){return this.children}},{key:"getFirst",value:function(){return this.firstElementChild}},{key:"getLast",value:function(){return this.lastElementChild}},{key:"getChildByIndex",value:function(r){return this.children[r]||null}},{key:"add",value:function(r,i){return this.appendChild(r,i)}},{key:"set",value:function(r,i){this.config[r]=i}},{key:"get",value:function(r){return this.config[r]}},{key:"moveTo",value:function(r){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0;return this.setPosition(r,i,a),this}},{key:"move",value:function(r){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0;return this.setPosition(r,i,a),this}},{key:"setZIndex",value:function(r){return this.style.zIndex=r,this}}])}(VB);lt.PARSED_STYLE_LIST=new Set(["class","className","clipPath","cursor","display","draggable","droppable","fill","fillOpacity","fillRule","filter","increasedLineWidthForHitTesting","lineCap","lineDash","lineDashOffset","lineJoin","lineWidth","miterLimit","hitArea","offsetDistance","offsetPath","offsetX","offsetY","opacity","pointerEvents","shadowColor","shadowType","shadowBlur","shadowOffsetX","shadowOffsetY","stroke","strokeOpacity","strokeWidth","strokeLinecap","strokeLineJoin","strokeDasharray","strokeDashoffset","transform","transformOrigin","textTransform","visibility","zIndex"]);var pa=function(n){function e(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return U(this,e),Te(this,e,[Ce({type:q.CIRCLE},t)])}return Oe(e,n),H(e)}(lt);pa.PARSED_STYLE_LIST=new Set([].concat(at(lt.PARSED_STYLE_LIST),["cx","cy","cz","r","isBillboard","isSizeAttenuation"]));var YB=["style"],sx=function(n){function e(){var t,r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},i=r.style,a=to(r,YB);return U(this,e),t=Te(this,e,[Ce({style:i},a)]),t.isCustomElement=!0,t}return Oe(e,n),H(e)}(lt);sx.PARSED_STYLE_LIST=new Set(["class","className","clipPath","cursor","draggable","droppable","opacity","pointerEvents","transform","transformOrigin","zIndex","visibility"]);var Ql=function(n){function e(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return U(this,e),Te(this,e,[Ce({type:q.ELLIPSE},t)])}return Oe(e,n),H(e)}(lt);Ql.PARSED_STYLE_LIST=new Set([].concat(at(lt.PARSED_STYLE_LIST),["cx","cy","cz","rx","ry","isBillboard","isSizeAttenuation"]));var XB=function(n){function e(){return U(this,e),Te(this,e,[{type:q.FRAGMENT}])}return Oe(e,n),H(e)}(lt);XB.PARSED_STYLE_LIST=new Set(["class","className"]);var Yt=function(n){function e(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return U(this,e),Te(this,e,[Ce({type:q.GROUP},t)])}return Oe(e,n),H(e)}(lt);Yt.PARSED_STYLE_LIST=new Set(["class","className","clipPath","cursor","draggable","droppable","opacity","pointerEvents","transform","transformOrigin","zIndex","visibility"]);var KB=["style"],ec=function(n){function e(){var t,r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},i=r.style,a=to(r,KB);return U(this,e),t=Te(this,e,[Ce({type:q.HTML,style:i},a)]),t.cullable.enable=!1,t}return Oe(e,n),H(e,[{key:"getDomElement",value:function(){return this.parsedStyle.$el}},{key:"getClientRects",value:function(){return[this.getBoundingClientRect()]}},{key:"getLocalBounds",value:function(){if(this.parentNode){var r=Ei(nt(),this.parentNode.getWorldTransform()),i=this.getBounds();if(!rt.isEmpty(i)){var a=new rt;return a.setFromTransformedAABB(i,r),a}}return this.getBounds()}}])}(lt);ec.PARSED_STYLE_LIST=new Set([].concat(at(lt.PARSED_STYLE_LIST),["x","y","$el","innerHTML","width","height"]));var tc=function(n){function e(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return U(this,e),Te(this,e,[Ce({type:q.IMAGE},t)])}return Oe(e,n),H(e)}(lt);tc.PARSED_STYLE_LIST=new Set([].concat(at(lt.PARSED_STYLE_LIST),["x","y","z","src","width","height","isBillboard","billboardRotation","isSizeAttenuation","keepAspectRatio"]));var ZB=["style"],Ks=function(n){function e(){var t,r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},i=r.style,a=to(r,ZB);U(this,e),t=Te(this,e,[Ce({type:q.LINE,style:Ce({x1:0,y1:0,x2:0,y2:0,z1:0,z2:0},i)},a)]),t.markerStartAngle=0,t.markerEndAngle=0;var s=t.parsedStyle,o=s.markerStart,u=s.markerEnd;return o&&je(o)&&(t.markerStartAngle=o.getLocalEulerAngles(),t.appendChild(o)),u&&je(u)&&(t.markerEndAngle=u.getLocalEulerAngles(),t.appendChild(u)),t.transformMarker(!0),t.transformMarker(!1),t}return Oe(e,n),H(e,[{key:"attributeChangedCallback",value:function(r,i,a,s,o){r==="x1"||r==="y1"||r==="x2"||r==="y2"||r==="markerStartOffset"||r==="markerEndOffset"?(this.transformMarker(!0),this.transformMarker(!1)):r==="markerStart"?(s&&je(s)&&(this.markerStartAngle=0,s.remove()),o&&je(o)&&(this.markerStartAngle=o.getLocalEulerAngles(),this.appendChild(o),this.transformMarker(!0))):r==="markerEnd"&&(s&&je(s)&&(this.markerEndAngle=0,s.remove()),o&&je(o)&&(this.markerEndAngle=o.getLocalEulerAngles(),this.appendChild(o),this.transformMarker(!1)))}},{key:"transformMarker",value:function(r){var i=this.parsedStyle,a=i.markerStart,s=i.markerEnd,o=i.markerStartOffset,u=i.markerEndOffset,l=i.x1,c=i.x2,h=i.y1,d=i.y2,f=r?a:s;if(!(!f||!je(f))){var g=0,p,v,m,y,b,x;r?(m=l,y=h,p=c-l,v=d-h,b=o||0,x=this.markerStartAngle):(m=c,y=d,p=l-c,v=h-d,b=u||0,x=this.markerEndAngle),g=Math.atan2(v,p),f.setLocalEulerAngles(g*180/Math.PI+x),f.setLocalPosition(m+Math.cos(g)*b,y+Math.sin(g)*b)}}},{key:"getPoint",value:function(r){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,a=this.parsedStyle,s=a.x1,o=a.y1,u=a.x2,l=a.y2,c=gM(s,o,u,l,r),h=c.x,d=c.y,f=Mn(Ie(),st(h,d,0),i?this.getWorldTransform():this.getLocalTransform());return new gn(f[0],f[1])}},{key:"getPointAtLength",value:function(r){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;return this.getPoint(r/this.getTotalLength(),i)}},{key:"getTotalLength",value:function(){var r=this.parsedStyle,i=r.x1,a=r.y1,s=r.x2,o=r.y2;return fM(i,a,s,o)}}])}(lt);Ks.PARSED_STYLE_LIST=new Set([].concat(at(lt.PARSED_STYLE_LIST),["x1","y1","x2","y2","z1","z2","isBillboard","isSizeAttenuation","markerStart","markerEnd","markerStartOffset","markerEndOffset"]));var JB=["style"],fr=function(n){function e(){var t,r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},i=r.style,a=to(r,JB);U(this,e),t=Te(this,e,[Ce({type:q.PATH,style:i,initialParsedStyle:{miterLimit:4,d:Ce({},yM)}},a)]),t.markerStartAngle=0,t.markerEndAngle=0,t.markerMidList=[];var s=t.parsedStyle,o=s.markerStart,u=s.markerEnd,l=s.markerMid;return o&&je(o)&&(t.markerStartAngle=o.getLocalEulerAngles(),t.appendChild(o)),l&&je(l)&&t.placeMarkerMid(l),u&&je(u)&&(t.markerEndAngle=u.getLocalEulerAngles(),t.appendChild(u)),t.transformMarker(!0),t.transformMarker(!1),t}return Oe(e,n),H(e,[{key:"attributeChangedCallback",value:function(r,i,a,s,o){r==="d"?(this.transformMarker(!0),this.transformMarker(!1),this.placeMarkerMid(this.parsedStyle.markerMid)):r==="markerStartOffset"||r==="markerEndOffset"?(this.transformMarker(!0),this.transformMarker(!1)):r==="markerStart"?(s&&je(s)&&(this.markerStartAngle=0,s.remove()),o&&je(o)&&(this.markerStartAngle=o.getLocalEulerAngles(),this.appendChild(o),this.transformMarker(!0))):r==="markerEnd"?(s&&je(s)&&(this.markerEndAngle=0,s.remove()),o&&je(o)&&(this.markerEndAngle=o.getLocalEulerAngles(),this.appendChild(o),this.transformMarker(!1))):r==="markerMid"&&this.placeMarkerMid(o)}},{key:"transformMarker",value:function(r){var i=this.parsedStyle,a=i.markerStart,s=i.markerEnd,o=i.markerStartOffset,u=i.markerEndOffset,l=r?a:s;if(!(!l||!je(l))){var c=0,h,d,f,g,p,v;if(r){var m=this.getStartTangent(),y=Ee(m,2),b=y[0],x=y[1];f=x[0],g=x[1],h=b[0]-x[0],d=b[1]-x[1],p=o||0,v=this.markerStartAngle}else{var w=this.getEndTangent(),E=Ee(w,2),_=E[0],S=E[1];f=S[0],g=S[1],h=_[0]-S[0],d=_[1]-S[1],p=u||0,v=this.markerEndAngle}c=Math.atan2(d,h),l.setLocalEulerAngles(c*180/Math.PI+v),l.setLocalPosition(f+Math.cos(c)*p,g+Math.sin(c)*p)}}},{key:"placeMarkerMid",value:function(r){var i=this.parsedStyle.d.segments;if(this.markerMidList.forEach(function(c){c.remove()}),r&&je(r))for(var a=1;a<i.length-1;a++){var s=Ee(i[a].currentPoint,2),o=s[0],u=s[1],l=a===1?r:r.cloneNode(!0);this.markerMidList.push(l),this.appendChild(l),l.setLocalPosition(o,u)}}},{key:"getTotalLength",value:function(){return mb(this)}},{key:"getPointAtLength",value:function(r){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,a=this.parsedStyle.d.absolutePath,s=p9(a,r),o=s.x,u=s.y,l=Mn(Ie(),st(o,u,0),i?this.getWorldTransform():this.getLocalTransform());return new gn(l[0],l[1])}},{key:"getPoint",value:function(r){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;return this.getPointAtLength(r*mb(this),i)}},{key:"getStartTangent",value:function(){var r=this.parsedStyle.d.segments,i=[];if(r.length>1){var a=r[0].currentPoint,s=r[1].currentPoint,o=r[1].startTangent;i=[],o?(i.push([a[0]-o[0],a[1]-o[1]]),i.push([a[0],a[1]])):(i.push([s[0],s[1]]),i.push([a[0],a[1]]))}return i}},{key:"getEndTangent",value:function(){var r=this.parsedStyle.d.segments,i=r.length,a=[];if(i>1){var s=r[i-2].currentPoint,o=r[i-1].currentPoint,u=r[i-1].endTangent;a=[],u?(a.push([o[0]-u[0],o[1]-u[1]]),a.push([o[0],o[1]])):(a.push([s[0],s[1]]),a.push([o[0],o[1]]))}return a}}])}(lt);fr.PARSED_STYLE_LIST=new Set([].concat(at(lt.PARSED_STYLE_LIST),["d","markerStart","markerMid","markerEnd","markerStartOffset","markerEndOffset","isBillboard","isSizeAttenuation"]));var QB=["style"],ro=function(n){function e(){var t,r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},i=r.style,a=to(r,QB);U(this,e),t=Te(this,e,[Ce({type:q.POLYGON,style:i,initialParsedStyle:{points:{points:[],totalLength:0,segments:[]},miterLimit:4,isClosed:!0}},a)]),t.markerStartAngle=0,t.markerEndAngle=0,t.markerMidList=[];var s=t.parsedStyle,o=s.markerStart,u=s.markerEnd,l=s.markerMid;return o&&je(o)&&(t.markerStartAngle=o.getLocalEulerAngles(),t.appendChild(o)),l&&je(l)&&t.placeMarkerMid(l),u&&je(u)&&(t.markerEndAngle=u.getLocalEulerAngles(),t.appendChild(u)),t.transformMarker(!0),t.transformMarker(!1),t}return Oe(e,n),H(e,[{key:"attributeChangedCallback",value:function(r,i,a,s,o){r==="points"?(this.transformMarker(!0),this.transformMarker(!1),this.placeMarkerMid(this.parsedStyle.markerMid)):r==="markerStartOffset"||r==="markerEndOffset"?(this.transformMarker(!0),this.transformMarker(!1)):r==="markerStart"?(s&&je(s)&&(this.markerStartAngle=0,s.remove()),o&&je(o)&&(this.markerStartAngle=o.getLocalEulerAngles(),this.appendChild(o),this.transformMarker(!0))):r==="markerEnd"?(s&&je(s)&&(this.markerEndAngle=0,s.remove()),o&&je(o)&&(this.markerEndAngle=o.getLocalEulerAngles(),this.appendChild(o),this.transformMarker(!1))):r==="markerMid"&&this.placeMarkerMid(o)}},{key:"transformMarker",value:function(r){var i=this.parsedStyle,a=i.markerStart,s=i.markerEnd,o=i.markerStartOffset,u=i.markerEndOffset,l=i.points,c=l||{},h=c.points,d=r?a:s;if(!(!d||!je(d)||!h)){var f=0,g,p,v,m,y,b;if(v=h[0][0],m=h[0][1],r)g=h[1][0]-h[0][0],p=h[1][1]-h[0][1],y=o||0,b=this.markerStartAngle;else{var x=h.length;this.parsedStyle.isClosed?(g=h[x-1][0]-h[0][0],p=h[x-1][1]-h[0][1]):(v=h[x-1][0],m=h[x-1][1],g=h[x-2][0]-h[x-1][0],p=h[x-2][1]-h[x-1][1]),y=u||0,b=this.markerEndAngle}f=Math.atan2(p,g),d.setLocalEulerAngles(f*180/Math.PI+b),d.setLocalPosition(v+Math.cos(f)*y,m+Math.sin(f)*y)}}},{key:"placeMarkerMid",value:function(r){var i=this.parsedStyle.points,a=i||{},s=a.points;if(this.markerMidList.forEach(function(h){h.remove()}),this.markerMidList=[],r&&je(r)&&s)for(var o=1;o<(this.parsedStyle.isClosed?s.length:s.length-1);o++){var u=s[o][0],l=s[o][1],c=o===1?r:r.cloneNode(!0);this.markerMidList.push(c),this.appendChild(c),c.setLocalPosition(u,l)}}}])}(lt);ro.PARSED_STYLE_LIST=new Set([].concat(at(lt.PARSED_STYLE_LIST),["points","markerStart","markerMid","markerEnd","markerStartOffset","markerEndOffset","isClosed","isBillboard","isSizeAttenuation"]));var ez=["style"],af=function(n){function e(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},r=t.style,i=to(t,ez);return U(this,e),Te(this,e,[Ce({type:q.POLYLINE,style:r,initialParsedStyle:{points:{points:[],totalLength:0,segments:[]},miterLimit:4,isClosed:!1}},i)])}return Oe(e,n),H(e,[{key:"getTotalLength",value:function(){return U7(this)}},{key:"getPointAtLength",value:function(r){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;return this.getPoint(r/this.getTotalLength(),i)}},{key:"getPoint",value:function(r){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,a=this.parsedStyle.points.points;if(this.parsedStyle.points.segments.length===0){var s=[],o=0,u,l,c=this.getTotalLength();a.forEach(function(m,y){a[y+1]&&(u=[0,0],u[0]=o/c,l=fM(m[0],m[1],a[y+1][0],a[y+1][1]),o+=l,u[1]=o/c,s.push(u))}),this.parsedStyle.points.segments=s}var h=0,d=0;this.parsedStyle.points.segments.forEach(function(m,y){r>=m[0]&&r<=m[1]&&(h=(r-m[0])/(m[1]-m[0]),d=y)});var f=gM(a[d][0],a[d][1],a[d+1][0],a[d+1][1],h),g=f.x,p=f.y,v=Mn(Ie(),st(g,p,0),i?this.getWorldTransform():this.getLocalTransform());return new gn(v[0],v[1])}},{key:"getStartTangent",value:function(){var r=this.parsedStyle.points.points,i=[];return i.push([r[1][0],r[1][1]]),i.push([r[0][0],r[0][1]]),i}},{key:"getEndTangent",value:function(){var r=this.parsedStyle.points.points,i=r.length-1,a=[];return a.push([r[i-1][0],r[i-1][1]]),a.push([r[i][0],r[i][1]]),a}}])}(ro);af.PARSED_STYLE_LIST=new Set([].concat(at(ro.PARSED_STYLE_LIST),["points","markerStart","markerMid","markerEnd","markerStartOffset","markerEndOffset","isBillboard"]));var mn=function(n){function e(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return U(this,e),Te(this,e,[Ce({type:q.RECT},t)])}return Oe(e,n),H(e)}(lt);mn.PARSED_STYLE_LIST=new Set([].concat(at(lt.PARSED_STYLE_LIST),["x","y","z","width","height","isBillboard","isSizeAttenuation","radius"]));var tz=["style"],io=function(n){function e(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},r=t.style,i=to(t,tz);return U(this,e),Te(this,e,[Ce({type:q.TEXT,style:Ce({fill:"black"},r)},i)])}return Oe(e,n),H(e,[{key:"getComputedTextLength",value:function(){var r;return this.getGeometryBounds(),((r=this.parsedStyle.metrics)===null||r===void 0?void 0:r.maxLineWidth)||0}},{key:"getLineBoundingRects",value:function(){var r;return this.getGeometryBounds(),((r=this.parsedStyle.metrics)===null||r===void 0?void 0:r.lineMetrics)||[]}},{key:"isOverflowing",value:function(){return this.getGeometryBounds(),!!this.parsedStyle.isOverflowing}}])}(lt);io.PARSED_STYLE_LIST=new Set([].concat(at(lt.PARSED_STYLE_LIST),["x","y","z","isBillboard","billboardRotation","isSizeAttenuation","text","textAlign","textBaseline","fontStyle","fontSize","fontFamily","fontWeight","fontVariant","lineHeight","letterSpacing","leading","wordWrap","wordWrapWidth","maxLines","textOverflow","isOverflowing","textPath","textDecorationLine","textDecorationColor","textDecorationStyle","textPathSide","textPathStartOffset","metrics","dx","dy"]));var nz=function(){function n(){U(this,n),this.registry={},this.define(q.CIRCLE,pa),this.define(q.ELLIPSE,Ql),this.define(q.RECT,mn),this.define(q.IMAGE,tc),this.define(q.LINE,Ks),this.define(q.GROUP,Yt),this.define(q.PATH,fr),this.define(q.POLYGON,ro),this.define(q.POLYLINE,af),this.define(q.TEXT,io),this.define(q.HTML,ec)}return H(n,[{key:"define",value:function(t,r){this.registry[t]=r}},{key:"get",value:function(t){return this.registry[t]}}])}(),UM=function(n){function e(){var t;U(this,e),t=Te(this,e),t.defaultView=null,t.ownerDocument=null,t.nodeName="document";try{t.timeline=new X.AnimationTimeline(t)}catch{}var r={};return nx.forEach(function(i){var a=i.n,s=i.inh,o=i.d;s&&o&&(r[a]=se(o)?o(q.GROUP):o)}),t.documentElement=new Yt({id:"g-root",style:r}),t.documentElement.ownerDocument=t,t.documentElement.parentNode=t,t.childNodes=[t.documentElement],t}return Oe(e,n),H(e,[{key:"children",get:function(){return this.childNodes}},{key:"childElementCount",get:function(){return this.childNodes.length}},{key:"firstElementChild",get:function(){return this.firstChild}},{key:"lastElementChild",get:function(){return this.lastChild}},{key:"createElement",value:function(r,i){if(r==="svg")return this.documentElement;var a=this.defaultView.customElements.get(r);a||(console.warn("Unsupported tagName: ",r),a=r==="tspan"?io:Yt);var s=new a(i);return s.ownerDocument=this,s}},{key:"createElementNS",value:function(r,i,a){return this.createElement(i,a)}},{key:"cloneNode",value:function(r){throw new Error(He)}},{key:"destroy",value:function(){try{this.documentElement.destroyChildren(),this.timeline.destroy()}catch{}}},{key:"elementsFromBBox",value:function(r,i,a,s){var o=this.defaultView.context.rBushRoot,u=o.search({minX:r,minY:i,maxX:a,maxY:s}),l=[];return u.forEach(function(c){var h=c.displayObject,d=h.parsedStyle.pointerEvents,f=d===void 0?"auto":d,g=["auto","visiblepainted","visiblefill","visiblestroke","visible"].includes(f);(!g||g&&h.isVisible())&&!h.isCulled()&&h.isInteractive()&&l.push(h)}),l.sort(function(c,h){return h.sortable.renderOrder-c.sortable.renderOrder}),l}},{key:"elementFromPointSync",value:function(r,i){var a=this.defaultView.canvas2Viewport({x:r,y:i}),s=a.x,o=a.y,u=this.defaultView.getConfig(),l=u.width,c=u.height;if(s<0||o<0||s>l||o>c)return null;var h=this.defaultView.viewport2Client({x:s,y:o}),d=h.x,f=h.y,g=this.defaultView.getRenderingService().hooks.pickSync.call({topmost:!0,position:{x:r,y:i,viewportX:s,viewportY:o,clientX:d,clientY:f},picked:[]}),p=g.picked;return p&&p[0]||this.documentElement}},{key:"elementFromPoint",value:function(){var t=as(vn().mark(function i(a,s){var o,u,l,c,h,d,f,g,p,v,m;return vn().wrap(function(b){for(;;)switch(b.prev=b.next){case 0:if(o=this.defaultView.canvas2Viewport({x:a,y:s}),u=o.x,l=o.y,c=this.defaultView.getConfig(),h=c.width,d=c.height,!(u<0||l<0||u>h||l>d)){b.next=4;break}return b.abrupt("return",null);case 4:return f=this.defaultView.viewport2Client({x:u,y:l}),g=f.x,p=f.y,b.next=7,this.defaultView.getRenderingService().hooks.pick.promise({topmost:!0,position:{x:a,y:s,viewportX:u,viewportY:l,clientX:g,clientY:p},picked:[]});case 7:return v=b.sent,m=v.picked,b.abrupt("return",m&&m[0]||this.documentElement);case 10:case"end":return b.stop()}},i,this)}));function r(i,a){return t.apply(this,arguments)}return r}()},{key:"elementsFromPointSync",value:function(r,i){var a=this.defaultView.canvas2Viewport({x:r,y:i}),s=a.x,o=a.y,u=this.defaultView.getConfig(),l=u.width,c=u.height;if(s<0||o<0||s>l||o>c)return[];var h=this.defaultView.viewport2Client({x:s,y:o}),d=h.x,f=h.y,g=this.defaultView.getRenderingService().hooks.pickSync.call({topmost:!1,position:{x:r,y:i,viewportX:s,viewportY:o,clientX:d,clientY:f},picked:[]}),p=g.picked;return p[p.length-1]!==this.documentElement&&p.push(this.documentElement),p}},{key:"elementsFromPoint",value:function(){var t=as(vn().mark(function i(a,s){var o,u,l,c,h,d,f,g,p,v,m;return vn().wrap(function(b){for(;;)switch(b.prev=b.next){case 0:if(o=this.defaultView.canvas2Viewport({x:a,y:s}),u=o.x,l=o.y,c=this.defaultView.getConfig(),h=c.width,d=c.height,!(u<0||l<0||u>h||l>d)){b.next=4;break}return b.abrupt("return",[]);case 4:return f=this.defaultView.viewport2Client({x:u,y:l}),g=f.x,p=f.y,b.next=7,this.defaultView.getRenderingService().hooks.pick.promise({topmost:!1,position:{x:a,y:s,viewportX:u,viewportY:l,clientX:g,clientY:p},picked:[]});case 7:return v=b.sent,m=v.picked,m[m.length-1]!==this.documentElement&&m.push(this.documentElement),b.abrupt("return",m);case 11:case"end":return b.stop()}},i,this)}));function r(i,a){return t.apply(this,arguments)}return r}()},{key:"appendChild",value:function(r,i){throw new Error(bo)}},{key:"insertBefore",value:function(r,i){throw new Error(bo)}},{key:"removeChild",value:function(r,i){throw new Error(bo)}},{key:"replaceChild",value:function(r,i,a){throw new Error(bo)}},{key:"append",value:function(){throw new Error(bo)}},{key:"prepend",value:function(){throw new Error(bo)}},{key:"getElementById",value:function(r){return this.documentElement.getElementById(r)}},{key:"getElementsByName",value:function(r){return this.documentElement.getElementsByName(r)}},{key:"getElementsByTagName",value:function(r){return this.documentElement.getElementsByTagName(r)}},{key:"getElementsByClassName",value:function(r){return this.documentElement.getElementsByClassName(r)}},{key:"querySelector",value:function(r){return this.documentElement.querySelector(r)}},{key:"querySelectorAll",value:function(r){return this.documentElement.querySelectorAll(r)}},{key:"find",value:function(r){return this.documentElement.find(r)}},{key:"findAll",value:function(r){return this.documentElement.findAll(r)}}])}(yt),HM=function(){function n(e){U(this,n),this.strategies=e}return H(n,[{key:"apply",value:function(t){var r=t.camera,i=t.renderingService,a=t.renderingContext,s=this.strategies;i.hooks.cull.tap(n.tag,function(o){if(o){var u=o.cullable;return s.length===0?u.visible=a.unculledEntities.indexOf(o.entity)>-1:u.visible=s.every(function(l){return l.isVisible(r,o)}),!o.isCulled()&&o.isVisible()?o:(o.dispatchEvent(new It(De.CULLED)),null)}return o}),i.hooks.afterRender.tap(n.tag,function(o){o.cullable.visibilityPlaneMask=-1})}}])}();HM.tag="Culling";var YM=function(){function n(){var e=this;U(this,n),this.autoPreventDefault=!1,this.rootPointerEvent=new md(null),this.rootWheelEvent=new wb(null),this.onPointerMove=function(t){var r,i=(r=e.context.renderingContext.root)===null||r===void 0||(r=r.ownerDocument)===null||r===void 0?void 0:r.defaultView;if(!(i.supportsTouchEvents&&t.pointerType==="touch")){var a=e.normalizeToPointerEvent(t,i),s=As(a),o;try{for(s.s();!(o=s.n()).done;){var u=o.value,l=e.bootstrapEvent(e.rootPointerEvent,u,i,t);e.context.eventService.mapEvent(l)}}catch(c){s.e(c)}finally{s.f()}e.setCursor(e.context.eventService.cursor)}},this.onClick=function(t){var r,i=(r=e.context.renderingContext.root)===null||r===void 0||(r=r.ownerDocument)===null||r===void 0?void 0:r.defaultView,a=e.normalizeToPointerEvent(t,i),s=As(a),o;try{for(s.s();!(o=s.n()).done;){var u=o.value,l=e.bootstrapEvent(e.rootPointerEvent,u,i,t);e.context.eventService.mapEvent(l)}}catch(c){s.e(c)}finally{s.f()}e.setCursor(e.context.eventService.cursor)}}return H(n,[{key:"apply",value:function(t){var r=this;this.context=t;var i=t.renderingService,a=this.context.renderingContext.root.ownerDocument.defaultView;this.context.eventService.setPickHandler(function(s){var o=r.context.renderingService.hooks.pickSync.call({position:s,picked:[],topmost:!0}),u=o.picked;return u[0]||null}),i.hooks.pointerWheel.tap(n.tag,function(s){var o=r.normalizeWheelEvent(s);r.context.eventService.mapEvent(o)}),i.hooks.pointerDown.tap(n.tag,function(s){if(!(a.supportsTouchEvents&&s.pointerType==="touch")){var o=r.normalizeToPointerEvent(s,a);if(r.autoPreventDefault&&o[0].isNormalized){var u=s.cancelable||!("cancelable"in s);u&&s.preventDefault()}var l=As(o),c;try{for(l.s();!(c=l.n()).done;){var h=c.value,d=r.bootstrapEvent(r.rootPointerEvent,h,a,s);r.context.eventService.mapEvent(d)}}catch(f){l.e(f)}finally{l.f()}r.setCursor(r.context.eventService.cursor)}}),i.hooks.pointerUp.tap(n.tag,function(s){if(!(a.supportsTouchEvents&&s.pointerType==="touch")){var o=r.context.contextService.getDomElement(),u=r.context.eventService.isNativeEventFromCanvas(o,s),l=u?"":"outside",c=r.normalizeToPointerEvent(s,a),h=As(c),d;try{for(h.s();!(d=h.n()).done;){var f=d.value,g=r.bootstrapEvent(r.rootPointerEvent,f,a,s);g.type+=l,r.context.eventService.mapEvent(g)}}catch(p){h.e(p)}finally{h.f()}r.setCursor(r.context.eventService.cursor)}}),i.hooks.pointerMove.tap(n.tag,this.onPointerMove),i.hooks.pointerOver.tap(n.tag,this.onPointerMove),i.hooks.pointerOut.tap(n.tag,this.onPointerMove),i.hooks.click.tap(n.tag,this.onClick),i.hooks.pointerCancel.tap(n.tag,function(s){var o=r.normalizeToPointerEvent(s,a),u=As(o),l;try{for(u.s();!(l=u.n()).done;){var c=l.value,h=r.bootstrapEvent(r.rootPointerEvent,c,a,s);r.context.eventService.mapEvent(h)}}catch(d){u.e(d)}finally{u.f()}r.setCursor(r.context.eventService.cursor)})}},{key:"bootstrapEvent",value:function(t,r,i,a){t.view=i,t.originalEvent=null,t.nativeEvent=a,t.pointerId=r.pointerId,t.width=r.width,t.height=r.height,t.isPrimary=r.isPrimary,t.pointerType=r.pointerType,t.pressure=r.pressure,t.tangentialPressure=r.tangentialPressure,t.tiltX=r.tiltX,t.tiltY=r.tiltY,t.twist=r.twist,this.transferMouseData(t,r);var s=this.context.eventService.client2Viewport({x:r.clientX,y:r.clientY}),o=s.x,u=s.y;t.viewport.x=o,t.viewport.y=u;var l=this.context.eventService.viewport2Canvas(t.viewport),c=l.x,h=l.y;return t.canvas.x=c,t.canvas.y=h,t.global.copyFrom(t.canvas),t.offset.copyFrom(t.canvas),t.isTrusted=a.isTrusted,t.type==="pointerleave"&&(t.type="pointerout"),t.type.startsWith("mouse")&&(t.type=t.type.replace("mouse","pointer")),t.type.startsWith("touch")&&(t.type=zF[t.type]||t.type),t}},{key:"normalizeWheelEvent",value:function(t){var r=this.rootWheelEvent;this.transferMouseData(r,t),r.deltaMode=t.deltaMode,r.deltaX=t.deltaX,r.deltaY=t.deltaY,r.deltaZ=t.deltaZ;var i=this.context.eventService.client2Viewport({x:t.clientX,y:t.clientY}),a=i.x,s=i.y;r.viewport.x=a,r.viewport.y=s;var o=this.context.eventService.viewport2Canvas(r.viewport),u=o.x,l=o.y;return r.canvas.x=u,r.canvas.y=l,r.global.copyFrom(r.canvas),r.offset.copyFrom(r.canvas),r.nativeEvent=t,r.type=t.type,r}},{key:"transferMouseData",value:function(t,r){t.isTrusted=r.isTrusted,t.srcElement=r.srcElement,t.timeStamp=xb.now(),t.type=r.type,t.altKey=r.altKey,t.metaKey=r.metaKey,t.shiftKey=r.shiftKey,t.ctrlKey=r.ctrlKey,t.button=r.button,t.buttons=r.buttons,t.client.x=r.clientX,t.client.y=r.clientY,t.movement.x=r.movementX,t.movement.y=r.movementY,t.page.x=r.pageX,t.page.y=r.pageY,t.screen.x=r.screenX,t.screen.y=r.screenY,t.relatedTarget=null}},{key:"setCursor",value:function(t){this.context.contextService.applyCursorStyle(t||this.context.config.cursor||"default")}},{key:"normalizeToPointerEvent",value:function(t,r){var i=[];if(r.isTouchEvent(t))for(var a=0;a<t.changedTouches.length;a++){var s=t.changedTouches[a];me(s.button)&&(s.button=0),me(s.buttons)&&(s.buttons=1),me(s.isPrimary)&&(s.isPrimary=t.touches.length===1&&t.type==="touchstart"),me(s.width)&&(s.width=s.radiusX||1),me(s.height)&&(s.height=s.radiusY||1),me(s.tiltX)&&(s.tiltX=0),me(s.tiltY)&&(s.tiltY=0),me(s.pointerType)&&(s.pointerType="touch"),me(s.pointerId)&&(s.pointerId=s.identifier||0),me(s.pressure)&&(s.pressure=s.force||.5),me(s.twist)&&(s.twist=0),me(s.tangentialPressure)&&(s.tangentialPressure=0),s.isNormalized=!0,s.type=t.type,i.push(s)}else if(r.isMouseEvent(t)){var o=t;me(o.isPrimary)&&(o.isPrimary=!0),me(o.width)&&(o.width=1),me(o.height)&&(o.height=1),me(o.tiltX)&&(o.tiltX=0),me(o.tiltY)&&(o.tiltY=0),me(o.pointerType)&&(o.pointerType="mouse"),me(o.pointerId)&&(o.pointerId=BF),me(o.pressure)&&(o.pressure=.5),me(o.twist)&&(o.twist=0),me(o.tangentialPressure)&&(o.tangentialPressure=0),o.isNormalized=!0,i.push(o)}else i.push(t);return i}}])}();YM.tag="Event";var rz=[q.CIRCLE,q.ELLIPSE,q.IMAGE,q.RECT,q.LINE,q.POLYLINE,q.POLYGON,q.TEXT,q.PATH,q.HTML],iz=function(){function n(){U(this,n)}return H(n,[{key:"isVisible",value:function(t,r){var i,a=r.cullable;if(!a.enable)return!0;var s=r.getRenderBounds();if(rt.isEmpty(s))return!1;var o=t.getFrustum(),u=(i=r.parentNode)===null||i===void 0||(i=i.cullable)===null||i===void 0?void 0:i.visibilityPlaneMask;return a.visibilityPlaneMask=this.computeVisibilityWithPlaneMask(r,s,u||yo.INDETERMINATE,o.planes),a.visible=a.visibilityPlaneMask!==yo.OUTSIDE,a.visible}},{key:"computeVisibilityWithPlaneMask",value:function(t,r,i,a){if(i===yo.OUTSIDE||i===yo.INSIDE)return i;for(var s=yo.INSIDE,o=rz.indexOf(t.nodeName)>-1,u=0,l=a.length;u<l;++u){var c=1<<u;if(i&c&&!(o&&(u===4||u===5))){var h=a[u],d=h.normal,f=h.distance;if(Si(d,r.getPositiveFarPoint(a[u]))+f<0)return yo.OUTSIDE;Si(d,r.getNegativeFarPoint(a[u]))+f<0&&(s|=c)}}return s}}])}(),XM=function(){function n(){U(this,n),this.syncTasks=new Map,this.isFirstTimeRendering=!0,this.syncing=!1,this.isFirstTimeRenderingFinished=!1}return H(n,[{key:"apply",value:function(t){var r=this,i,a=t.renderingService,s=t.renderingContext,o=t.rBushRoot,u=s.root.ownerDocument.defaultView;this.rBush=o;var l=function(p){var v=p.target;v.renderable.dirty=!0,a.dirtify()},c=function(p){r.syncTasks.set(p.target,p.detail.affectChildren),a.dirtify()},h=function(p){var v=p.target;X.enableSizeAttenuation&&X.styleValueRegistry.updateSizeAttenuation(v,u.getCamera().getZoom())},d=function(p){var v=p.target,m=v.rBushNode;m.aabb&&r.rBush.remove(m.aabb),r.syncTasks.delete(v),X.sceneGraphService.dirtifyToRoot(v),a.dirtify()};a.hooks.init.tap(n.tag,function(){u.addEventListener(De.MOUNTED,h),u.addEventListener(De.UNMOUNTED,d),u.addEventListener(De.ATTR_MODIFIED,l),u.addEventListener(De.BOUNDS_CHANGED,c)}),a.hooks.destroy.tap(n.tag,function(){u.removeEventListener(De.MOUNTED,h),u.removeEventListener(De.UNMOUNTED,d),u.removeEventListener(De.ATTR_MODIFIED,l),u.removeEventListener(De.BOUNDS_CHANGED,c),r.syncTasks.clear()});var f=(i=X.globalThis.requestIdleCallback)!==null&&i!==void 0?i:ix.bind(X.globalThis);a.hooks.endFrame.tap(n.tag,function(){r.isFirstTimeRendering?(r.isFirstTimeRendering=!1,r.syncing=!0,f(function(){r.syncRTree(!0),r.isFirstTimeRenderingFinished=!0})):r.syncRTree()})}},{key:"syncNode",value:function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(t.isConnected){var i=t.rBushNode;i.aabb&&this.rBush.remove(i.aabb);var a=t.getRenderBounds();if(a){var s=t.renderable;r&&(s.dirtyRenderBounds||(s.dirtyRenderBounds=new rt),s.dirtyRenderBounds.update(a.center,a.halfExtents));var o=a.getMin(),u=Ee(o,2),l=u[0],c=u[1],h=a.getMax(),d=Ee(h,2),f=d[0],g=d[1];i.aabb||(i.aabb={}),i.aabb.displayObject=t,i.aabb.minX=l,i.aabb.minY=c,i.aabb.maxX=f,i.aabb.maxY=g}if(i.aabb&&!isNaN(i.aabb.maxX)&&!isNaN(i.aabb.maxX)&&!isNaN(i.aabb.minX)&&!isNaN(i.aabb.minY))return i.aabb}}},{key:"syncRTree",value:function(){var t=this,r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;if(!(!r&&(this.syncing||this.syncTasks.size===0))){this.syncing=!0;var i=[],a=new Set,s=function(u){if(!a.has(u)&&u.renderable){var l=t.syncNode(u,r);l&&(i.push(l),a.add(u))}};this.syncTasks.forEach(function(o,u){o&&u.forEach(s);for(var l=u;l;)s(l),l=l.parentElement}),this.rBush.load(i),i.length=0,this.syncing=!1}}}])}();XM.tag="Prepare";var cr=function(n){return n.READY="ready",n.BEFORE_RENDER="beforerender",n.RERENDER="rerender",n.AFTER_RENDER="afterrender",n.BEFORE_DESTROY="beforedestroy",n.AFTER_DESTROY="afterdestroy",n.RESIZE="resize",n.DIRTY_RECTANGLE="dirtyrectangle",n.RENDERER_CHANGED="rendererchanged",n}({}),XE=500,az=.1,sz=1e3,Lc=new It(De.MOUNTED),Ic=new It(De.UNMOUNTED),ug=new It(cr.BEFORE_RENDER),KE=new It(cr.RERENDER),lg=new It(cr.AFTER_RENDER),Sb=function(n){function e(t){var r;U(this,e),r=Te(this,e),r.Element=lt,r.inited=!1,r.context={};var i=t.container,a=t.canvas,s=t.renderer,o=t.width,u=t.height,l=t.background,c=t.cursor,h=t.supportsMutipleCanvasesInOneContainer,d=t.cleanUpOnDestroy,f=d===void 0?!0:d,g=t.offscreenCanvas,p=t.devicePixelRatio,v=t.requestAnimationFrame,m=t.cancelAnimationFrame,y=t.createImage,b=t.supportsTouchEvents,x=t.supportsPointerEvents,w=t.isTouchEvent,E=t.isMouseEvent,_=t.dblClickSpeed,S=o,C=u,k=p||rx&&window.devicePixelRatio||1;return k=k>=1?Math.ceil(k):1,a&&(S=o||IF(a)||a.width/k,C=u||FF(a)||a.height/k),r.customElements=new nz,r.devicePixelRatio=k,r.requestAnimationFrame=v??ix.bind(X.globalThis),r.cancelAnimationFrame=m??jM.bind(X.globalThis),r.supportsTouchEvents=b??"ontouchstart"in X.globalThis,r.supportsPointerEvents=x??!!X.globalThis.PointerEvent,r.isTouchEvent=w??function(A){return r.supportsTouchEvents&&A instanceof X.globalThis.TouchEvent},r.isMouseEvent=E??function(A){return!X.globalThis.MouseEvent||A instanceof X.globalThis.MouseEvent&&(!r.supportsPointerEvents||!(A instanceof X.globalThis.PointerEvent))},g&&(X.offscreenCanvas=g),r.document=new UM,r.document.defaultView=r,h||NF(i,r,f),r.initRenderingContext(Ce(Ce({},t),{},{width:S,height:C,background:l??"transparent",cursor:c??"default",cleanUpOnDestroy:f,devicePixelRatio:k,requestAnimationFrame:r.requestAnimationFrame,cancelAnimationFrame:r.cancelAnimationFrame,supportsTouchEvents:r.supportsTouchEvents,supportsPointerEvents:r.supportsPointerEvents,isTouchEvent:r.isTouchEvent,isMouseEvent:r.isMouseEvent,dblClickSpeed:_??200,createImage:y??function(){return new window.Image}})),r.initDefaultCamera(S,C,s.clipSpaceNearZ),r.initRenderer(s,!0),r}return Oe(e,n),H(e,[{key:"initRenderingContext",value:function(r){this.context.config=r,this.context.renderingContext={root:this.document.documentElement,renderListCurrentFrame:[],unculledEntities:[],renderReasons:new Set,force:!1,dirty:!1}}},{key:"initDefaultCamera",value:function(r,i,a){var s=this,o=new X.CameraContribution;o.clipSpaceNearZ=a,o.setType(Ve.EXPLORING,db.DEFAULT).setPosition(r/2,i/2,XE).setFocalPoint(r/2,i/2,0).setOrthographic(r/-2,r/2,i/2,i/-2,az,sz),o.canvas=this,o.eventEmitter.on(vM.UPDATED,function(){s.context.renderingContext.renderReasons.add(Go.CAMERA_CHANGED),X.enableSizeAttenuation&&s.getConfig().renderer.getConfig().enableSizeAttenuation&&s.updateSizeAttenuation()}),this.context.camera=o}},{key:"updateSizeAttenuation",value:function(){var r=this.getCamera().getZoom();this.document.documentElement.forEach(function(i){X.styleValueRegistry.updateSizeAttenuation(i,r)})}},{key:"getConfig",value:function(){return this.context.config}},{key:"getRoot",value:function(){return this.document.documentElement}},{key:"getCamera",value:function(){return this.context.camera}},{key:"getContextService",value:function(){return this.context.contextService}},{key:"getEventService",value:function(){return this.context.eventService}},{key:"getRenderingService",value:function(){return this.context.renderingService}},{key:"getRenderingContext",value:function(){return this.context.renderingContext}},{key:"getStats",value:function(){return this.getRenderingService().getStats()}},{key:"ready",get:function(){var r=this;return this.readyPromise||(this.readyPromise=new Promise(function(i){r.resolveReadyPromise=function(){i(r)}}),this.inited&&this.resolveReadyPromise()),this.readyPromise}},{key:"destroy",value:function(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0,i=arguments.length>1?arguments[1]:void 0;$t.clearCache(),i||this.dispatchEvent(new It(cr.BEFORE_DESTROY)),this.frameId&&this.cancelAnimationFrame(this.frameId);var a=this.getRoot();r&&(this.unmountChildren(a),this.document.destroy(),this.getEventService().destroy()),this.getRenderingService().destroy(),this.getContextService().destroy(),this.context.rBushRoot&&this.context.rBushRoot.clear(),i||this.dispatchEvent(new It(cr.AFTER_DESTROY));var s=function(u){u.currentTarget=null,u.manager=null,u.target=null,u.relatedNode=null};s(Lc),s(Ic),s(ug),s(KE),s(lg),s(mi),s(Eb),s(_b),s(VM)}},{key:"changeSize",value:function(r,i){this.resize(r,i)}},{key:"resize",value:function(r,i){var a=this.context.config;a.width=r,a.height=i,this.getContextService().resize(r,i);var s=this.context.camera,o=s.getProjectionMode();s.setPosition(r/2,i/2,XE).setFocalPoint(r/2,i/2,0),o===Tr.ORTHOGRAPHIC?s.setOrthographic(r/-2,r/2,i/2,i/-2,s.getNear(),s.getFar()):s.setAspect(r/i),this.dispatchEvent(new It(cr.RESIZE,{width:r,height:i}))}},{key:"appendChild",value:function(r,i){return this.document.documentElement.appendChild(r,i)}},{key:"insertBefore",value:function(r,i){return this.document.documentElement.insertBefore(r,i)}},{key:"removeChild",value:function(r){return this.document.documentElement.removeChild(r)}},{key:"removeChildren",value:function(){this.document.documentElement.removeChildren()}},{key:"destroyChildren",value:function(){this.document.documentElement.destroyChildren()}},{key:"render",value:function(r){var i=this;r&&(ug.detail=r,lg.detail=r),this.dispatchEvent(ug);var a=this.getRenderingService();a.render(this.getConfig(),r,function(){i.dispatchEvent(KE)}),this.dispatchEvent(lg)}},{key:"run",value:function(){var r=this,i=function(s,o){r.render(o),r.frameId=r.requestAnimationFrame(i)};i()}},{key:"initRenderer",value:function(r){var i=this,a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(!r)throw new Error("Renderer is required.");this.inited=!1,this.readyPromise=void 0,this.context.rBushRoot=new R9,this.context.renderingPlugins=[],this.context.renderingPlugins.push(new YM,new XM,new HM([new iz])),this.loadRendererContainerModule(r),this.context.contextService=new this.context.ContextService(Ce(Ce({},X),this.context)),this.context.renderingService=new yB(X,this.context),this.context.eventService=new mB(X,this.context),this.context.eventService.init(),this.context.contextService.init?(this.context.contextService.init(),this.initRenderingService(r,a,!0)):this.context.contextService.initAsync().then(function(){i.initRenderingService(r,a)}).catch(function(s){console.error(s)})}},{key:"initRenderingService",value:function(r){var i=this,a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;this.context.renderingService.init(function(){i.inited=!0,a?s?i.requestAnimationFrame(function(){i.dispatchEvent(new It(cr.READY))}):i.dispatchEvent(new It(cr.READY)):i.dispatchEvent(new It(cr.RENDERER_CHANGED)),i.readyPromise&&i.resolveReadyPromise(),a||i.getRoot().forEach(function(o){var u=o,l=u.renderable;l&&(l.renderBoundsDirty=!0,l.boundsDirty=!0,l.dirty=!0)}),i.mountChildren(i.getRoot()),r.getConfig().enableAutoRendering&&i.run()})}},{key:"loadRendererContainerModule",value:function(r){var i=this,a=r.getPlugins();a.forEach(function(s){s.context=i.context,s.init(X)})}},{key:"setRenderer",value:function(r){var i=this.getConfig();if(i.renderer!==r){var a=i.renderer;i.renderer=r,this.destroy(!1,!0),at((a==null?void 0:a.getPlugins())||[]).reverse().forEach(function(s){s.destroy(X)}),this.initRenderer(r)}}},{key:"setCursor",value:function(r){var i=this.getConfig();i.cursor=r,this.getContextService().applyCursorStyle(r)}},{key:"unmountChildren",value:function(r){var i=this;r.childNodes.forEach(function(a){i.unmountChildren(a)}),this.inited&&(r.isMutationObserved?r.dispatchEvent(Ic):(Ic.target=r,this.dispatchEvent(Ic,!0)),r!==this.document.documentElement&&(r.ownerDocument=null),r.isConnected=!1),r.isCustomElement&&r.disconnectedCallback&&r.disconnectedCallback()}},{key:"mountChildren",value:function(r){var i=this,a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:vd(r);this.inited?r.isConnected||(r.ownerDocument=this.document,r.isConnected=!0,a||(r.isMutationObserved?r.dispatchEvent(Lc):(Lc.target=r,this.dispatchEvent(Lc,!0)))):console.warn("[g]: You are trying to call `canvas.appendChild` before canvas' initialization finished. You can either await `canvas.ready` or listen to `CanvasEvent.READY` manually.","appended child: ",r.nodeName),r.childNodes.forEach(function(s){i.mountChildren(s,a)}),r.isCustomElement&&r.connectedCallback&&r.connectedCallback()}},{key:"mountFragment",value:function(r){this.mountChildren(r,!1)}},{key:"client2Viewport",value:function(r){return this.getEventService().client2Viewport(r)}},{key:"viewport2Client",value:function(r){return this.getEventService().viewport2Client(r)}},{key:"viewport2Canvas",value:function(r){return this.getEventService().viewport2Canvas(r)}},{key:"canvas2Viewport",value:function(r){return this.getEventService().canvas2Viewport(r)}},{key:"getPointByClient",value:function(r,i){return this.client2Viewport({x:r,y:i})}},{key:"getClientByPoint",value:function(r,i){return this.viewport2Client({x:r,y:i})}}])}(WM);/*!
 * @antv/g-camera-api
 * @description A simple implementation of Camera API.
 * @version 2.0.37
 * @date 4/14/2025, 2:53:44 AM
 * @author AntVis
 * @docs https://g.antv.antgroup.com/
 */var oz=function(n){function e(){var t;U(this,e);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return t=Te(this,e,[].concat(i)),t.landmarks=[],t}return Oe(e,n),H(e,[{key:"rotate",value:function(r,i,a){if(this.relElevation=$o(i),this.relAzimuth=$o(r),this.relRoll=$o(a),this.elevation+=this.relElevation,this.azimuth+=this.relAzimuth,this.roll+=this.relRoll,this.type===Ve.EXPLORING){var s=ja(Wt(),[1,0,0],Ye((this.rotateWorld?1:-1)*this.relElevation)),o=ja(Wt(),[0,1,0],Ye((this.rotateWorld?1:-1)*this.relAzimuth)),u=ja(Wt(),[0,0,1],Ye(this.relRoll)),l=Qa(Wt(),o,s);l=Qa(Wt(),l,u);var c=Y2(nt(),l);zo(this.matrix,this.matrix,[0,0,-this.distance]),On(this.matrix,this.matrix,c),zo(this.matrix,this.matrix,[0,0,this.distance])}else{if(Math.abs(this.elevation)>90)return this;this.computeMatrix()}return this._getAxes(),this.type===Ve.ORBITING||this.type===Ve.EXPLORING?this._getPosition():this.type===Ve.TRACKING&&this._getFocalPoint(),this._update(),this}},{key:"pan",value:function(r,i){var a=In(r,i,0),s=Ui(this.position);return Ja(s,s,id(Ie(),this.right,a[0])),Ja(s,s,id(Ie(),this.up,a[1])),this._setPosition(s),this.triggerUpdate(),this}},{key:"dolly",value:function(r){var i=this.forward,a=Ui(this.position),s=r*this.dollyingStep,o=this.distance+r*this.dollyingStep;return s=Math.max(Math.min(o,this.maxDistance),this.minDistance)-this.distance,a[0]+=s*i[0],a[1]+=s*i[1],a[2]+=s*i[2],this._setPosition(a),this.type===Ve.ORBITING||this.type===Ve.EXPLORING?this._getDistance():this.type===Ve.TRACKING&&Ja(this.focalPoint,a,this.distanceVector),this.triggerUpdate(),this}},{key:"cancelLandmarkAnimation",value:function(){this.landmarkAnimationID!==void 0&&this.canvas.cancelAnimationFrame(this.landmarkAnimationID)}},{key:"createLandmark",value:function(r){var i,a,s,o,u=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},l=u.position,c=l===void 0?this.position:l,h=u.focalPoint,d=h===void 0?this.focalPoint:h,f=u.roll,g=u.zoom,p=new X.CameraContribution;p.setType(this.type,void 0),p.setPosition(c[0],(i=c[1])!==null&&i!==void 0?i:this.position[1],(a=c[2])!==null&&a!==void 0?a:this.position[2]),p.setFocalPoint(d[0],(s=d[1])!==null&&s!==void 0?s:this.focalPoint[1],(o=d[2])!==null&&o!==void 0?o:this.focalPoint[2]),p.setRoll(f??this.roll),p.setZoom(g??this.zoom);var v={name:r,matrix:DO(p.getWorldTransform()),right:Ui(p.right),up:Ui(p.up),forward:Ui(p.forward),position:Ui(p.getPosition()),focalPoint:Ui(p.getFocalPoint()),distanceVector:Ui(p.getDistanceVector()),distance:p.getDistance(),dollyingStep:p.getDollyingStep(),azimuth:p.getAzimuth(),elevation:p.getElevation(),roll:p.getRoll(),relAzimuth:p.relAzimuth,relElevation:p.relElevation,relRoll:p.relRoll,zoom:p.getZoom()};return this.landmarks.push(v),v}},{key:"gotoLandmark",value:function(r){var i=this,a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},s=qe(r)?this.landmarks.find(function(A){return A.name===r}):r;if(s){var o=re(a)?{duration:a}:a,u=o.easing,l=u===void 0?"linear":u,c=o.duration,h=c===void 0?100:c,d=o.easingFunction,f=d===void 0?void 0:d,g=o.onfinish,p=g===void 0?void 0:g,v=o.onframe,m=v===void 0?void 0:v,y=.01;this.cancelLandmarkAnimation();var b=s.position,x=s.focalPoint,w=s.zoom,E=s.roll,_=f||X.EasingFunction(l),S,C=function(){i.setFocalPoint(x),i.setPosition(b),i.setRoll(E),i.setZoom(w),i.computeMatrix(),i.triggerUpdate(),p==null||p()};if(h===0)return C();var k=function(T){S===void 0&&(S=T);var O=T-S;if(O>=h){C();return}var P=_(O/h),R=Ie(),N=Ie(),D=1,M=0;Qy(R,i.focalPoint,x,P),Qy(N,i.position,b,P),M=i.roll*(1-P)+E*P,D=i.zoom*(1-P)+w*P,i.setFocalPoint(R),i.setPosition(N),i.setRoll(M),i.setZoom(D);var F=aE(R,x)+aE(N,b);if(F<=y&&w===void 0&&E===void 0)return C();i.computeMatrix(),i.triggerUpdate(),O<h&&(m==null||m(P),i.landmarkAnimationID=i.canvas.requestAnimationFrame(k))};this.canvas.requestAnimationFrame(k)}}}])}(mM);X.CameraContribution=oz;/*!
 * @antv/g-web-animations-api
 * @description A simple implementation of Web Animations API.
 * @version 2.1.23
 * @date 4/14/2025, 2:55:29 AM
 * @author AntVis
 * @docs https://g.antv.antgroup.com/
 */var cg=function(n){function e(t,r,i,a){var s;return U(this,e),s=Te(this,e,[t]),s.currentTime=i,s.timelineTime=a,s.target=r,s.type="finish",s.bubbles=!1,s.currentTarget=r,s.defaultPrevented=!1,s.eventPhase=s.AT_TARGET,s.timeStamp=Date.now(),s.currentTime=i,s.timelineTime=a,s}return Oe(e,n),H(e)}(rf),uz=0,lz=function(){function n(e,t){var r;U(this,n),this.currentTimePending=!1,this._idle=!0,this._paused=!1,this._finishedFlag=!0,this._currentTime=0,this._playbackRate=1,this._inTimeline=!0,this.effect=e,e.animation=this,this.timeline=t,this.id="".concat(uz++),this._inEffect=!!this.effect.update(0),this._totalDuration=Number((r=this.effect)===null||r===void 0?void 0:r.getComputedTiming().endTime),this._holdTime=0,this._paused=!1,this.oldPlayState="idle",this.updatePromises()}return H(n,[{key:"pending",get:function(){return this._startTime===null&&!this._paused&&this.playbackRate!==0||this.currentTimePending}},{key:"playState",get:function(){return this._idle?"idle":this._isFinished?"finished":this._paused?"paused":"running"}},{key:"ready",get:function(){var t=this;return this.readyPromise||(this.timeline.animationsWithPromises.indexOf(this)===-1&&this.timeline.animationsWithPromises.push(this),this.readyPromise=new Promise(function(r,i){t.resolveReadyPromise=function(){r(t)},t.rejectReadyPromise=function(){i(new Error)}}),this.pending||this.resolveReadyPromise()),this.readyPromise}},{key:"finished",get:function(){var t=this;return this.finishedPromise||(this.timeline.animationsWithPromises.indexOf(this)===-1&&this.timeline.animationsWithPromises.push(this),this.finishedPromise=new Promise(function(r,i){t.resolveFinishedPromise=function(){r(t)},t.rejectFinishedPromise=function(){i(new Error)}}),this.playState==="finished"&&this.resolveFinishedPromise()),this.finishedPromise}},{key:"currentTime",get:function(){return this.updatePromises(),this._idle||this.currentTimePending?null:this._currentTime},set:function(t){if(t=Number(t),!isNaN(t)){if(this.timeline.restart(),!this._paused&&this._startTime!==null){var r;this._startTime=Number((r=this.timeline)===null||r===void 0?void 0:r.currentTime)-t/this.playbackRate}this.currentTimePending=!1,this._currentTime!==t&&(this._idle&&(this._idle=!1,this._paused=!0),this.tickCurrentTime(t,!0),this.timeline.applyDirtiedAnimation(this))}}},{key:"startTime",get:function(){return this._startTime},set:function(t){if(t!==null){if(this.updatePromises(),t=Number(t),isNaN(t)||this._paused||this._idle)return;this._startTime=t,this.tickCurrentTime((Number(this.timeline.currentTime)-this._startTime)*this.playbackRate),this.timeline.applyDirtiedAnimation(this),this.updatePromises()}}},{key:"playbackRate",get:function(){return this._playbackRate},set:function(t){if(t!==this._playbackRate){this.updatePromises();var r=this.currentTime;this._playbackRate=t,this.startTime=null,this.playState!=="paused"&&this.playState!=="idle"&&(this._finishedFlag=!1,this._idle=!1,this.ensureAlive(),this.timeline.applyDirtiedAnimation(this)),r!==null&&(this.currentTime=r),this.updatePromises()}}},{key:"_isFinished",get:function(){return!this._idle&&(this._playbackRate>0&&Number(this._currentTime)>=this._totalDuration||this._playbackRate<0&&Number(this._currentTime)<=0)}},{key:"totalDuration",get:function(){return this._totalDuration}},{key:"_needsTick",get:function(){return this.pending||this.playState==="running"||!this._finishedFlag}},{key:"updatePromises",value:function(){var t=this.oldPlayState,r=this.pending?"pending":this.playState;return this.readyPromise&&r!==t&&(r==="idle"?(this.rejectReadyPromise(),this.readyPromise=void 0):t==="pending"?this.resolveReadyPromise():r==="pending"&&(this.readyPromise=void 0)),this.finishedPromise&&r!==t&&(r==="idle"?(this.rejectFinishedPromise(),this.finishedPromise=void 0):r==="finished"?this.resolveFinishedPromise():t==="finished"&&(this.finishedPromise=void 0)),this.oldPlayState=r,this.readyPromise||this.finishedPromise}},{key:"play",value:function(){this.updatePromises(),this._paused=!1,(this._isFinished||this._idle)&&(this.rewind(),this._startTime=null),this._finishedFlag=!1,this._idle=!1,this.ensureAlive(),this.timeline.applyDirtiedAnimation(this),this.timeline.animations.indexOf(this)===-1&&this.timeline.animations.push(this),this.updatePromises()}},{key:"pause",value:function(){this.updatePromises(),this.currentTime&&(this._holdTime=this.currentTime),!this._isFinished&&!this._paused&&!this._idle?this.currentTimePending=!0:this._idle&&(this.rewind(),this._idle=!1),this._startTime=null,this._paused=!0,this.updatePromises()}},{key:"finish",value:function(){this.updatePromises(),!this._idle&&(this.currentTime=this._playbackRate>0?this._totalDuration:0,this._startTime=this._totalDuration-this.currentTime,this.currentTimePending=!1,this.timeline.applyDirtiedAnimation(this),this.updatePromises())}},{key:"cancel",value:function(){var t=this;if(this.updatePromises(),!!this._inEffect&&(this._inEffect=!1,this._idle=!0,this._paused=!1,this._finishedFlag=!0,this._currentTime=0,this._startTime=null,this.effect.update(null),this.timeline.applyDirtiedAnimation(this),this.updatePromises(),this.oncancel)){var r=new cg(null,this,this.currentTime,null);setTimeout(function(){t.oncancel(r)})}}},{key:"reverse",value:function(){this.updatePromises();var t=this.currentTime;this.playbackRate*=-1,this.play(),t!==null&&(this.currentTime=t),this.updatePromises()}},{key:"updatePlaybackRate",value:function(t){this.playbackRate=t}},{key:"targetAnimations",value:function(){var t,r=(t=this.effect)===null||t===void 0?void 0:t.target;return r.getAnimations()}},{key:"markTarget",value:function(){var t=this.targetAnimations();t.indexOf(this)===-1&&t.push(this)}},{key:"unmarkTarget",value:function(){var t=this.targetAnimations(),r=t.indexOf(this);r!==-1&&t.splice(r,1)}},{key:"tick",value:function(t,r){!this._idle&&!this._paused&&(this._startTime===null?r&&(this.startTime=t-this._currentTime/this.playbackRate):this._isFinished||this.tickCurrentTime((t-this._startTime)*this.playbackRate)),r&&(this.currentTimePending=!1,this.fireEvents(t))}},{key:"rewind",value:function(){if(this.playbackRate>=0)this.currentTime=0;else if(this._totalDuration<1/0)this.currentTime=this._totalDuration;else throw new Error("Unable to rewind negative playback rate animation with infinite duration")}},{key:"persist",value:function(){throw new Error(He)}},{key:"addEventListener",value:function(t,r,i){throw new Error(He)}},{key:"removeEventListener",value:function(t,r,i){throw new Error(He)}},{key:"dispatchEvent",value:function(t){throw new Error(He)}},{key:"commitStyles",value:function(){throw new Error(He)}},{key:"ensureAlive",value:function(){if(this.playbackRate<0&&this.currentTime===0){var t;this._inEffect=!!((t=this.effect)!==null&&t!==void 0&&t.update(-1))}else{var r;this._inEffect=!!((r=this.effect)!==null&&r!==void 0&&r.update(this.currentTime))}!this._inTimeline&&(this._inEffect||!this._finishedFlag)&&(this._inTimeline=!0,this.timeline.animations.push(this))}},{key:"tickCurrentTime",value:function(t,r){t!==this._currentTime&&(this._currentTime=t,this._isFinished&&!r&&(this._currentTime=this._playbackRate>0?this._totalDuration:0),this.ensureAlive())}},{key:"fireEvents",value:function(t){var r=this;if(this._isFinished){if(!this._finishedFlag){if(this.onfinish){var i=new cg(null,this,this.currentTime,t);setTimeout(function(){r.onfinish&&r.onfinish(i)})}this._finishedFlag=!0}}else{if(this.onframe&&this.playState==="running"){var a=new cg(null,this,this.currentTime,t);this.onframe(a)}this._finishedFlag=!1}}}])}(),cz=4,hz=.001,dz=1e-7,fz=10,Gu=11,Fc=1/(Gu-1),gz=typeof Float32Array=="function",KM=function(e,t){return 1-3*t+3*e},ZM=function(e,t){return 3*t-6*e},JM=function(e){return 3*e},yd=function(e,t,r){return((KM(t,r)*e+ZM(t,r))*e+JM(t))*e},QM=function(e,t,r){return 3*KM(t,r)*e*e+2*ZM(t,r)*e+JM(t)},pz=function(e,t,r,i,a){var s,o,u=0;do o=t+(r-t)/2,s=yd(o,i,a)-e,s>0?r=o:t=o;while(Math.abs(s)>dz&&++u<fz);return o},vz=function(e,t,r,i){for(var a=0;a<cz;++a){var s=QM(t,r,i);if(s===0)return t;var o=yd(t,r,i)-e;t-=o/s}return t},ox=function(e,t,r,i){if(!(e>=0&&e<=1&&r>=0&&r<=1))throw new Error("bezier x values must be in [0, 1] range");if(e===t&&r===i)return function(u){return u};for(var a=gz?new Float32Array(Gu):new Array(Gu),s=0;s<Gu;++s)a[s]=yd(s*Fc,e,r);var o=function(l){for(var c=0,h=1,d=Gu-1;h!==d&&a[h]<=l;++h)c+=Fc;--h;var f=(l-a[h])/(a[h+1]-a[h]),g=c+f*Fc,p=QM(g,e,r);return p>=hz?vz(l,g,e,r):p===0?g:pz(l,c,c+Fc,e,r)};return function(u){return u===0||u===1?u:yd(o(u),t,i)}},mz=function(e){return e=e.replace(/([A-Z])/g,function(t){return"-".concat(t.toLowerCase())}),e.charAt(0)==="-"?e.substring(1):e},Bc=function(e){return Math.pow(e,2)},zc=function(e){return Math.pow(e,3)},$c=function(e){return Math.pow(e,4)},jc=function(e){return Math.pow(e,5)},qc=function(e){return Math.pow(e,6)},Gc=function(e){return 1-Math.cos(e*Math.PI/2)},Wc=function(e){return 1-Math.sqrt(1-e*e)},Vc=function(e){return e*e*(3*e-2)},Uc=function(e){for(var t,r=4;e<((t=Math.pow(2,--r))-1)/11;);return 1/Math.pow(4,3-r)-7.5625*Math.pow((t*3-2)/22-e,2)},Hc=function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],r=Ee(t,2),i=r[0],a=i===void 0?1:i,s=r[1],o=s===void 0?.5:s,u=St(Number(a),1,10),l=St(Number(o),.1,2);return e===0||e===1?e:-u*Math.pow(2,10*(e-1))*Math.sin((e-1-l/(Math.PI*2)*Math.asin(1/u))*(Math.PI*2)/l)},Pu=function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],r=arguments.length>2?arguments[2]:void 0,i=Ee(t,4),a=i[0],s=a===void 0?1:a,o=i[1],u=o===void 0?100:o,l=i[2],c=l===void 0?10:l,h=i[3],d=h===void 0?0:h;s=St(s,.1,1e3),u=St(u,.1,1e3),c=St(c,.1,1e3),d=St(d,.1,1e3);var f=Math.sqrt(u/s),g=c/(2*Math.sqrt(u*s)),p=g<1?f*Math.sqrt(1-g*g):0,v=1,m=g<1?(g*f+-d)/p:-d+f,y=r?r*e/1e3:e;return g<1?y=Math.exp(-y*g*f)*(v*Math.cos(p*y)+m*Math.sin(p*y)):y=(v+m*y)*Math.exp(-y*f),e===0||e===1?e:1-y},hg=function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],r=t,i=Ee(r,2),a=i[0],s=a===void 0?10:a,o=i[1],u=o==="start"?Math.ceil:Math.floor;return u(St(e,0,1)*s)/s},ZE=function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],r=Ee(t,4),i=r[0],a=r[1],s=r[2],o=r[3];return ox(i,a,s,o)(e)},Yc=ox(.42,0,1,1),Sr=function(e){return function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],i=arguments.length>2?arguments[2]:void 0;return 1-e(1-t,r,i)}},kr=function(e){return function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],i=arguments.length>2?arguments[2]:void 0;return t<.5?e(t*2,r,i)/2:1-e(t*-2+2,r,i)/2}},Cr=function(e){return function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],i=arguments.length>2?arguments[2]:void 0;return t<.5?(1-e(1-t*2,r,i))/2:(e(t*2-1,r,i)+1)/2}},JE={steps:hg,"step-start":function(e){return hg(e,[1,"start"])},"step-end":function(e){return hg(e,[1,"end"])},linear:function(e){return e},"cubic-bezier":ZE,ease:function(e){return ZE(e,[.25,.1,.25,1])},in:Yc,out:Sr(Yc),"in-out":kr(Yc),"out-in":Cr(Yc),"in-quad":Bc,"out-quad":Sr(Bc),"in-out-quad":kr(Bc),"out-in-quad":Cr(Bc),"in-cubic":zc,"out-cubic":Sr(zc),"in-out-cubic":kr(zc),"out-in-cubic":Cr(zc),"in-quart":$c,"out-quart":Sr($c),"in-out-quart":kr($c),"out-in-quart":Cr($c),"in-quint":jc,"out-quint":Sr(jc),"in-out-quint":kr(jc),"out-in-quint":Cr(jc),"in-expo":qc,"out-expo":Sr(qc),"in-out-expo":kr(qc),"out-in-expo":Cr(qc),"in-sine":Gc,"out-sine":Sr(Gc),"in-out-sine":kr(Gc),"out-in-sine":Cr(Gc),"in-circ":Wc,"out-circ":Sr(Wc),"in-out-circ":kr(Wc),"out-in-circ":Cr(Wc),"in-back":Vc,"out-back":Sr(Vc),"in-out-back":kr(Vc),"out-in-back":Cr(Vc),"in-bounce":Uc,"out-bounce":Sr(Uc),"in-out-bounce":kr(Uc),"out-in-bounce":Cr(Uc),"in-elastic":Hc,"out-elastic":Sr(Hc),"in-out-elastic":kr(Hc),"out-in-elastic":Cr(Hc),spring:Pu,"spring-in":Pu,"spring-out":Sr(Pu),"spring-in-out":kr(Pu),"spring-out-in":Cr(Pu)},yz=function(e){return mz(e).replace(/^ease-/,"").replace(/(\(|\s).+/,"").toLowerCase().trim()},bz=function(e){return JE[yz(e)]||JE.linear},xz=function(e){return e},wz=1,Ez=.5,QE=0;function e3(n,e){return function(t){if(t>=1)return 1;var r=1/n;return t+=e*r,t-t%r}}var Xc="\\s*(-?\\d+\\.?\\d*|-?\\.\\d+)\\s*",_z=new RegExp("cubic-bezier\\(".concat(Xc,",").concat(Xc,",").concat(Xc,",").concat(Xc,"\\)")),Sz=/steps\(\s*(\d+)\s*\)/,kz=/steps\(\s*(\d+)\s*,\s*(start|middle|end)\s*\)/;function ux(n){var e=_z.exec(n);if(e)return ox.apply(void 0,at(e.slice(1).map(Number)));var t=Sz.exec(n);if(t)return e3(Number(t[1]),QE);var r=kz.exec(n);return r?e3(Number(r[1]),{start:wz,middle:Ez,end:QE}[r[2]]):bz(n)}function Cz(n){return Math.abs(Az(n)/(n.playbackRate||1))}function Az(n){var e;return n.duration===0||n.iterations===0?0:(n.duration==="auto"?0:Number(n.duration))*((e=n.iterations)!==null&&e!==void 0?e:1)}var e4=0,lx=1,sf=2,t4=3;function Tz(n,e,t){if(e===null)return e4;var r=t.endTime;return e<Math.min(t.delay,r)?lx:e>=Math.min(t.delay+n+t.endDelay,r)?sf:t4}function Oz(n,e,t,r,i){switch(r){case lx:return e==="backwards"||e==="both"?0:null;case t4:return t-i;case sf:return e==="forwards"||e==="both"?n:null;case e4:return null}}function Mz(n,e,t,r,i){var a=i;return n===0?e!==lx&&(a+=t):a+=r/n,a}function Pz(n,e,t,r,i,a){var s=n===1/0?e%1:n%1;return s===0&&t===sf&&r!==0&&(i!==0||a===0)&&(s=1),s}function Nz(n,e,t,r){return n===sf&&e===1/0?1/0:t===1?Math.floor(r)-1:Math.floor(r)}function Dz(n,e,t){var r=n;if(n!=="normal"&&n!=="reverse"){var i=e;n==="alternate-reverse"&&(i+=1),r="normal",i!==1/0&&i%2!==0&&(r="reverse")}return r==="normal"?t:1-t}function Rz(n,e,t){var r=Tz(n,e,t),i=Oz(n,t.fill,e,r,t.delay);if(i===null)return null;var a=t.duration==="auto"?0:t.duration,s=Mz(a,r,t.iterations,i,t.iterationStart),o=Pz(s,t.iterationStart,r,t.iterations,i,a),u=Nz(r,t.iterations,o,s),l=Dz(t.direction,u,o);return t.currentIteration=u,t.progress=l,t.easingFunction(l)}function Lz(n,e,t){var r=Iz(n,e),i=Fz(r,t);return function(a,s){if(s!==null)i.filter(function(u){return s>=u.applyFrom&&s<u.applyTo}).forEach(function(u){var l=s-u.startOffset,c=u.endOffset-u.startOffset,h=c===0?0:l/c;a.setAttribute(u.property,u.interpolation(h),!1,!1)});else for(var o in r)n4(o)&&a.setAttribute(o,null)}}function n4(n){return n!=="offset"&&n!=="easing"&&n!=="composite"&&n!=="computedOffset"}function Iz(n,e){for(var t={},r=0;r<n.length;r++)for(var i in n[r])if(n4(i)){var a={offset:n[r].offset,computedOffset:n[r].computedOffset,easing:n[r].easing,easingFunction:ux(n[r].easing)||e.easingFunction,value:n[r][i]};t[i]=t[i]||[],t[i].push(a)}return t}function Fz(n,e){var t=[];for(var r in n)for(var i=n[r],a=0;a<i.length-1;a++){var s=a,o=a+1,u=i[s].computedOffset,l=i[o].computedOffset,c=u,h=l;a===0&&(c=-1/0,l===0&&(o=s)),a===i.length-2&&(h=1/0,u===1&&(s=o)),t.push({applyFrom:c,applyTo:h,startOffset:i[s].computedOffset,endOffset:i[o].computedOffset,easingFunction:i[s].easingFunction,property:r,interpolation:Bz(r,i[s].value,i[o].value,e)})}return t.sort(function(d,f){return d.startOffset-f.startOffset}),t}var t3=function(e,t,r){return function(i){var a=r4(e,t,i);return re(a)?a:r(a)}};function Bz(n,e,t,r){var i=RM[n];if(i&&i.syntax&&i.int){var a=X.styleValueRegistry.getPropertySyntax(i.syntax);if(a){var s=a.parser,o=s?s(e,r):e,u=s?s(t,r):t,l=a.mixer(o,u,r);if(l){var c=t3.apply(void 0,at(l));return function(h){return h===0?e:h===1?t:c(h)}}}}return t3(!1,!0,function(h){return h?t:e})}function r4(n,e,t){if(typeof n=="number"&&typeof e=="number")return n*(1-t)+e*t;if(typeof n=="boolean"&&typeof e=="boolean"||typeof n=="string"&&typeof e=="string")return t<.5?n:e;if(Array.isArray(n)&&Array.isArray(e)){for(var r=n.length,i=e.length,a=Math.max(r,i),s=[],o=0;o<a;o++)s.push(r4(n[o<r?o:r-1],e[o<i?o:i-1],t));return s}throw new Error("Mismatched interpolation arguments ".concat(n,":").concat(e))}var zz=function(){function n(){U(this,n),this.delay=0,this.direction="normal",this.duration="auto",this._easing="linear",this.easingFunction=xz,this.endDelay=0,this.fill="auto",this.iterationStart=0,this.iterations=1,this.currentIteration=null,this.progress=null}return H(n,[{key:"easing",get:function(){return this._easing},set:function(t){this.easingFunction=ux(t),this._easing=t}}])}();function $z(n){var e=[];for(var t in n)if(!(t in["easing","offset","composite"])){var r=n[t];Array.isArray(r)||(r=[r]);for(var i=r.length,a=0;a<i;a++){if(!e[a]){var s={};"offset"in n&&(s.offset=Number(n.offset)),"easing"in n&&(s.easing=n.easing),"composite"in n&&(s.composite=n.composite),e[a]=s}r[a]!==void 0&&r[a]!==null&&(e[a][t]=r[a])}}return e.sort(function(o,u){return(o.computedOffset||0)-(u.computedOffset||0)}),e}function n3(n,e){if(n===null)return[];Array.isArray(n)||(n=$z(n));for(var t=n.map(function(u){var l={};e!=null&&e.composite&&(l.composite="auto");for(var c in u){var h=u[c];if(c==="offset"){if(h!==null){if(h=Number(h),!isFinite(h))throw new Error("Keyframe offsets must be numbers.");if(h<0||h>1)throw new Error("Keyframe offsets must be between 0 and 1.");l.computedOffset=h}}else if(c==="composite"&&["replace","add","accumulate","auto"].indexOf(h)===-1)throw new Error("".concat(h," compositing is not supported"));l[c]=h}return l.offset===void 0&&(l.offset=null),l.easing===void 0&&(l.easing=(e==null?void 0:e.easing)||"linear"),l.composite===void 0&&(l.composite="auto"),l}),r=!0,i=-1/0,a=0;a<t.length;a++){var s=t[a].offset;if(de(s))r=!1;else{if(s<i)throw new TypeError("Keyframes are not loosely sorted by offset. Sort or specify offsets.");i=s}}t=t.filter(function(u){return Number(u.offset)>=0&&Number(u.offset)<=1});function o(){var u,l=t,c=l.length;if(t[c-1].computedOffset=Number((u=t[c-1].offset)!==null&&u!==void 0?u:1),c>1){var h;t[0].computedOffset=Number((h=t[0].offset)!==null&&h!==void 0?h:0)}for(var d=0,f=Number(t[0].computedOffset),g=1;g<c;g++){var p=t[g].computedOffset;if(!de(p)&&!de(f)){for(var v=1;v<g-d;v++)t[d+v].computedOffset=f+(Number(p)-f)*v/(g-d);d=g,f=Number(p)}}}return r||o(),t}var jz="backwards|forwards|both|none".split("|"),qz="reverse|alternate|alternate-reverse".split("|");function Gz(n,e){var t=new zz;return e&&(t.fill="both",t.duration="auto"),typeof n=="number"&&!isNaN(n)?t.duration=n:n!==void 0&&Object.keys(n).forEach(function(r){if(n[r]!==void 0&&n[r]!==null&&n[r]!=="auto"){if((typeof t[r]=="number"||r==="duration")&&(typeof n[r]!="number"||isNaN(n[r]))||r==="fill"&&jz.indexOf(n[r])===-1||r==="direction"&&qz.indexOf(n[r])===-1)return;t[r]=n[r]}}),t}function Wz(n,e){return n=Vz(n??{duration:"auto"}),Gz(n,e)}function Vz(n){return typeof n=="number"&&(isNaN(n)?n={duration:"auto"}:n={duration:n}),n}var Uz=function(){function n(e,t,r){var i=this;U(this,n),this.composite="replace",this.iterationComposite="replace",this.target=e,this.timing=Wz(r,!1),this.timing.effect=this,this.timing.activeDuration=Cz(this.timing),this.timing.endTime=Math.max(0,this.timing.delay+this.timing.activeDuration+this.timing.endDelay),this.normalizedKeyframes=n3(t,this.timing),this.interpolations=Lz(this.normalizedKeyframes,this.timing,this.target);var a=X.globalThis.Proxy;this.computedTiming=a?new a(this.timing,{get:function(o,u){return u==="duration"?o.duration==="auto"?0:o.duration:u==="fill"?o.fill==="auto"?"none":o.fill:u==="localTime"?i.animation&&i.animation.currentTime||null:u==="currentIteration"?!i.animation||i.animation.playState!=="running"?null:o.currentIteration||0:u==="progress"?!i.animation||i.animation.playState!=="running"?null:o.progress||0:o[u]},set:function(){return!0}}):this.timing}return H(n,[{key:"applyInterpolations",value:function(){this.interpolations(this.target,Number(this.timeFraction))}},{key:"update",value:function(t){return t===null?!1:(this.timeFraction=Rz(this.timing.activeDuration,t,this.timing),this.timeFraction!==null)}},{key:"getKeyframes",value:function(){return this.normalizedKeyframes}},{key:"setKeyframes",value:function(t){this.normalizedKeyframes=n3(t)}},{key:"getComputedTiming",value:function(){return this.computedTiming}},{key:"getTiming",value:function(){return this.timing}},{key:"updateTiming",value:function(t){var r=this;Object.keys(t||{}).forEach(function(i){r.timing[i]=t[i]})}}])}();function r3(n,e){return Number(n.id)-Number(e.id)}var Hz=function(){function n(e){var t=this;U(this,n),this.animations=[],this.ticking=!1,this.timelineTicking=!1,this.hasRestartedThisFrame=!1,this.animationsWithPromises=[],this.inTick=!1,this.pendingEffects=[],this.currentTime=null,this.rafId=0,this.rafCallbacks=[],this.webAnimationsNextTick=function(r){t.currentTime=r,t.discardAnimations(),t.animations.length===0?t.timelineTicking=!1:t.requestAnimationFrame(t.webAnimationsNextTick)},this.processRafCallbacks=function(r){var i=t.rafCallbacks;t.rafCallbacks=[],r<Number(t.currentTime)&&(r=Number(t.currentTime)),t.animations.sort(r3),t.animations=t.tick(r,!0,t.animations)[0],i.forEach(function(a){a[1](r)}),t.applyPendingEffects()},this.document=e}return H(n,[{key:"getAnimations",value:function(){return this.discardAnimations(),this.animations.slice()}},{key:"isTicking",value:function(){return this.inTick}},{key:"play",value:function(t,r,i){var a=new Uz(t,r,i),s=new lz(a,this);return this.animations.push(s),this.restartWebAnimationsNextTick(),s.updatePromises(),s.play(),s.updatePromises(),s}},{key:"applyDirtiedAnimation",value:function(t){var r=this;if(!this.inTick){t.markTarget();var i=t.targetAnimations();i.sort(r3);var a=this.tick(Number(this.currentTime),!1,i.slice())[1];a.forEach(function(s){var o=r.animations.indexOf(s);o!==-1&&r.animations.splice(o,1)}),this.applyPendingEffects()}}},{key:"restart",value:function(){return this.ticking||(this.ticking=!0,this.requestAnimationFrame(function(){}),this.hasRestartedThisFrame=!0),this.hasRestartedThisFrame}},{key:"destroy",value:function(){this.document.defaultView.cancelAnimationFrame(this.frameId)}},{key:"applyPendingEffects",value:function(){this.pendingEffects.forEach(function(t){t==null||t.applyInterpolations()}),this.pendingEffects=[]}},{key:"updateAnimationsPromises",value:function(){this.animationsWithPromises=this.animationsWithPromises.filter(function(t){return t.updatePromises()})}},{key:"discardAnimations",value:function(){this.updateAnimationsPromises(),this.animations=this.animations.filter(function(t){return t.playState!=="finished"&&t.playState!=="idle"})}},{key:"restartWebAnimationsNextTick",value:function(){this.timelineTicking||(this.timelineTicking=!0,this.requestAnimationFrame(this.webAnimationsNextTick))}},{key:"rAF",value:function(t){var r=this.rafId++;return this.rafCallbacks.length===0&&(this.frameId=this.document.defaultView.requestAnimationFrame(this.processRafCallbacks)),this.rafCallbacks.push([r,t]),r}},{key:"requestAnimationFrame",value:function(t){var r=this;return this.rAF(function(i){r.updateAnimationsPromises(),t(i),r.updateAnimationsPromises()})}},{key:"tick",value:function(t,r,i){var a=this,s,o;this.inTick=!0,this.hasRestartedThisFrame=!1,this.currentTime=t,this.ticking=!1;var u=[],l=[],c=[],h=[];return i.forEach(function(d){d.tick(t,r),d._inEffect?(l.push(d.effect),d.markTarget()):(u.push(d.effect),d.unmarkTarget()),d._needsTick&&(a.ticking=!0);var f=d._inEffect||d._needsTick;d._inTimeline=f,f?c.push(d):h.push(d)}),(s=this.pendingEffects).push.apply(s,u),(o=this.pendingEffects).push.apply(o,l),this.ticking&&this.requestAnimationFrame(function(){}),this.inTick=!1,[c,h]}}])}();X.EasingFunction=ux;X.AnimationTimeline=Hz;const Yz={duration:500},Xz={duration:1e3,easing:"cubic-bezier(0.250, 0.460, 0.450, 0.940)",iterations:1,fill:"both"};var dt;(function(n){n.NodeAdded="NodeAdded",n.NodeUpdated="NodeUpdated",n.NodeRemoved="NodeRemoved",n.EdgeAdded="EdgeAdded",n.EdgeUpdated="EdgeUpdated",n.EdgeRemoved="EdgeRemoved",n.ComboAdded="ComboAdded",n.ComboUpdated="ComboUpdated",n.ComboRemoved="ComboRemoved"})(dt||(dt={}));var Un;(function(n){n.DRAW="draw",n.COLLAPSE="collapse",n.EXPAND="expand",n.TRANSFORM="transform"})(Un||(Un={}));var ua;(function(n){n.CLICK="canvas:click",n.DBLCLICK="canvas:dblclick",n.POINTER_OVER="canvas:pointerover",n.POINTER_LEAVE="canvas:pointerleave",n.POINTER_ENTER="canvas:pointerenter",n.POINTER_MOVE="canvas:pointermove",n.POINTER_OUT="canvas:pointerout",n.POINTER_DOWN="canvas:pointerdown",n.POINTER_UP="canvas:pointerup",n.CONTEXT_MENU="canvas:contextmenu",n.DRAG_START="canvas:dragstart",n.DRAG="canvas:drag",n.DRAG_END="canvas:dragend",n.DRAG_ENTER="canvas:dragenter",n.DRAG_OVER="canvas:dragover",n.DRAG_LEAVE="canvas:dragleave",n.DROP="canvas:drop",n.WHEEL="canvas:wheel"})(ua||(ua={}));var Ns;(function(n){n.CLICK="combo:click",n.DBLCLICK="combo:dblclick",n.POINTER_OVER="combo:pointerover",n.POINTER_LEAVE="combo:pointerleave",n.POINTER_ENTER="combo:pointerenter",n.POINTER_MOVE="combo:pointermove",n.POINTER_OUT="combo:pointerout",n.POINTER_DOWN="combo:pointerdown",n.POINTER_UP="combo:pointerup",n.CONTEXT_MENU="combo:contextmenu",n.DRAG_START="combo:dragstart",n.DRAG="combo:drag",n.DRAG_END="combo:dragend",n.DRAG_ENTER="combo:dragenter",n.DRAG_OVER="combo:dragover",n.DRAG_LEAVE="combo:dragleave",n.DROP="combo:drop"})(Ns||(Ns={}));var G;(function(n){n.CLICK="click",n.DBLCLICK="dblclick",n.POINTER_OVER="pointerover",n.POINTER_LEAVE="pointerleave",n.POINTER_ENTER="pointerenter",n.POINTER_MOVE="pointermove",n.POINTER_OUT="pointerout",n.POINTER_DOWN="pointerdown",n.POINTER_UP="pointerup",n.CONTEXT_MENU="contextmenu",n.DRAG_START="dragstart",n.DRAG="drag",n.DRAG_END="dragend",n.DRAG_ENTER="dragenter",n.DRAG_OVER="dragover",n.DRAG_LEAVE="dragleave",n.DROP="drop",n.KEY_DOWN="keydown",n.KEY_UP="keyup",n.WHEEL="wheel",n.PINCH="pinch"})(G||(G={}));var Io;(function(n){n.KEY_DOWN="keydown",n.KEY_UP="keyup"})(Io||(Io={}));var bd;(function(n){n.CLICK="edge:click",n.DBLCLICK="edge:dblclick",n.POINTER_OVER="edge:pointerover",n.POINTER_LEAVE="edge:pointerleave",n.POINTER_ENTER="edge:pointerenter",n.POINTER_MOVE="edge:pointermove",n.POINTER_OUT="edge:pointerout",n.POINTER_DOWN="edge:pointerdown",n.POINTER_UP="edge:pointerup",n.CONTEXT_MENU="edge:contextmenu",n.DRAG_ENTER="edge:dragenter",n.DRAG_OVER="edge:dragover",n.DRAG_LEAVE="edge:dragleave",n.DROP="edge:drop"})(bd||(bd={}));var Z;(function(n){n.BEFORE_CANVAS_INIT="beforecanvasinit",n.AFTER_CANVAS_INIT="aftercanvasinit",n.BEFORE_SIZE_CHANGE="beforesizechange",n.AFTER_SIZE_CHANGE="aftersizechange",n.BEFORE_ELEMENT_CREATE="beforeelementcreate",n.AFTER_ELEMENT_CREATE="afterelementcreate",n.BEFORE_ELEMENT_UPDATE="beforeelementupdate",n.AFTER_ELEMENT_UPDATE="afterelementupdate",n.BEFORE_ELEMENT_DESTROY="beforeelementdestroy",n.AFTER_ELEMENT_DESTROY="afterelementdestroy",n.BEFORE_ELEMENT_TRANSLATE="beforeelementtranslate",n.AFTER_ELEMENT_TRANSLATE="afterelementtranslate",n.BEFORE_DRAW="beforedraw",n.AFTER_DRAW="afterdraw",n.BEFORE_RENDER="beforerender",n.AFTER_RENDER="afterrender",n.BEFORE_ANIMATE="beforeanimate",n.AFTER_ANIMATE="afteranimate",n.BEFORE_LAYOUT="beforelayout",n.AFTER_LAYOUT="afterlayout",n.BEFORE_STAGE_LAYOUT="beforestagelayout",n.AFTER_STAGE_LAYOUT="afterstagelayout",n.BEFORE_TRANSFORM="beforetransform",n.AFTER_TRANSFORM="aftertransform",n.BATCH_START="batchstart",n.BATCH_END="batchend",n.BEFORE_DESTROY="beforedestroy",n.AFTER_DESTROY="afterdestroy",n.BEFORE_RENDERER_CHANGE="beforerendererchange",n.AFTER_RENDERER_CHANGE="afterrendererchange"})(Z||(Z={}));var Da;(function(n){n.UNDO="undo",n.REDO="redo",n.CANCEL="cancel",n.ADD="add",n.CLEAR="clear",n.CHANGE="change"})(Da||(Da={}));var Dr;(function(n){n.CLICK="node:click",n.DBLCLICK="node:dblclick",n.POINTER_OVER="node:pointerover",n.POINTER_LEAVE="node:pointerleave",n.POINTER_ENTER="node:pointerenter",n.POINTER_MOVE="node:pointermove",n.POINTER_OUT="node:pointerout",n.POINTER_DOWN="node:pointerdown",n.POINTER_UP="node:pointerup",n.CONTEXT_MENU="node:contextmenu",n.DRAG_START="node:dragstart",n.DRAG="node:drag",n.DRAG_END="node:dragend",n.DRAG_ENTER="node:dragenter",n.DRAG_OVER="node:dragover",n.DRAG_LEAVE="node:dragleave",n.DROP="node:drop"})(Dr||(Dr={}));const Je="combo",hr="tree";var kl;(function(n){n.NODE="node",n.EDGE="edge",n.COMBO="combo",n.THEME="theme",n.PALETTE="palette",n.LAYOUT="layout",n.BEHAVIOR="behavior",n.PLUGIN="plugin",n.ANIMATION="animation",n.TRANSFORM="transform",n.SHAPE="shape"})(kl||(kl={}));const kb={animation:{},behavior:{},combo:{},edge:{},layout:{},node:{},palette:{},theme:{},plugin:{},transform:{},shape:{}};function la(n,e){var t;const r=(t=kb[n])===null||t===void 0?void 0:t[e];if(r)return r}const Kz="5.0.45",Zz="G6";function na(n){return`[${Zz} v${Kz}] ${n}`}const Di={mute:!1,debug:n=>{console.debug(na(n))},info:n=>{console.info(na(n))},warn:n=>{console.warn(na(n))},error:n=>{console.error(na(n))}};function i4(n){const{theme:e}=n;if(!e)return{};const t=la(kl.THEME,e);return t||(Di.warn(`The theme of ${e} is not registered.`),{})}function cx(n,e){if(Array.isArray(n)&&n.length===0)return null;const t=Array.isArray(n)?n[0]:n,r=Array.isArray(n)?n.slice(1):e||[];return new Proxy(t,{get(i,a){return typeof i[a]=="function"&&!["onframe","onfinish"].includes(a)?(...s)=>{i[a](...s),r.forEach(o=>{var u;return(u=o[a])===null||u===void 0?void 0:u.call(o,...s)})}:a==="finished"?Promise.all([t.finished,...r.map(s=>s.finished)]):Reflect.get(i,a)},set(i,a,s){return["onframe","onfinish"].includes(a)||r.forEach(o=>{o[a]=s}),Reflect.set(i,a,s)}})}function Cb(n){const e=n.reduce((r,i)=>(Object.entries(i).forEach(([a,s])=>{r[a]===void 0?r[a]=[s]:r[a].push(s)}),r),{});Object.entries(e).forEach(([r,i])=>{(i.length!==n.length||i.some(a=>de(a))||i.every(a=>!["sourceNode","targetNode","childrenNode"].includes(r)&&Dt(a,i[0])))&&delete e[r]});const t=Object.entries(e).reduce((r,[i,a])=>(a.forEach((s,o)=>{r[o]?r[o][i]=s:r[o]={[i]:s}}),r),[]);return n.length!==0&&t.length===0&&t.push({_:0},{_:0}),t}function Cl(n){switch(n){case"opacity":return 1;case"x":case"y":case"z":case"zIndex":return 0;case"visibility":return"visible";case"collapsed":return!1;case"states":return[];default:return}}function a4(n,e){const{animation:t}=n;if(t===!1||e===!1)return!1;const r=Object.assign({},Yz);return Nt(t)&&Object.assign(r,t),Nt(e)&&Object.assign(r,e),r}function Jz(n){if(typeof n=="string"){const e=la(kl.ANIMATION,n);return e||(Di.warn(`The animation of ${n} is not registered.`),[])}return n}function Qz(n,e,t,r){var i,a;const{animation:s}=n;if(s===!1||r===!1)return[];const o=(i=n==null?void 0:n[e])===null||i===void 0?void 0:i.animation;if(o===!1)return[];const u=o==null?void 0:o[t];if(u===!1)return[];const l=(a=i4(n)[e])===null||a===void 0?void 0:a.animation,c=(d=[])=>Jz(d).map(f=>Object.assign(Object.assign(Object.assign(Object.assign({},Xz),Nt(s)&&s),f),Nt(r)&&r));if(u)return c(u);if(!l)return[];const h=l[t];return h===!1?[]:c(h)}function s4(n,e,t,r=[]){if(!r&&n===0&&e===0&&t===0)return null;if(Array.isArray(r)){let a=-1;const s=[];for(let o=0;o<r.length;o++){const u=r[o];if(u[0]==="translate"){if(u[1]===n&&u[2]===e)return null;a=o,s.push(["translate",n,e])}else if(u[0]==="translate3d"){if(u[1]===n&&u[2]===e&&u[3]===t)return null;a=o,s.push(["translate3d",n,e,t??0])}else s.push(u)}return a===-1&&s.splice(0,0,re(t)?["translate3d",n,e,t??0]:["translate",n,e]),s.length===0?null:s}const i=r?r.replace(/translate(3d)?\([^)]*\)/g,""):"";return t===0?`translate(${n}, ${e})${i}`:`translate3d(${n}, ${e}, ${t})${i}`}var e$=globalThis&&globalThis.__rest||function(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(n);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(t[r[i]]=n[r[i]]);return t};const t$=(n,e,t)=>{if(!t.length)return null;const[r,i]=e,a=l=>{var c;if(l){const h=n.getShape(l);if(!h)return null;const d=`get${ud(l)}Style`,f=((c=n==null?void 0:n[d])===null||c===void 0?void 0:c.bind(n))||(v=>v),g=(f==null?void 0:f(r))||{},p=(f==null?void 0:f(i))||{};return{shape:h,fromStyle:g,toStyle:p}}else return{shape:n,fromStyle:r,toStyle:i}};let s;const o=t.map(l=>{var{fields:c,shape:h,states:d}=l,f=e$(l,["fields","shape","states"]);const g=a(h);if(!g)return null;const{shape:p,fromStyle:v,toStyle:m}=g,y=[{},{}];if(c.forEach(x=>{var w,E;Object.assign(y[0],{[x]:(w=v[x])!==null&&w!==void 0?w:Cl(x)}),Object.assign(y[1],{[x]:(E=m[x])!==null&&E!==void 0?E:Cl(x)})}),y.some(x=>Object.keys(x).some(w=>["x","y","z"].includes(w)))){const{x=0,y:w=0,z:E,transform:_=""}=p.attributes||{};y.forEach(S=>{var C,k,A;S.transform=s4((C=S.x)!==null&&C!==void 0?C:x,(k=S.y)!==null&&k!==void 0?k:w,(A=S.z)!==null&&A!==void 0?A:E,_)})}const b=p.animate(Cb(y),f);return h===void 0&&(s=b),b}).filter(Boolean),u=s||(o==null?void 0:o[0]);return u?cx(u,o.filter(l=>l!==l)):null},n$=[{fields:["opacity"]}],r$=[{fields:["x","y"]}],o4=[{fields:["x","y"]}],i$=o4,u4=[{fields:["sourceNode","targetNode"]}],a$=u4,l4=[{fields:["childrenNode","x","y"]}],s$=l4;function o$(n){return"source"in n&&"target"in n}function u$(n){return n.length===2}function au(n){return n instanceof Float32Array?!0:Array.isArray(n)&&(n.length===2||n.length===3)?n.every(e=>typeof e=="number"):!1}function Ni(n,e,t){return n>=e&&n<=t}function Ri(n=0){if(Array.isArray(n)){const[e=0,t=e,r=e,i=t]=n;return[e,t,r,i]}return[n,n,n,n]}function l$(n=0){const e=Ri(n);return e[0]+e[2]}function Li(n){return n.max[0]-n.min[0]}function Ii(n){return n.max[1]-n.min[1]}function hs(n){return[Li(n),Ii(n)]}function Ga(n,e){const t=au(n)?hx(n):n.getShape("key").getBounds();return e?ds(t,e):t}function hx(n){const[e,t,r=0]=n,i=new rt;return i.setMinMax([e,t,r],[e,t,r]),i}function ds(n,e){const[t,r,i,a]=Ri(e),[s,o,u]=n.min,[l,c,h]=n.max,d=new rt;return d.setMinMax([s-a,o-t,u],[l+r,c+i,h]),d}function nc(n){if(n.length===0)return new rt;if(n.length===1)return n[0];const e=new rt;e.setMinMax(n[0].min,n[0].max);for(let t=1;t<n.length;t++){const r=n[t];e.setMinMax([Math.min(e.min[0],r.min[0]),Math.min(e.min[1],r.min[1]),Math.min(e.min[2],r.min[2])],[Math.max(e.max[0],r.max[0]),Math.max(e.max[1],r.max[1]),Math.max(e.max[2],r.max[2])])}return e}function c$(n,e){const[t,r]=n.min,[i,a]=n.max,[s,o]=e.min,[u,l]=e.max;return t>=s&&i<=u&&r>=o&&a<=l}function si(n,e){return Ni(n[0],e.min[0],e.max[0])&&Ni(n[1],e.min[1],e.max[1])}function c4(n,e,t=!1){const{min:[r,i],max:[a,s]}=e,o=(n[1]===i||n[1]===s)&&(t||Ni(n[0],r,a)),u=(n[0]===r||n[0]===a)&&(t||Ni(n[1],i,s));return o||u}function h$(n,e){return!si(n,e)}function xd(n,e){const{center:t}=e;return n[0]===t[0]&&n[1]===t[1]}function hl(n,e){const[t,r]=n,[i,a]=e.min,[s,o]=e.max,u=t-i,l=s-t,c=r-a,h=o-r,d=Math.min(u,l,c,h);return d===u?"left":d===l?"right":d===c?"top":d===h?"bottom":"left"}function qs(n,e){const t=nu(n);if(si(n,e))switch(hl(n,e)){case"left":t[0]=e.min[0];break;case"right":t[0]=e.max[0];break;case"top":t[1]=e.min[1];break;case"bottom":t[1]=e.max[1];break}else{const[r,i]=n,[a,s]=e.min,[o,u]=e.max;t[0]=Ni(r,a,o)?r:r<a?a:o,t[1]=Ni(i,s,u)?i:i<s?s:u}return t}function d$(n,e){const{center:t}=n,[r,i]=hs(n),a=e==="up"||e==="down"?t[0]:e==="right"?t[0]-r/6:t[0]+r/6,s=e==="left"||e==="right"?t[1]:e==="down"?t[1]-i/6:t[1]+i/6;return[a,s]}function f$(n,e){let[t,r]=hs(n);return[t,r]=e==="up"||e==="down"?[t,r]:[r,t],(Math.pow(r,2)-Math.pow(Math.sqrt(Math.pow(t/2,2)+Math.pow(r,2))-t/2,2))/(2*r)}function g$(n){const{min:[e,t],max:[r,i]}=n,a=[e,i],s=[r,i],o=[r,t],u=[e,t];return[[a,s],[s,o],[o,u],[u,a]]}var p$=function(e,t){return e===t},i3=function(){function n(e,t){t===void 0&&(t=null),this.value=e,this.next=t}return n.prototype.toString=function(e){return e?e(this.value):"".concat(this.value)},n}(),v$=function(){function n(e){e===void 0&&(e=p$),this.head=null,this.tail=null,this.compare=e}return n.prototype.prepend=function(e){var t=new i3(e,this.head);return this.head=t,this.tail||(this.tail=t),this},n.prototype.append=function(e){var t=new i3(e);return this.head?(this.tail.next=t,this.tail=t,this):(this.head=t,this.tail=t,this)},n.prototype.delete=function(e){if(!this.head)return null;for(var t=null;this.head&&this.compare(this.head.value,e);)t=this.head,this.head=this.head.next;var r=this.head;if(r!==null)for(;r.next;)this.compare(r.next.value,e)?(t=r.next,r.next=r.next.next):r=r.next;return this.compare(this.tail.value,e)&&(this.tail=r),t},n.prototype.find=function(e){var t=e.value,r=t===void 0?void 0:t,i=e.callback,a=i===void 0?void 0:i;if(!this.head)return null;for(var s=this.head;s;){if(a&&a(s.value)||r!==void 0&&this.compare(s.value,r))return s;s=s.next}return null},n.prototype.deleteTail=function(){var e=this.tail;if(this.head===this.tail)return this.head=null,this.tail=null,e;for(var t=this.head;t.next;)t.next.next?t=t.next:t.next=null;return this.tail=t,e},n.prototype.deleteHead=function(){if(!this.head)return null;var e=this.head;return this.head.next?this.head=this.head.next:(this.head=null,this.tail=null),e},n.prototype.fromArray=function(e){var t=this;return e.forEach(function(r){return t.append(r)}),this},n.prototype.toArray=function(){for(var e=[],t=this.head;t;)e.push(t),t=t.next;return e},n.prototype.reverse=function(){for(var e=this.head,t=null,r=null;e;)r=e.next,e.next=t,t=e,e=r;this.tail=this.head,this.head=t},n.prototype.toString=function(e){return e===void 0&&(e=void 0),this.toArray().map(function(t){return t.toString(e)}).toString()},n}(),m$=function(e,t,r){t===void 0&&(t=[]);var i=t.filter(function(u){return u.source===e||u.target===e});if(r==="target"){var a=function(l){return l.source===e};return i.filter(a).map(function(u){return u.target})}if(r==="source"){var s=function(l){return l.target===e};return i.filter(s).map(function(u){return u.source})}var o=function(l){return l.source===e?l.target:l.source};return i.map(o)},y$=function(e,t){return t.filter(function(r){return r.source===e})},b$=function(e,t){return t.filter(function(r){return r.source===e||r.target===e})},x$=function(e){var t={},r=e.nodes,i=r===void 0?[]:r,a=e.edges,s=a===void 0?[]:a;return i.forEach(function(o){t[o.id]={degree:0,inDegree:0,outDegree:0}}),s.forEach(function(o){t[o.source].degree++,t[o.source].outDegree++,t[o.target].degree++,t[o.target].inDegree++}),t},w$={}.toString,dx=function(n,e){return w$.call(n)==="[object "+e+"]"};const h4=function(n){return dx(n,"Function")},d4=function(n){return Array.isArray?Array.isArray(n):dx(n,"Array")},E$=function(n){var e=typeof n;return n!==null&&e==="object"||e==="function"};function _$(n,e){if(n){var t;if(d4(n))for(var r=0,i=n.length;r<i&&(t=e(n[r],r),t!==!1);r++);else if(E$(n)){for(var a in n)if(n.hasOwnProperty(a)&&(t=e(n[a],a),t===!1))break}}}const S$=function(n){return dx(n,"String")};var k$=Object.values?function(n){return Object.values(n)}:function(n){var e=[];return _$(n,function(t,r){h4(n)&&r==="prototype"||e.push(t)}),e};const C$=function(n,e){if(!h4(n))throw new TypeError("Expected a function");var t=function(){for(var r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];var a=e?e.apply(this,r):r[0],s=t.cache;if(s.has(a))return s.get(a);var o=n.apply(this,r);return s.set(a,o),o};return t.cache=new Map,t};var Kc;C$(function(n,e){e===void 0&&(e={});var t=e.fontSize,r=e.fontFamily,i=e.fontWeight,a=e.fontStyle,s=e.fontVariant;return Kc||(Kc=document.createElement("canvas").getContext("2d")),Kc.font=[a,s,i,t+"px",r].join(" "),Kc.measureText(S$(n)?n:"").width},function(n,e){return e===void 0&&(e={}),jI([n],k$(e)).join("")});var A$=function(e,t,r){for(var i=1/0,a,s=0;s<t.length;s++){var o=t[s].id;!r[o]&&e[o]<=i&&(i=e[o],a=t[s])}return a},T$=function(e,t,r,i){var a=e.nodes,s=a===void 0?[]:a,o=e.edges,u=o===void 0?[]:o,l={},c={},h={};s.forEach(function(y,b){var x=y.id;c[x]=1/0,x===t&&(c[x]=0)});for(var d=s.length,f=function(b){var x=A$(c,s,l),w=x.id;if(l[w]=!0,c[w]===1/0)return"continue";var E=[];r?E=y$(w,u):E=b$(w,u),E.forEach(function(_){var S=_.target,C=_.source,k=S===w?C:S,A=i&&_[i]?_[i]:1;c[k]>c[x.id]+A?(c[k]=c[x.id]+A,h[k]=[x.id]):c[k]===c[x.id]+A&&h[k].push(x.id)})},g=0;g<d;g++)f();h[t]=[t];var p={};for(var v in c)c[v]!==1/0&&f4(t,v,h,p);var m={};for(var v in p)m[v]=p[v][0];return{length:c,path:m,allPath:p}};function f4(n,e,t,r){if(n===e)return[n];if(r[e])return r[e];for(var i=[],a=0,s=t[e];a<s.length;a++){var o=s[a],u=f4(n,o,t,r);if(!u)return;for(var l=0,c=u;l<c.length;l++){var h=c[l];d4(h)?i.push(te(te([],h,!0),[e],!1)):i.push([h,e])}}return r[e]=i,r[e]}var g4=function(e,t,r,i,a){var s=T$(e,t,i,a),o=s.length,u=s.path,l=s.allPath;return{length:o[r],path:u[r],allPath:l[r]}},a3;(function(n){n.EuclideanDistance="euclideanDistance"})(a3||(a3={}));var O$=function(e,t,r){typeof t!="number"&&(t=1e-6),typeof r!="number"&&(r=.85);for(var i=1,a=0,s=1e3,o=e.nodes,u=o===void 0?[]:o,l=e.edges,c=l===void 0?[]:l,h=u.length,d,f={},g={},p=0;p<h;++p){var v=u[p],m=v.id;f[m]=1/h,g[m]=1/h}for(var y=x$(e);s>0&&i>t;){a=0;for(var p=0;p<h;++p){var v=u[p],m=v.id;if(d=0,y[v.id].inDegree===0)f[m]=0;else{for(var b=m$(m,c,"source"),x=0;x<b.length;++x){var w=b[x],E=y[w].outDegree;E>0&&(d+=g[w]/E)}f[m]=r*d,a+=f[m]}}a=(1-a)/h,i=0;for(var p=0;p<h;++p){var v=u[p],m=v.id;d=f[m]+a,i+=Math.abs(d-g[m]),g[m]=d}s-=1}return g};(function(){function n(e){e===void 0&&(e=10),this.linkedList=new v$,this.maxStep=e}return Object.defineProperty(n.prototype,"length",{get:function(){return this.linkedList.toArray().length},enumerable:!1,configurable:!0}),n.prototype.isEmpty=function(){return!this.linkedList.head},n.prototype.isMaxStack=function(){return this.toArray().length>=this.maxStep},n.prototype.peek=function(){return this.isEmpty()?null:this.linkedList.head.value},n.prototype.push=function(e){this.linkedList.prepend(e),this.length>this.maxStep&&this.linkedList.deleteTail()},n.prototype.pop=function(){var e=this.linkedList.deleteHead();return e?e.value:null},n.prototype.toArray=function(){return this.linkedList.toArray().map(function(e){return e.value})},n.prototype.clear=function(){for(;!this.isEmpty();)this.pop()},n})();function z(n){if(n.id!==void 0)return n.id;if(n.source!==void 0&&n.target!==void 0)return`${n.source}-${n.target}`;throw new Error(na("The datum does not have available id."))}function Zc(n){return n.combo}function p4(n,e){const t={nodes:(n.nodes||[]).map(z),edges:(n.edges||[]).map(z),combos:(n.combos||[]).map(z)};return e?Object.values(t).flat():t}const v4=(n,e,t)=>{var r;switch(t.type){case"degree":{const i=new Map;return(r=n.nodes)===null||r===void 0||r.forEach(a=>{const s=e(z(a),t.direction).length;i.set(z(a),s)}),i}case"betweenness":return M$(n,t.directed,t.weightPropertyName);case"closeness":return P$(n,t.directed,t.weightPropertyName);case"eigenvector":return D$(n,t.directed);case"pagerank":return N$(n,t.epsilon,t.linkProb);default:return m4(n)}},m4=n=>{var e;const t=new Map;return(e=n.nodes)===null||e===void 0||e.forEach(r=>{t.set(z(r),0)}),t},M$=(n,e,t)=>{const r=m4(n),{nodes:i=[]}=n;return i.forEach(a=>{i.forEach(s=>{if(a!==s){const{allPath:o}=g4(n,z(a),z(s),e,t),u=o.length;o.flat().forEach(l=>{l!==z(a)&&l!==z(s)&&r.set(l,r.get(l)+1/u)})}})}),r},P$=(n,e,t)=>{const r=new Map,{nodes:i=[]}=n;return i.forEach(a=>{const s=i.reduce((o,u)=>{if(a!==u){const{length:l}=g4(n,z(a),z(u),e,t);o+=l}return o},0);r.set(z(a),1/s)}),r},N$=(n,e,t)=>{var r;const i=new Map,a=O$(n,e,t);return(r=n.nodes)===null||r===void 0||r.forEach(s=>{i.set(z(s),a[z(s)])}),i},D$=(n,e)=>{const{nodes:t=[]}=n,r=R$(n,e),i=L$(r,t.length),a=new Map;return t.forEach((s,o)=>{a.set(z(s),i[o])}),a},R$=(n,e)=>{const{nodes:t=[],edges:r=[]}=n,i=Array(t.length).fill(null).map(()=>Array(t.length).fill(0));return r.forEach(({source:a,target:s})=>{const o=t.findIndex(l=>z(l)===a),u=t.findIndex(l=>z(l)===s);e?i[o][u]=1:(i[o][u]=1,i[u][o]=1)}),i},L$=(n,e,t=100,r=1e-6)=>{let i=Array(e).fill(1),a=1/0;for(let s=0;s<t&&a>r;s++){const o=Array(e).fill(0);for(let l=0;l<e;l++)for(let c=0;c<e;c++)o[l]+=n[l][c]*i[c];const u=Math.sqrt(o.reduce((l,c)=>l+c*c,0));for(let l=0;l<e;l++)o[l]/=u;a=Math.sqrt(o.reduce((l,c,h)=>l+(c-i[h])*c,0)),i=o}return i};function es(n,e,t,r=Dt){const i=new Map(n.map(d=>[t(d),d])),a=new Map(e.map(d=>[t(d),d])),s=new Set(i.keys()),o=new Set(a.keys()),u=[],l=[],c=[],h=[];return o.forEach(d=>{s.has(d)?r(i.get(d),a.get(d))?h.push(a.get(d)):l.push(a.get(d)):u.push(a.get(d))}),s.forEach(d=>{o.has(d)||c.push(i.get(d))}),{enter:u,exit:c,keep:h,update:l}}function Zs(n,e,t){const r=i=>{t&&!t(i)||(i.style.visibility=e)};n.forEach(i=>{r(i)})}function I$(n,e,t){const r={},i=a=>(a in r||(r[a]=0),`${e}-${a}-${r[a]++}`);return t.map(a=>typeof a=="string"?{type:a,key:i(a)}:typeof a=="function"?a.call(n):a.key?a:Object.assign(Object.assign({},a),{key:i(a.type)}))}class fx{constructor(e){this.extensions=[],this.extensionMap={},this.context=e}setExtensions(e){const t=I$(this.context.graph,this.category,e),{enter:r,update:i,exit:a,keep:s}=es(this.extensions,t,o=>o.key);this.createExtensions(r),this.updateExtensions([...i,...s]),this.destroyExtensions(a),this.extensions=t}createExtension(e){const{category:t}=this,{key:r,type:i}=e,a=la(t,i);if(!a)return Di.warn(`The extension ${i} of ${t} is not registered.`);const s=new a(this.context,e);this.extensionMap[r]=s}createExtensions(e){e.forEach(t=>this.createExtension(t))}updateExtension(e){const{key:t}=e,r=this.extensionMap[t];r&&r.update(e)}updateExtensions(e){e.forEach(t=>this.updateExtension(t))}destroyExtension(e){const t=this.extensionMap[e];t&&(t.destroy(),delete this.extensionMap[e])}destroyExtensions(e){e.forEach(({key:t})=>this.destroyExtension(t))}destroy(){Object.values(this.extensionMap).forEach(e=>e.destroy()),this.context={},this.extensions=[],this.extensionMap={}}}class gx{constructor(e,t){this.events=[],this.destroyed=!1,this.context=e,this.options=t}update(e){this.options=Object.assign(this.options,e)}destroy(){this.context={},this.options={},this.destroyed=!0}}class _r extends gx{}class of extends _r{constructor(e,t){super(e,Object.assign({},of.defaultOptions,t)),this.isOverlapping=(r,i)=>i.some(a=>r.intersects(a)),this.occupiedBounds=[],this.detectLabelCollision=r=>{const i=this.context.viewport,a={show:[],hide:[]};return this.occupiedBounds=[],r.forEach(s=>{const o=s.getShape("label").getRenderBounds();i.isInViewport(o,!0)&&!this.isOverlapping(o,this.occupiedBounds)?(a.show.push(s),this.occupiedBounds.push(ds(o,this.options.padding))):a.hide.push(s)}),a},this.hideLabelIfExceedViewport=(r,i)=>{const{exit:a}=es(r,i,s=>s.id);a==null||a.forEach(this.hideLabel)},this.nodeCentralities=new Map,this.sortNodesByCentrality=(r,i)=>{const{model:a}=this.context,s=a.getData(),o=a.getRelatedEdgesData.bind(a);return r.map(l=>(this.nodeCentralities.has(l.id)||(this.nodeCentralities=v4(s,o,i)),{node:l,centrality:this.nodeCentralities.get(l.id)})).sort((l,c)=>c.centrality-l.centrality).map(l=>l.node)},this.sortLabelElementsInView=r=>{const{sort:i,sortNode:a,sortCombo:s,sortEdge:o}=this.options,{model:u}=this.context;if(se(i))return r.sort((p,v)=>i(u.getElementDataById(p.id),u.getElementDataById(v.id)));const{node:l=[],edge:c=[],combo:h=[]}=ef(r,p=>p.type),d=se(s)?h.sort((p,v)=>s(...u.getComboData([p.id,v.id]))):h,f=se(a)?l.sort((p,v)=>a(...u.getNodeData([p.id,v.id]))):this.sortNodesByCentrality(l,a),g=se(o)?c.sort((p,v)=>o(...u.getEdgeData([p.id,v.id]))):c;return[...d,...f,...g]},this.labelElementsInView=[],this.isFirstRender=!0,this.onToggleVisibility=r=>{var i;if(((i=r.data)===null||i===void 0?void 0:i.stage)==="zIndex")return;if(!this.validate(r)){this.hiddenElements.size>0&&(this.hiddenElements.forEach(this.showLabel),this.hiddenElements.clear());return}const a=this.isFirstRender?this.getLabelElements():this.getLabelElementsInView();this.hideLabelIfExceedViewport(this.labelElementsInView,a),this.labelElementsInView=a;const s=this.sortLabelElementsInView(this.labelElementsInView),{show:o,hide:u}=this.detectLabelCollision(s);for(let l=o.length-1;l>=0;l--)this.showLabel(o[l]);u.forEach(this.hideLabel)},this.hiddenElements=new Map,this.hideLabel=r=>{const i=r.getShape("label");i&&Zs(i,"hidden"),this.hiddenElements.set(r.id,r)},this.showLabel=r=>{const i=r.getShape("label");i&&Zs(i,"visible"),r.toFront(),this.hiddenElements.delete(r.id)},this.onTransform=rM(this.onToggleVisibility,this.options.throttle,{leading:!0}),this.enableToggle=!0,this.toggle=r=>{this.enableToggle&&this.onToggleVisibility(r)},this.onBeforeRender=()=>{this.enableToggle=!1},this.onAfterRender=r=>{this.onToggleVisibility(r),this.enableToggle=!0},this.bindEvents()}update(e){this.unbindEvents(),super.update(e),this.bindEvents(),this.onToggleVisibility({})}getLabelElements(){const{elementMap:e}=this.context.element,t=[];for(const r in e){const i=e[r];i.isVisible()&&i.getShape("label")&&t.push(i)}return t}getLabelElementsInView(){const e=this.context.viewport;return this.getLabelElements().filter(t=>e.isInViewport(t.getShape("key").getRenderBounds()))}bindEvents(){const{graph:e}=this.context;e.on(Z.BEFORE_RENDER,this.onBeforeRender),e.on(Z.AFTER_RENDER,this.onAfterRender),e.on(Z.AFTER_DRAW,this.toggle),e.on(Z.AFTER_LAYOUT,this.toggle),e.on(Z.AFTER_TRANSFORM,this.onTransform)}unbindEvents(){const{graph:e}=this.context;e.off(Z.BEFORE_RENDER,this.onBeforeRender),e.off(Z.AFTER_RENDER,this.onAfterRender),e.off(Z.AFTER_DRAW,this.toggle),e.off(Z.AFTER_LAYOUT,this.toggle),e.off(Z.AFTER_TRANSFORM,this.onTransform)}validate(e){if(this.destroyed)return!1;const{enable:t}=this.options;return se(t)?t(e):!!t}destroy(){this.unbindEvents(),super.destroy()}}of.defaultOptions={enable:!0,throttle:100,padding:0,sortNode:{type:"degree"}};const s3=[0,0,0];function xe(n,e){return n.map((t,r)=>t+e[r])}function Ke(n,e){return n.map((t,r)=>t-e[r])}function ni(n,e){return typeof e=="number"?n.map(t=>t*e):n.map((t,r)=>t*e[r])}function oi(n,e){return typeof e=="number"?n.map(t=>t/e):n.map((t,r)=>t/e[r])}function F$(n,e){return n.reduce((t,r,i)=>t+r*e[i],0)}function B$(n,e){const t=Al(n),r=Al(e);return[t[1]*r[2]-t[2]*r[1],t[2]*r[0]-t[0]*r[2],t[0]*r[1]-t[1]*r[0]]}function Wa(n,e){return n.map(t=>t*e)}function ot(n,e){return Math.sqrt(n.reduce((t,r,i)=>t+Math.pow(r-e[i]||0,2),0))}function wd(n,e){return n.reduce((t,r,i)=>t+Math.abs(r-e[i]),0)}function oa(n){const e=n.reduce((t,r)=>t+Math.pow(r,2),0);return n.map(t=>t/Math.sqrt(e))}function px(n,e,t=!1){const r=n[0]*e[1]-n[1]*e[0];let i=Math.acos(ni(n,e).reduce((a,s)=>a+s,0)/(ot(n,s3)*ot(e,s3)));return t&&r<0&&(i=2*Math.PI-i),i}function uf(n,e=!0){return e?[-n[1],n[0]]:[n[1],-n[0]]}function dg(n,e){return n.map(t=>t%e)}function Js(n){return[n[0],n[1]]}function Al(n){return u$(n)?[n[0],n[1],0]:n}function y4(n){const[e,t]=n;return!e&&!t?0:Math.atan2(t,e)}function b4(n,e){const[t,r]=n,[i,a]=e,s=Ke(t,r),o=Ke(i,a);return B$(s,o).every(u=>u===0)}function vx(n,e,t=!1){if(b4(n,e))return;const[r,i]=n,[a,s]=e,o=((r[0]-a[0])*(a[1]-s[1])-(r[1]-a[1])*(a[0]-s[0]))/((r[0]-i[0])*(a[1]-s[1])-(r[1]-i[1])*(a[0]-s[0])),u=s[0]-a[0]?(r[0]-a[0]+o*(i[0]-r[0]))/(s[0]-a[0]):(r[1]-a[1]+o*(i[1]-r[1]))/(s[1]-a[1]);if(!(!t&&(!Ni(o,0,1)||!Ni(u,0,1))))return[r[0]+o*(i[0]-r[0]),r[1]+o*(i[1]-r[1])]}function x4(n){if(Array.isArray(n))return Ni(n[0],0,1)&&Ni(n[1],0,1)?n:[.5,.5];const e=n.split("-"),t=e.includes("left")?0:e.includes("right")?1:.5,r=e.includes("top")?0:e.includes("bottom")?1:.5;return[t,r]}function Ut(n){const{x:e=0,y:t=0,z:r=0}=n.style||{};return[+e,+t,+r]}function z$(n){const{x:e,y:t,z:r}=n.style||{};return e!==void 0||t!==void 0||r!==void 0}function $$(n,e){const[t,r]=e,{min:i,max:a}=n;return[i[0]+t*(a[0]-i[0]),i[1]+r*(a[1]-i[1])]}function Ji(n,e="center"){const t=x4(e);return $$(n,t)}function pn(n){var e;return[n.x,n.y,(e=n.z)!==null&&e!==void 0?e:0]}function ri(n){var e;return{x:n[0],y:n[1],z:(e=n[2])!==null&&e!==void 0?e:0}}function Nu(n,e=0){return n.map(t=>parseFloat(t.toFixed(e)))}function ts(n,e,t,r=!1){if(Dt(n,e))return n;const i=r?Ke(n,e):Ke(e,n),a=oa(i),s=[a[0]*t,a[1]*t];return xe(Js(n),s)}function w4(n,e){return n[1]===e[1]}function j$(n,e){return n[0]===e[0]}function q$(n,e){return w4(n,e)||j$(n,e)}function E4(n,e,t){return b4([n,e],[e,t])}function _4(n,e){return[2*e[0]-n[0],2*e[1]-n[1]]}function S4(n,e,t,r=!0,i=!1){for(let a=0;a<t.length;a++){let s=t[a],o=t[(a+1)%t.length];r&&(s=xe(e,s),o=xe(e,o));const u=i?_4(n,e):n,l=vx([e,u],[s,o]);if(l)return{point:l,line:[s,o]}}return{point:e,line:void 0}}function G$(n,e,t,r){const i=n[0],a=n[1];let s=!1;t===void 0&&(t=0),r===void 0&&(r=e.length);const o=r-t;for(let u=0,l=o-1;u<o;l=u++){const c=e[u+t][0],h=e[u+t][1],d=e[l+t][0],f=e[l+t][1];h>a!=f>a&&i<(d-c)*(a-h)/(f-h)+c&&(s=!s)}return s}function W$(n,e,t=!1){const r=Ji(e,"center"),i=[Ji(e,"left-top"),Ji(e,"right-top"),Ji(e,"right-bottom"),Ji(e,"left-bottom")];return S4(n,r,i,!1,t).point}function lf(n,e,t=!1){const r=e.center,i=t?_4(n,r):n,a=Ke(i,e.center),s=Math.atan2(a[1],a[0]);if(isNaN(s))return r;const o=Li(e)/2,u=Ii(e)/2,l=r[0]+o*Math.cos(s),c=r[1]+u*Math.sin(s);return[l,c]}function V$(n,e){let t=1/0,r=[n[0],e[0]];return n.forEach(i=>{e.forEach(a=>{const s=ot(i,a);s<t&&(t=s,r=[i,a])})}),r}function U$(n,e){let t=1/0,r=[[0,0],[0,0]];return e.forEach(i=>{const a=H$(n,i);a<t&&(t=a,r=i)}),r}function H$(n,e){const t=k4(n,e);return ot(n,t)}function k4(n,e){const[t,r]=e[0],[i,a]=e[1],[s,o]=n,u=i-t,l=a-r;if(u===0&&l===0)return[t,r];let c=((s-t)*u+(o-r)*l)/(u*u+l*l);c>1?c=1:c<0&&(c=0);const h=t+c*u,d=r+c*l;return[h,d]}function Y$(n){const e=n.reduce((t,r)=>xe(t,r),[0,0]);return oi(e,n.length)}function mx(n,e=!0){const t=Y$(n);return n.sort(([r,i],[a,s])=>{const o=Math.atan2(i-t[1],r-t[0]),u=Math.atan2(s-t[1],a-t[0]);return e?u-o:o-u})}function o3(n,e){return[n,[n[0],e[1]],e,[e[0],n[1]]]}class Pt{constructor(e,t,r){if(this.phase=t,this.pointerByTouch=[],this.initialDistance=null,this.emitter=e,Pt.instance)return Pt.callbacks[this.phase].push(r),Pt.instance;this.onPointerDown=this.onPointerDown.bind(this),this.onPointerMove=this.onPointerMove.bind(this),this.onPointerUp=this.onPointerUp.bind(this),this.bindEvents(),Pt.instance=this,Pt.callbacks[this.phase].push(r)}bindEvents(){const{emitter:e}=this;e.on(G.POINTER_DOWN,this.onPointerDown),e.on(G.POINTER_MOVE,this.onPointerMove),e.on(G.POINTER_UP,this.onPointerUp)}updatePointerPosition(e,t,r){const i=this.pointerByTouch.findIndex(a=>a.pointerId===e);i>=0&&(this.pointerByTouch[i]={x:t,y:r,pointerId:e})}onPointerDown(e){const{x:t,y:r}=e.client||{};if(!(t===void 0||r===void 0)&&(this.pointerByTouch.push({x:t,y:r,pointerId:e.pointerId}),e.pointerType==="touch"&&this.pointerByTouch.length===2)){Pt.isPinching=!0;const i=this.pointerByTouch[0].x-this.pointerByTouch[1].x,a=this.pointerByTouch[0].y-this.pointerByTouch[1].y;this.initialDistance=Math.sqrt(i*i+a*a),Pt.callbacks.pinchstart.forEach(s=>s(e,{scale:0}))}}onPointerMove(e){if(this.pointerByTouch.length!==2||this.initialDistance===null)return;const{x:t,y:r}=e.client||{};if(t===void 0||r===void 0)return;this.updatePointerPosition(e.pointerId,t,r);const i=this.pointerByTouch[0].x-this.pointerByTouch[1].x,a=this.pointerByTouch[0].y-this.pointerByTouch[1].y,o=Math.sqrt(i*i+a*a)/this.initialDistance;Pt.callbacks.pinchmove.forEach(u=>u(e,{scale:(o-1)*5}))}onPointerUp(e){var t;Pt.callbacks.pinchend.forEach(r=>r(e,{scale:0})),Pt.isPinching=!1,this.initialDistance=null,this.pointerByTouch=[],(t=Pt.instance)===null||t===void 0||t.tryDestroy()}destroy(){this.emitter.off(G.POINTER_DOWN,this.onPointerDown),this.emitter.off(G.POINTER_MOVE,this.onPointerMove),this.emitter.off(G.POINTER_UP,this.onPointerUp),Pt.instance=null}off(e,t){const r=Pt.callbacks[e].indexOf(t);r>-1&&Pt.callbacks[e].splice(r,1),this.tryDestroy()}tryDestroy(){Object.values(Pt.callbacks).every(e=>e.length===0)&&this.destroy()}}Pt.isPinching=!1;Pt.instance=null;Pt.callbacks={pinchstart:[],pinchmove:[],pinchend:[]};const u3=n=>n.map(e=>qe(e)?e.toLocaleLowerCase():e);class fu{constructor(e){this.map=new Map,this.boundHandlePinch=()=>{},this.recordKey=new Set,this.onKeyDown=t=>{t!=null&&t.key&&(this.recordKey.add(t.key),this.trigger(t))},this.onKeyUp=t=>{t!=null&&t.key&&this.recordKey.delete(t.key)},this.onWheel=t=>{this.triggerExtendKey(G.WHEEL,t)},this.onDrag=t=>{this.triggerExtendKey(G.DRAG,t)},this.handlePinch=(t,r)=>{this.triggerExtendKey(G.PINCH,Object.assign(Object.assign({},t),r))},this.onFocus=()=>{this.recordKey.clear()},this.emitter=e,this.bindEvents()}bind(e,t){e.length!==0&&(e.includes(G.PINCH)&&!this.pinchHandler&&(this.boundHandlePinch=this.handlePinch.bind(this),this.pinchHandler=new Pt(this.emitter,"pinchmove",this.boundHandlePinch)),this.map.set(e,t))}unbind(e,t){this.map.forEach((r,i)=>{Dt(i,e)&&(!t||t===r)&&this.map.delete(i)})}unbindAll(){this.map.clear()}match(e){const t=u3(Array.from(this.recordKey)).sort(),r=u3(e).sort();return Dt(t,r)}bindEvents(){var e;const{emitter:t}=this;t.on(G.KEY_DOWN,this.onKeyDown),t.on(G.KEY_UP,this.onKeyUp),t.on(G.WHEEL,this.onWheel),t.on(G.DRAG,this.onDrag),(e=globalThis.addEventListener)===null||e===void 0||e.call(globalThis,"focus",this.onFocus)}trigger(e){this.map.forEach((t,r)=>{this.match(r)&&t(e)})}triggerExtendKey(e,t){this.map.forEach((r,i)=>{i.includes(e)&&Dt(Array.from(this.recordKey),i.filter(a=>a!==e))&&r(t)})}destroy(){var e,t;this.unbindAll(),this.emitter.off(G.KEY_DOWN,this.onKeyDown),this.emitter.off(G.KEY_UP,this.onKeyUp),this.emitter.off(G.WHEEL,this.onWheel),this.emitter.off(G.DRAG,this.onDrag),(e=this.pinchHandler)===null||e===void 0||e.off("pinchmove",this.boundHandlePinch),(t=globalThis.removeEventListener)===null||t===void 0||t.call(globalThis,"blur",this.onFocus)}}class rc extends _r{constructor(e,t){super(e,jn({},rc.defaultOptions,t)),this.shortcut=new fu(e.graph),this.onPointerDown=this.onPointerDown.bind(this),this.onPointerMove=this.onPointerMove.bind(this),this.onPointerUp=this.onPointerUp.bind(this),this.clearStates=this.clearStates.bind(this),this.bindEvents()}onPointerDown(e){if(!this.validate(e)||!this.isKeydown()||this.startPoint)return;const{canvas:t,graph:r}=this.context,i=Object.assign({},this.options.style);this.options.style.lineWidth&&(i.lineWidth=+this.options.style.lineWidth/r.getZoom()),this.rectShape=new mn({id:"g6-brush-select",style:i}),t.appendChild(this.rectShape),this.startPoint=[e.canvas.x,e.canvas.y]}onPointerMove(e){var t;if(!this.startPoint)return;const{immediately:r,mode:i}=this.options;this.endPoint=Ed(e),(t=this.rectShape)===null||t===void 0||t.attr({x:Math.min(this.endPoint[0],this.startPoint[0]),y:Math.min(this.endPoint[1],this.startPoint[1]),width:Math.abs(this.endPoint[0]-this.startPoint[0]),height:Math.abs(this.endPoint[1]-this.startPoint[1])}),r&&i==="default"&&this.updateElementsStates(o3(this.startPoint,this.endPoint))}onPointerUp(e){if(this.startPoint){if(!this.endPoint){this.clearBrush();return}this.endPoint=Ed(e),this.updateElementsStates(o3(this.startPoint,this.endPoint)),this.clearBrush()}}clearStates(){this.endPoint||this.clearElementsStates()}clearElementsStates(){const{graph:e}=this.context,t=Object.values(e.getData()).reduce((r,i)=>Object.assign({},r,i.reduce((a,s)=>(a[z(s)]=[],a),{})),{});e.setElementState(t,this.options.animation)}updateElementsStates(e){const{graph:t}=this.context,{enableElements:r,state:i,mode:a,onSelect:s}=this.options,o=this.selector(t,e,r);let u={};switch(a){case"union":o.forEach(l=>{u[l]=[...t.getElementState(l),i]});break;case"diff":o.forEach(l=>{const c=t.getElementState(l);u[l]=c.includes(i)?c.filter(h=>h!==i):[...c,i]});break;case"intersect":o.forEach(l=>{const c=t.getElementState(l);u[l]=c.includes(i)?[i]:[]});break;case"default":default:o.forEach(l=>{u[l]=[i]});break}se(s)&&(u=s(u)),t.setElementState(u,this.options.animation)}selector(e,t,r){if(!r||r.length===0)return[];const i=[],a=e.getData();if(r.forEach(s=>{a[`${s}s`].forEach(o=>{const u=z(o);e.getElementVisibility(u)!=="hidden"&&G$(e.getElementPosition(u),t)&&i.push(u)})}),r.includes("edge")){const s=a.edges;s==null||s.forEach(o=>{const{source:u,target:l}=o;i.includes(u)&&i.includes(l)&&i.push(z(o))})}return i}clearBrush(){var e;(e=this.rectShape)===null||e===void 0||e.remove(),this.rectShape=void 0,this.startPoint=void 0,this.endPoint=void 0}isKeydown(){const{trigger:e}=this.options,t=Array.isArray(e)?e:[e];return this.shortcut.match(t.filter(r=>r!=="drag"))}validate(e){if(this.destroyed)return!1;const{enable:t}=this.options;return se(t)?t(e):!!t}bindEvents(){const{graph:e}=this.context;e.on(G.POINTER_DOWN,this.onPointerDown),e.on(G.POINTER_MOVE,this.onPointerMove),e.on(G.POINTER_UP,this.onPointerUp),e.on(ua.CLICK,this.clearStates)}unbindEvents(){const{graph:e}=this.context;e.off(G.POINTER_DOWN,this.onPointerDown),e.off(G.POINTER_MOVE,this.onPointerMove),e.off(G.POINTER_UP,this.onPointerUp),e.off(ua.CLICK,this.clearStates)}update(e){this.unbindEvents(),this.options=jn(this.options,e),this.bindEvents()}destroy(){this.unbindEvents(),super.destroy()}}rc.defaultOptions={animation:!1,enable:!0,enableElements:["node","combo","edge"],immediately:!1,mode:"default",state:"selected",trigger:["shift"],style:{width:0,height:0,lineWidth:1,fill:"#1677FF",stroke:"#1677FF",fillOpacity:.1,zIndex:2,pointerEvents:"none"}};const Ed=n=>[n.canvas.x,n.canvas.y],ca=.8,Qs=["node","edge","combo"];function Wo(n,e,t,r,i=0){r==="TB"&&e(n,i);const a=t(n);if(a)for(const s of a)Wo(s,e,t,r,i+1);r==="BT"&&e(n,i)}function X$(n,e,t){const r=[[n,0]];for(;r.length;){const[i,a]=r.shift();e(i,a);const s=t(i);if(s)for(const o of s)r.push([o,a+1])}}function C4(n,e,t,r,i="both"){if(e==="combo"||e==="node")return fg(n,t,r,i);const a=n.getEdgeData(t);if(!a)return[];const s=fg(n,a.source,r-1,i),o=fg(n,a.target,r-1,i);return Array.from(new Set([...s,...o,t]))}function fg(n,e,t,r="both"){const i=new Set,a=new Set,s=new Set;return X$(e,(o,u)=>{u>t||(s.add(o),n.getRelatedEdgesData(o,r).forEach(l=>{const c=z(l);!a.has(c)&&u<t&&(s.add(c),a.add(c))}))},o=>n.getRelatedEdgesData(o,r).map(u=>u.source===o?u.target:u.source).filter(u=>i.has(u)?!1:(i.add(u),!0))),Array.from(s)}function gg(n){return n.states||[]}var Jc=globalThis&&globalThis.__awaiter||function(n,e,t,r){function i(a){return a instanceof t?a:new t(function(s){s(a)})}return new(t||(t=Promise))(function(a,s){function o(c){try{l(r.next(c))}catch(h){s(h)}}function u(c){try{l(r.throw(c))}catch(h){s(h)}}function l(c){c.done?a(c.value):i(c.value).then(o,u)}l((r=r.apply(n,e||[])).next())})};class cf extends _r{constructor(e,t){super(e,Object.assign({},cf.defaultOptions,t)),this.onClickSelect=r=>Jc(this,void 0,void 0,function*(){var i,a;this.validate(r)&&(yield this.updateState(r),(a=(i=this.options).onClick)===null||a===void 0||a.call(i,r))}),this.onClickCanvas=r=>Jc(this,void 0,void 0,function*(){var i,a;this.validate(r)&&(yield this.clearState(),(a=(i=this.options).onClick)===null||a===void 0||a.call(i,r))}),this.shortcut=new fu(e.graph),this.bindEvents()}bindEvents(){const{graph:e}=this.context;this.unbindEvents(),Qs.forEach(t=>{e.on(`${t}:${G.CLICK}`,this.onClickSelect)}),e.on(ua.CLICK,this.onClickCanvas)}get isMultipleSelect(){const{multiple:e,trigger:t}=this.options;return e&&this.shortcut.match(t)}getNeighborIds(e){const{target:t,targetType:r}=e,{graph:i}=this.context,{degree:a}=this.options;return C4(i,r,t.id,typeof a=="function"?a(e):a).filter(s=>s!==t.id)}updateState(e){return Jc(this,void 0,void 0,function*(){const{state:t,unselectedState:r,neighborState:i,animation:a}=this.options;if(!t&&!i&&!r)return;const{target:s}=e,{graph:o}=this.context,u=o.getElementData(s.id),l=gg(u).includes(t)?"unselect":"select",c={},h=this.isMultipleSelect,d=[s.id],f=this.getNeighborIds(e);if(h)if(Object.assign(c,this.getDataStates()),l==="select"){const g=(p,v)=>{p.forEach(m=>{const y=new Set(o.getElementState(m));y.add(v),y.delete(r),c[m]=Array.from(y)})};g(d,t),g(f,i),r&&Object.keys(c).forEach(p=>{const v=c[p];!v.includes(t)&&!v.includes(i)&&!v.includes(r)&&c[p].push(r)})}else{const g=c[s.id];c[s.id]=g.filter(p=>p!==t&&p!==i),g.includes(r)||c[s.id].push(r),f.forEach(p=>{c[p]=c[p].filter(v=>v!==i),c[p].includes(t)||c[p].push(r)})}else if(l==="select"){Object.assign(c,this.getClearStates(!!r));const g=(p,v)=>{p.forEach(m=>{c[m]||(c[m]=o.getElementState(m)),c[m].push(v)})};g(d,t),g(f,i),r&&Object.keys(c).forEach(p=>{!d.includes(p)&&!f.includes(p)&&c[p].push(r)})}else Object.assign(c,this.getClearStates());yield o.setElementState(c,a)})}getDataStates(){const{graph:e}=this.context,{nodes:t,edges:r,combos:i}=e.getData(),a={};return[...t,...r,...i].forEach(s=>{a[z(s)]=gg(s)}),a}getClearStates(e=!1){const{graph:t}=this.context,{state:r,unselectedState:i,neighborState:a}=this.options,s=new Set([r,i,a]),{nodes:o,edges:u,combos:l}=t.getData(),c={};return[...o,...u,...l].forEach(h=>{const d=gg(h),f=d.filter(g=>!s.has(g));(e||f.length!==d.length)&&(c[z(h)]=f)}),c}clearState(){return Jc(this,void 0,void 0,function*(){const{graph:e}=this.context;yield e.setElementState(this.getClearStates(),this.options.animation)})}validate(e){if(this.destroyed)return!1;const{enable:t}=this.options;return se(t)?t(e):!!t}unbindEvents(){const{graph:e}=this.context;Qs.forEach(t=>{e.off(`${t}:${G.CLICK}`,this.onClickSelect)}),e.off(ua.CLICK,this.onClickCanvas)}destroy(){this.unbindEvents(),super.destroy()}}cf.defaultOptions={animation:!0,enable:!0,multiple:!1,trigger:["shift"],state:"selected",neighborState:"selected",unselectedState:void 0,degree:0};function Zn(n){var e;return!!(!((e=n.style)===null||e===void 0)&&e.collapsed)}function _d(n,e){if(!n.startsWith(e))return!1;const t=n[e.length];return t>="A"&&t<="Z"}function K$(n,e){return`${e}${ud(n)}`}function Z$(n,e,t=!0){if(!e||!_d(n,e))return n;const r=n.slice(e.length);return t?wI(r):r}function Bt(n,e){const t=Object.entries(n).reduce((r,[i,a])=>(i==="className"||i==="class"||_d(i,e)&&Object.assign(r,{[Z$(i,e)]:a}),r),{});if("opacity"in n){const r=K$("opacity",e),i=n.opacity;if(r in n){const a=n[r];Object.assign(t,{opacity:i*a})}else Object.assign(t,{opacity:i})}return t}function Ab(n,e){const t=e.length;return Object.keys(n).reduce((r,i)=>{if(i.startsWith(e)){const a=i.slice(t);r[a]=n[i]}return r},{})}function A4(n,e){const t=typeof e=="string"?[e]:e,r={};return Object.keys(n).forEach(i=>{t.find(a=>i.startsWith(a))||(r[i]=n[i])}),r}function mr(n=0){if(typeof n=="number")return[n,n,n];const[e,t=e,r=e]=n;return[e,t,r]}var J$=globalThis&&globalThis.__rest||function(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(n);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(t[r[i]]=n[r[i]]);return t};function l3(n,e){const{datum:t,graph:r}=e;return typeof n=="function"?n.call(r,t):Object.fromEntries(Object.entries(n).map(([i,a])=>typeof a=="function"?[i,a.call(r,t)]:[i,a]))}function ln(n,e){const t=(n==null?void 0:n.style)||{},r=(e==null?void 0:e.style)||{};for(const i in t)i in r||(r[i]=t[i]);return Object.assign({},n,e,{style:r})}function Q$(n){return J$(n,["x","y","z","class","className","transform","transformOrigin","zIndex","visibility"])}function ej(n,e){const t=mr(n);let r={};return e.text&&!e.fontSize&&(r={fontSize:Math.min(...t)*.5}),e.src&&(!e.width||!e.height)&&(r={width:t[0]*.5,height:t[1]*.5}),r}function c3(n){if(n)return typeof n=="string"||typeof n=="function"||Array.isArray(n)?{type:"group",field:e=>e.id,color:n,invert:!1}:n}function tj(n,e){if(!e)return{};const{type:t,color:r,field:i,invert:a}=e,s=u=>{const l=typeof r=="string"?la("palette",r):r;if(typeof l=="function"){const c={};return u.forEach(([h,d])=>{c[h]=l(a?1-d:d)}),c}else if(Array.isArray(l)){const c=a?[...l].reverse():l,h={};return u.forEach(([d,f])=>{h[d]=c[f%l.length]}),h}return{}},o=(u,l)=>{var c;return typeof u=="string"?(c=l.data)===null||c===void 0?void 0:c[u]:u==null?void 0:u(l)};if(t==="group"){const u=ef(n,d=>{if(!i)return"default";const f=o(i,d);return f?String(f):"default"}),l=Object.keys(u),c=s(l.map((d,f)=>[d,f])),h={};return Object.entries(u).forEach(([d,f])=>{f.forEach(g=>{h[z(g)]=c[d]})}),h}else if(t==="value"){const[u,l]=n.reduce(([h,d],f)=>{const g=o(i,f);if(typeof g!="number")throw new Error(na(`Palette field ${i} is not a number`));return[Math.min(h,g),Math.max(d,g)]},[1/0,-1/0]),c=l-u;return s(n.map(h=>[h.id,(o(i,h)-u)/c]))}}function T4(n){const e=typeof n=="string"?la("palette",n):n;if(typeof e!="function")return e}function O4(n,e){let t=2*n;return typeof e=="string"?t=n*Number(e.replace("%",""))/100:typeof e=="number"&&(t=e),isNaN(t)&&(t=2*n),t}function M4(n,e,t=1,r=!1){const i=r?t:1,a=(n.max[0]-n.min[0])*i;return O4(a,e)}function nj(n,e,t=1){const r=ot(n[0],n[1])*t;return O4(r,e)}class ic extends sx{constructor(e){h3(e.style),super(e),this.shapeMap={},this.animateMap={},this.render(this.attributes,this),this.setVisibility(),this.bindEvents()}get parsedAttributes(){return this.attributes}upsert(e,t,r,i,a){var s,o,u,l,c,h,d,f;const g=this.shapeMap[e];if(r===!1){g&&((s=a==null?void 0:a.beforeDestroy)===null||s===void 0||s.call(a,g),i.removeChild(g),delete this.shapeMap[e],(o=a==null?void 0:a.afterDestroy)===null||o===void 0||o.call(a,g));return}const p=typeof t=="string"?la(kl.SHAPE,t):t;if(!p)throw new Error(na(`Shape ${t} not found`));if(!g||g.destroyed||!(g instanceof p)){g&&((u=a==null?void 0:a.beforeDestroy)===null||u===void 0||u.call(a,g),g==null||g.destroy(),(l=a==null?void 0:a.afterDestroy)===null||l===void 0||l.call(a,g)),(c=a==null?void 0:a.beforeCreate)===null||c===void 0||c.call(a);const v=new p({className:e,style:r});return i.appendChild(v),this.shapeMap[e]=v,(h=a==null?void 0:a.afterCreate)===null||h===void 0||h.call(a,v),v}return(d=a==null?void 0:a.beforeUpdate)===null||d===void 0||d.call(a,g),Lb(g,r),(f=a==null?void 0:a.afterUpdate)===null||f===void 0||f.call(a,g),g}update(e={}){const t=Object.assign({},this.attributes,e);h3(t),Zq(this,t),this.render(t,this),this.setVisibility()}bindEvents(){}getGraphicStyle(e){return Q$(e)}get compositeShapes(){return[["badges","badge-"],["ports","port-"]]}animate(e,t){if(e.length===0)return null;const r=[];if(e[0].x!==void 0||e[0].y!==void 0||e[0].z!==void 0){const{x:a=0,y:s=0,z:o=0}=this.attributes;e.forEach(u=>{const{x:l=a,y:c=s,z:h=o}=u;Object.assign(u,{transform:h?[["translate3d",l,c,h]]:[["translate",l,c]]})})}const i=super.animate(e,t);if(i&&(pg(this,i),r.push(i)),Array.isArray(e)&&e.length>0){const a=["transform","transformOrigin","x","y","z","zIndex"];if(Object.keys(e[0]).some(s=>!a.includes(s))){Object.entries(this.shapeMap).forEach(([o,u])=>{const l=`get${ud(o)}Style`,c=this[l];if(se(c)){const h=e.map(f=>c.call(this,Object.assign(Object.assign({},this.attributes),f))),d=u.animate(Cb(h),t);d&&(pg(u,d),r.push(d))}});const s=(o,u)=>{if(!wi(o)){const l=`get${ud(u)}Style`,c=this[l];if(se(c)){const h=e.map(d=>c.call(this,Object.assign(Object.assign({},this.attributes),d)));Object.entries(h[0]).map(([d])=>{const f=h.map(p=>p[d]),g=o[d];if(g){const p=g.animate(Cb(f),t);p&&(pg(g,p),r.push(p))}})}}};this.compositeShapes.forEach(([o,u])=>{const l=Ab(this.shapeMap,u);s(l,o)})}}return cx(r)}getShape(e){return this.shapeMap[e]}setVisibility(){const{visibility:e}=this.attributes;Zs(this,e)}destroy(){this.shapeMap={},this.animateMap={},super.destroy()}}function pg(n,e){e==null||e.finished.then(()=>{const t=n.activeAnimations.findIndex(r=>r===e);t>-1&&n.activeAnimations.splice(t,1)})}function h3(n){if(!n)return{};if("x"in n||"y"in n||"z"in n){const{x:e=0,y:t=0,z:r,transform:i}=n,a=s4(e,t,r,i);a&&(n.transform=a)}return n}var rj=globalThis&&globalThis.__rest||function(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(n);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(t[r[i]]=n[r[i]]);return t};class fs extends ic{constructor(e){super(ln({style:fs.defaultStyleProps},e))}isTextStyle(e){return _d(e,"label")}isBackgroundStyle(e){return _d(e,"background")}getTextStyle(e){const t=this.getGraphicStyle(e),r=rj(t,["padding"]);return A4(r,"background")}getBackgroundStyle(e){if(e.background===!1)return!1;const t=this.getGraphicStyle(e),{wordWrap:r,wordWrapWidth:i,padding:a}=t,s=Bt(t,"background"),{min:[o,u],center:[l,c],halfExtents:[h,d]}=this.shapeMap.text.getGeometryBounds(),[f,g,p,v]=Ri(a),m=h*2+v+g,{width:y,height:b}=s;y&&b?Object.assign(s,{x:l-Number(y)/2,y:c-Number(b)/2}):Object.assign(s,{x:o-v,y:u-f,width:r?Math.min(m,i+v+g):m,height:d*2+f+p});const{radius:x}=s;if(typeof x=="string"&&x.endsWith("%")){const w=Number(x.replace("%",""))/100;s.radius=Math.min(+s.width,+s.height)*w}return s}render(e=this.parsedAttributes,t=this){this.upsert("text",io,this.getTextStyle(e),t),this.upsert("background",mn,this.getBackgroundStyle(e),t)}getGeometryBounds(){return(this.getShape("background")||this.getShape("text")).getGeometryBounds()}}fs.defaultStyleProps={padding:0,fontSize:12,fontFamily:"system-ui, sans-serif",wordWrap:!0,maxLines:1,wordWrapWidth:128,textOverflow:"...",textBaseline:"middle",backgroundOpacity:.75,backgroundZIndex:-1,backgroundLineWidth:0};class gu extends ic{constructor(e){super(ln({style:gu.defaultStyleProps},e))}getBadgeStyle(e){return this.getGraphicStyle(e)}render(e=this.parsedAttributes,t=this){this.upsert("label",fs,this.getBadgeStyle(e),t)}getGeometryBounds(){const e=this.getShape("label");return(e.getShape("background")||e.getShape("text")).getGeometryBounds()}}gu.defaultStyleProps={padding:[2,4,2,4],fontSize:10,wordWrap:!1,backgroundRadius:"50%",backgroundOpacity:1};function ij(n,e=!0){const t=[];return n.forEach((r,i)=>{t.push([i===0?"M":"L",...r])}),e&&t.push(["Z"]),t}const d3={M:["x","y"],m:["dx","dy"],H:["x"],h:["dx"],V:["y"],v:["dy"],L:["x","y"],l:["dx","dy"],Z:[],z:[],C:["x1","y1","x2","y2","x","y"],c:["dx1","dy1","dx2","dy2","dx","dy"],S:["x2","y2","x","y"],s:["dx2","dy2","dx","dy"],Q:["x1","y1","x","y"],q:["dx1","dy1","dx","dy"],T:["x","y"],t:["dx","dy"],A:["rx","ry","rotation","large-arc","sweep","x","y"],a:["rx","ry","rotation","large-arc","sweep","dx","dy"]};function aj(n){const e=n.replace(/[\n\r]/g,"").replace(/-/g," -").replace(/(\d*\.)(\d+)(?=\.)/g,"$1$2 ").trim().split(/\s*,|\s+/),t=[];let r="",i={};for(;e.length>0;){let a=e.shift();a in d3?r=a:e.unshift(a),i={type:r},d3[r].forEach(u=>{a=e.shift(),i[u]=a}),r==="M"?r="L":r==="m"&&(r="l");const[s,...o]=Object.values(i);t.push([s,...o.map(Number)])}return t}function sj(n){const e=[];return(typeof n=="string"?aj(n):n).forEach(r=>{const i=r[0];if(i==="Z"){e.push(e[0]);return}if(i!=="A")for(let a=1;a<r.length;a=a+2)e.push([r[a],r[a+1],0]);else{const a=r.length;e.push([r[a-2],r[a-1],0])}}),e}const P4=n=>{if(n.length<2)return[["M",0,0],["L",0,0]];const e=n[0],t=n[1],r=n[n.length-1],i=n[n.length-2];n.unshift(i,r),n.push(e,t);const a=[["M",r[0],r[1]]];for(let s=1;s<n.length-2;s+=1){const[o,u]=n[s-1],[l,c]=n[s],[h,d]=n[s+1],[f,g]=s!==n.length-2?n[s+2]:[h,d],p=l+(h-o)/6,v=c+(d-u)/6,m=h-(f-l)/6,y=d-(g-c)/6;a.push(["C",p,v,m,y,h,d])}return a};function oj(n,e,t,r,i,a,s){const[o,u]=Ji(n,e),l={textAlign:e==="left"?"right":e==="right"?"left":"center",textBaseline:e==="top"?"bottom":e==="bottom"?"top":"middle",transform:[["translate",o+t,u+r]]};if(e==="center"||!i)return l;const c=sj(a);if(!c||c.length<=3)return l;const h=c.map((g,p)=>{const v=g,m=c[(p+1)%c.length];return Dt(v,m)?null:[v,m]}).filter(Boolean),d=U$([o,u],h),f=k4([o,u],d);if(f&&d&&(l.transform=[["translate",f[0]+t,f[1]+r]],s)){const g=Math.atan((d[0][1]-d[1][1])/(d[0][0]-d[1][0]));l.transform.push(["rotate",g/Math.PI*180]),l.textAlign="center",(e==="right"||e==="left")&&(g>0?l.textBaseline=e==="right"?"bottom":"top":l.textBaseline=e==="right"?"top":"bottom")}return l}var uj=globalThis&&globalThis.__rest||function(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(n);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(t[r[i]]=n[r[i]]);return t};class ac extends ic{constructor(e){super(ln({style:ac.defaultStyleProps},e))}getLabelStyle(e){if(!e.label||!e.d||e.d.length===0)return!1;const t=Bt(this.getGraphicStyle(e),"label"),{maxWidth:r,offsetX:i,offsetY:a,autoRotate:s,placement:o,closeToPath:u}=t,l=uj(t,["maxWidth","offsetX","offsetY","autoRotate","placement","closeToPath"]),c=this.shapeMap.key,h=c==null?void 0:c.getRenderBounds();return Object.assign(oj(h,o,i,a,u,e.d,s),{wordWrapWidth:M4(h,r)},l)}getKeyStyle(e){return this.getGraphicStyle(e)}render(e,t){this.upsert("key",fr,this.getKeyStyle(e),t),this.upsert("label",fs,this.getLabelStyle(e),t)}}ac.defaultStyleProps={label:!0,labelPlacement:"bottom",labelCloseToPath:!0,labelAutoRotate:!0,labelOffsetX:0,labelOffsetY:0};function lj(n){const e=[],t=r=>{r!=null&&r.children.length&&r.children.forEach(i=>{e.push(i),t(i)})};return t(n),e}function cj(n){const e=[];let t=n.parentNode;for(;t;)e.push(t),t=t.parentNode;return e}let yx=class extends tc{constructor(e){super(e),this.onMounted=()=>{this.handleRadius()},this.onAttrModified=()=>{this.handleRadius()},Po=this,this.isMutationObserved=!0,this.addEventListener(De.MOUNTED,this.onMounted),this.addEventListener(De.ATTR_MODIFIED,this.onAttrModified)}handleRadius(){const{radius:e,clipPath:t,width:r=0,height:i=0}=this.attributes;if(e&&r&&i){const[a,s]=this.getBounds().min,o={x:a,y:s,radius:e,width:r,height:i};if(t)Object.assign(this.parsedStyle.clipPath.style,o);else{const u=new mn({style:o});this.style.clipPath=u}}else t&&(this.style.clipPath=null)}};const Tb=new WeakMap;let Po=null;const bx=n=>{if(Po&&cj(Po).includes(n)){const e=Tb.get(n);e?e.includes(Po)||e.push(Po):Tb.set(n,[Po])}},xx=n=>{const e=Tb.get(n);e&&e.forEach(t=>t.handleRadius())};class N4 extends ic{constructor(e){super(e)}isImage(){const{src:e}=this.attributes;return!!e}getIconStyle(e=this.attributes){const{width:t=0,height:r=0}=e,i=this.getGraphicStyle(e);return this.isImage()?Object.assign({x:-t/2,y:-r/2},i):Object.assign({textBaseline:"middle",textAlign:"center"},i)}render(e=this.attributes,t=this){this.upsert("icon",this.isImage()?yx:io,this.getIconStyle(e),t)}}class D4 extends ic{get context(){return this.config.context}get parsedAttributes(){return this.attributes}onframe(){}animate(e,t){const r=super.animate(e,t);return r&&(r.onframe=()=>this.onframe(),r.finished.then(()=>this.onframe())),r}}var Qc=globalThis&&globalThis.__rest||function(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(n);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(t[r[i]]=n[r[i]]);return t};class ui extends D4{constructor(e){super(ln({style:ui.defaultStyleProps},e)),this.type="node"}getSize(e=this.attributes){const{size:t}=e;return mr(t)}getKeyStyle(e){const t=this.getGraphicStyle(e);return Object.assign(A4(t,["label","halo","icon","badge","port"]))}getLabelStyle(e){if(e.label===!1||!e.labelText)return!1;const t=Bt(this.getGraphicStyle(e),"label"),{placement:r,maxWidth:i,offsetX:a,offsetY:s}=t,o=Qc(t,["placement","maxWidth","offsetX","offsetY"]),u=this.getShape("key").getLocalBounds();return Object.assign(T3(u,r,a,s),{wordWrapWidth:M4(u,i)},o)}getHaloStyle(e){if(e.halo===!1)return!1;const t=this.getKeyStyle(e),{fill:r}=t,i=Qc(t,["fill"]),a=Bt(this.getGraphicStyle(e),"halo");return Object.assign(Object.assign(Object.assign({},i),{stroke:r}),a)}getIconStyle(e){if(e.icon===!1||!e.iconText&&!e.iconSrc)return!1;const t=Bt(this.getGraphicStyle(e),"icon");return Object.assign(ej(e.size,t),t)}getBadgesStyle(e){var t;const r=Ab(this.shapeMap,"badge-"),i={};if(Object.keys(r).forEach(h=>{i[h]=!1}),e.badge===!1||!(!((t=e.badges)===null||t===void 0)&&t.length))return i;const{badges:a=[],badgePalette:s,opacity:o=1}=e,u=Qc(e,["badges","badgePalette","opacity"]),l=T4(s),c=Bt(this.getGraphicStyle(u),"badge");return a.forEach((h,d)=>{i[d]=Object.assign(Object.assign({backgroundFill:l?l[d%(l==null?void 0:l.length)]:void 0,opacity:o},c),this.getBadgeStyle(h))}),i}getBadgeStyle(e){const t=this.getShape("key"),{placement:r="top",offsetX:i,offsetY:a}=e,s=Qc(e,["placement","offsetX","offsetY"]),o=T3(t.getLocalBounds(),r,i,a,!0);return Object.assign(Object.assign({},o),s)}getPortsStyle(e){var t;const r=this.getPorts(),i={};if(Object.keys(r).forEach(o=>{i[o]=!1}),e.port===!1||!(!((t=e.ports)===null||t===void 0)&&t.length))return i;const a=Bt(this.getGraphicStyle(e),"port"),{ports:s=[]}=e;return s.forEach((o,u)=>{const l=o.key||u,c=Object.assign(Object.assign({},a),o);if(eP(c))i[l]=!1;else{const[h,d]=this.getPortXY(e,o);i[l]=Object.assign({transform:[["translate",h,d]]},c)}}),i}getPortXY(e,t){const{placement:r="left"}=t,i=this.getShape("key");return kx(hj(this.context,i),r)}getPorts(){return Ab(this.shapeMap,"port-")}getCenter(){return this.getShape("key").getBounds().center}getIntersectPoint(e,t=!1){const r=this.getShape("key").getBounds();return W$(e,r,t)}drawHaloShape(e,t){const r=this.getHaloStyle(e),i=this.getShape("key");this.upsert("halo",i.constructor,r,t)}drawIconShape(e,t){const r=this.getIconStyle(e);this.upsert("icon",N4,r,t),bx(this)}drawBadgeShapes(e,t){const r=this.getBadgesStyle(e);Object.keys(r).forEach(i=>{const a=r[i];this.upsert(`badge-${i}`,gu,a,t)})}drawPortShapes(e,t){const r=this.getPortsStyle(e);Object.keys(r).forEach(i=>{const a=r[i],s=`port-${i}`;this.upsert(s,pa,a,t)})}drawLabelShape(e,t){const r=this.getLabelStyle(e);this.upsert("label",fs,r,t)}_drawKeyShape(e,t){return this.drawKeyShape(e,t)}render(e=this.parsedAttributes,t=this){this._drawKeyShape(e,t),this.getShape("key")&&(this.drawHaloShape(e,t),this.drawIconShape(e,t),this.drawBadgeShapes(e,t),this.drawLabelShape(e,t),this.drawPortShapes(e,t))}update(e){super.update(e),e&&("x"in e||"y"in e||"z"in e)&&xx(this)}onframe(){this.drawBadgeShapes(this.parsedAttributes,this),this.drawLabelShape(this.parsedAttributes,this)}}ui.defaultStyleProps={x:0,y:0,size:32,droppable:!0,draggable:!0,port:!0,ports:[],portZIndex:2,portLinkToCenter:!1,badge:!0,badges:[],badgeZIndex:3,halo:!1,haloDroppable:!1,haloLineDash:0,haloLineWidth:12,haloStrokeOpacity:.25,haloPointerEvents:"none",haloZIndex:-1,icon:!0,iconZIndex:1,label:!0,labelIsBillboard:!0,labelMaxWidth:"200%",labelPlacement:"bottom",labelWordWrap:!1,labelZIndex:0};function hj(n,e){if(!n)return e.getLocalBounds();const t=n.canvas.getLayer(),r=e.cloneNode();Zs(r,"hidden"),t.appendChild(r);const i=r.getLocalBounds();return r.destroy(),i}let sc=class R4 extends ui{constructor(e){super(ln({style:R4.defaultStyleProps},e))}drawKeyShape(e,t){return this.upsert("key",pa,this.getKeyStyle(e),t)}getKeyStyle(e){const t=super.getKeyStyle(e);return Object.assign(Object.assign({},t),{r:Math.min(...this.getSize(e))/2})}getIconStyle(e){const t=super.getIconStyle(e),{r}=this.getShape("key").attributes,i=r*2*ca;return t?Object.assign({width:i,height:i},t):!1}getIntersectPoint(e,t=!1){const r=this.getShape("key").getBounds();return lf(e,r,t)}};sc.defaultStyleProps={size:32};class hf extends ui{constructor(e){super(e)}get parsedAttributes(){return this.attributes}drawKeyShape(e,t){return this.upsert("key",ro,this.getKeyStyle(e),t)}getKeyStyle(e){const t=super.getKeyStyle(e);return Object.assign(Object.assign({},t),{points:this.getPoints(e)})}getIntersectPoint(e,t=!1){var r,i;const{points:a}=this.getShape("key").attributes,s=[+(((r=this.attributes)===null||r===void 0?void 0:r.x)||0),+(((i=this.attributes)===null||i===void 0?void 0:i.y)||0)];return S4(e,s,a,!0,t).point}}class dj extends hf{constructor(e){super(e)}getPoints(e){const[t,r]=this.getSize(e);return Xq(t,r)}}var fj=globalThis&&globalThis.__rest||function(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(n);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(t[r[i]]=n[r[i]]);return t};class df extends sc{constructor(e){super(ln({style:df.defaultStyleProps},e))}parseOuterR(){const{size:e}=this.parsedAttributes;return Math.min(...mr(e))/2}parseInnerR(){const{innerR:e}=this.parsedAttributes;return qe(e)?parseInt(e)/100*this.parseOuterR():e}drawDonutShape(e,t){const{donuts:r}=e;if(!(r!=null&&r.length))return;const i=r.map(h=>re(h)?{value:h}:h),a=Bt(this.getGraphicStyle(e),"donut"),s=T4(e.donutPalette);if(!s)return;const o=i.reduce((h,d)=>{var f;return h+((f=d.value)!==null&&f!==void 0?f:0)},0),u=this.parseOuterR(),l=this.parseInnerR();let c=0;i.forEach((h,d)=>{const{value:f=0,color:g=s[d%s.length]}=h,p=fj(h,["value","color"]),v=(o===0?1/i.length:f/o)*360;this.upsert(`round${d}`,fr,Object.assign(Object.assign(Object.assign({},a),{d:vj(u,l,c,c+v),fill:g}),p),t),c+=v})}render(e,t=this){super.render(e,t),this.drawDonutShape(e,t)}}df.defaultStyleProps={innerR:"50%",donuts:[],donutPalette:"tableau"};const eh=(n,e,t,r)=>[n+Math.sin(r)*t,e-Math.cos(r)*t],gj=(n,e,t,r)=>r<=0||t<=r?[["M",n-t,e],["A",t,t,0,1,1,n+t,e],["A",t,t,0,1,1,n-t,e],["Z"]]:[["M",n-t,e],["A",t,t,0,1,1,n+t,e],["A",t,t,0,1,1,n-t,e],["Z"],["M",n+r,e],["A",r,r,0,1,0,n-r,e],["A",r,r,0,1,0,n+r,e],["Z"]],pj=(n,e,t,r,i,a)=>{const[s,o]=[i/360*2*Math.PI,a/360*2*Math.PI],u=[eh(n,e,r,s),eh(n,e,t,s),eh(n,e,t,o),eh(n,e,r,o)],l=o-s>Math.PI?1:0;return[["M",u[0][0],u[0][1]],["L",u[1][0],u[1][1]],["A",t,t,0,l,1,u[2][0],u[2][1]],["L",u[3][0],u[3][1]],["A",r,r,0,l,0,u[0][0],u[0][1]],["Z"]]},vj=(n=0,e=0,t,r)=>{const[i,a]=[0,0];return Math.abs(t-r)%360<1e-6?gj(i,a,n,e):pj(i,a,n,e,t,r)};class ff extends ui{constructor(e){super(ln({style:ff.defaultStyleProps},e))}drawKeyShape(e,t){return this.upsert("key",Ql,this.getKeyStyle(e),t)}getKeyStyle(e){const t=super.getKeyStyle(e),[r,i]=this.getSize(e);return Object.assign(Object.assign({},t),{rx:r/2,ry:i/2})}getIconStyle(e){const t=super.getIconStyle(e),{rx:r,ry:i}=this.getShape("key").attributes,a=Math.min(+r,+i)*2*ca;return t?Object.assign({width:a,height:a},t):!1}getIntersectPoint(e,t=!1){const r=this.getShape("key").getBounds();return lf(e,r,t)}}ff.defaultStyleProps={size:[45,35]};class mj extends hf{constructor(e){super(e)}getOuterR(e){return e.outerR||Math.min(...this.getSize(e))/2}getPoints(e){return Jq(this.getOuterR(e))}getIconStyle(e){const t=super.getIconStyle(e),r=this.getOuterR(e)*ca;return t?Object.assign({width:r,height:r},t):!1}}/*!
 * @antv/g-plugin-canvas-path-generator
 * @description A G plugin of path generator with Canvas2D API
 * @version 2.1.18
 * @date 4/14/2025, 2:54:31 AM
 * @author AntVis
 * @docs https://g.antv.antgroup.com/
 */function yj(n,e){var t=e.cx,r=t===void 0?0:t,i=e.cy,a=i===void 0?0:i,s=e.r;n.arc(r,a,s,0,Math.PI*2,!1)}function bj(n,e){var t=e.cx,r=t===void 0?0:t,i=e.cy,a=i===void 0?0:i,s=e.rx,o=e.ry;if(n.ellipse)n.ellipse(r,a,s,o,0,0,Math.PI*2,!1);else{var u=s>o?s:o,l=s>o?1:s/o,c=s>o?o/s:1;n.save(),n.scale(l,c),n.arc(r,a,u,0,Math.PI*2)}}function xj(n,e){var t=e.x1,r=e.y1,i=e.x2,a=e.y2,s=e.markerStart,o=e.markerEnd,u=e.markerStartOffset,l=e.markerEndOffset,c=0,h=0,d=0,f=0,g=0,p,v;s&&je(s)&&u&&(p=i-t,v=a-r,g=Math.atan2(v,p),c=Math.cos(g)*(u||0),h=Math.sin(g)*(u||0)),o&&je(o)&&l&&(p=t-i,v=r-a,g=Math.atan2(v,p),d=Math.cos(g)*(l||0),f=Math.sin(g)*(l||0)),n.moveTo(t+c,r+h),n.lineTo(i+d,a+f)}function wj(n,e){var t=e.markerStart,r=e.markerEnd,i=e.markerStartOffset,a=e.markerEndOffset,s=e.d,o=s.absolutePath,u=s.segments,l=0,c=0,h=0,d=0,f=0,g,p;if(t&&je(t)&&i){var v=t.parentNode.getStartTangent(),m=Ee(v,2),y=m[0],b=m[1];g=y[0]-b[0],p=y[1]-b[1],f=Math.atan2(p,g),l=Math.cos(f)*(i||0),c=Math.sin(f)*(i||0)}if(r&&je(r)&&a){var x=r.parentNode.getEndTangent(),w=Ee(x,2),E=w[0],_=w[1];g=E[0]-_[0],p=E[1]-_[1],f=Math.atan2(p,g),h=Math.cos(f)*(a||0),d=Math.sin(f)*(a||0)}for(var S=0;S<o.length;S++){var C=o[S],k=C[0],A=o[S+1],T=S===0&&(l!==0||c!==0),O=(S===o.length-1||A&&(A[0]==="M"||A[0]==="Z"))&&h!==0&&d!==0,P=T?[l,c]:[0,0],R=Ee(P,2),N=R[0],D=R[1],M=O?[h,d]:[0,0],F=Ee(M,2),j=F[0],B=F[1];switch(k){case"M":n.moveTo(C[1]+N,C[2]+D);break;case"L":n.lineTo(C[1]+j,C[2]+B);break;case"Q":n.quadraticCurveTo(C[1],C[2],C[3]+j,C[4]+B);break;case"C":n.bezierCurveTo(C[1],C[2],C[3],C[4],C[5]+j,C[6]+B);break;case"A":{var $=u[S].arcParams,W=$.cx,Y=$.cy,K=$.rx,ee=$.ry,ie=$.startAngle,_e=$.endAngle,Ae=$.xRotation,Be=$.sweepFlag;if(n.ellipse)n.ellipse(W,Y,K,ee,Ae,ie,_e,!!(1-Be));else{var Fe=K>ee?K:ee,Ze=K>ee?1:K/ee,Kt=K>ee?ee/K:1;n.translate(W,Y),n.rotate(Ae),n.scale(Ze,Kt),n.arc(0,0,Fe,ie,_e,!!(1-Be)),n.scale(1/Ze,1/Kt),n.rotate(-Ae),n.translate(-W,-Y)}O&&n.lineTo(C[6]+h,C[7]+d);break}case"Z":n.closePath();break}}}function Ej(n,e){var t=e.markerStart,r=e.markerEnd,i=e.markerStartOffset,a=e.markerEndOffset,s=e.points.points,o=s.length,u=s[0][0],l=s[0][1],c=s[o-1][0],h=s[o-1][1],d=0,f=0,g=0,p=0,v=0,m,y;t&&je(t)&&i&&(m=s[1][0]-s[0][0],y=s[1][1]-s[0][1],v=Math.atan2(y,m),d=Math.cos(v)*(i||0),f=Math.sin(v)*(i||0)),r&&je(r)&&a&&(m=s[o-1][0]-s[0][0],y=s[o-1][1]-s[0][1],v=Math.atan2(y,m),g=Math.cos(v)*(a||0),p=Math.sin(v)*(a||0)),n.moveTo(u+(d||g),l+(f||p));for(var b=1;b<o-1;b++){var x=s[b];n.lineTo(x[0],x[1])}n.lineTo(c,h)}function _j(n,e){var t=e.markerStart,r=e.markerEnd,i=e.markerStartOffset,a=e.markerEndOffset,s=e.points.points,o=s.length,u=s[0][0],l=s[0][1],c=s[o-1][0],h=s[o-1][1],d=0,f=0,g=0,p=0,v=0,m,y;t&&je(t)&&i&&(m=s[1][0]-s[0][0],y=s[1][1]-s[0][1],v=Math.atan2(y,m),d=Math.cos(v)*(i||0),f=Math.sin(v)*(i||0)),r&&je(r)&&a&&(m=s[o-2][0]-s[o-1][0],y=s[o-2][1]-s[o-1][1],v=Math.atan2(y,m),g=Math.cos(v)*(a||0),p=Math.sin(v)*(a||0)),n.moveTo(u+d,l+f);for(var b=1;b<o-1;b++){var x=s[b];n.lineTo(x[0],x[1])}n.lineTo(c+g,h+p)}function Sj(n,e){var t=e.x,r=t===void 0?0:t,i=e.y,a=i===void 0?0:i,s=e.radius,o=e.width,u=e.height,l=o,c=u,h=s&&s.some(function(w){return w!==0});if(!h)n.rect(r,a,l,c);else{var d=o>0?1:-1,f=u>0?1:-1,g=d+f===0,p=s.map(function(w){return St(w,0,Math.min(Math.abs(l)/2,Math.abs(c)/2))}),v=Ee(p,4),m=v[0],y=v[1],b=v[2],x=v[3];n.moveTo(d*m+r,a),n.lineTo(l-d*y+r,a),y!==0&&n.arc(l-d*y+r,f*y+a,y,-f*Math.PI/2,d>0?0:Math.PI,g),n.lineTo(l+r,c-f*b+a),b!==0&&n.arc(l-d*b+r,c-f*b+a,b,d>0?0:Math.PI,f>0?Math.PI/2:1.5*Math.PI,g),n.lineTo(d*x+r,c+a),x!==0&&n.arc(d*x+r,c-f*x+a,x,f>0?Math.PI/2:-Math.PI/2,d>0?Math.PI:0,g),n.lineTo(r,f*m+a),m!==0&&n.arc(d*m+r,f*m+a,m,d>0?Math.PI:0,f>0?Math.PI*1.5:Math.PI/2,g)}}var kj=function(n){function e(){var t;U(this,e);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return t=Te(this,e,[].concat(i)),t.name="canvas-path-generator",t}return Oe(e,n),H(e,[{key:"init",value:function(){var r,i=(r={},ae(ae(ae(ae(ae(ae(ae(ae(ae(ae(r,q.CIRCLE,yj),q.ELLIPSE,bj),q.RECT,Sj),q.LINE,xj),q.POLYLINE,_j),q.POLYGON,Ej),q.PATH,wj),q.TEXT,void 0),q.GROUP,void 0),q.IMAGE,void 0),ae(ae(ae(r,q.HTML,void 0),q.MESH,void 0),q.FRAGMENT,void 0));this.context.pathGeneratorFactory=i}},{key:"destroy",value:function(){delete this.context.pathGeneratorFactory}}])}(cs);/*!
 * @antv/g-plugin-canvas-picker
 * @description A G plugin for picking in canvas
 * @version 2.1.21
 * @date 4/14/2025, 2:56:35 AM
 * @author AntVis
 * @docs https://g.antv.antgroup.com/
 */var Cj=Ie(),Aj=Ie(),Tj=Ie(),Oj=nt(),L4=function(){function n(){var e=this;U(this,n),this.isHit=function(t,r,i,a){var s=e.context.pointInPathPickerFactory[t.nodeName];if(s){var o=Ei(Oj,i),u=Mn(Aj,An(Tj,r[0],r[1],0),o);if(s(t,new gn(u[0],u[1]),a,e.isPointInPath,e.context,e.runtime))return!0}return!1},this.isPointInPath=function(t,r){var i=e.runtime.offscreenCanvasCreator.getOrCreateContext(e.context.config.offscreenCanvas),a=e.context.pathGeneratorFactory[t.nodeName];return a&&(i.beginPath(),a(i,t.parsedStyle),i.closePath()),i.isPointInPath(r.x,r.y)}}return H(n,[{key:"apply",value:function(t,r){var i,a=this,s=t.renderingService,o=t.renderingContext;this.context=t,this.runtime=r;var u=(i=o.root)===null||i===void 0?void 0:i.ownerDocument;s.hooks.pick.tapPromise(n.tag,function(){var l=as(vn().mark(function c(h){return vn().wrap(function(f){for(;;)switch(f.prev=f.next){case 0:return f.abrupt("return",a.pick(u,h));case 1:case"end":return f.stop()}},c)}));return function(c){return l.apply(this,arguments)}}()),s.hooks.pickSync.tap(n.tag,function(l){return a.pick(u,l)})}},{key:"pick",value:function(t,r){var i=r.topmost,a=r.position,s=a.x,o=a.y,u=An(Cj,s,o,0),l=t.elementsFromBBox(u[0],u[1],u[0],u[1]),c=[],h=As(l),d;try{for(h.s();!(d=h.n()).done;){var f=d.value,g=f.getWorldTransform(),p=this.isHit(f,u,g,!1);if(p){var v=FM(f);if(v){var m=v.parsedStyle.clipPath,y=this.isHit(m,u,m.getWorldTransform(),!0);if(y){if(i)return r.picked=[f],r;c.push(f)}}else{if(i)return r.picked=[f],r;c.push(f)}}}}catch(b){h.e(b)}finally{h.f()}return r.picked=c,r}}])}();L4.tag="CanvasPicker";function Mj(n,e,t){var r=n.parsedStyle,i=r.cx,a=i===void 0?0:i,s=r.cy,o=s===void 0?0:s,u=r.r,l=r.fill,c=r.stroke,h=r.lineWidth,d=h===void 0?1:h,f=r.increasedLineWidthForHitTesting,g=f===void 0?0:f,p=r.pointerEvents,v=p===void 0?"auto":p,m=(d+g)/2,y=sa(a,o,e.x,e.y),b=no(v,l,c),x=Ee(b,2),w=x[0],E=x[1];return w&&E||t?y<=u+m:w?y<=u:E?y>=u-m&&y<=u+m:!1}function th(n,e,t,r){return n/(t*t)+e/(r*r)}function Pj(n,e,t){var r=n.parsedStyle,i=r.cx,a=i===void 0?0:i,s=r.cy,o=s===void 0?0:s,u=r.rx,l=r.ry,c=r.fill,h=r.stroke,d=r.lineWidth,f=d===void 0?1:d,g=r.increasedLineWidthForHitTesting,p=g===void 0?0:g,v=r.pointerEvents,m=v===void 0?"auto":v,y=e.x,b=e.y,x=no(m,c,h),w=Ee(x,2),E=w[0],_=w[1],S=(f+p)/2,C=(y-a)*(y-a),k=(b-o)*(b-o);return E&&_||t?th(C,k,u+S,l+S)<=1:E?th(C,k,u,l)<=1:_?th(C,k,u-S,l-S)>=1&&th(C,k,u+S,l+S)<=1:!1}function Ds(n,e,t,r,i,a){return i>=n&&i<=n+t&&a>=e&&a<=e+r}function Nj(n,e,t,r,i,a,s){var o=i/2;return Ds(n-o,e-o,t,i,a,s)||Ds(n+t-o,e-o,i,r,a,s)||Ds(n+o,e+r-o,t,i,a,s)||Ds(n-o,e+o,i,r,a,s)}function nh(n,e,t,r,i,a,s,o){var u=(Math.atan2(o-e,s-n)+Math.PI*2)%(Math.PI*2),l={x:n+t*Math.cos(u),y:e+t*Math.sin(u)};return sa(l.x,l.y,s,o)<=a/2}function Va(n,e,t,r,i,a,s){var o=Math.min(n,t),u=Math.max(n,t),l=Math.min(e,r),c=Math.max(e,r),h=i/2;return a>=o-h&&a<=u+h&&s>=l-h&&s<=c+h?S9(n,e,t,r,a,s)<=i/2:!1}function I4(n,e,t,r,i){var a=n.length;if(a<2)return!1;for(var s=0;s<a-1;s++){var o=n[s][0],u=n[s][1],l=n[s+1][0],c=n[s+1][1];if(Va(o,u,l,c,e,t,r))return!0}if(i){var h=n[0],d=n[a-1];if(Va(h[0],h[1],d[0],d[1],e,t,r))return!0}return!1}var Dj=1e-6;function vg(n){return Math.abs(n)<Dj?0:n<0?-1:1}function Rj(n,e,t){return(t[0]-n[0])*(e[1]-n[1])===(e[0]-n[0])*(t[1]-n[1])&&Math.min(n[0],e[0])<=t[0]&&t[0]<=Math.max(n[0],e[0])&&Math.min(n[1],e[1])<=t[1]&&t[1]<=Math.max(n[1],e[1])}function F4(n,e,t){var r=!1,i=n.length;if(i<=2)return!1;for(var a=0;a<i;a++){var s=n[a],o=n[(a+1)%i];if(Rj(s,o,[e,t]))return!0;vg(s[1]-t)>0!=vg(o[1]-t)>0&&vg(e-(t-s[1])*(s[0]-o[0])/(s[1]-o[1])-s[0])<0&&(r=!r)}return r}function f3(n,e,t){for(var r=!1,i=0;i<n.length;i++){var a=n[i];if(r=F4(a,e,t),r)break}return r}function Lj(n,e,t){var r=n.parsedStyle,i=r.x1,a=r.y1,s=r.x2,o=r.y2,u=r.lineWidth,l=u===void 0?1:u,c=r.increasedLineWidthForHitTesting,h=c===void 0?0:c,d=r.pointerEvents,f=d===void 0?"auto":d,g=r.fill,p=r.stroke,v=no(f,g,p),m=Ee(v,2),y=m[1];return!y&&!t||!l?!1:Va(i,a,s,o,l+h,e.x,e.y)}function Ij(n,e,t,r,i){for(var a=!1,s=e/2,o=0;o<n.length;o++){var u=n[o],l=u.currentPoint,c=u.params,h=u.prePoint,d=u.box;if(!(d&&!Ds(d.x-s,d.y-s,d.width+e,d.height+e,t,r)))switch(u.command){case"L":case"Z":if(a=Va(h[0],h[1],l[0],l[1],e,t,r),a)return!0;break;case"Q":var f=P9(h[0],h[1],c[1],c[2],c[3],c[4],t,r);if(a=f<=e/2,a)return!0;break;case"C":var g=pE(h[0],h[1],c[1],c[2],c[3],c[4],c[5],c[6],t,r,i);if(a=g<=e/2,a)return!0;break;case"A":u.cubicParams||(u.cubicParams=Z2(h[0],h[1],c[1],c[2],c[3],c[4],c[5],c[6],c[7],void 0));for(var p=u.cubicParams,v=h,m=0;m<p.length;m+=6){var y=pE(v[0],v[1],p[m],p[m+1],p[m+2],p[m+3],p[m+4],p[m+5],t,r,i);if(v=[p[m+4],p[m+5]],a=y<=e/2,a)return!0}break}}return a}function Fj(n,e,t,r,i,a){var s=n.parsedStyle,o=s.lineWidth,u=o===void 0?1:o,l=s.increasedLineWidthForHitTesting,c=l===void 0?0:l,h=s.stroke,d=s.fill,f=s.d,g=s.pointerEvents,p=g===void 0?"auto":g,v=f.segments,m=f.hasArc,y=f.polylines,b=f.polygons,x=no(p,(b==null?void 0:b.length)&&d,h),w=Ee(x,2),E=w[0],_=w[1],S=mb(n),C=!1;return E||t?(m?C=r(n,e):C=f3(b,e.x,e.y)||f3(y,e.x,e.y),C):((_||t)&&(C=Ij(v,u+c,e.x,e.y,S)),C)}function Bj(n,e,t){var r=n.parsedStyle,i=r.stroke,a=r.fill,s=r.lineWidth,o=s===void 0?1:s,u=r.increasedLineWidthForHitTesting,l=u===void 0?0:u,c=r.points,h=r.pointerEvents,d=h===void 0?"auto":h,f=no(d,a,i),g=Ee(f,2),p=g[0],v=g[1],m=!1;return(v||t)&&(m=I4(c.points,o+l,e.x,e.y,!0)),!m&&(p||t)&&(m=F4(c.points,e.x,e.y)),m}function zj(n,e,t){var r=n.parsedStyle,i=r.lineWidth,a=i===void 0?1:i,s=r.increasedLineWidthForHitTesting,o=s===void 0?0:s,u=r.points,l=r.pointerEvents,c=l===void 0?"auto":l,h=r.fill,d=r.stroke,f=no(c,h,d),g=Ee(f,2),p=g[1];return!p&&!t||!a?!1:I4(u.points,a+o,e.x,e.y,!1)}function $j(n,e,t,r,i){var a=n.parsedStyle,s=a.radius,o=a.fill,u=a.stroke,l=a.lineWidth,c=l===void 0?1:l,h=a.increasedLineWidthForHitTesting,d=h===void 0?0:h,f=a.x,g=f===void 0?0:f,p=a.y,v=p===void 0?0:p,m=a.width,y=a.height,b=a.pointerEvents,x=b===void 0?"auto":b,w=no(x,o,u),E=Ee(w,2),_=E[0],S=E[1],C=s&&s.some(function(O){return O!==0}),k=c+d;if(C){var T=!1;return(S||t)&&(T=jj(g,v,m,y,s.map(function(O){return St(O,0,Math.min(Math.abs(m)/2,Math.abs(y)/2))}),k,e.x,e.y)),!T&&(_||t)&&(T=r(n,e)),T}else{var A=k/2;if(_&&S||t)return Ds(g-A,v-A,m+A,y+A,e.x,e.y);if(_)return Ds(g,v,m,y,e.x,e.y);if(S)return Nj(g,v,m,y,k,e.x,e.y)}return!1}function jj(n,e,t,r,i,a,s,o){var u=Ee(i,4),l=u[0],c=u[1],h=u[2],d=u[3];return Va(n+l,e,n+t-c,e,a,s,o)||Va(n+t,e+c,n+t,e+r-h,a,s,o)||Va(n+t-h,e+r,n+d,e+r,a,s,o)||Va(n,e+r-d,n,e+l,a,s,o)||nh(n+t-c,e+c,c,1.5*Math.PI,2*Math.PI,a,s,o)||nh(n+t-h,e+r-h,h,0,.5*Math.PI,a,s,o)||nh(n+d,e+r-d,d,.5*Math.PI,Math.PI,a,s,o)||nh(n+l,e+l,l,Math.PI,1.5*Math.PI,a,s,o)}function qj(n,e,t,r,i,a){var s=n.parsedStyle,o=s.pointerEvents,u=o===void 0?"auto":o,l=s.x,c=l===void 0?0:l,h=s.y,d=h===void 0?0:h,f=s.width,g=s.height;if(u==="non-transparent-pixel"){var p=i.config.offscreenCanvas,v=a.offscreenCanvasCreator.getOrCreateCanvas(p),m=a.offscreenCanvasCreator.getOrCreateContext(p,{willReadFrequently:!0});v.width=f,v.height=g,i.defaultStyleRendererFactory[q.IMAGE].render(m,Ce(Ce({},n.parsedStyle),{},{x:0,y:0}),n,void 0,void 0,void 0);var y=m.getImageData(e.x-c,e.y-d,1,1).data;return y.every(function(b){return b!==0})}return!0}function Gj(n,e,t,r){var i=n.getGeometryBounds();return e.x>=i.min[0]&&e.y>=i.min[1]&&e.x<=i.max[0]&&e.y<=i.max[1]}var Wj=function(n){function e(){var t;U(this,e);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return t=Te(this,e,[].concat(i)),t.name="canvas-picker",t}return Oe(e,n),H(e,[{key:"init",value:function(){var r,i=(r={},ae(ae(ae(ae(ae(ae(ae(ae(ae(ae(r,q.CIRCLE,Mj),q.ELLIPSE,Pj),q.RECT,$j),q.LINE,Lj),q.POLYLINE,zj),q.POLYGON,Bj),q.PATH,Fj),q.TEXT,Gj),q.GROUP,null),q.IMAGE,qj),ae(ae(r,q.HTML,null),q.MESH,null));this.context.pointInPathPickerFactory=i,this.addRenderingPlugin(new L4)}},{key:"destroy",value:function(){delete this.context.pointInPathPickerFactory,this.removeAllRenderingPlugins()}}])}(cs);function pi(n,e){if(!{}.hasOwnProperty.call(n,e))throw new TypeError("attempted to use private field on non-instance");return n}var Vj=0;function Uj(n){return"__private_"+Vj+++"_"+n}/*!
 * @antv/g-plugin-image-loader
 * @description A G plugin for loading image
 * @version 2.1.21
 * @date 4/14/2025, 2:54:58 AM
 * @author AntVis
 * @docs https://g.antv.antgroup.com/
 */var Hj=function(){function n(){U(this,n),this.cacheStore=new Map}return H(n,[{key:"onRefAdded",value:function(t){}},{key:"has",value:function(t){return this.cacheStore.has(t)}},{key:"put",value:function(t,r,i){return this.cacheStore.has(t)?!1:(this.cacheStore.set(t,{value:r,counter:new Set([i])}),this.onRefAdded(i),!0)}},{key:"get",value:function(t,r){var i=this.cacheStore.get(t);return i?(i.counter.has(r)||(i.counter.add(r),this.onRefAdded(r)),i.value):null}},{key:"update",value:function(t,r,i){var a=this.cacheStore.get(t);return a?(a.value=Ce(Ce({},a.value),r),a.counter.has(i)||(a.counter.add(i),this.onRefAdded(i)),!0):!1}},{key:"release",value:function(t,r){var i=this.cacheStore.get(t);return i?(i.counter.delete(r),i.counter.size<=0&&this.cacheStore.delete(t),!0):!1}},{key:"releaseRef",value:function(t){var r=this;Array.from(this.cacheStore.keys()).forEach(function(i){r.release(i,t)})}},{key:"getSize",value:function(){return this.cacheStore.size}},{key:"clear",value:function(){this.cacheStore.clear()}}])}(),mg=[],yg=[],Ob=function(){function n(){U(this,n)}return H(n,null,[{key:"stop",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:n.api;n.rafId&&(t.cancelAnimationFrame(n.rafId),n.rafId=null)}},{key:"executeTask",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:n.api;mg.length<=0&&yg.length<=0||(yg.forEach(function(r){return r()}),yg=mg.splice(0,n.TASK_NUM_PER_FRAME),n.rafId=t.requestAnimationFrame(function(){n.executeTask(t)}))}},{key:"sliceImage",value:function(t,r,i,a){for(var s=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0,o=arguments.length>5&&arguments[5]!==void 0?arguments[5]:n.api,u=t.naturalWidth||t.width,l=t.naturalHeight||t.height,c=r-s,h=i-s,d=Math.ceil(u/c),f=Math.ceil(l/h),g={tileSize:[r,i],gridSize:[f,d],tiles:Array(f).fill(null).map(function(){return Array(d).fill(null)})},p=function(y){for(var b=function(E){mg.push(function(){var _=E*c,S=y*h,C=[Math.min(r,u-_),Math.min(i,l-S)],k=C[0],A=C[1],T=o.createCanvas();T.width=r,T.height=i;var O=T.getContext("2d");O.drawImage(t,_,S,k,A,0,0,k,A),g.tiles[y][E]={x:_,y:S,tileX:E,tileY:y,data:T},a()})},x=0;x<d;x++)b(x)},v=0;v<f;v++)p(v);return n.stop(),n.executeTask(),g}}])}();Ob.TASK_NUM_PER_FRAME=10;var nr=new Hj;nr.onRefAdded=function(e){var t=this;e.addEventListener(De.DESTROY,function(){t.releaseRef(e)},{once:!0})};var wx=function(){function n(e,t){U(this,n),this.gradientCache={},this.patternCache={},this.context=e,this.runtime=t}return H(n,[{key:"getImageSync",value:function(t,r,i){var a=qe(t)?t:t.src;if(nr.has(a)){var s=nr.get(a,r);if(s.img.complete)return i==null||i(s),s}return this.getOrCreateImage(t,r).then(function(o){i==null||i(o)}).catch(function(o){console.error(o)}),null}},{key:"getOrCreateImage",value:function(t,r){var i=this,a=qe(t)?t:t.src;if(!qe(t)&&!nr.has(a)){var s={img:t,size:[t.naturalWidth||t.width,t.naturalHeight||t.height],tileSize:rh(t)};nr.put(a,s,r)}if(nr.has(a)){var o=nr.get(a,r);return o.img.complete?Promise.resolve(o):new Promise(function(u,l){o.img.addEventListener("load",function(){o.size=[o.img.naturalWidth||o.img.width,o.img.naturalHeight||o.img.height],o.tileSize=rh(o.img),u(o)}),o.img.addEventListener("error",function(c){l(c)})})}return new Promise(function(u,l){var c=i.context.config.createImage();if(c){var h={img:c,size:[0,0],tileSize:rh(c)};nr.put(a,h,r),c.onload=function(){h.size=[c.naturalWidth||c.width,c.naturalHeight||c.height],h.tileSize=rh(h.img),u(h)},c.onerror=function(d){l(d)},c.crossOrigin="Anonymous",c.src=a}})}},{key:"createDownSampledImage",value:function(){var e=as(vn().mark(function r(i,a){var s,o,u,l,c,h,d,f,g,p,v,m,y,b;return vn().wrap(function(w){for(;;)switch(w.prev=w.next){case 0:return w.next=2,this.getOrCreateImage(i,a);case 2:if(s=w.sent,!(typeof s.downSamplingRate<"u")){w.next=5;break}return w.abrupt("return",s);case 5:if(o=this.context.config.enableLargeImageOptimization,u=typeof o=="boolean"?{}:o,l=u.maxDownSampledImageSize,c=l===void 0?2048:l,h=u.downSamplingRateThreshold,d=h===void 0?.5:h,f=this.runtime.globalThis.createImageBitmap,g=Ee(s.size,2),p=g[0],v=g[1],m=s.img,y=Math.min((c+c)/(p+v),Math.max(.01,Math.min(d,.5))),b=Ce(Ce({},s),{},{downSamplingRate:y}),nr.update(s.img.src,b,a),!f){w.next=25;break}return w.prev=14,w.next=17,f(s.img,{resizeWidth:p*y,resizeHeight:v*y});case 17:m=w.sent,w.next=23;break;case 20:w.prev=20,w.t0=w.catch(14),y=1;case 23:w.next=26;break;case 25:y=1;case 26:return b=Ce(Ce({},this.getImageSync(i,a)),{},{downSampled:m,downSamplingRate:y}),nr.update(s.img.src,b,a),w.abrupt("return",b);case 29:case"end":return w.stop()}},r,this,[[14,20]])}));function t(r,i){return e.apply(this,arguments)}return t}()},{key:"createImageTiles",value:function(){var e=as(vn().mark(function r(i,a,s,o){var u,l,c,h,d;return vn().wrap(function(g){for(;;)switch(g.prev=g.next){case 0:return g.next=2,this.getOrCreateImage(i,o);case 2:return u=g.sent,l=o.ownerDocument.defaultView,c=l.requestAnimationFrame,h=l.cancelAnimationFrame,Ob.api={requestAnimationFrame:c,cancelAnimationFrame:h,createCanvas:function(){return ax.createCanvas()}},d=Ce(Ce({},u),Ob.sliceImage(u.img,u.tileSize[0],u.tileSize[0],s)),nr.update(u.img.src,d,o),g.abrupt("return",d);case 8:case"end":return g.stop()}},r,this)}));function t(r,i,a,s){return e.apply(this,arguments)}return t}()},{key:"releaseImage",value:function(t,r){nr.release(qe(t)?t:t.src,r)}},{key:"releaseImageRef",value:function(t){nr.releaseRef(t)}},{key:"getOrCreatePatternSync",value:function(t,r,i,a,s,o,u){var l=this.generatePatternKey(r);if(l&&this.patternCache[l])return this.patternCache[l];var c=r.image,h=r.repetition,d=r.transform,f,g=!1;if(qe(c)){var p=this.getImageSync(c,t,u);f=p==null?void 0:p.img}else a?(f=a,g=!0):f=c;var v=f&&i.createPattern(f,h);if(v){var m;d?m=qM(DM(d),new lt({})):m=is(nt()),g&&FO(m,m,[1/s,1/s,1]),v.setTransform({a:m[0],b:m[1],c:m[4],d:m[5],e:m[12]+o[0],f:m[13]+o[1]})}return l&&v&&(this.patternCache[l]=v),v}},{key:"getOrCreateGradient",value:function(t,r){var i=this.generateGradientKey(t),a=t.type,s=t.steps,o=t.min,u=t.width,l=t.height,c=t.angle,h=t.cx,d=t.cy,f=t.size;if(this.gradientCache[i])return this.gradientCache[i];var g=null;if(a===qa.LinearGradient){var p=C7(o,u,l,c),v=p.x1,m=p.y1,y=p.x2,b=p.y2;g=r.createLinearGradient(v,m,y,b)}else if(a===qa.RadialGradient){var x=A7(o,u,l,h,d,f),w=x.x,E=x.y,_=x.r;g=r.createRadialGradient(w,E,0,w,E,_)}return g&&(s.forEach(function(S){var C=S.offset,k=S.color;if(C.unit===Q.kPercentage){var A;(A=g)===null||A===void 0||A.addColorStop(C.value/100,k.toString())}}),this.gradientCache[i]=g),this.gradientCache[i]}},{key:"generateGradientKey",value:function(t){var r=t.type,i=t.min,a=t.width,s=t.height,o=t.steps,u=t.angle,l=t.cx,c=t.cy,h=t.size;return"gradient-".concat(r,"-").concat((u==null?void 0:u.toString())||0,"-").concat((l==null?void 0:l.toString())||0,"-").concat((c==null?void 0:c.toString())||0,"-").concat((h==null?void 0:h.toString())||0,"-").concat(i[0],"-").concat(i[1],"-").concat(a,"-").concat(s,"-").concat(o.map(function(d){var f=d.offset,g=d.color;return"".concat(f).concat(g)}).join("-"))}},{key:"generatePatternKey",value:function(t){var r=t.image,i=t.repetition;if(qe(r))return"pattern-".concat(r,"-").concat(i);if(r.nodeName==="rect")return"pattern-".concat(r.entity,"-").concat(i)}}])}();wx.isSupportTile=!!ax.createCanvas();function rh(n){if(!n.complete)return[0,0];var e=n.naturalWidth||n.width,t=n.naturalHeight||n.height,r=256;return[256,512].forEach(function(i){var a=Math.ceil(t/i),s=Math.ceil(e/i);a*s<1e3&&(r=i)}),[r,r]}var B4=function(){function n(){U(this,n)}return H(n,[{key:"apply",value:function(t){var r=t.renderingService,i=t.renderingContext,a=t.imagePool,s=i.root.ownerDocument.defaultView,o=function(h,d,f){var g=h.parsedStyle,p=g.width,v=g.height;p&&!v?h.setAttribute("height",f/d*p):!p&&v&&h.setAttribute("width",d/f*v)},u=function(h){var d=h.target,f=d.nodeName,g=d.attributes;if(f===q.IMAGE){var p=g.src,v=g.keepAspectRatio;a.getImageSync(p,d,function(m){var y=m.img,b=y.width,x=y.height;v&&o(d,b,x),d.renderable.dirty=!0,r.dirtify()})}},l=function(h){var d=h.target,f=h.attrName,g=h.prevValue,p=h.newValue;d.nodeName!==q.IMAGE||f!=="src"||(g!==p&&a.releaseImage(g,d),qe(p)&&a.getOrCreateImage(p,d).then(function(v){var m=v.img,y=m.width,b=m.height;d.attributes.keepAspectRatio&&o(d,y,b),d.renderable.dirty=!0,r.dirtify()}).catch(function(){}))};r.hooks.init.tap(n.tag,function(){s.addEventListener(De.MOUNTED,u),s.addEventListener(De.ATTR_MODIFIED,l)}),r.hooks.destroy.tap(n.tag,function(){s.removeEventListener(De.MOUNTED,u),s.removeEventListener(De.ATTR_MODIFIED,l)})}}])}();B4.tag="LoadImage";var Yj=function(n){function e(){var t;U(this,e);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return t=Te(this,e,[].concat(i)),t.name="image-loader",t}return Oe(e,n),H(e,[{key:"init",value:function(r){this.context.imagePool=new wx(this.context,r),this.addRenderingPlugin(new B4)}},{key:"destroy",value:function(){this.removeAllRenderingPlugins()}}])}(cs);/*!
 * @antv/g-plugin-canvas-renderer
 * @description A G plugin of renderer implementation with Canvas2D API
 * @version 2.2.21
 * @date 4/14/2025, 2:55:44 AM
 * @author AntVis
 * @docs https://g.antv.antgroup.com/
 */var Ot=Uj("renderState"),z4=function(){function n(e){U(this,n),this.removedRBushNodeAABBs=[],this.renderQueue=[],Object.defineProperty(this,Ot,{writable:!0,value:{restoreStack:[],prevObject:null,currentContext:new Map}}),this.clearFullScreenLastFrame=!1,this.clearFullScreen=!1,this.vpMatrix=nt(),this.dprMatrix=nt(),this.tmpMat4=nt(),this.vec3a=Ie(),this.vec3b=Ie(),this.vec3c=Ie(),this.vec3d=Ie(),this.canvasRendererPluginOptions=e}return H(n,[{key:"apply",value:function(t,r){var i=this;this.context=t;var a=this.context,s=a.config,o=a.camera,u=a.renderingService,l=a.renderingContext,c=a.rBushRoot,h=a.pathGeneratorFactory,d=s.renderer.getConfig().enableRenderingOptimization;s.renderer.getConfig().enableDirtyCheck=!1,s.renderer.getConfig().enableDirtyRectangleRendering=!1,this.rBush=c,this.pathGeneratorFactory=h;var f=t.contextService,g=l.root.ownerDocument.defaultView,p=function(b){var x=b.target,w=x.rBushNode;w.aabb&&i.removedRBushNodeAABBs.push(w.aabb)},v=function(b){var x=b.target,w=x.rBushNode;w.aabb&&i.removedRBushNodeAABBs.push(w.aabb)};u.hooks.init.tap(n.tag,function(){g.addEventListener(De.UNMOUNTED,p),g.addEventListener(De.CULLED,v);var y=f.getDPR(),b=s.width,x=s.height,w=f.getContext();i.clearRect(w,0,0,b*y,x*y,s.background)}),u.hooks.destroy.tap(n.tag,function(){g.removeEventListener(De.UNMOUNTED,p),g.removeEventListener(De.CULLED,v),i.renderQueue=[],i.removedRBushNodeAABBs=[],pi(i,Ot)[Ot]={restoreStack:[],prevObject:null,currentContext:null}}),u.hooks.beginFrame.tap(n.tag,function(){var y,b=f.getContext(),x=f.getDPR(),w=s.width,E=s.height,_=i.canvasRendererPluginOptions,S=_.dirtyObjectNumThreshold,C=_.dirtyObjectRatioThreshold,k=u.getStats(),A=k.total,T=k.rendered,O=T/A;i.clearFullScreen=i.clearFullScreenLastFrame||!((y=g.context.renderingPlugins[1])!==null&&y!==void 0&&y.isFirstTimeRenderingFinished)||u.disableDirtyRectangleRendering()||T>S&&O>C,b&&(typeof b.resetTransform=="function"?b.resetTransform():b.setTransform(1,0,0,1,0,0),i.clearFullScreen&&i.clearRect(b,0,0,w*x,E*x,s.background))});var m=function(b,x){for(var w=[b];w.length>0;){var E,_=w.pop();_.isVisible()&&!_.isCulled()&&(d?i.renderDisplayObjectOptimized(_,x,i.context,pi(i,Ot)[Ot],r):i.renderDisplayObject(_,x,i.context,pi(i,Ot)[Ot],r));for(var S=((E=_.sortable)===null||E===void 0||(E=E.sorted)===null||E===void 0?void 0:E.length)>0?_.sortable.sorted:_.childNodes,C=S.length-1;C>=0;C--)w.push(S[C])}};u.hooks.endFrame.tap(n.tag,function(){if(l.root.childNodes.length===0){i.clearFullScreenLastFrame=!0;return}d=s.renderer.getConfig().enableRenderingOptimization,pi(i,Ot)[Ot]={restoreStack:[],prevObject:null,currentContext:pi(i,Ot)[Ot].currentContext},pi(i,Ot)[Ot].currentContext.clear(),i.clearFullScreenLastFrame=!1;var y=f.getContext(),b=f.getDPR();if(Cs(i.dprMatrix,[b,b,1]),On(i.vpMatrix,i.dprMatrix,o.getOrthoMatrix()),i.clearFullScreen)d?(y.save(),m(l.root,y),y.restore()):m(l.root,y),i.removedRBushNodeAABBs=[];else{var x=i.safeMergeAABB.apply(i,[i.mergeDirtyAABBs(i.renderQueue)].concat(at(i.removedRBushNodeAABBs.map(function(K){var ee=K.minX,ie=K.minY,_e=K.maxX,Ae=K.maxY,Be=new rt;return Be.setMinMax([ee,ie,0],[_e,Ae,0]),Be}))));if(i.removedRBushNodeAABBs=[],rt.isEmpty(x)){i.renderQueue=[];return}var w=i.convertAABB2Rect(x),E=w.x,_=w.y,S=w.width,C=w.height,k=Mn(i.vec3a,[E,_,0],i.vpMatrix),A=Mn(i.vec3b,[E+S,_,0],i.vpMatrix),T=Mn(i.vec3c,[E,_+C,0],i.vpMatrix),O=Mn(i.vec3d,[E+S,_+C,0],i.vpMatrix),P=Math.min(k[0],A[0],O[0],T[0]),R=Math.min(k[1],A[1],O[1],T[1]),N=Math.max(k[0],A[0],O[0],T[0]),D=Math.max(k[1],A[1],O[1],T[1]),M=Math.floor(P),F=Math.floor(R),j=Math.ceil(N-P),B=Math.ceil(D-R);y.save(),i.clearRect(y,M,F,j,B,s.background),y.beginPath(),y.rect(M,F,j,B),y.clip(),y.setTransform(i.vpMatrix[0],i.vpMatrix[1],i.vpMatrix[4],i.vpMatrix[5],i.vpMatrix[12],i.vpMatrix[13]);var $=s.renderer.getConfig(),W=$.enableDirtyRectangleRenderingDebug;W&&g.dispatchEvent(new It(cr.DIRTY_RECTANGLE,{dirtyRect:{x:M,y:F,width:j,height:B}}));var Y=i.searchDirtyObjects(x);Y.sort(function(K,ee){return K.sortable.renderOrder-ee.sortable.renderOrder}).forEach(function(K){K&&K.isVisible()&&!K.isCulled()&&i.renderDisplayObject(K,y,i.context,pi(i,Ot)[Ot],r)}),y.restore(),i.renderQueue.forEach(function(K){i.saveDirtyAABB(K)}),i.renderQueue=[]}pi(i,Ot)[Ot].restoreStack.forEach(function(){y.restore()}),pi(i,Ot)[Ot].restoreStack=[]}),u.hooks.render.tap(n.tag,function(y){i.clearFullScreen||i.renderQueue.push(y)})}},{key:"clearRect",value:function(t,r,i,a,s,o){t.clearRect(r,i,a,s),o&&(t.fillStyle=o,t.fillRect(r,i,a,s))}},{key:"renderDisplayObjectOptimized",value:function(t,r,i,a,s){var o=t.nodeName,u=!1,l=!1,c=this.context.styleRendererFactory[o],h=this.pathGeneratorFactory[o],d=t.parsedStyle.clipPath;if(d){u=!a.prevObject||!Zy(d.getWorldTransform(),a.prevObject.getWorldTransform()),u&&(this.applyWorldTransform(r,d),a.prevObject=null);var f=this.pathGeneratorFactory[d.nodeName];f&&(r.save(),l=!0,r.beginPath(),f(r,d.parsedStyle),r.closePath(),r.clip())}if(c){u=!a.prevObject||!Zy(t.getWorldTransform(),a.prevObject.getWorldTransform()),u&&this.applyWorldTransform(r,t);var g=!a.prevObject;if(!g){var p=a.prevObject.nodeName;o===q.TEXT?g=p!==q.TEXT:o===q.IMAGE?g=p!==q.IMAGE:g=p===q.TEXT||p===q.IMAGE}c.applyStyleToContext(r,t,g,a),a.prevObject=t}h&&(r.beginPath(),h(r,t.parsedStyle),o!==q.LINE&&o!==q.PATH&&o!==q.POLYLINE&&r.closePath()),c&&c.drawToContext(r,t,pi(this,Ot)[Ot],this,s),l&&r.restore(),t.renderable.dirty=!1}},{key:"renderDisplayObject",value:function(t,r,i,a,s){var o=t.nodeName,u=a.restoreStack[a.restoreStack.length-1];u&&!(t.compareDocumentPosition(u)&yt.DOCUMENT_POSITION_CONTAINS)&&(r.restore(),a.restoreStack.pop());var l=this.context.styleRendererFactory[o],c=this.pathGeneratorFactory[o],h=t.parsedStyle.clipPath;if(h){this.applyWorldTransform(r,h);var d=this.pathGeneratorFactory[h.nodeName];d&&(r.save(),a.restoreStack.push(t),r.beginPath(),d(r,h.parsedStyle),r.closePath(),r.clip())}l&&(this.applyWorldTransform(r,t),r.save(),this.applyAttributesToContext(r,t)),c&&(r.beginPath(),c(r,t.parsedStyle),o!==q.LINE&&o!==q.PATH&&o!==q.POLYLINE&&r.closePath()),l&&(l.render(r,t.parsedStyle,t,i,this,s),r.restore()),t.renderable.dirty=!1}},{key:"applyAttributesToContext",value:function(t,r){var i=r.parsedStyle,a=i.stroke,s=i.fill,o=i.opacity,u=i.lineDash,l=i.lineDashOffset;u&&t.setLineDash(u),de(l)||(t.lineDashOffset=l),de(o)||(t.globalAlpha*=o),!de(a)&&!Array.isArray(a)&&!a.isNone&&(t.strokeStyle=r.attributes.stroke),!de(s)&&!Array.isArray(s)&&!s.isNone&&(t.fillStyle=r.attributes.fill)}},{key:"convertAABB2Rect",value:function(t){var r=t.getMin(),i=t.getMax(),a=Math.floor(r[0]),s=Math.floor(r[1]),o=Math.ceil(i[0]),u=Math.ceil(i[1]),l=o-a,c=u-s;return{x:a,y:s,width:l,height:c}}},{key:"mergeDirtyAABBs",value:function(t){var r=new rt;return t.forEach(function(i){var a=i.getRenderBounds();r.add(a);var s=i.renderable.dirtyRenderBounds;s&&r.add(s)}),r}},{key:"searchDirtyObjects",value:function(t){var r=t.getMin(),i=Ee(r,2),a=i[0],s=i[1],o=t.getMax(),u=Ee(o,2),l=u[0],c=u[1],h=this.rBush.search({minX:a,minY:s,maxX:l,maxY:c});return h.map(function(d){var f=d.displayObject;return f})}},{key:"saveDirtyAABB",value:function(t){var r=t.renderable;r.dirtyRenderBounds||(r.dirtyRenderBounds=new rt);var i=t.getRenderBounds();i&&r.dirtyRenderBounds.update(i.center,i.halfExtents)}},{key:"applyWorldTransform",value:function(t,r,i){i?(Qo(this.tmpMat4,r.getLocalTransform()),On(this.tmpMat4,i,this.tmpMat4),On(this.tmpMat4,this.vpMatrix,this.tmpMat4)):(Qo(this.tmpMat4,r.getWorldTransform()),On(this.tmpMat4,this.vpMatrix,this.tmpMat4)),t.setTransform(this.tmpMat4[0],this.tmpMat4[1],this.tmpMat4[4],this.tmpMat4[5],this.tmpMat4[12],this.tmpMat4[13])}},{key:"safeMergeAABB",value:function(){for(var t=new rt,r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return i.forEach(function(s){t.add(s)}),t}}])}();z4.tag="CanvasRenderer";function Sd(n,e,t,r,i,a,s){var o,u;if(n.image.nodeName==="rect"){var l=n.image.parsedStyle,c=l.width,h=l.height;u=r.contextService.getDPR();var d=r.config.offscreenCanvas;o=a.offscreenCanvasCreator.getOrCreateCanvas(d),o.width=c*u,o.height=h*u;var f=a.offscreenCanvasCreator.getOrCreateContext(d),g={restoreStack:[],prevObject:null,currentContext:new Map};n.image.forEach(function(v){i.renderDisplayObject(v,f,r,g,a)}),g.restoreStack.forEach(function(){f.restore()})}var p=s.getOrCreatePatternSync(e,n,t,o,u,e.getGeometryBounds().min,function(){e.renderable.dirty=!0,r.renderingService.dirtify()});return p}function kd(n,e,t,r){var i;if(n.type===qa.LinearGradient||n.type===qa.RadialGradient){var a=e.getGeometryBounds(),s=a&&a.halfExtents[0]*2||1,o=a&&a.halfExtents[1]*2||1,u=a&&a.min||[0,0];i=r.getOrCreateGradient(Ce(Ce({type:n.type},n.value),{},{min:u,width:s,height:o}),t)}return i}var ih=["shadowBlur","shadowOffsetX","shadowOffsetY"],g3=["lineCap","lineJoin","miterLimit"],Rt={globalAlpha:1,shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0,shadowColor:"#000",filter:"none",globalCompositeOperation:"source-over",strokeStyle:"#000",strokeOpacity:1,lineWidth:1,lineDash:[],lineDashOffset:0,lineCap:"butt",lineJoin:"miter",miterLimit:10,fillStyle:"#000",fillOpacity:1},p3={};function wt(n,e,t,r){var i=r.has(e)?r.get(e):Rt[e];return i!==t&&(e==="lineDash"?n.setLineDash(t):n[e]=t,r.set(e,t)),i}var Xj=function(){function n(e){U(this,n),this.imagePool=e}return H(n,[{key:"applyAttributesToContext",value:function(t,r){}},{key:"render",value:function(t,r,i,a,s,o){}},{key:"applyCommonStyleToContext",value:function(t,r,i,a){var s=i?p3:a.prevObject.parsedStyle,o=r.parsedStyle;(i||o.opacity!==s.opacity)&&wt(t,"globalAlpha",de(o.opacity)?Rt.globalAlpha:o.opacity,a.currentContext),(i||o.blend!==s.blend)&&wt(t,"globalCompositeOperation",de(o.blend)?Rt.globalCompositeOperation:o.blend,a.currentContext)}},{key:"applyStrokeFillStyleToContext",value:function(t,r,i,a){var s=i?p3:a.prevObject.parsedStyle,o=r.parsedStyle,u=o.lineWidth,l=u===void 0?Rt.lineWidth:u,c=o.fill&&!o.fill.isNone,h=o.stroke&&!o.stroke.isNone&&l>0;if(h){if(i||r.attributes.stroke!==a.prevObject.attributes.stroke){var d=!de(o.stroke)&&!Array.isArray(o.stroke)&&!o.stroke.isNone?r.attributes.stroke:Rt.strokeStyle;wt(t,"strokeStyle",d,a.currentContext)}(i||o.lineWidth!==s.lineWidth)&&wt(t,"lineWidth",de(o.lineWidth)?Rt.lineWidth:o.lineWidth,a.currentContext),(i||o.lineDash!==s.lineDash)&&wt(t,"lineDash",o.lineDash||Rt.lineDash,a.currentContext),(i||o.lineDashOffset!==s.lineDashOffset)&&wt(t,"lineDashOffset",de(o.lineDashOffset)?Rt.lineDashOffset:o.lineDashOffset,a.currentContext);for(var f=0;f<g3.length;f++){var g=g3[f];(i||o[g]!==s[g])&&wt(t,g,de(o[g])?Rt[g]:o[g],a.currentContext)}}if(c&&(i||r.attributes.fill!==a.prevObject.attributes.fill)){var p=!de(o.fill)&&!Array.isArray(o.fill)&&!o.fill.isNone?r.attributes.fill:Rt.fillStyle;wt(t,"fillStyle",p,a.currentContext)}}},{key:"applyStyleToContext",value:function(t,r,i,a){var s=r.nodeName;this.applyCommonStyleToContext(t,r,i,a),s===q.IMAGE||this.applyStrokeFillStyleToContext(t,r,i,a)}},{key:"applyShadowAndFilterStyleToContext",value:function(t,r,i,a){var s=r.parsedStyle;if(i){wt(t,"shadowColor",s.shadowColor.toString(),a.currentContext);for(var o=0;o<ih.length;o++){var u=ih[o];wt(t,u,s[u]||Rt[u],a.currentContext)}}s.filter&&s.filter.length&&wt(t,"filter",r.attributes.filter,a.currentContext)}},{key:"clearShadowAndFilterStyleForContext",value:function(t,r,i,a){var s=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!1;if(r){wt(t,"shadowColor",Rt.shadowColor,a.currentContext);for(var o=0;o<ih.length;o++){var u=ih[o];wt(t,u,Rt[u],a.currentContext)}}if(i)if(r&&s){var l=t.filter;!de(l)&&l.indexOf("drop-shadow")>-1&&wt(t,"filter",l.replace(/drop-shadow\([^)]*\)/,"").trim()||Rt.filter,a.currentContext)}else wt(t,"filter",Rt.filter,a.currentContext)}},{key:"fillToContext",value:function(t,r,i,a,s){var o=this,u=r.parsedStyle,l=u.fill,c=u.fillRule,h=null;if(Array.isArray(l)&&l.length>0)l.forEach(function(f){var g=wt(t,"fillStyle",kd(f,r,t,o.imagePool),i.currentContext);h=h??g,c?t.fill(c):t.fill()});else{if(Xs(l)){var d=Sd(l,r,t,r.ownerDocument.defaultView.context,a,s,this.imagePool);d&&(t.fillStyle=d,h=!0)}c?t.fill(c):t.fill()}h!==null&&wt(t,"fillStyle",h,i.currentContext)}},{key:"strokeToContext",value:function(t,r,i,a,s){var o=this,u=r.parsedStyle.stroke,l=null;if(Array.isArray(u)&&u.length>0)u.forEach(function(d){var f=wt(t,"strokeStyle",kd(d,r,t,o.imagePool),i.currentContext);l=l??f,t.stroke()});else{if(Xs(u)){var c=Sd(u,r,t,r.ownerDocument.defaultView.context,a,s,this.imagePool);if(c){var h=wt(t,"strokeStyle",c,i.currentContext);l=l??h}}t.stroke()}l!==null&&wt(t,"strokeStyle",l,i.currentContext)}},{key:"drawToContext",value:function(t,r,i,a,s){var o,u=r.nodeName,l=r.parsedStyle,c=l.opacity,h=c===void 0?Rt.globalAlpha:c,d=l.fillOpacity,f=d===void 0?Rt.fillOpacity:d,g=l.strokeOpacity,p=g===void 0?Rt.strokeOpacity:g,v=l.lineWidth,m=v===void 0?Rt.lineWidth:v,y=l.fill&&!l.fill.isNone,b=l.stroke&&!l.stroke.isNone&&m>0;if(!(!y&&!b)){var x=!de(l.shadowColor)&&l.shadowBlur>0,w=l.shadowType==="inner",E=((o=l.fill)===null||o===void 0?void 0:o.alpha)===0,_=!!(l.filter&&l.filter.length),S=x&&b&&(u===q.PATH||u===q.LINE||u===q.POLYLINE||E||w),C=null;if(y){S||this.applyShadowAndFilterStyleToContext(t,r,x,i);var k=h*f;C=wt(t,"globalAlpha",k,i.currentContext),this.fillToContext(t,r,i,a,s),S||this.clearShadowAndFilterStyleForContext(t,x,_,i)}if(b){var A=!1,T=h*p,O=wt(t,"globalAlpha",T,i.currentContext);if(C=y?C:O,S&&(this.applyShadowAndFilterStyleToContext(t,r,x,i),A=!0,w)){var P=t.globalCompositeOperation;t.globalCompositeOperation="source-atop",this.strokeToContext(t,r,i,a,s),t.globalCompositeOperation=P,this.clearShadowAndFilterStyleForContext(t,x,_,i,!0)}this.strokeToContext(t,r,i,a,s),A&&this.clearShadowAndFilterStyleForContext(t,x,_,i)}C!==null&&wt(t,"globalAlpha",C,i.currentContext)}}}])}(),Ex=function(n){function e(){return U(this,e),Te(this,e,arguments)}return Oe(e,n),H(e,[{key:"render",value:function(r,i,a,s,o,u){var l=i.fill,c=i.fillRule,h=i.opacity,d=h===void 0?1:h,f=i.fillOpacity,g=f===void 0?1:f,p=i.stroke,v=i.strokeOpacity,m=v===void 0?1:v,y=i.lineWidth,b=y===void 0?1:y,x=i.lineCap,w=i.lineJoin,E=i.shadowType,_=i.shadowColor,S=i.shadowBlur,C=i.filter,k=i.miterLimit,A=l&&!l.isNone,T=p&&!p.isNone&&b>0,O=(l==null?void 0:l.alpha)===0,P=!!(C&&C.length),R=!de(_)&&S>0,N=a.nodeName,D=E==="inner",M=T&&R&&(N===q.PATH||N===q.LINE||N===q.POLYLINE||O||D);A&&(r.globalAlpha=d*g,M||Cd(a,r,R),$4(r,a,l,c,s,o,u,this.imagePool),M||this.clearShadowAndFilter(r,P,R)),T&&(r.globalAlpha=d*m,r.lineWidth=b,de(k)||(r.miterLimit=k),de(x)||(r.lineCap=x),de(w)||(r.lineJoin=w),M&&(D&&(r.globalCompositeOperation="source-atop"),Cd(a,r,!0),D&&(Mb(r,a,p,s,o,u,this.imagePool),r.globalCompositeOperation=Rt.globalCompositeOperation,this.clearShadowAndFilter(r,P,!0))),Mb(r,a,p,s,o,u,this.imagePool))}},{key:"clearShadowAndFilter",value:function(r,i,a){if(a&&(r.shadowColor="transparent",r.shadowBlur=0),i){var s=r.filter;!de(s)&&s.indexOf("drop-shadow")>-1&&(r.filter=s.replace(/drop-shadow\([^)]*\)/,"").trim()||"none")}}}])}(Xj);function Cd(n,e,t){var r=n.parsedStyle,i=r.filter,a=r.shadowColor,s=r.shadowBlur,o=r.shadowOffsetX,u=r.shadowOffsetY;i&&i.length&&(e.filter=n.style.filter),t&&(e.shadowColor=a.toString(),e.shadowBlur=s||0,e.shadowOffsetX=o||0,e.shadowOffsetY=u||0)}function $4(n,e,t,r,i,a,s,o){var u=arguments.length>8&&arguments[8]!==void 0?arguments[8]:!1;Array.isArray(t)?t.forEach(function(l){n.fillStyle=kd(l,e,n,o),u||(r?n.fill(r):n.fill())}):(Xs(t)&&(n.fillStyle=Sd(t,e,n,i,a,s,o)),u||(r?n.fill(r):n.fill()))}function Mb(n,e,t,r,i,a,s){var o=arguments.length>7&&arguments[7]!==void 0?arguments[7]:!1;Array.isArray(t)?t.forEach(function(u){n.strokeStyle=kd(u,e,n,s),o||n.stroke()}):(Xs(t)&&(n.strokeStyle=Sd(t,e,n,r,i,a,s)),o||n.stroke())}function Kj(n,e){var t=Ee(n,4),r=t[0],i=t[1],a=t[2],s=t[3],o=Ee(e,4),u=o[0],l=o[1],c=o[2],h=o[3],d=Math.max(r,u),f=Math.max(i,l),g=Math.min(r+a,u+c),p=Math.min(i+s,l+h);return g<=d||p<=f?null:[d,f,g-d,p-f]}function Zj(n,e){var t=Mn(Ie(),[n[0],n[1],0],e),r=Mn(Ie(),[n[0]+n[2],n[1],0],e),i=Mn(Ie(),[n[0],n[1]+n[3],0],e),a=Mn(Ie(),[n[0]+n[2],n[1]+n[3],0],e);return[Math.min(t[0],r[0],i[0],a[0]),Math.min(t[1],r[1],i[1],a[1]),Math.max(t[0],r[0],i[0],a[0])-Math.min(t[0],r[0],i[0],a[0]),Math.max(t[1],r[1],i[1],a[1])-Math.min(t[1],r[1],i[1],a[1])]}var Jj=function(n){function e(){return U(this,e),Te(this,e,arguments)}return Oe(e,n),H(e,[{key:"renderDownSampled",value:function(r,i,a,s){var o=s.src,u=s.imageCache;if(!u.downSampled){this.imagePool.createDownSampledImage(o,a).then(function(){a.ownerDocument&&(a.renderable.dirty=!0,a.ownerDocument.defaultView.context.renderingService.dirtify())}).catch(function(l){console.error(l)});return}r.drawImage(u.downSampled,Math.floor(s.drawRect[0]),Math.floor(s.drawRect[1]),Math.ceil(s.drawRect[2]),Math.ceil(s.drawRect[3]))}},{key:"renderTile",value:function(r,i,a,s){var o=s.src,u=s.imageCache,l=s.imageRect,c=s.drawRect,h=u.size,d=r.getTransform(),f=d.a,g=d.b,p=d.c,v=d.d,m=d.e,y=d.f;if(r.resetTransform(),!(u!=null&&u.gridSize)){this.imagePool.createImageTiles(o,[],function(){a.ownerDocument&&(a.renderable.dirty=!0,a.ownerDocument.defaultView.context.renderingService.dirtify())},a).catch(function(R){console.error(R)});return}for(var b=[h[0]/l[2],h[1]/l[3]],x=[u.tileSize[0]/b[0],u.tileSize[1]/b[1]],w=[Math.floor((c[0]-l[0])/x[0]),Math.ceil((c[0]+c[2]-l[0])/x[0])],E=w[0],_=w[1],S=[Math.floor((c[1]-l[1])/x[1]),Math.ceil((c[1]+c[3]-l[1])/x[1])],C=S[0],k=S[1],A=C;A<=k;A++)for(var T=E;T<=_;T++){var O=u.tiles[A][T];if(O){var P=[Math.floor(l[0]+O.tileX*x[0]),Math.floor(l[1]+O.tileY*x[1]),Math.ceil(x[0]),Math.ceil(x[1])];r.drawImage(O.data,P[0],P[1],P[2],P[3])}}r.setTransform(f,g,p,v,m,y)}},{key:"render",value:function(r,i,a){var s=i.x,o=s===void 0?0:s,u=i.y,l=u===void 0?0:u,c=i.width,h=i.height,d=i.src,f=i.shadowColor,g=i.shadowBlur,p=this.imagePool.getImageSync(d,a),v=p==null?void 0:p.img,m=c,y=h;if(v){m||(m=v.width),y||(y=v.height);var b=!de(f)&&g>0;Cd(a,r,b);try{var x=a.ownerDocument.defaultView.getContextService().getDomElement(),w=x.width,E=x.height,_=r.getTransform(),S=_.a,C=_.b,k=_.c,A=_.d,T=_.e,O=_.f,P=RO(S,k,0,0,C,A,0,0,0,0,1,0,T,O,0,1),R=Zj([o,l,m,y],P),N=Kj([0,0,w,E],R);if(!N)return;if(!a.ownerDocument.defaultView.getConfig().enableLargeImageOptimization){e.renderFull(r,i,a,{image:v,drawRect:[o,l,m,y]});return}var D=R[2]/p.size[0];if(D<(p.downSamplingRate||.5)){this.renderDownSampled(r,i,a,{src:d,imageCache:p,drawRect:[o,l,m,y]});return}if(!wx.isSupportTile){e.renderFull(r,i,a,{image:v,drawRect:[o,l,m,y]});return}this.renderTile(r,i,a,{src:d,imageCache:p,imageRect:R,drawRect:N})}catch{}}}},{key:"drawToContext",value:function(r,i,a,s,o){this.render(r,i.parsedStyle,i)}}],[{key:"renderFull",value:function(r,i,a,s){r.drawImage(s.image,Math.floor(s.drawRect[0]),Math.floor(s.drawRect[1]),Math.ceil(s.drawRect[2]),Math.ceil(s.drawRect[3]))}}])}(Ex),Qj=function(n){function e(){return U(this,e),Te(this,e,arguments)}return Oe(e,n),H(e,[{key:"render",value:function(r,i,a,s,o,u){a.getBounds();var l=i.lineWidth,c=l===void 0?1:l,h=i.textAlign,d=h===void 0?"start":h,f=i.textBaseline,g=f===void 0?"alphabetic":f,p=i.lineJoin,v=p===void 0?"miter":p,m=i.miterLimit,y=m===void 0?10:m,b=i.letterSpacing,x=b===void 0?0:b,w=i.stroke,E=i.fill,_=i.fillRule,S=i.fillOpacity,C=S===void 0?1:S,k=i.strokeOpacity,A=k===void 0?1:k,T=i.opacity,O=T===void 0?1:T,P=i.metrics,R=i.x,N=R===void 0?0:R,D=i.y,M=D===void 0?0:D,F=i.dx,j=i.dy,B=i.shadowColor,$=i.shadowBlur,W=P.font,Y=P.lines,K=P.height,ee=P.lineHeight,ie=P.lineMetrics;r.font=W,r.lineWidth=c,r.textAlign=d==="middle"?"center":d;var _e=g;_e==="alphabetic"&&(_e="bottom"),r.lineJoin=v,de(y)||(r.miterLimit=y);var Ae=M;g==="middle"?Ae+=-K/2-ee/2:g==="bottom"||g==="alphabetic"||g==="ideographic"?Ae+=-K:(g==="top"||g==="hanging")&&(Ae+=-ee);var Be=N+(F||0);Ae+=j||0,Y.length===1&&(_e==="bottom"?(_e="middle",Ae-=.5*K):_e==="top"&&(_e="middle",Ae+=.5*K)),r.textBaseline=_e;var Fe=!de(B)&&$>0;Cd(a,r,Fe);for(var Ze=0;Ze<Y.length;Ze++){var Kt=c/2+Be;Ae+=ee,!de(w)&&!w.isNone&&c&&this.drawLetterSpacing(r,a,Y[Ze],ie[Ze],d,Kt,Ae,x,E,_,C,w,A,O,!0,s,o,u),de(E)||this.drawLetterSpacing(r,a,Y[Ze],ie[Ze],d,Kt,Ae,x,E,_,C,w,A,O,!1,s,o,u)}}},{key:"drawLetterSpacing",value:function(r,i,a,s,o,u,l,c,h,d,f,g,p,v,m,y,b,x){if(c===0){m?this.strokeText(r,i,a,u,l,g,p,y,b,x):this.fillText(r,i,a,u,l,h,d,f,v,y,b,x);return}var w=r.textAlign;r.textAlign="left";var E=u;o==="center"||o==="middle"?E=u-s.width/2:(o==="right"||o==="end")&&(E=u-s.width);for(var _=Array.from(a),S=r.measureText(a).width,C=0,k=0;k<_.length;++k){var A=_[k];m?this.strokeText(r,i,A,E,l,g,p,y,b,x):this.fillText(r,i,A,E,l,h,d,f,v,y,b,x),C=r.measureText(a.substring(k+1)).width,E+=S-C+c,S=C}r.textAlign=w}},{key:"fillText",value:function(r,i,a,s,o,u,l,c,h,d,f,g){$4(r,i,u,l,d,f,g,this.imagePool,!0);var p,v=!de(c)&&c!==1;v&&(p=r.globalAlpha,r.globalAlpha=c*h),r.fillText(a,s,o),v&&(r.globalAlpha=p)}},{key:"strokeText",value:function(r,i,a,s,o,u,l,c,h,d){Mb(r,i,u,c,h,d,this.imagePool,!0);var f,g=!de(l)&&l!==1;g&&(f=r.globalAlpha,r.globalAlpha=l),r.strokeText(a,s,o),g&&(r.globalAlpha=f)}},{key:"drawToContext",value:function(r,i,a,s,o){this.render(r,i.parsedStyle,i,i.ownerDocument.defaultView.context,s,o)}}])}(Ex),eq=function(n){function e(){var t,r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return U(this,e),t=Te(this,e),t.name="canvas-renderer",t.options=r,t}return Oe(e,n),H(e,[{key:"init",value:function(){var r,i=Ce({dirtyObjectNumThreshold:500,dirtyObjectRatioThreshold:.8},this.options),a=this.context.imagePool,s=new Ex(a),o=(r={},ae(ae(ae(ae(ae(ae(ae(ae(ae(ae(r,q.CIRCLE,s),q.ELLIPSE,s),q.RECT,s),q.IMAGE,new Jj(a)),q.TEXT,new Qj(a)),q.LINE,s),q.POLYLINE,s),q.POLYGON,s),q.PATH,s),q.GROUP,void 0),ae(ae(ae(r,q.HTML,void 0),q.MESH,void 0),q.FRAGMENT,void 0));this.context.defaultStyleRendererFactory=o,this.context.styleRendererFactory=o,this.addRenderingPlugin(new z4(i))}},{key:"destroy",value:function(){this.removeAllRenderingPlugins(),delete this.context.defaultStyleRendererFactory,delete this.context.styleRendererFactory}}])}(cs);/*!
 * @antv/g-plugin-dom-interaction
 * @description A G plugin
 * @version 2.1.23
 * @date 4/14/2025, 2:54:44 AM
 * @author AntVis
 * @docs https://g.antv.antgroup.com/
 */var j4=function(){function n(){U(this,n)}return H(n,[{key:"apply",value:function(t,r){var i=this,a=t.renderingService,s=t.renderingContext,o=t.config;this.context=t;var u=s.root.ownerDocument.defaultView,l=function(S){a.hooks.pointerMove.call(S)},c=function(S){a.hooks.pointerUp.call(S)},h=function(S){a.hooks.pointerDown.call(S)},d=function(S){a.hooks.pointerOver.call(S)},f=function(S){a.hooks.pointerOut.call(S)},g=function(S){a.hooks.pointerCancel.call(S)},p=function(S){a.hooks.pointerWheel.call(S)},v=function(S){a.hooks.click.call(S)},m=function(S){r.globalThis.document.addEventListener("pointermove",l,!0),S.addEventListener("pointerdown",h,!0),S.addEventListener("pointerleave",f,!0),S.addEventListener("pointerover",d,!0),r.globalThis.addEventListener("pointerup",c,!0),r.globalThis.addEventListener("pointercancel",g,!0)},y=function(S){S.addEventListener("touchstart",h,!0),S.addEventListener("touchend",c,!0),S.addEventListener("touchmove",l,!0),S.addEventListener("touchcancel",g,!0)},b=function(S){r.globalThis.document.addEventListener("mousemove",l,!0),S.addEventListener("mousedown",h,!0),S.addEventListener("mouseout",f,!0),S.addEventListener("mouseover",d,!0),r.globalThis.addEventListener("mouseup",c,!0)},x=function(S){r.globalThis.document.removeEventListener("pointermove",l,!0),S.removeEventListener("pointerdown",h,!0),S.removeEventListener("pointerleave",f,!0),S.removeEventListener("pointerover",d,!0),r.globalThis.removeEventListener("pointerup",c,!0),r.globalThis.removeEventListener("pointercancel",g,!0)},w=function(S){S.removeEventListener("touchstart",h,!0),S.removeEventListener("touchend",c,!0),S.removeEventListener("touchmove",l,!0),S.removeEventListener("touchcancel",g,!0)},E=function(S){r.globalThis.document.removeEventListener("mousemove",l,!0),S.removeEventListener("mousedown",h,!0),S.removeEventListener("mouseout",f,!0),S.removeEventListener("mouseover",d,!0),r.globalThis.removeEventListener("mouseup",c,!0)};a.hooks.init.tap(n.tag,function(){var _=i.context.contextService.getDomElement();r.globalThis.navigator.msPointerEnabled?(_.style.msContentZooming="none",_.style.msTouchAction="none"):u.supportsPointerEvents&&(_.style.touchAction="none"),u.supportsPointerEvents?m(_):b(_),u.supportsTouchEvents&&y(_),o.useNativeClickEvent&&_.addEventListener("click",v,!0),_.addEventListener("wheel",p,{passive:!0,capture:!0})}),a.hooks.destroy.tap(n.tag,function(){var _=i.context.contextService.getDomElement();r.globalThis.navigator.msPointerEnabled?(_.style.msContentZooming="",_.style.msTouchAction=""):u.supportsPointerEvents&&(_.style.touchAction=""),u.supportsPointerEvents?x(_):E(_),u.supportsTouchEvents&&w(_),o.useNativeClickEvent&&_.removeEventListener("click",v,!0),_.removeEventListener("wheel",p,!0)})}}])}();j4.tag="DOMInteraction";var tq=function(n){function e(){var t;U(this,e);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return t=Te(this,e,[].concat(i)),t.name="dom-interaction",t}return Oe(e,n),H(e,[{key:"init",value:function(){this.addRenderingPlugin(new j4)}},{key:"destroy",value:function(){this.removeAllRenderingPlugins()}}])}(cs);/*!
 * @antv/g-plugin-html-renderer
 * @description A G plugin for rendering HTML
 * @version 2.1.23
 * @date 4/14/2025, 2:54:54 AM
 * @author AntVis
 * @docs https://g.antv.antgroup.com/
 */var nq="g-canvas-camera",q4=function(){function n(){U(this,n),this.displayObjectHTMLElementMap=new WeakMap}return H(n,[{key:"joinTransformMatrix",value:function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[0,0,0];return"matrix(".concat([t[0],t[1],t[4],t[5],t[12]+r[0],t[13]+r[1]].join(","),")")}},{key:"apply",value:function(t,r){var i=this,a=t.camera,s=t.renderingContext,o=t.renderingService;this.context=t;var u=s.root.ownerDocument.defaultView,l=u.context.eventService.nativeHTMLMap,c=function(m,y){y.style.transform=i.joinTransformMatrix(m.getWorldTransform(),m.getOrigin())},h=function(m){var y=m.target;if(y.nodeName===q.HTML){i.$camera||(i.$camera=i.createCamera(a));var b=i.getOrCreateEl(y);i.$camera.appendChild(b),Object.keys(y.attributes).forEach(function(x){i.updateAttribute(x,y)}),c(y,b),l.set(b,y)}},d=function(m){var y=m.target;if(y.nodeName===q.HTML&&i.$camera){var b=i.getOrCreateEl(y);b&&(b.remove(),l.delete(b))}},f=function(m){var y=m.target;if(y.nodeName===q.HTML){var b=m.attrName;i.updateAttribute(b,y)}},g=function(m){var y=m.target,b=y.nodeName===q.FRAGMENT?y.childNodes:[y];b.forEach(function(x){if(x.nodeName===q.HTML){var w=i.getOrCreateEl(x);c(x,w)}})},p=function(){if(i.$camera){var m=i.context.config,y=m.width,b=m.height;i.$camera.parentElement.style.width="".concat(y||0,"px"),i.$camera.parentElement.style.height="".concat(b||0,"px")}};o.hooks.init.tap(n.tag,function(){u.addEventListener(cr.RESIZE,p),u.addEventListener(De.MOUNTED,h),u.addEventListener(De.UNMOUNTED,d),u.addEventListener(De.ATTR_MODIFIED,f),u.addEventListener(De.BOUNDS_CHANGED,g)}),o.hooks.endFrame.tap(n.tag,function(){i.$camera&&s.renderReasons.has(Go.CAMERA_CHANGED)&&(i.$camera.style.transform=i.joinTransformMatrix(a.getOrthoMatrix()))}),o.hooks.destroy.tap(n.tag,function(){i.$camera&&i.$camera.remove(),u.removeEventListener(cr.RESIZE,p),u.removeEventListener(De.MOUNTED,h),u.removeEventListener(De.UNMOUNTED,d),u.removeEventListener(De.ATTR_MODIFIED,f),u.removeEventListener(De.BOUNDS_CHANGED,g)})}},{key:"createCamera",value:function(t){var r=this.context.config,i=r.document,a=r.width,s=r.height,o=this.context.contextService.getDomElement(),u=o.parentNode;if(u){var l=nq,c=u.querySelector("#".concat(l));if(!c){var h=(i||document).createElement("div");h.style.overflow="hidden",h.style.pointerEvents="none",h.style.position="absolute",h.style.left="0px",h.style.top="0px",h.style.width="".concat(a||0,"px"),h.style.height="".concat(s||0,"px");var d=(i||document).createElement("div");c=d,d.id=l,d.style.position="absolute",d.style.left="".concat(o.offsetLeft||0,"px"),d.style.top="".concat(o.offsetTop||0,"px"),d.style.transformOrigin="left top",d.style.transform=this.joinTransformMatrix(t.getOrthoMatrix()),d.style.pointerEvents="none",d.style.width="100%",d.style.height="100%",h.appendChild(d),u.appendChild(h)}return c}return null}},{key:"getOrCreateEl",value:function(t){var r=this.context.config.document,i=this.displayObjectHTMLElementMap.get(t);return i||(i=(r||document).createElement("div"),t.parsedStyle.$el=i,this.displayObjectHTMLElementMap.set(t,i),t.id&&(i.id=t.id),t.name&&i.setAttribute("name",t.name),t.className&&(i.className=t.className),i.style.position="absolute",i.style["will-change"]="transform",i.style.transform=this.joinTransformMatrix(t.getWorldTransform(),t.getOrigin())),i}},{key:"updateAttribute",value:function(t,r){var i=this.getOrCreateEl(r);switch(t){case"innerHTML":var a=r.parsedStyle.innerHTML;qe(a)?i.innerHTML=a:(i.innerHTML="",i.appendChild(a));break;case"x":i.style.left="".concat(r.parsedStyle.x,"px");break;case"y":i.style.top="".concat(r.parsedStyle.y,"px");break;case"transformOrigin":var s=r.parsedStyle.transformOrigin;i.style["transform-origin"]="".concat(s[0].buildCSSText(null,null,"")," ").concat(s[1].buildCSSText(null,null,""));break;case"width":var o=r.parsedStyle.width;i.style.width=re(o)?"".concat(o,"px"):o.toString();break;case"height":var u=r.parsedStyle.height;i.style.height=re(u)?"".concat(u,"px"):u.toString();break;case"zIndex":var l=r.parsedStyle.zIndex;i.style["z-index"]="".concat(l);break;case"visibility":var c=r.parsedStyle.visibility;i.style.visibility=c;break;case"pointerEvents":var h=r.parsedStyle.pointerEvents,d=h===void 0?"auto":h;i.style.pointerEvents=d;break;case"opacity":var f=r.parsedStyle.opacity;i.style.opacity="".concat(f);break;case"fill":var g=r.parsedStyle.fill,p="";gd(g)?g.isNone?p="transparent":p=r.getAttribute("fill"):Array.isArray(g)?p=r.getAttribute("fill"):Xs(g),i.style.background=p;break;case"stroke":var v=r.parsedStyle.stroke,m="";gd(v)?v.isNone?m="transparent":m=r.getAttribute("stroke"):Array.isArray(v)?m=r.getAttribute("stroke"):Xs(v),i.style["border-color"]=m,i.style["border-style"]="solid";break;case"lineWidth":var y=r.parsedStyle.lineWidth;i.style["border-width"]="".concat(y||0,"px");break;case"lineDash":i.style["border-style"]="dashed";break;case"filter":var b=r.style.filter;i.style.filter=b;break;default:!de(r.style[t])&&r.style[t]!==""&&(i.style[t]=r.style[t])}}}])}();q4.tag="HTMLRendering";var rq=function(n){function e(){var t;U(this,e);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return t=Te(this,e,[].concat(i)),t.name="html-renderer",t}return Oe(e,n),H(e,[{key:"init",value:function(){this.addRenderingPlugin(new q4)}},{key:"destroy",value:function(){this.removeAllRenderingPlugins()}}])}(cs);/*!
 * @antv/g-canvas
 * @description A renderer implemented by Canvas 2D API
 * @version 2.0.42
 * @date 4/14/2025, 2:57:21 AM
 * @author AntVis
 * @docs https://g.antv.antgroup.com/
 */var iq=function(){function n(e){U(this,n),this.renderingContext=e.renderingContext,this.canvasConfig=e.config}return H(n,[{key:"init",value:function(){var t=this.canvasConfig,r=t.container,i=t.canvas;if(i)this.$canvas=i,r&&i.parentElement!==r&&r.appendChild(i),this.$container=i.parentElement,this.canvasConfig.container=this.$container;else if(r&&(this.$container=qe(r)?document.getElementById(r):r,this.$container)){var a=document.createElement("canvas");this.$container.appendChild(a),this.$container.style.position||(this.$container.style.position="relative"),this.$canvas=a}this.context=this.$canvas.getContext("2d"),this.resize(this.canvasConfig.width,this.canvasConfig.height)}},{key:"getContext",value:function(){return this.context}},{key:"getDomElement",value:function(){return this.$canvas}},{key:"getDPR",value:function(){return this.dpr}},{key:"getBoundingClientRect",value:function(){if(this.$canvas.getBoundingClientRect)return this.$canvas.getBoundingClientRect()}},{key:"destroy",value:function(){this.$container&&this.$canvas&&this.$canvas.parentNode&&this.$container.removeChild(this.$canvas)}},{key:"resize",value:function(t,r){var i=this.canvasConfig.devicePixelRatio;this.dpr=i,this.$canvas&&(this.$canvas.width=this.dpr*t,this.$canvas.height=this.dpr*r,LF(this.$canvas,t,r)),this.renderingContext.renderReasons.add(Go.CAMERA_CHANGED)}},{key:"applyCursorStyle",value:function(t){this.$container&&this.$container.style&&(this.$container.style.cursor=t)}},{key:"toDataURL",value:function(){var e=as(vn().mark(function r(){var i,a,s,o=arguments;return vn().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return i=o.length>0&&o[0]!==void 0?o[0]:{},a=i.type,s=i.encoderOptions,l.abrupt("return",this.context.canvas.toDataURL(a,s));case 3:case"end":return l.stop()}},r,this)}));function t(){return e.apply(this,arguments)}return t}()}])}(),aq=function(n){function e(){var t;U(this,e);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return t=Te(this,e,[].concat(i)),t.name="canvas-context-register",t}return Oe(e,n),H(e,[{key:"init",value:function(){this.context.ContextService=iq}},{key:"destroy",value:function(){delete this.context.ContextService}}])}(cs),Tl=function(n){function e(t){var r;return U(this,e),r=Te(this,e,[t]),r.registerPlugin(new aq),r.registerPlugin(new Yj),r.registerPlugin(new kj),r.registerPlugin(new eq),r.registerPlugin(new tq),r.registerPlugin(new Wj),r.registerPlugin(new rq),r}return Oe(e,n),H(e)}(L9),sq=globalThis&&globalThis.__rest||function(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(n);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(t[r[i]]=n[r[i]]);return t};class gf extends ui{constructor(e){super(Object.assign(Object.assign({},e),{style:Object.assign({},gf.defaultStyleProps,e.style)})),this.rootPointerEvent=new md(null),this.forwardEvents=t=>{const r=this.context.canvas,i=r.context.renderingContext.root.ownerDocument.defaultView;this.normalizeToPointerEvent(t,i).forEach(s=>{const o=this.bootstrapEvent(this.rootPointerEvent,s,i,t);wl(r.context.eventService,"mappingTable.pointerupoutside",[]),r.context.eventService.mapEvent(o)})}}get eventService(){return this.context.canvas.context.eventService}get events(){return[G.CLICK,G.POINTER_DOWN,G.POINTER_MOVE,G.POINTER_UP,G.POINTER_OVER,G.POINTER_LEAVE]}getDomElement(){return this.getShape("key").getDomElement()}render(e=this.parsedAttributes,t=this){this.drawKeyShape(e,t),this.drawPortShapes(e,t)}getKeyStyle(e){const t=Hs(e,["dx","dy","innerHTML","pointerEvents","cursor"]),{dx:r=0,dy:i=0}=t,a=sq(t,["dx","dy"]),[s,o]=this.getSize(e);return Object.assign(Object.assign({x:r,y:i},a),{width:s,height:o})}drawKeyShape(e,t){const r=this.getKeyStyle(e),{x:i,y:a,width:s=0,height:o=0}=r,u=this.upsert("key-container",mn,{x:i,y:a,width:s,height:o,opacity:0},t);return this.upsert("key",ec,r,u)}connectedCallback(){if(!(this.context.canvas.getRenderer("main")instanceof Tl))return;const r=this.getDomElement();this.events.forEach(i=>{r.addEventListener(i,this.forwardEvents)})}attributeChangedCallback(e,t,r){e==="zIndex"&&t!==r&&(this.getDomElement().style.zIndex=r)}destroy(){const e=this.getDomElement();this.events.forEach(t=>{e.removeEventListener(t,this.forwardEvents)}),super.destroy()}normalizeToPointerEvent(e,t){const r=[];if(t.isTouchEvent(e))for(let i=0;i<e.changedTouches.length;i++){const a=e.changedTouches[i];me(a.button)&&(a.button=0),me(a.buttons)&&(a.buttons=1),me(a.isPrimary)&&(a.isPrimary=e.touches.length===1&&e.type==="touchstart"),me(a.width)&&(a.width=a.radiusX||1),me(a.height)&&(a.height=a.radiusY||1),me(a.tiltX)&&(a.tiltX=0),me(a.tiltY)&&(a.tiltY=0),me(a.pointerType)&&(a.pointerType="touch"),me(a.pointerId)&&(a.pointerId=a.identifier||0),me(a.pressure)&&(a.pressure=a.force||.5),me(a.twist)&&(a.twist=0),me(a.tangentialPressure)&&(a.tangentialPressure=0),a.isNormalized=!0,a.type=e.type,r.push(a)}else if(t.isMouseEvent(e)){const i=e;me(i.isPrimary)&&(i.isPrimary=!0),me(i.width)&&(i.width=1),me(i.height)&&(i.height=1),me(i.tiltX)&&(i.tiltX=0),me(i.tiltY)&&(i.tiltY=0),me(i.pointerType)&&(i.pointerType="mouse"),me(i.pointerId)&&(i.pointerId=1),me(i.pressure)&&(i.pressure=.5),me(i.twist)&&(i.twist=0),me(i.tangentialPressure)&&(i.tangentialPressure=0),i.isNormalized=!0,r.push(i)}else r.push(e);return r}transferMouseData(e,t){e.isTrusted=t.isTrusted,e.srcElement=t.srcElement,e.timeStamp=performance.now(),e.type=t.type,e.altKey=t.altKey,e.metaKey=t.metaKey,e.shiftKey=t.shiftKey,e.ctrlKey=t.ctrlKey,e.button=t.button,e.buttons=t.buttons,e.client.x=t.clientX,e.client.y=t.clientY,e.movement.x=t.movementX,e.movement.y=t.movementY,e.page.x=t.pageX,e.page.y=t.pageY,e.screen.x=t.screenX,e.screen.y=t.screenY,e.relatedTarget=null}bootstrapEvent(e,t,r,i){e.view=r,e.originalEvent=null,e.nativeEvent=i,e.pointerId=t.pointerId,e.width=t.width,e.height=t.height,e.isPrimary=t.isPrimary,e.pointerType=t.pointerType,e.pressure=t.pressure,e.tangentialPressure=t.tangentialPressure,e.tiltX=t.tiltX,e.tiltY=t.tiltY,e.twist=t.twist,this.transferMouseData(e,t);const{x:a,y:s}=this.getViewportXY(t);e.viewport.x=a,e.viewport.y=s;const[o,u]=this.context.canvas.getCanvasByViewport([a,s]);return e.canvas.x=o,e.canvas.y=u,e.global.copyFrom(e.canvas),e.offset.copyFrom(e.canvas),e.isTrusted=i.isTrusted,e.type==="pointerleave"&&(e.type="pointerout"),e}getViewportXY(e){let t,r;const{offsetX:i,offsetY:a,clientX:s,clientY:o}=e;if(!de(i)&&!de(a))t=i,r=a;else{const u=this.eventService.client2Viewport({x:s,y:o});t=u.x,r=u.y}return{x:t,y:r}}onframe(){super.onframe();const{opacity:e}=this.attributes;this.getDomElement().style.opacity=`${e}`}}gf.defaultStyleProps={size:[160,80],halo:!1,icon:!1,label:!1,pointerEvents:"auto"};var v3=globalThis&&globalThis.__rest||function(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(n);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(t[r[i]]=n[r[i]]);return t};let G4=class W4 extends ui{constructor(e){super(ln({style:W4.defaultStyleProps},e))}getKeyStyle(e){const[t,r]=this.getSize(e),i=super.getKeyStyle(e),{fillOpacity:a,opacity:s=a}=i,o=v3(i,["fillOpacity","opacity"]);return Object.assign(Object.assign({opacity:s},o),{width:t,height:r,x:-t/2,y:-r/2})}getHaloStyle(e){if(e.halo===!1)return!1;const t=this.getShape("key").attributes;v3(t,["fill","stroke"]);const r=Bt(this.getGraphicStyle(e),"halo"),i=Number(r.lineWidth),[a,s]=xe(this.getSize(e),[i,i]),o="transparent";return Object.assign(Object.assign({},r),{width:a,height:s,fill:o,x:-a/2,y:-s/2})}getIconStyle(e){const t=super.getIconStyle(e),[r,i]=this.getSize(e);return t?Object.assign({width:r*ca,height:i*ca},t):!1}drawKeyShape(e,t){const r=this.upsert("key",yx,this.getKeyStyle(e),t);return bx(this),r}drawHaloShape(e,t){this.upsert("halo",mn,this.getHaloStyle(e),t)}update(e){super.update(e),e&&("x"in e||"y"in e||"z"in e)&&xx(this)}};G4.defaultStyleProps={size:32};class oq extends ui{constructor(e){super(e)}getKeyStyle(e){const[t,r]=this.getSize(e);return Object.assign(Object.assign({},super.getKeyStyle(e)),{width:t,height:r,x:-t/2,y:-r/2})}getIconStyle(e){const t=super.getIconStyle(e),{width:r,height:i}=this.getShape("key").attributes;return t?Object.assign({width:r*ca,height:i*ca},t):!1}drawKeyShape(e,t){return this.upsert("key",mn,this.getKeyStyle(e),t)}}class uq extends hf{constructor(e){super(e)}getInnerR(e){return e.innerR||this.getOuterR(e)*3/8}getOuterR(e){return Math.min(...this.getSize(e))/2}getPoints(e){return Vq(this.getOuterR(e),this.getInnerR(e))}getIconStyle(e){const t=super.getIconStyle(e),r=this.getInnerR(e)*2*ca;return t?Object.assign({width:r,height:r},t):!1}getPortXY(e,t){const{placement:r="top"}=t,i=this.getShape("key").getLocalBounds(),a=Uq(this.getOuterR(e),this.getInnerR(e));return kx(i,r,a,!1)}}class pf extends hf{constructor(e){super(ln({style:pf.defaultStyleProps},e))}getPoints(e){const{direction:t}=e,[r,i]=this.getSize(e);return Hq(r,i,t)}getPortXY(e,t){const{direction:r}=e,{placement:i="top"}=t,a=this.getShape("key").getLocalBounds(),[s,o]=this.getSize(e),u=Yq(s,o,r);return kx(a,i,u,!1)}getIconStyle(e){const{icon:t,iconText:r,iconSrc:i,direction:a}=e;if(t===!1||wi(r||i))return!1;const s=Bt(this.getGraphicStyle(e),"icon"),o=this.getShape("key").getLocalBounds(),[u,l]=d$(o,a),c=f$(o,a)*2*ca;return Object.assign({x:u,y:l,width:c,height:c},s)}}pf.defaultStyleProps={size:40,direction:"up"};var m3=globalThis&&globalThis.__rest||function(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(n);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(t[r[i]]=n[r[i]]);return t};class pu extends ui{constructor(e){super(ln({style:pu.defaultStyleProps},e)),this.type="combo",this.updateComboPosition(this.parsedAttributes)}getKeySize(e){const{collapsed:t,childrenNode:r=[]}=e;return r.length===0?this.getEmptyKeySize(e):t?this.getCollapsedKeySize(e):this.getExpandedKeySize(e)}getEmptyKeySize(e){const{padding:t,collapsedSize:r}=e,[i,a,s,o]=Ri(t);return xe(mr(r),[o+a,i+s,0])}getCollapsedKeySize(e){return mr(e.collapsedSize)}getExpandedKeySize(e){const t=this.getContentBBox(e);return[Li(t),Ii(t),0]}getContentBBox(e){const{childrenNode:t=[],padding:r}=e,i=t.map(s=>this.context.element.getElement(s)).filter(Boolean);if(i.length===0){const s=new rt,{x:o=0,y:u=0,size:l}=e,[c,h]=mr(l);return s.setMinMax([o-c/2,u-h/2,0],[o+c/2,u+h/2,0]),s}const a=nc(i.map(s=>s.getBounds()));return r?ds(a,r):a}drawCollapsedMarkerShape(e,t){const r=this.getCollapsedMarkerStyle(e);this.upsert("collapsed-marker",N4,r,t),bx(this)}getCollapsedMarkerStyle(e){if(!e.collapsed||!e.collapsedMarker)return!1;const t=Bt(this.getGraphicStyle(e),"collapsedMarker"),{type:r}=t,i=m3(t,["type"]),a=this.getShape("key"),[s,o]=Ji(a.getLocalBounds(),"center"),u=Object.assign(Object.assign({},i),{x:s,y:o});if(r){const l=this.getCollapsedMarkerText(r,e);Object.assign(u,{text:l})}return u}getCollapsedMarkerText(e,t){const{childrenData:r=[]}=t,{model:i}=this.context;return e==="descendant-count"?i.getDescendantsData(this.id).length.toString():e==="child-count"?r.length.toString():e==="node-count"?i.getDescendantsData(this.id).filter(a=>i.getElementType(z(a))==="node").length.toString():se(e)?e(r):""}getComboPosition(e){const{x:t=0,y:r=0,collapsed:i,childrenData:a=[]}=e;if(a.length===0)return[+t,+r,0];if(i){const{model:s}=this.context,o=s.getDescendantsData(this.id).filter(u=>!s.isCombo(z(u)));if(o.length>0&&o.some(z$)){const u=o.reduce((l,c)=>xe(l,Ut(c)),[0,0,0]);return oi(u,o.length)}return[+t,+r,0]}return this.getContentBBox(e).center}getComboStyle(e){const[t,r]=this.getComboPosition(e);return{x:t,y:r,transform:[["translate",t,r]]}}updateComboPosition(e){const t=this.getComboStyle(e);Object.assign(this.style,t);const{x:r,y:i}=t;this.context.model.syncNodeLikeDatum({id:this.id,style:{x:r,y:i}}),xx(this)}render(e,t=this){super.render(e,t),this.drawCollapsedMarkerShape(e,t)}update(e={}){super.update(e),this.updateComboPosition(this.parsedAttributes)}onframe(){super.onframe(),this.attributes.collapsed||this.updateComboPosition(this.parsedAttributes),this.drawKeyShape(this.parsedAttributes,this)}animate(e,t){const r=super.animate(this.attributes.collapsed?e:e.map(i=>{var a=m3(i,["x","y","z","transform"]);return a}),t);return r&&new Proxy(r,{set:(i,a,s)=>(a==="currentTime"&&Promise.resolve().then(()=>this.onframe()),Reflect.set(i,a,s))})}}pu.defaultStyleProps={childrenNode:[],droppable:!0,draggable:!0,collapsed:!1,collapsedSize:32,collapsedMarker:!0,collapsedMarkerZIndex:1,collapsedMarkerFontSize:12,collapsedMarkerTextAlign:"center",collapsedMarkerTextBaseline:"middle",collapsedMarkerType:"child-count"};class lq extends pu{constructor(e){super(e)}drawKeyShape(e,t){return this.upsert("key",pa,this.getKeyStyle(e),t)}getKeyStyle(e){const{collapsed:t}=e,r=super.getKeyStyle(e),[i]=this.getKeySize(e);return Object.assign(Object.assign(Object.assign({},r),t&&Bt(r,"collapsed")),{r:i/2})}getCollapsedKeySize(e){const[t,r]=mr(e.collapsedSize),i=Math.max(t,r)/2;return[i*2,i*2,0]}getExpandedKeySize(e){const t=this.getContentBBox(e),[r,i]=hs(t),a=Math.sqrt(Math.pow(r,2)+Math.pow(i,2))/2;return[a*2,a*2,0]}getIntersectPoint(e,t=!1){const r=this.getShape("key").getBounds();return lf(e,r,t)}}class cq extends pu{constructor(e){super(e)}drawKeyShape(e,t){return this.upsert("key",mn,this.getKeyStyle(e),t)}getKeyStyle(e){const t=super.getKeyStyle(e),[r,i]=this.getKeySize(e);return Object.assign(Object.assign(Object.assign({},t),e.collapsed&&Bt(t,"collapsed")),{width:r,height:i,x:-r/2,y:-i/2})}}const hq={padding:10};function y3(n,e,t,r,i,a){const{padding:s}=Object.assign(hq,a),o=Ga(t,s),u=Ga(r,s),l=[n,...i,e];let c=null;const h=[];for(let d=0,f=l.length;d<f-1;d++){const g=d+1,p=l[d],v=l[g],m=q$(p,v);let y=null;if(d===0)if(g===f-1)if(o.intersects(u))y=bg(p,v,o,u);else if(!xd(p,o)&&!xd(v,u)){const b=qs(p,o),x=qs(v,u);y=x3(b,x,zn(b,x)),y.points.unshift(b),y.points.push(x)}else m||(y=fq(p,v,o,u));else si(v,o)?y=bg(p,v,o,Ga(v,s),c):m||(y=Bh(p,v,o));else g===f-1?si(p,u)?y=bg(p,v,Ga(p,s),u,c):m||(y=V4(p,v,u,c)):m||(y=x3(p,v,c));y?(h.push(...y.points),c=y.direction):c=zn(p,v),g<f-1&&h.push(v)}return h.map(Js)}const dq={N:"S",S:"N",W:"E",E:"W"},b3={N:-Math.PI/2,S:Math.PI/2,E:0,W:Math.PI};function zn(n,e){const[t,r]=n,[i,a]=e;return t===i?r>a?"N":"S":r===a?t>i?"W":"E":null}function Pb(n,e){return e==="N"||e==="S"?Ii(n):Li(n)}function x3(n,e,t){const r=[n[0],e[1]],i=[e[0],n[1]],a=zn(n,r),s=zn(n,i),o=t?dq[t]:null,u=a===t||a!==o&&s!==t?r:i;return{points:[u],direction:zn(u,e)}}function Bh(n,e,t){if(xd(n,t)){const r=Ol(n,e,t);return{points:[r],direction:zn(r,e)}}else{const r=qs(n,t),a=["left","right"].includes(hl(n,t))?[e[0],r[1]]:[r[0],e[1]];return{points:[a],direction:zn(a,e)}}}function V4(n,e,t,r){const i=xd(e,t)?e:qs(e,t),a=[[i[0],n[1]],[n[0],i[1]]],s=a.filter(u=>h$(u,t)&&!c4(u,t,!0)),o=s.filter(u=>zn(u,n)!==r);if(o.length>0){const u=o.find(l=>zn(n,l)===r)||o[0];return{points:[u],direction:zn(u,e)}}else{const u=sI(a,s)[0],l=ts(e,u,Pb(t,r)/2);return{points:[Ol(l,n,t),l],direction:zn(l,e)}}}function fq(n,e,t,r){let i=Bh(n,e,t);const a=Al(i.points[0]);if(si(a,r)){i=Bh(e,n,r);const s=Al(i.points[0]);if(si(s,t)){const o=ts(n,a,Pb(t,zn(n,a))/2),u=ts(e,s,Pb(r,zn(e,s))/2),l=[(o[0]+u[0])/2,(o[1]+u[1])/2],c=Bh(n,l,t),h=V4(l,e,r,c.direction);i.points=[c.points[0],h.points[0]],i.direction=h.direction}}return i}function bg(n,e,t,r,i){const s=nc([t,r]),o=ot(e,s.center)>ot(n,s.center),[u,l]=o?[e,n]:[n,e],c=Ii(s)+Li(s);let h;if(i){const g=[u[0]+c*Math.cos(b3[i]),u[1]+c*Math.sin(b3[i])];h=ts(qs(g,s),g,.01)}else h=ts(qs(u,s),u,-.01);let d=Ol(h,l,s),f=[Nu(h,2),Nu(d,2)];if(Dt(Nu(h),Nu(d))){const g=px(Ke(h,u),[1,0,0])+Math.PI/2;d=[l[0]+c*Math.cos(g),l[1]+c*Math.sin(g),0],d=Nu(ts(qs(d,s),l,-.01),2);const p=Ol(h,d,s);f=[h,p,d]}return{points:o?f.reverse():f,direction:zn(o?h:d,e)}}function Ol(n,e,t){let r=[n[0],e[1]];return si(r,t)&&(r=[e[0],n[1]]),r}function U4(n,e,t,r,i){let u=typeof e=="number"?e:.5;e==="start"&&(u=0),e==="end"&&(u=.99);const l=pn(n.getPoint(u)),c=pn(n.getPoint(u+.01));let h=e==="start"?"left":e==="end"?"right":"center";if(w4(l,c)||!t){const[m,y]=w3(n,u,r,i);return{transform:[["translate",m,y]],textAlign:h}}let d=Math.atan2(c[1]-l[1],c[0]-l[0]);c[0]<l[0]&&(h=h==="center"?h:h==="left"?"right":"left",r*=-1,d+=Math.PI);const[g,p]=w3(n,u,r,i,d),v=[["translate",g,p],["rotate",d/Math.PI*180]];return{textAlign:h,transform:v}}function gq(n,e,t,r,i){var a,s;const o=((a=n.badge)===null||a===void 0?void 0:a.getGeometryBounds().halfExtents[0])*2||0,u=((s=n.label)===null||s===void 0?void 0:s.getGeometryBounds().halfExtents[0])*2||0;return U4(n.key,t,!0,(u?(u/2+o/2)*(e==="suffix"?1:-1):0)+r,i)}function w3(n,e,t,r,i){const[a,s]=pn(n.getPoint(e));let o=t,u=r;return i&&(o=t*Math.cos(i)-r*Math.sin(i),u=t*Math.sin(i)+r*Math.cos(i)),[a+o,s+u]}function Nb(n,e,t,r){if(Dt(n,e))return n;const i=Ke(e,n),a=[n[0]+t*i[0],n[1]+t*i[1]],s=oa(uf(i,!1));return a[0]+=r*s[0],a[1]+=r*s[1],a}function pq(n){return re(n)?[n,-n]:n}function vq(n){return re(n)?[n,1-n]:n}function mq(n,e,t){return[["M",n[0],n[1]],["Q",t[0],t[1],e[0],e[1]]]}function H4(n,e,t){return[["M",n[0],n[1]],["C",t[0][0],t[0][1],t[1][0],t[1][1],e[0],e[1]]]}function _x(n,e=0,t=!1){const r=n.length-1,i=n[0],a=n[r],s=n.slice(1,r),o=[["M",i[0],i[1]]];return s.forEach((u,l)=>{const c=s[l-1]||i,h=s[l+1]||a;if(!E4(c,u,h)&&e){const[d,f]=yq(c,u,h,e);o.push(["L",d[0],d[1]],["Q",u[0],u[1],f[0],f[1]],["L",f[0],f[1]])}else o.push(["L",u[0],u[1]])}),o.push(["L",a[0],a[1]]),t&&o.push(["Z"]),o}function yq(n,e,t,r){const i=wd(n,e),a=wd(t,e),s=Math.min(r,Math.min(i,a)/2),o=[e[0]-s/i*(e[0]-n[0]),e[1]-s/i*(e[1]-n[1])],u=[e[0]-s/a*(e[0]-t[0]),e[1]-s/a*(e[1]-t[1])];return[o,u]}const bq=n=>{const e=Math.PI/2,t=Ii(n)/2,r=Li(n)/2,i=Math.atan2(t,r)/2,a=Math.atan2(r,t)/2;return{top:[-e-a,-e+a],"top-right":[-e+a,-i],"right-top":[-e+a,-i],right:[-i,i],"bottom-right":[i,e-a],"right-bottom":[i,e-a],bottom:[e-a,e+a],"bottom-left":[e+a,Math.PI-i],"left-bottom":[e+a,Math.PI-i],left:[Math.PI-i,Math.PI+i],"top-left":[Math.PI+i,-e-a],"left-top":[Math.PI+i,-e-a]}};function Y4(n,e,t,r,i){const a=Ga(n),s=n.getCenter();let o=r&&ss(r),u=i&&ss(i);if(!o||!u){const l=bq(a),c=l[e][0],h=l[e][1],[d,f]=hs(a),g=Math.max(d,f),p=xe(s,[g*Math.cos(c),g*Math.sin(c),0]),v=xe(s,[g*Math.cos(h),g*Math.sin(h),0]);o=Rb(n,p),u=Rb(n,v),t||([o,u]=[u,o])}return[o,u]}function xq(n,e,t,r,i,a){const s=n.getPorts()[i||a],o=n.getPorts()[a||i];let[u,l]=Y4(n,e,t,s,o);const c=wq(n,u,l,r);return s&&(u=Ml(s,c[0])),o&&(l=Ml(o,c.at(-1))),H4(u,l,c)}function wq(n,e,t,r){const i=n.getCenter();if(Dt(e,t)){const a=Ke(e,i),s=[r*Math.sign(a[0])||r/2,r*Math.sign(a[1])||-r/2,0];return[xe(e,s),xe(t,ni(s,[1,-1,1]))]}return[ts(i,e,ot(i,e)+r),ts(i,t,ot(i,t)+r)]}function Eq(n,e,t,r,i,a,s){const o=Cx(n),u=o[a||s],l=o[s||a];let[c,h]=Y4(n,t,r,u,l);const d=_q(n,c,h,i);return u&&(c=Ml(u,d[0])),l&&(h=Ml(l,d.at(-1))),_x([c,...d,h],e)}function _q(n,e,t,r){const i=[],a=Ga(n);if(Dt(e,t))switch(hl(e,a)){case"left":i.push([e[0]-r,e[1]]),i.push([e[0]-r,e[1]+r]),i.push([e[0],e[1]+r]);break;case"right":i.push([e[0]+r,e[1]]),i.push([e[0]+r,e[1]+r]),i.push([e[0],e[1]+r]);break;case"top":i.push([e[0],e[1]-r]),i.push([e[0]+r,e[1]-r]),i.push([e[0]+r,e[1]]);break;case"bottom":i.push([e[0],e[1]+r]),i.push([e[0]+r,e[1]+r]),i.push([e[0]+r,e[1]]);break}else{const s=hl(e,a),o=hl(t,a);if(s===o){const u=s;let l,c;switch(u){case"left":l=Math.min(e[0],t[0])-r,i.push([l,e[1]]),i.push([l,t[1]]);break;case"right":l=Math.max(e[0],t[0])+r,i.push([l,e[1]]),i.push([l,t[1]]);break;case"top":c=Math.min(e[1],t[1])-r,i.push([e[0],c]),i.push([t[0],c]);break;case"bottom":c=Math.max(e[1],t[1])+r,i.push([e[0],c]),i.push([t[0],c]);break}}else{const u=(d,f)=>({left:[f[0]-r,f[1]],right:[f[0]+r,f[1]],top:[f[0],f[1]-r],bottom:[f[0],f[1]+r]})[d],l=u(s,e),c=u(o,t),h=Ol(l,c,a);i.push(l,h,c)}}return i}function Db(n,e){const t=new Set,r=new Set,i=new Set;return n.forEach(a=>{e(a).forEach(o=>{t.add(o),n.includes(o.source)&&n.includes(o.target)?r.add(o):i.add(o)})}),{edges:Array.from(t),internal:Array.from(r),external:Array.from(i)}}function E3(n,e){const t=[];let r=n;for(;r;){t.push(r);const i=e(z(r));if(i)r=i;else break}if(t.some(i=>{var a;return(a=i.style)===null||a===void 0?void 0:a.collapsed})){const i=t.reverse().findIndex(Zn);return t[i]||t.at(-1)}return n}function Sq(n,e){return e||(n<4?10:n===4?12:n*2.5)}const kq=(n,e)=>{const t=Math.max(n,e)/2;return[["M",-n/2,0],["A",t,t,0,1,0,2*t-n/2,0],["A",t,t,0,1,0,-n/2,0],["Z"]]},X4=(n,e)=>[["M",-n/2,0],["L",n/2,-e/2],["L",n/2,e/2],["Z"]],Cq=(n,e)=>[["M",-n/2,0],["L",0,-e/2],["L",n/2,0],["L",0,e/2],["Z"]],Aq=(n,e)=>[["M",-n/2,0],["L",n/2,-e/2],["L",4*n/5-n/2,0],["L",n/2,e/2],["Z"]],Tq=(n,e)=>[["M",-n/2,-e/2],["L",n/2,-e/2],["L",n/2,e/2],["L",-n/2,e/2],["Z"]],Oq=(n,e)=>{const t=n/2,r=n/7,i=n-r;return[["M",-t,0],["L",0,-e/2],["L",0,e/2],["Z"],["M",i-t,-e/2],["L",i+r-t,-e/2],["L",i+r-t,e/2],["L",i-t,e/2],["Z"]]},Mq=(n,e)=>[["M",n/2,-e/2],["L",-n/2,0],["L",n/2,0],["L",-n/2,0],["L",n/2,e/2]],Pq=Object.freeze(Object.defineProperty({__proto__:null,circle:kq,diamond:Cq,rect:Tq,simple:Mq,triangle:X4,triangleRect:Oq,vee:Aq},Symbol.toStringTag,{value:"Module"}));var ah=globalThis&&globalThis.__rest||function(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(n);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(t[r[i]]=n[r[i]]);return t};class gs extends D4{constructor(e){super(ln({style:gs.defaultStyleProps},e)),this.type="edge"}get sourceNode(){const{sourceNode:e}=this.parsedAttributes;return this.context.element.getElement(e)}get targetNode(){const{targetNode:e}=this.parsedAttributes;return this.context.element.getElement(e)}getKeyStyle(e){const t=this.getGraphicStyle(e),{loop:r}=t,i=ah(t,["loop"]),{sourceNode:a,targetNode:s}=this,u={d:r&&jq(a,s)?this.getLoopPath(e):this.getKeyPath(e)};return fr.PARSED_STYLE_LIST.forEach(l=>{l in i&&(u[l]=i[l])}),u}getLoopPath(e){const{sourcePort:t,targetPort:r}=e,i=this.sourceNode,a=Ga(i),s=Math.max(Li(a),Ii(a)),{placement:o,clockwise:u,dist:l=s}=Bt(this.getGraphicStyle(e),"loop");return xq(i,o,u,l,t,r)}getEndpoints(e,t=!0,r=[]){const{sourcePort:i,targetPort:a}=e,{sourceNode:s,targetNode:o}=this,[u,l]=Gq(s,o,i,a);if(!t){const f=u?ss(u):s.getCenter(),g=l?ss(l):o.getCenter();return[f,g]}const c=typeof r=="function"?r():r,h=A3(u||s,c[0]||l||o),d=A3(l||o,c[c.length-1]||u||s);return[h,d]}getHaloStyle(e){if(e.halo===!1)return!1;const t=this.getKeyStyle(e),r=Bt(this.getGraphicStyle(e),"halo");return Object.assign(Object.assign({},t),r)}getLabelStyle(e){if(e.label===!1||!e.labelText)return!1;const t=Bt(this.getGraphicStyle(e),"label"),{placement:r,offsetX:i,offsetY:a,autoRotate:s,maxWidth:o}=t,u=ah(t,["placement","offsetX","offsetY","autoRotate","maxWidth"]),l=U4(this.shapeMap.key,r,s,i,a),c=this.shapeMap.key.getLocalBounds(),h=nj([c.min,c.max],o);return Object.assign({wordWrapWidth:h},l,u)}getBadgeStyle(e){if(e.badge===!1||!e.badgeText)return!1;const t=Bt(e,"badge"),{offsetX:r,offsetY:i,placement:a}=t,s=ah(t,["offsetX","offsetY","placement"]);return Object.assign(s,gq(this.shapeMap,a,e.labelPlacement,r,i))}drawArrow(e,t){var r;const i=t==="start",s=e[t==="start"?"startArrow":"endArrow"],o=this.shapeMap.key;if(s){const u=this.getArrowStyle(e,i),[l,c,h]=i?["markerStart","markerStartOffset","startArrowOffset"]:["markerEnd","markerEndOffset","endArrowOffset"],d=o.parsedStyle[l];if(d)d.attr(u);else{const f=u.src?tc:fr,g=new f({style:u});o.style[l]=g}o.style[c]=e[h]||u.width/2+ +u.lineWidth}else{const u=i?"markerStart":"markerEnd";(r=o.style[u])===null||r===void 0||r.destroy(),o.style[u]=null}}getArrowStyle(e,t){const r=this.getShape("key").attributes,i=t?"startArrow":"endArrow",a=Bt(this.getGraphicStyle(e),i),{size:s,type:o}=a,u=ah(a,["size","type"]),[l,c]=mr(Sq(r.lineWidth,s)),d=(se(o)?o:Pq[o]||X4)(l,c);return Object.assign(Hs(r,["stroke","strokeOpacity","fillOpacity"]),{width:l,height:c},Object.assign({},d&&{d,fill:o==="simple"?"":r.stroke}),u)}drawLabelShape(e,t){const r=this.getLabelStyle(e);this.upsert("label",fs,r,t)}drawHaloShape(e,t){const r=this.getHaloStyle(e);this.upsert("halo",fr,r,t)}drawBadgeShape(e,t){const r=this.getBadgeStyle(e);this.upsert("badge",gu,r,t)}drawSourceArrow(e){this.drawArrow(e,"start")}drawTargetArrow(e){this.drawArrow(e,"end")}drawKeyShape(e,t){const r=this.getKeyStyle(e);return this.upsert("key",fr,r,t)}render(e=this.parsedAttributes,t=this){this.drawKeyShape(e,t),this.getShape("key")&&(this.drawSourceArrow(e),this.drawTargetArrow(e),this.drawLabelShape(e,t),this.drawHaloShape(e,t),this.drawBadgeShape(e,t))}onframe(){this.drawKeyShape(this.parsedAttributes,this),this.drawSourceArrow(this.parsedAttributes),this.drawTargetArrow(this.parsedAttributes),this.drawHaloShape(this.parsedAttributes,this),this.drawLabelShape(this.parsedAttributes,this),this.drawBadgeShape(this.parsedAttributes,this)}animate(e,t){const r=super.animate(e,t);return r&&new Proxy(r,{set:(i,a,s)=>(a==="currentTime"&&Promise.resolve().then(()=>this.onframe()),Reflect.set(i,a,s))})}}gs.defaultStyleProps={badge:!0,badgeOffsetX:0,badgeOffsetY:0,badgePlacement:"suffix",isBillboard:!0,label:!0,labelAutoRotate:!0,labelIsBillboard:!0,labelMaxWidth:"80%",labelOffsetX:4,labelOffsetY:0,labelPlacement:"center",labelTextBaseline:"middle",labelWordWrap:!1,halo:!1,haloDroppable:!1,haloLineDash:0,haloLineWidth:12,haloPointerEvents:"none",haloStrokeOpacity:.25,haloZIndex:-1,loop:!0,startArrow:!1,startArrowLineDash:0,startArrowLineJoin:"round",startArrowLineWidth:1,startArrowTransformOrigin:"center",startArrowType:"vee",endArrow:!1,endArrowLineDash:0,endArrowLineJoin:"round",endArrowLineWidth:1,endArrowTransformOrigin:"center",endArrowType:"vee",loopPlacement:"top",loopClockwise:!0};class ao extends gs{constructor(e){super(ln({style:ao.defaultStyleProps},e))}getKeyPath(e){const[t,r]=this.getEndpoints(e),{controlPoints:i,curvePosition:a,curveOffset:s}=e,o=this.getControlPoints(t,r,vq(a),pq(s),i);return H4(t,r,o)}getControlPoints(e,t,r,i,a){return(a==null?void 0:a.length)===2?a:[Nb(e,t,r[0],i[0]),Nb(e,t,r[1],i[1])]}}ao.defaultStyleProps={curvePosition:.5,curveOffset:20};class vf extends ao{constructor(e){super(ln({style:vf.defaultStyleProps},e))}getControlPoints(e,t,r,i){const a=t[0]-e[0];return[[e[0]+a*r[0]+i[0],e[1]],[t[0]-a*r[1]+i[1],t[1]]]}}vf.defaultStyleProps={curvePosition:[.5,.5],curveOffset:[0,0]};class mf extends ao{constructor(e){super(ln({style:mf.defaultStyleProps},e))}get ref(){return this.context.model.getRootsData()[0]}getEndpoints(e){if(this.sourceNode.id===this.ref.id)return super.getEndpoints(e);const t=Ut(this.ref),r=this.sourceNode.getIntersectPoint(t,!0),i=this.targetNode.getIntersectPoint(t);return[r,i]}toRadialCoordinate(e){const t=Ut(this.ref),r=ot(e,t),i=y4(Ke(e,t));return[r,i]}getControlPoints(e,t,r,i){const[a,s]=this.toRadialCoordinate(e),[o]=this.toRadialCoordinate(t),u=o-a;return[[e[0]+(u*r[0]+i[0])*Math.cos(s),e[1]+(u*r[0]+i[0])*Math.sin(s)],[t[0]-(u*r[1]-i[0])*Math.cos(s),t[1]-(u*r[1]-i[0])*Math.sin(s)]]}}mf.defaultStyleProps={curvePosition:.5,curveOffset:20};class yf extends ao{constructor(e){super(ln({style:yf.defaultStyleProps},e))}getControlPoints(e,t,r,i){const a=t[1]-e[1];return[[e[0],e[1]+a*r[0]+i[0]],[t[0],t[1]-a*r[1]+i[1]]]}}yf.defaultStyleProps={curvePosition:[.5,.5],curveOffset:[0,0]};let K4=class Z4 extends gs{constructor(e){super(ln({style:Z4.defaultStyleProps},e))}getKeyPath(e){const[t,r]=this.getEndpoints(e);return[["M",t[0],t[1]],["L",r[0],r[1]]]}};K4.defaultStyleProps={};const Nq={enableObstacleAvoidance:!1,offset:10,maxAllowedDirectionChange:Math.PI/2,maximumLoops:3e3,gridSize:5,startDirections:["top","right","bottom","left"],endDirections:["top","right","bottom","left"],directionMap:{right:{stepX:1,stepY:0},left:{stepX:-1,stepY:0},bottom:{stepX:0,stepY:1},top:{stepX:0,stepY:-1}},penalties:{0:0,90:0},distFunc:wd},Hi=n=>`${Math.round(n[0])}|||${Math.round(n[1])}`;function Rs(n,e){const t=r=>Math.round(r/e);return re(n)?t(n):n.map(t)}function Dq(n,e){const t=Math.abs(n-e);return t>Math.PI?2*Math.PI-t:t}function _3(n,e){const t=e[0]-n[0],r=e[1]-n[1];return!t&&!r?0:Math.atan2(r,t)}function J4(n,e,t,r){const i=_3(n,e),a=t[Hi(n)],o=_3(a||r,n);return Dq(o,i)}const Rq=(n,e)=>{const{offset:t,gridSize:r}=e,i={};return n.forEach(a=>{if(!a||a.destroyed||!a.isVisible())return;const s=ds(a.getRenderBounds(),t);for(let o=Rs(s.min[0],r);o<=Rs(s.max[0],r);o+=1)for(let u=Rs(s.min[1],r);u<=Rs(s.max[1],r);u+=1)i[`${o}|||${u}`]=!0}),i};function S3(n,e,t){return Math.min(...e.map(r=>t(n,r)))}function Lq(n,e,t){let r=n[0],i=t(n[0],e);for(let a=0;a<n.length;a++){const s=n[a],o=t(s,e);o<i&&(r=s,i=o)}return r}const k3=(n,e,t,r)=>{if(!e)return[n];const{directionMap:i,offset:a}=r,s=ds(e.getRenderBounds(),a),o=Object.keys(i).reduce((u,l)=>{if(t.includes(l)){const c=i[l],[h,d]=hs(s),f=[n[0]+c.stepX*h,n[1]+c.stepY*d],g=g$(s);for(let p=0;p<g.length;p++){const v=vx([n,f],g[p]);v&&c4(v,s)&&u.push(v)}}return u},[]);return si(n,s)||o.push(n),o.map(u=>Rs(u,r.gridSize))},Iq=(n,e,t,r,i,a,s)=>{const o=[];let u=[a[0]===r[0]?r[0]:n[0]*s,a[1]===r[1]?r[1]:n[1]*s];o.unshift(u);let l=n,c=e[Hi(l)];for(;c;){const f=c,g=l;J4(f,g,e,t)&&(u=[f[0]===g[0]?u[0]:f[0]*s,f[1]===g[1]?u[1]:f[1]*s],o.unshift(u)),c=e[Hi(f)],l=f}const h=i.map(f=>[f[0]*s,f[1]*s]),d=Lq(h,u,wd);return o.unshift(d),o};function Fq(n,e,t,r){const i=Js(n.getCenter()),a=Js(e.getCenter()),s=Object.assign(Nq,r),{gridSize:o}=s,u=s.enableObstacleAvoidance?t:[n,e],l=Rq(u,s),c=Rs(i,o),h=Rs(a,o),d=k3(i,n,s.startDirections,s),f=k3(a,e,s.endDirections,s);d.forEach(S=>delete l[Hi(S)]),f.forEach(S=>delete l[Hi(S)]);const g={},p={},v={},m={},y={},b=new Bq;for(let S=0;S<d.length;S++){const C=d[S],k=Hi(C);g[k]=C,m[k]=0,y[k]=S3(C,f,s.distFunc),b.add({id:k,value:y[k]})}const x=f.map(S=>Hi(S));let w=s.maximumLoops,E,_=1/0;for(const[S,C]of Object.entries(g))y[S]<=_&&(_=y[S],E=C);for(;Object.keys(g).length>0&&w>0;){const S=b.minId(!1);if(S)E=g[S];else break;const C=Hi(E);if(x.includes(C))return Iq(E,v,c,a,d,h,o);delete g[C],b.remove(C),p[C]=!0;for(const k of Object.values(s.directionMap)){const A=xe(E,[k.stepX,k.stepY]),T=Hi(A);if(p[T])continue;const O=J4(E,A,v,c);if(O>s.maxAllowedDirectionChange||l[T])continue;g[T]||(g[T]=A);const P=s.penalties[O],R=s.distFunc(E,A)+(isNaN(P)?o:P),N=m[C]+R,D=m[T];D&&N>=D||(v[T]=E,m[T]=N,y[T]=N+S3(A,f,s.distFunc),b.add({id:T,value:y[T]}))}w-=1}return[]}class Bq{constructor(){this.arr=[],this.map={},this.arr=[],this.map={}}_innerAdd(e,t){let r=0,i=t-1;for(;i-r>1;){const a=Math.floor((r+i)/2);if(this.arr[a].value>e.value)i=a;else if(this.arr[a].value<e.value)r=a;else{this.arr.splice(a,0,e),this.map[e.id]=!0;return}}this.arr.splice(i,0,e),this.map[e.id]=!0}add(e){delete this.map[e.id];const t=this.arr.length;if(!t||this.arr[t-1].value<e.value){this.arr.push(e),this.map[e.id]=!0;return}this._innerAdd(e,t)}remove(e){this.map[e]&&delete this.map[e]}_clearAndGetMinId(){let e;for(let t=this.arr.length-1;t>=0;t--)this.map[this.arr[t].id]?e=this.arr[t].id:this.arr.splice(t,1);return e}_findFirstId(){for(;this.arr.length;){const e=this.arr.shift();if(this.map[e.id])return e.id}}minId(e){return e?this._clearAndGetMinId():this._findFirstId()}}class bf extends gs{constructor(e){super(ln({style:bf.defaultStyleProps},e))}getControlPoints(e){const{router:t}=e,{sourceNode:r,targetNode:i}=this,[a,s]=this.getEndpoints(e,!1);let o=[];if(!t)o=e.controlPoints;else if(t.type==="shortest-path"){const u=this.context.element.getNodes();o=Fq(r,i,u,t),o.length||(o=y3(a,s,r,i,e.controlPoints,{padding:t.offset}))}else t.type==="orth"&&(o=y3(a,s,r,i,e.controlPoints,t));return o}getPoints(e){const t=this.getControlPoints(e),[r,i]=this.getEndpoints(e,!0,t);return[r,...t,i]}getKeyPath(e){const t=this.getPoints(e);return _x(t,e.radius)}getLoopPath(e){const{sourcePort:t,targetPort:r,radius:i}=e,a=this.sourceNode,s=Ga(a),o=Math.max(Li(s),Ii(s))/4,{placement:u,clockwise:l,dist:c=o}=Bt(this.getGraphicStyle(e),"loop");return Eq(a,i,u,l,c,t,r)}}bf.defaultStyleProps={radius:0,controlPoints:[],router:!1};class xf extends gs{constructor(e){super(ln({style:xf.defaultStyleProps},e))}getKeyPath(e){const{curvePosition:t,curveOffset:r}=e,[i,a]=this.getEndpoints(e),s=e.controlPoint||Nb(i,a,t,r);return mq(i,a,s)}}xf.defaultStyleProps={curvePosition:.5,curveOffset:30};var zq=globalThis&&globalThis.__rest||function(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(n);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(t[r[i]]=n[r[i]]);return t};function oc(n){return n instanceof ui&&n.type==="node"}function Q4(n){return n instanceof gs}function Sx(n){return n instanceof pu}function $q(n){return oc(n)||Q4(n)||Sx(n)}function jq(n,e){return!n||!e?!1:n===e}const qq={top:[.5,0],right:[1,.5],bottom:[.5,1],left:[0,.5],"left-top":[0,0],"top-left":[0,0],"left-bottom":[0,1],"bottom-left":[0,1],"right-top":[1,0],"top-right":[1,0],"right-bottom":[1,1],"bottom-right":[1,1],default:[.5,.5]};function kx(n,e,t=qq,r=!0){const i=[.5,.5],a=qe(e)?Fn(t,e.toLocaleLowerCase(),i):e;if(!r&&qe(e))return a;const[s,o]=a||i;return[n.min[0]+Li(n)*s,n.min[1]+Ii(n)*o]}function Cx(n){if(!n)return{};const e=n.getPorts();return(n.attributes.ports||[]).forEach((r,i)=>{var a;const{key:s,placement:o}=r;eP(r)&&(e[a=s||i]||(e[a]=Ji(n.getShape("key").getBounds(),o)))}),e}function eP(n){const{r:e}=n;return!e||Number(e)===0}function ss(n){return au(n)?n:n.getPosition()}function Gq(n,e,t,r){const i=C3(n,e,t,r),a=C3(e,n,r,t);return[i,a]}function C3(n,e,t,r){const i=Cx(n);if(t)return i[t];const a=Object.values(i);if(a.length===0)return;const s=a.map(l=>ss(l)),o=Wq(e,r),[u]=V$(s,o);return a.find(l=>ss(l)===u)}function Wq(n,e){const t=Cx(n);if(e)return[ss(t[e])];const r=Object.values(t);return r.length>0?r.map(i=>ss(i)):[n.getCenter()]}function A3(n,e){return Sx(n)||oc(n)?Rb(n,e):Ml(n,e)}function Ml(n,e){if(!n||!e)return[0,0,0];if(au(n))return n;if(n.attributes.linkToCenter)return n.getPosition();const t=au(e)?e:oc(e)?e.getCenter():e.getPosition();return lf(t,n.getBounds())}function Rb(n,e){if(!n||!e)return[0,0,0];const t=au(e)?e:oc(e)?e.getCenter():e.getPosition();return n.getIntersectPoint(t)||n.getCenter()}function T3(n,e="bottom",t=0,r=0,i=!1){const a=e.split("-"),[s,o]=Ji(n,e),[u,l]=i?["bottom","top"]:["top","bottom"],c=a.includes("top")?l:a.includes("bottom")?u:"middle",h=a.includes("left")?"right":a.includes("right")?"left":"center";return{transform:[["translate",s+t,o+r]],textBaseline:c,textAlign:h}}function Vq(n,e){return[[0,-n],[e*Math.cos(3*Math.PI/10),-e*Math.sin(3*Math.PI/10)],[n*Math.cos(Math.PI/10),-n*Math.sin(Math.PI/10)],[e*Math.cos(Math.PI/10),e*Math.sin(Math.PI/10)],[n*Math.cos(3*Math.PI/10),n*Math.sin(3*Math.PI/10)],[0,e],[-n*Math.cos(3*Math.PI/10),n*Math.sin(3*Math.PI/10)],[-e*Math.cos(Math.PI/10),e*Math.sin(Math.PI/10)],[-n*Math.cos(Math.PI/10),-n*Math.sin(Math.PI/10)],[-e*Math.cos(3*Math.PI/10),-e*Math.sin(3*Math.PI/10)]]}function Uq(n,e){const t={};return t.top=[0,-n],t.left=[-n*Math.cos(Math.PI/10),-n*Math.sin(Math.PI/10)],t["left-bottom"]=[-n*Math.cos(3*Math.PI/10),n*Math.sin(3*Math.PI/10)],t.bottom=[0,e],t["right-bottom"]=[n*Math.cos(3*Math.PI/10),n*Math.sin(3*Math.PI/10)],t.right=t.default=[n*Math.cos(Math.PI/10),-n*Math.sin(Math.PI/10)],t}function Hq(n,e,t){const r=e/2,i=n/2,a={up:[[-i,r],[i,r],[0,-r]],left:[[-i,0],[i,r],[i,-r]],right:[[-i,r],[-i,-r],[i,0]],down:[[-i,-r],[i,-r],[0,r]]};return a[t]||a.up}function Yq(n,e,t){const r=e/2,i=n/2,a={};return t==="down"?(a.bottom=a.default=[0,r],a.right=[i,-r],a.left=[-i,-r]):t==="left"?(a.top=[i,-r],a.bottom=[i,r],a.left=a.default=[-i,0]):t==="right"?(a.top=[-i,-r],a.bottom=[-i,r],a.right=a.default=[i,0]):(a.left=[-i,r],a.top=a.default=[0,-r],a.right=[i,r]),a}function Xq(n,e){return[[0,-e/2],[n/2,0],[0,e/2],[-n/2,0]]}function Kq(n){return Fn(n,["style","visibility"])!=="hidden"}function Zq(n,e){const{zIndex:t,transform:r,transformOrigin:i,visibility:a,cursor:s,clipPath:o,component:u}=e,l=zq(e,["zIndex","transform","transformOrigin","visibility","cursor","clipPath","component"]);Object.assign(n.attributes,l),r&&n.setAttribute("transform",r),re(t)&&n.setAttribute("zIndex",t),i&&n.setAttribute("transformOrigin",i),a&&n.setAttribute("visibility",a),s&&n.setAttribute("cursor",s),o&&n.setAttribute("clipPath",o),u&&n.setAttribute("component",u)}function Lb(n,e){"update"in n?n.update(e):n.attr(e)}function Jq(n){return[[0,n],[n*Math.sqrt(3)/2,n/2],[n*Math.sqrt(3)/2,-n/2],[0,-n],[-n*Math.sqrt(3)/2,-n/2],[-n*Math.sqrt(3)/2,n/2]]}function Qq(n){wl(n,"__to_be_destroyed__",!0)}function wf(n){return Fn(n,"__to_be_destroyed__",!1)}var eG=globalThis&&globalThis.__awaiter||function(n,e,t,r){function i(a){return a instanceof t?a:new t(function(s){s(a)})}return new(t||(t=Promise))(function(a,s){function o(c){try{l(r.next(c))}catch(h){s(h)}}function u(c){try{l(r.throw(c))}catch(h){s(h)}}function l(c){c.done?a(c.value):i(c.value).then(o,u)}l((r=r.apply(n,e||[])).next())})};class Ef extends _r{constructor(e,t){super(e,Object.assign({},Ef.defaultOptions,t)),this.onCollapseExpand=r=>eG(this,void 0,void 0,function*(){if(!this.validate(r))return;const{target:i}=r;if(!$q(i))return;const a=i.id,{model:s,graph:o}=this.context,u=s.getElementDataById(a);if(!u)return!1;const{onCollapse:l,onExpand:c,animation:h,align:d}=this.options;Zn(u)?(yield o.expandElement(a,{animation:h,align:d}),c==null||c(a)):(yield o.collapseElement(a,{animation:h,align:d}),l==null||l(a))}),this.bindEvents()}update(e){this.unbindEvents(),super.update(e),this.bindEvents()}bindEvents(){const{graph:e}=this.context,{trigger:t}=this.options;e.on(`node:${t}`,this.onCollapseExpand),e.on(`combo:${t}`,this.onCollapseExpand)}unbindEvents(){const{graph:e}=this.context,{trigger:t}=this.options;e.off(`node:${t}`,this.onCollapseExpand),e.off(`combo:${t}`,this.onCollapseExpand)}validate(e){if(this.destroyed)return!1;const{enable:t}=this.options;return se(t)?t(e):!!t}destroy(){this.unbindEvents(),super.destroy()}}Ef.defaultOptions={enable:!0,animation:!0,trigger:G.DBLCLICK,align:!0};var sh=globalThis&&globalThis.__awaiter||function(n,e,t,r){function i(a){return a instanceof t?a:new t(function(s){s(a)})}return new(t||(t=Promise))(function(a,s){function o(c){try{l(r.next(c))}catch(h){s(h)}}function u(c){try{l(r.throw(c))}catch(h){s(h)}}function l(c){c.done?a(c.value):i(c.value).then(o,u)}l((r=r.apply(n,e||[])).next())})};const tG="g6-create-edge-assist-edge-id",oh="g6-create-edge-assist-node-id";class _f extends _r{constructor(e,t){super(e,Object.assign({},_f.defaultOptions,t)),this.drop=r=>sh(this,void 0,void 0,function*(){const{targetType:i}=r;["combo","node"].includes(i)&&this.source?yield this.handleCreateEdge(r):yield this.cancelEdge()}),this.handleCreateEdge=r=>sh(this,void 0,void 0,function*(){var i,a,s;if(!this.validate(r))return;const{graph:o,canvas:u,batch:l,element:c}=this.context,{style:h}=this.options;if(this.source){this.createEdge(r),yield this.cancelEdge();return}l.startBatch(),u.setCursor("crosshair"),this.source=this.getSelectedNodeIDs([r.target.id])[0];const d=o.getElementData(this.source);o.addNodeData([{id:oh,style:{visibility:"hidden",ports:[{key:"port-1",placement:[.5,.5]}],x:(i=d.style)===null||i===void 0?void 0:i.x,y:(a=d.style)===null||a===void 0?void 0:a.y}}]),o.addEdgeData([{id:tG,source:this.source,target:oh,style:Object.assign({pointerEvents:"none"},h)}]),yield(s=c.draw({animation:!1}))===null||s===void 0?void 0:s.finished}),this.updateAssistEdge=r=>sh(this,void 0,void 0,function*(){var i;if(!this.source)return;const{model:a,element:s}=this.context;a.translateNodeTo(oh,[r.canvas.x,r.canvas.y]),yield(i=s.draw({animation:!1,silence:!0}))===null||i===void 0?void 0:i.finished}),this.createEdge=r=>{var i,a;const{graph:s}=this.context,{style:o,onFinish:u,onCreate:l}=this.options;if(((i=r.target)===null||i===void 0?void 0:i.id)===void 0||this.source===void 0)return;const h=(a=this.getSelectedNodeIDs([r.target.id]))===null||a===void 0?void 0:a[0],d=`${this.source}-${h}-${$I()}`,f=l({id:d,source:this.source,target:h,style:o});s.addEdgeData([f]),u(f)},this.cancelEdge=()=>sh(this,void 0,void 0,function*(){var r;if(!this.source)return;const{graph:i,element:a,batch:s}=this.context;i.removeNodeData([oh]),this.source=void 0,yield(r=a.draw({animation:!1}))===null||r===void 0?void 0:r.finished,s.endBatch()}),this.bindEvents()}update(e){super.update(e),this.bindEvents()}bindEvents(){const{graph:e}=this.context,{trigger:t}=this.options;this.unbindEvents(),t==="click"?(e.on(Dr.CLICK,this.handleCreateEdge),e.on(Ns.CLICK,this.handleCreateEdge),e.on(ua.CLICK,this.cancelEdge),e.on(bd.CLICK,this.cancelEdge)):(e.on(Dr.DRAG_START,this.handleCreateEdge),e.on(Ns.DRAG_START,this.handleCreateEdge),e.on(G.POINTER_UP,this.drop)),e.on(G.POINTER_MOVE,this.updateAssistEdge)}getSelectedNodeIDs(e){return Array.from(new Set(this.context.graph.getElementDataByState("node",this.options.state).map(t=>t.id).concat(e)))}validate(e){if(this.destroyed)return!1;const{enable:t}=this.options;return se(t)?t(e):!!t}unbindEvents(){const{graph:e}=this.context;e.off(Dr.CLICK,this.handleCreateEdge),e.off(Ns.CLICK,this.handleCreateEdge),e.off(ua.CLICK,this.cancelEdge),e.off(bd.CLICK,this.cancelEdge),e.off(Dr.DRAG_START,this.handleCreateEdge),e.off(Ns.DRAG_START,this.handleCreateEdge),e.off(G.POINTER_UP,this.drop),e.off(G.POINTER_MOVE,this.updateAssistEdge)}destroy(){this.unbindEvents(),super.destroy()}}_f.defaultOptions={animation:!0,enable:!0,style:{},trigger:"drag",onCreate:n=>n,onFinish:()=>{}};var O3=globalThis&&globalThis.__awaiter||function(n,e,t,r){function i(a){return a instanceof t?a:new t(function(s){s(a)})}return new(t||(t=Promise))(function(a,s){function o(c){try{l(r.next(c))}catch(h){s(h)}}function u(c){try{l(r.throw(c))}catch(h){s(h)}}function l(c){c.done?a(c.value):i(c.value).then(o,u)}l((r=r.apply(n,e||[])).next())})};class Sf extends _r{constructor(e,t){super(e,Object.assign({},Sf.defaultOptions,t)),this.isDragging=!1,this.onDragStart=r=>{this.validate(r)&&(this.isDragging=!0,this.context.canvas.setCursor("grabbing"))},this.onDrag=r=>{var i,a,s,o;if(!this.isDragging||Pt.isPinching)return;const u=(a=(i=r.movement)===null||i===void 0?void 0:i.x)!==null&&a!==void 0?a:r.dx,l=(o=(s=r.movement)===null||s===void 0?void 0:s.y)!==null&&o!==void 0?o:r.dy;u|l&&this.translate([u,l],!1)},this.onDragEnd=()=>{var r,i;this.isDragging=!1,this.context.canvas.setCursor(this.defaultCursor),(i=(r=this.options).onFinish)===null||i===void 0||i.call(r)},this.invokeOnFinish=Xl(()=>{var r,i;(i=(r=this.options).onFinish)===null||i===void 0||i.call(r)},300),this.shortcut=new fu(e.graph),this.bindEvents(),this.defaultCursor=this.context.canvas.getConfig().cursor||"default"}update(e){this.unbindEvents(),super.update(e),this.bindEvents()}bindEvents(){const{trigger:e}=this.options;if(Nt(e)){const{up:t=[],down:r=[],left:i=[],right:a=[]}=e;this.shortcut.bind(t,s=>this.onTranslate([0,1],s)),this.shortcut.bind(r,s=>this.onTranslate([0,-1],s)),this.shortcut.bind(i,s=>this.onTranslate([1,0],s)),this.shortcut.bind(a,s=>this.onTranslate([-1,0],s))}else{const{graph:t}=this.context;t.on(G.DRAG_START,this.onDragStart),t.on(G.DRAG,this.onDrag),t.on(G.DRAG_END,this.onDragEnd)}}onTranslate(e,t){return O3(this,void 0,void 0,function*(){if(!this.validate(t))return;const{sensitivity:r}=this.options,i=r*-1;yield this.translate(ni(e,i),this.options.animation),this.invokeOnFinish()})}translate(e,t){return O3(this,void 0,void 0,function*(){e=this.clampByDirection(e),e=this.clampByRange(e),yield this.context.graph.translateBy(e,t)})}clampByDirection([e,t]){const{direction:r}=this.options;return r==="x"?t=0:r==="y"&&(e=0),[e,t]}clampByRange([e,t]){const{viewport:r,canvas:i}=this.context,[a,s]=i.getSize(),[o,u,l,c]=Ri(this.options.range),h=[s*o,a*u,s*l,a*c],d=ds(hx(r.getCanvasCenter()),h),f=Ke(r.getViewportCenter(),[e,t,0]);if(!si(f,d)){const{min:[g,p],max:[v,m]}=d;(f[0]<g&&e>0||f[0]>v&&e<0)&&(e=0),(f[1]<p&&t>0||f[1]>m&&t<0)&&(t=0)}return[e,t]}validate(e){if(this.destroyed)return!1;const{enable:t}=this.options;return typeof t=="function"?t(e):!!t}unbindEvents(){this.shortcut.unbindAll();const{graph:e}=this.context;e.off(G.DRAG_START,this.onDragStart),e.off(G.DRAG,this.onDrag),e.off(G.DRAG_END,this.onDragEnd)}destroy(){this.shortcut.destroy(),this.unbindEvents(),this.context.canvas.setCursor(this.defaultCursor),super.destroy()}}Sf.defaultOptions={enable:n=>"targetType"in n?n.targetType==="canvas":!0,sensitivity:10,direction:"both",range:1/0};var M3=globalThis&&globalThis.__awaiter||function(n,e,t,r){function i(a){return a instanceof t?a:new t(function(s){s(a)})}return new(t||(t=Promise))(function(a,s){function o(c){try{l(r.next(c))}catch(h){s(h)}}function u(c){try{l(r.throw(c))}catch(h){s(h)}}function l(c){c.done?a(c.value):i(c.value).then(o,u)}l((r=r.apply(n,e||[])).next())})};class uc extends _r{constructor(e,t){super(e,Object.assign({},uc.defaultOptions,t)),this.enable=!1,this.enableElements=["node","combo"],this.target=[],this.shadowOrigin=[0,0],this.hiddenEdges=[],this.isDragging=!1,this.onDrop=r=>M3(this,void 0,void 0,function*(){var i;if(this.options.dropEffect!=="link")return;const{model:a,element:s}=this.context,o=r.target.id;this.target.forEach(u=>{const l=a.getParentData(u,Je);l&&z(l)===o&&a.refreshComboData(o),a.setParent(u,o,Je)}),yield(i=s==null?void 0:s.draw({animation:!0}))===null||i===void 0?void 0:i.finished}),this.setCursor=r=>{if(this.isDragging)return;const{type:i}=r,{canvas:a}=this.context,{cursor:s}=this.options;i===G.POINTER_ENTER?a.setCursor((s==null?void 0:s.grab)||"grab"):a.setCursor((s==null?void 0:s.default)||"default")},this.onDragStart=this.onDragStart.bind(this),this.onDrag=this.onDrag.bind(this),this.onDragEnd=this.onDragEnd.bind(this),this.onDrop=this.onDrop.bind(this),this.bindEvents()}update(e){this.unbindEvents(),super.update(e),this.bindEvents()}bindEvents(){const{graph:e,canvas:t}=this.context,r=t.getLayer().getContextService().$canvas;r&&(r.addEventListener("blur",this.onDragEnd),r.addEventListener("contextmenu",this.onDragEnd)),this.enableElements.forEach(i=>{e.on(`${i}:${G.DRAG_START}`,this.onDragStart),e.on(`${i}:${G.DRAG}`,this.onDrag),e.on(`${i}:${G.DRAG_END}`,this.onDragEnd),e.on(`${i}:${G.POINTER_ENTER}`,this.setCursor),e.on(`${i}:${G.POINTER_LEAVE}`,this.setCursor)}),["link"].includes(this.options.dropEffect)&&(e.on(Ns.DROP,this.onDrop),e.on(ua.DROP,this.onDrop))}getSelectedNodeIDs(e){return Array.from(new Set(this.context.graph.getElementDataByState("node",this.options.state).map(t=>t.id).concat(e)))}getDelta(e){const t=this.context.graph.getZoom();return oi([e.dx,e.dy],t)}onDragStart(e){var t;if(this.enable=this.validate(e),!this.enable)return;const{batch:r,canvas:i,graph:a}=this.context;i.setCursor(((t=this.options.cursor)===null||t===void 0?void 0:t.grabbing)||"grabbing"),this.isDragging=!0,r.startBatch();const s=e.target.id;a.getElementState(s).includes(this.options.state)?this.target=this.getSelectedNodeIDs([s]):this.target=[s],this.hideEdge(),this.context.graph.frontElement(this.target),this.options.shadow&&this.createShadow(this.target)}onDrag(e){if(!this.enable)return;const t=this.getDelta(e);this.options.shadow?this.moveShadow(t):this.moveElement(this.target,t)}onDragEnd(){var e,t,r;if(this.enable=!1,this.options.shadow){if(!this.shadow)return;this.shadow.style.visibility="hidden";const{x:s=0,y:o=0}=this.shadow.attributes,[u,l]=Ke([+s,+o],this.shadowOrigin);this.moveElement(this.target,[u,l])}this.showEdges(),(t=(e=this.options).onFinish)===null||t===void 0||t.call(e,this.target);const{batch:i,canvas:a}=this.context;i.endBatch(),a.setCursor(((r=this.options.cursor)===null||r===void 0?void 0:r.grab)||"grab"),this.isDragging=!1,this.target=[]}validate(e){if(this.destroyed)return!1;const{enable:t}=this.options;return se(t)?t(e):!!t}moveElement(e,t){return M3(this,void 0,void 0,function*(){const{graph:r,model:i}=this.context,{dropEffect:a}=this.options;a==="move"&&e.forEach(s=>i.refreshComboData(s)),r.translateElementBy(Object.fromEntries(e.map(s=>[s,t])),!1)})}moveShadow(e){if(!this.shadow)return;const{x:t=0,y:r=0}=this.shadow.attributes,[i,a]=e;this.shadow.attr({x:+t+i,y:+r+a})}createShadow(e){const t=Bt(this.options,"shadow"),r=nc(e.map(l=>this.context.element.getElement(l).getBounds())),[i,a]=r.min;this.shadowOrigin=[i,a];const[s,o]=hs(r),u={width:s,height:o,x:i,y:a};this.shadow?this.shadow.attr(Object.assign(Object.assign(Object.assign({},t),u),{visibility:"visible"})):(this.shadow=new mn({style:Object.assign(Object.assign(Object.assign({$layer:"transient"},t),u),{pointerEvents:"none"})}),this.context.canvas.appendChild(this.shadow))}showEdges(){this.options.shadow||this.hiddenEdges.length===0||(this.context.graph.showElement(this.hiddenEdges),this.hiddenEdges=[])}hideEdge(){const{hideEdge:e,shadow:t}=this.options;if(e==="none"||t)return;const{graph:r}=this.context;e==="all"?this.hiddenEdges=r.getEdgeData().map(z):this.hiddenEdges=Array.from(new Set(this.target.map(i=>r.getRelatedEdgesData(i,e).map(z)).flat())),r.hideElement(this.hiddenEdges)}unbindEvents(){const{graph:e,canvas:t}=this.context,r=t.getLayer().getContextService().$canvas;r&&(r.removeEventListener("blur",this.onDragEnd),r.removeEventListener("contextmenu",this.onDragEnd)),this.enableElements.forEach(i=>{e.off(`${i}:${G.DRAG_START}`,this.onDragStart),e.off(`${i}:${G.DRAG}`,this.onDrag),e.off(`${i}:${G.DRAG_END}`,this.onDragEnd),e.off(`${i}:${G.POINTER_ENTER}`,this.setCursor),e.off(`${i}:${G.POINTER_LEAVE}`,this.setCursor)}),e.off(`combo:${G.DROP}`,this.onDrop),e.off(`canvas:${G.DROP}`,this.onDrop)}destroy(){var e;this.unbindEvents(),(e=this.shadow)===null||e===void 0||e.destroy(),super.destroy()}}uc.defaultOptions={animation:!0,enable:n=>["node","combo"].includes(n.targetType),dropEffect:"move",state:"selected",hideEdge:"none",shadow:!1,shadowZIndex:100,shadowFill:"#F3F9FF",shadowFillOpacity:.5,shadowStroke:"#1890FF",shadowStrokeOpacity:.9,shadowLineDash:[5,5],cursor:{default:"default",grab:"grab",grabbing:"grabbing"}};var nG="*",kf=function(){function n(){this._events={}}return n.prototype.on=function(e,t,r){return this._events[e]||(this._events[e]=[]),this._events[e].push({callback:t,once:!!r}),this},n.prototype.once=function(e,t){return this.on(e,t,!0)},n.prototype.emit=function(e){for(var t=this,r=[],i=1;i<arguments.length;i++)r[i-1]=arguments[i];var a=this._events[e]||[],s=this._events[nG]||[],o=function(u){for(var l=u.length,c=0;c<l;c++)if(u[c]){var h=u[c],d=h.callback,f=h.once;f&&(u.splice(c,1),u.length===0&&delete t._events[e],l--,c--),d.apply(t,r)}};o(a),o(s)},n.prototype.off=function(e,t){if(!e)this._events={};else if(!t)delete this._events[e];else{for(var r=this._events[e]||[],i=r.length,a=0;a<i;a++)r[a].callback===t&&(r.splice(a,1),i--,a--);r.length===0&&delete this._events[e]}return this},n.prototype.getEvents=function(){return this._events},n}();function Ib(n,e,t,r){for(;n.length;){const i=n.shift();if(t(i))return!0;e.add(i.id),r(i.id).forEach(s=>{e.has(s.id)||(e.add(s.id),n.push(s))})}return!1}function Ad(n,e,t,r){if(t(n))return!0;e.add(n.id);for(const a of r(n.id))if(!e.has(a.id)&&Ad(a,e,t,r))return!0;return!1}const P3=()=>!0;class rG{constructor(e){ve(this,"graph");ve(this,"nodeFilter");ve(this,"edgeFilter");ve(this,"cacheEnabled");ve(this,"inEdgesMap",new Map);ve(this,"outEdgesMap",new Map);ve(this,"bothEdgesMap",new Map);ve(this,"allNodesMap",new Map);ve(this,"allEdgesMap",new Map);ve(this,"clearCache",()=>{this.inEdgesMap.clear(),this.outEdgesMap.clear(),this.bothEdgesMap.clear(),this.allNodesMap.clear(),this.allEdgesMap.clear()});ve(this,"refreshCache",()=>{this.clearCache(),this.updateCache(this.graph.getAllNodes().map(e=>e.id))});ve(this,"updateCache",e=>{const t=new Set;e.forEach(r=>{const i=this.bothEdgesMap.get(r);if(i&&i.forEach(a=>t.add(a.id)),!this.hasNode(r))this.inEdgesMap.delete(r),this.outEdgesMap.delete(r),this.bothEdgesMap.delete(r),this.allNodesMap.delete(r);else{const a=this.graph.getRelatedEdges(r,"in").filter(this.edgeFilter),s=this.graph.getRelatedEdges(r,"out").filter(this.edgeFilter),o=Array.from(new Set([...a,...s]));o.forEach(u=>t.add(u.id)),this.inEdgesMap.set(r,a),this.outEdgesMap.set(r,s),this.bothEdgesMap.set(r,o),this.allNodesMap.set(r,this.graph.getNode(r))}}),t.forEach(r=>{this.hasEdge(r)?this.allEdgesMap.set(r,this.graph.getEdge(r)):this.allEdgesMap.delete(r)})});ve(this,"handleGraphChanged",e=>{const t=new Set;e.changes.forEach(r=>{switch(r.type){case"NodeAdded":t.add(r.value.id);break;case"NodeDataUpdated":t.add(r.id);break;case"EdgeAdded":t.add(r.value.source),t.add(r.value.target);break;case"EdgeUpdated":(r.propertyName==="source"||r.propertyName==="target")&&(t.add(r.oldValue),t.add(r.newValue));break;case"EdgeDataUpdated":if(e.graph.hasEdge(r.id)){const i=e.graph.getEdge(r.id);t.add(i.source),t.add(i.target)}break;case"EdgeRemoved":t.add(r.value.source),t.add(r.value.target);break;case"NodeRemoved":t.add(r.value.id);break}}),this.updateCache(t)});this.graph=e.graph;const t=e.nodeFilter||P3,r=e.edgeFilter||P3;this.nodeFilter=t,this.edgeFilter=i=>{const{source:a,target:s}=this.graph.getEdgeDetail(i.id);return!t(a)||!t(s)?!1:r(i,a,s)},e.cache==="auto"?(this.cacheEnabled=!0,this.startAutoCache()):e.cache==="manual"?this.cacheEnabled=!0:this.cacheEnabled=!1}startAutoCache(){this.refreshCache(),this.graph.on("changed",this.handleGraphChanged)}stopAutoCache(){this.graph.off("changed",this.handleGraphChanged)}checkNodeExistence(e){this.getNode(e)}hasNode(e){if(!this.graph.hasNode(e))return!1;const t=this.graph.getNode(e);return this.nodeFilter(t)}areNeighbors(e,t){return this.checkNodeExistence(e),this.getNeighbors(t).some(r=>r.id===e)}getNode(e){const t=this.graph.getNode(e);if(!this.nodeFilter(t))throw new Error("Node not found for id: "+e);return t}getRelatedEdges(e,t){return this.checkNodeExistence(e),this.cacheEnabled?t==="in"?this.inEdgesMap.get(e):t==="out"?this.outEdgesMap.get(e):this.bothEdgesMap.get(e):this.graph.getRelatedEdges(e,t).filter(this.edgeFilter)}getDegree(e,t){return this.getRelatedEdges(e,t).length}getSuccessors(e){const r=this.getRelatedEdges(e,"out").map(i=>this.getNode(i.target));return Array.from(new Set(r))}getPredecessors(e){const r=this.getRelatedEdges(e,"in").map(i=>this.getNode(i.source));return Array.from(new Set(r))}getNeighbors(e){const t=this.getPredecessors(e),r=this.getSuccessors(e);return Array.from(new Set([...t,...r]))}hasEdge(e){if(!this.graph.hasEdge(e))return!1;const t=this.graph.getEdge(e);return this.edgeFilter(t)}getEdge(e){const t=this.graph.getEdge(e);if(!this.edgeFilter(t))throw new Error("Edge not found for id: "+e);return t}getEdgeDetail(e){const t=this.getEdge(e);return{edge:t,source:this.getNode(t.source),target:this.getNode(t.target)}}hasTreeStructure(e){return this.graph.hasTreeStructure(e)}getRoots(e){return this.graph.getRoots(e).filter(this.nodeFilter)}getChildren(e,t){return this.checkNodeExistence(e),this.graph.getChildren(e,t).filter(this.nodeFilter)}getParent(e,t){this.checkNodeExistence(e);const r=this.graph.getParent(e,t);return!r||!this.nodeFilter(r)?null:r}getAllNodes(){return this.cacheEnabled?Array.from(this.allNodesMap.values()):this.graph.getAllNodes().filter(this.nodeFilter)}getAllEdges(){return this.cacheEnabled?Array.from(this.allEdgesMap.values()):this.graph.getAllEdges().filter(this.edgeFilter)}bfs(e,t,r="out"){const i={in:this.getPredecessors.bind(this),out:this.getSuccessors.bind(this),both:this.getNeighbors.bind(this)}[r];Ib([this.getNode(e)],new Set,t,i)}dfs(e,t,r="out"){const i={in:this.getPredecessors.bind(this),out:this.getSuccessors.bind(this),both:this.getNeighbors.bind(this)}[r];Ad(this.getNode(e),new Set,t,i)}}let Xt=class tP extends kf{constructor(t){super();ve(this,"nodeMap",new Map);ve(this,"edgeMap",new Map);ve(this,"inEdgesMap",new Map);ve(this,"outEdgesMap",new Map);ve(this,"bothEdgesMap",new Map);ve(this,"treeIndices",new Map);ve(this,"changes",[]);ve(this,"batchCount",0);ve(this,"onChanged",()=>{});ve(this,"batch",t=>{this.batchCount+=1,t(),this.batchCount-=1,this.batchCount||this.commit()});t&&(t.nodes&&this.addNodes(t.nodes),t.edges&&this.addEdges(t.edges),t.tree&&this.addTree(t.tree),t.onChanged&&(this.onChanged=t.onChanged))}commit(){const t=this.changes;this.changes=[];const r={graph:this,changes:t};this.emit("changed",r),this.onChanged(r)}reduceChanges(t){let r=[];return t.forEach(i=>{switch(i.type){case"NodeRemoved":{let a=!1;r=r.filter(s=>{if(s.type==="NodeAdded"){const o=s.value.id===i.value.id;return o&&(a=!0),!o}else{if(s.type==="NodeDataUpdated")return s.id!==i.value.id;if(s.type==="TreeStructureChanged")return s.nodeId!==i.value.id}return!0}),a||r.push(i);break}case"EdgeRemoved":{let a=!1;r=r.filter(s=>{if(s.type==="EdgeAdded"){const o=s.value.id===i.value.id;return o&&(a=!0),!o}else if(s.type==="EdgeDataUpdated"||s.type==="EdgeUpdated")return s.id!==i.value.id;return!0}),a||r.push(i);break}case"NodeDataUpdated":case"EdgeDataUpdated":case"EdgeUpdated":{const a=r.findIndex(o=>o.type===i.type&&o.id===i.id&&(i.propertyName===void 0||o.propertyName===i.propertyName)),s=r[a];s?i.propertyName!==void 0?s.newValue=i.newValue:(r.splice(a,1),r.push(i)):r.push(i);break}case"TreeStructureDetached":{r=r.filter(a=>a.type==="TreeStructureAttached"||a.type==="TreeStructureChanged"?a.treeKey!==i.treeKey:!0),r.push(i);break}case"TreeStructureChanged":{const a=r.find(s=>s.type==="TreeStructureChanged"&&s.treeKey===i.treeKey&&s.nodeId===i.nodeId);a?a.newParentId=i.newParentId:r.push(i);break}default:r.push(i);break}}),r}checkNodeExistence(t){this.getNode(t)}hasNode(t){return this.nodeMap.has(t)}areNeighbors(t,r){return this.getNeighbors(r).some(i=>i.id===t)}getNode(t){const r=this.nodeMap.get(t);if(!r)throw new Error("Node not found for id: "+t);return r}getRelatedEdges(t,r){if(this.checkNodeExistence(t),r==="in"){const i=this.inEdgesMap.get(t);return Array.from(i)}else if(r==="out"){const i=this.outEdgesMap.get(t);return Array.from(i)}else{const i=this.bothEdgesMap.get(t);return Array.from(i)}}getDegree(t,r){return this.getRelatedEdges(t,r).length}getSuccessors(t){const i=this.getRelatedEdges(t,"out").map(a=>this.getNode(a.target));return Array.from(new Set(i))}getPredecessors(t){const i=this.getRelatedEdges(t,"in").map(a=>this.getNode(a.source));return Array.from(new Set(i))}getNeighbors(t){const r=this.getPredecessors(t),i=this.getSuccessors(t);return Array.from(new Set([...r,...i]))}doAddNode(t){if(this.hasNode(t.id))throw new Error("Node already exists: "+t.id);this.nodeMap.set(t.id,t),this.inEdgesMap.set(t.id,new Set),this.outEdgesMap.set(t.id,new Set),this.bothEdgesMap.set(t.id,new Set),this.treeIndices.forEach(r=>{r.childrenMap.set(t.id,new Set)}),this.changes.push({type:"NodeAdded",value:t})}addNodes(t){this.batch(()=>{for(const r of t)this.doAddNode(r)})}addNode(t){this.addNodes([t])}doRemoveNode(t){const r=this.getNode(t),i=this.bothEdgesMap.get(t);i==null||i.forEach(a=>this.doRemoveEdge(a.id)),this.nodeMap.delete(t),this.treeIndices.forEach(a=>{var o,u;(o=a.childrenMap.get(t))==null||o.forEach(l=>{a.parentMap.delete(l.id)});const s=a.parentMap.get(t);s&&((u=a.childrenMap.get(s.id))==null||u.delete(r)),a.parentMap.delete(t),a.childrenMap.delete(t)}),this.bothEdgesMap.delete(t),this.inEdgesMap.delete(t),this.outEdgesMap.delete(t),this.changes.push({type:"NodeRemoved",value:r})}removeNodes(t){this.batch(()=>{t.forEach(r=>this.doRemoveNode(r))})}removeNode(t){this.removeNodes([t])}updateNodeDataProperty(t,r,i){const a=this.getNode(t);this.batch(()=>{const s=a.data[r],o=i;a.data[r]=o,this.changes.push({type:"NodeDataUpdated",id:t,propertyName:r,oldValue:s,newValue:o})})}mergeNodeData(t,r){this.batch(()=>{Object.entries(r).forEach(([i,a])=>{this.updateNodeDataProperty(t,i,a)})})}updateNodeData(...t){const r=t[0],i=this.getNode(r);if(typeof t[1]=="string"){this.updateNodeDataProperty(r,t[1],t[2]);return}let a;if(typeof t[1]=="function"){const s=t[1];a=s(i.data)}else typeof t[1]=="object"&&(a=t[1]);this.batch(()=>{const s=i.data,o=a;i.data=a,this.changes.push({type:"NodeDataUpdated",id:r,oldValue:s,newValue:o})})}checkEdgeExistence(t){if(!this.hasEdge(t))throw new Error("Edge not found for id: "+t)}hasEdge(t){return this.edgeMap.has(t)}getEdge(t){return this.checkEdgeExistence(t),this.edgeMap.get(t)}getEdgeDetail(t){const r=this.getEdge(t);return{edge:r,source:this.getNode(r.source),target:this.getNode(r.target)}}doAddEdge(t){if(this.hasEdge(t.id))throw new Error("Edge already exists: "+t.id);this.checkNodeExistence(t.source),this.checkNodeExistence(t.target),this.edgeMap.set(t.id,t);const r=this.inEdgesMap.get(t.target),i=this.outEdgesMap.get(t.source),a=this.bothEdgesMap.get(t.source),s=this.bothEdgesMap.get(t.target);r.add(t),i.add(t),a.add(t),s.add(t),this.changes.push({type:"EdgeAdded",value:t})}addEdges(t){this.batch(()=>{for(const r of t)this.doAddEdge(r)})}addEdge(t){this.addEdges([t])}doRemoveEdge(t){const r=this.getEdge(t),i=this.outEdgesMap.get(r.source),a=this.inEdgesMap.get(r.target),s=this.bothEdgesMap.get(r.source),o=this.bothEdgesMap.get(r.target);i.delete(r),a.delete(r),s.delete(r),o.delete(r),this.edgeMap.delete(t),this.changes.push({type:"EdgeRemoved",value:r})}removeEdges(t){this.batch(()=>{t.forEach(r=>this.doRemoveEdge(r))})}removeEdge(t){this.removeEdges([t])}updateEdgeSource(t,r){const i=this.getEdge(t);this.checkNodeExistence(r);const a=i.source,s=r;this.outEdgesMap.get(a).delete(i),this.bothEdgesMap.get(a).delete(i),this.outEdgesMap.get(s).add(i),this.bothEdgesMap.get(s).add(i),i.source=r,this.batch(()=>{this.changes.push({type:"EdgeUpdated",id:t,propertyName:"source",oldValue:a,newValue:s})})}updateEdgeTarget(t,r){const i=this.getEdge(t);this.checkNodeExistence(r);const a=i.target,s=r;this.inEdgesMap.get(a).delete(i),this.bothEdgesMap.get(a).delete(i),this.inEdgesMap.get(s).add(i),this.bothEdgesMap.get(s).add(i),i.target=r,this.batch(()=>{this.changes.push({type:"EdgeUpdated",id:t,propertyName:"target",oldValue:a,newValue:s})})}updateEdgeDataProperty(t,r,i){const a=this.getEdge(t);this.batch(()=>{const s=a.data[r],o=i;a.data[r]=o,this.changes.push({type:"EdgeDataUpdated",id:t,propertyName:r,oldValue:s,newValue:o})})}updateEdgeData(...t){const r=t[0],i=this.getEdge(r);if(typeof t[1]=="string"){this.updateEdgeDataProperty(r,t[1],t[2]);return}let a;if(typeof t[1]=="function"){const s=t[1];a=s(i.data)}else typeof t[1]=="object"&&(a=t[1]);this.batch(()=>{const s=i.data,o=a;i.data=a,this.changes.push({type:"EdgeDataUpdated",id:r,oldValue:s,newValue:o})})}mergeEdgeData(t,r){this.batch(()=>{Object.entries(r).forEach(([i,a])=>{this.updateEdgeDataProperty(t,i,a)})})}checkTreeExistence(t){if(!this.hasTreeStructure(t))throw new Error("Tree structure not found for treeKey: "+t)}hasTreeStructure(t){return this.treeIndices.has(t)}attachTreeStructure(t){this.treeIndices.has(t)||(this.treeIndices.set(t,{parentMap:new Map,childrenMap:new Map}),this.batch(()=>{this.changes.push({type:"TreeStructureAttached",treeKey:t})}))}detachTreeStructure(t){this.checkTreeExistence(t),this.treeIndices.delete(t),this.batch(()=>{this.changes.push({type:"TreeStructureDetached",treeKey:t})})}addTree(t,r){this.batch(()=>{this.attachTreeStructure(r);const i=[],a=Array.isArray(t)?t:[t];for(;a.length;){const s=a.shift();i.push(s),s.children&&a.push(...s.children)}this.addNodes(i),i.forEach(s=>{var o;(o=s.children)==null||o.forEach(u=>{this.setParent(u.id,s.id,r)})})})}getRoots(t){return this.checkTreeExistence(t),this.getAllNodes().filter(r=>!this.getParent(r.id,t))}getChildren(t,r){this.checkNodeExistence(t),this.checkTreeExistence(r);const a=this.treeIndices.get(r).childrenMap.get(t);return Array.from(a||[])}getParent(t,r){return this.checkNodeExistence(t),this.checkTreeExistence(r),this.treeIndices.get(r).parentMap.get(t)||null}getAncestors(t,r){const i=[];let a=this.getNode(t),s;for(;s=this.getParent(a.id,r);)i.push(s),a=s;return i}setParent(t,r,i){var c,h;this.checkTreeExistence(i);const a=this.treeIndices.get(i);if(!a)return;const s=this.getNode(t),o=a.parentMap.get(t);if((o==null?void 0:o.id)===r)return;if(r==null){o&&((c=a.childrenMap.get(o.id))==null||c.delete(s)),a.parentMap.delete(t);return}const u=this.getNode(r);a.parentMap.set(t,u),o&&((h=a.childrenMap.get(o.id))==null||h.delete(s));let l=a.childrenMap.get(u.id);l||(l=new Set,a.childrenMap.set(u.id,l)),l.add(s),this.batch(()=>{this.changes.push({type:"TreeStructureChanged",treeKey:i,nodeId:t,oldParentId:o==null?void 0:o.id,newParentId:u.id})})}dfsTree(t,r,i){const a=s=>this.getChildren(s,i);return Ad(this.getNode(t),new Set,r,a)}bfsTree(t,r,i){const a=s=>this.getChildren(s,i);return Ib([this.getNode(t)],new Set,r,a)}getAllNodes(){return Array.from(this.nodeMap.values())}getAllEdges(){return Array.from(this.edgeMap.values())}bfs(t,r,i="out"){const a={in:this.getPredecessors.bind(this),out:this.getSuccessors.bind(this),both:this.getNeighbors.bind(this)}[i];return Ib([this.getNode(t)],new Set,r,a)}dfs(t,r,i="out"){const a={in:this.getPredecessors.bind(this),out:this.getSuccessors.bind(this),both:this.getNeighbors.bind(this)}[i];return Ad(this.getNode(t),new Set,r,a)}clone(){const t=this.getAllNodes().map(a=>({...a,data:{...a.data}})),r=this.getAllEdges().map(a=>({...a,data:{...a.data}})),i=new tP({nodes:t,edges:r});return this.treeIndices.forEach(({parentMap:a,childrenMap:s},o)=>{const u=new Map;a.forEach((c,h)=>{u.set(h,i.getNode(c.id))});const l=new Map;s.forEach((c,h)=>{l.set(h,new Set(Array.from(c).map(d=>i.getNode(d.id))))}),i.treeIndices.set(o,{parentMap:u,childrenMap:l})}),i}toJSON(){return JSON.stringify({nodes:this.getAllNodes(),edges:this.getAllEdges()})}createView(t){return new rG({graph:this,...t})}};class Cf{constructor(e,t){this.context=e,this.options=t||{}}}var iG=globalThis&&globalThis.__awaiter||function(n,e,t,r){function i(a){return a instanceof t?a:new t(function(s){s(a)})}return new(t||(t=Promise))(function(a,s){function o(c){try{l(r.next(c))}catch(h){s(h)}}function u(c){try{l(r.throw(c))}catch(h){s(h)}}function l(c){c.done?a(c.value):i(c.value).then(o,u)}l((r=r.apply(n,e||[])).next())})},aG=globalThis&&globalThis.__rest||function(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(n);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(t[r[i]]=n[r[i]]);return t};function sG(n){const{type:e}=n;return["compact-box","mindmap","dendrogram","indented"].includes(e)}function oG(n){return!Array.isArray(n)&&(n==null?void 0:n.preLayout)}function zh(n){const{nodes:e,edges:t}=n,r={nodes:[],edges:[],combos:[]};return e.forEach(i=>{const a=i.data._isCombo?r.combos:r.nodes,{x:s,y:o,z:u=0}=i.data;a==null||a.push({id:i.id,style:{x:s,y:o,z:u}})}),t.forEach(i=>{const{id:a,source:s,target:o,data:{points:u=[],controlPoints:l=u.slice(1,u.length-1)}}=i;r.edges.push({id:a,source:s,target:o,style:Object.assign({},l!=null&&l.length?{controlPoints:l.map(pn)}:{})})}),r}function uG(n,e){class t extends Cf{constructor(i,a){if(super(i,a),this.instance=new n({}),this.id=this.instance.id,"stop"in this.instance&&"tick"in this.instance){const s=this.instance;this.stop=s.stop.bind(s),this.tick=o=>{const u=s.tick(o);return zh(u)}}}execute(i,a){return iG(this,void 0,void 0,function*(){return zh(yield this.instance.execute(this.graphData2LayoutModel(i),this.transformOptions(jn({},this.options,a))))})}transformOptions(i){const{onTick:a}=i;return a&&(i.onTick=s=>a(zh(s))),i}graphData2LayoutModel(i){const{nodes:a=[],edges:s=[],combos:o=[]}=i,u=a.map(f=>{const g=z(f),{data:p,style:v,combo:m}=f,y=aG(f,["data","style","combo"]),b={id:g,data:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},p),{data:p}),m?{parentId:m}:{}),{style:v}),y)};return v!=null&&v.x&&Object.assign(b.data,{x:v.x}),v!=null&&v.y&&Object.assign(b.data,{y:v.y}),v!=null&&v.z&&Object.assign(b.data,{z:v.z}),b}),l=new Map(u.map(f=>[f.id,f])),c=s.filter(f=>{const{source:g,target:p}=f;return l.has(g)&&l.has(p)}).map(f=>{const{source:g,target:p,data:v,style:m}=f;return{id:z(f),source:g,target:p,data:Object.assign({},v),style:Object.assign({},m)}}),h=o.map(f=>({id:z(f),data:Object.assign({_isCombo:!0},f.data),style:Object.assign({},f.style)})),d=new Xt({nodes:[...u,...h],edges:c});return e.model.model.hasTreeStructure(Je)&&(d.attachTreeStructure(Je),u.forEach(f=>{const g=e.model.model.getParent(f.id,Je);g&&d.hasNode(g.id)&&d.setParent(f.id,g.id,Je)})),d}}return t}function xg(n,e,...t){if(e in n)return n[e](...t);if("instance"in n){const r=n.instance;if(e in r)return r[e](...t)}return null}function N3(n,e){if(e in n)return n[e];if("instance"in n){const t=n.instance;if(e in t)return t[e]}return null}var lG=globalThis&&globalThis.__awaiter||function(n,e,t,r){function i(a){return a instanceof t?a:new t(function(s){s(a)})}return new(t||(t=Promise))(function(a,s){function o(c){try{l(r.next(c))}catch(h){s(h)}}function u(c){try{l(r.throw(c))}catch(h){s(h)}}function l(c){c.done?a(c.value):i(c.value).then(o,u)}l((r=r.apply(n,e||[])).next())})};class cG extends uc{get forceLayoutInstance(){return this.context.layout.getLayoutInstance().find(e=>["d3-force","d3-force-3d"].includes(e==null?void 0:e.id))}validate(e){return this.context.layout?this.forceLayoutInstance?super.validate(e):(Di.warn("DragElementForce only works with d3-force or d3-force-3d layout"),!1):!1}moveElement(e,t){return lG(this,void 0,void 0,function*(){const r=this.forceLayoutInstance;this.context.graph.getNodeData(e).forEach((i,a)=>{const{x:s=0,y:o=0}=i.style||{};r&&xg(r,"setFixedPosition",e[a],[...xe([+s,+o],t)])})})}onDragStart(e){if(this.enable=this.validate(e),!this.enable)return;this.target=this.getSelectedNodeIDs([e.target.id]),this.hideEdge(),this.context.graph.frontElement(this.target);const t=this.forceLayoutInstance;t&&N3(t,"simulation").alphaTarget(.3).restart(),this.context.graph.getNodeData(this.target).forEach(r=>{const{x:i=0,y:a=0}=r.style||{};t&&xg(t,"setFixedPosition",z(r),[+i,+a])})}onDrag(e){if(!this.enable)return;const t=this.getDelta(e);this.moveElement(this.target,t)}onDragEnd(){const e=this.forceLayoutInstance;e&&N3(e,"simulation").alphaTarget(0),!this.options.fixed&&this.context.graph.getNodeData(this.target).forEach(t=>{e&&xg(e,"setFixedPosition",z(t),[null,null,null])})}}var D3=globalThis&&globalThis.__awaiter||function(n,e,t,r){function i(a){return a instanceof t?a:new t(function(s){s(a)})}return new(t||(t=Promise))(function(a,s){function o(c){try{l(r.next(c))}catch(h){s(h)}}function u(c){try{l(r.throw(c))}catch(h){s(h)}}function l(c){c.done?a(c.value):i(c.value).then(o,u)}l((r=r.apply(n,e||[])).next())})};class Af extends _r{constructor(e,t){super(e,Object.assign({},Af.defaultOptions,t)),this.isZoomEvent=r=>!!(r.data&&"scale"in r.data),this.relatedEdgeToUpdate=new Set,this.zoom=this.context.graph.getZoom(),this.fixElementSize=r=>D3(this,void 0,void 0,function*(){if(!this.validate(r))return;const{graph:i}=this.context,{state:a,nodeFilter:s,edgeFilter:o,comboFilter:u}=this.options,l=(a?i.getElementDataByState("node",a):i.getNodeData()).filter(s),c=(a?i.getElementDataByState("edge",a):i.getEdgeData()).filter(o),h=(a?i.getElementDataByState("combo",a):i.getComboData()).filter(u),d=this.isZoomEvent(r)?this.zoom=Math.max(.01,Math.min(r.data.scale,10)):this.zoom,f=[...l,...h];f.length>0&&f.forEach(g=>this.fixNodeLike(g,d)),this.updateRelatedEdges(),c.length>0&&c.forEach(g=>this.fixEdge(g,d))}),this.cachedStyles=new Map,this.getOriginalFieldValue=(r,i,a)=>{var s;const o=this.cachedStyles.get(r)||[],u=((s=o.find(l=>l.shape===i))===null||s===void 0?void 0:s.style)||{};return a in u||(u[a]=i.attributes[a],this.cachedStyles.set(r,[...o.filter(l=>l.shape!==i),{shape:i,style:u}])),u[a]},this.scaleEntireElement=(r,i,a)=>{i.setLocalScale(1/a);const s=this.cachedStyles.get(r)||[];s.push({shape:i}),this.cachedStyles.set(r,s)},this.scaleSpecificShapes=(r,i,a)=>{const s=lj(r);(Array.isArray(a)?a:[a]).forEach(u=>{const{shape:l,fields:c}=u,h=typeof l=="function"?l(s):r.getShape(l);if(h){if(!c){this.scaleEntireElement(r.id,h,i);return}c.forEach(d=>{const f=this.getOriginalFieldValue(r.id,h,d);re(f)&&(h.style[d]=f/i)})}})},this.skipIfExceedViewport=r=>{const{viewport:i}=this.context;return!(i!=null&&i.isInViewport(r.getRenderBounds(),!1,30))},this.fixNodeLike=(r,i)=>{const a=z(r),{element:s,model:o}=this.context,u=s.getElement(a);if(!u||this.skipIfExceedViewport(u))return;o.getRelatedEdgesData(a).forEach(h=>this.relatedEdgeToUpdate.add(z(h)));const c=this.options[u.type];if(!c){this.scaleEntireElement(a,u,i);return}this.scaleSpecificShapes(u,i,c)},this.fixEdge=(r,i)=>{const a=z(r),s=this.context.element.getElement(a);if(!s||this.skipIfExceedViewport(s))return;const o=this.options.edge;if(!o){s.style.transformOrigin="center",this.scaleEntireElement(a,s,i);return}this.scaleSpecificShapes(s,i,o)},this.updateRelatedEdges=()=>{const{element:r}=this.context;this.relatedEdgeToUpdate.size>0&&this.relatedEdgeToUpdate.forEach(i=>{const a=r.getElement(i);a==null||a.update({})}),this.relatedEdgeToUpdate.clear()},this.resetTransform=r=>D3(this,void 0,void 0,function*(){var i;!((i=r.data)===null||i===void 0)&&i.firstRender||(this.options.reset?this.restoreCachedStyles():this.fixElementSize({data:{scale:this.zoom}}))}),this.bindEvents()}restoreCachedStyles(){if(this.cachedStyles.size>0){this.cachedStyles.forEach(i=>{i.forEach(({shape:a,style:s})=>{if(wi(s))a.setLocalScale(1);else{if(this.options.state)return;Object.entries(s).forEach(([o,u])=>a.style[o]=u)}})});const{graph:e,element:t}=this.context,r=Object.keys(Object.fromEntries(this.cachedStyles)).filter(i=>i&&e.getElementType(i)==="node");if(r.length>0){const i=new Set;r.forEach(a=>{e.getRelatedEdgesData(a).forEach(s=>i.add(z(s)))}),i.forEach(a=>{const s=t==null?void 0:t.getElement(a);s==null||s.update({})})}}}bindEvents(){const{graph:e}=this.context;e.on(Z.AFTER_DRAW,this.resetTransform),e.on(Z.AFTER_TRANSFORM,this.fixElementSize)}unbindEvents(){const{graph:e}=this.context;e.off(Z.AFTER_DRAW,this.resetTransform),e.off(Z.AFTER_TRANSFORM,this.fixElementSize)}validate(e){if(this.destroyed)return!1;const{enable:t}=this.options;return se(t)?t(e):!!t}destroy(){this.unbindEvents(),super.destroy()}}Af.defaultOptions={enable:n=>n.data.scale<1,nodeFilter:()=>!0,edgeFilter:()=>!0,comboFilter:()=>!0,edge:[{shape:"key",fields:["lineWidth"]},{shape:"halo",fields:["lineWidth"]},{shape:"label"}],reset:!1};var hG=globalThis&&globalThis.__awaiter||function(n,e,t,r){function i(a){return a instanceof t?a:new t(function(s){s(a)})}return new(t||(t=Promise))(function(a,s){function o(c){try{l(r.next(c))}catch(h){s(h)}}function u(c){try{l(r.throw(c))}catch(h){s(h)}}function l(c){c.done?a(c.value):i(c.value).then(o,u)}l((r=r.apply(n,e||[])).next())})};class Tf extends _r{constructor(e,t){super(e,Object.assign({},Tf.defaultOptions,t)),this.focus=r=>hG(this,void 0,void 0,function*(){if(!this.validate(r))return;const{graph:i}=this.context;yield i.focusElement(r.target.id,this.options.animation)}),this.bindEvents()}bindEvents(){const{graph:e}=this.context;this.unbindEvents(),Qs.forEach(t=>{e.on(`${t}:${G.CLICK}`,this.focus)})}validate(e){if(this.destroyed)return!1;const{enable:t}=this.options;return se(t)?t(e):!!t}unbindEvents(){const{graph:e}=this.context;Qs.forEach(t=>{e.off(`${t}:${G.CLICK}`,this.focus)})}destroy(){this.unbindEvents(),super.destroy()}}Tf.defaultOptions={animation:{easing:"ease-in",duration:500},enable:!0};class Of extends _r{constructor(e,t){super(e,Object.assign({},Of.defaultOptions,t)),this.isFrozen=!1,this.toggleFrozen=r=>{this.isFrozen=r.type==="dragstart"},this.hoverElement=r=>{if(!this.validate(r))return;const i=r.type===G.POINTER_ENTER;this.updateElementsState(r,i);const{onHover:a,onHoverEnd:s}=this.options;i?a==null||a(r):s==null||s(r)},this.updateElementsState=(r,i)=>{if(!this.options.state&&!this.options.inactiveState)return;const{graph:a}=this.context,{state:s,animation:o,inactiveState:u}=this.options,l=this.getActiveIds(r),c={};if(s&&Object.assign(c,this.getElementsState(l,s,i)),u){const h=p4(a.getData(),!0).filter(d=>!l.includes(d));Object.assign(c,this.getElementsState(h,u,i))}a.setElementState(c,o)},this.getElementsState=(r,i,a)=>{const{graph:s}=this.context,o={};return r.forEach(u=>{const l=s.getElementState(u);a?o[u]=l.includes(i)?l:[...l,i]:o[u]=l.filter(c=>c!==i)}),o},this.bindEvents()}bindEvents(){const{graph:e}=this.context;this.unbindEvents(),Qs.forEach(r=>{e.on(`${r}:${G.POINTER_ENTER}`,this.hoverElement),e.on(`${r}:${G.POINTER_LEAVE}`,this.hoverElement)});const t=this.context.canvas.document;t.addEventListener(`${G.DRAG_START}`,this.toggleFrozen),t.addEventListener(`${G.DRAG_END}`,this.toggleFrozen)}getActiveIds(e){const{graph:t}=this.context,{degree:r,direction:i}=this.options,a=e.target.id;return r?C4(t,e.targetType,a,typeof r=="function"?r(e):r,i):[a]}validate(e){if(this.destroyed||this.isFrozen||wf(e.target)||this.context.graph.isCollapsingExpanding)return!1;const{enable:t}=this.options;return se(t)?t(e):!!t}unbindEvents(){const{graph:e}=this.context;Qs.forEach(r=>{e.off(`${r}:${G.POINTER_ENTER}`,this.hoverElement),e.off(`${r}:${G.POINTER_LEAVE}`,this.hoverElement)});const t=this.context.canvas.document;t.removeEventListener(`${G.DRAG_START}`,this.toggleFrozen),t.removeEventListener(`${G.DRAG_END}`,this.toggleFrozen)}destroy(){this.unbindEvents(),super.destroy()}}Of.defaultOptions={animation:!1,enable:!0,degree:0,direction:"both",state:"active",inactiveState:void 0};class dG extends rc{onPointerDown(e){if(!super.validate(e)||!super.isKeydown()||this.points)return;const{canvas:t}=this.context;this.pathShape=new fr({id:"g6-lasso-select",style:this.options.style}),t.appendChild(this.pathShape),this.points=[Ed(e)]}onPointerMove(e){var t;if(!this.points)return;const{immediately:r,mode:i}=this.options;this.points.push(Ed(e)),(t=this.pathShape)===null||t===void 0||t.setAttribute("d",ij(this.points)),r&&i==="default"&&this.points.length>2&&super.updateElementsStates(this.points)}onPointerUp(){if(this.points){if(this.points.length<2){this.clearLasso();return}super.updateElementsStates(this.points),this.clearLasso()}}clearLasso(){var e;(e=this.pathShape)===null||e===void 0||e.remove(),this.pathShape=void 0,this.points=void 0}}class Mf extends _r{constructor(e,t){super(e,Object.assign({},Mf.defaultOptions,t)),this.hiddenShapes=[],this.isVisible=!0,this.setElementsVisibility=(r,i,a)=>{r.filter(Boolean).forEach(s=>{i==="hidden"&&!s.isVisible()?this.hiddenShapes.push(s):i==="visible"&&this.hiddenShapes.includes(s)?this.hiddenShapes.splice(this.hiddenShapes.indexOf(s),1):Zs(s,i,a)})},this.filterShapes=(r,i)=>{if(se(i))return s=>!i(r,s);const a=i==null?void 0:i[r];return s=>s.className?!(a!=null&&a.includes(s.className)):!0},this.hideShapes=r=>{if(!this.validate(r)||!this.isVisible)return;const{element:i}=this.context,{shapes:a={}}=this.options;this.setElementsVisibility(i.getNodes(),"hidden",this.filterShapes("node",a)),this.setElementsVisibility(i.getEdges(),"hidden",this.filterShapes("edge",a)),this.setElementsVisibility(i.getCombos(),"hidden",this.filterShapes("combo",a)),this.isVisible=!1},this.showShapes=Xl(r=>{if(!this.validate(r)||this.isVisible)return;const{element:i}=this.context;this.setElementsVisibility(i.getNodes(),"visible"),this.setElementsVisibility(i.getEdges(),"visible"),this.setElementsVisibility(i.getCombos(),"visible"),this.isVisible=!0},this.options.debounce),this.bindEvents()}bindEvents(){const{graph:e}=this.context;e.on(Z.BEFORE_TRANSFORM,this.hideShapes),e.on(Z.AFTER_TRANSFORM,this.showShapes)}unbindEvents(){const{graph:e}=this.context;e.off(Z.BEFORE_TRANSFORM,this.hideShapes),e.off(Z.AFTER_TRANSFORM,this.showShapes)}validate(e){if(this.destroyed)return!1;const{enable:t}=this.options;return se(t)?t(e):!!t}update(e){this.unbindEvents(),super.update(e),this.bindEvents()}destroy(){this.unbindEvents(),super.destroy()}}Mf.defaultOptions={enable:!0,debounce:200,shapes:n=>n==="node"};var R3=globalThis&&globalThis.__awaiter||function(n,e,t,r){function i(a){return a instanceof t?a:new t(function(s){s(a)})}return new(t||(t=Promise))(function(a,s){function o(c){try{l(r.next(c))}catch(h){s(h)}}function u(c){try{l(r.throw(c))}catch(h){s(h)}}function l(c){c.done?a(c.value):i(c.value).then(o,u)}l((r=r.apply(n,e||[])).next())})};class Pf extends _r{constructor(e,t){super(e,Object.assign({},Pf.defaultOptions,t)),this.onWheel=r=>R3(this,void 0,void 0,function*(){this.options.preventDefault&&r.preventDefault();const i=r.deltaX,a=r.deltaY;yield this.scroll([-i,-a],r)}),this.shortcut=new fu(e.graph),this.bindEvents()}update(e){super.update(e),this.bindEvents()}bindEvents(){var e,t;const{trigger:r}=this.options;if(this.shortcut.unbindAll(),Nt(r)){(e=this.graphDom)===null||e===void 0||e.removeEventListener(G.WHEEL,this.onWheel);const{up:i=[],down:a=[],left:s=[],right:o=[]}=r;this.shortcut.bind(i,u=>this.scroll([0,-10],u)),this.shortcut.bind(a,u=>this.scroll([0,10],u)),this.shortcut.bind(s,u=>this.scroll([-10,0],u)),this.shortcut.bind(o,u=>this.scroll([10,0],u))}else(t=this.graphDom)===null||t===void 0||t.addEventListener(G.WHEEL,this.onWheel,{passive:!1})}get graphDom(){return this.context.graph.getCanvas().getContextService().getDomElement()}formatDisplacement(e){const{sensitivity:t}=this.options;return e=ni(e,t),e=this.clampByDirection(e),e=this.clampByRange(e),e}clampByDirection([e,t]){const{direction:r}=this.options;return r==="x"?t=0:r==="y"&&(e=0),[e,t]}clampByRange([e,t]){const{viewport:r,canvas:i}=this.context,[a,s]=i.getSize(),[o,u,l,c]=Ri(this.options.range),h=[s*o,a*u,s*l,a*c],d=ds(hx(r.getCanvasCenter()),h),f=Ke(r.getViewportCenter(),[e,t,0]);if(!si(f,d)){const{min:[g,p],max:[v,m]}=d;(f[0]<g&&e>0||f[0]>v&&e<0)&&(e=0),(f[1]<p&&t>0||f[1]>m&&t<0)&&(t=0)}return[e,t]}scroll(e,t){return R3(this,void 0,void 0,function*(){if(!this.validate(t))return;const{onFinish:r}=this.options,i=this.context.graph,a=this.formatDisplacement(e);yield i.translateBy(a,!1),r==null||r()})}validate(e){if(this.destroyed)return!1;const{enable:t}=this.options;return se(t)?t(e):!!t}destroy(){var e;this.shortcut.destroy(),(e=this.graphDom)===null||e===void 0||e.removeEventListener(G.WHEEL,this.onWheel),super.destroy()}}Pf.defaultOptions={enable:!0,sensitivity:1,preventDefault:!0,range:1/0};var L3=globalThis&&globalThis.__awaiter||function(n,e,t,r){function i(a){return a instanceof t?a:new t(function(s){s(a)})}return new(t||(t=Promise))(function(a,s){function o(c){try{l(r.next(c))}catch(h){s(h)}}function u(c){try{l(r.throw(c))}catch(h){s(h)}}function l(c){c.done?a(c.value):i(c.value).then(o,u)}l((r=r.apply(n,e||[])).next())})};class Nf extends _r{constructor(e,t){super(e,Object.assign({},Nf.defaultOptions,t)),this.zoom=(r,i,a)=>L3(this,void 0,void 0,function*(){if(!this.validate(i))return;const{graph:s}=this.context;let o;"viewport"in i&&(o=pn(i.viewport));const{sensitivity:u,onFinish:l}=this.options,c=1+St(r,-50,50)*u/100,h=s.getZoom();yield s.zoomTo(h*c,a,o),l==null||l()}),this.onReset=()=>L3(this,void 0,void 0,function*(){yield this.context.graph.zoomTo(1,this.options.animation)}),this.preventDefault=r=>{this.options.preventDefault&&r.preventDefault()},this.shortcut=new fu(e.graph),this.bindEvents()}update(e){super.update(e),this.bindEvents()}bindEvents(){const{trigger:e}=this.options;if(this.shortcut.unbindAll(),Array.isArray(e))if(e.includes(G.PINCH))this.shortcut.bind([G.PINCH],t=>{this.zoom(t.scale,t,!1)});else{const t=this.context.canvas.getContainer();t==null||t.addEventListener(G.WHEEL,this.preventDefault),this.shortcut.bind([...e,G.WHEEL],r=>{const{deltaX:i,deltaY:a}=r;this.zoom(-(a??i),r,!1)})}if(typeof e=="object"){const{zoomIn:t=[],zoomOut:r=[],reset:i=[]}=e;this.shortcut.bind(t,a=>this.zoom(10,a,this.options.animation)),this.shortcut.bind(r,a=>this.zoom(-10,a,this.options.animation)),this.shortcut.bind(i,this.onReset)}}validate(e){if(this.destroyed)return!1;const{enable:t}=this.options;return se(t)?t(e):!!t}destroy(){var e;this.shortcut.destroy(),(e=this.context.canvas.getContainer())===null||e===void 0||e.removeEventListener(G.WHEEL,this.preventDefault),super.destroy()}}Nf.defaultOptions={animation:{duration:200},enable:!0,sensitivity:1,trigger:[],preventDefault:!0};function fG(n,e,t,r){return r===void 0&&(r="height"),t==="center"?(n[r]+e[r])/2:n.height}var ps={assign:Object.assign,getHeight:fG},nP=ps,Ax=18,gG=Ax*2,I3=Ax,pG={getId:function(e){return e.id||e.name},getPreH:function(e){return e.preH||0},getPreV:function(e){return e.preV||0},getHGap:function(e){return e.hgap||I3},getVGap:function(e){return e.vgap||I3},getChildren:function(e){return e.children},getHeight:function(e){return e.height||gG},getWidth:function(e){var t=e.label||" ";return e.width||t.split("").length*Ax}};function Td(n,e){var t=this;if(t.vgap=t.hgap=0,n instanceof Td)return n;t.data=n;var r=e.getHGap(n),i=e.getVGap(n);return t.preH=e.getPreH(n),t.preV=e.getPreV(n),t.width=e.getWidth(n),t.height=e.getHeight(n),t.width+=t.preH,t.height+=t.preV,t.id=e.getId(n),t.x=t.y=0,t.depth=0,t.children||(t.children=[]),t.addGap(r,i),t}nP.assign(Td.prototype,{isRoot:function(){return this.depth===0},isLeaf:function(){return this.children.length===0},addGap:function(e,t){var r=this;r.hgap+=e,r.vgap+=t,r.width+=2*e,r.height+=2*t},eachNode:function(e){for(var t=this,r=[t],i;i=r.shift();)e(i),r=i.children.concat(r)},DFTraverse:function(e){this.eachNode(e)},BFTraverse:function(e){for(var t=this,r=[t],i;i=r.shift();)e(i),r=r.concat(i.children)},getBoundingBox:function(){var e={left:Number.MAX_VALUE,top:Number.MAX_VALUE,width:0,height:0};return this.eachNode(function(t){e.left=Math.min(e.left,t.x),e.top=Math.min(e.top,t.y),e.width=Math.max(e.width,t.x+t.width),e.height=Math.max(e.height,t.y+t.height)}),e},translate:function(e,t){e===void 0&&(e=0),t===void 0&&(t=0),this.eachNode(function(r){r.x+=e,r.y+=t,r.x+=r.preH,r.y+=r.preV})},right2left:function(){var e=this,t=e.getBoundingBox();e.eachNode(function(r){r.x=r.x-(r.x-t.left)*2-r.width}),e.translate(t.width,0)},bottom2top:function(){var e=this,t=e.getBoundingBox();e.eachNode(function(r){r.y=r.y-(r.y-t.top)*2-r.height}),e.translate(0,t.height)}});function vG(n,e,t){e===void 0&&(e={}),e=nP.assign({},pG,e);var r=new Td(n,e),i=[r],a;if(!t&&!n.collapsed){for(;a=i.shift();)if(!a.data.collapsed){var s=e.getChildren(a.data),o=s?s.length:0;if(a.children=new Array(o),s&&o)for(var u=0;u<o;u++){var l=new Td(s[u],e);a.children[u]=l,i.push(l),l.parent=a,l.depth=a.depth+1}}}return r}var rP=vG,mG=rP,yG=function(){function n(t,r){r===void 0&&(r={});var i=this;i.options=r,i.rootNode=mG(t,r)}var e=n.prototype;return e.execute=function(){throw new Error("please override this method")},n}(),Df=yG;function Wu(n,e,t,r){r===void 0&&(r=[]);var i=this;i.w=n||0,i.h=e||0,i.y=t||0,i.x=0,i.c=r||[],i.cs=r.length,i.prelim=0,i.mod=0,i.shift=0,i.change=0,i.tl=null,i.tr=null,i.el=null,i.er=null,i.msel=0,i.mser=0}Wu.fromNode=function(n,e){if(!n)return null;var t=[];return n.children.forEach(function(r){t.push(Wu.fromNode(r,e))}),e?new Wu(n.height,n.width,n.x,t):new Wu(n.width,n.height,n.y,t)};function iP(n,e,t){t?n.y+=e:n.x+=e,n.children.forEach(function(r){iP(r,e,t)})}function aP(n,e){var t=e?n.y:n.x;return n.children.forEach(function(r){t=Math.min(aP(r,e),t)}),t}function bG(n,e){var t=aP(n,e);iP(n,-t,e)}function sP(n,e,t){t?e.y=n.x:e.x=n.x,n.c.forEach(function(r,i){sP(r,e.children[i],t)})}function oP(n,e,t){t===void 0&&(t=0),e?(n.x=t,t+=n.width):(n.y=t,t+=n.height),n.children.forEach(function(r){oP(r,e,t)})}var xG=function(n,e){e===void 0&&(e={});var t=e.isHorizontal;function r(y){if(y.cs===0){i(y);return}r(y.c[0]);for(var b=v(l(y.c[0].el),0,null),x=1;x<y.cs;++x){r(y.c[x]);var w=l(y.c[x].er);a(y,x,b),b=v(w,x,b)}d(y),i(y)}function i(y){y.cs===0?(y.el=y,y.er=y,y.msel=y.mser=0):(y.el=y.c[0].el,y.msel=y.c[0].msel,y.er=y.c[y.cs-1].er,y.mser=y.c[y.cs-1].mser)}function a(y,b,x){for(var w=y.c[b-1],E=w.mod,_=y.c[b],S=_.mod;w!==null&&_!==null;){l(w)>x.low&&(x=x.nxt);var C=E+w.prelim+w.w-(S+_.prelim);C>0&&(S+=C,s(y,b,x.index,C));var k=l(w),A=l(_);k<=A&&(w=u(w),w!==null&&(E+=w.mod)),k>=A&&(_=o(_),_!==null&&(S+=_.mod))}!w&&_?c(y,b,_,S):w&&!_&&h(y,b,w,E)}function s(y,b,x,w){y.c[b].mod+=w,y.c[b].msel+=w,y.c[b].mser+=w,g(y,b,x,w)}function o(y){return y.cs===0?y.tl:y.c[0]}function u(y){return y.cs===0?y.tr:y.c[y.cs-1]}function l(y){return y.y+y.h}function c(y,b,x,w){var E=y.c[0].el;E.tl=x;var _=w-x.mod-y.c[0].msel;E.mod+=_,E.prelim-=_,y.c[0].el=y.c[b].el,y.c[0].msel=y.c[b].msel}function h(y,b,x,w){var E=y.c[b].er;E.tr=x;var _=w-x.mod-y.c[b].mser;E.mod+=_,E.prelim-=_,y.c[b].er=y.c[b-1].er,y.c[b].mser=y.c[b-1].mser}function d(y){y.prelim=(y.c[0].prelim+y.c[0].mod+y.c[y.cs-1].mod+y.c[y.cs-1].prelim+y.c[y.cs-1].w)/2-y.w/2}function f(y,b){b+=y.mod,y.x=y.prelim+b,p(y);for(var x=0;x<y.cs;x++)f(y.c[x],b)}function g(y,b,x,w){if(x!==b-1){var E=b-x;y.c[x+1].shift+=w/E,y.c[b].shift-=w/E,y.c[b].change-=w-w/E}}function p(y){for(var b=0,x=0,w=0;w<y.cs;w++)b+=y.c[w].shift,x+=b+y.c[w].change,y.c[w].mod+=x}function v(y,b,x){for(;x!==null&&y>=x.low;)x=x.nxt;return{low:y,index:b,nxt:x}}oP(n,t);var m=Wu.fromNode(n,t);return r(m),f(m,0),sP(m,n,t),bG(n,t),n},F3=rP,uP=function(n,e){for(var t=F3(n.data,e,!0),r=F3(n.data,e,!0),i=n.children.length,a=Math.round(i/2),s=e.getSide||function(c,h){return h<a?"right":"left"},o=0;o<i;o++){var u=n.children[o],l=s(u,o);l==="right"?r.children.push(u):t.children.push(u)}return t.eachNode(function(c){c.isRoot()||(c.side="left")}),r.eachNode(function(c){c.isRoot()||(c.side="right")}),{left:t,right:r}},wG=uP,Aa=["LR","RL","TB","BT","H","V"],EG=["LR","RL","H"],_G=function(e){return EG.indexOf(e)>-1},SG=Aa[0],Tx=function(n,e,t){var r=e.direction||SG;if(e.isHorizontal=_G(r),r&&Aa.indexOf(r)===-1)throw new TypeError("Invalid direction: "+r);if(r===Aa[0])t(n,e);else if(r===Aa[1])t(n,e),n.right2left();else if(r===Aa[2])t(n,e);else if(r===Aa[3])t(n,e),n.bottom2top();else if(r===Aa[4]||r===Aa[5]){var i=wG(n,e),a=i.left,s=i.right;t(a,e),t(s,e),e.isHorizontal?a.right2left():a.bottom2top(),s.translate(a.x-s.x,a.y-s.y),n.x=a.x,n.y=s.y;var o=n.getBoundingBox();e.isHorizontal?o.top<0&&n.translate(0,-o.top):o.left<0&&n.translate(-o.left,0)}var u=e.fixedRoot;return u===void 0&&(u=!0),u&&n.translate(-(n.x+n.width/2+n.hgap),-(n.y+n.height/2+n.vgap)),kG(n,e),n};function kG(n,e){if(e.radial){var t=e.isHorizontal?["x","y"]:["y","x"],r=t[0],i=t[1],a={x:1/0,y:1/0},s={x:-1/0,y:-1/0},o=0;n.DFTraverse(function(c){o++;var h=c.x,d=c.y;a.x=Math.min(a.x,h),a.y=Math.min(a.y,d),s.x=Math.max(s.x,h),s.y=Math.max(s.y,d)});var u=s[i]-a[i];if(u===0)return;var l=Math.PI*2/o;n.DFTraverse(function(c){var h=(c[i]-a[i])/u*(Math.PI*2-l)+l,d=c[r]-n[r];c.x=Math.cos(h)*d,c.y=Math.sin(h)*d})}}function CG(n,e){n.prototype=Object.create(e.prototype),n.prototype.constructor=n,Fb(n,e)}function Fb(n,e){return Fb=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,r){return t.__proto__=r,t},Fb(n,e)}var AG=Df,TG=xG,OG=Tx,MG=ps,PG=function(n){function e(){return n.apply(this,arguments)||this}CG(e,n);var t=e.prototype;return t.execute=function(){var i=this;return OG(i.rootNode,i.options,TG)},e}(AG),NG={};function DG(n,e){return e=MG.assign({},NG,e),new PG(n,e).execute()}var RG=DG,LG=ps;function IG(n,e){e===void 0&&(e=[]);var t=this;t.x=t.y=0,t.leftChild=t.rightChild=null,t.height=0,t.children=e}var FG={isHorizontal:!0,nodeSep:20,nodeSize:20,rankSep:200,subTreeSep:10};function lP(n,e,t){t?(e.x=n.x,e.y=n.y):(e.x=n.y,e.y=n.x),n.children.forEach(function(r,i){lP(r,e.children[i],t)})}var BG=function(n,e){e===void 0&&(e={}),e=LG.assign({},FG,e);var t=0;function r(u){if(!u)return null;u.width=0,u.depth&&u.depth>t&&(t=u.depth);var l=u.children,c=l.length,h=new IG(u.height,[]);return l.forEach(function(d,f){var g=r(d);h.children.push(g),f===0&&(h.leftChild=g),f===c-1&&(h.rightChild=g)}),h.originNode=u,h.isLeaf=u.isLeaf(),h}function i(u){if(u.isLeaf||u.children.length===0)u.drawingDepth=t;else{var l=u.children.map(function(h){return i(h)}),c=Math.min.apply(null,l);u.drawingDepth=c-1}return u.drawingDepth}var a;function s(u){u.x=u.drawingDepth*e.rankSep,u.isLeaf?(u.y=0,a&&(u.y=a.y+a.height+e.nodeSep,u.originNode.parent!==a.originNode.parent&&(u.y+=e.subTreeSep)),a=u):(u.children.forEach(function(l){s(l)}),u.y=(u.leftChild.y+u.rightChild.y)/2)}var o=r(n);return i(o),s(o),lP(o,n,e.isHorizontal),n};function zG(n,e){n.prototype=Object.create(e.prototype),n.prototype.constructor=n,Bb(n,e)}function Bb(n,e){return Bb=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,r){return t.__proto__=r,t},Bb(n,e)}var $G=Df,jG=BG,qG=Tx,GG=ps,WG=function(n){function e(){return n.apply(this,arguments)||this}zG(e,n);var t=e.prototype;return t.execute=function(){var i=this;return i.rootNode.width=0,qG(i.rootNode,i.options,jG)},e}($G),VG={};function UG(n,e){return e=GG.assign({},VG,e),new WG(n,e).execute()}var HG=UG,B3=ps;function YG(n,e,t,r,i){var a=(typeof t=="function"?t(n):t)*n.depth;if(!r)try{if(n.id===n.parent.children[0].id){n.x+=a,n.y=e?e.y:0;return}}catch{}if(n.x+=a,e){if(n.y=e.y+B3.getHeight(e,n,i),e.parent&&n.parent.id!==e.parent.id){var s=e.parent,o=s.y+B3.getHeight(s,n,i);n.y=o>n.y?o:n.y}}else n.y=0}var XG=function(n,e,t,r){var i=null;n.eachNode(function(a){YG(a,i,e,t,r),i=a})};function KG(n,e){n.prototype=Object.create(e.prototype),n.prototype.constructor=n,zb(n,e)}function zb(n,e){return zb=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,r){return t.__proto__=r,t},zb(n,e)}var ZG=Df,uh=XG,JG=uP,QG=ps,Vu=["LR","RL","H"],eW=Vu[0],tW=function(n){function e(){return n.apply(this,arguments)||this}KG(e,n);var t=e.prototype;return t.execute=function(){var i=this,a=i.options,s=i.rootNode;a.isHorizontal=!0;var o=a.indent,u=o===void 0?20:o,l=a.dropCap,c=l===void 0?!0:l,h=a.direction,d=h===void 0?eW:h,f=a.align;if(d&&Vu.indexOf(d)===-1)throw new TypeError("Invalid direction: "+d);if(d===Vu[0])uh(s,u,c,f);else if(d===Vu[1])uh(s,u,c,f),s.right2left();else if(d===Vu[2]){var g=JG(s,a),p=g.left,v=g.right;uh(p,u,c,f),p.right2left(),uh(v,u,c,f);var m=p.getBoundingBox();v.translate(m.width,0),s.x=v.x-s.width/2}return s},e}(ZG),nW={};function rW(n,e){return e=QG.assign({},nW,e),new tW(n,e).execute()}var iW=rW,aW=ps;function cP(n,e){var t=0;return n.children.length?n.children.forEach(function(r){t+=cP(r,e)}):t=n.height,n._subTreeSep=e.getSubTreeSep(n.data),n.totalHeight=Math.max(n.height,t)+2*n._subTreeSep,n.totalHeight}function hP(n){var e=n.children,t=e.length;if(t){e.forEach(function(u){hP(u)});var r=e[0],i=e[t-1],a=i.y-r.y+i.height,s=0;if(e.forEach(function(u){s+=u.totalHeight}),a>n.height)n.y=r.y+a/2-n.height/2;else if(e.length!==1||n.height>s){var o=n.y+(n.height-a)/2-r.y;e.forEach(function(u){u.translate(0,o)})}else n.y=(r.y+r.height/2+i.y+i.height/2)/2-n.height/2}}var sW={getSubTreeSep:function(){return 0}},oW=function(n,e){e===void 0&&(e={}),e=aW.assign({},sW,e),n.parent={x:0,width:0,height:0,y:0},n.BFTraverse(function(t){t.x=t.parent.x+t.parent.width}),n.parent=null,cP(n,e),n.startY=0,n.y=n.totalHeight/2-n.height/2,n.eachNode(function(t){var r=t.children,i=r.length;if(i){var a=r[0];if(a.startY=t.startY+t._subTreeSep,i===1)a.y=t.y+t.height/2-a.height/2;else{a.y=a.startY+a.totalHeight/2-a.height/2;for(var s=1;s<i;s++){var o=r[s];o.startY=r[s-1].startY+r[s-1].totalHeight,o.y=o.startY+o.totalHeight/2-o.height/2}}}}),hP(n)};function uW(n,e){n.prototype=Object.create(e.prototype),n.prototype.constructor=n,$b(n,e)}function $b(n,e){return $b=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,r){return t.__proto__=r,t},$b(n,e)}var lW=Df,cW=oW,hW=Tx,dW=ps,fW=function(n){function e(){return n.apply(this,arguments)||this}uW(e,n);var t=e.prototype;return t.execute=function(){var i=this;return hW(i.rootNode,i.options,cW)},e}(lW),gW={};function pW(n,e){return e=dW.assign({},gW,e),new fW(n,e).execute()}var vW=pW,mW={compactBox:RG,dendrogram:HG,indented:iW,mindmap:vW},lh=mW;const yW=(n,e)=>{if(n!=="next"&&n!=="prev")return e},z3=n=>{n.prev.next=n.next,n.next.prev=n.prev,delete n.next,delete n.prev};let bW=class{constructor(){const e={};e.prev=e,e.next=e.prev,this.shortcut=e}dequeue(){const e=this.shortcut,t=e.prev;if(t&&t!==e)return z3(t),t}enqueue(e){const t=this.shortcut;e.prev&&e.next&&z3(e),e.next=t.next,t.next.prev=e,t.next=e,e.prev=t}toString(){const e=[],t=this.shortcut;let r=t.prev;for(;r!==t;)e.push(JSON.stringify(r,yW)),r=r==null?void 0:r.prev;return`[${e.join(", ")}]`}},xW=class extends bW{};const wW=()=>1,EW=(n,e)=>{var t;if(n.getAllNodes().length<=1)return[];const r=SW(n,e||wW);return(t=_W(r.graph,r.buckets,r.zeroIdx).map(a=>n.getRelatedEdges(a.v,"out").filter(({target:s})=>s===a.w)))===null||t===void 0?void 0:t.flat()},_W=(n,e,t)=>{let r=[];const i=e[e.length-1],a=e[0];let s;for(;n.getAllNodes().length;){for(;s=a.dequeue();)wg(n,e,t,s);for(;s=i.dequeue();)wg(n,e,t,s);if(n.getAllNodes().length){for(let o=e.length-2;o>0;--o)if(s=e[o].dequeue(),s){r=r.concat(wg(n,e,t,s,!0));break}}}return r},wg=(n,e,t,r,i)=>{var a,s;const o=[];return n.hasNode(r.v)&&((a=n.getRelatedEdges(r.v,"in"))===null||a===void 0||a.forEach(u=>{const l=u.data.weight,c=n.getNode(u.source);i&&o.push({v:u.source,w:u.target,in:0,out:0}),c.data.out===void 0&&(c.data.out=0),c.data.out-=l,jb(e,t,Object.assign({v:c.id},c.data))}),(s=n.getRelatedEdges(r.v,"out"))===null||s===void 0||s.forEach(u=>{const l=u.data.weight,c=u.target,h=n.getNode(c);h.data.in===void 0&&(h.data.in=0),h.data.in-=l,jb(e,t,Object.assign({v:h.id},h.data))}),n.removeNode(r.v)),i?o:void 0},SW=(n,e)=>{const t=new Xt;let r=0,i=0;n.getAllNodes().forEach(u=>{t.addNode({id:u.id,data:{v:u.id,in:0,out:0}})}),n.getAllEdges().forEach(u=>{const l=t.getRelatedEdges(u.source,"out").find(h=>h.target===u.target),c=(e==null?void 0:e(u))||1;l?t.updateEdgeData(l==null?void 0:l.id,Object.assign(Object.assign({},l.data),{weight:l.data.weight+c})):t.addEdge({id:u.id,source:u.source,target:u.target,data:{weight:c}}),i=Math.max(i,t.getNode(u.source).data.out+=c),r=Math.max(r,t.getNode(u.target).data.in+=c)});const a=[],s=i+r+3;for(let u=0;u<s;u++)a.push(new xW);const o=r+1;return t.getAllNodes().forEach(u=>{jb(a,o,Object.assign({v:u.id},t.getNode(u.id).data))}),{buckets:a,zeroIdx:o,graph:t}},jb=(n,e,t)=>{t.out?t.in?n[t.out-t.in+e].enqueue(t):n[n.length-1].enqueue(t):n[0].enqueue(t)},kW=(n,e)=>{const r=e==="greedy"?EW(n,(i=>a=>a.data.weight||1)()):CW(n);r==null||r.forEach(i=>{const a=i.data;n.removeEdge(i.id),a.forwardName=i.data.name,a.reversed=!0,n.addEdge({id:i.id,source:i.target,target:i.source,data:Object.assign({},a)})})},CW=n=>{const e=[],t={},r={},i=a=>{r[a]||(r[a]=!0,t[a]=!0,n.getRelatedEdges(a,"out").forEach(s=>{t[s.target]?e.push(s):i(s.target)}),delete t[a])};return n.getAllNodes().forEach(a=>i(a.id)),e},AW=n=>{n.getAllEdges().forEach(e=>{const t=e.data;if(t.reversed){n.removeEdge(e.id);const r=t.forwardName;delete t.reversed,delete t.forwardName,n.addEdge({id:e.id,source:e.target,target:e.source,data:Object.assign(Object.assign({},t),{forwardName:r})})}})},TW=(n,e)=>Number(n)-Number(e),vu=(n,e,t,r)=>{let i;do i=`${r}${Math.random()}`;while(n.hasNode(i));return t.dummy=e,n.addNode({id:i,data:t}),i},OW=n=>{const e=new Xt;return n.getAllNodes().forEach(t=>{e.addNode(Object.assign({},t))}),n.getAllEdges().forEach(t=>{const r=e.getRelatedEdges(t.source,"out").find(i=>i.target===t.target);r?e.updateEdgeData(r==null?void 0:r.id,Object.assign(Object.assign({},r.data),{weight:r.data.weight+t.data.weight||0,minlen:Math.max(r.data.minlen,t.data.minlen||1)})):e.addEdge({id:t.id,source:t.source,target:t.target,data:{weight:t.data.weight||0,minlen:t.data.minlen||1}})}),e},dP=n=>{const e=new Xt;return n.getAllNodes().forEach(t=>{n.getChildren(t.id).length||e.addNode(Object.assign({},t))}),n.getAllEdges().forEach(t=>{e.addEdge(t)}),e},MW=(n,e)=>n==null?void 0:n.reduce((t,r,i)=>(t[r]=e[i],t),{}),$3=(n,e)=>{const t=Number(n.x),r=Number(n.y),i=Number(e.x)-t,a=Number(e.y)-r;let s=Number(n.width)/2,o=Number(n.height)/2;if(!i&&!a)return{x:0,y:0};let u,l;return Math.abs(a)*s>Math.abs(i)*o?(a<0&&(o=-o),u=o*i/a,l=o):(i<0&&(s=-s),u=s,l=s*a/i),{x:t+u,y:r+l}},Pl=n=>{const e=[],t=fP(n)+1;for(let r=0;r<t;r++)e.push([]);n.getAllNodes().forEach(r=>{const i=r.data.rank;i!==void 0&&e[i]&&e[i].push(r.id)});for(let r=0;r<t;r++)e[r]=e[r].sort((i,a)=>TW(n.getNode(i).data.order,n.getNode(a).data.order));return e},PW=n=>{const e=n.getAllNodes().filter(r=>r.data.rank!==void 0).map(r=>r.data.rank),t=Math.min(...e);n.getAllNodes().forEach(r=>{r.data.hasOwnProperty("rank")&&t!==1/0&&(r.data.rank-=t)})},NW=(n,e=0)=>{const t=n.getAllNodes(),r=t.filter(o=>o.data.rank!==void 0).map(o=>o.data.rank),i=Math.min(...r),a=[];t.forEach(o=>{const u=(o.data.rank||0)-i;a[u]||(a[u]=[]),a[u].push(o.id)});let s=0;for(let o=0;o<a.length;o++){const u=a[o];u===void 0?o%e!==0&&(s-=1):s&&(u==null||u.forEach(l=>{const c=n.getNode(l);c&&(c.data.rank=c.data.rank||0,c.data.rank+=s)}))}},j3=(n,e,t,r)=>{const i={width:0,height:0};return re(t)&&re(r)&&(i.rank=t,i.order=r),vu(n,"border",i,e)},fP=n=>{let e;return n.getAllNodes().forEach(t=>{const r=t.data.rank;r!==void 0&&(e===void 0||r>e)&&(e=r)}),e||(e=0),e},DW=(n,e)=>{const t={lhs:[],rhs:[]};return n==null||n.forEach(r=>{e(r)?t.lhs.push(r):t.rhs.push(r)}),t},Ox=(n,e)=>n.reduce((t,r)=>{const i=e(t),a=e(r);return i>a?r:t}),gP=(n,e,t,r,i,a)=>{r.includes(e.id)||(r.push(e.id),t||a.push(e.id),i(e.id).forEach(s=>gP(n,s,t,r,i,a)),t&&a.push(e.id))},pP=(n,e,t,r)=>{const i=Array.isArray(e)?e:[e],a=u=>r?n.getSuccessors(u):n.getNeighbors(u),s=[],o=[];return i.forEach(u=>{if(n.hasNode(u.id))gP(n,u,t==="post",o,a,s);else throw new Error(`Graph does not have node: ${u}`)}),s},RW=n=>{const e=t=>{const r=n.getChildren(t),i=n.getNode(t);if(r!=null&&r.length&&r.forEach(a=>e(a.id)),i.data.hasOwnProperty("minRank")){i.data.borderLeft=[],i.data.borderRight=[];for(let a=i.data.minRank,s=i.data.maxRank+1;a<s;a+=1)q3(n,"borderLeft","_bl",t,i,a),q3(n,"borderRight","_br",t,i,a)}};n.getRoots().forEach(t=>e(t.id))},q3=(n,e,t,r,i,a)=>{const s={rank:a,borderType:e,width:0,height:0},o=i.data[e][a-1],u=vu(n,"border",s,t);i.data[e][a]=u,n.setParent(u,r),o&&n.addEdge({id:`e${Math.random()}`,source:o,target:u,data:{weight:1}})},LW=(n,e)=>{const t=e.toLowerCase();(t==="lr"||t==="rl")&&vP(n)},IW=(n,e)=>{const t=e.toLowerCase();(t==="bt"||t==="rl")&&FW(n),(t==="lr"||t==="rl")&&(BW(n),vP(n))},vP=n=>{n.getAllNodes().forEach(e=>{G3(e)}),n.getAllEdges().forEach(e=>{G3(e)})},G3=n=>{const e=n.data.width;n.data.width=n.data.height,n.data.height=e},FW=n=>{n.getAllNodes().forEach(e=>{Eg(e.data)}),n.getAllEdges().forEach(e=>{var t;(t=e.data.points)===null||t===void 0||t.forEach(r=>Eg(r)),e.data.hasOwnProperty("y")&&Eg(e.data)})},Eg=n=>{n!=null&&n.y&&(n.y=-n.y)},BW=n=>{n.getAllNodes().forEach(e=>{_g(e.data)}),n.getAllEdges().forEach(e=>{var t;(t=e.data.points)===null||t===void 0||t.forEach(r=>_g(r)),e.data.hasOwnProperty("x")&&_g(e.data)})},_g=n=>{const e=n.x;n.x=n.y,n.y=e},zW=n=>{const e=vu(n,"root",{},"_root"),t=$W(n);let r=Math.max(...Object.values(t));Math.abs(r)===1/0&&(r=1);const i=r-1,a=2*i+1;n.getAllEdges().forEach(o=>{o.data.minlen*=a});const s=jW(n)+1;return n.getRoots().forEach(o=>{mP(n,e,a,s,i,t,o.id)}),{nestingRoot:e,nodeRankFactor:a}},mP=(n,e,t,r,i,a,s)=>{const o=n.getChildren(s);if(!(o!=null&&o.length)){s!==e&&n.addEdge({id:`e${Math.random()}`,source:e,target:s,data:{weight:0,minlen:t}});return}const u=j3(n,"_bt"),l=j3(n,"_bb"),c=n.getNode(s);n.setParent(u,s),c.data.borderTop=u,n.setParent(l,s),c.data.borderBottom=l,o==null||o.forEach(h=>{mP(n,e,t,r,i,a,h.id);const d=h.data.borderTop?h.data.borderTop:h.id,f=h.data.borderBottom?h.data.borderBottom:h.id,g=h.data.borderTop?r:2*r,p=d!==f?1:i-a[s]+1;n.addEdge({id:`e${Math.random()}`,source:u,target:d,data:{minlen:p,weight:g,nestingEdge:!0}}),n.addEdge({id:`e${Math.random()}`,source:f,target:l,data:{minlen:p,weight:g,nestingEdge:!0}})}),n.getParent(s)||n.addEdge({id:`e${Math.random()}`,source:e,target:u,data:{weight:0,minlen:i+a[s]}})},$W=n=>{const e={},t=(r,i)=>{const a=n.getChildren(r);a==null||a.forEach(s=>t(s.id,i+1)),e[r]=i};return n.getRoots().forEach(r=>t(r.id,1)),e},jW=n=>{let e=0;return n.getAllEdges().forEach(t=>{e+=t.data.weight}),e},qW=(n,e)=>{e&&n.removeNode(e),n.getAllEdges().forEach(t=>{t.data.nestingEdge&&n.removeEdge(t.id)})},GW="edge",yP="edge-label",WW=(n,e)=>{n.getAllEdges().forEach(t=>VW(n,t,e))},VW=(n,e,t)=>{let r=e.source,i=n.getNode(r).data.rank;const a=e.target,s=n.getNode(a).data.rank,o=e.data.labelRank;if(s===i+1)return;n.removeEdge(e.id);let u,l,c;for(c=0,++i;i<s;++c,++i)e.data.points=[],l={originalEdge:e,width:0,height:0,rank:i},u=vu(n,GW,l,"_d"),i===o&&(l.width=e.data.width,l.height=e.data.height,l.dummy=yP,l.labelpos=e.data.labelpos),n.addEdge({id:`e${Math.random()}`,source:r,target:u,data:{weight:e.data.weight}}),c===0&&t.push(u),r=u;n.addEdge({id:`e${Math.random()}`,source:r,target:a,data:{weight:e.data.weight}})},UW=(n,e)=>{e.forEach(t=>{let r=n.getNode(t);const{data:i}=r,a=i.originalEdge;let s;a&&n.addEdge(a);let o=t;for(;r.data.dummy;)s=n.getSuccessors(o)[0],n.removeNode(o),a.data.points.push({x:r.data.x,y:r.data.y}),r.data.dummy===yP&&(a.data.x=r.data.x,a.data.y=r.data.y,a.data.width=r.data.width,a.data.height=r.data.height),o=s.id,r=n.getNode(o)})},HW=(n,e,t)=>{const r={};let i;t==null||t.forEach(a=>{let s=n.getParent(a),o,u;for(;s;){if(o=n.getParent(s.id),o?(u=r[o.id],r[o.id]=s.id):(u=i,i=s.id),u&&u!==s.id){e.hasNode(u)||e.addNode({id:u,data:{}}),e.hasNode(s.id)||e.addNode({id:s.id,data:{}}),e.hasEdge(`e${u}-${s.id}`)||e.addEdge({id:`e${u}-${s.id}`,source:u,target:s.id,data:{}});return}s=o}})},YW=(n,e,t)=>{const r=XW(n),i=new Xt({tree:[{id:r,children:[],data:{}}]});return n.getAllNodes().forEach(a=>{const s=n.getParent(a.id);(a.data.rank===e||a.data.minRank<=e&&e<=a.data.maxRank)&&(i.hasNode(a.id)||i.addNode(Object.assign({},a)),s!=null&&s.id&&!i.hasNode(s==null?void 0:s.id)&&i.addNode(Object.assign({},s)),i.setParent(a.id,(s==null?void 0:s.id)||r),n.getRelatedEdges(a.id,t).forEach(o=>{const u=o.source===a.id?o.target:o.source;i.hasNode(u)||i.addNode(Object.assign({},n.getNode(u)));const l=i.getRelatedEdges(u,"out").find(({target:h})=>h===a.id),c=l!==void 0?l.data.weight:0;l?i.updateEdgeData(l.id,Object.assign(Object.assign({},l.data),{weight:o.data.weight+c})):i.addEdge({id:o.id,source:u,target:a.id,data:{weight:o.data.weight+c}})}),a.data.hasOwnProperty("minRank")&&i.updateNodeData(a.id,Object.assign(Object.assign({},a.data),{borderLeft:a.data.borderLeft[e],borderRight:a.data.borderRight[e]})))}),i},XW=n=>{let e;for(;n.hasNode(e=`_root${Math.random()}`););return e},KW=(n,e,t)=>{const r=MW(t,t.map((c,h)=>h)),a=e.map(c=>{const h=n.getRelatedEdges(c,"out").map(d=>({pos:r[d.target]||0,weight:d.data.weight}));return h==null?void 0:h.sort((d,f)=>d.pos-f.pos)}).flat().filter(c=>c!==void 0);let s=1;for(;s<t.length;)s<<=1;const o=2*s-1;s-=1;const u=Array(o).fill(0,0,o);let l=0;return a==null||a.forEach(c=>{if(c){let h=c.pos+s;u[h]+=c.weight;let d=0;for(;h>0;)h%2&&(d+=u[h+1]),h=h-1>>1,u[h]+=c.weight;l+=c.weight*d}}),l},W3=(n,e)=>{let t=0;for(let r=1;r<(e==null?void 0:e.length);r+=1)t+=KW(n,e[r-1],e[r]);return t},V3=n=>{const e={},t=n.getAllNodes(),r=t.map(l=>{var c;return(c=l.data.rank)!==null&&c!==void 0?c:-1/0}),i=Math.max(...r),a=[];for(let l=0;l<i+1;l++)a.push([]);const s=t.sort((l,c)=>n.getNode(l.id).data.rank-n.getNode(c.id).data.rank),u=s.filter(l=>n.getNode(l.id).data.fixorder!==void 0).sort((l,c)=>n.getNode(l.id).data.fixorder-n.getNode(c.id).data.fixorder);return u==null||u.forEach(l=>{isNaN(n.getNode(l.id).data.rank)||a[n.getNode(l.id).data.rank].push(l.id),e[l.id]=!0}),s==null||s.forEach(l=>n.dfsTree(l.id,c=>{if(e.hasOwnProperty(c.id))return!0;e[c.id]=!0,isNaN(c.data.rank)||a[c.data.rank].push(c.id)})),a},ZW=(n,e)=>e.map(t=>{const r=n.getRelatedEdges(t,"in");if(!(r!=null&&r.length))return{v:t};const i={sum:0,weight:0};return r==null||r.forEach(a=>{const s=n.getNode(a.source);i.sum+=a.data.weight*s.data.order,i.weight+=a.data.weight}),{v:t,barycenter:i.sum/i.weight,weight:i.weight}}),JW=(n,e)=>{var t,r,i;const a={};n==null||n.forEach((o,u)=>{a[o.v]={i:u,indegree:0,in:[],out:[],vs:[o.v]};const l=a[o.v];o.barycenter!==void 0&&(l.barycenter=o.barycenter,l.weight=o.weight)}),(t=e.getAllEdges())===null||t===void 0||t.forEach(o=>{const u=a[o.source],l=a[o.target];u!==void 0&&l!==void 0&&(l.indegree++,u.out.push(a[o.target]))});const s=(i=(r=Object.values(a)).filter)===null||i===void 0?void 0:i.call(r,o=>!o.indegree);return QW(s)},QW=n=>{var e,t;const r=[],i=u=>l=>{l.merged||(l.barycenter===void 0||u.barycenter===void 0||l.barycenter>=u.barycenter)&&eV(u,l)},a=u=>l=>{l.in.push(u),--l.indegree===0&&n.push(l)};for(;n!=null&&n.length;){const u=n.pop();r.push(u),(e=u.in.reverse())===null||e===void 0||e.forEach(l=>i(u)(l)),(t=u.out)===null||t===void 0||t.forEach(l=>a(u)(l))}const s=r.filter(u=>!u.merged),o=["vs","i","barycenter","weight"];return s.map(u=>{const l={};return o==null||o.forEach(c=>{u[c]!==void 0&&(l[c]=u[c])}),l})},eV=(n,e)=>{var t;let r=0,i=0;n.weight&&(r+=n.barycenter*n.weight,i+=n.weight),e.weight&&(r+=e.barycenter*e.weight,i+=e.weight),n.vs=(t=e.vs)===null||t===void 0?void 0:t.concat(n.vs),n.barycenter=r/i,n.weight=i,n.i=Math.min(e.i,n.i),e.merged=!0},tV=JW,nV=(n,e,t,r)=>{const i=DW(n,d=>{const f=d.hasOwnProperty("fixorder")&&!isNaN(d.fixorder);return r?!f&&d.hasOwnProperty("barycenter"):f||d.hasOwnProperty("barycenter")}),a=i.lhs,s=i.rhs.sort((d,f)=>-d.i- -f.i),o=[];let u=0,l=0,c=0;a==null||a.sort(rV(!!e,!!t)),c=U3(o,s,c),a==null||a.forEach(d=>{var f;c+=(f=d.vs)===null||f===void 0?void 0:f.length,o.push(d.vs),u+=d.barycenter*d.weight,l+=d.weight,c=U3(o,s,c)});const h={vs:o.flat()};return l&&(h.barycenter=u/l,h.weight=l),h},U3=(n,e,t)=>{let r=t,i;for(;e.length&&(i=e[e.length-1]).i<=r;)e.pop(),n==null||n.push(i.vs),r++;return r},rV=(n,e)=>(t,r)=>{if(t.fixorder!==void 0&&r.fixorder!==void 0)return t.fixorder-r.fixorder;if(t.barycenter<r.barycenter)return-1;if(t.barycenter>r.barycenter)return 1;if(e&&t.order!==void 0&&r.order!==void 0){if(t.order<r.order)return-1;if(t.order>r.order)return 1}return n?r.i-t.i:t.i-r.i},bP=(n,e,t,r,i,a)=>{var s,o,u,l;let c=n.getChildren(e).map(y=>y.id);const h=n.getNode(e),d=h?h.data.borderLeft:void 0,f=h?h.data.borderRight:void 0,g={};d&&(c=c==null?void 0:c.filter(y=>y!==d&&y!==f));const p=ZW(n,c||[]);p==null||p.forEach(y=>{var b;if(!((b=n.getChildren(y.v))===null||b===void 0)&&b.length){const x=bP(n,y.v,t,r,a);g[y.v]=x,x.hasOwnProperty("barycenter")&&aV(y,x)}});const v=tV(p,t);iV(v,g),(s=v.filter(y=>y.vs.length>0))===null||s===void 0||s.forEach(y=>{const b=n.getNode(y.vs[0]);b&&(y.fixorder=b.data.fixorder,y.order=b.data.order)});const m=nV(v,r,i,a);if(d&&(m.vs=[d,m.vs,f].flat(),!((o=n.getPredecessors(d))===null||o===void 0)&&o.length)){const y=n.getNode(((u=n.getPredecessors(d))===null||u===void 0?void 0:u[0].id)||""),b=n.getNode(((l=n.getPredecessors(f))===null||l===void 0?void 0:l[0].id)||"");m.hasOwnProperty("barycenter")||(m.barycenter=0,m.weight=0),m.barycenter=(m.barycenter*m.weight+y.data.order+b.data.order)/(m.weight+2),m.weight+=2}return m},iV=(n,e)=>{n==null||n.forEach(t=>{var r;const i=(r=t.vs)===null||r===void 0?void 0:r.map(a=>e[a]?e[a].vs:a);t.vs=i.flat()})},aV=(n,e)=>{n.barycenter!==void 0?(n.barycenter=(n.barycenter*n.weight+e.barycenter*e.weight)/(n.weight+e.weight),n.weight+=e.weight):(n.barycenter=e.barycenter,n.weight=e.weight)},sV=(n,e)=>{const t=fP(n),r=[],i=[];for(let c=1;c<t+1;c++)r.push(c);for(let c=t-1;c>-1;c--)i.push(c);const a=H3(n,r,"in"),s=H3(n,i,"out");let o=V3(n);Sg(n,o);let u=Number.POSITIVE_INFINITY,l;for(let c=0,h=0;h<4;++c,++h){Y3(c%2?a:s,c%4>=2,!1,e),o=Pl(n);const d=W3(n,o);d<u&&(h=0,l=nu(o),u=d)}o=V3(n),Sg(n,o);for(let c=0,h=0;h<4;++c,++h){Y3(c%2?a:s,c%4>=2,!0,e),o=Pl(n);const d=W3(n,o);d<u&&(h=0,l=nu(o),u=d)}Sg(n,l)},H3=(n,e,t)=>e.map(r=>YW(n,r,t)),Y3=(n,e,t,r)=>{const i=new Xt;n==null||n.forEach(a=>{var s;const o=a.getRoots()[0].id,u=bP(a,o,i,e,t,r);for(let l=0;l<((s=u.vs)===null||s===void 0?void 0:s.length);l++){const c=a.getNode(u.vs[l]);c&&(c.data.order=l)}HW(a,i,u.vs)})},Sg=(n,e)=>{e==null||e.forEach(t=>{t==null||t.forEach((r,i)=>{n.getNode(r).data.order=i})})},oV=(n,e)=>{const r=n.getAllNodes().filter(s=>{var o;return!(!((o=n.getChildren(s.id))===null||o===void 0)&&o.length)}).map(s=>s.data.rank),i=Math.max(...r),a=[];for(let s=0;s<i+1;s++)a[s]=[];e==null||e.forEach(s=>{const o=n.getNode(s);!o||o.data.dummy||isNaN(o.data.rank)||(o.data.fixorder=a[o.data.rank].length,a[o.data.rank].push(s))})},uV=n=>{const e={};let t=0;const r=i=>{const a=t;n.getChildren(i).forEach(s=>r(s.id)),e[i]={low:a,lim:t++}};return n.getRoots().forEach(i=>r(i.id)),e},lV=(n,e,t,r)=>{var i,a;const s=[],o=[],u=Math.min(e[t].low,e[r].low),l=Math.max(e[t].lim,e[r].lim);let c,h;c=t;do c=(i=n.getParent(c))===null||i===void 0?void 0:i.id,s.push(c);while(c&&(e[c].low>u||l>e[c].lim));for(h=c,c=r;c&&c!==h;)o.push(c),c=(a=n.getParent(c))===null||a===void 0?void 0:a.id;return{lca:h,path:s.concat(o.reverse())}},cV=(n,e)=>{const t=uV(n);e.forEach(r=>{var i,a;let s=r,o=n.getNode(s);const u=o.data.originalEdge;if(!u)return;const l=lV(n,t,u.source,u.target),c=l.path,h=l.lca;let d=0,f=c[d],g=!0;for(;s!==u.target;){if(o=n.getNode(s),g){for(;f!==h&&((i=n.getNode(f))===null||i===void 0?void 0:i.data.maxRank)<o.data.rank;)d++,f=c[d];f===h&&(g=!1)}if(!g){for(;d<c.length-1&&((a=n.getNode(c[d+1]))===null||a===void 0?void 0:a.data.minRank)<=o.data.rank;)d++;f=c[d]}n.hasNode(f)&&n.setParent(s,f),s=n.getSuccessors(s)[0].id}})},hV=(n,e)=>{const t={},r=(i,a)=>{let s=0,o=0;const u=i.length,l=a==null?void 0:a[(a==null?void 0:a.length)-1];return a==null||a.forEach((c,h)=>{var d;const f=fV(n,c),g=f?n.getNode(f.id).data.order:u;(f||c===l)&&((d=a.slice(o,h+1))===null||d===void 0||d.forEach(p=>{var v;(v=n.getPredecessors(p))===null||v===void 0||v.forEach(m=>{var y;const b=n.getNode(m.id),x=b.data.order;(x<s||g<x)&&!(b.data.dummy&&(!((y=n.getNode(p))===null||y===void 0)&&y.data.dummy))&&xP(t,m.id,p)})}),o=h+1,s=g)}),a};return e!=null&&e.length&&e.reduce(r),t},dV=(n,e)=>{const t={};function r(o,u,l,c,h){var d,f;let g;for(let p=u;p<l;p++)g=o[p],!((d=n.getNode(g))===null||d===void 0)&&d.data.dummy&&((f=n.getPredecessors(g))===null||f===void 0||f.forEach(v=>{const m=n.getNode(v.id);m.data.dummy&&(m.data.order<c||m.data.order>h)&&xP(t,v.id,g)}))}function i(o){return JSON.stringify(o.slice(1))}function a(o,u){const l=i(o);u.get(l)||(r(...o),u.set(l,!0))}const s=(o,u)=>{let l=-1,c,h=0;const d=new Map;return u==null||u.forEach((f,g)=>{var p;if(((p=n.getNode(f))===null||p===void 0?void 0:p.data.dummy)==="border"){const v=n.getPredecessors(f)||[];v.length&&(c=n.getNode(v[0].id).data.order,a([u,h,g,l,c],d),h=g,l=c)}a([u,h,u.length,c,o.length],d)}),u};return e!=null&&e.length&&e.reduce(s),t},fV=(n,e)=>{var t,r;if(!((t=n.getNode(e))===null||t===void 0)&&t.data.dummy)return(r=n.getPredecessors(e))===null||r===void 0?void 0:r.find(i=>n.getNode(i.id).data.dummy)},xP=(n,e,t)=>{let r=e,i=t;if(r>i){const s=r;r=i,i=s}let a=n[r];a||(n[r]=a={}),a[i]=!0},gV=(n,e,t)=>{let r=e,i=t;if(r>i){const a=e;r=i,i=a}return!!n[r]},pV=(n,e,t,r)=>{const i={},a={},s={};return e==null||e.forEach(o=>{o==null||o.forEach((u,l)=>{i[u]=u,a[u]=u,s[u]=l})}),e==null||e.forEach(o=>{let u=-1;o==null||o.forEach(l=>{let c=r(l).map(h=>h.id);if(c.length){c=c.sort((d,f)=>s[d]-s[f]);const h=(c.length-1)/2;for(let d=Math.floor(h),f=Math.ceil(h);d<=f;++d){const g=c[d];a[l]===l&&u<s[g]&&!gV(t,l,g)&&(a[g]=l,a[l]=i[l]=i[g],u=s[g])}}})}),{root:i,align:a}},vV=(n,e,t,r,i,a,s)=>{var o;const u={},l=mV(n,e,t,i,a,s),c=s?"borderLeft":"borderRight",h=(g,p)=>{let v=l.getAllNodes(),m=v.pop();const y={};for(;m;)y[m.id]?g(m.id):(y[m.id]=!0,v.push(m),v=v.concat(p(m.id))),m=v.pop()},d=g=>{u[g]=(l.getRelatedEdges(g,"in")||[]).reduce((p,v)=>Math.max(p,(u[v.source]||0)+v.data.weight),0)},f=g=>{const p=(l.getRelatedEdges(g,"out")||[]).reduce((m,y)=>Math.min(m,(u[y.target]||0)-y.data.weight),Number.POSITIVE_INFINITY),v=n.getNode(g);p!==Number.POSITIVE_INFINITY&&v.data.borderType!==c&&(u[g]=Math.max(u[g],p))};return h(d,l.getPredecessors.bind(l)),h(f,l.getSuccessors.bind(l)),(o=Object.values(r))===null||o===void 0||o.forEach(g=>{u[g]=u[t[g]]}),u},mV=(n,e,t,r,i,a)=>{const s=new Xt,o=wV(r,i,a);return e==null||e.forEach(u=>{let l;u==null||u.forEach(c=>{const h=t[c];if(s.hasNode(h)||s.addNode({id:h,data:{}}),l){const d=t[l],f=s.getRelatedEdges(d,"out").find(g=>g.target===h);f?s.updateEdgeData(f.id,Object.assign(Object.assign({},f.data),{weight:Math.max(o(n,c,l),f.data.weight||0)})):s.addEdge({id:`e${Math.random()}`,source:d,target:h,data:{weight:Math.max(o(n,c,l),0)}})}l=c})}),s},yV=(n,e)=>Ox(Object.values(e),t=>{var r;let i=Number.NEGATIVE_INFINITY,a=Number.POSITIVE_INFINITY;return(r=Object.keys(t))===null||r===void 0||r.forEach(s=>{const o=t[s],u=EV(n,s)/2;i=Math.max(o+u,i),a=Math.min(o-u,a)}),i-a});function bV(n,e){const t=Object.values(e),r=Math.min(...t),i=Math.max(...t);["u","d"].forEach(a=>{["l","r"].forEach(s=>{const o=a+s,u=n[o];let l;if(u===e)return;const c=Object.values(u);l=s==="l"?r-Math.min(...c):i-Math.max(...c),l&&(n[o]={},Object.keys(u).forEach(h=>{n[o][h]=u[h]+l}))})})}const xV=(n,e)=>{const t={};return Object.keys(n.ul).forEach(r=>{if(e)t[r]=n[e.toLowerCase()][r];else{const i=Object.values(n).map(a=>a[r]);t[r]=(i[0]+i[1])/2}}),t},wV=(n,e,t)=>(r,i,a)=>{const s=r.getNode(i),o=r.getNode(a);let u=0,l=0;if(u+=s.data.width/2,s.data.hasOwnProperty("labelpos"))switch((s.data.labelpos||"").toLowerCase()){case"l":l=-s.data.width/2;break;case"r":l=s.data.width/2;break}if(l&&(u+=t?l:-l),l=0,u+=(s.data.dummy?e:n)/2,u+=(o.data.dummy?e:n)/2,u+=o.data.width/2,o.data.labelpos)switch((o.data.labelpos||"").toLowerCase()){case"l":l=o.data.width/2;break;case"r":l=-o.data.width/2;break}return l&&(u+=t?l:-l),l=0,u},EV=(n,e)=>n.getNode(e).data.width||0,_V=(n,e)=>{const{ranksep:t=0}=e||{},r=Pl(n);let i=0;r==null||r.forEach(a=>{const s=a.map(u=>n.getNode(u).data.height),o=Math.max(...s,0);a==null||a.forEach(u=>{n.getNode(u).data.y=i+o/2}),i+=o+t})},SV=(n,e)=>{const{align:t,nodesep:r=0,edgesep:i=0}=e||{},a=Pl(n),s=Object.assign(hV(n,a),dV(n,a)),o={};let u=[];["u","d"].forEach(c=>{u=c==="u"?a:Object.values(a).reverse(),["l","r"].forEach(h=>{h==="r"&&(u=u.map(p=>Object.values(p).reverse()));const d=(c==="u"?n.getPredecessors:n.getSuccessors).bind(n),f=pV(n,u,s,d),g=vV(n,u,f.root,f.align,r,i,h==="r");h==="r"&&Object.keys(g).forEach(p=>g[p]=-g[p]),o[c+h]=g})});const l=yV(n,o);return l&&bV(o,l),xV(o,t)},kV=(n,e)=>{var t;const r=dP(n);_V(r,e);const i=SV(r,e);(t=Object.keys(i))===null||t===void 0||t.forEach(a=>{r.getNode(a).data.x=i[a]})},wP=n=>{const e={},t=r=>{var i;const a=n.getNode(r);if(!a)return 0;if(e[r])return a.data.rank;e[r]=!0;let s;return(i=n.getRelatedEdges(r,"out"))===null||i===void 0||i.forEach(o=>{const u=t(o.target),l=o.data.minlen,c=u-l;c&&(s===void 0||c<s)&&(s=c)}),s||(s=0),a.data.rank=s,s};n.getAllNodes().filter(r=>n.getRelatedEdges(r.id,"in").length===0).forEach(r=>t(r.id))},CV=n=>{const e={};let t;const r=s=>{var o;const u=n.getNode(s);if(!u)return 0;if(e[s])return u.data.rank;e[s]=!0;let l;return(o=n.getRelatedEdges(s,"out"))===null||o===void 0||o.forEach(c=>{const h=r(c.target),d=c.data.minlen,f=h-d;f&&(l===void 0||f<l)&&(l=f)}),l||(l=0),(t===void 0||l<t)&&(t=l),u.data.rank=l,l};n.getAllNodes().filter(s=>n.getRelatedEdges(s.id,"in").length===0).forEach(s=>{s&&r(s.id)}),t===void 0&&(t=0);const i={},a=(s,o)=>{var u;const l=n.getNode(s),c=isNaN(l.data.layer)?o:l.data.layer;(l.data.rank===void 0||l.data.rank<c)&&(l.data.rank=c),!i[s]&&(i[s]=!0,(u=n.getRelatedEdges(s,"out"))===null||u===void 0||u.forEach(h=>{a(h.target,c+h.data.minlen)}))};n.getAllNodes().forEach(s=>{const o=s.data;o&&(isNaN(o.layer)?o.rank-=t:a(s.id,o.layer))})},os=(n,e)=>n.getNode(e.target).data.rank-n.getNode(e.source).data.rank-e.data.minlen,AV=n=>{const e=new Xt({tree:[]}),t=n.getAllNodes()[0],r=n.getAllNodes().length;e.addNode(t);let i,a;for(;TV(e,n)<r;)i=EP(e,n),a=e.hasNode(i.source)?os(n,i):-os(n,i),_P(e,n,a);return e},TV=(n,e)=>{const t=r=>{e.getRelatedEdges(r,"both").forEach(i=>{const a=i.source,s=r===a?i.target:a;!n.hasNode(s)&&!os(e,i)&&(n.addNode({id:s,data:{}}),n.addEdge({id:i.id,source:r,target:s,data:{}}),t(s))})};return n.getAllNodes().forEach(r=>t(r.id)),n.getAllNodes().length},OV=n=>{const e=new Xt({tree:[]}),t=n.getAllNodes()[0],r=n.getAllNodes().length;e.addNode(t);let i,a;for(;MV(e,n)<r;)i=EP(e,n),a=e.hasNode(i.source)?os(n,i):-os(n,i),_P(e,n,a);return e},MV=(n,e)=>{const t=r=>{var i;(i=e.getRelatedEdges(r,"both"))===null||i===void 0||i.forEach(a=>{const s=a.source,o=r===s?a.target:s;!n.hasNode(o)&&(e.getNode(o).data.layer!==void 0||!os(e,a))&&(n.addNode({id:o,data:{}}),n.addEdge({id:a.id,source:r,target:o,data:{}}),t(o))})};return n.getAllNodes().forEach(r=>t(r.id)),n.getAllNodes().length},EP=(n,e)=>Ox(e.getAllEdges(),t=>n.hasNode(t.source)!==n.hasNode(t.target)?os(e,t):1/0),_P=(n,e,t)=>{n.getAllNodes().forEach(r=>{const i=e.getNode(r.id);i.data.rank||(i.data.rank=0),i.data.rank+=t})},PV=n=>{const e=OW(n);wP(e);const t=AV(e);kP(t),SP(t,e);let r,i;for(;r=RV(t);)i=LV(t,e,r),IV(t,e,r,i)},SP=(n,e)=>{let t=pP(n,n.getAllNodes(),"post",!1);t=t.slice(0,(t==null?void 0:t.length)-1),t.forEach(r=>{NV(n,e,r)})},NV=(n,e,t)=>{const i=n.getNode(t).data.parent,a=n.getRelatedEdges(t,"both").find(s=>s.target===i||s.source===i);a.data.cutvalue=DV(n,e,t)},DV=(n,e,t)=>{const i=n.getNode(t).data.parent;let a=!0,s=e.getRelatedEdges(t,"out").find(u=>u.target===i),o=0;return s||(a=!1,s=e.getRelatedEdges(i,"out").find(u=>u.target===t)),o=s.data.weight,e.getRelatedEdges(t,"both").forEach(u=>{const l=u.source===t,c=l?u.target:u.source;if(c!==i){const h=l===a,d=u.data.weight;if(o+=h?d:-d,BV(n,t,c)){const f=n.getRelatedEdges(t,"both").find(g=>g.source===c||g.target===c).data.cutvalue;o+=h?-f:f}}}),o},kP=(n,e=n.getAllNodes()[0].id)=>{CP(n,{},1,e)},CP=(n,e,t,r,i)=>{var a;const s=t;let o=t;const u=n.getNode(r);return e[r]=!0,(a=n.getNeighbors(r))===null||a===void 0||a.forEach(l=>{e[l.id]||(o=CP(n,e,o,l.id,r))}),u.data.low=s,u.data.lim=o++,i?u.data.parent=i:delete u.data.parent,o},RV=n=>n.getAllEdges().find(e=>e.data.cutvalue<0),LV=(n,e,t)=>{let r=t.source,i=t.target;e.getRelatedEdges(r,"out").find(c=>c.target===i)||(r=t.target,i=t.source);const a=n.getNode(r),s=n.getNode(i);let o=a,u=!1;a.data.lim>s.data.lim&&(o=s,u=!0);const l=e.getAllEdges().filter(c=>u===X3(n.getNode(c.source),o)&&u!==X3(n.getNode(c.target),o));return Ox(l,c=>os(e,c))},IV=(n,e,t,r)=>{const i=n.getRelatedEdges(t.source,"both").find(a=>a.source===t.target||a.target===t.target);i&&n.removeEdge(i.id),n.addEdge({id:`e${Math.random()}`,source:r.source,target:r.target,data:{}}),kP(n),SP(n,e),FV(n,e)},FV=(n,e)=>{const t=n.getAllNodes().find(i=>!i.data.parent);let r=pP(n,t,"pre",!1);r=r.slice(1),r.forEach(i=>{const a=n.getNode(i).data.parent;let s=e.getRelatedEdges(i,"out").find(u=>u.target===a),o=!1;!s&&e.hasNode(a)&&(s=e.getRelatedEdges(a,"out").find(u=>u.target===i),o=!0),e.getNode(i).data.rank=(e.hasNode(a)&&e.getNode(a).data.rank||0)+(o?s==null?void 0:s.data.minlen:-(s==null?void 0:s.data.minlen))})},BV=(n,e,t)=>n.getRelatedEdges(e,"both").find(r=>r.source===t||r.target===t),X3=(n,e)=>e.data.low<=n.data.lim&&n.data.lim<=e.data.lim,zV=(n,e)=>{switch(e){case"network-simplex":jV(n);break;case"tight-tree":K3(n);break;case"longest-path":$V(n);break;default:K3(n)}},$V=wP,K3=n=>{CV(n),OV(n)},jV=n=>{PV(n)},qV=(n,e)=>{const{edgeLabelSpace:t,keepNodeOrder:r,prevGraph:i,rankdir:a,ranksep:s}=e;!r&&i&&WV(n,i);const o=KV(n);t&&(e.ranksep=ZV(o,{rankdir:a,ranksep:s}));let u;try{u=GV(o,e)}catch(l){if(l.message==="Not possible to find intersection inside of the rectangle"){console.error(`The following error may be caused by improper layer setting, please make sure your manual layer setting does not violate the graph's structure:
`,l);return}throw l}return VV(n,o),u},GV=(n,e)=>{const{acyclicer:t,ranker:r,rankdir:i="tb",nodeOrder:a,keepNodeOrder:s,align:o,nodesep:u=50,edgesep:l=20,ranksep:c=50}=e;sU(n),kW(n,t);const{nestingRoot:h,nodeRankFactor:d}=zW(n);zV(dP(n),r),JV(n),NW(n,d),qW(n,h),PW(n),QV(n),eU(n);const f=[];WW(n,f),cV(n,f),RW(n),s&&oV(n,a),sV(n,s),oU(n),LW(n,i),kV(n,{align:o,nodesep:u,edgesep:l,ranksep:c}),uU(n),aU(n),UW(n,f),rU(n),IW(n,i);const{width:g,height:p}=tU(n);return nU(n),iU(n),AW(n),{width:g,height:p}},WV=(n,e)=>{n.getAllNodes().forEach(t=>{const r=n.getNode(t.id);if(e.hasNode(t.id)){const i=e.getNode(t.id);r.data.fixorder=i.data._order,delete i.data._order}else delete r.data.fixorder})},VV=(n,e)=>{n.getAllNodes().forEach(t=>{var r;const i=n.getNode(t.id);if(i){const a=e.getNode(t.id);i.data.x=a.data.x,i.data.y=a.data.y,i.data._order=a.data.order,i.data._rank=a.data.rank,!((r=e.getChildren(t.id))===null||r===void 0)&&r.length&&(i.data.width=a.data.width,i.data.height=a.data.height)}}),n.getAllEdges().forEach(t=>{const r=n.getEdge(t.id),i=e.getEdge(t.id);r.data.points=i?i.data.points:[],i&&i.data.hasOwnProperty("x")&&(r.data.x=i.data.x,r.data.y=i.data.y)})},UV=["width","height","layer","fixorder"],HV={width:0,height:0},YV=["minlen","weight","width","height","labeloffset"],XV={minlen:1,weight:1,width:0,height:0,labeloffset:10,labelpos:"r"},kg=["labelpos"],KV=n=>{const e=new Xt({tree:[]});return n.getAllNodes().forEach(t=>{const r=J3(n.getNode(t.id).data),i=Object.assign(Object.assign({},HV),r),a=Z3(i,UV);e.hasNode(t.id)||e.addNode({id:t.id,data:Object.assign({},a)});const s=n.hasTreeStructure("combo")?n.getParent(t.id,"combo"):n.getParent(t.id);de(s)||(e.hasNode(s.id)||e.addNode(Object.assign({},s)),e.setParent(t.id,s.id))}),n.getAllEdges().forEach(t=>{const r=J3(n.getEdge(t.id).data),i={};kg==null||kg.forEach(a=>{r[a]!==void 0&&(i[a]=r[a])}),e.addEdge({id:t.id,source:t.source,target:t.target,data:Object.assign({},XV,Z3(r,YV),i)})}),e},ZV=(n,e)=>{const{ranksep:t=0,rankdir:r}=e;return n.getAllNodes().forEach(i=>{isNaN(i.data.layer)||i.data.layer||(i.data.layer=0)}),n.getAllEdges().forEach(i=>{var a;i.data.minlen*=2,((a=i.data.labelpos)===null||a===void 0?void 0:a.toLowerCase())!=="c"&&(r==="TB"||r==="BT"?i.data.width+=i.data.labeloffset:i.data.height+=i.data.labeloffset)}),t/2},JV=n=>{n.getAllEdges().forEach(e=>{if(e.data.width&&e.data.height){const t=n.getNode(e.source),r=n.getNode(e.target),i={e,rank:(r.data.rank-t.data.rank)/2+t.data.rank};vu(n,"edge-proxy",i,"_ep")}})},QV=n=>{let e=0;return n.getAllNodes().forEach(t=>{var r,i;t.data.borderTop&&(t.data.minRank=(r=n.getNode(t.data.borderTop))===null||r===void 0?void 0:r.data.rank,t.data.maxRank=(i=n.getNode(t.data.borderBottom))===null||i===void 0?void 0:i.data.rank,e=Math.max(e,t.data.maxRank||-1/0))}),e},eU=n=>{n.getAllNodes().forEach(e=>{e.data.dummy==="edge-proxy"&&(n.getEdge(e.data.e.id).data.labelRank=e.data.rank,n.removeNode(e.id))})},tU=(n,e)=>{let t,r=0,i,a=0;const{marginx:s=0,marginy:o=0}=e||{},u=l=>{if(!l.data)return;const c=l.data.x,h=l.data.y,d=l.data.width,f=l.data.height;!isNaN(c)&&!isNaN(d)&&(t===void 0&&(t=c-d/2),t=Math.min(t,c-d/2),r=Math.max(r,c+d/2)),!isNaN(h)&&!isNaN(f)&&(i===void 0&&(i=h-f/2),i=Math.min(i,h-f/2),a=Math.max(a,h+f/2))};return n.getAllNodes().forEach(l=>{u(l)}),n.getAllEdges().forEach(l=>{l!=null&&l.data.hasOwnProperty("x")&&u(l)}),t-=s,i-=o,n.getAllNodes().forEach(l=>{l.data.x-=t,l.data.y-=i}),n.getAllEdges().forEach(l=>{var c;(c=l.data.points)===null||c===void 0||c.forEach(h=>{h.x-=t,h.y-=i}),l.data.hasOwnProperty("x")&&(l.data.x-=t),l.data.hasOwnProperty("y")&&(l.data.y-=i)}),{width:r-t+s,height:a-i+o}},nU=n=>{n.getAllEdges().forEach(e=>{const t=n.getNode(e.source),r=n.getNode(e.target);let i,a;e.data.points?(i=e.data.points[0],a=e.data.points[e.data.points.length-1]):(e.data.points=[],i={x:r.data.x,y:r.data.y},a={x:t.data.x,y:t.data.y}),e.data.points.unshift($3(t.data,i)),e.data.points.push($3(r.data,a))})},rU=n=>{n.getAllEdges().forEach(e=>{if(e.data.hasOwnProperty("x"))switch((e.data.labelpos==="l"||e.data.labelpos==="r")&&(e.data.width-=e.data.labeloffset),e.data.labelpos){case"l":e.data.x-=e.data.width/2+e.data.labeloffset;break;case"r":e.data.x+=e.data.width/2+e.data.labeloffset;break}})},iU=n=>{n.getAllEdges().forEach(e=>{var t;e.data.reversed&&((t=e.data.points)===null||t===void 0||t.reverse())})},aU=n=>{n.getAllNodes().forEach(e=>{var t,r,i;if(!((t=n.getChildren(e.id))===null||t===void 0)&&t.length){const a=n.getNode(e.id),s=n.getNode(a.data.borderTop),o=n.getNode(a.data.borderBottom),u=n.getNode(a.data.borderLeft[((r=a.data.borderLeft)===null||r===void 0?void 0:r.length)-1]),l=n.getNode(a.data.borderRight[((i=a.data.borderRight)===null||i===void 0?void 0:i.length)-1]);a.data.width=Math.abs((l==null?void 0:l.data.x)-(u==null?void 0:u.data.x))||10,a.data.height=Math.abs((o==null?void 0:o.data.y)-(s==null?void 0:s.data.y))||10,a.data.x=((u==null?void 0:u.data.x)||0)+a.data.width/2,a.data.y=((s==null?void 0:s.data.y)||0)+a.data.height/2}}),n.getAllNodes().forEach(e=>{e.data.dummy==="border"&&n.removeNode(e.id)})},sU=n=>{n.getAllEdges().forEach(e=>{if(e.source===e.target){const t=n.getNode(e.source);t.data.selfEdges||(t.data.selfEdges=[]),t.data.selfEdges.push(e),n.removeEdge(e.id)}})},oU=n=>{const e=Pl(n);e==null||e.forEach(t=>{let r=0;t==null||t.forEach((i,a)=>{var s;const o=n.getNode(i);o.data.order=a+r,(s=o.data.selfEdges)===null||s===void 0||s.forEach(u=>{vu(n,"selfedge",{width:u.data.width,height:u.data.height,rank:o.data.rank,order:a+ ++r,e:u},"_se")}),delete o.data.selfEdges})})},uU=n=>{n.getAllNodes().forEach(e=>{const t=n.getNode(e.id);if(t.data.dummy==="selfedge"){const r=n.getNode(t.data.e.source),i=r.data.x+r.data.width/2,a=r.data.y,s=t.data.x-i,o=r.data.height/2;n.hasEdge(t.data.e.id)?n.updateEdgeData(t.data.e.id,t.data.e.data):n.addEdge({id:t.data.e.id,source:t.data.e.source,target:t.data.e.target,data:t.data.e.data}),n.removeNode(e.id),t.data.e.data.points=[{x:i+2*s/3,y:a-o},{x:i+5*s/6,y:a-o},{y:a,x:i+s},{x:i+5*s/6,y:a+o},{x:i+2*s/3,y:a+o}],t.data.e.data.x=t.data.x,t.data.e.data.y=t.data.y}})},Z3=(n,e)=>{const t={};return e==null||e.forEach(r=>{n[r]!==void 0&&(t[r]=+n[r])}),t},J3=(n={})=>{const e={};return Object.keys(n).forEach(t=>{e[t.toLowerCase()]=n[t]}),e},Qi=Array.isArray,AP=n=>{const e=[],t=n.length;for(let r=0;r<t;r+=1){e[r]=[];for(let i=0;i<t;i+=1)r===i?e[r][i]=0:n[r][i]===0||!n[r][i]?e[r][i]=1/0:e[r][i]=n[r][i]}for(let r=0;r<t;r+=1)for(let i=0;i<t;i+=1)for(let a=0;a<t;a+=1)e[i][a]>e[i][r]+e[r][a]&&(e[i][a]=e[i][r]+e[r][a]);return e},TP=(n,e)=>{const{nodes:t,edges:r}=n,i=[],a={};if(!t)throw new Error("invalid nodes data!");return t&&t.forEach((s,o)=>{a[s.id]=o;const u=[];i.push(u)}),r==null||r.forEach(s=>{const{source:o,target:u}=s,l=a[o],c=a[u];l===void 0||c===void 0||(i[l][c]=1,e||(i[c][l]=1))}),i},lU=(n,e)=>{const t=[];return n.forEach(r=>{const i=[];r.forEach(a=>{i.push(a*e)}),t.push(i)}),t},cU=n=>{let e=1/0,t=1/0,r=-1/0,i=-1/0;return n.forEach(a=>{let s=a.data.size;Qi(s)?s.length===1&&(s=[s[0],s[0]]):re(s)?s=[s,s]:(s===void 0||isNaN(s))&&(s=[30,30]);const o=[s[0]/2,s[1]/2],u=a.data.x-o[0],l=a.data.x+o[0],c=a.data.y-o[1],h=a.data.y+o[1];e>u&&(e=u),t>c&&(t=c),r<l&&(r=l),i<h&&(i=h)}),{minX:e,minY:t,maxX:r,maxY:i}},Q3=(n,e)=>Math.sqrt((n.x-e.x)*(n.x-e.x)+(n.y-e.y)*(n.y-e.y)),qb=(n,e,t,r="TB",i,a={})=>{if(!(e!=null&&e.length))return;const{stopBranchFn:s,stopAllFn:o}=a;for(let u=0;u<e.length;u++){const l=e[u];if(n.hasNode(l.id)&&!(s!=null&&s(l))){if(o!=null&&o(l))return;r==="TB"&&t(l),qb(n,n.getChildren(l.id,i),t,r,i,a),r!=="TB"&&t(l)}}},Gb=n=>{if(n===null)return n;if(n instanceof Date)return new Date(n.getTime());if(n instanceof Array){const e=[];return n.forEach(t=>{e.push(t)}),e.map(t=>Gb(t))}if(typeof n=="object"){const e={};return Object.keys(n).forEach(t=>{e[t]=Gb(n[t])}),e}return n},gr=(n,e)=>{const t=Gb(n);return t.data=t.data||{},e&&(re(t.data.x)||(t.data.x=Math.random()*e[0]),re(t.data.y)||(t.data.y=Math.random()*e[1])),t};function lc(n){if(!n)return[0,0,0];if(re(n))return[n,n,n];if(n.length===0)return[0,0,0];const[e,t=e,r=e]=n;return[e,t,r]}function Gs(n,e){let t;return se(e)?t=e:re(e)?t=()=>e:t=()=>n,t}function Mx(n,e,t=!0){return!e&&e!==0?r=>{const{size:i}=r.data||{};return i?Array.isArray(i)?t?Math.max(...i)||n:i:Nt(i)&&i.width&&i.height?t?Math.max(i.width,i.height)||n:[i.width,i.height]:i:n}:se(e)?e:re(e)?()=>e:Array.isArray(e)?()=>t?Math.max(...e)||n:e:Nt(e)&&e.width&&e.height?()=>t?Math.max(e.width,e.height)||n:[e.width,e.height]:()=>n}const Px=(n,e,t=10)=>{let r;const i=typeof e=="function"?e:()=>e||0;return n?Array.isArray(n)?r=s=>n:se(n)?r=n:r=s=>n:r=s=>{var o,u,l;if(!((o=s.data)===null||o===void 0)&&o.bboxSize)return(u=s.data)===null||u===void 0?void 0:u.bboxSize;if(!((l=s.data)===null||l===void 0)&&l.size){const c=s.data.size;return Array.isArray(c)?c:Nt(c)?[c.width,c.height]:c}return t},s=>{const o=r(s),u=i(s);return Math.max(...lc(o))+u}},hU={rankdir:"TB",nodesep:50,ranksep:50,edgeLabelSpace:!0,ranker:"tight-tree",controlPoints:!1,radial:!1,focusNode:null};class dU{constructor(e={}){this.options=e,this.id="antv-dagre",this.options=Object.assign(Object.assign({},hU),e)}execute(e,t){return Pe(this,void 0,void 0,function*(){return this.genericDagreLayout(!1,e,t)})}assign(e,t){return Pe(this,void 0,void 0,function*(){yield this.genericDagreLayout(!0,e,t)})}genericDagreLayout(e,t,r){return Pe(this,void 0,void 0,function*(){const i=Object.assign(Object.assign({},this.options),r),{nodeSize:a,align:s,rankdir:o="TB",ranksep:u,nodesep:l,ranksepFunc:c,nodesepFunc:h,edgeLabelSpace:d,ranker:f,nodeOrder:g,begin:p,controlPoints:v,radial:m,sortByCombo:y,preset:b}=i,x=new Xt({tree:[]}),w=Gs(u||50,c),E=Gs(l||50,h);let _=E,S=w;(o==="LR"||o==="RL")&&(_=w,S=E);const C=Mx(10,a,!1),k=t.getAllNodes(),A=t.getAllEdges();k.forEach(M=>{const F=lc(C(M)),j=S(M),B=_(M),$=F[0]+2*B,W=F[1]+2*j,Y=M.data.layer;re(Y)?x.addNode({id:M.id,data:{width:$,height:W,layer:Y}}):x.addNode({id:M.id,data:{width:$,height:W}})}),y&&(x.attachTreeStructure("combo"),k.forEach(M=>{const{parentId:F}=M.data;F!==void 0&&x.hasNode(F)&&x.setParent(M.id,F,"combo")})),A.forEach(M=>{x.addEdge({id:M.id,source:M.source,target:M.target,data:{weight:M.data.weight||1}})});let T;b!=null&&b.length&&(T=new Xt({nodes:b})),qV(x,{prevGraph:T,edgeLabelSpace:d,keepNodeOrder:!!g,nodeOrder:g||[],acyclicer:"greedy",ranker:f,rankdir:o,nodesep:l,align:s});const O=[0,0];if(p){let M=1/0,F=1/0;x.getAllNodes().forEach(j=>{M>j.data.x&&(M=j.data.x),F>j.data.y&&(F=j.data.y)}),x.getAllEdges().forEach(j=>{var B;(B=j.data.points)===null||B===void 0||B.forEach($=>{M>$.x&&(M=$.x),F>$.y&&(F=$.y)})}),O[0]=p[0]-M,O[1]=p[1]-F}const P=o==="LR"||o==="RL";if(!m){const M=new Set,j=o==="BT"||o==="RL"?(Y,K)=>K-Y:(Y,K)=>Y-K;x.getAllNodes().forEach(Y=>{Y.data.x=Y.data.x+O[0],Y.data.y=Y.data.y+O[1],M.add(P?Y.data.x:Y.data.y)});const B=Array.from(M).sort(j),$=P?(Y,K)=>Y.x!==K.x:(Y,K)=>Y.y!==K.y,W=P?(Y,K,ee)=>{const ie=Math.max(K.y,ee.y),_e=Math.min(K.y,ee.y);return Y.filter(Ae=>Ae.y<=ie&&Ae.y>=_e)}:(Y,K,ee)=>{const ie=Math.max(K.x,ee.x),_e=Math.min(K.x,ee.x);return Y.filter(Ae=>Ae.x<=ie&&Ae.x>=_e)};x.getAllEdges().forEach((Y,K)=>{var ee;d&&v&&Y.data.type!=="loop"&&(Y.data.controlPoints=fU((ee=Y.data.points)===null||ee===void 0?void 0:ee.map(({x:ie,y:_e})=>({x:ie+O[0],y:_e+O[1]})),x.getNode(Y.source),x.getNode(Y.target),B,P,$,W))})}let R=[];R=x.getAllNodes().map(M=>gr(M));const N=x.getAllEdges();return e&&(R.forEach(M=>{t.mergeNodeData(M.id,{x:M.data.x,y:M.data.y})}),N.forEach(M=>{t.mergeEdgeData(M.id,{controlPoints:M.data.controlPoints})})),{nodes:R,edges:N}})}}const fU=(n,e,t,r,i,a,s)=>{let o=(n==null?void 0:n.slice(1,n.length-1))||[];if(e&&t){let{x:u,y:l}=e.data,{x:c,y:h}=t.data;if(i&&(u=e.data.y,l=e.data.x,c=t.data.y,h=t.data.x),h!==l&&u!==c){const d=r.indexOf(l),f=r[d+1];if(f){const v=o[0],m=i?{x:(l+f)/2,y:(v==null?void 0:v.y)||c}:{x:(v==null?void 0:v.x)||c,y:(l+f)/2};(!v||a(v,m))&&o.unshift(m)}const g=r.indexOf(h),p=Math.abs(g-d);if(p===1)o=s(o,e.data,t.data),o.length||o.push(i?{x:(l+h)/2,y:u}:{x:u,y:(l+h)/2});else if(p>1){const v=r[g-1];if(v){const m=o[o.length-1],y=i?{x:(h+v)/2,y:(m==null?void 0:m.y)||c}:{x:(m==null?void 0:m.x)||u,y:(h+v)/2};(!m||a(m,y))&&o.push(y)}}}}return o},so=(n,e,t)=>{const r=n.getAllNodes(),i=n.getAllEdges();if(!(r!=null&&r.length))return{nodes:[],edges:i};if(r.length===1)return e&&n.mergeNodeData(r[0].id,{x:t[0],y:t[1]}),{nodes:[Object.assign(Object.assign({},r[0]),{data:Object.assign(Object.assign({},r[0].data),{x:t[0],y:t[1]})})],edges:i}},gU={radius:null,startRadius:null,endRadius:null,startAngle:0,endAngle:2*Math.PI,clockwise:!0,divisions:1,ordering:null,angleRatio:1};class pU{constructor(e={}){this.options=e,this.id="circular",this.options=Object.assign(Object.assign({},gU),e)}execute(e,t){return Pe(this,void 0,void 0,function*(){return this.genericCircularLayout(!1,e,t)})}assign(e,t){return Pe(this,void 0,void 0,function*(){yield this.genericCircularLayout(!0,e,t)})}genericCircularLayout(e,t,r){return Pe(this,void 0,void 0,function*(){const i=Object.assign(Object.assign({},this.options),r),{width:a,height:s,center:o,divisions:u,startAngle:l=0,endAngle:c=2*Math.PI,angleRatio:h,ordering:d,clockwise:f,nodeSpacing:g,nodeSize:p}=i,v=t.getAllNodes(),m=t.getAllEdges(),[y,b,x]=mU(a,s,o),w=v==null?void 0:v.length;if(!w||w===1)return so(t,e,x);const E=(c-l)/w;let{radius:_,startRadius:S,endRadius:C}=i;if(g){const P=Gs(10,g),R=Mx(10,p);let N=-1/0;v.forEach(M=>{const F=R(M);N<F&&(N=F)});let D=0;v.forEach((M,F)=>{F===0?D+=N||10:D+=(P(M)||0)+(N||10)}),_=D/(2*Math.PI)}else!_&&!S&&!C?_=Math.min(b,y)/2:!S&&C?S=C:S&&!C&&(C=S);const k=E*h;let A=[];d==="topology"?A=e_(t,v):d==="topology-directed"?A=e_(t,v,!0):d==="degree"?A=vU(t,v):A=v.map(P=>gr(P));const T=Math.ceil(w/u);for(let P=0;P<w;++P){let R=_;!R&&S!==null&&C!==null&&(R=S+P*(C-S)/(w-1)),R||(R=10+P*100/(w-1));let N=l+P%T*k+2*Math.PI/u*Math.floor(P/T);f||(N=c-P%T*k-2*Math.PI/u*Math.floor(P/T)),A[P].data.x=x[0]+Math.cos(N)*R,A[P].data.y=x[1]+Math.sin(N)*R}return e&&A.forEach(P=>{t.mergeNodeData(P.id,{x:P.data.x,y:P.data.y})}),{nodes:A,edges:m}})}}const e_=(n,e,t=!1)=>{const r=[gr(e[0])],i={},a=e.length;i[e[0].id]=!0;let s=0;return e.forEach((o,u)=>{if(u!==0)if((u===a-1||n.getDegree(o.id,"both")!==n.getDegree(e[u+1].id,"both")||n.areNeighbors(r[s].id,o.id))&&!i[o.id])r.push(gr(o)),i[o.id]=!0,s++;else{const l=t?n.getSuccessors(r[s].id):n.getNeighbors(r[s].id);let c=!1;for(let d=0;d<l.length;d++){const f=l[d];if(n.getDegree(f.id)===n.getDegree(o.id)&&!i[f.id]){r.push(gr(f)),i[f.id]=!0,c=!0;break}}let h=0;for(;!c&&(i[e[h].id]||(r.push(gr(e[h])),i[e[h].id]=!0,c=!0),h++,h!==a););}}),r};function vU(n,e){const t=[];return e.forEach((r,i)=>{t.push(gr(r))}),t.sort((r,i)=>n.getDegree(r.id,"both")-n.getDegree(i.id,"both")),t}const mU=(n,e,t)=>{let r=n,i=e,a=t;return!r&&typeof window<"u"&&(r=window.innerWidth),!i&&typeof window<"u"&&(i=window.innerHeight),a||(a=[r/2,i/2]),[r,i,a]},yU={nodeSize:30,nodeSpacing:10,preventOverlap:!1,sweep:void 0,equidistant:!1,startAngle:3/2*Math.PI,clockwise:!0,maxLevelDiff:void 0,sortBy:"degree"};class Wb{constructor(e={}){this.options=e,this.id="concentric",this.options=Object.assign(Object.assign({},yU),e)}execute(e,t){return Pe(this,void 0,void 0,function*(){return this.genericConcentricLayout(!1,e,t)})}assign(e,t){return Pe(this,void 0,void 0,function*(){yield this.genericConcentricLayout(!0,e,t)})}genericConcentricLayout(e,t,r){return Pe(this,void 0,void 0,function*(){const i=Object.assign(Object.assign({},this.options),r),{center:a,width:s,height:o,sortBy:u,maxLevelDiff:l,sweep:c,clockwise:h,equidistant:d,preventOverlap:f,startAngle:g=3/2*Math.PI,nodeSize:p,nodeSpacing:v}=i,m=t.getAllNodes(),y=t.getAllEdges(),b=!s&&typeof window<"u"?window.innerWidth:s,x=!o&&typeof window<"u"?window.innerHeight:o,w=a||[b/2,x/2];if(!(m!=null&&m.length)||m.length===1)return so(t,e,w);const E=[];let _,S=0;Qi(p)?_=Math.max(p[0],p[1]):se(p)?(_=-1/0,m.forEach(M=>{const F=Math.max(...lc(p(M)));F>_&&(_=F)})):_=p,Qi(v)?S=Math.max(v[0],v[1]):re(v)&&(S=v),m.forEach(M=>{const F=gr(M);E.push(F);let j=_;const{data:B}=F;Qi(B.size)?j=Math.max(B.size[0],B.size[1]):re(B.size)?j=B.size:Nt(B.size)&&(j=Math.max(B.size.width,B.size.height)),_=Math.max(_,j),se(v)&&(S=Math.max(v(M),S))});const C={};E.forEach((M,F)=>{C[M.id]=F});let k=u;(!qe(k)||E[0].data[k]===void 0)&&(k="degree"),k==="degree"?E.sort((M,F)=>t.getDegree(F.id,"both")-t.getDegree(M.id,"both")):E.sort((M,F)=>F.data[k]-M.data[k]);const A=E[0],T=(l||(k==="degree"?t.getDegree(A.id,"both"):A.data[k]))/4,O=[{nodes:[]}];let P=O[0];E.forEach(M=>{if(P.nodes.length>0){const F=Math.abs(k==="degree"?t.getDegree(P.nodes[0].id,"both")-t.getDegree(M.id,"both"):P.nodes[0].data[k]-M.data[k]);T&&F>=T&&(P={nodes:[]},O.push(P))}P.nodes.push(M)});let R=_+S;if(!f){const M=O.length>0&&O[0].nodes.length>1,j=(Math.min(b,x)/2-R)/(O.length+(M?1:0));R=Math.min(R,j)}let N=0;if(O.forEach(M=>{const F=c===void 0?2*Math.PI-2*Math.PI/M.nodes.length:c;if(M.dTheta=F/Math.max(1,M.nodes.length-1),M.nodes.length>1&&f){const j=Math.cos(M.dTheta)-Math.cos(0),B=Math.sin(M.dTheta)-Math.sin(0),$=Math.sqrt(R*R/(j*j+B*B));N=Math.max($,N)}M.r=N,N+=R}),d){let M=0,F=0;for(let j=0;j<O.length;j++){const $=(O[j].r||0)-F;M=Math.max(M,$)}F=0,O.forEach((j,B)=>{B===0&&(F=j.r||0),j.r=F,F+=M})}return O.forEach(M=>{const F=M.dTheta||0,j=M.r||0;M.nodes.forEach((B,$)=>{const W=g+(h?1:-1)*F*$;B.data.x=w[0]+j*Math.cos(W),B.data.y=w[1]+j*Math.sin(W)})}),e&&E.forEach(M=>t.mergeNodeData(M.id,{x:M.data.x,y:M.data.y})),{nodes:E,edges:y}})}}function bU(n){const e=+this._x.call(null,n),t=+this._y.call(null,n);return OP(this.cover(e,t),e,t,n)}function OP(n,e,t,r){if(isNaN(e)||isNaN(t))return n;var i,a=n._root,s={data:r},o=n._x0,u=n._y0,l=n._x1,c=n._y1,h,d,f,g,p,v,m,y;if(!a)return n._root=s,n;for(;a.length;)if((p=e>=(h=(o+l)/2))?o=h:l=h,(v=t>=(d=(u+c)/2))?u=d:c=d,i=a,!(a=a[m=v<<1|p]))return i[m]=s,n;if(f=+n._x.call(null,a.data),g=+n._y.call(null,a.data),e===f&&t===g)return s.next=a,i?i[m]=s:n._root=s,n;do i=i?i[m]=new Array(4):n._root=new Array(4),(p=e>=(h=(o+l)/2))?o=h:l=h,(v=t>=(d=(u+c)/2))?u=d:c=d;while((m=v<<1|p)===(y=(g>=d)<<1|f>=h));return i[y]=a,i[m]=s,n}function xU(n){var e,t,r=n.length,i,a,s=new Array(r),o=new Array(r),u=1/0,l=1/0,c=-1/0,h=-1/0;for(t=0;t<r;++t)isNaN(i=+this._x.call(null,e=n[t]))||isNaN(a=+this._y.call(null,e))||(s[t]=i,o[t]=a,i<u&&(u=i),i>c&&(c=i),a<l&&(l=a),a>h&&(h=a));if(u>c||l>h)return this;for(this.cover(u,l).cover(c,h),t=0;t<r;++t)OP(this,s[t],o[t],n[t]);return this}function wU(n,e){if(isNaN(n=+n)||isNaN(e=+e))return this;var t=this._x0,r=this._y0,i=this._x1,a=this._y1;if(isNaN(t))i=(t=Math.floor(n))+1,a=(r=Math.floor(e))+1;else{for(var s=i-t||1,o=this._root,u,l;t>n||n>=i||r>e||e>=a;)switch(l=(e<r)<<1|n<t,u=new Array(4),u[l]=o,o=u,s*=2,l){case 0:i=t+s,a=r+s;break;case 1:t=i-s,a=r+s;break;case 2:i=t+s,r=a-s;break;case 3:t=i-s,r=a-s;break}this._root&&this._root.length&&(this._root=o)}return this._x0=t,this._y0=r,this._x1=i,this._y1=a,this}function EU(){var n=[];return this.visit(function(e){if(!e.length)do n.push(e.data);while(e=e.next)}),n}function _U(n){return arguments.length?this.cover(+n[0][0],+n[0][1]).cover(+n[1][0],+n[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]}function Bn(n,e,t,r,i){this.node=n,this.x0=e,this.y0=t,this.x1=r,this.y1=i}function SU(n,e,t){var r,i=this._x0,a=this._y0,s,o,u,l,c=this._x1,h=this._y1,d=[],f=this._root,g,p;for(f&&d.push(new Bn(f,i,a,c,h)),t==null?t=1/0:(i=n-t,a=e-t,c=n+t,h=e+t,t*=t);g=d.pop();)if(!(!(f=g.node)||(s=g.x0)>c||(o=g.y0)>h||(u=g.x1)<i||(l=g.y1)<a))if(f.length){var v=(s+u)/2,m=(o+l)/2;d.push(new Bn(f[3],v,m,u,l),new Bn(f[2],s,m,v,l),new Bn(f[1],v,o,u,m),new Bn(f[0],s,o,v,m)),(p=(e>=m)<<1|n>=v)&&(g=d[d.length-1],d[d.length-1]=d[d.length-1-p],d[d.length-1-p]=g)}else{var y=n-+this._x.call(null,f.data),b=e-+this._y.call(null,f.data),x=y*y+b*b;if(x<t){var w=Math.sqrt(t=x);i=n-w,a=e-w,c=n+w,h=e+w,r=f.data}}return r}function kU(n){if(isNaN(c=+this._x.call(null,n))||isNaN(h=+this._y.call(null,n)))return this;var e,t=this._root,r,i,a,s=this._x0,o=this._y0,u=this._x1,l=this._y1,c,h,d,f,g,p,v,m;if(!t)return this;if(t.length)for(;;){if((g=c>=(d=(s+u)/2))?s=d:u=d,(p=h>=(f=(o+l)/2))?o=f:l=f,e=t,!(t=t[v=p<<1|g]))return this;if(!t.length)break;(e[v+1&3]||e[v+2&3]||e[v+3&3])&&(r=e,m=v)}for(;t.data!==n;)if(i=t,!(t=t.next))return this;return(a=t.next)&&delete t.next,i?(a?i.next=a:delete i.next,this):e?(a?e[v]=a:delete e[v],(t=e[0]||e[1]||e[2]||e[3])&&t===(e[3]||e[2]||e[1]||e[0])&&!t.length&&(r?r[m]=t:this._root=t),this):(this._root=a,this)}function CU(n){for(var e=0,t=n.length;e<t;++e)this.remove(n[e]);return this}function AU(){return this._root}function TU(){var n=0;return this.visit(function(e){if(!e.length)do++n;while(e=e.next)}),n}function OU(n){var e=[],t,r=this._root,i,a,s,o,u;for(r&&e.push(new Bn(r,this._x0,this._y0,this._x1,this._y1));t=e.pop();)if(!n(r=t.node,a=t.x0,s=t.y0,o=t.x1,u=t.y1)&&r.length){var l=(a+o)/2,c=(s+u)/2;(i=r[3])&&e.push(new Bn(i,l,c,o,u)),(i=r[2])&&e.push(new Bn(i,a,c,l,u)),(i=r[1])&&e.push(new Bn(i,l,s,o,c)),(i=r[0])&&e.push(new Bn(i,a,s,l,c))}return this}function MU(n){var e=[],t=[],r;for(this._root&&e.push(new Bn(this._root,this._x0,this._y0,this._x1,this._y1));r=e.pop();){var i=r.node;if(i.length){var a,s=r.x0,o=r.y0,u=r.x1,l=r.y1,c=(s+u)/2,h=(o+l)/2;(a=i[0])&&e.push(new Bn(a,s,o,c,h)),(a=i[1])&&e.push(new Bn(a,c,o,u,h)),(a=i[2])&&e.push(new Bn(a,s,h,c,l)),(a=i[3])&&e.push(new Bn(a,c,h,u,l))}t.push(r)}for(;r=t.pop();)n(r.node,r.x0,r.y0,r.x1,r.y1);return this}function PU(n){return n[0]}function NU(n){return arguments.length?(this._x=n,this):this._x}function DU(n){return n[1]}function RU(n){return arguments.length?(this._y=n,this):this._y}function Rf(n,e,t){var r=new Nx(e??PU,t??DU,NaN,NaN,NaN,NaN);return n==null?r:r.addAll(n)}function Nx(n,e,t,r,i,a){this._x=n,this._y=e,this._x0=t,this._y0=r,this._x1=i,this._y1=a,this._root=void 0}function t_(n){for(var e={data:n.data},t=e;n=n.next;)t=t.next={data:n.data};return e}var qn=Rf.prototype=Nx.prototype;qn.copy=function(){var n=new Nx(this._x,this._y,this._x0,this._y0,this._x1,this._y1),e=this._root,t,r;if(!e)return n;if(!e.length)return n._root=t_(e),n;for(t=[{source:e,target:n._root=new Array(4)}];e=t.pop();)for(var i=0;i<4;++i)(r=e.source[i])&&(r.length?t.push({source:r,target:e.target[i]=new Array(4)}):e.target[i]=t_(r));return n};qn.add=bU;qn.addAll=xU;qn.cover=wU;qn.data=EU;qn.extent=_U;qn.find=SU;qn.remove=kU;qn.removeAll=CU;qn.root=AU;qn.size=TU;qn.visit=OU;qn.visitAfter=MU;qn.x=NU;qn.y=RU;function LU(n){const e=+this._x.call(null,n),t=+this._y.call(null,n),r=+this._z.call(null,n);return MP(this.cover(e,t,r),e,t,r,n)}function MP(n,e,t,r,i){if(isNaN(e)||isNaN(t)||isNaN(r))return n;var a,s=n._root,o={data:i},u=n._x0,l=n._y0,c=n._z0,h=n._x1,d=n._y1,f=n._z1,g,p,v,m,y,b,x,w,E,_,S;if(!s)return n._root=o,n;for(;s.length;)if((x=e>=(g=(u+h)/2))?u=g:h=g,(w=t>=(p=(l+d)/2))?l=p:d=p,(E=r>=(v=(c+f)/2))?c=v:f=v,a=s,!(s=s[_=E<<2|w<<1|x]))return a[_]=o,n;if(m=+n._x.call(null,s.data),y=+n._y.call(null,s.data),b=+n._z.call(null,s.data),e===m&&t===y&&r===b)return o.next=s,a?a[_]=o:n._root=o,n;do a=a?a[_]=new Array(8):n._root=new Array(8),(x=e>=(g=(u+h)/2))?u=g:h=g,(w=t>=(p=(l+d)/2))?l=p:d=p,(E=r>=(v=(c+f)/2))?c=v:f=v;while((_=E<<2|w<<1|x)===(S=(b>=v)<<2|(y>=p)<<1|m>=g));return a[S]=s,a[_]=o,n}function IU(n){Array.isArray(n)||(n=Array.from(n));const e=n.length,t=new Float64Array(e),r=new Float64Array(e),i=new Float64Array(e);let a=1/0,s=1/0,o=1/0,u=-1/0,l=-1/0,c=-1/0;for(let h=0,d,f,g,p;h<e;++h)isNaN(f=+this._x.call(null,d=n[h]))||isNaN(g=+this._y.call(null,d))||isNaN(p=+this._z.call(null,d))||(t[h]=f,r[h]=g,i[h]=p,f<a&&(a=f),f>u&&(u=f),g<s&&(s=g),g>l&&(l=g),p<o&&(o=p),p>c&&(c=p));if(a>u||s>l||o>c)return this;this.cover(a,s,o).cover(u,l,c);for(let h=0;h<e;++h)MP(this,t[h],r[h],i[h],n[h]);return this}function FU(n,e,t){if(isNaN(n=+n)||isNaN(e=+e)||isNaN(t=+t))return this;var r=this._x0,i=this._y0,a=this._z0,s=this._x1,o=this._y1,u=this._z1;if(isNaN(r))s=(r=Math.floor(n))+1,o=(i=Math.floor(e))+1,u=(a=Math.floor(t))+1;else{for(var l=s-r||1,c=this._root,h,d;r>n||n>=s||i>e||e>=o||a>t||t>=u;)switch(d=(t<a)<<2|(e<i)<<1|n<r,h=new Array(8),h[d]=c,c=h,l*=2,d){case 0:s=r+l,o=i+l,u=a+l;break;case 1:r=s-l,o=i+l,u=a+l;break;case 2:s=r+l,i=o-l,u=a+l;break;case 3:r=s-l,i=o-l,u=a+l;break;case 4:s=r+l,o=i+l,a=u-l;break;case 5:r=s-l,o=i+l,a=u-l;break;case 6:s=r+l,i=o-l,a=u-l;break;case 7:r=s-l,i=o-l,a=u-l;break}this._root&&this._root.length&&(this._root=c)}return this._x0=r,this._y0=i,this._z0=a,this._x1=s,this._y1=o,this._z1=u,this}function BU(){var n=[];return this.visit(function(e){if(!e.length)do n.push(e.data);while(e=e.next)}),n}function zU(n){return arguments.length?this.cover(+n[0][0],+n[0][1],+n[0][2]).cover(+n[1][0],+n[1][1],+n[1][2]):isNaN(this._x0)?void 0:[[this._x0,this._y0,this._z0],[this._x1,this._y1,this._z1]]}function it(n,e,t,r,i,a,s){this.node=n,this.x0=e,this.y0=t,this.z0=r,this.x1=i,this.y1=a,this.z1=s}function $U(n,e,t,r){var i,a=this._x0,s=this._y0,o=this._z0,u,l,c,h,d,f,g=this._x1,p=this._y1,v=this._z1,m=[],y=this._root,b,x;for(y&&m.push(new it(y,a,s,o,g,p,v)),r==null?r=1/0:(a=n-r,s=e-r,o=t-r,g=n+r,p=e+r,v=t+r,r*=r);b=m.pop();)if(!(!(y=b.node)||(u=b.x0)>g||(l=b.y0)>p||(c=b.z0)>v||(h=b.x1)<a||(d=b.y1)<s||(f=b.z1)<o))if(y.length){var w=(u+h)/2,E=(l+d)/2,_=(c+f)/2;m.push(new it(y[7],w,E,_,h,d,f),new it(y[6],u,E,_,w,d,f),new it(y[5],w,l,_,h,E,f),new it(y[4],u,l,_,w,E,f),new it(y[3],w,E,c,h,d,_),new it(y[2],u,E,c,w,d,_),new it(y[1],w,l,c,h,E,_),new it(y[0],u,l,c,w,E,_)),(x=(t>=_)<<2|(e>=E)<<1|n>=w)&&(b=m[m.length-1],m[m.length-1]=m[m.length-1-x],m[m.length-1-x]=b)}else{var S=n-+this._x.call(null,y.data),C=e-+this._y.call(null,y.data),k=t-+this._z.call(null,y.data),A=S*S+C*C+k*k;if(A<r){var T=Math.sqrt(r=A);a=n-T,s=e-T,o=t-T,g=n+T,p=e+T,v=t+T,i=y.data}}return i}const jU=(n,e,t,r,i,a)=>Math.sqrt((n-r)**2+(e-i)**2+(t-a)**2);function qU(n,e,t,r){const i=[],a=n-r,s=e-r,o=t-r,u=n+r,l=e+r,c=t+r;return this.visit((h,d,f,g,p,v,m)=>{if(!h.length)do{const y=h.data;jU(n,e,t,this._x(y),this._y(y),this._z(y))<=r&&i.push(y)}while(h=h.next);return d>u||f>l||g>c||p<a||v<s||m<o}),i}function GU(n){if(isNaN(d=+this._x.call(null,n))||isNaN(f=+this._y.call(null,n))||isNaN(g=+this._z.call(null,n)))return this;var e,t=this._root,r,i,a,s=this._x0,o=this._y0,u=this._z0,l=this._x1,c=this._y1,h=this._z1,d,f,g,p,v,m,y,b,x,w,E;if(!t)return this;if(t.length)for(;;){if((y=d>=(p=(s+l)/2))?s=p:l=p,(b=f>=(v=(o+c)/2))?o=v:c=v,(x=g>=(m=(u+h)/2))?u=m:h=m,e=t,!(t=t[w=x<<2|b<<1|y]))return this;if(!t.length)break;(e[w+1&7]||e[w+2&7]||e[w+3&7]||e[w+4&7]||e[w+5&7]||e[w+6&7]||e[w+7&7])&&(r=e,E=w)}for(;t.data!==n;)if(i=t,!(t=t.next))return this;return(a=t.next)&&delete t.next,i?(a?i.next=a:delete i.next,this):e?(a?e[w]=a:delete e[w],(t=e[0]||e[1]||e[2]||e[3]||e[4]||e[5]||e[6]||e[7])&&t===(e[7]||e[6]||e[5]||e[4]||e[3]||e[2]||e[1]||e[0])&&!t.length&&(r?r[E]=t:this._root=t),this):(this._root=a,this)}function WU(n){for(var e=0,t=n.length;e<t;++e)this.remove(n[e]);return this}function VU(){return this._root}function UU(){var n=0;return this.visit(function(e){if(!e.length)do++n;while(e=e.next)}),n}function HU(n){var e=[],t,r=this._root,i,a,s,o,u,l,c;for(r&&e.push(new it(r,this._x0,this._y0,this._z0,this._x1,this._y1,this._z1));t=e.pop();)if(!n(r=t.node,a=t.x0,s=t.y0,o=t.z0,u=t.x1,l=t.y1,c=t.z1)&&r.length){var h=(a+u)/2,d=(s+l)/2,f=(o+c)/2;(i=r[7])&&e.push(new it(i,h,d,f,u,l,c)),(i=r[6])&&e.push(new it(i,a,d,f,h,l,c)),(i=r[5])&&e.push(new it(i,h,s,f,u,d,c)),(i=r[4])&&e.push(new it(i,a,s,f,h,d,c)),(i=r[3])&&e.push(new it(i,h,d,o,u,l,f)),(i=r[2])&&e.push(new it(i,a,d,o,h,l,f)),(i=r[1])&&e.push(new it(i,h,s,o,u,d,f)),(i=r[0])&&e.push(new it(i,a,s,o,h,d,f))}return this}function YU(n){var e=[],t=[],r;for(this._root&&e.push(new it(this._root,this._x0,this._y0,this._z0,this._x1,this._y1,this._z1));r=e.pop();){var i=r.node;if(i.length){var a,s=r.x0,o=r.y0,u=r.z0,l=r.x1,c=r.y1,h=r.z1,d=(s+l)/2,f=(o+c)/2,g=(u+h)/2;(a=i[0])&&e.push(new it(a,s,o,u,d,f,g)),(a=i[1])&&e.push(new it(a,d,o,u,l,f,g)),(a=i[2])&&e.push(new it(a,s,f,u,d,c,g)),(a=i[3])&&e.push(new it(a,d,f,u,l,c,g)),(a=i[4])&&e.push(new it(a,s,o,g,d,f,h)),(a=i[5])&&e.push(new it(a,d,o,g,l,f,h)),(a=i[6])&&e.push(new it(a,s,f,g,d,c,h)),(a=i[7])&&e.push(new it(a,d,f,g,l,c,h))}t.push(r)}for(;r=t.pop();)n(r.node,r.x0,r.y0,r.z0,r.x1,r.y1,r.z1);return this}function XU(n){return n[0]}function KU(n){return arguments.length?(this._x=n,this):this._x}function ZU(n){return n[1]}function JU(n){return arguments.length?(this._y=n,this):this._y}function QU(n){return n[2]}function eH(n){return arguments.length?(this._z=n,this):this._z}function PP(n,e,t,r){var i=new Dx(e??XU,t??ZU,r??QU,NaN,NaN,NaN,NaN,NaN,NaN);return n==null?i:i.addAll(n)}function Dx(n,e,t,r,i,a,s,o,u){this._x=n,this._y=e,this._z=t,this._x0=r,this._y0=i,this._z0=a,this._x1=s,this._y1=o,this._z1=u,this._root=void 0}function n_(n){for(var e={data:n.data},t=e;n=n.next;)t=t.next={data:n.data};return e}var xn=PP.prototype=Dx.prototype;xn.copy=function(){var n=new Dx(this._x,this._y,this._z,this._x0,this._y0,this._z0,this._x1,this._y1,this._z1),e=this._root,t,r;if(!e)return n;if(!e.length)return n._root=n_(e),n;for(t=[{source:e,target:n._root=new Array(8)}];e=t.pop();)for(var i=0;i<8;++i)(r=e.source[i])&&(r.length?t.push({source:r,target:e.target[i]=new Array(8)}):e.target[i]=n_(r));return n};xn.add=LU;xn.addAll=IU;xn.cover=FU;xn.data=BU;xn.extent=zU;xn.find=$U;xn.findAllWithinRadius=qU;xn.remove=GU;xn.removeAll=WU;xn.root=VU;xn.size=UU;xn.visit=HU;xn.visitAfter=YU;xn.x=KU;xn.y=JU;xn.z=eH;const tH=.81,Cg=.1;function nH(n,e,t,r,i=2){const a=e/t,s=n.getAllNodes(),o=s.map((c,h)=>{const{nodeStrength:d,x:f,y:g,z:p,size:v}=c.data;return{x:f,y:g,z:p,size:v,index:h,id:c.id,vx:0,vy:0,vz:0,weight:a*d}}),u=(i===2?Rf(o,c=>c.x,c=>c.y):PP(o,c=>c.x,c=>c.y,c=>c.z)).visitAfter(rH),l=new Map;return o.forEach(c=>{l.set(c.id,c),aH(c,u,i)}),o.map((c,h)=>{const{id:d,data:f}=s[h],{mass:g=1}=f;r[d]={x:c.vx/g,y:c.vy/g,z:c.vz/g}}),r}function rH(n){let e=0,t=0,r=0,i=0,a=0;const s=n.length;if(s){for(let o=0;o<s;o++){const u=n[o];u&&u.weight&&(e+=u.weight,t+=u.x*u.weight,r+=u.y*u.weight,i+=u.z*u.weight,a+=u.size*u.weight)}n.x=t/e,n.y=r/e,n.z=i/e,n.size=a/e,n.weight=e}else{const o=n;n.x=o.data.x,n.y=o.data.y,n.z=o.data.z,n.size=o.data.size,n.weight=o.data.weight}}const iH=(n,e,t,r,i,a,s)=>{var o;if(((o=n.data)===null||o===void 0?void 0:o.id)===a.id)return;const u=[t,r,i][s-1],l=a.x-n.x||Cg,c=a.y-n.y||Cg,h=a.z-n.z||Cg,d=[l,c,h],f=u-e;let g=0;for(let m=0;m<s;m++)g+=d[m]*d[m];const v=Math.sqrt(g)*g;if(f*f*tH<g){const m=n.weight/v;return a.vx+=l*m,a.vy+=c*m,a.vz+=h*m,!0}if(n.length)return!1;if(n.data!==a){const m=n.data.weight/v;a.vx+=l*m,a.vy+=c*m,a.vz+=h*m}};function aH(n,e,t){e.visit((r,i,a,s,o)=>iH(r,i,a,s,o,n,t))}const sH={dimensions:2,maxIteration:500,gravity:10,factor:1,edgeStrength:50,nodeStrength:1e3,coulombDisScale:.005,damping:.9,maxSpeed:200,minMovement:.4,interval:.02,linkDistance:200,clusterNodeStrength:20,preventOverlap:!0,distanceThresholdMode:"mean"};class NP{constructor(e={}){this.options=e,this.id="force",this.timeInterval=0,this.judgingDistance=0,this.running=!1,this.options=Object.assign(Object.assign({},sH),e)}execute(e,t){return Pe(this,void 0,void 0,function*(){return this.genericForceLayout(!1,e,t)})}assign(e,t){return Pe(this,void 0,void 0,function*(){yield this.genericForceLayout(!0,e,t)})}stop(){this.timeInterval&&typeof window<"u"&&window.clearInterval(this.timeInterval),this.running=!1}tick(e=this.options.maxIteration||1){if(this.lastResult)return this.lastResult;for(let r=0;(this.judgingDistance>this.lastOptions.minMovement||r<1)&&r<e;r++)this.runOneStep(this.lastCalcGraph,this.lastGraph,r,this.lastVelMap,this.lastOptions),this.updatePosition(this.lastGraph,this.lastCalcGraph,this.lastVelMap,this.lastOptions);const t={nodes:this.lastLayoutNodes,edges:this.lastLayoutEdges};return this.lastAssign&&t.nodes.forEach(r=>this.lastGraph.mergeNodeData(r.id,{x:r.data.x,y:r.data.y,z:this.options.dimensions===3?r.data.z:void 0})),t}genericForceLayout(e,t,r){return Pe(this,void 0,void 0,function*(){const i=Object.assign(Object.assign({},this.options),r),a=t.getAllNodes(),s=t.getAllEdges(),o=this.formatOptions(i,t),{dimensions:u,width:l,height:c,nodeSize:h,getMass:d,nodeStrength:f,edgeStrength:g,linkDistance:p}=o,v=a.map((S,C)=>Object.assign(Object.assign({},S),{data:Object.assign(Object.assign({},S.data),{x:re(S.data.x)?S.data.x:Math.random()*l,y:re(S.data.y)?S.data.y:Math.random()*c,z:re(S.data.z)?S.data.z:Math.random()*Math.sqrt(l*c),size:h(S)||30,mass:d(S),nodeStrength:f(S)})})),m=s.map(S=>Object.assign(Object.assign({},S),{data:Object.assign(Object.assign({},S.data),{edgeStrength:g(S),linkDistance:p(S,t.getNode(S.source),t.getNode(S.target))})}));if(!(a!=null&&a.length))return this.lastResult={nodes:[],edges:s},{nodes:[],edges:s};const y={};a.forEach((S,C)=>{y[S.id]={x:0,y:0,z:0}});const b=new Xt({nodes:v,edges:m});this.formatCentripetal(o,b);const{maxIteration:x,minMovement:w,onTick:E}=o;if(this.lastLayoutNodes=v,this.lastLayoutEdges=m,this.lastAssign=e,this.lastGraph=t,this.lastCalcGraph=b,this.lastOptions=o,this.lastVelMap=y,typeof window>"u")return;let _=0;return new Promise(S=>{this.timeInterval=window.setInterval(()=>{(!a||!this.running)&&S({nodes:Ag(t,v),edges:s}),this.runOneStep(b,t,_,y,o),this.updatePosition(t,b,y,o),e&&v.forEach(C=>t.mergeNodeData(C.id,{x:C.data.x,y:C.data.y,z:u===3?C.data.z:void 0})),E==null||E({nodes:Ag(t,v),edges:s}),_++,(_>=x||this.judgingDistance<w)&&(window.clearInterval(this.timeInterval),S({nodes:Ag(t,v),edges:s}))},0),this.running=!0})})}formatOptions(e,t){const r=Object.assign({},e),{width:i,height:a,getMass:s}=e;r.width=!i&&typeof window<"u"?window.innerWidth:i,r.height=!a&&typeof window<"u"?window.innerHeight:a,e.center||(r.center=[r.width/2,r.height/2]),s||(r.getMass=u=>{let l=1;re(u==null?void 0:u.data.mass)&&(l=u==null?void 0:u.data.mass);const c=t.getDegree(u.id,"both");return!c||c<5?l:c*5*l}),r.nodeSize=Px(e.nodeSize,e.nodeSpacing);const o=e.linkDistance?Gs(1,e.linkDistance):u=>1+r.nodeSize(t.getNode(u.source))+r.nodeSize(t.getNode(u.target));return r.linkDistance=o,r.nodeStrength=Gs(1,e.nodeStrength),r.edgeStrength=Gs(1,e.edgeStrength),r}formatCentripetal(e,t){const{dimensions:r,centripetalOptions:i,center:a,clusterNodeStrength:s,leafCluster:o,clustering:u,nodeClusterBy:l}=e,c=t.getAllNodes(),h=i||{leaf:2,single:2,others:1,center:m=>({x:a[0],y:a[1],z:r===3?a[2]:void 0})};typeof s!="function"&&(e.clusterNodeStrength=m=>s);let d,f;if(o&&l&&(d=r_(t,l),f=Array.from(new Set(c==null?void 0:c.map(m=>m.data[l])))||[],e.centripetalOptions=Object.assign(h,{single:100,leaf:m=>{const{siblingLeaves:y,sameTypeLeaves:b}=d[m.id]||{};return(b==null?void 0:b.length)===(y==null?void 0:y.length)||(f==null?void 0:f.length)===1?1:e.clusterNodeStrength(m)},others:1,center:m=>{const y=t.getDegree(m.id,"both");if(!y)return{x:100,y:100,z:0};let b;if(y===1){const{sameTypeLeaves:x=[]}=d[m.id]||{};x.length===1?b=void 0:x.length>1&&(b=i_(x))}else b=void 0;return{x:b==null?void 0:b.x,y:b==null?void 0:b.y,z:b==null?void 0:b.z}}})),u&&l){d||(d=r_(t,l)),f||(f=Array.from(new Set(c.map(y=>y.data[l])))),f=f.filter(y=>y!==void 0);const m={};f.forEach(y=>{const b=c.filter(x=>x.data[l]===y).map(x=>t.getNode(x.id));m[y]=i_(b)}),e.centripetalOptions=Object.assign(h,{single:y=>e.clusterNodeStrength(y),leaf:y=>e.clusterNodeStrength(y),others:y=>e.clusterNodeStrength(y),center:y=>{const b=m[y.data[l]];return{x:b==null?void 0:b.x,y:b==null?void 0:b.y,z:b==null?void 0:b.z}}})}const{leaf:g,single:p,others:v}=e.centripetalOptions||{};g&&typeof g!="function"&&(e.centripetalOptions.leaf=()=>g),p&&typeof p!="function"&&(e.centripetalOptions.single=()=>p),v&&typeof v!="function"&&(e.centripetalOptions.others=()=>v)}runOneStep(e,t,r,i,a){const s={},o=e.getAllNodes(),u=e.getAllEdges();if(!(o!=null&&o.length))return;const{monitor:l}=a;if(this.calRepulsive(e,s,a),u&&this.calAttractive(e,s,a),this.calGravity(e,t,s,a),this.updateVelocity(e,s,i,a),l){const c=this.calTotalEnergy(s,o);l({energy:c,nodes:t.getAllNodes(),edges:t.getAllEdges(),iterations:r})}}calTotalEnergy(e,t){if(!(t!=null&&t.length))return 0;let r=0;return t.forEach((i,a)=>{const s=e[i.id].x,o=e[i.id].y,u=this.options.dimensions===3?e[i.id].z:0,l=s*s+o*o+u*u,{mass:c=1}=i.data;r+=c*l*.5}),r}calRepulsive(e,t,r){const{dimensions:i,factor:a,coulombDisScale:s}=r;nH(e,a,s*s,t,i)}calAttractive(e,t,r){const{dimensions:i,nodeSize:a}=r;e.getAllEdges().forEach((s,o)=>{const{source:u,target:l}=s,c=e.getNode(u),h=e.getNode(l);if(!c||!h)return;let d=h.data.x-c.data.x,f=h.data.y-c.data.y,g=i===3?h.data.z-c.data.z:0;!d&&!f&&(d=Math.random()*.01,f=Math.random()*.01,i===3&&!g&&(g=Math.random()*.01));const p=Math.sqrt(d*d+f*f+g*g);if(p<a(c)+a(h))return;const v=d/p,m=f/p,y=g/p,{linkDistance:b=200,edgeStrength:x=200}=s.data||{},E=(b-p)*x,_=c.data.mass||1,S=h.data.mass||1,C=1/_,k=1/S,A=v*E,T=m*E,O=y*E;t[u].x-=A*C,t[u].y-=T*C,t[u].z-=O*C,t[l].x+=A*k,t[l].y+=T*k,t[l].z+=O*k})}calGravity(e,t,r,i){const{getCenter:a}=i,s=e.getAllNodes(),o=t.getAllNodes(),u=t.getAllEdges(),{width:l,height:c,center:h,gravity:d,centripetalOptions:f}=i;s&&s.forEach(g=>{const{id:p,data:v}=g,{mass:m,x:y,y:b,z:x}=v,w=t.getNode(p);let E=0,_=0,S=0,C=d;const k=e.getDegree(p,"in"),A=e.getDegree(p,"out"),T=e.getDegree(p,"both"),O=a==null?void 0:a(w,T);if(O){const[P,R,N]=O;E=y-P,_=b-R,C=N}else E=y-h[0],_=b-h[1],S=x-h[2];if(C&&(r[p].x-=C*E/m,r[p].y-=C*_/m,r[p].z-=C*S/m),f){const{leaf:P,single:R,others:N,center:D}=f,{x:M,y:F,z:j,centerStrength:B}=(D==null?void 0:D(w,o,u,l,c))||{x:0,y:0,z:0,centerStrength:0};if(!re(M)||!re(F))return;const $=(y-M)/m,W=(b-F)/m,Y=(x-j)/m;if(B&&(r[p].x-=B*$,r[p].y-=B*W,r[p].z-=B*Y),T===0){const ee=R(w);if(!ee)return;r[p].x-=ee*$,r[p].y-=ee*W,r[p].z-=ee*Y;return}if(k===0||A===0){const ee=P(w,o,u);if(!ee)return;r[p].x-=ee*$,r[p].y-=ee*W,r[p].z-=ee*Y;return}const K=N(w);if(!K)return;r[p].x-=K*$,r[p].y-=K*W,r[p].z-=K*Y}})}updateVelocity(e,t,r,i){const{damping:a,maxSpeed:s,interval:o,dimensions:u}=i,l=e.getAllNodes();l!=null&&l.length&&l.forEach(c=>{const{id:h}=c;let d=(r[h].x+t[h].x*o)*a||.01,f=(r[h].y+t[h].y*o)*a||.01,g=u===3?(r[h].z+t[h].z*o)*a||.01:0;const p=Math.sqrt(d*d+f*f+g*g);if(p>s){const v=s/p;d=v*d,f=v*f,g=v*g}r[h]={x:d,y:f,z:g}})}updatePosition(e,t,r,i){const{distanceThresholdMode:a,interval:s,dimensions:o}=i,u=t.getAllNodes();if(!(u!=null&&u.length)){this.judgingDistance=0;return}let l=0;a==="max"?this.judgingDistance=-1/0:a==="min"&&(this.judgingDistance=1/0),u.forEach(c=>{const{id:h}=c,d=e.getNode(h);if(re(d.data.fx)&&re(d.data.fy)){t.mergeNodeData(h,{x:d.data.fx,y:d.data.fy,z:o===3?d.data.fz:void 0});return}const f=r[h].x*s,g=r[h].y*s,p=o===3?r[h].z*s:0;t.mergeNodeData(h,{x:c.data.x+f,y:c.data.y+g,z:c.data.z+p});const v=Math.sqrt(f*f+g*g+p*p);switch(a){case"max":this.judgingDistance<v&&(this.judgingDistance=v);break;case"min":this.judgingDistance>v&&(this.judgingDistance=v);break;default:l=l+v;break}}),(!a||a==="mean")&&(this.judgingDistance=l/u.length)}}const r_=(n,e)=>{const t=n.getAllNodes();if(!(t!=null&&t.length))return{};const r={};return t.forEach((i,a)=>{n.getDegree(i.id,"both")===1&&(r[i.id]=oH(n,"leaf",i,e))}),r},oH=(n,e,t,r)=>{const i=n.getDegree(t.id,"in"),a=n.getDegree(t.id,"out");let s=t,o=[];i===0?(s=n.getSuccessors(t.id)[0],o=n.getNeighbors(s.id)):a===0&&(s=n.getPredecessors(t.id)[0],o=n.getNeighbors(s.id)),o=o.filter(l=>n.getDegree(l.id,"in")===0||n.getDegree(l.id,"out")===0);const u=uH(n,e,r,t,o);return{coreNode:s,siblingLeaves:o,sameTypeLeaves:u}},uH=(n,e,t,r,i)=>{const a=r.data[t]||"";let s=(i==null?void 0:i.filter(o=>o.data[t]===a))||[];return e==="leaf"&&(s=s.filter(o=>n.getDegree(o.id,"in")===0||n.getDegree(o.id,"out")===0)),s},i_=n=>{const e={x:0,y:0};n.forEach(r=>{const{x:i,y:a}=r.data;e.x+=i||0,e.y+=a||0});const t=n.length||1;return{x:e.x/t,y:e.y/t}},Ag=(n,e)=>e.map(t=>{const{id:r,data:i}=t,a=n.getNode(r);return Object.assign(Object.assign({},a),{data:Object.assign(Object.assign({},a.data),{x:i.x,y:i.y,z:i.z})})});var $e={};const lH=Object.prototype.toString;function Nl(n){const e=lH.call(n);return e.endsWith("Array]")&&!e.includes("Big")}const cH=Object.freeze(Object.defineProperty({__proto__:null,isAnyArray:Nl},Symbol.toStringTag,{value:"Module"})),hH=xO(cH);function dH(n){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!Nl(n))throw new TypeError("input must be an array");if(n.length===0)throw new TypeError("input must not be empty");var t=e.fromIndex,r=t===void 0?0:t,i=e.toIndex,a=i===void 0?n.length:i;if(r<0||r>=n.length||!Number.isInteger(r))throw new Error("fromIndex must be a positive integer smaller than length");if(a<=r||a>n.length||!Number.isInteger(a))throw new Error("toIndex must be an integer greater than fromIndex and at most equal to length");for(var s=n[r],o=r+1;o<a;o++)n[o]>s&&(s=n[o]);return s}function fH(n){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!Nl(n))throw new TypeError("input must be an array");if(n.length===0)throw new TypeError("input must not be empty");var t=e.fromIndex,r=t===void 0?0:t,i=e.toIndex,a=i===void 0?n.length:i;if(r<0||r>=n.length||!Number.isInteger(r))throw new Error("fromIndex must be a positive integer smaller than length");if(a<=r||a>n.length||!Number.isInteger(a))throw new Error("toIndex must be an integer greater than fromIndex and at most equal to length");for(var s=n[r],o=r+1;o<a;o++)n[o]<s&&(s=n[o]);return s}function gH(n){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(Nl(n)){if(n.length===0)throw new TypeError("input must not be empty")}else throw new TypeError("input must be an array");var t;if(e.output!==void 0){if(!Nl(e.output))throw new TypeError("output option must be an array if specified");t=e.output}else t=new Array(n.length);var r=fH(n),i=dH(n);if(r===i)throw new RangeError("minimum and maximum input values are equal. Cannot rescale a constant array");var a=e.min,s=a===void 0?e.autoMinMax?r:0:a,o=e.max,u=o===void 0?e.autoMinMax?i:1:o;if(s>=u)throw new RangeError("min option must be smaller than max option");for(var l=(u-s)/(i-r),c=0;c<n.length;c++)t[c]=(n[c]-r)*l+s;return t}const pH=Object.freeze(Object.defineProperty({__proto__:null,default:gH},Symbol.toStringTag,{value:"Module"})),vH=xO(pH);Object.defineProperty($e,"__esModule",{value:!0});var Kn=hH,a_=vH;const ch=" ".repeat(2),DP=" ".repeat(4);function mH(){return RP(this)}function RP(n,e={}){const{maxRows:t=15,maxColumns:r=10,maxNumSize:i=8,padMinus:a="auto"}=e;return`${n.constructor.name} {
${ch}[
${DP}${yH(n,t,r,i,a)}
${ch}]
${ch}rows: ${n.rows}
${ch}columns: ${n.columns}
}`}function yH(n,e,t,r,i){const{rows:a,columns:s}=n,o=Math.min(a,e),u=Math.min(s,t),l=[];if(i==="auto"){i=!1;e:for(let c=0;c<o;c++)for(let h=0;h<u;h++)if(n.get(c,h)<0){i=!0;break e}}for(let c=0;c<o;c++){let h=[];for(let d=0;d<u;d++)h.push(bH(n.get(c,d),r,i));l.push(`${h.join(" ")}`)}return u!==s&&(l[l.length-1]+=` ... ${s-t} more columns`),o!==a&&l.push(`... ${a-e} more rows`),l.join(`
${DP}`)}function bH(n,e,t){return(n>=0&&t?` ${s_(n,e-1)}`:s_(n,e)).padEnd(e)}function s_(n,e){let t=n.toString();if(t.length<=e)return t;let r=n.toFixed(e);if(r.length>e&&(r=n.toFixed(Math.max(0,e-(r.length-e)))),r.length<=e&&!r.startsWith("0.000")&&!r.startsWith("-0.000"))return r;let i=n.toExponential(e);return i.length>e&&(i=n.toExponential(Math.max(0,e-(i.length-e)))),i.slice(0)}function xH(n,e){n.prototype.add=function(r){return typeof r=="number"?this.addS(r):this.addM(r)},n.prototype.addS=function(r){for(let i=0;i<this.rows;i++)for(let a=0;a<this.columns;a++)this.set(i,a,this.get(i,a)+r);return this},n.prototype.addM=function(r){if(r=e.checkMatrix(r),this.rows!==r.rows||this.columns!==r.columns)throw new RangeError("Matrices dimensions must be equal");for(let i=0;i<this.rows;i++)for(let a=0;a<this.columns;a++)this.set(i,a,this.get(i,a)+r.get(i,a));return this},n.add=function(r,i){return new e(r).add(i)},n.prototype.sub=function(r){return typeof r=="number"?this.subS(r):this.subM(r)},n.prototype.subS=function(r){for(let i=0;i<this.rows;i++)for(let a=0;a<this.columns;a++)this.set(i,a,this.get(i,a)-r);return this},n.prototype.subM=function(r){if(r=e.checkMatrix(r),this.rows!==r.rows||this.columns!==r.columns)throw new RangeError("Matrices dimensions must be equal");for(let i=0;i<this.rows;i++)for(let a=0;a<this.columns;a++)this.set(i,a,this.get(i,a)-r.get(i,a));return this},n.sub=function(r,i){return new e(r).sub(i)},n.prototype.subtract=n.prototype.sub,n.prototype.subtractS=n.prototype.subS,n.prototype.subtractM=n.prototype.subM,n.subtract=n.sub,n.prototype.mul=function(r){return typeof r=="number"?this.mulS(r):this.mulM(r)},n.prototype.mulS=function(r){for(let i=0;i<this.rows;i++)for(let a=0;a<this.columns;a++)this.set(i,a,this.get(i,a)*r);return this},n.prototype.mulM=function(r){if(r=e.checkMatrix(r),this.rows!==r.rows||this.columns!==r.columns)throw new RangeError("Matrices dimensions must be equal");for(let i=0;i<this.rows;i++)for(let a=0;a<this.columns;a++)this.set(i,a,this.get(i,a)*r.get(i,a));return this},n.mul=function(r,i){return new e(r).mul(i)},n.prototype.multiply=n.prototype.mul,n.prototype.multiplyS=n.prototype.mulS,n.prototype.multiplyM=n.prototype.mulM,n.multiply=n.mul,n.prototype.div=function(r){return typeof r=="number"?this.divS(r):this.divM(r)},n.prototype.divS=function(r){for(let i=0;i<this.rows;i++)for(let a=0;a<this.columns;a++)this.set(i,a,this.get(i,a)/r);return this},n.prototype.divM=function(r){if(r=e.checkMatrix(r),this.rows!==r.rows||this.columns!==r.columns)throw new RangeError("Matrices dimensions must be equal");for(let i=0;i<this.rows;i++)for(let a=0;a<this.columns;a++)this.set(i,a,this.get(i,a)/r.get(i,a));return this},n.div=function(r,i){return new e(r).div(i)},n.prototype.divide=n.prototype.div,n.prototype.divideS=n.prototype.divS,n.prototype.divideM=n.prototype.divM,n.divide=n.div,n.prototype.mod=function(r){return typeof r=="number"?this.modS(r):this.modM(r)},n.prototype.modS=function(r){for(let i=0;i<this.rows;i++)for(let a=0;a<this.columns;a++)this.set(i,a,this.get(i,a)%r);return this},n.prototype.modM=function(r){if(r=e.checkMatrix(r),this.rows!==r.rows||this.columns!==r.columns)throw new RangeError("Matrices dimensions must be equal");for(let i=0;i<this.rows;i++)for(let a=0;a<this.columns;a++)this.set(i,a,this.get(i,a)%r.get(i,a));return this},n.mod=function(r,i){return new e(r).mod(i)},n.prototype.modulus=n.prototype.mod,n.prototype.modulusS=n.prototype.modS,n.prototype.modulusM=n.prototype.modM,n.modulus=n.mod,n.prototype.and=function(r){return typeof r=="number"?this.andS(r):this.andM(r)},n.prototype.andS=function(r){for(let i=0;i<this.rows;i++)for(let a=0;a<this.columns;a++)this.set(i,a,this.get(i,a)&r);return this},n.prototype.andM=function(r){if(r=e.checkMatrix(r),this.rows!==r.rows||this.columns!==r.columns)throw new RangeError("Matrices dimensions must be equal");for(let i=0;i<this.rows;i++)for(let a=0;a<this.columns;a++)this.set(i,a,this.get(i,a)&r.get(i,a));return this},n.and=function(r,i){return new e(r).and(i)},n.prototype.or=function(r){return typeof r=="number"?this.orS(r):this.orM(r)},n.prototype.orS=function(r){for(let i=0;i<this.rows;i++)for(let a=0;a<this.columns;a++)this.set(i,a,this.get(i,a)|r);return this},n.prototype.orM=function(r){if(r=e.checkMatrix(r),this.rows!==r.rows||this.columns!==r.columns)throw new RangeError("Matrices dimensions must be equal");for(let i=0;i<this.rows;i++)for(let a=0;a<this.columns;a++)this.set(i,a,this.get(i,a)|r.get(i,a));return this},n.or=function(r,i){return new e(r).or(i)},n.prototype.xor=function(r){return typeof r=="number"?this.xorS(r):this.xorM(r)},n.prototype.xorS=function(r){for(let i=0;i<this.rows;i++)for(let a=0;a<this.columns;a++)this.set(i,a,this.get(i,a)^r);return this},n.prototype.xorM=function(r){if(r=e.checkMatrix(r),this.rows!==r.rows||this.columns!==r.columns)throw new RangeError("Matrices dimensions must be equal");for(let i=0;i<this.rows;i++)for(let a=0;a<this.columns;a++)this.set(i,a,this.get(i,a)^r.get(i,a));return this},n.xor=function(r,i){return new e(r).xor(i)},n.prototype.leftShift=function(r){return typeof r=="number"?this.leftShiftS(r):this.leftShiftM(r)},n.prototype.leftShiftS=function(r){for(let i=0;i<this.rows;i++)for(let a=0;a<this.columns;a++)this.set(i,a,this.get(i,a)<<r);return this},n.prototype.leftShiftM=function(r){if(r=e.checkMatrix(r),this.rows!==r.rows||this.columns!==r.columns)throw new RangeError("Matrices dimensions must be equal");for(let i=0;i<this.rows;i++)for(let a=0;a<this.columns;a++)this.set(i,a,this.get(i,a)<<r.get(i,a));return this},n.leftShift=function(r,i){return new e(r).leftShift(i)},n.prototype.signPropagatingRightShift=function(r){return typeof r=="number"?this.signPropagatingRightShiftS(r):this.signPropagatingRightShiftM(r)},n.prototype.signPropagatingRightShiftS=function(r){for(let i=0;i<this.rows;i++)for(let a=0;a<this.columns;a++)this.set(i,a,this.get(i,a)>>r);return this},n.prototype.signPropagatingRightShiftM=function(r){if(r=e.checkMatrix(r),this.rows!==r.rows||this.columns!==r.columns)throw new RangeError("Matrices dimensions must be equal");for(let i=0;i<this.rows;i++)for(let a=0;a<this.columns;a++)this.set(i,a,this.get(i,a)>>r.get(i,a));return this},n.signPropagatingRightShift=function(r,i){return new e(r).signPropagatingRightShift(i)},n.prototype.rightShift=function(r){return typeof r=="number"?this.rightShiftS(r):this.rightShiftM(r)},n.prototype.rightShiftS=function(r){for(let i=0;i<this.rows;i++)for(let a=0;a<this.columns;a++)this.set(i,a,this.get(i,a)>>>r);return this},n.prototype.rightShiftM=function(r){if(r=e.checkMatrix(r),this.rows!==r.rows||this.columns!==r.columns)throw new RangeError("Matrices dimensions must be equal");for(let i=0;i<this.rows;i++)for(let a=0;a<this.columns;a++)this.set(i,a,this.get(i,a)>>>r.get(i,a));return this},n.rightShift=function(r,i){return new e(r).rightShift(i)},n.prototype.zeroFillRightShift=n.prototype.rightShift,n.prototype.zeroFillRightShiftS=n.prototype.rightShiftS,n.prototype.zeroFillRightShiftM=n.prototype.rightShiftM,n.zeroFillRightShift=n.rightShift,n.prototype.not=function(){for(let r=0;r<this.rows;r++)for(let i=0;i<this.columns;i++)this.set(r,i,~this.get(r,i));return this},n.not=function(r){return new e(r).not()},n.prototype.abs=function(){for(let r=0;r<this.rows;r++)for(let i=0;i<this.columns;i++)this.set(r,i,Math.abs(this.get(r,i)));return this},n.abs=function(r){return new e(r).abs()},n.prototype.acos=function(){for(let r=0;r<this.rows;r++)for(let i=0;i<this.columns;i++)this.set(r,i,Math.acos(this.get(r,i)));return this},n.acos=function(r){return new e(r).acos()},n.prototype.acosh=function(){for(let r=0;r<this.rows;r++)for(let i=0;i<this.columns;i++)this.set(r,i,Math.acosh(this.get(r,i)));return this},n.acosh=function(r){return new e(r).acosh()},n.prototype.asin=function(){for(let r=0;r<this.rows;r++)for(let i=0;i<this.columns;i++)this.set(r,i,Math.asin(this.get(r,i)));return this},n.asin=function(r){return new e(r).asin()},n.prototype.asinh=function(){for(let r=0;r<this.rows;r++)for(let i=0;i<this.columns;i++)this.set(r,i,Math.asinh(this.get(r,i)));return this},n.asinh=function(r){return new e(r).asinh()},n.prototype.atan=function(){for(let r=0;r<this.rows;r++)for(let i=0;i<this.columns;i++)this.set(r,i,Math.atan(this.get(r,i)));return this},n.atan=function(r){return new e(r).atan()},n.prototype.atanh=function(){for(let r=0;r<this.rows;r++)for(let i=0;i<this.columns;i++)this.set(r,i,Math.atanh(this.get(r,i)));return this},n.atanh=function(r){return new e(r).atanh()},n.prototype.cbrt=function(){for(let r=0;r<this.rows;r++)for(let i=0;i<this.columns;i++)this.set(r,i,Math.cbrt(this.get(r,i)));return this},n.cbrt=function(r){return new e(r).cbrt()},n.prototype.ceil=function(){for(let r=0;r<this.rows;r++)for(let i=0;i<this.columns;i++)this.set(r,i,Math.ceil(this.get(r,i)));return this},n.ceil=function(r){return new e(r).ceil()},n.prototype.clz32=function(){for(let r=0;r<this.rows;r++)for(let i=0;i<this.columns;i++)this.set(r,i,Math.clz32(this.get(r,i)));return this},n.clz32=function(r){return new e(r).clz32()},n.prototype.cos=function(){for(let r=0;r<this.rows;r++)for(let i=0;i<this.columns;i++)this.set(r,i,Math.cos(this.get(r,i)));return this},n.cos=function(r){return new e(r).cos()},n.prototype.cosh=function(){for(let r=0;r<this.rows;r++)for(let i=0;i<this.columns;i++)this.set(r,i,Math.cosh(this.get(r,i)));return this},n.cosh=function(r){return new e(r).cosh()},n.prototype.exp=function(){for(let r=0;r<this.rows;r++)for(let i=0;i<this.columns;i++)this.set(r,i,Math.exp(this.get(r,i)));return this},n.exp=function(r){return new e(r).exp()},n.prototype.expm1=function(){for(let r=0;r<this.rows;r++)for(let i=0;i<this.columns;i++)this.set(r,i,Math.expm1(this.get(r,i)));return this},n.expm1=function(r){return new e(r).expm1()},n.prototype.floor=function(){for(let r=0;r<this.rows;r++)for(let i=0;i<this.columns;i++)this.set(r,i,Math.floor(this.get(r,i)));return this},n.floor=function(r){return new e(r).floor()},n.prototype.fround=function(){for(let r=0;r<this.rows;r++)for(let i=0;i<this.columns;i++)this.set(r,i,Math.fround(this.get(r,i)));return this},n.fround=function(r){return new e(r).fround()},n.prototype.log=function(){for(let r=0;r<this.rows;r++)for(let i=0;i<this.columns;i++)this.set(r,i,Math.log(this.get(r,i)));return this},n.log=function(r){return new e(r).log()},n.prototype.log1p=function(){for(let r=0;r<this.rows;r++)for(let i=0;i<this.columns;i++)this.set(r,i,Math.log1p(this.get(r,i)));return this},n.log1p=function(r){return new e(r).log1p()},n.prototype.log10=function(){for(let r=0;r<this.rows;r++)for(let i=0;i<this.columns;i++)this.set(r,i,Math.log10(this.get(r,i)));return this},n.log10=function(r){return new e(r).log10()},n.prototype.log2=function(){for(let r=0;r<this.rows;r++)for(let i=0;i<this.columns;i++)this.set(r,i,Math.log2(this.get(r,i)));return this},n.log2=function(r){return new e(r).log2()},n.prototype.round=function(){for(let r=0;r<this.rows;r++)for(let i=0;i<this.columns;i++)this.set(r,i,Math.round(this.get(r,i)));return this},n.round=function(r){return new e(r).round()},n.prototype.sign=function(){for(let r=0;r<this.rows;r++)for(let i=0;i<this.columns;i++)this.set(r,i,Math.sign(this.get(r,i)));return this},n.sign=function(r){return new e(r).sign()},n.prototype.sin=function(){for(let r=0;r<this.rows;r++)for(let i=0;i<this.columns;i++)this.set(r,i,Math.sin(this.get(r,i)));return this},n.sin=function(r){return new e(r).sin()},n.prototype.sinh=function(){for(let r=0;r<this.rows;r++)for(let i=0;i<this.columns;i++)this.set(r,i,Math.sinh(this.get(r,i)));return this},n.sinh=function(r){return new e(r).sinh()},n.prototype.sqrt=function(){for(let r=0;r<this.rows;r++)for(let i=0;i<this.columns;i++)this.set(r,i,Math.sqrt(this.get(r,i)));return this},n.sqrt=function(r){return new e(r).sqrt()},n.prototype.tan=function(){for(let r=0;r<this.rows;r++)for(let i=0;i<this.columns;i++)this.set(r,i,Math.tan(this.get(r,i)));return this},n.tan=function(r){return new e(r).tan()},n.prototype.tanh=function(){for(let r=0;r<this.rows;r++)for(let i=0;i<this.columns;i++)this.set(r,i,Math.tanh(this.get(r,i)));return this},n.tanh=function(r){return new e(r).tanh()},n.prototype.trunc=function(){for(let r=0;r<this.rows;r++)for(let i=0;i<this.columns;i++)this.set(r,i,Math.trunc(this.get(r,i)));return this},n.trunc=function(r){return new e(r).trunc()},n.pow=function(r,i){return new e(r).pow(i)},n.prototype.pow=function(r){return typeof r=="number"?this.powS(r):this.powM(r)},n.prototype.powS=function(r){for(let i=0;i<this.rows;i++)for(let a=0;a<this.columns;a++)this.set(i,a,this.get(i,a)**r);return this},n.prototype.powM=function(r){if(r=e.checkMatrix(r),this.rows!==r.rows||this.columns!==r.columns)throw new RangeError("Matrices dimensions must be equal");for(let i=0;i<this.rows;i++)for(let a=0;a<this.columns;a++)this.set(i,a,this.get(i,a)**r.get(i,a));return this}}function Mr(n,e,t){let r=t?n.rows:n.rows-1;if(e<0||e>r)throw new RangeError("Row index out of range")}function Pr(n,e,t){let r=t?n.columns:n.columns-1;if(e<0||e>r)throw new RangeError("Column index out of range")}function No(n,e){if(e.to1DArray&&(e=e.to1DArray()),e.length!==n.columns)throw new RangeError("vector size must be the same as the number of columns");return e}function Do(n,e){if(e.to1DArray&&(e=e.to1DArray()),e.length!==n.rows)throw new RangeError("vector size must be the same as the number of rows");return e}function Rx(n,e){if(!Kn.isAnyArray(e))throw new TypeError("row indices must be an array");for(let t=0;t<e.length;t++)if(e[t]<0||e[t]>=n.rows)throw new RangeError("row indices are out of range")}function Lx(n,e){if(!Kn.isAnyArray(e))throw new TypeError("column indices must be an array");for(let t=0;t<e.length;t++)if(e[t]<0||e[t]>=n.columns)throw new RangeError("column indices are out of range")}function Vb(n,e,t,r,i){if(arguments.length!==5)throw new RangeError("expected 4 arguments");if(hh("startRow",e),hh("endRow",t),hh("startColumn",r),hh("endColumn",i),e>t||r>i||e<0||e>=n.rows||t<0||t>=n.rows||r<0||r>=n.columns||i<0||i>=n.columns)throw new RangeError("Submatrix indices are out of range")}function Lf(n,e=0){let t=[];for(let r=0;r<n;r++)t.push(e);return t}function hh(n,e){if(typeof e!="number")throw new TypeError(`${n} must be a number`)}function wo(n){if(n.isEmpty())throw new Error("Empty matrix has no elements to index")}function wH(n){let e=Lf(n.rows);for(let t=0;t<n.rows;++t)for(let r=0;r<n.columns;++r)e[t]+=n.get(t,r);return e}function EH(n){let e=Lf(n.columns);for(let t=0;t<n.rows;++t)for(let r=0;r<n.columns;++r)e[r]+=n.get(t,r);return e}function _H(n){let e=0;for(let t=0;t<n.rows;t++)for(let r=0;r<n.columns;r++)e+=n.get(t,r);return e}function SH(n){let e=Lf(n.rows,1);for(let t=0;t<n.rows;++t)for(let r=0;r<n.columns;++r)e[t]*=n.get(t,r);return e}function kH(n){let e=Lf(n.columns,1);for(let t=0;t<n.rows;++t)for(let r=0;r<n.columns;++r)e[r]*=n.get(t,r);return e}function CH(n){let e=1;for(let t=0;t<n.rows;t++)for(let r=0;r<n.columns;r++)e*=n.get(t,r);return e}function AH(n,e,t){const r=n.rows,i=n.columns,a=[];for(let s=0;s<r;s++){let o=0,u=0,l=0;for(let c=0;c<i;c++)l=n.get(s,c)-t[s],o+=l,u+=l*l;e?a.push((u-o*o/i)/(i-1)):a.push((u-o*o/i)/i)}return a}function TH(n,e,t){const r=n.rows,i=n.columns,a=[];for(let s=0;s<i;s++){let o=0,u=0,l=0;for(let c=0;c<r;c++)l=n.get(c,s)-t[s],o+=l,u+=l*l;e?a.push((u-o*o/r)/(r-1)):a.push((u-o*o/r)/r)}return a}function OH(n,e,t){const r=n.rows,i=n.columns,a=r*i;let s=0,o=0,u=0;for(let l=0;l<r;l++)for(let c=0;c<i;c++)u=n.get(l,c)-t,s+=u,o+=u*u;return e?(o-s*s/a)/(a-1):(o-s*s/a)/a}function MH(n,e){for(let t=0;t<n.rows;t++)for(let r=0;r<n.columns;r++)n.set(t,r,n.get(t,r)-e[t])}function PH(n,e){for(let t=0;t<n.rows;t++)for(let r=0;r<n.columns;r++)n.set(t,r,n.get(t,r)-e[r])}function NH(n,e){for(let t=0;t<n.rows;t++)for(let r=0;r<n.columns;r++)n.set(t,r,n.get(t,r)-e)}function DH(n){const e=[];for(let t=0;t<n.rows;t++){let r=0;for(let i=0;i<n.columns;i++)r+=n.get(t,i)**2/(n.columns-1);e.push(Math.sqrt(r))}return e}function RH(n,e){for(let t=0;t<n.rows;t++)for(let r=0;r<n.columns;r++)n.set(t,r,n.get(t,r)/e[t])}function LH(n){const e=[];for(let t=0;t<n.columns;t++){let r=0;for(let i=0;i<n.rows;i++)r+=n.get(i,t)**2/(n.rows-1);e.push(Math.sqrt(r))}return e}function IH(n,e){for(let t=0;t<n.rows;t++)for(let r=0;r<n.columns;r++)n.set(t,r,n.get(t,r)/e[r])}function FH(n){const e=n.size-1;let t=0;for(let r=0;r<n.columns;r++)for(let i=0;i<n.rows;i++)t+=n.get(i,r)**2/e;return Math.sqrt(t)}function BH(n,e){for(let t=0;t<n.rows;t++)for(let r=0;r<n.columns;r++)n.set(t,r,n.get(t,r)/e)}class Me{static from1DArray(e,t,r){if(e*t!==r.length)throw new RangeError("data length does not match given dimensions");let a=new ne(e,t);for(let s=0;s<e;s++)for(let o=0;o<t;o++)a.set(s,o,r[s*t+o]);return a}static rowVector(e){let t=new ne(1,e.length);for(let r=0;r<e.length;r++)t.set(0,r,e[r]);return t}static columnVector(e){let t=new ne(e.length,1);for(let r=0;r<e.length;r++)t.set(r,0,e[r]);return t}static zeros(e,t){return new ne(e,t)}static ones(e,t){return new ne(e,t).fill(1)}static rand(e,t,r={}){if(typeof r!="object")throw new TypeError("options must be an object");const{random:i=Math.random}=r;let a=new ne(e,t);for(let s=0;s<e;s++)for(let o=0;o<t;o++)a.set(s,o,i());return a}static randInt(e,t,r={}){if(typeof r!="object")throw new TypeError("options must be an object");const{min:i=0,max:a=1e3,random:s=Math.random}=r;if(!Number.isInteger(i))throw new TypeError("min must be an integer");if(!Number.isInteger(a))throw new TypeError("max must be an integer");if(i>=a)throw new RangeError("min must be smaller than max");let o=a-i,u=new ne(e,t);for(let l=0;l<e;l++)for(let c=0;c<t;c++){let h=i+Math.round(s()*o);u.set(l,c,h)}return u}static eye(e,t,r){t===void 0&&(t=e),r===void 0&&(r=1);let i=Math.min(e,t),a=this.zeros(e,t);for(let s=0;s<i;s++)a.set(s,s,r);return a}static diag(e,t,r){let i=e.length;t===void 0&&(t=i),r===void 0&&(r=t);let a=Math.min(i,t,r),s=this.zeros(t,r);for(let o=0;o<a;o++)s.set(o,o,e[o]);return s}static min(e,t){e=this.checkMatrix(e),t=this.checkMatrix(t);let r=e.rows,i=e.columns,a=new ne(r,i);for(let s=0;s<r;s++)for(let o=0;o<i;o++)a.set(s,o,Math.min(e.get(s,o),t.get(s,o)));return a}static max(e,t){e=this.checkMatrix(e),t=this.checkMatrix(t);let r=e.rows,i=e.columns,a=new this(r,i);for(let s=0;s<r;s++)for(let o=0;o<i;o++)a.set(s,o,Math.max(e.get(s,o),t.get(s,o)));return a}static checkMatrix(e){return Me.isMatrix(e)?e:new ne(e)}static isMatrix(e){return e!=null&&e.klass==="Matrix"}get size(){return this.rows*this.columns}apply(e){if(typeof e!="function")throw new TypeError("callback must be a function");for(let t=0;t<this.rows;t++)for(let r=0;r<this.columns;r++)e.call(this,t,r);return this}to1DArray(){let e=[];for(let t=0;t<this.rows;t++)for(let r=0;r<this.columns;r++)e.push(this.get(t,r));return e}to2DArray(){let e=[];for(let t=0;t<this.rows;t++){e.push([]);for(let r=0;r<this.columns;r++)e[t].push(this.get(t,r))}return e}toJSON(){return this.to2DArray()}isRowVector(){return this.rows===1}isColumnVector(){return this.columns===1}isVector(){return this.rows===1||this.columns===1}isSquare(){return this.rows===this.columns}isEmpty(){return this.rows===0||this.columns===0}isSymmetric(){if(this.isSquare()){for(let e=0;e<this.rows;e++)for(let t=0;t<=e;t++)if(this.get(e,t)!==this.get(t,e))return!1;return!0}return!1}isDistance(){if(!this.isSymmetric())return!1;for(let e=0;e<this.rows;e++)if(this.get(e,e)!==0)return!1;return!0}isEchelonForm(){let e=0,t=0,r=-1,i=!0,a=!1;for(;e<this.rows&&i;){for(t=0,a=!1;t<this.columns&&a===!1;)this.get(e,t)===0?t++:this.get(e,t)===1&&t>r?(a=!0,r=t):(i=!1,a=!0);e++}return i}isReducedEchelonForm(){let e=0,t=0,r=-1,i=!0,a=!1;for(;e<this.rows&&i;){for(t=0,a=!1;t<this.columns&&a===!1;)this.get(e,t)===0?t++:this.get(e,t)===1&&t>r?(a=!0,r=t):(i=!1,a=!0);for(let s=t+1;s<this.rows;s++)this.get(e,s)!==0&&(i=!1);e++}return i}echelonForm(){let e=this.clone(),t=0,r=0;for(;t<e.rows&&r<e.columns;){let i=t;for(let a=t;a<e.rows;a++)e.get(a,r)>e.get(i,r)&&(i=a);if(e.get(i,r)===0)r++;else{e.swapRows(t,i);let a=e.get(t,r);for(let s=r;s<e.columns;s++)e.set(t,s,e.get(t,s)/a);for(let s=t+1;s<e.rows;s++){let o=e.get(s,r)/e.get(t,r);e.set(s,r,0);for(let u=r+1;u<e.columns;u++)e.set(s,u,e.get(s,u)-e.get(t,u)*o)}t++,r++}}return e}reducedEchelonForm(){let e=this.echelonForm(),t=e.columns,r=e.rows,i=r-1;for(;i>=0;)if(e.maxRow(i)===0)i--;else{let a=0,s=!1;for(;a<r&&s===!1;)e.get(i,a)===1?s=!0:a++;for(let o=0;o<i;o++){let u=e.get(o,a);for(let l=a;l<t;l++){let c=e.get(o,l)-u*e.get(i,l);e.set(o,l,c)}}i--}return e}set(){throw new Error("set method is unimplemented")}get(){throw new Error("get method is unimplemented")}repeat(e={}){if(typeof e!="object")throw new TypeError("options must be an object");const{rows:t=1,columns:r=1}=e;if(!Number.isInteger(t)||t<=0)throw new TypeError("rows must be a positive integer");if(!Number.isInteger(r)||r<=0)throw new TypeError("columns must be a positive integer");let i=new ne(this.rows*t,this.columns*r);for(let a=0;a<t;a++)for(let s=0;s<r;s++)i.setSubMatrix(this,this.rows*a,this.columns*s);return i}fill(e){for(let t=0;t<this.rows;t++)for(let r=0;r<this.columns;r++)this.set(t,r,e);return this}neg(){return this.mulS(-1)}getRow(e){Mr(this,e);let t=[];for(let r=0;r<this.columns;r++)t.push(this.get(e,r));return t}getRowVector(e){return ne.rowVector(this.getRow(e))}setRow(e,t){Mr(this,e),t=No(this,t);for(let r=0;r<this.columns;r++)this.set(e,r,t[r]);return this}swapRows(e,t){Mr(this,e),Mr(this,t);for(let r=0;r<this.columns;r++){let i=this.get(e,r);this.set(e,r,this.get(t,r)),this.set(t,r,i)}return this}getColumn(e){Pr(this,e);let t=[];for(let r=0;r<this.rows;r++)t.push(this.get(r,e));return t}getColumnVector(e){return ne.columnVector(this.getColumn(e))}setColumn(e,t){Pr(this,e),t=Do(this,t);for(let r=0;r<this.rows;r++)this.set(r,e,t[r]);return this}swapColumns(e,t){Pr(this,e),Pr(this,t);for(let r=0;r<this.rows;r++){let i=this.get(r,e);this.set(r,e,this.get(r,t)),this.set(r,t,i)}return this}addRowVector(e){e=No(this,e);for(let t=0;t<this.rows;t++)for(let r=0;r<this.columns;r++)this.set(t,r,this.get(t,r)+e[r]);return this}subRowVector(e){e=No(this,e);for(let t=0;t<this.rows;t++)for(let r=0;r<this.columns;r++)this.set(t,r,this.get(t,r)-e[r]);return this}mulRowVector(e){e=No(this,e);for(let t=0;t<this.rows;t++)for(let r=0;r<this.columns;r++)this.set(t,r,this.get(t,r)*e[r]);return this}divRowVector(e){e=No(this,e);for(let t=0;t<this.rows;t++)for(let r=0;r<this.columns;r++)this.set(t,r,this.get(t,r)/e[r]);return this}addColumnVector(e){e=Do(this,e);for(let t=0;t<this.rows;t++)for(let r=0;r<this.columns;r++)this.set(t,r,this.get(t,r)+e[t]);return this}subColumnVector(e){e=Do(this,e);for(let t=0;t<this.rows;t++)for(let r=0;r<this.columns;r++)this.set(t,r,this.get(t,r)-e[t]);return this}mulColumnVector(e){e=Do(this,e);for(let t=0;t<this.rows;t++)for(let r=0;r<this.columns;r++)this.set(t,r,this.get(t,r)*e[t]);return this}divColumnVector(e){e=Do(this,e);for(let t=0;t<this.rows;t++)for(let r=0;r<this.columns;r++)this.set(t,r,this.get(t,r)/e[t]);return this}mulRow(e,t){Mr(this,e);for(let r=0;r<this.columns;r++)this.set(e,r,this.get(e,r)*t);return this}mulColumn(e,t){Pr(this,e);for(let r=0;r<this.rows;r++)this.set(r,e,this.get(r,e)*t);return this}max(e){if(this.isEmpty())return NaN;switch(e){case"row":{const t=new Array(this.rows).fill(Number.NEGATIVE_INFINITY);for(let r=0;r<this.rows;r++)for(let i=0;i<this.columns;i++)this.get(r,i)>t[r]&&(t[r]=this.get(r,i));return t}case"column":{const t=new Array(this.columns).fill(Number.NEGATIVE_INFINITY);for(let r=0;r<this.rows;r++)for(let i=0;i<this.columns;i++)this.get(r,i)>t[i]&&(t[i]=this.get(r,i));return t}case void 0:{let t=this.get(0,0);for(let r=0;r<this.rows;r++)for(let i=0;i<this.columns;i++)this.get(r,i)>t&&(t=this.get(r,i));return t}default:throw new Error(`invalid option: ${e}`)}}maxIndex(){wo(this);let e=this.get(0,0),t=[0,0];for(let r=0;r<this.rows;r++)for(let i=0;i<this.columns;i++)this.get(r,i)>e&&(e=this.get(r,i),t[0]=r,t[1]=i);return t}min(e){if(this.isEmpty())return NaN;switch(e){case"row":{const t=new Array(this.rows).fill(Number.POSITIVE_INFINITY);for(let r=0;r<this.rows;r++)for(let i=0;i<this.columns;i++)this.get(r,i)<t[r]&&(t[r]=this.get(r,i));return t}case"column":{const t=new Array(this.columns).fill(Number.POSITIVE_INFINITY);for(let r=0;r<this.rows;r++)for(let i=0;i<this.columns;i++)this.get(r,i)<t[i]&&(t[i]=this.get(r,i));return t}case void 0:{let t=this.get(0,0);for(let r=0;r<this.rows;r++)for(let i=0;i<this.columns;i++)this.get(r,i)<t&&(t=this.get(r,i));return t}default:throw new Error(`invalid option: ${e}`)}}minIndex(){wo(this);let e=this.get(0,0),t=[0,0];for(let r=0;r<this.rows;r++)for(let i=0;i<this.columns;i++)this.get(r,i)<e&&(e=this.get(r,i),t[0]=r,t[1]=i);return t}maxRow(e){if(Mr(this,e),this.isEmpty())return NaN;let t=this.get(e,0);for(let r=1;r<this.columns;r++)this.get(e,r)>t&&(t=this.get(e,r));return t}maxRowIndex(e){Mr(this,e),wo(this);let t=this.get(e,0),r=[e,0];for(let i=1;i<this.columns;i++)this.get(e,i)>t&&(t=this.get(e,i),r[1]=i);return r}minRow(e){if(Mr(this,e),this.isEmpty())return NaN;let t=this.get(e,0);for(let r=1;r<this.columns;r++)this.get(e,r)<t&&(t=this.get(e,r));return t}minRowIndex(e){Mr(this,e),wo(this);let t=this.get(e,0),r=[e,0];for(let i=1;i<this.columns;i++)this.get(e,i)<t&&(t=this.get(e,i),r[1]=i);return r}maxColumn(e){if(Pr(this,e),this.isEmpty())return NaN;let t=this.get(0,e);for(let r=1;r<this.rows;r++)this.get(r,e)>t&&(t=this.get(r,e));return t}maxColumnIndex(e){Pr(this,e),wo(this);let t=this.get(0,e),r=[0,e];for(let i=1;i<this.rows;i++)this.get(i,e)>t&&(t=this.get(i,e),r[0]=i);return r}minColumn(e){if(Pr(this,e),this.isEmpty())return NaN;let t=this.get(0,e);for(let r=1;r<this.rows;r++)this.get(r,e)<t&&(t=this.get(r,e));return t}minColumnIndex(e){Pr(this,e),wo(this);let t=this.get(0,e),r=[0,e];for(let i=1;i<this.rows;i++)this.get(i,e)<t&&(t=this.get(i,e),r[0]=i);return r}diag(){let e=Math.min(this.rows,this.columns),t=[];for(let r=0;r<e;r++)t.push(this.get(r,r));return t}norm(e="frobenius"){switch(e){case"max":return this.max();case"frobenius":return Math.sqrt(this.dot(this));default:throw new RangeError(`unknown norm type: ${e}`)}}cumulativeSum(){let e=0;for(let t=0;t<this.rows;t++)for(let r=0;r<this.columns;r++)e+=this.get(t,r),this.set(t,r,e);return this}dot(e){Me.isMatrix(e)&&(e=e.to1DArray());let t=this.to1DArray();if(t.length!==e.length)throw new RangeError("vectors do not have the same size");let r=0;for(let i=0;i<t.length;i++)r+=t[i]*e[i];return r}mmul(e){e=ne.checkMatrix(e);let t=this.rows,r=this.columns,i=e.columns,a=new ne(t,i),s=new Float64Array(r);for(let o=0;o<i;o++){for(let u=0;u<r;u++)s[u]=e.get(u,o);for(let u=0;u<t;u++){let l=0;for(let c=0;c<r;c++)l+=this.get(u,c)*s[c];a.set(u,o,l)}}return a}mpow(e){if(!this.isSquare())throw new RangeError("Matrix must be square");if(!Number.isInteger(e)||e<0)throw new RangeError("Exponent must be a non-negative integer");let t=ne.eye(this.rows),r=this;for(let i=e;i>=1;i/=2)i&1&&(t=t.mmul(r)),r=r.mmul(r);return t}strassen2x2(e){e=ne.checkMatrix(e);let t=new ne(2,2);const r=this.get(0,0),i=e.get(0,0),a=this.get(0,1),s=e.get(0,1),o=this.get(1,0),u=e.get(1,0),l=this.get(1,1),c=e.get(1,1),h=(r+l)*(i+c),d=(o+l)*i,f=r*(s-c),g=l*(u-i),p=(r+a)*c,v=(o-r)*(i+s),m=(a-l)*(u+c),y=h+g-p+m,b=f+p,x=d+g,w=h-d+f+v;return t.set(0,0,y),t.set(0,1,b),t.set(1,0,x),t.set(1,1,w),t}strassen3x3(e){e=ne.checkMatrix(e);let t=new ne(3,3);const r=this.get(0,0),i=this.get(0,1),a=this.get(0,2),s=this.get(1,0),o=this.get(1,1),u=this.get(1,2),l=this.get(2,0),c=this.get(2,1),h=this.get(2,2),d=e.get(0,0),f=e.get(0,1),g=e.get(0,2),p=e.get(1,0),v=e.get(1,1),m=e.get(1,2),y=e.get(2,0),b=e.get(2,1),x=e.get(2,2),w=(r+i+a-s-o-c-h)*v,E=(r-s)*(-f+v),_=o*(-d+f+p-v-m-y+x),S=(-r+s+o)*(d-f+v),C=(s+o)*(-d+f),k=r*d,A=(-r+l+c)*(d-g+m),T=(-r+l)*(g-m),O=(l+c)*(-d+g),P=(r+i+a-o-u-l-c)*m,R=c*(-d+g+p-v-m-y+b),N=(-a+c+h)*(v+y-b),D=(a-h)*(v-b),M=a*y,F=(c+h)*(-y+b),j=(-a+o+u)*(m+y-x),B=(a-u)*(m-x),$=(o+u)*(-y+x),W=i*p,Y=u*b,K=s*g,ee=l*f,ie=h*x,_e=k+M+W,Ae=w+S+C+k+N+M+F,Be=k+A+O+P+M+j+$,Fe=E+_+S+k+M+j+B,Ze=E+S+C+k+Y,Kt=M+j+B+$+K,$r=k+A+T+R+N+D+M,Re=N+D+M+F+ee,Zt=k+A+T+O+ie;return t.set(0,0,_e),t.set(0,1,Ae),t.set(0,2,Be),t.set(1,0,Fe),t.set(1,1,Ze),t.set(1,2,Kt),t.set(2,0,$r),t.set(2,1,Re),t.set(2,2,Zt),t}mmulStrassen(e){e=ne.checkMatrix(e);let t=this.clone(),r=t.rows,i=t.columns,a=e.rows,s=e.columns;i!==a&&console.warn(`Multiplying ${r} x ${i} and ${a} x ${s} matrix: dimensions do not match.`);function o(h,d,f){let g=h.rows,p=h.columns;if(g===d&&p===f)return h;{let v=Me.zeros(d,f);return v=v.setSubMatrix(h,0,0),v}}let u=Math.max(r,a),l=Math.max(i,s);t=o(t,u,l),e=o(e,u,l);function c(h,d,f,g){if(f<=512||g<=512)return h.mmul(d);f%2===1&&g%2===1?(h=o(h,f+1,g+1),d=o(d,f+1,g+1)):f%2===1?(h=o(h,f+1,g),d=o(d,f+1,g)):g%2===1&&(h=o(h,f,g+1),d=o(d,f,g+1));let p=parseInt(h.rows/2,10),v=parseInt(h.columns/2,10),m=h.subMatrix(0,p-1,0,v-1),y=d.subMatrix(0,p-1,0,v-1),b=h.subMatrix(0,p-1,v,h.columns-1),x=d.subMatrix(0,p-1,v,d.columns-1),w=h.subMatrix(p,h.rows-1,0,v-1),E=d.subMatrix(p,d.rows-1,0,v-1),_=h.subMatrix(p,h.rows-1,v,h.columns-1),S=d.subMatrix(p,d.rows-1,v,d.columns-1),C=c(Me.add(m,_),Me.add(y,S),p,v),k=c(Me.add(w,_),y,p,v),A=c(m,Me.sub(x,S),p,v),T=c(_,Me.sub(E,y),p,v),O=c(Me.add(m,b),S,p,v),P=c(Me.sub(w,m),Me.add(y,x),p,v),R=c(Me.sub(b,_),Me.add(E,S),p,v),N=Me.add(C,T);N.sub(O),N.add(R);let D=Me.add(A,O),M=Me.add(k,T),F=Me.sub(C,k);F.add(A),F.add(P);let j=Me.zeros(2*N.rows,2*N.columns);return j=j.setSubMatrix(N,0,0),j=j.setSubMatrix(D,N.rows,0),j=j.setSubMatrix(M,0,N.columns),j=j.setSubMatrix(F,N.rows,N.columns),j.subMatrix(0,f-1,0,g-1)}return c(t,e,u,l)}scaleRows(e={}){if(typeof e!="object")throw new TypeError("options must be an object");const{min:t=0,max:r=1}=e;if(!Number.isFinite(t))throw new TypeError("min must be a number");if(!Number.isFinite(r))throw new TypeError("max must be a number");if(t>=r)throw new RangeError("min must be smaller than max");let i=new ne(this.rows,this.columns);for(let a=0;a<this.rows;a++){const s=this.getRow(a);s.length>0&&a_(s,{min:t,max:r,output:s}),i.setRow(a,s)}return i}scaleColumns(e={}){if(typeof e!="object")throw new TypeError("options must be an object");const{min:t=0,max:r=1}=e;if(!Number.isFinite(t))throw new TypeError("min must be a number");if(!Number.isFinite(r))throw new TypeError("max must be a number");if(t>=r)throw new RangeError("min must be smaller than max");let i=new ne(this.rows,this.columns);for(let a=0;a<this.columns;a++){const s=this.getColumn(a);s.length&&a_(s,{min:t,max:r,output:s}),i.setColumn(a,s)}return i}flipRows(){const e=Math.ceil(this.columns/2);for(let t=0;t<this.rows;t++)for(let r=0;r<e;r++){let i=this.get(t,r),a=this.get(t,this.columns-1-r);this.set(t,r,a),this.set(t,this.columns-1-r,i)}return this}flipColumns(){const e=Math.ceil(this.rows/2);for(let t=0;t<this.columns;t++)for(let r=0;r<e;r++){let i=this.get(r,t),a=this.get(this.rows-1-r,t);this.set(r,t,a),this.set(this.rows-1-r,t,i)}return this}kroneckerProduct(e){e=ne.checkMatrix(e);let t=this.rows,r=this.columns,i=e.rows,a=e.columns,s=new ne(t*i,r*a);for(let o=0;o<t;o++)for(let u=0;u<r;u++)for(let l=0;l<i;l++)for(let c=0;c<a;c++)s.set(i*o+l,a*u+c,this.get(o,u)*e.get(l,c));return s}kroneckerSum(e){if(e=ne.checkMatrix(e),!this.isSquare()||!e.isSquare())throw new Error("Kronecker Sum needs two Square Matrices");let t=this.rows,r=e.rows,i=this.kroneckerProduct(ne.eye(r,r)),a=ne.eye(t,t).kroneckerProduct(e);return i.add(a)}transpose(){let e=new ne(this.columns,this.rows);for(let t=0;t<this.rows;t++)for(let r=0;r<this.columns;r++)e.set(r,t,this.get(t,r));return e}sortRows(e=o_){for(let t=0;t<this.rows;t++)this.setRow(t,this.getRow(t).sort(e));return this}sortColumns(e=o_){for(let t=0;t<this.columns;t++)this.setColumn(t,this.getColumn(t).sort(e));return this}subMatrix(e,t,r,i){Vb(this,e,t,r,i);let a=new ne(t-e+1,i-r+1);for(let s=e;s<=t;s++)for(let o=r;o<=i;o++)a.set(s-e,o-r,this.get(s,o));return a}subMatrixRow(e,t,r){if(t===void 0&&(t=0),r===void 0&&(r=this.columns-1),t>r||t<0||t>=this.columns||r<0||r>=this.columns)throw new RangeError("Argument out of range");let i=new ne(e.length,r-t+1);for(let a=0;a<e.length;a++)for(let s=t;s<=r;s++){if(e[a]<0||e[a]>=this.rows)throw new RangeError(`Row index out of range: ${e[a]}`);i.set(a,s-t,this.get(e[a],s))}return i}subMatrixColumn(e,t,r){if(t===void 0&&(t=0),r===void 0&&(r=this.rows-1),t>r||t<0||t>=this.rows||r<0||r>=this.rows)throw new RangeError("Argument out of range");let i=new ne(r-t+1,e.length);for(let a=0;a<e.length;a++)for(let s=t;s<=r;s++){if(e[a]<0||e[a]>=this.columns)throw new RangeError(`Column index out of range: ${e[a]}`);i.set(s-t,a,this.get(s,e[a]))}return i}setSubMatrix(e,t,r){if(e=ne.checkMatrix(e),e.isEmpty())return this;let i=t+e.rows-1,a=r+e.columns-1;Vb(this,t,i,r,a);for(let s=0;s<e.rows;s++)for(let o=0;o<e.columns;o++)this.set(t+s,r+o,e.get(s,o));return this}selection(e,t){Rx(this,e),Lx(this,t);let r=new ne(e.length,t.length);for(let i=0;i<e.length;i++){let a=e[i];for(let s=0;s<t.length;s++){let o=t[s];r.set(i,s,this.get(a,o))}}return r}trace(){let e=Math.min(this.rows,this.columns),t=0;for(let r=0;r<e;r++)t+=this.get(r,r);return t}clone(){return this.constructor.copy(this,new ne(this.rows,this.columns))}static copy(e,t){for(const[r,i,a]of e.entries())t.set(r,i,a);return t}sum(e){switch(e){case"row":return wH(this);case"column":return EH(this);case void 0:return _H(this);default:throw new Error(`invalid option: ${e}`)}}product(e){switch(e){case"row":return SH(this);case"column":return kH(this);case void 0:return CH(this);default:throw new Error(`invalid option: ${e}`)}}mean(e){const t=this.sum(e);switch(e){case"row":{for(let r=0;r<this.rows;r++)t[r]/=this.columns;return t}case"column":{for(let r=0;r<this.columns;r++)t[r]/=this.rows;return t}case void 0:return t/this.size;default:throw new Error(`invalid option: ${e}`)}}variance(e,t={}){if(typeof e=="object"&&(t=e,e=void 0),typeof t!="object")throw new TypeError("options must be an object");const{unbiased:r=!0,mean:i=this.mean(e)}=t;if(typeof r!="boolean")throw new TypeError("unbiased must be a boolean");switch(e){case"row":{if(!Kn.isAnyArray(i))throw new TypeError("mean must be an array");return AH(this,r,i)}case"column":{if(!Kn.isAnyArray(i))throw new TypeError("mean must be an array");return TH(this,r,i)}case void 0:{if(typeof i!="number")throw new TypeError("mean must be a number");return OH(this,r,i)}default:throw new Error(`invalid option: ${e}`)}}standardDeviation(e,t){typeof e=="object"&&(t=e,e=void 0);const r=this.variance(e,t);if(e===void 0)return Math.sqrt(r);for(let i=0;i<r.length;i++)r[i]=Math.sqrt(r[i]);return r}center(e,t={}){if(typeof e=="object"&&(t=e,e=void 0),typeof t!="object")throw new TypeError("options must be an object");const{center:r=this.mean(e)}=t;switch(e){case"row":{if(!Kn.isAnyArray(r))throw new TypeError("center must be an array");return MH(this,r),this}case"column":{if(!Kn.isAnyArray(r))throw new TypeError("center must be an array");return PH(this,r),this}case void 0:{if(typeof r!="number")throw new TypeError("center must be a number");return NH(this,r),this}default:throw new Error(`invalid option: ${e}`)}}scale(e,t={}){if(typeof e=="object"&&(t=e,e=void 0),typeof t!="object")throw new TypeError("options must be an object");let r=t.scale;switch(e){case"row":{if(r===void 0)r=DH(this);else if(!Kn.isAnyArray(r))throw new TypeError("scale must be an array");return RH(this,r),this}case"column":{if(r===void 0)r=LH(this);else if(!Kn.isAnyArray(r))throw new TypeError("scale must be an array");return IH(this,r),this}case void 0:{if(r===void 0)r=FH(this);else if(typeof r!="number")throw new TypeError("scale must be a number");return BH(this,r),this}default:throw new Error(`invalid option: ${e}`)}}toString(e){return RP(this,e)}[Symbol.iterator](){return this.entries()}*entries(){for(let e=0;e<this.rows;e++)for(let t=0;t<this.columns;t++)yield[e,t,this.get(e,t)]}*values(){for(let e=0;e<this.rows;e++)for(let t=0;t<this.columns;t++)yield this.get(e,t)}}Me.prototype.klass="Matrix";typeof Symbol<"u"&&(Me.prototype[Symbol.for("nodejs.util.inspect.custom")]=mH);function o_(n,e){return n-e}function zH(n){return n.every(e=>typeof e=="number")}Me.random=Me.rand;Me.randomInt=Me.randInt;Me.diagonal=Me.diag;Me.prototype.diagonal=Me.prototype.diag;Me.identity=Me.eye;Me.prototype.negate=Me.prototype.neg;Me.prototype.tensorProduct=Me.prototype.kroneckerProduct;var ql,Ub,hu;let ne=(hu=class extends Me{constructor(t,r){super();ye(this,ql);ve(this,"data");if(hu.isMatrix(t))ue(this,ql,Ub).call(this,t.rows,t.columns),hu.copy(t,this);else if(Number.isInteger(t)&&t>=0)ue(this,ql,Ub).call(this,t,r);else if(Kn.isAnyArray(t)){const i=t;if(t=i.length,r=t?i[0].length:0,typeof r!="number")throw new TypeError("Data must be a 2D array with at least one element");this.data=[];for(let a=0;a<t;a++){if(i[a].length!==r)throw new RangeError("Inconsistent array dimensions");if(!zH(i[a]))throw new TypeError("Input data contains non-numeric values");this.data.push(Float64Array.from(i[a]))}this.rows=t,this.columns=r}else throw new TypeError("First argument must be a positive number or an array")}set(t,r,i){return this.data[t][r]=i,this}get(t,r){return this.data[t][r]}removeRow(t){return Mr(this,t),this.data.splice(t,1),this.rows-=1,this}addRow(t,r){return r===void 0&&(r=t,t=this.rows),Mr(this,t,!0),r=Float64Array.from(No(this,r)),this.data.splice(t,0,r),this.rows+=1,this}removeColumn(t){Pr(this,t);for(let r=0;r<this.rows;r++){const i=new Float64Array(this.columns-1);for(let a=0;a<t;a++)i[a]=this.data[r][a];for(let a=t+1;a<this.columns;a++)i[a-1]=this.data[r][a];this.data[r]=i}return this.columns-=1,this}addColumn(t,r){typeof r>"u"&&(r=t,t=this.columns),Pr(this,t,!0),r=Do(this,r);for(let i=0;i<this.rows;i++){const a=new Float64Array(this.columns+1);let s=0;for(;s<t;s++)a[s]=this.data[i][s];for(a[s++]=r[i];s<this.columns+1;s++)a[s]=this.data[i][s-1];this.data[i]=a}return this.columns+=1,this}},ql=new WeakSet,Ub=function(t,r){if(this.data=[],Number.isInteger(r)&&r>=0)for(let i=0;i<t;i++)this.data.push(new Float64Array(r));else throw new TypeError("nColumns must be a positive integer");this.rows=t,this.columns=r},hu);xH(Me,ne);var Sn;const Xd=class Xd extends Me{constructor(t){super();ye(this,Sn,void 0);if(ne.isMatrix(t)){if(!t.isSymmetric())throw new TypeError("not symmetric data");fe(this,Sn,ne.copy(t,new ne(t.rows,t.rows)))}else if(Number.isInteger(t)&&t>=0)fe(this,Sn,new ne(t,t));else if(fe(this,Sn,new ne(t)),!this.isSymmetric())throw new TypeError("not symmetric data")}get size(){return I(this,Sn).size}get rows(){return I(this,Sn).rows}get columns(){return I(this,Sn).columns}get diagonalSize(){return this.rows}static isSymmetricMatrix(t){return ne.isMatrix(t)&&t.klassType==="SymmetricMatrix"}static zeros(t){return new this(t)}static ones(t){return new this(t).fill(1)}clone(){const t=new Xd(this.diagonalSize);for(const[r,i,a]of this.upperRightEntries())t.set(r,i,a);return t}toMatrix(){return new ne(this)}get(t,r){return I(this,Sn).get(t,r)}set(t,r,i){return I(this,Sn).set(t,r,i),I(this,Sn).set(r,t,i),this}removeCross(t){return I(this,Sn).removeRow(t),I(this,Sn).removeColumn(t),this}addCross(t,r){r===void 0&&(r=t,t=this.diagonalSize);const i=r.slice();return i.splice(t,1),I(this,Sn).addRow(t,i),I(this,Sn).addColumn(t,r),this}applyMask(t){if(t.length!==this.diagonalSize)throw new RangeError("Mask size do not match with matrix size");const r=[];for(const[i,a]of t.entries())a||r.push(i);r.reverse();for(const i of r)this.removeCross(i);return this}toCompact(){const{diagonalSize:t}=this,r=new Array(t*(t+1)/2);for(let i=0,a=0,s=0;s<r.length;s++)r[s]=this.get(a,i),++i>=t&&(i=++a);return r}static fromCompact(t){const r=t.length,i=(Math.sqrt(8*r+1)-1)/2;if(!Number.isInteger(i))throw new TypeError(`This array is not a compact representation of a Symmetric Matrix, ${JSON.stringify(t)}`);const a=new Xd(i);for(let s=0,o=0,u=0;u<r;u++)a.set(s,o,t[u]),++s>=i&&(s=++o);return a}*upperRightEntries(){for(let t=0,r=0;t<this.diagonalSize;void 0){const i=this.get(t,r);yield[t,r,i],++r>=this.diagonalSize&&(r=++t)}}*upperRightValues(){for(let t=0,r=0;t<this.diagonalSize;void 0)yield this.get(t,r),++r>=this.diagonalSize&&(r=++t)}};Sn=new WeakMap;let Ws=Xd;Ws.prototype.klassType="SymmetricMatrix";class If extends Ws{static isDistanceMatrix(e){return Ws.isSymmetricMatrix(e)&&e.klassSubType==="DistanceMatrix"}constructor(e){if(super(e),!this.isDistance())throw new TypeError("Provided arguments do no produce a distance matrix")}set(e,t,r){return e===t&&(r=0),super.set(e,t,r)}addCross(e,t){return t===void 0&&(t=e,e=this.diagonalSize),t=t.slice(),t[e]=0,super.addCross(e,t)}toSymmetricMatrix(){return new Ws(this)}clone(){const e=new If(this.diagonalSize);for(const[t,r,i]of this.upperRightEntries())t!==r&&e.set(t,r,i);return e}toCompact(){const{diagonalSize:e}=this,t=(e-1)*e/2,r=new Array(t);for(let i=1,a=0,s=0;s<r.length;s++)r[s]=this.get(a,i),++i>=e&&(i=++a+1);return r}static fromCompact(e){const t=e.length;if(t===0)return new this(0);const r=(Math.sqrt(8*t+1)+1)/2;if(!Number.isInteger(r))throw new TypeError(`This array is not a compact representation of a DistanceMatrix, ${JSON.stringify(e)}`);const i=new this(r);for(let a=1,s=0,o=0;o<t;o++)i.set(a,s,e[o]),++a>=r&&(a=++s+1);return i}}If.prototype.klassSubType="DistanceMatrix";class va extends Me{constructor(e,t,r){super(),this.matrix=e,this.rows=t,this.columns=r}}class $H extends va{constructor(e,t){Pr(e,t),super(e,e.rows,1),this.column=t}set(e,t,r){return this.matrix.set(e,this.column,r),this}get(e){return this.matrix.get(e,this.column)}}class jH extends va{constructor(e,t){Lx(e,t),super(e,e.rows,t.length),this.columnIndices=t}set(e,t,r){return this.matrix.set(e,this.columnIndices[t],r),this}get(e,t){return this.matrix.get(e,this.columnIndices[t])}}class qH extends va{constructor(e){super(e,e.rows,e.columns)}set(e,t,r){return this.matrix.set(e,this.columns-t-1,r),this}get(e,t){return this.matrix.get(e,this.columns-t-1)}}class GH extends va{constructor(e){super(e,e.rows,e.columns)}set(e,t,r){return this.matrix.set(this.rows-e-1,t,r),this}get(e,t){return this.matrix.get(this.rows-e-1,t)}}class WH extends va{constructor(e,t){Mr(e,t),super(e,1,e.columns),this.row=t}set(e,t,r){return this.matrix.set(this.row,t,r),this}get(e,t){return this.matrix.get(this.row,t)}}class VH extends va{constructor(e,t){Rx(e,t),super(e,t.length,e.columns),this.rowIndices=t}set(e,t,r){return this.matrix.set(this.rowIndices[e],t,r),this}get(e,t){return this.matrix.get(this.rowIndices[e],t)}}class $h extends va{constructor(e,t,r){Rx(e,t),Lx(e,r),super(e,t.length,r.length),this.rowIndices=t,this.columnIndices=r}set(e,t,r){return this.matrix.set(this.rowIndices[e],this.columnIndices[t],r),this}get(e,t){return this.matrix.get(this.rowIndices[e],this.columnIndices[t])}}class UH extends va{constructor(e,t,r,i,a){Vb(e,t,r,i,a),super(e,r-t+1,a-i+1),this.startRow=t,this.startColumn=i}set(e,t,r){return this.matrix.set(this.startRow+e,this.startColumn+t,r),this}get(e,t){return this.matrix.get(this.startRow+e,this.startColumn+t)}}class HH extends va{constructor(e){super(e,e.columns,e.rows)}set(e,t,r){return this.matrix.set(t,e,r),this}get(e,t){return this.matrix.get(t,e)}}class LP extends Me{constructor(e,t={}){const{rows:r=1}=t;if(e.length%r!==0)throw new Error("the data length is not divisible by the number of rows");super(),this.rows=r,this.columns=e.length/r,this.data=e}set(e,t,r){let i=this._calculateIndex(e,t);return this.data[i]=r,this}get(e,t){let r=this._calculateIndex(e,t);return this.data[r]}_calculateIndex(e,t){return e*this.columns+t}}class xr extends Me{constructor(e){super(),this.data=e,this.rows=e.length,this.columns=e[0].length}set(e,t,r){return this.data[e][t]=r,this}get(e,t){return this.data[e][t]}}function YH(n,e){if(Kn.isAnyArray(n))return n[0]&&Kn.isAnyArray(n[0])?new xr(n):new LP(n,e);throw new Error("the argument is not an array")}class Ff{constructor(e){e=xr.checkMatrix(e);let t=e.clone(),r=t.rows,i=t.columns,a=new Float64Array(r),s=1,o,u,l,c,h,d,f,g,p;for(o=0;o<r;o++)a[o]=o;for(g=new Float64Array(r),u=0;u<i;u++){for(o=0;o<r;o++)g[o]=t.get(o,u);for(o=0;o<r;o++){for(p=Math.min(o,u),h=0,l=0;l<p;l++)h+=t.get(o,l)*g[l];g[o]-=h,t.set(o,u,g[o])}for(c=u,o=u+1;o<r;o++)Math.abs(g[o])>Math.abs(g[c])&&(c=o);if(c!==u){for(l=0;l<i;l++)d=t.get(c,l),t.set(c,l,t.get(u,l)),t.set(u,l,d);f=a[c],a[c]=a[u],a[u]=f,s=-s}if(u<r&&t.get(u,u)!==0)for(o=u+1;o<r;o++)t.set(o,u,t.get(o,u)/t.get(u,u))}this.LU=t,this.pivotVector=a,this.pivotSign=s}isSingular(){let e=this.LU,t=e.columns;for(let r=0;r<t;r++)if(e.get(r,r)===0)return!0;return!1}solve(e){e=ne.checkMatrix(e);let t=this.LU;if(t.rows!==e.rows)throw new Error("Invalid matrix dimensions");if(this.isSingular())throw new Error("LU matrix is singular");let i=e.columns,a=e.subMatrixRow(this.pivotVector,0,i-1),s=t.columns,o,u,l;for(l=0;l<s;l++)for(o=l+1;o<s;o++)for(u=0;u<i;u++)a.set(o,u,a.get(o,u)-a.get(l,u)*t.get(o,l));for(l=s-1;l>=0;l--){for(u=0;u<i;u++)a.set(l,u,a.get(l,u)/t.get(l,l));for(o=0;o<l;o++)for(u=0;u<i;u++)a.set(o,u,a.get(o,u)-a.get(l,u)*t.get(o,l))}return a}get determinant(){let e=this.LU;if(!e.isSquare())throw new Error("Matrix must be square");let t=this.pivotSign,r=e.columns;for(let i=0;i<r;i++)t*=e.get(i,i);return t}get lowerTriangularMatrix(){let e=this.LU,t=e.rows,r=e.columns,i=new ne(t,r);for(let a=0;a<t;a++)for(let s=0;s<r;s++)a>s?i.set(a,s,e.get(a,s)):a===s?i.set(a,s,1):i.set(a,s,0);return i}get upperTriangularMatrix(){let e=this.LU,t=e.rows,r=e.columns,i=new ne(t,r);for(let a=0;a<t;a++)for(let s=0;s<r;s++)a<=s?i.set(a,s,e.get(a,s)):i.set(a,s,0);return i}get pivotPermutationVector(){return Array.from(this.pivotVector)}}function Yi(n,e){let t=0;return Math.abs(n)>Math.abs(e)?(t=e/n,Math.abs(n)*Math.sqrt(1+t*t)):e!==0?(t=n/e,Math.abs(e)*Math.sqrt(1+t*t)):0}class Ix{constructor(e){e=xr.checkMatrix(e);let t=e.clone(),r=e.rows,i=e.columns,a=new Float64Array(i),s,o,u,l;for(u=0;u<i;u++){let c=0;for(s=u;s<r;s++)c=Yi(c,t.get(s,u));if(c!==0){for(t.get(u,u)<0&&(c=-c),s=u;s<r;s++)t.set(s,u,t.get(s,u)/c);for(t.set(u,u,t.get(u,u)+1),o=u+1;o<i;o++){for(l=0,s=u;s<r;s++)l+=t.get(s,u)*t.get(s,o);for(l=-l/t.get(u,u),s=u;s<r;s++)t.set(s,o,t.get(s,o)+l*t.get(s,u))}}a[u]=-c}this.QR=t,this.Rdiag=a}solve(e){e=ne.checkMatrix(e);let t=this.QR,r=t.rows;if(e.rows!==r)throw new Error("Matrix row dimensions must agree");if(!this.isFullRank())throw new Error("Matrix is rank deficient");let i=e.columns,a=e.clone(),s=t.columns,o,u,l,c;for(l=0;l<s;l++)for(u=0;u<i;u++){for(c=0,o=l;o<r;o++)c+=t.get(o,l)*a.get(o,u);for(c=-c/t.get(l,l),o=l;o<r;o++)a.set(o,u,a.get(o,u)+c*t.get(o,l))}for(l=s-1;l>=0;l--){for(u=0;u<i;u++)a.set(l,u,a.get(l,u)/this.Rdiag[l]);for(o=0;o<l;o++)for(u=0;u<i;u++)a.set(o,u,a.get(o,u)-a.get(l,u)*t.get(o,l))}return a.subMatrix(0,s-1,0,i-1)}isFullRank(){let e=this.QR.columns;for(let t=0;t<e;t++)if(this.Rdiag[t]===0)return!1;return!0}get upperTriangularMatrix(){let e=this.QR,t=e.columns,r=new ne(t,t),i,a;for(i=0;i<t;i++)for(a=0;a<t;a++)i<a?r.set(i,a,e.get(i,a)):i===a?r.set(i,a,this.Rdiag[i]):r.set(i,a,0);return r}get orthogonalMatrix(){let e=this.QR,t=e.rows,r=e.columns,i=new ne(t,r),a,s,o,u;for(o=r-1;o>=0;o--){for(a=0;a<t;a++)i.set(a,o,0);for(i.set(o,o,1),s=o;s<r;s++)if(e.get(o,o)!==0){for(u=0,a=o;a<t;a++)u+=e.get(a,o)*i.get(a,s);for(u=-u/e.get(o,o),a=o;a<t;a++)i.set(a,s,i.get(a,s)+u*e.get(a,o))}}return i}}let mu=class{constructor(e,t={}){if(e=xr.checkMatrix(e),e.isEmpty())throw new Error("Matrix must be non-empty");let r=e.rows,i=e.columns;const{computeLeftSingularVectors:a=!0,computeRightSingularVectors:s=!0,autoTranspose:o=!1}=t;let u=!!a,l=!!s,c=!1,h;if(r<i)if(!o)h=e.clone(),console.warn("Computing SVD on a matrix with more columns than rows. Consider enabling autoTranspose");else{h=e.transpose(),r=h.rows,i=h.columns,c=!0;let k=u;u=l,l=k}else h=e.clone();let d=Math.min(r,i),f=Math.min(r+1,i),g=new Float64Array(f),p=new ne(r,d),v=new ne(i,i),m=new Float64Array(i),y=new Float64Array(r),b=new Float64Array(f);for(let k=0;k<f;k++)b[k]=k;let x=Math.min(r-1,i),w=Math.max(0,Math.min(i-2,r)),E=Math.max(x,w);for(let k=0;k<E;k++){if(k<x){g[k]=0;for(let A=k;A<r;A++)g[k]=Yi(g[k],h.get(A,k));if(g[k]!==0){h.get(k,k)<0&&(g[k]=-g[k]);for(let A=k;A<r;A++)h.set(A,k,h.get(A,k)/g[k]);h.set(k,k,h.get(k,k)+1)}g[k]=-g[k]}for(let A=k+1;A<i;A++){if(k<x&&g[k]!==0){let T=0;for(let O=k;O<r;O++)T+=h.get(O,k)*h.get(O,A);T=-T/h.get(k,k);for(let O=k;O<r;O++)h.set(O,A,h.get(O,A)+T*h.get(O,k))}m[A]=h.get(k,A)}if(u&&k<x)for(let A=k;A<r;A++)p.set(A,k,h.get(A,k));if(k<w){m[k]=0;for(let A=k+1;A<i;A++)m[k]=Yi(m[k],m[A]);if(m[k]!==0){m[k+1]<0&&(m[k]=0-m[k]);for(let A=k+1;A<i;A++)m[A]/=m[k];m[k+1]+=1}if(m[k]=-m[k],k+1<r&&m[k]!==0){for(let A=k+1;A<r;A++)y[A]=0;for(let A=k+1;A<r;A++)for(let T=k+1;T<i;T++)y[A]+=m[T]*h.get(A,T);for(let A=k+1;A<i;A++){let T=-m[A]/m[k+1];for(let O=k+1;O<r;O++)h.set(O,A,h.get(O,A)+T*y[O])}}if(l)for(let A=k+1;A<i;A++)v.set(A,k,m[A])}}let _=Math.min(i,r+1);if(x<i&&(g[x]=h.get(x,x)),r<_&&(g[_-1]=0),w+1<_&&(m[w]=h.get(w,_-1)),m[_-1]=0,u){for(let k=x;k<d;k++){for(let A=0;A<r;A++)p.set(A,k,0);p.set(k,k,1)}for(let k=x-1;k>=0;k--)if(g[k]!==0){for(let A=k+1;A<d;A++){let T=0;for(let O=k;O<r;O++)T+=p.get(O,k)*p.get(O,A);T=-T/p.get(k,k);for(let O=k;O<r;O++)p.set(O,A,p.get(O,A)+T*p.get(O,k))}for(let A=k;A<r;A++)p.set(A,k,-p.get(A,k));p.set(k,k,1+p.get(k,k));for(let A=0;A<k-1;A++)p.set(A,k,0)}else{for(let A=0;A<r;A++)p.set(A,k,0);p.set(k,k,1)}}if(l)for(let k=i-1;k>=0;k--){if(k<w&&m[k]!==0)for(let A=k+1;A<i;A++){let T=0;for(let O=k+1;O<i;O++)T+=v.get(O,k)*v.get(O,A);T=-T/v.get(k+1,k);for(let O=k+1;O<i;O++)v.set(O,A,v.get(O,A)+T*v.get(O,k))}for(let A=0;A<i;A++)v.set(A,k,0);v.set(k,k,1)}let S=_-1,C=Number.EPSILON;for(;_>0;){let k,A;for(k=_-2;k>=-1&&k!==-1;k--){const T=Number.MIN_VALUE+C*Math.abs(g[k]+Math.abs(g[k+1]));if(Math.abs(m[k])<=T||Number.isNaN(m[k])){m[k]=0;break}}if(k===_-2)A=4;else{let T;for(T=_-1;T>=k&&T!==k;T--){let O=(T!==_?Math.abs(m[T]):0)+(T!==k+1?Math.abs(m[T-1]):0);if(Math.abs(g[T])<=C*O){g[T]=0;break}}T===k?A=3:T===_-1?A=1:(A=2,k=T)}switch(k++,A){case 1:{let T=m[_-2];m[_-2]=0;for(let O=_-2;O>=k;O--){let P=Yi(g[O],T),R=g[O]/P,N=T/P;if(g[O]=P,O!==k&&(T=-N*m[O-1],m[O-1]=R*m[O-1]),l)for(let D=0;D<i;D++)P=R*v.get(D,O)+N*v.get(D,_-1),v.set(D,_-1,-N*v.get(D,O)+R*v.get(D,_-1)),v.set(D,O,P)}break}case 2:{let T=m[k-1];m[k-1]=0;for(let O=k;O<_;O++){let P=Yi(g[O],T),R=g[O]/P,N=T/P;if(g[O]=P,T=-N*m[O],m[O]=R*m[O],u)for(let D=0;D<r;D++)P=R*p.get(D,O)+N*p.get(D,k-1),p.set(D,k-1,-N*p.get(D,O)+R*p.get(D,k-1)),p.set(D,O,P)}break}case 3:{const T=Math.max(Math.abs(g[_-1]),Math.abs(g[_-2]),Math.abs(m[_-2]),Math.abs(g[k]),Math.abs(m[k])),O=g[_-1]/T,P=g[_-2]/T,R=m[_-2]/T,N=g[k]/T,D=m[k]/T,M=((P+O)*(P-O)+R*R)/2,F=O*R*(O*R);let j=0;(M!==0||F!==0)&&(M<0?j=0-Math.sqrt(M*M+F):j=Math.sqrt(M*M+F),j=F/(M+j));let B=(N+O)*(N-O)+j,$=N*D;for(let W=k;W<_-1;W++){let Y=Yi(B,$);Y===0&&(Y=Number.MIN_VALUE);let K=B/Y,ee=$/Y;if(W!==k&&(m[W-1]=Y),B=K*g[W]+ee*m[W],m[W]=K*m[W]-ee*g[W],$=ee*g[W+1],g[W+1]=K*g[W+1],l)for(let ie=0;ie<i;ie++)Y=K*v.get(ie,W)+ee*v.get(ie,W+1),v.set(ie,W+1,-ee*v.get(ie,W)+K*v.get(ie,W+1)),v.set(ie,W,Y);if(Y=Yi(B,$),Y===0&&(Y=Number.MIN_VALUE),K=B/Y,ee=$/Y,g[W]=Y,B=K*m[W]+ee*g[W+1],g[W+1]=-ee*m[W]+K*g[W+1],$=ee*m[W+1],m[W+1]=K*m[W+1],u&&W<r-1)for(let ie=0;ie<r;ie++)Y=K*p.get(ie,W)+ee*p.get(ie,W+1),p.set(ie,W+1,-ee*p.get(ie,W)+K*p.get(ie,W+1)),p.set(ie,W,Y)}m[_-2]=B;break}case 4:{if(g[k]<=0&&(g[k]=g[k]<0?-g[k]:0,l))for(let T=0;T<=S;T++)v.set(T,k,-v.get(T,k));for(;k<S&&!(g[k]>=g[k+1]);){let T=g[k];if(g[k]=g[k+1],g[k+1]=T,l&&k<i-1)for(let O=0;O<i;O++)T=v.get(O,k+1),v.set(O,k+1,v.get(O,k)),v.set(O,k,T);if(u&&k<r-1)for(let O=0;O<r;O++)T=p.get(O,k+1),p.set(O,k+1,p.get(O,k)),p.set(O,k,T);k++}_--;break}}}if(c){let k=v;v=p,p=k}this.m=r,this.n=i,this.s=g,this.U=p,this.V=v}solve(e){let t=e,r=this.threshold,i=this.s.length,a=ne.zeros(i,i);for(let d=0;d<i;d++)Math.abs(this.s[d])<=r?a.set(d,d,0):a.set(d,d,1/this.s[d]);let s=this.U,o=this.rightSingularVectors,u=o.mmul(a),l=o.rows,c=s.rows,h=ne.zeros(l,c);for(let d=0;d<l;d++)for(let f=0;f<c;f++){let g=0;for(let p=0;p<i;p++)g+=u.get(d,p)*s.get(f,p);h.set(d,f,g)}return h.mmul(t)}solveForDiagonal(e){return this.solve(ne.diag(e))}inverse(){let e=this.V,t=this.threshold,r=e.rows,i=e.columns,a=new ne(r,this.s.length);for(let c=0;c<r;c++)for(let h=0;h<i;h++)Math.abs(this.s[h])>t&&a.set(c,h,e.get(c,h)/this.s[h]);let s=this.U,o=s.rows,u=s.columns,l=new ne(r,o);for(let c=0;c<r;c++)for(let h=0;h<o;h++){let d=0;for(let f=0;f<u;f++)d+=a.get(c,f)*s.get(h,f);l.set(c,h,d)}return l}get condition(){return this.s[0]/this.s[Math.min(this.m,this.n)-1]}get norm2(){return this.s[0]}get rank(){let e=Math.max(this.m,this.n)*this.s[0]*Number.EPSILON,t=0,r=this.s;for(let i=0,a=r.length;i<a;i++)r[i]>e&&t++;return t}get diagonal(){return Array.from(this.s)}get threshold(){return Number.EPSILON/2*Math.max(this.m,this.n)*this.s[0]}get leftSingularVectors(){return this.U}get rightSingularVectors(){return this.V}get diagonalMatrix(){return ne.diag(this.s)}};function XH(n,e=!1){return n=xr.checkMatrix(n),e?new mu(n).inverse():IP(n,ne.eye(n.rows))}function IP(n,e,t=!1){return n=xr.checkMatrix(n),e=xr.checkMatrix(e),t?new mu(n).solve(e):n.isSquare()?new Ff(n).solve(e):new Ix(n).solve(e)}function jh(n){if(n=ne.checkMatrix(n),n.isSquare()){if(n.columns===0)return 1;let e,t,r,i;if(n.columns===2)return e=n.get(0,0),t=n.get(0,1),r=n.get(1,0),i=n.get(1,1),e*i-t*r;if(n.columns===3){let a,s,o;return a=new $h(n,[1,2],[1,2]),s=new $h(n,[1,2],[0,2]),o=new $h(n,[1,2],[0,1]),e=n.get(0,0),t=n.get(0,1),r=n.get(0,2),e*jh(a)-t*jh(s)+r*jh(o)}else return new Ff(n).determinant}else throw Error("determinant can only be calculated for a square matrix")}function KH(n,e){let t=[];for(let r=0;r<n;r++)r!==e&&t.push(r);return t}function ZH(n,e,t,r=1e-9,i=1e-9){if(n>i)return new Array(e.rows+1).fill(0);{let a=e.addRow(t,[0]);for(let s=0;s<a.rows;s++)Math.abs(a.get(s,0))<r&&a.set(s,0,0);return a.to1DArray()}}function JH(n,e={}){const{thresholdValue:t=1e-9,thresholdError:r=1e-9}=e;n=ne.checkMatrix(n);let i=n.rows,a=new ne(i,i);for(let s=0;s<i;s++){let o=ne.columnVector(n.getRow(s)),u=n.subMatrixRow(KH(i,s)).transpose(),c=new mu(u).solve(o),h=ne.sub(o,u.mmul(c)).abs().max();a.setRow(s,ZH(h,c,s,t,r))}return a}function QH(n,e=Number.EPSILON){if(n=ne.checkMatrix(n),n.isEmpty())return n.transpose();let t=new mu(n,{autoTranspose:!0}),r=t.leftSingularVectors,i=t.rightSingularVectors,a=t.diagonal;for(let s=0;s<a.length;s++)Math.abs(a[s])>e?a[s]=1/a[s]:a[s]=0;return i.mmul(ne.diag(a).mmul(r.transpose()))}function eY(n,e=n,t={}){n=new ne(n);let r=!1;if(typeof e=="object"&&!ne.isMatrix(e)&&!Kn.isAnyArray(e)?(t=e,e=n,r=!0):e=new ne(e),n.rows!==e.rows)throw new TypeError("Both matrices must have the same number of rows");const{center:i=!0}=t;i&&(n=n.center("column"),r||(e=e.center("column")));const a=n.transpose().mmul(e);for(let s=0;s<a.rows;s++)for(let o=0;o<a.columns;o++)a.set(s,o,a.get(s,o)*(1/(n.rows-1)));return a}function tY(n,e=n,t={}){n=new ne(n);let r=!1;if(typeof e=="object"&&!ne.isMatrix(e)&&!Kn.isAnyArray(e)?(t=e,e=n,r=!0):e=new ne(e),n.rows!==e.rows)throw new TypeError("Both matrices must have the same number of rows");const{center:i=!0,scale:a=!0}=t;i&&(n.center("column"),r||e.center("column")),a&&(n.scale("column"),r||e.scale("column"));const s=n.standardDeviation("column",{unbiased:!0}),o=r?s:e.standardDeviation("column",{unbiased:!0}),u=n.transpose().mmul(e);for(let l=0;l<u.rows;l++)for(let c=0;c<u.columns;c++)u.set(l,c,u.get(l,c)*(1/(s[l]*o[c]))*(1/(n.rows-1)));return u}class FP{constructor(e,t={}){const{assumeSymmetric:r=!1}=t;if(e=xr.checkMatrix(e),!e.isSquare())throw new Error("Matrix is not a square matrix");if(e.isEmpty())throw new Error("Matrix must be non-empty");let i=e.columns,a=new ne(i,i),s=new Float64Array(i),o=new Float64Array(i),u=e,l,c,h=!1;if(r?h=!0:h=e.isSymmetric(),h){for(l=0;l<i;l++)for(c=0;c<i;c++)a.set(l,c,u.get(l,c));nY(i,o,s,a),rY(i,o,s,a)}else{let d=new ne(i,i),f=new Float64Array(i);for(c=0;c<i;c++)for(l=0;l<i;l++)d.set(l,c,u.get(l,c));iY(i,d,f,a),aY(i,o,s,a,d)}this.n=i,this.e=o,this.d=s,this.V=a}get realEigenvalues(){return Array.from(this.d)}get imaginaryEigenvalues(){return Array.from(this.e)}get eigenvectorMatrix(){return this.V}get diagonalMatrix(){let e=this.n,t=this.e,r=this.d,i=new ne(e,e),a,s;for(a=0;a<e;a++){for(s=0;s<e;s++)i.set(a,s,0);i.set(a,a,r[a]),t[a]>0?i.set(a,a+1,t[a]):t[a]<0&&i.set(a,a-1,t[a])}return i}}function nY(n,e,t,r){let i,a,s,o,u,l,c,h;for(u=0;u<n;u++)t[u]=r.get(n-1,u);for(o=n-1;o>0;o--){for(h=0,s=0,l=0;l<o;l++)h=h+Math.abs(t[l]);if(h===0)for(e[o]=t[o-1],u=0;u<o;u++)t[u]=r.get(o-1,u),r.set(o,u,0),r.set(u,o,0);else{for(l=0;l<o;l++)t[l]/=h,s+=t[l]*t[l];for(i=t[o-1],a=Math.sqrt(s),i>0&&(a=-a),e[o]=h*a,s=s-i*a,t[o-1]=i-a,u=0;u<o;u++)e[u]=0;for(u=0;u<o;u++){for(i=t[u],r.set(u,o,i),a=e[u]+r.get(u,u)*i,l=u+1;l<=o-1;l++)a+=r.get(l,u)*t[l],e[l]+=r.get(l,u)*i;e[u]=a}for(i=0,u=0;u<o;u++)e[u]/=s,i+=e[u]*t[u];for(c=i/(s+s),u=0;u<o;u++)e[u]-=c*t[u];for(u=0;u<o;u++){for(i=t[u],a=e[u],l=u;l<=o-1;l++)r.set(l,u,r.get(l,u)-(i*e[l]+a*t[l]));t[u]=r.get(o-1,u),r.set(o,u,0)}}t[o]=s}for(o=0;o<n-1;o++){if(r.set(n-1,o,r.get(o,o)),r.set(o,o,1),s=t[o+1],s!==0){for(l=0;l<=o;l++)t[l]=r.get(l,o+1)/s;for(u=0;u<=o;u++){for(a=0,l=0;l<=o;l++)a+=r.get(l,o+1)*r.get(l,u);for(l=0;l<=o;l++)r.set(l,u,r.get(l,u)-a*t[l])}}for(l=0;l<=o;l++)r.set(l,o+1,0)}for(u=0;u<n;u++)t[u]=r.get(n-1,u),r.set(n-1,u,0);r.set(n-1,n-1,1),e[0]=0}function rY(n,e,t,r){let i,a,s,o,u,l,c,h,d,f,g,p,v,m,y,b;for(s=1;s<n;s++)e[s-1]=e[s];e[n-1]=0;let x=0,w=0,E=Number.EPSILON;for(l=0;l<n;l++){for(w=Math.max(w,Math.abs(t[l])+Math.abs(e[l])),c=l;c<n&&!(Math.abs(e[c])<=E*w);)c++;if(c>l)do{for(i=t[l],h=(t[l+1]-i)/(2*e[l]),d=Yi(h,1),h<0&&(d=-d),t[l]=e[l]/(h+d),t[l+1]=e[l]*(h+d),f=t[l+1],a=i-t[l],s=l+2;s<n;s++)t[s]-=a;for(x=x+a,h=t[c],g=1,p=g,v=g,m=e[l+1],y=0,b=0,s=c-1;s>=l;s--)for(v=p,p=g,b=y,i=g*e[s],a=g*h,d=Yi(h,e[s]),e[s+1]=y*d,y=e[s]/d,g=h/d,h=g*t[s]-y*i,t[s+1]=a+y*(g*i+y*t[s]),u=0;u<n;u++)a=r.get(u,s+1),r.set(u,s+1,y*r.get(u,s)+g*a),r.set(u,s,g*r.get(u,s)-y*a);h=-y*b*v*m*e[l]/f,e[l]=y*h,t[l]=g*h}while(Math.abs(e[l])>E*w);t[l]=t[l]+x,e[l]=0}for(s=0;s<n-1;s++){for(u=s,h=t[s],o=s+1;o<n;o++)t[o]<h&&(u=o,h=t[o]);if(u!==s)for(t[u]=t[s],t[s]=h,o=0;o<n;o++)h=r.get(o,s),r.set(o,s,r.get(o,u)),r.set(o,u,h)}}function iY(n,e,t,r){let i=0,a=n-1,s,o,u,l,c,h,d;for(h=i+1;h<=a-1;h++){for(d=0,l=h;l<=a;l++)d=d+Math.abs(e.get(l,h-1));if(d!==0){for(u=0,l=a;l>=h;l--)t[l]=e.get(l,h-1)/d,u+=t[l]*t[l];for(o=Math.sqrt(u),t[h]>0&&(o=-o),u=u-t[h]*o,t[h]=t[h]-o,c=h;c<n;c++){for(s=0,l=a;l>=h;l--)s+=t[l]*e.get(l,c);for(s=s/u,l=h;l<=a;l++)e.set(l,c,e.get(l,c)-s*t[l])}for(l=0;l<=a;l++){for(s=0,c=a;c>=h;c--)s+=t[c]*e.get(l,c);for(s=s/u,c=h;c<=a;c++)e.set(l,c,e.get(l,c)-s*t[c])}t[h]=d*t[h],e.set(h,h-1,d*o)}}for(l=0;l<n;l++)for(c=0;c<n;c++)r.set(l,c,l===c?1:0);for(h=a-1;h>=i+1;h--)if(e.get(h,h-1)!==0){for(l=h+1;l<=a;l++)t[l]=e.get(l,h-1);for(c=h;c<=a;c++){for(o=0,l=h;l<=a;l++)o+=t[l]*r.get(l,c);for(o=o/t[h]/e.get(h,h-1),l=h;l<=a;l++)r.set(l,c,r.get(l,c)+o*t[l])}}}function aY(n,e,t,r,i){let a=n-1,s=0,o=n-1,u=Number.EPSILON,l=0,c=0,h=0,d=0,f=0,g=0,p=0,v=0,m,y,b,x,w,E,_,S,C,k,A,T,O,P,R;for(m=0;m<n;m++)for((m<s||m>o)&&(t[m]=i.get(m,m),e[m]=0),y=Math.max(m-1,0);y<n;y++)c=c+Math.abs(i.get(m,y));for(;a>=s;){for(x=a;x>s&&(g=Math.abs(i.get(x-1,x-1))+Math.abs(i.get(x,x)),g===0&&(g=c),!(Math.abs(i.get(x,x-1))<u*g));)x--;if(x===a)i.set(a,a,i.get(a,a)+l),t[a]=i.get(a,a),e[a]=0,a--,v=0;else if(x===a-1){if(_=i.get(a,a-1)*i.get(a-1,a),h=(i.get(a-1,a-1)-i.get(a,a))/2,d=h*h+_,p=Math.sqrt(Math.abs(d)),i.set(a,a,i.get(a,a)+l),i.set(a-1,a-1,i.get(a-1,a-1)+l),S=i.get(a,a),d>=0){for(p=h>=0?h+p:h-p,t[a-1]=S+p,t[a]=t[a-1],p!==0&&(t[a]=S-_/p),e[a-1]=0,e[a]=0,S=i.get(a,a-1),g=Math.abs(S)+Math.abs(p),h=S/g,d=p/g,f=Math.sqrt(h*h+d*d),h=h/f,d=d/f,y=a-1;y<n;y++)p=i.get(a-1,y),i.set(a-1,y,d*p+h*i.get(a,y)),i.set(a,y,d*i.get(a,y)-h*p);for(m=0;m<=a;m++)p=i.get(m,a-1),i.set(m,a-1,d*p+h*i.get(m,a)),i.set(m,a,d*i.get(m,a)-h*p);for(m=s;m<=o;m++)p=r.get(m,a-1),r.set(m,a-1,d*p+h*r.get(m,a)),r.set(m,a,d*r.get(m,a)-h*p)}else t[a-1]=S+h,t[a]=S+h,e[a-1]=p,e[a]=-p;a=a-2,v=0}else{if(S=i.get(a,a),C=0,_=0,x<a&&(C=i.get(a-1,a-1),_=i.get(a,a-1)*i.get(a-1,a)),v===10){for(l+=S,m=s;m<=a;m++)i.set(m,m,i.get(m,m)-S);g=Math.abs(i.get(a,a-1))+Math.abs(i.get(a-1,a-2)),S=C=.75*g,_=-.4375*g*g}if(v===30&&(g=(C-S)/2,g=g*g+_,g>0)){for(g=Math.sqrt(g),C<S&&(g=-g),g=S-_/((C-S)/2+g),m=s;m<=a;m++)i.set(m,m,i.get(m,m)-g);l+=g,S=C=_=.964}for(v=v+1,w=a-2;w>=x&&(p=i.get(w,w),f=S-p,g=C-p,h=(f*g-_)/i.get(w+1,w)+i.get(w,w+1),d=i.get(w+1,w+1)-p-f-g,f=i.get(w+2,w+1),g=Math.abs(h)+Math.abs(d)+Math.abs(f),h=h/g,d=d/g,f=f/g,!(w===x||Math.abs(i.get(w,w-1))*(Math.abs(d)+Math.abs(f))<u*(Math.abs(h)*(Math.abs(i.get(w-1,w-1))+Math.abs(p)+Math.abs(i.get(w+1,w+1))))));)w--;for(m=w+2;m<=a;m++)i.set(m,m-2,0),m>w+2&&i.set(m,m-3,0);for(b=w;b<=a-1&&(P=b!==a-1,b!==w&&(h=i.get(b,b-1),d=i.get(b+1,b-1),f=P?i.get(b+2,b-1):0,S=Math.abs(h)+Math.abs(d)+Math.abs(f),S!==0&&(h=h/S,d=d/S,f=f/S)),S!==0);b++)if(g=Math.sqrt(h*h+d*d+f*f),h<0&&(g=-g),g!==0){for(b!==w?i.set(b,b-1,-g*S):x!==w&&i.set(b,b-1,-i.get(b,b-1)),h=h+g,S=h/g,C=d/g,p=f/g,d=d/h,f=f/h,y=b;y<n;y++)h=i.get(b,y)+d*i.get(b+1,y),P&&(h=h+f*i.get(b+2,y),i.set(b+2,y,i.get(b+2,y)-h*p)),i.set(b,y,i.get(b,y)-h*S),i.set(b+1,y,i.get(b+1,y)-h*C);for(m=0;m<=Math.min(a,b+3);m++)h=S*i.get(m,b)+C*i.get(m,b+1),P&&(h=h+p*i.get(m,b+2),i.set(m,b+2,i.get(m,b+2)-h*f)),i.set(m,b,i.get(m,b)-h),i.set(m,b+1,i.get(m,b+1)-h*d);for(m=s;m<=o;m++)h=S*r.get(m,b)+C*r.get(m,b+1),P&&(h=h+p*r.get(m,b+2),r.set(m,b+2,r.get(m,b+2)-h*f)),r.set(m,b,r.get(m,b)-h),r.set(m,b+1,r.get(m,b+1)-h*d)}}}if(c!==0){for(a=n-1;a>=0;a--)if(h=t[a],d=e[a],d===0)for(x=a,i.set(a,a,1),m=a-1;m>=0;m--){for(_=i.get(m,m)-h,f=0,y=x;y<=a;y++)f=f+i.get(m,y)*i.get(y,a);if(e[m]<0)p=_,g=f;else if(x=m,e[m]===0?i.set(m,a,_!==0?-f/_:-f/(u*c)):(S=i.get(m,m+1),C=i.get(m+1,m),d=(t[m]-h)*(t[m]-h)+e[m]*e[m],E=(S*g-p*f)/d,i.set(m,a,E),i.set(m+1,a,Math.abs(S)>Math.abs(p)?(-f-_*E)/S:(-g-C*E)/p)),E=Math.abs(i.get(m,a)),u*E*E>1)for(y=m;y<=a;y++)i.set(y,a,i.get(y,a)/E)}else if(d<0)for(x=a-1,Math.abs(i.get(a,a-1))>Math.abs(i.get(a-1,a))?(i.set(a-1,a-1,d/i.get(a,a-1)),i.set(a-1,a,-(i.get(a,a)-h)/i.get(a,a-1))):(R=dh(0,-i.get(a-1,a),i.get(a-1,a-1)-h,d),i.set(a-1,a-1,R[0]),i.set(a-1,a,R[1])),i.set(a,a-1,0),i.set(a,a,1),m=a-2;m>=0;m--){for(k=0,A=0,y=x;y<=a;y++)k=k+i.get(m,y)*i.get(y,a-1),A=A+i.get(m,y)*i.get(y,a);if(_=i.get(m,m)-h,e[m]<0)p=_,f=k,g=A;else if(x=m,e[m]===0?(R=dh(-k,-A,_,d),i.set(m,a-1,R[0]),i.set(m,a,R[1])):(S=i.get(m,m+1),C=i.get(m+1,m),T=(t[m]-h)*(t[m]-h)+e[m]*e[m]-d*d,O=(t[m]-h)*2*d,T===0&&O===0&&(T=u*c*(Math.abs(_)+Math.abs(d)+Math.abs(S)+Math.abs(C)+Math.abs(p))),R=dh(S*f-p*k+d*A,S*g-p*A-d*k,T,O),i.set(m,a-1,R[0]),i.set(m,a,R[1]),Math.abs(S)>Math.abs(p)+Math.abs(d)?(i.set(m+1,a-1,(-k-_*i.get(m,a-1)+d*i.get(m,a))/S),i.set(m+1,a,(-A-_*i.get(m,a)-d*i.get(m,a-1))/S)):(R=dh(-f-C*i.get(m,a-1),-g-C*i.get(m,a),p,d),i.set(m+1,a-1,R[0]),i.set(m+1,a,R[1]))),E=Math.max(Math.abs(i.get(m,a-1)),Math.abs(i.get(m,a))),u*E*E>1)for(y=m;y<=a;y++)i.set(y,a-1,i.get(y,a-1)/E),i.set(y,a,i.get(y,a)/E)}for(m=0;m<n;m++)if(m<s||m>o)for(y=m;y<n;y++)r.set(m,y,i.get(m,y));for(y=n-1;y>=s;y--)for(m=s;m<=o;m++){for(p=0,b=s;b<=Math.min(y,o);b++)p=p+r.get(m,b)*i.get(b,y);r.set(m,y,p)}}}function dh(n,e,t,r){let i,a;return Math.abs(t)>Math.abs(r)?(i=r/t,a=t+i*r,[(n+i*e)/a,(e-i*n)/a]):(i=t/r,a=r+i*t,[(i*n+e)/a,(i*e-n)/a])}class BP{constructor(e){if(e=xr.checkMatrix(e),!e.isSymmetric())throw new Error("Matrix is not symmetric");let t=e,r=t.rows,i=new ne(r,r),a=!0,s,o,u;for(o=0;o<r;o++){let l=0;for(u=0;u<o;u++){let c=0;for(s=0;s<u;s++)c+=i.get(u,s)*i.get(o,s);c=(t.get(o,u)-c)/i.get(u,u),i.set(o,u,c),l=l+c*c}for(l=t.get(o,o)-l,a&&(a=l>0),i.set(o,o,Math.sqrt(Math.max(l,0))),u=o+1;u<r;u++)i.set(o,u,0)}this.L=i,this.positiveDefinite=a}isPositiveDefinite(){return this.positiveDefinite}solve(e){e=xr.checkMatrix(e);let t=this.L,r=t.rows;if(e.rows!==r)throw new Error("Matrix dimensions do not match");if(this.isPositiveDefinite()===!1)throw new Error("Matrix is not positive definite");let i=e.columns,a=e.clone(),s,o,u;for(u=0;u<r;u++)for(o=0;o<i;o++){for(s=0;s<u;s++)a.set(u,o,a.get(u,o)-a.get(s,o)*t.get(u,s));a.set(u,o,a.get(u,o)/t.get(u,u))}for(u=r-1;u>=0;u--)for(o=0;o<i;o++){for(s=u+1;s<r;s++)a.set(u,o,a.get(u,o)-a.get(s,o)*t.get(s,u));a.set(u,o,a.get(u,o)/t.get(u,u))}return a}get lowerTriangularMatrix(){return this.L}}class zP{constructor(e,t={}){e=xr.checkMatrix(e);let{Y:r}=t;const{scaleScores:i=!1,maxIterations:a=1e3,terminationCriteria:s=1e-10}=t;let o;if(r){if(Kn.isAnyArray(r)&&typeof r[0]=="number"?r=ne.columnVector(r):r=xr.checkMatrix(r),r.rows!==e.rows)throw new Error("Y should have the same number of rows as X");o=r.getColumnVector(0)}else o=e.getColumnVector(0);let u=1,l,c,h,d;for(let f=0;f<a&&u>s;f++)h=e.transpose().mmul(o).div(o.transpose().mmul(o).get(0,0)),h=h.div(h.norm()),l=e.mmul(h).div(h.transpose().mmul(h).get(0,0)),f>0&&(u=l.clone().sub(d).pow(2).sum()),d=l.clone(),r?(c=r.transpose().mmul(l).div(l.transpose().mmul(l).get(0,0)),c=c.div(c.norm()),o=r.mmul(c).div(c.transpose().mmul(c).get(0,0))):o=l;if(r){let f=e.transpose().mmul(l).div(l.transpose().mmul(l).get(0,0));f=f.div(f.norm());let g=e.clone().sub(l.clone().mmul(f.transpose())),p=o.transpose().mmul(l).div(l.transpose().mmul(l).get(0,0)),v=r.clone().sub(l.clone().mulS(p.get(0,0)).mmul(c.transpose()));this.t=l,this.p=f.transpose(),this.w=h.transpose(),this.q=c,this.u=o,this.s=l.transpose().mmul(l),this.xResidual=g,this.yResidual=v,this.betas=p}else this.w=h.transpose(),this.s=l.transpose().mmul(l).sqrt(),i?this.t=l.clone().div(this.s.get(0,0)):this.t=l,this.xResidual=e.sub(l.mmul(h.transpose()))}}$e.AbstractMatrix=Me;$e.CHO=BP;$e.CholeskyDecomposition=BP;$e.DistanceMatrix=If;$e.EVD=FP;$e.EigenvalueDecomposition=FP;$e.LU=Ff;$e.LuDecomposition=Ff;var $P=$e.Matrix=ne;$e.MatrixColumnSelectionView=jH;$e.MatrixColumnView=$H;$e.MatrixFlipColumnView=qH;$e.MatrixFlipRowView=GH;$e.MatrixRowSelectionView=VH;$e.MatrixRowView=WH;$e.MatrixSelectionView=$h;$e.MatrixSubView=UH;$e.MatrixTransposeView=HH;$e.NIPALS=zP;$e.Nipals=zP;$e.QR=Ix;$e.QrDecomposition=Ix;$e.SVD=mu;var sY=$e.SingularValueDecomposition=mu;$e.SymmetricMatrix=Ws;$e.WrapperMatrix1D=LP;$e.WrapperMatrix2D=xr;$e.correlation=tY;$e.covariance=eY;var u_=$e.default=ne;$e.determinant=jh;$e.inverse=XH;$e.linearDependencies=JH;$e.pseudoInverse=QH;$e.solve=IP;$e.wrap=YH;const Ua=$P,jP=sY;u_.Matrix&&u_.Matrix;const oY={center:[0,0],linkDistance:50};class qP{constructor(e={}){this.options=e,this.id="mds",this.options=Object.assign(Object.assign({},oY),e)}execute(e,t){return Pe(this,void 0,void 0,function*(){return this.genericMDSLayout(!1,e,t)})}assign(e,t){return Pe(this,void 0,void 0,function*(){yield this.genericMDSLayout(!0,e,t)})}genericMDSLayout(e,t,r){return Pe(this,void 0,void 0,function*(){const i=Object.assign(Object.assign({},this.options),r),{center:a=[0,0],linkDistance:s=50}=i,o=t.getAllNodes(),u=t.getAllEdges();if(!(o!=null&&o.length)||o.length===1)return so(t,e,a);const l=TP({nodes:o,edges:u},!1),c=AP(l);uY(c);const h=lU(c,s),d=lY(h),f=[];return d.forEach((p,v)=>{const m=gr(o[v]);m.data.x=p[0]+a[0],m.data.y=p[1]+a[1],f.push(m)}),e&&f.forEach(p=>t.mergeNodeData(p.id,{x:p.data.x,y:p.data.y})),{nodes:f,edges:u}})}}const uY=n=>{let e=-999999;n.forEach(t=>{t.forEach(r=>{r!==1/0&&e<r&&(e=r)})}),n.forEach((t,r)=>{t.forEach((i,a)=>{i===1/0&&(n[r][a]=e)})})},lY=n=>{const t=Ua.mul(Ua.pow(n,2),-.5),r=t.mean("row"),i=t.mean("column"),a=t.mean();t.add(a).subRowVector(r).subColumnVector(i);const s=new jP(t),o=Ua.sqrt(s.diagonalMatrix).diagonal();return s.leftSingularVectors.toJSON().map(u=>Ua.mul([u],[o]).toJSON()[0].splice(0,2))};function Hb(n){return!!n.tick&&!!n.stop}const cY={gForce:!0,force2:!0,d3force:!0,fruchterman:!0,forceAtlas2:!0,force:!0,"graphin-force":!0},hY={center:[0,0],comboPadding:10,treeKey:"combo"};class dY{constructor(e={}){this.options=e,this.id="comboCombined",this.options=Object.assign(Object.assign({},hY),e)}execute(e,t){return Pe(this,void 0,void 0,function*(){return this.genericComboCombinedLayout(!1,e,t)})}assign(e,t){return Pe(this,void 0,void 0,function*(){yield this.genericComboCombinedLayout(!0,e,t)})}genericComboCombinedLayout(e,t,r){return Pe(this,void 0,void 0,function*(){const i=this.initVals(Object.assign(Object.assign({},this.options),r)),{center:a,treeKey:s,outerLayout:o}=i,u=t.getAllNodes().filter(S=>!S.data._isCombo),l=t.getAllNodes().filter(S=>S.data._isCombo),c=t.getAllEdges(),h=u==null?void 0:u.length;if(!h||h===1)return so(t,e,a);const d=[],f=new Map;u.forEach(S=>{f.set(S.id,S)});const g=new Map;l.forEach(S=>{g.set(S.id,S)});const p=new Map,v=this.getInnerGraphs(t,s,f,g,c,i,p);yield Promise.all(v);const m=new Map,y=[],b=new Map;let x=!0;t.getRoots(s).forEach(S=>{const C=p.get(S.id),k=g.get(S.id)||f.get(S.id),A={id:S.id,data:Object.assign(Object.assign({},S.data),{x:C.data.x||k.data.x,y:C.data.y||k.data.y,fx:C.data.fx||k.data.fx,fy:C.data.fy||k.data.fy,mass:C.data.mass||k.data.mass,size:C.data.size})};y.push(A),m.set(S.id,!0),!isNaN(A.data.x)&&A.data.x!==0&&!isNaN(A.data.y)&&A.data.y!==0?x=!1:(A.data.x=Math.random()*100,A.data.y=Math.random()*100),qb(t,[S],T=>{T.id!==S.id&&b.set(T.id,S.id)},"TB",s)});const w=[];c.forEach(S=>{const C=b.get(S.source)||S.source,k=b.get(S.target)||S.target;C!==k&&m.has(C)&&m.has(k)&&w.push({id:S.id,source:C,target:k,data:{}})});let E;if(y!=null&&y.length){if(y.length===1)y[0].data.x=a[0],y[0].data.y=a[1];else{const S=new Xt({nodes:y,edges:w}),C=o||new NP;x&&cY[C.id]&&(yield(y.length<100?new qP:new Wb).assign(S));const k=Object.assign({center:a,kg:5,preventOverlap:!0,animate:!1},C.id==="force"?{gravity:1,factor:4,linkDistance:(A,T,O)=>{const P=Math.max(...T.data.size)||32,R=Math.max(...O.data.size)||32;return P/2+R/2+200}}:{});E=yield l_(C,S,k)}p.forEach(S=>{var C;const k=E.nodes.find(O=>O.id===S.id);if(k){const{x:O,y:P}=k.data;S.data.visited=!0,S.data.x=O,S.data.y=P,d.push({id:S.id,data:{x:O,y:P}})}const{x:A,y:T}=S.data;(C=S.data.nodes)===null||C===void 0||C.forEach(O=>{d.push({id:O.id,data:{x:O.data.x+A,y:O.data.y+T}})})}),p.forEach(({data:S})=>{const{x:C,y:k,visited:A,nodes:T}=S;T==null||T.forEach(O=>{if(!A){const P=d.find(R=>R.id===O.id);P.data.x+=C||0,P.data.y+=k||0}})})}return e&&d.forEach(S=>{t.mergeNodeData(S.id,{x:S.data.x,y:S.data.y})}),{nodes:d,edges:c}})}initVals(e){const t=Object.assign({},e),{nodeSize:r,spacing:i,comboPadding:a}=e;let s,o;if(re(i)?o=()=>i:se(i)?o=i:o=()=>0,t.spacing=o,!r)s=l=>{const c=o(l);return l.size?Qi(l.size)?((l.size[0]>l.size[1]?l.size[0]:l.size[1])+c)/2:Nt(l.size)?((l.size.width>l.size.height?l.size.width:l.size.height)+c)/2:(l.size+c)/2:32+c/2};else if(se(r))s=l=>{const c=r(l),h=o(l);return Qi(l.size)?((l.size[0]>l.size[1]?l.size[0]:l.size[1])+h)/2:((c||32)+h)/2};else if(Qi(r)){const c=(r[0]>r[1]?r[0]:r[1])/2;s=h=>c+o(h)/2}else{const l=r/2;s=c=>l+o(c)/2}t.nodeSize=s;let u;return re(a)?u=()=>a:Qi(a)?u=()=>Math.max.apply(null,a):se(a)?u=a:u=()=>0,t.comboPadding=u,t}getInnerGraphs(e,t,r,i,a,s,o){const{nodeSize:u,comboPadding:l,spacing:c,innerLayout:h}=s,d=h||new Wb({}),f={center:[0,0],preventOverlap:!0,nodeSpacing:c},g=[],p=v=>{let m=(l==null?void 0:l(v))||10;return Qi(m)&&(m=Math.max(...m)),{size:m?[m*2,m*2]:[30,30],padding:m}};return e.getRoots(t).forEach(v=>{o.set(v.id,{id:v.id,data:{nodes:[],size:p(v).size}});let m=Promise.resolve();qb(e,[v],y=>{var b;if(!y.data._isCombo)return;const{size:x,padding:w}=p(y);if(!(!((b=e.getChildren(y.id,t))===null||b===void 0)&&b.length))o.set(y.id,{id:y.id,data:Object.assign(Object.assign({},y.data),{size:x})});else{const E=o.get(y.id);o.set(y.id,{id:y.id,data:Object.assign({nodes:[]},E==null?void 0:E.data)});const _=new Map,S=e.getChildren(y.id,t).map(A=>{if(A.data._isCombo)return o.has(A.id)||o.set(A.id,{id:A.id,data:Object.assign({},A.data)}),_.set(A.id,!0),o.get(A.id);const T=r.get(A.id)||i.get(A.id);return _.set(A.id,!0),{id:A.id,data:Object.assign(Object.assign({},T.data),A.data)}}),C={nodes:S,edges:a.filter(A=>_.has(A.source)&&_.has(A.target))};let k=1/0;S.forEach(A=>{var T;let{size:O}=A.data;O||(O=((T=o.get(A.id))===null||T===void 0?void 0:T.data.size)||(u==null?void 0:u(A))||[30,30]),re(O)&&(O=[O,O]);const[P,R]=O;k>P&&(k=P),k>R&&(k=R),A.data.size=O}),m=m.then(()=>Pe(this,void 0,void 0,function*(){const A=new Xt(C);yield l_(d,A,f,!0);const{minX:T,minY:O,maxX:P,maxY:R}=cU(S),N={x:(P+T)/2,y:(R+O)/2};C.nodes.forEach(M=>{M.data.x-=N.x,M.data.y-=N.y});const D=[Math.max(P-T,k)+w*2,Math.max(R-O,k)+w*2];o.get(y.id).data.size=D,o.get(y.id).data.nodes=S}))}return!0},"BT",t),g.push(m)}),g}}function l_(n,e,t,r){var i;return Pe(this,void 0,void 0,function*(){return Hb(n)?(n.execute(e,t),n.stop(),n.tick((i=t.iterations)!==null&&i!==void 0?i:300)):r?yield n.assign(e,t):yield n.execute(e,t)})}function fY(n,e){var t,r=1;n==null&&(n=0),e==null&&(e=0);function i(){var a,s=t.length,o,u=0,l=0;for(a=0;a<s;++a)o=t[a],u+=o.x,l+=o.y;for(u=(u/s-n)*r,l=(l/s-e)*r,a=0;a<s;++a)o=t[a],o.x-=u,o.y-=l}return i.initialize=function(a){t=a},i.x=function(a){return arguments.length?(n=+a,i):n},i.y=function(a){return arguments.length?(e=+a,i):e},i.strength=function(a){return arguments.length?(r=+a,i):r},i}function Ht(n){return function(){return n}}function Ha(n){return(n()-.5)*1e-6}function gY(n){return n.x+n.vx}function pY(n){return n.y+n.vy}function vY(n){var e,t,r,i=1,a=1;typeof n!="function"&&(n=Ht(n==null?1:+n));function s(){for(var l,c=e.length,h,d,f,g,p,v,m=0;m<a;++m)for(h=Rf(e,gY,pY).visitAfter(o),l=0;l<c;++l)d=e[l],p=t[d.index],v=p*p,f=d.x+d.vx,g=d.y+d.vy,h.visit(y);function y(b,x,w,E,_){var S=b.data,C=b.r,k=p+C;if(S){if(S.index>d.index){var A=f-S.x-S.vx,T=g-S.y-S.vy,O=A*A+T*T;O<k*k&&(A===0&&(A=Ha(r),O+=A*A),T===0&&(T=Ha(r),O+=T*T),O=(k-(O=Math.sqrt(O)))/O*i,d.vx+=(A*=O)*(k=(C*=C)/(v+C)),d.vy+=(T*=O)*k,S.vx-=A*(k=1-k),S.vy-=T*k)}return}return x>f+k||E<f-k||w>g+k||_<g-k}}function o(l){if(l.data)return l.r=t[l.data.index];for(var c=l.r=0;c<4;++c)l[c]&&l[c].r>l.r&&(l.r=l[c].r)}function u(){if(e){var l,c=e.length,h;for(t=new Array(c),l=0;l<c;++l)h=e[l],t[h.index]=+n(h,l,e)}}return s.initialize=function(l,c){e=l,r=c,u()},s.iterations=function(l){return arguments.length?(a=+l,s):a},s.strength=function(l){return arguments.length?(i=+l,s):i},s.radius=function(l){return arguments.length?(n=typeof l=="function"?l:Ht(+l),u(),s):n},s}function mY(n){return n.index}function c_(n,e){var t=n.get(e);if(!t)throw new Error("node not found: "+e);return t}function yY(n){var e=mY,t=h,r,i=Ht(30),a,s,o,u,l,c=1;n==null&&(n=[]);function h(v){return 1/Math.min(o[v.source.index],o[v.target.index])}function d(v){for(var m=0,y=n.length;m<c;++m)for(var b=0,x,w,E,_,S,C,k;b<y;++b)x=n[b],w=x.source,E=x.target,_=E.x+E.vx-w.x-w.vx||Ha(l),S=E.y+E.vy-w.y-w.vy||Ha(l),C=Math.sqrt(_*_+S*S),C=(C-a[b])/C*v*r[b],_*=C,S*=C,E.vx-=_*(k=u[b]),E.vy-=S*k,w.vx+=_*(k=1-k),w.vy+=S*k}function f(){if(s){var v,m=s.length,y=n.length,b=new Map(s.map((w,E)=>[e(w,E,s),w])),x;for(v=0,o=new Array(m);v<y;++v)x=n[v],x.index=v,typeof x.source!="object"&&(x.source=c_(b,x.source)),typeof x.target!="object"&&(x.target=c_(b,x.target)),o[x.source.index]=(o[x.source.index]||0)+1,o[x.target.index]=(o[x.target.index]||0)+1;for(v=0,u=new Array(y);v<y;++v)x=n[v],u[v]=o[x.source.index]/(o[x.source.index]+o[x.target.index]);r=new Array(y),g(),a=new Array(y),p()}}function g(){if(s)for(var v=0,m=n.length;v<m;++v)r[v]=+t(n[v],v,n)}function p(){if(s)for(var v=0,m=n.length;v<m;++v)a[v]=+i(n[v],v,n)}return d.initialize=function(v,m){s=v,l=m,f()},d.links=function(v){return arguments.length?(n=v,f(),d):n},d.id=function(v){return arguments.length?(e=v,d):e},d.iterations=function(v){return arguments.length?(c=+v,d):c},d.strength=function(v){return arguments.length?(t=typeof v=="function"?v:Ht(+v),g(),d):t},d.distance=function(v){return arguments.length?(i=typeof v=="function"?v:Ht(+v),p(),d):i},d}var bY={value:()=>{}};function GP(){for(var n=0,e=arguments.length,t={},r;n<e;++n){if(!(r=arguments[n]+"")||r in t||/[\s.]/.test(r))throw new Error("illegal type: "+r);t[r]=[]}return new qh(t)}function qh(n){this._=n}function xY(n,e){return n.trim().split(/^|\s+/).map(function(t){var r="",i=t.indexOf(".");if(i>=0&&(r=t.slice(i+1),t=t.slice(0,i)),t&&!e.hasOwnProperty(t))throw new Error("unknown type: "+t);return{type:t,name:r}})}qh.prototype=GP.prototype={constructor:qh,on:function(n,e){var t=this._,r=xY(n+"",t),i,a=-1,s=r.length;if(arguments.length<2){for(;++a<s;)if((i=(n=r[a]).type)&&(i=wY(t[i],n.name)))return i;return}if(e!=null&&typeof e!="function")throw new Error("invalid callback: "+e);for(;++a<s;)if(i=(n=r[a]).type)t[i]=h_(t[i],n.name,e);else if(e==null)for(i in t)t[i]=h_(t[i],n.name,null);return this},copy:function(){var n={},e=this._;for(var t in e)n[t]=e[t].slice();return new qh(n)},call:function(n,e){if((i=arguments.length-2)>0)for(var t=new Array(i),r=0,i,a;r<i;++r)t[r]=arguments[r+2];if(!this._.hasOwnProperty(n))throw new Error("unknown type: "+n);for(a=this._[n],r=0,i=a.length;r<i;++r)a[r].value.apply(e,t)},apply:function(n,e,t){if(!this._.hasOwnProperty(n))throw new Error("unknown type: "+n);for(var r=this._[n],i=0,a=r.length;i<a;++i)r[i].value.apply(e,t)}};function wY(n,e){for(var t=0,r=n.length,i;t<r;++t)if((i=n[t]).name===e)return i.value}function h_(n,e,t){for(var r=0,i=n.length;r<i;++r)if(n[r].name===e){n[r]=bY,n=n.slice(0,r).concat(n.slice(r+1));break}return t!=null&&n.push({name:e,value:t}),n}var su=0,Uu=0,Du=0,WP=1e3,Od,Hu,Md=0,eo=0,Bf=0,Dl=typeof performance=="object"&&performance.now?performance:Date,VP=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(n){setTimeout(n,17)};function UP(){return eo||(VP(EY),eo=Dl.now()+Bf)}function EY(){eo=0}function Yb(){this._call=this._time=this._next=null}Yb.prototype=HP.prototype={constructor:Yb,restart:function(n,e,t){if(typeof n!="function")throw new TypeError("callback is not a function");t=(t==null?UP():+t)+(e==null?0:+e),!this._next&&Hu!==this&&(Hu?Hu._next=this:Od=this,Hu=this),this._call=n,this._time=t,Xb()},stop:function(){this._call&&(this._call=null,this._time=1/0,Xb())}};function HP(n,e,t){var r=new Yb;return r.restart(n,e,t),r}function _Y(){UP(),++su;for(var n=Od,e;n;)(e=eo-n._time)>=0&&n._call.call(void 0,e),n=n._next;--su}function d_(){eo=(Md=Dl.now())+Bf,su=Uu=0;try{_Y()}finally{su=0,kY(),eo=0}}function SY(){var n=Dl.now(),e=n-Md;e>WP&&(Bf-=e,Md=n)}function kY(){for(var n,e=Od,t,r=1/0;e;)e._call?(r>e._time&&(r=e._time),n=e,e=e._next):(t=e._next,e._next=null,e=n?n._next=t:Od=t);Hu=n,Xb(r)}function Xb(n){if(!su){Uu&&(Uu=clearTimeout(Uu));var e=n-eo;e>24?(n<1/0&&(Uu=setTimeout(d_,n-Dl.now()-Bf)),Du&&(Du=clearInterval(Du))):(Du||(Md=Dl.now(),Du=setInterval(SY,WP)),su=1,VP(d_))}}const CY=1664525,AY=1013904223,f_=4294967296;function TY(){let n=1;return()=>(n=(CY*n+AY)%f_)/f_}function OY(n){return n.x}function MY(n){return n.y}var PY=10,NY=Math.PI*(3-Math.sqrt(5));function DY(n){var e,t=1,r=.001,i=1-Math.pow(r,1/300),a=0,s=.6,o=new Map,u=HP(h),l=GP("tick","end"),c=TY();n==null&&(n=[]);function h(){d(),l.call("tick",e),t<r&&(u.stop(),l.call("end",e))}function d(p){var v,m=n.length,y;p===void 0&&(p=1);for(var b=0;b<p;++b)for(t+=(a-t)*i,o.forEach(function(x){x(t)}),v=0;v<m;++v)y=n[v],y.fx==null?y.x+=y.vx*=s:(y.x=y.fx,y.vx=0),y.fy==null?y.y+=y.vy*=s:(y.y=y.fy,y.vy=0);return e}function f(){for(var p=0,v=n.length,m;p<v;++p){if(m=n[p],m.index=p,m.fx!=null&&(m.x=m.fx),m.fy!=null&&(m.y=m.fy),isNaN(m.x)||isNaN(m.y)){var y=PY*Math.sqrt(.5+p),b=p*NY;m.x=y*Math.cos(b),m.y=y*Math.sin(b)}(isNaN(m.vx)||isNaN(m.vy))&&(m.vx=m.vy=0)}}function g(p){return p.initialize&&p.initialize(n,c),p}return f(),e={tick:d,restart:function(){return u.restart(h),e},stop:function(){return u.stop(),e},nodes:function(p){return arguments.length?(n=p,f(),o.forEach(g),e):n},alpha:function(p){return arguments.length?(t=+p,e):t},alphaMin:function(p){return arguments.length?(r=+p,e):r},alphaDecay:function(p){return arguments.length?(i=+p,e):+i},alphaTarget:function(p){return arguments.length?(a=+p,e):a},velocityDecay:function(p){return arguments.length?(s=1-p,e):1-s},randomSource:function(p){return arguments.length?(c=p,o.forEach(g),e):c},force:function(p,v){return arguments.length>1?(v==null?o.delete(p):o.set(p,g(v)),e):o.get(p)},find:function(p,v,m){var y=0,b=n.length,x,w,E,_,S;for(m==null?m=1/0:m*=m,y=0;y<b;++y)_=n[y],x=p-_.x,w=v-_.y,E=x*x+w*w,E<m&&(S=_,m=E);return S},on:function(p,v){return arguments.length>1?(l.on(p,v),e):l.on(p)}}}function RY(){var n,e,t,r,i=Ht(-30),a,s=1,o=1/0,u=.81;function l(f){var g,p=n.length,v=Rf(n,OY,MY).visitAfter(h);for(r=f,g=0;g<p;++g)e=n[g],v.visit(d)}function c(){if(n){var f,g=n.length,p;for(a=new Array(g),f=0;f<g;++f)p=n[f],a[p.index]=+i(p,f,n)}}function h(f){var g=0,p,v,m=0,y,b,x;if(f.length){for(y=b=x=0;x<4;++x)(p=f[x])&&(v=Math.abs(p.value))&&(g+=p.value,m+=v,y+=v*p.x,b+=v*p.y);f.x=y/m,f.y=b/m}else{p=f,p.x=p.data.x,p.y=p.data.y;do g+=a[p.data.index];while(p=p.next)}f.value=g}function d(f,g,p,v){if(!f.value)return!0;var m=f.x-e.x,y=f.y-e.y,b=v-g,x=m*m+y*y;if(b*b/u<x)return x<o&&(m===0&&(m=Ha(t),x+=m*m),y===0&&(y=Ha(t),x+=y*y),x<s&&(x=Math.sqrt(s*x)),e.vx+=m*f.value*r/x,e.vy+=y*f.value*r/x),!0;if(f.length||x>=o)return;(f.data!==e||f.next)&&(m===0&&(m=Ha(t),x+=m*m),y===0&&(y=Ha(t),x+=y*y),x<s&&(x=Math.sqrt(s*x)));do f.data!==e&&(b=a[f.data.index]*r/x,e.vx+=m*b,e.vy+=y*b);while(f=f.next)}return l.initialize=function(f,g){n=f,t=g,c()},l.strength=function(f){return arguments.length?(i=typeof f=="function"?f:Ht(+f),c(),l):i},l.distanceMin=function(f){return arguments.length?(s=f*f,l):Math.sqrt(s)},l.distanceMax=function(f){return arguments.length?(o=f*f,l):Math.sqrt(o)},l.theta=function(f){return arguments.length?(u=f*f,l):Math.sqrt(u)},l}function LY(n,e,t){var r,i=Ht(.1),a,s;typeof n!="function"&&(n=Ht(+n)),e==null&&(e=0),t==null&&(t=0);function o(l){for(var c=0,h=r.length;c<h;++c){var d=r[c],f=d.x-e||1e-6,g=d.y-t||1e-6,p=Math.sqrt(f*f+g*g),v=(s[c]-p)*a[c]*l/p;d.vx+=f*v,d.vy+=g*v}}function u(){if(r){var l,c=r.length;for(a=new Array(c),s=new Array(c),l=0;l<c;++l)s[l]=+n(r[l],l,r),a[l]=isNaN(s[l])?0:+i(r[l],l,r)}}return o.initialize=function(l){r=l,u()},o.strength=function(l){return arguments.length?(i=typeof l=="function"?l:Ht(+l),u(),o):i},o.radius=function(l){return arguments.length?(n=typeof l=="function"?l:Ht(+l),u(),o):n},o.x=function(l){return arguments.length?(e=+l,o):e},o.y=function(l){return arguments.length?(t=+l,o):t},o}function IY(n){var e=Ht(.1),t,r,i;typeof n!="function"&&(n=Ht(n==null?0:+n));function a(o){for(var u=0,l=t.length,c;u<l;++u)c=t[u],c.vx+=(i[u]-c.x)*r[u]*o}function s(){if(t){var o,u=t.length;for(r=new Array(u),i=new Array(u),o=0;o<u;++o)r[o]=isNaN(i[o]=+n(t[o],o,t))?0:+e(t[o],o,t)}}return a.initialize=function(o){t=o,s()},a.strength=function(o){return arguments.length?(e=typeof o=="function"?o:Ht(+o),s(),a):e},a.x=function(o){return arguments.length?(n=typeof o=="function"?o:Ht(+o),s(),a):n},a}function FY(n){var e=Ht(.1),t,r,i;typeof n!="function"&&(n=Ht(n==null?0:+n));function a(o){for(var u=0,l=t.length,c;u<l;++u)c=t[u],c.vy+=(i[u]-c.y)*r[u]*o}function s(){if(t){var o,u=t.length;for(r=new Array(u),i=new Array(u),o=0;o<u;++o)r[o]=isNaN(i[o]=+n(t[o],o,t))?0:+e(t[o],o,t)}}return a.initialize=function(o){t=o,s()},a.strength=function(o){return arguments.length?(e=typeof o=="function"?o:Ht(+o),s(),a):e},a.y=function(o){return arguments.length?(n=typeof o=="function"?o:Ht(+o),s(),a):n},a}class BY{constructor(e){this.id="d3-force",this.config={inputNodeAttrs:["x","y","vx","vy","fx","fy"],outputNodeAttrs:["x","y","vx","vy"],simulationAttrs:["alpha","alphaMin","alphaDecay","alphaTarget","velocityDecay","randomSource"]},this.forceMap={link:yY,manyBody:RY,center:fY,collide:vY,radial:LY,x:IY,y:FY},this.options={link:{id:t=>t.id},manyBody:{},center:{x:0,y:0}},this.context={options:{},assign:!1,nodes:[],edges:[]},jn(this.options,e),this.options.forceSimulation&&(this.simulation=this.options.forceSimulation)}execute(e,t){return Pe(this,void 0,void 0,function*(){return this.genericLayout(!1,e,t)})}assign(e,t){return Pe(this,void 0,void 0,function*(){yield this.genericLayout(!0,e,t)})}stop(){this.simulation.stop()}tick(e){return this.simulation.tick(e),this.getResult()}restart(){this.simulation.restart()}setFixedPosition(e,t){const r=this.context.nodes.find(i=>i.id===e);r&&t.forEach((i,a)=>{if(typeof i=="number"||i===null){const s=["fx","fy","fz"][a];r[s]=i}})}getOptions(e){var t,r;const i=jn({},this.options,e);return i.collide&&((t=i.collide)===null||t===void 0?void 0:t.radius)===void 0&&(i.collide=i.collide||{},i.collide.radius=(r=i.nodeSize)!==null&&r!==void 0?r:10),i.iterations===void 0&&(i.link&&i.link.iterations===void 0&&(i.iterations=i.link.iterations),i.collide&&i.collide.iterations===void 0&&(i.iterations=i.collide.iterations)),this.context.options=i,i}genericLayout(e,t,r){var i;return Pe(this,void 0,void 0,function*(){const a=this.getOptions(r),s=t.getAllNodes().map(({id:c,data:h})=>Object.assign(Object.assign({id:c},h),Hs(h.data,this.config.inputNodeAttrs))),o=t.getAllEdges().map(c=>Object.assign({},c));Object.assign(this.context,{assign:e,nodes:s,edges:o,graph:t});const u=new Promise(c=>{this.resolver=c}),l=this.setSimulation(a);return l.nodes(s),(i=l.force("link"))===null||i===void 0||i.links(o),u})}getResult(){const{assign:e,nodes:t,edges:r,graph:i}=this.context,a=t.map(o=>({id:o.id,data:Object.assign(Object.assign({},o.data),Hs(o,this.config.outputNodeAttrs))})),s=r.map(({id:o,source:u,target:l,data:c})=>({id:o,source:typeof u=="object"?u.id:u,target:typeof l=="object"?l.id:l,data:c}));return e&&a.forEach(o=>i.mergeNodeData(o.id,o.data)),{nodes:a,edges:s}}initSimulation(){return DY()}setSimulation(e){const t=this.simulation||this.options.forceSimulation||this.initSimulation();return this.simulation||(this.simulation=t.on("tick",()=>{var r;return(r=e.onTick)===null||r===void 0?void 0:r.call(e,this.getResult())}).on("end",()=>{var r;return(r=this.resolver)===null||r===void 0?void 0:r.call(this,this.getResult())})),g_(t,this.config.simulationAttrs.map(r=>[r,e[r]])),Object.entries(this.forceMap).forEach(([r,i])=>{const a=r;if(e[r]){let s=t.force(a);s||(s=i(),t.force(a,s)),g_(s,Object.entries(e[a]))}else t.force(a,null)}),t}}const g_=(n,e)=>e.reduce((t,[r,i])=>!t[r]||i===void 0?t:t[r].call(n,i),n);function Fx(n){throw new Error('Could not dynamically require "'+n+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var Tg,p_;function zY(){if(p_)return Tg;p_=1;function n(){this.__data__=[],this.size=0}return Tg=n,Tg}var Og,v_;function yu(){if(v_)return Og;v_=1;function n(e,t){return e===t||e!==e&&t!==t}return Og=n,Og}var Mg,m_;function zf(){if(m_)return Mg;m_=1;var n=yu();function e(t,r){for(var i=t.length;i--;)if(n(t[i][0],r))return i;return-1}return Mg=e,Mg}var Pg,y_;function $Y(){if(y_)return Pg;y_=1;var n=zf(),e=Array.prototype,t=e.splice;function r(i){var a=this.__data__,s=n(a,i);if(s<0)return!1;var o=a.length-1;return s==o?a.pop():t.call(a,s,1),--this.size,!0}return Pg=r,Pg}var Ng,b_;function jY(){if(b_)return Ng;b_=1;var n=zf();function e(t){var r=this.__data__,i=n(r,t);return i<0?void 0:r[i][1]}return Ng=e,Ng}var Dg,x_;function qY(){if(x_)return Dg;x_=1;var n=zf();function e(t){return n(this.__data__,t)>-1}return Dg=e,Dg}var Rg,w_;function GY(){if(w_)return Rg;w_=1;var n=zf();function e(t,r){var i=this.__data__,a=n(i,t);return a<0?(++this.size,i.push([t,r])):i[a][1]=r,this}return Rg=e,Rg}var Lg,E_;function $f(){if(E_)return Lg;E_=1;var n=zY(),e=$Y(),t=jY(),r=qY(),i=GY();function a(s){var o=-1,u=s==null?0:s.length;for(this.clear();++o<u;){var l=s[o];this.set(l[0],l[1])}}return a.prototype.clear=n,a.prototype.delete=e,a.prototype.get=t,a.prototype.has=r,a.prototype.set=i,Lg=a,Lg}var Ig,__;function WY(){if(__)return Ig;__=1;var n=$f();function e(){this.__data__=new n,this.size=0}return Ig=e,Ig}var Fg,S_;function VY(){if(S_)return Fg;S_=1;function n(e){var t=this.__data__,r=t.delete(e);return this.size=t.size,r}return Fg=n,Fg}var Bg,k_;function UY(){if(k_)return Bg;k_=1;function n(e){return this.__data__.get(e)}return Bg=n,Bg}var zg,C_;function HY(){if(C_)return zg;C_=1;function n(e){return this.__data__.has(e)}return zg=n,zg}var $g,A_;function YP(){if(A_)return $g;A_=1;var n=typeof Ec=="object"&&Ec&&Ec.Object===Object&&Ec;return $g=n,$g}var jg,T_;function li(){if(T_)return jg;T_=1;var n=YP(),e=typeof self=="object"&&self&&self.Object===Object&&self,t=n||e||Function("return this")();return jg=t,jg}var qg,O_;function bu(){if(O_)return qg;O_=1;var n=li(),e=n.Symbol;return qg=e,qg}var Gg,M_;function YY(){if(M_)return Gg;M_=1;var n=bu(),e=Object.prototype,t=e.hasOwnProperty,r=e.toString,i=n?n.toStringTag:void 0;function a(s){var o=t.call(s,i),u=s[i];try{s[i]=void 0;var l=!0}catch{}var c=r.call(s);return l&&(o?s[i]=u:delete s[i]),c}return Gg=a,Gg}var Wg,P_;function XY(){if(P_)return Wg;P_=1;var n=Object.prototype,e=n.toString;function t(r){return e.call(r)}return Wg=t,Wg}var Vg,N_;function oo(){if(N_)return Vg;N_=1;var n=bu(),e=YY(),t=XY(),r="[object Null]",i="[object Undefined]",a=n?n.toStringTag:void 0;function s(o){return o==null?o===void 0?i:r:a&&a in Object(o)?e(o):t(o)}return Vg=s,Vg}var Ug,D_;function Br(){if(D_)return Ug;D_=1;function n(e){var t=typeof e;return e!=null&&(t=="object"||t=="function")}return Ug=n,Ug}var Hg,R_;function cc(){if(R_)return Hg;R_=1;var n=oo(),e=Br(),t="[object AsyncFunction]",r="[object Function]",i="[object GeneratorFunction]",a="[object Proxy]";function s(o){if(!e(o))return!1;var u=n(o);return u==r||u==i||u==t||u==a}return Hg=s,Hg}var Yg,L_;function KY(){if(L_)return Yg;L_=1;var n=li(),e=n["__core-js_shared__"];return Yg=e,Yg}var Xg,I_;function ZY(){if(I_)return Xg;I_=1;var n=KY(),e=function(){var r=/[^.]+$/.exec(n&&n.keys&&n.keys.IE_PROTO||"");return r?"Symbol(src)_1."+r:""}();function t(r){return!!e&&e in r}return Xg=t,Xg}var Kg,F_;function XP(){if(F_)return Kg;F_=1;var n=Function.prototype,e=n.toString;function t(r){if(r!=null){try{return e.call(r)}catch{}try{return r+""}catch{}}return""}return Kg=t,Kg}var Zg,B_;function JY(){if(B_)return Zg;B_=1;var n=cc(),e=ZY(),t=Br(),r=XP(),i=/[\\^$.*+?()[\]{}|]/g,a=/^\[object .+?Constructor\]$/,s=Function.prototype,o=Object.prototype,u=s.toString,l=o.hasOwnProperty,c=RegExp("^"+u.call(l).replace(i,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function h(d){if(!t(d)||e(d))return!1;var f=n(d)?c:a;return f.test(r(d))}return Zg=h,Zg}var Jg,z_;function QY(){if(z_)return Jg;z_=1;function n(e,t){return e==null?void 0:e[t]}return Jg=n,Jg}var Qg,$_;function uo(){if($_)return Qg;$_=1;var n=JY(),e=QY();function t(r,i){var a=e(r,i);return n(a)?a:void 0}return Qg=t,Qg}var ep,j_;function Bx(){if(j_)return ep;j_=1;var n=uo(),e=li(),t=n(e,"Map");return ep=t,ep}var tp,q_;function jf(){if(q_)return tp;q_=1;var n=uo(),e=n(Object,"create");return tp=e,tp}var np,G_;function eX(){if(G_)return np;G_=1;var n=jf();function e(){this.__data__=n?n(null):{},this.size=0}return np=e,np}var rp,W_;function tX(){if(W_)return rp;W_=1;function n(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}return rp=n,rp}var ip,V_;function nX(){if(V_)return ip;V_=1;var n=jf(),e="__lodash_hash_undefined__",t=Object.prototype,r=t.hasOwnProperty;function i(a){var s=this.__data__;if(n){var o=s[a];return o===e?void 0:o}return r.call(s,a)?s[a]:void 0}return ip=i,ip}var ap,U_;function rX(){if(U_)return ap;U_=1;var n=jf(),e=Object.prototype,t=e.hasOwnProperty;function r(i){var a=this.__data__;return n?a[i]!==void 0:t.call(a,i)}return ap=r,ap}var sp,H_;function iX(){if(H_)return sp;H_=1;var n=jf(),e="__lodash_hash_undefined__";function t(r,i){var a=this.__data__;return this.size+=this.has(r)?0:1,a[r]=n&&i===void 0?e:i,this}return sp=t,sp}var op,Y_;function aX(){if(Y_)return op;Y_=1;var n=eX(),e=tX(),t=nX(),r=rX(),i=iX();function a(s){var o=-1,u=s==null?0:s.length;for(this.clear();++o<u;){var l=s[o];this.set(l[0],l[1])}}return a.prototype.clear=n,a.prototype.delete=e,a.prototype.get=t,a.prototype.has=r,a.prototype.set=i,op=a,op}var up,X_;function sX(){if(X_)return up;X_=1;var n=aX(),e=$f(),t=Bx();function r(){this.size=0,this.__data__={hash:new n,map:new(t||e),string:new n}}return up=r,up}var lp,K_;function oX(){if(K_)return lp;K_=1;function n(e){var t=typeof e;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?e!=="__proto__":e===null}return lp=n,lp}var cp,Z_;function qf(){if(Z_)return cp;Z_=1;var n=oX();function e(t,r){var i=t.__data__;return n(r)?i[typeof r=="string"?"string":"hash"]:i.map}return cp=e,cp}var hp,J_;function uX(){if(J_)return hp;J_=1;var n=qf();function e(t){var r=n(this,t).delete(t);return this.size-=r?1:0,r}return hp=e,hp}var dp,Q_;function lX(){if(Q_)return dp;Q_=1;var n=qf();function e(t){return n(this,t).get(t)}return dp=e,dp}var fp,eS;function cX(){if(eS)return fp;eS=1;var n=qf();function e(t){return n(this,t).has(t)}return fp=e,fp}var gp,tS;function hX(){if(tS)return gp;tS=1;var n=qf();function e(t,r){var i=n(this,t),a=i.size;return i.set(t,r),this.size+=i.size==a?0:1,this}return gp=e,gp}var pp,nS;function zx(){if(nS)return pp;nS=1;var n=sX(),e=uX(),t=lX(),r=cX(),i=hX();function a(s){var o=-1,u=s==null?0:s.length;for(this.clear();++o<u;){var l=s[o];this.set(l[0],l[1])}}return a.prototype.clear=n,a.prototype.delete=e,a.prototype.get=t,a.prototype.has=r,a.prototype.set=i,pp=a,pp}var vp,rS;function dX(){if(rS)return vp;rS=1;var n=$f(),e=Bx(),t=zx(),r=200;function i(a,s){var o=this.__data__;if(o instanceof n){var u=o.__data__;if(!e||u.length<r-1)return u.push([a,s]),this.size=++o.size,this;o=this.__data__=new t(u)}return o.set(a,s),this.size=o.size,this}return vp=i,vp}var mp,iS;function Gf(){if(iS)return mp;iS=1;var n=$f(),e=WY(),t=VY(),r=UY(),i=HY(),a=dX();function s(o){var u=this.__data__=new n(o);this.size=u.size}return s.prototype.clear=e,s.prototype.delete=t,s.prototype.get=r,s.prototype.has=i,s.prototype.set=a,mp=s,mp}var yp,aS;function $x(){if(aS)return yp;aS=1;function n(e,t){for(var r=-1,i=e==null?0:e.length;++r<i&&t(e[r],r,e)!==!1;);return e}return yp=n,yp}var bp,sS;function KP(){if(sS)return bp;sS=1;var n=uo(),e=function(){try{var t=n(Object,"defineProperty");return t({},"",{}),t}catch{}}();return bp=e,bp}var xp,oS;function Wf(){if(oS)return xp;oS=1;var n=KP();function e(t,r,i){r=="__proto__"&&n?n(t,r,{configurable:!0,enumerable:!0,value:i,writable:!0}):t[r]=i}return xp=e,xp}var wp,uS;function Vf(){if(uS)return wp;uS=1;var n=Wf(),e=yu(),t=Object.prototype,r=t.hasOwnProperty;function i(a,s,o){var u=a[s];(!(r.call(a,s)&&e(u,o))||o===void 0&&!(s in a))&&n(a,s,o)}return wp=i,wp}var Ep,lS;function hc(){if(lS)return Ep;lS=1;var n=Vf(),e=Wf();function t(r,i,a,s){var o=!a;a||(a={});for(var u=-1,l=i.length;++u<l;){var c=i[u],h=s?s(a[c],r[c],c,a,r):void 0;h===void 0&&(h=r[c]),o?e(a,c,h):n(a,c,h)}return a}return Ep=t,Ep}var _p,cS;function fX(){if(cS)return _p;cS=1;function n(e,t){for(var r=-1,i=Array(e);++r<e;)i[r]=t(r);return i}return _p=n,_p}var Sp,hS;function Fi(){if(hS)return Sp;hS=1;function n(e){return e!=null&&typeof e=="object"}return Sp=n,Sp}var kp,dS;function gX(){if(dS)return kp;dS=1;var n=oo(),e=Fi(),t="[object Arguments]";function r(i){return e(i)&&n(i)==t}return kp=r,kp}var Cp,fS;function dc(){if(fS)return Cp;fS=1;var n=gX(),e=Fi(),t=Object.prototype,r=t.hasOwnProperty,i=t.propertyIsEnumerable,a=n(function(){return arguments}())?n:function(s){return e(s)&&r.call(s,"callee")&&!i.call(s,"callee")};return Cp=a,Cp}var Ap,gS;function jt(){if(gS)return Ap;gS=1;var n=Array.isArray;return Ap=n,Ap}var Yu={exports:{}},Tp,pS;function pX(){if(pS)return Tp;pS=1;function n(){return!1}return Tp=n,Tp}Yu.exports;var vS;function xu(){return vS||(vS=1,function(n,e){var t=li(),r=pX(),i=e&&!e.nodeType&&e,a=i&&!0&&n&&!n.nodeType&&n,s=a&&a.exports===i,o=s?t.Buffer:void 0,u=o?o.isBuffer:void 0,l=u||r;n.exports=l}(Yu,Yu.exports)),Yu.exports}var Op,mS;function Uf(){if(mS)return Op;mS=1;var n=9007199254740991,e=/^(?:0|[1-9]\d*)$/;function t(r,i){var a=typeof r;return i=i??n,!!i&&(a=="number"||a!="symbol"&&e.test(r))&&r>-1&&r%1==0&&r<i}return Op=t,Op}var Mp,yS;function jx(){if(yS)return Mp;yS=1;var n=9007199254740991;function e(t){return typeof t=="number"&&t>-1&&t%1==0&&t<=n}return Mp=e,Mp}var Pp,bS;function vX(){if(bS)return Pp;bS=1;var n=oo(),e=jx(),t=Fi(),r="[object Arguments]",i="[object Array]",a="[object Boolean]",s="[object Date]",o="[object Error]",u="[object Function]",l="[object Map]",c="[object Number]",h="[object Object]",d="[object RegExp]",f="[object Set]",g="[object String]",p="[object WeakMap]",v="[object ArrayBuffer]",m="[object DataView]",y="[object Float32Array]",b="[object Float64Array]",x="[object Int8Array]",w="[object Int16Array]",E="[object Int32Array]",_="[object Uint8Array]",S="[object Uint8ClampedArray]",C="[object Uint16Array]",k="[object Uint32Array]",A={};A[y]=A[b]=A[x]=A[w]=A[E]=A[_]=A[S]=A[C]=A[k]=!0,A[r]=A[i]=A[v]=A[a]=A[m]=A[s]=A[o]=A[u]=A[l]=A[c]=A[h]=A[d]=A[f]=A[g]=A[p]=!1;function T(O){return t(O)&&e(O.length)&&!!A[n(O)]}return Pp=T,Pp}var Np,xS;function Hf(){if(xS)return Np;xS=1;function n(e){return function(t){return e(t)}}return Np=n,Np}var Xu={exports:{}};Xu.exports;var wS;function qx(){return wS||(wS=1,function(n,e){var t=YP(),r=e&&!e.nodeType&&e,i=r&&!0&&n&&!n.nodeType&&n,a=i&&i.exports===r,s=a&&t.process,o=function(){try{var u=i&&i.require&&i.require("util").types;return u||s&&s.binding&&s.binding("util")}catch{}}();n.exports=o}(Xu,Xu.exports)),Xu.exports}var Dp,ES;function fc(){if(ES)return Dp;ES=1;var n=vX(),e=Hf(),t=qx(),r=t&&t.isTypedArray,i=r?e(r):n;return Dp=i,Dp}var Rp,_S;function ZP(){if(_S)return Rp;_S=1;var n=fX(),e=dc(),t=jt(),r=xu(),i=Uf(),a=fc(),s=Object.prototype,o=s.hasOwnProperty;function u(l,c){var h=t(l),d=!h&&e(l),f=!h&&!d&&r(l),g=!h&&!d&&!f&&a(l),p=h||d||f||g,v=p?n(l.length,String):[],m=v.length;for(var y in l)(c||o.call(l,y))&&!(p&&(y=="length"||f&&(y=="offset"||y=="parent")||g&&(y=="buffer"||y=="byteLength"||y=="byteOffset")||i(y,m)))&&v.push(y);return v}return Rp=u,Rp}var Lp,SS;function Yf(){if(SS)return Lp;SS=1;var n=Object.prototype;function e(t){var r=t&&t.constructor,i=typeof r=="function"&&r.prototype||n;return t===i}return Lp=e,Lp}var Ip,kS;function JP(){if(kS)return Ip;kS=1;function n(e,t){return function(r){return e(t(r))}}return Ip=n,Ip}var Fp,CS;function mX(){if(CS)return Fp;CS=1;var n=JP(),e=n(Object.keys,Object);return Fp=e,Fp}var Bp,AS;function Gx(){if(AS)return Bp;AS=1;var n=Yf(),e=mX(),t=Object.prototype,r=t.hasOwnProperty;function i(a){if(!n(a))return e(a);var s=[];for(var o in Object(a))r.call(a,o)&&o!="constructor"&&s.push(o);return s}return Bp=i,Bp}var zp,TS;function ma(){if(TS)return zp;TS=1;var n=cc(),e=jx();function t(r){return r!=null&&e(r.length)&&!n(r)}return zp=t,zp}var $p,OS;function vs(){if(OS)return $p;OS=1;var n=ZP(),e=Gx(),t=ma();function r(i){return t(i)?n(i):e(i)}return $p=r,$p}var jp,MS;function yX(){if(MS)return jp;MS=1;var n=hc(),e=vs();function t(r,i){return r&&n(i,e(i),r)}return jp=t,jp}var qp,PS;function bX(){if(PS)return qp;PS=1;function n(e){var t=[];if(e!=null)for(var r in Object(e))t.push(r);return t}return qp=n,qp}var Gp,NS;function xX(){if(NS)return Gp;NS=1;var n=Br(),e=Yf(),t=bX(),r=Object.prototype,i=r.hasOwnProperty;function a(s){if(!n(s))return t(s);var o=e(s),u=[];for(var l in s)l=="constructor"&&(o||!i.call(s,l))||u.push(l);return u}return Gp=a,Gp}var Wp,DS;function lo(){if(DS)return Wp;DS=1;var n=ZP(),e=xX(),t=ma();function r(i){return t(i)?n(i,!0):e(i)}return Wp=r,Wp}var Vp,RS;function wX(){if(RS)return Vp;RS=1;var n=hc(),e=lo();function t(r,i){return r&&n(i,e(i),r)}return Vp=t,Vp}var Ku={exports:{}};Ku.exports;var LS;function QP(){return LS||(LS=1,function(n,e){var t=li(),r=e&&!e.nodeType&&e,i=r&&!0&&n&&!n.nodeType&&n,a=i&&i.exports===r,s=a?t.Buffer:void 0,o=s?s.allocUnsafe:void 0;function u(l,c){if(c)return l.slice();var h=l.length,d=o?o(h):new l.constructor(h);return l.copy(d),d}n.exports=u}(Ku,Ku.exports)),Ku.exports}var Up,IS;function e5(){if(IS)return Up;IS=1;function n(e,t){var r=-1,i=e.length;for(t||(t=Array(i));++r<i;)t[r]=e[r];return t}return Up=n,Up}var Hp,FS;function t5(){if(FS)return Hp;FS=1;function n(e,t){for(var r=-1,i=e==null?0:e.length,a=0,s=[];++r<i;){var o=e[r];t(o,r,e)&&(s[a++]=o)}return s}return Hp=n,Hp}var Yp,BS;function n5(){if(BS)return Yp;BS=1;function n(){return[]}return Yp=n,Yp}var Xp,zS;function Wx(){if(zS)return Xp;zS=1;var n=t5(),e=n5(),t=Object.prototype,r=t.propertyIsEnumerable,i=Object.getOwnPropertySymbols,a=i?function(s){return s==null?[]:(s=Object(s),n(i(s),function(o){return r.call(s,o)}))}:e;return Xp=a,Xp}var Kp,$S;function EX(){if($S)return Kp;$S=1;var n=hc(),e=Wx();function t(r,i){return n(r,e(r),i)}return Kp=t,Kp}var Zp,jS;function Vx(){if(jS)return Zp;jS=1;function n(e,t){for(var r=-1,i=t.length,a=e.length;++r<i;)e[a+r]=t[r];return e}return Zp=n,Zp}var Jp,qS;function Xf(){if(qS)return Jp;qS=1;var n=JP(),e=n(Object.getPrototypeOf,Object);return Jp=e,Jp}var Qp,GS;function r5(){if(GS)return Qp;GS=1;var n=Vx(),e=Xf(),t=Wx(),r=n5(),i=Object.getOwnPropertySymbols,a=i?function(s){for(var o=[];s;)n(o,t(s)),s=e(s);return o}:r;return Qp=a,Qp}var ev,WS;function _X(){if(WS)return ev;WS=1;var n=hc(),e=r5();function t(r,i){return n(r,e(r),i)}return ev=t,ev}var tv,VS;function i5(){if(VS)return tv;VS=1;var n=Vx(),e=jt();function t(r,i,a){var s=i(r);return e(r)?s:n(s,a(r))}return tv=t,tv}var nv,US;function a5(){if(US)return nv;US=1;var n=i5(),e=Wx(),t=vs();function r(i){return n(i,t,e)}return nv=r,nv}var rv,HS;function SX(){if(HS)return rv;HS=1;var n=i5(),e=r5(),t=lo();function r(i){return n(i,t,e)}return rv=r,rv}var iv,YS;function kX(){if(YS)return iv;YS=1;var n=uo(),e=li(),t=n(e,"DataView");return iv=t,iv}var av,XS;function CX(){if(XS)return av;XS=1;var n=uo(),e=li(),t=n(e,"Promise");return av=t,av}var sv,KS;function s5(){if(KS)return sv;KS=1;var n=uo(),e=li(),t=n(e,"Set");return sv=t,sv}var ov,ZS;function AX(){if(ZS)return ov;ZS=1;var n=uo(),e=li(),t=n(e,"WeakMap");return ov=t,ov}var uv,JS;function wu(){if(JS)return uv;JS=1;var n=kX(),e=Bx(),t=CX(),r=s5(),i=AX(),a=oo(),s=XP(),o="[object Map]",u="[object Object]",l="[object Promise]",c="[object Set]",h="[object WeakMap]",d="[object DataView]",f=s(n),g=s(e),p=s(t),v=s(r),m=s(i),y=a;return(n&&y(new n(new ArrayBuffer(1)))!=d||e&&y(new e)!=o||t&&y(t.resolve())!=l||r&&y(new r)!=c||i&&y(new i)!=h)&&(y=function(b){var x=a(b),w=x==u?b.constructor:void 0,E=w?s(w):"";if(E)switch(E){case f:return d;case g:return o;case p:return l;case v:return c;case m:return h}return x}),uv=y,uv}var lv,QS;function TX(){if(QS)return lv;QS=1;var n=Object.prototype,e=n.hasOwnProperty;function t(r){var i=r.length,a=new r.constructor(i);return i&&typeof r[0]=="string"&&e.call(r,"index")&&(a.index=r.index,a.input=r.input),a}return lv=t,lv}var cv,ek;function o5(){if(ek)return cv;ek=1;var n=li(),e=n.Uint8Array;return cv=e,cv}var hv,tk;function Ux(){if(tk)return hv;tk=1;var n=o5();function e(t){var r=new t.constructor(t.byteLength);return new n(r).set(new n(t)),r}return hv=e,hv}var dv,nk;function OX(){if(nk)return dv;nk=1;var n=Ux();function e(t,r){var i=r?n(t.buffer):t.buffer;return new t.constructor(i,t.byteOffset,t.byteLength)}return dv=e,dv}var fv,rk;function MX(){if(rk)return fv;rk=1;var n=/\w*$/;function e(t){var r=new t.constructor(t.source,n.exec(t));return r.lastIndex=t.lastIndex,r}return fv=e,fv}var gv,ik;function PX(){if(ik)return gv;ik=1;var n=bu(),e=n?n.prototype:void 0,t=e?e.valueOf:void 0;function r(i){return t?Object(t.call(i)):{}}return gv=r,gv}var pv,ak;function u5(){if(ak)return pv;ak=1;var n=Ux();function e(t,r){var i=r?n(t.buffer):t.buffer;return new t.constructor(i,t.byteOffset,t.length)}return pv=e,pv}var vv,sk;function NX(){if(sk)return vv;sk=1;var n=Ux(),e=OX(),t=MX(),r=PX(),i=u5(),a="[object Boolean]",s="[object Date]",o="[object Map]",u="[object Number]",l="[object RegExp]",c="[object Set]",h="[object String]",d="[object Symbol]",f="[object ArrayBuffer]",g="[object DataView]",p="[object Float32Array]",v="[object Float64Array]",m="[object Int8Array]",y="[object Int16Array]",b="[object Int32Array]",x="[object Uint8Array]",w="[object Uint8ClampedArray]",E="[object Uint16Array]",_="[object Uint32Array]";function S(C,k,A){var T=C.constructor;switch(k){case f:return n(C);case a:case s:return new T(+C);case g:return e(C,A);case p:case v:case m:case y:case b:case x:case w:case E:case _:return i(C,A);case o:return new T;case u:case h:return new T(C);case l:return t(C);case c:return new T;case d:return r(C)}}return vv=S,vv}var mv,ok;function l5(){if(ok)return mv;ok=1;var n=Br(),e=Object.create,t=function(){function r(){}return function(i){if(!n(i))return{};if(e)return e(i);r.prototype=i;var a=new r;return r.prototype=void 0,a}}();return mv=t,mv}var yv,uk;function c5(){if(uk)return yv;uk=1;var n=l5(),e=Xf(),t=Yf();function r(i){return typeof i.constructor=="function"&&!t(i)?n(e(i)):{}}return yv=r,yv}var bv,lk;function DX(){if(lk)return bv;lk=1;var n=wu(),e=Fi(),t="[object Map]";function r(i){return e(i)&&n(i)==t}return bv=r,bv}var xv,ck;function RX(){if(ck)return xv;ck=1;var n=DX(),e=Hf(),t=qx(),r=t&&t.isMap,i=r?e(r):n;return xv=i,xv}var wv,hk;function LX(){if(hk)return wv;hk=1;var n=wu(),e=Fi(),t="[object Set]";function r(i){return e(i)&&n(i)==t}return wv=r,wv}var Ev,dk;function IX(){if(dk)return Ev;dk=1;var n=LX(),e=Hf(),t=qx(),r=t&&t.isSet,i=r?e(r):n;return Ev=i,Ev}var _v,fk;function h5(){if(fk)return _v;fk=1;var n=Gf(),e=$x(),t=Vf(),r=yX(),i=wX(),a=QP(),s=e5(),o=EX(),u=_X(),l=a5(),c=SX(),h=wu(),d=TX(),f=NX(),g=c5(),p=jt(),v=xu(),m=RX(),y=Br(),b=IX(),x=vs(),w=lo(),E=1,_=2,S=4,C="[object Arguments]",k="[object Array]",A="[object Boolean]",T="[object Date]",O="[object Error]",P="[object Function]",R="[object GeneratorFunction]",N="[object Map]",D="[object Number]",M="[object Object]",F="[object RegExp]",j="[object Set]",B="[object String]",$="[object Symbol]",W="[object WeakMap]",Y="[object ArrayBuffer]",K="[object DataView]",ee="[object Float32Array]",ie="[object Float64Array]",_e="[object Int8Array]",Ae="[object Int16Array]",Be="[object Int32Array]",Fe="[object Uint8Array]",Ze="[object Uint8ClampedArray]",Kt="[object Uint16Array]",$r="[object Uint32Array]",Re={};Re[C]=Re[k]=Re[Y]=Re[K]=Re[A]=Re[T]=Re[ee]=Re[ie]=Re[_e]=Re[Ae]=Re[Be]=Re[N]=Re[D]=Re[M]=Re[F]=Re[j]=Re[B]=Re[$]=Re[Fe]=Re[Ze]=Re[Kt]=Re[$r]=!0,Re[O]=Re[P]=Re[W]=!1;function Zt(ze,Pn,En,$i,ji,Gn){var mt,jr=Pn&E,Jt=Pn&_,tr=Pn&S;if(En&&(mt=ji?En(ze,$i,ji,Gn):En(ze)),mt!==void 0)return mt;if(!y(ze))return ze;var qr=p(ze);if(qr){if(mt=d(ze),!jr)return s(ze,mt)}else{var cn=h(ze),go=cn==P||cn==R;if(v(ze))return a(ze,jr);if(cn==M||cn==C||go&&!ji){if(mt=Jt||go?{}:g(ze),!jr)return Jt?u(ze,i(mt,ze)):o(ze,r(mt,ze))}else{if(!Re[cn])return ji?ze:{};mt=f(ze,cn,jr)}}Gn||(Gn=new n);var qi=Gn.get(ze);if(qi)return qi;Gn.set(ze,mt),b(ze)?ze.forEach(function(ba){mt.add(Zt(ba,Pn,En,ba,ze,Gn))}):m(ze)&&ze.forEach(function(ba,ys){mt.set(ys,Zt(ba,Pn,En,ys,ze,Gn))});var po=tr?Jt?c:l:Jt?w:x,Gi=qr?void 0:po(ze);return e(Gi||ze,function(ba,ys){Gi&&(ys=ba,ba=ze[ys]),t(mt,ys,Zt(ba,Pn,En,ys,ze,Gn))}),mt}return _v=Zt,_v}var Sv,gk;function FX(){if(gk)return Sv;gk=1;var n=h5(),e=4;function t(r){return n(r,e)}return Sv=t,Sv}var kv,pk;function Hx(){if(pk)return kv;pk=1;function n(e){return function(){return e}}return kv=n,kv}var Cv,vk;function BX(){if(vk)return Cv;vk=1;function n(e){return function(t,r,i){for(var a=-1,s=Object(t),o=i(t),u=o.length;u--;){var l=o[e?u:++a];if(r(s[l],l,s)===!1)break}return t}}return Cv=n,Cv}var Av,mk;function Yx(){if(mk)return Av;mk=1;var n=BX(),e=n();return Av=e,Av}var Tv,yk;function Xx(){if(yk)return Tv;yk=1;var n=Yx(),e=vs();function t(r,i){return r&&n(r,i,e)}return Tv=t,Tv}var Ov,bk;function zX(){if(bk)return Ov;bk=1;var n=ma();function e(t,r){return function(i,a){if(i==null)return i;if(!n(i))return t(i,a);for(var s=i.length,o=r?s:-1,u=Object(i);(r?o--:++o<s)&&a(u[o],o,u)!==!1;);return i}}return Ov=e,Ov}var Mv,xk;function Kf(){if(xk)return Mv;xk=1;var n=Xx(),e=zX(),t=e(n);return Mv=t,Mv}var Pv,wk;function co(){if(wk)return Pv;wk=1;function n(e){return e}return Pv=n,Pv}var Nv,Ek;function d5(){if(Ek)return Nv;Ek=1;var n=co();function e(t){return typeof t=="function"?t:n}return Nv=e,Nv}var Dv,_k;function f5(){if(_k)return Dv;_k=1;var n=$x(),e=Kf(),t=d5(),r=jt();function i(a,s){var o=r(a)?n:e;return o(a,t(s))}return Dv=i,Dv}var Rv,Sk;function g5(){return Sk||(Sk=1,Rv=f5()),Rv}var Lv,kk;function $X(){if(kk)return Lv;kk=1;var n=Kf();function e(t,r){var i=[];return n(t,function(a,s,o){r(a,s,o)&&i.push(a)}),i}return Lv=e,Lv}var Iv,Ck;function jX(){if(Ck)return Iv;Ck=1;var n="__lodash_hash_undefined__";function e(t){return this.__data__.set(t,n),this}return Iv=e,Iv}var Fv,Ak;function qX(){if(Ak)return Fv;Ak=1;function n(e){return this.__data__.has(e)}return Fv=n,Fv}var Bv,Tk;function p5(){if(Tk)return Bv;Tk=1;var n=zx(),e=jX(),t=qX();function r(i){var a=-1,s=i==null?0:i.length;for(this.__data__=new n;++a<s;)this.add(i[a])}return r.prototype.add=r.prototype.push=e,r.prototype.has=t,Bv=r,Bv}var zv,Ok;function GX(){if(Ok)return zv;Ok=1;function n(e,t){for(var r=-1,i=e==null?0:e.length;++r<i;)if(t(e[r],r,e))return!0;return!1}return zv=n,zv}var $v,Mk;function v5(){if(Mk)return $v;Mk=1;function n(e,t){return e.has(t)}return $v=n,$v}var jv,Pk;function m5(){if(Pk)return jv;Pk=1;var n=p5(),e=GX(),t=v5(),r=1,i=2;function a(s,o,u,l,c,h){var d=u&r,f=s.length,g=o.length;if(f!=g&&!(d&&g>f))return!1;var p=h.get(s),v=h.get(o);if(p&&v)return p==o&&v==s;var m=-1,y=!0,b=u&i?new n:void 0;for(h.set(s,o),h.set(o,s);++m<f;){var x=s[m],w=o[m];if(l)var E=d?l(w,x,m,o,s,h):l(x,w,m,s,o,h);if(E!==void 0){if(E)continue;y=!1;break}if(b){if(!e(o,function(_,S){if(!t(b,S)&&(x===_||c(x,_,u,l,h)))return b.push(S)})){y=!1;break}}else if(!(x===w||c(x,w,u,l,h))){y=!1;break}}return h.delete(s),h.delete(o),y}return jv=a,jv}var qv,Nk;function WX(){if(Nk)return qv;Nk=1;function n(e){var t=-1,r=Array(e.size);return e.forEach(function(i,a){r[++t]=[a,i]}),r}return qv=n,qv}var Gv,Dk;function Kx(){if(Dk)return Gv;Dk=1;function n(e){var t=-1,r=Array(e.size);return e.forEach(function(i){r[++t]=i}),r}return Gv=n,Gv}var Wv,Rk;function VX(){if(Rk)return Wv;Rk=1;var n=bu(),e=o5(),t=yu(),r=m5(),i=WX(),a=Kx(),s=1,o=2,u="[object Boolean]",l="[object Date]",c="[object Error]",h="[object Map]",d="[object Number]",f="[object RegExp]",g="[object Set]",p="[object String]",v="[object Symbol]",m="[object ArrayBuffer]",y="[object DataView]",b=n?n.prototype:void 0,x=b?b.valueOf:void 0;function w(E,_,S,C,k,A,T){switch(S){case y:if(E.byteLength!=_.byteLength||E.byteOffset!=_.byteOffset)return!1;E=E.buffer,_=_.buffer;case m:return!(E.byteLength!=_.byteLength||!A(new e(E),new e(_)));case u:case l:case d:return t(+E,+_);case c:return E.name==_.name&&E.message==_.message;case f:case p:return E==_+"";case h:var O=i;case g:var P=C&s;if(O||(O=a),E.size!=_.size&&!P)return!1;var R=T.get(E);if(R)return R==_;C|=o,T.set(E,_);var N=r(O(E),O(_),C,k,A,T);return T.delete(E),N;case v:if(x)return x.call(E)==x.call(_)}return!1}return Wv=w,Wv}var Vv,Lk;function UX(){if(Lk)return Vv;Lk=1;var n=a5(),e=1,t=Object.prototype,r=t.hasOwnProperty;function i(a,s,o,u,l,c){var h=o&e,d=n(a),f=d.length,g=n(s),p=g.length;if(f!=p&&!h)return!1;for(var v=f;v--;){var m=d[v];if(!(h?m in s:r.call(s,m)))return!1}var y=c.get(a),b=c.get(s);if(y&&b)return y==s&&b==a;var x=!0;c.set(a,s),c.set(s,a);for(var w=h;++v<f;){m=d[v];var E=a[m],_=s[m];if(u)var S=h?u(_,E,m,s,a,c):u(E,_,m,a,s,c);if(!(S===void 0?E===_||l(E,_,o,u,c):S)){x=!1;break}w||(w=m=="constructor")}if(x&&!w){var C=a.constructor,k=s.constructor;C!=k&&"constructor"in a&&"constructor"in s&&!(typeof C=="function"&&C instanceof C&&typeof k=="function"&&k instanceof k)&&(x=!1)}return c.delete(a),c.delete(s),x}return Vv=i,Vv}var Uv,Ik;function HX(){if(Ik)return Uv;Ik=1;var n=Gf(),e=m5(),t=VX(),r=UX(),i=wu(),a=jt(),s=xu(),o=fc(),u=1,l="[object Arguments]",c="[object Array]",h="[object Object]",d=Object.prototype,f=d.hasOwnProperty;function g(p,v,m,y,b,x){var w=a(p),E=a(v),_=w?c:i(p),S=E?c:i(v);_=_==l?h:_,S=S==l?h:S;var C=_==h,k=S==h,A=_==S;if(A&&s(p)){if(!s(v))return!1;w=!0,C=!1}if(A&&!C)return x||(x=new n),w||o(p)?e(p,v,m,y,b,x):t(p,v,_,m,y,b,x);if(!(m&u)){var T=C&&f.call(p,"__wrapped__"),O=k&&f.call(v,"__wrapped__");if(T||O){var P=T?p.value():p,R=O?v.value():v;return x||(x=new n),b(P,R,m,y,x)}}return A?(x||(x=new n),r(p,v,m,y,b,x)):!1}return Uv=g,Uv}var Hv,Fk;function y5(){if(Fk)return Hv;Fk=1;var n=HX(),e=Fi();function t(r,i,a,s,o){return r===i?!0:r==null||i==null||!e(r)&&!e(i)?r!==r&&i!==i:n(r,i,a,s,t,o)}return Hv=t,Hv}var Yv,Bk;function YX(){if(Bk)return Yv;Bk=1;var n=Gf(),e=y5(),t=1,r=2;function i(a,s,o,u){var l=o.length,c=l,h=!u;if(a==null)return!c;for(a=Object(a);l--;){var d=o[l];if(h&&d[2]?d[1]!==a[d[0]]:!(d[0]in a))return!1}for(;++l<c;){d=o[l];var f=d[0],g=a[f],p=d[1];if(h&&d[2]){if(g===void 0&&!(f in a))return!1}else{var v=new n;if(u)var m=u(g,p,f,a,s,v);if(!(m===void 0?e(p,g,t|r,u,v):m))return!1}}return!0}return Yv=i,Yv}var Xv,zk;function b5(){if(zk)return Xv;zk=1;var n=Br();function e(t){return t===t&&!n(t)}return Xv=e,Xv}var Kv,$k;function XX(){if($k)return Kv;$k=1;var n=b5(),e=vs();function t(r){for(var i=e(r),a=i.length;a--;){var s=i[a],o=r[s];i[a]=[s,o,n(o)]}return i}return Kv=t,Kv}var Zv,jk;function x5(){if(jk)return Zv;jk=1;function n(e,t){return function(r){return r==null?!1:r[e]===t&&(t!==void 0||e in Object(r))}}return Zv=n,Zv}var Jv,qk;function KX(){if(qk)return Jv;qk=1;var n=YX(),e=XX(),t=x5();function r(i){var a=e(i);return a.length==1&&a[0][2]?t(a[0][0],a[0][1]):function(s){return s===i||n(s,i,a)}}return Jv=r,Jv}var Qv,Gk;function Eu(){if(Gk)return Qv;Gk=1;var n=oo(),e=Fi(),t="[object Symbol]";function r(i){return typeof i=="symbol"||e(i)&&n(i)==t}return Qv=r,Qv}var e1,Wk;function Zx(){if(Wk)return e1;Wk=1;var n=jt(),e=Eu(),t=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,r=/^\w*$/;function i(a,s){if(n(a))return!1;var o=typeof a;return o=="number"||o=="symbol"||o=="boolean"||a==null||e(a)?!0:r.test(a)||!t.test(a)||s!=null&&a in Object(s)}return e1=i,e1}var t1,Vk;function ZX(){if(Vk)return t1;Vk=1;var n=zx(),e="Expected a function";function t(r,i){if(typeof r!="function"||i!=null&&typeof i!="function")throw new TypeError(e);var a=function(){var s=arguments,o=i?i.apply(this,s):s[0],u=a.cache;if(u.has(o))return u.get(o);var l=r.apply(this,s);return a.cache=u.set(o,l)||u,l};return a.cache=new(t.Cache||n),a}return t.Cache=n,t1=t,t1}var n1,Uk;function JX(){if(Uk)return n1;Uk=1;var n=ZX(),e=500;function t(r){var i=n(r,function(s){return a.size===e&&a.clear(),s}),a=i.cache;return i}return n1=t,n1}var r1,Hk;function QX(){if(Hk)return r1;Hk=1;var n=JX(),e=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,t=/\\(\\)?/g,r=n(function(i){var a=[];return i.charCodeAt(0)===46&&a.push(""),i.replace(e,function(s,o,u,l){a.push(u?l.replace(t,"$1"):o||s)}),a});return r1=r,r1}var i1,Yk;function Zf(){if(Yk)return i1;Yk=1;function n(e,t){for(var r=-1,i=e==null?0:e.length,a=Array(i);++r<i;)a[r]=t(e[r],r,e);return a}return i1=n,i1}var a1,Xk;function eK(){if(Xk)return a1;Xk=1;var n=bu(),e=Zf(),t=jt(),r=Eu(),i=1/0,a=n?n.prototype:void 0,s=a?a.toString:void 0;function o(u){if(typeof u=="string")return u;if(t(u))return e(u,o)+"";if(r(u))return s?s.call(u):"";var l=u+"";return l=="0"&&1/u==-i?"-0":l}return a1=o,a1}var s1,Kk;function w5(){if(Kk)return s1;Kk=1;var n=eK();function e(t){return t==null?"":n(t)}return s1=e,s1}var o1,Zk;function Jf(){if(Zk)return o1;Zk=1;var n=jt(),e=Zx(),t=QX(),r=w5();function i(a,s){return n(a)?a:e(a,s)?[a]:t(r(a))}return o1=i,o1}var u1,Jk;function gc(){if(Jk)return u1;Jk=1;var n=Eu(),e=1/0;function t(r){if(typeof r=="string"||n(r))return r;var i=r+"";return i=="0"&&1/r==-e?"-0":i}return u1=t,u1}var l1,Qk;function Qf(){if(Qk)return l1;Qk=1;var n=Jf(),e=gc();function t(r,i){i=n(i,r);for(var a=0,s=i.length;r!=null&&a<s;)r=r[e(i[a++])];return a&&a==s?r:void 0}return l1=t,l1}var c1,e6;function tK(){if(e6)return c1;e6=1;var n=Qf();function e(t,r,i){var a=t==null?void 0:n(t,r);return a===void 0?i:a}return c1=e,c1}var h1,t6;function nK(){if(t6)return h1;t6=1;function n(e,t){return e!=null&&t in Object(e)}return h1=n,h1}var d1,n6;function E5(){if(n6)return d1;n6=1;var n=Jf(),e=dc(),t=jt(),r=Uf(),i=jx(),a=gc();function s(o,u,l){u=n(u,o);for(var c=-1,h=u.length,d=!1;++c<h;){var f=a(u[c]);if(!(d=o!=null&&l(o,f)))break;o=o[f]}return d||++c!=h?d:(h=o==null?0:o.length,!!h&&i(h)&&r(f,h)&&(t(o)||e(o)))}return d1=s,d1}var f1,r6;function _5(){if(r6)return f1;r6=1;var n=nK(),e=E5();function t(r,i){return r!=null&&e(r,i,n)}return f1=t,f1}var g1,i6;function rK(){if(i6)return g1;i6=1;var n=y5(),e=tK(),t=_5(),r=Zx(),i=b5(),a=x5(),s=gc(),o=1,u=2;function l(c,h){return r(c)&&i(h)?a(s(c),h):function(d){var f=e(d,c);return f===void 0&&f===h?t(d,c):n(h,f,o|u)}}return g1=l,g1}var p1,a6;function S5(){if(a6)return p1;a6=1;function n(e){return function(t){return t==null?void 0:t[e]}}return p1=n,p1}var v1,s6;function iK(){if(s6)return v1;s6=1;var n=Qf();function e(t){return function(r){return n(r,t)}}return v1=e,v1}var m1,o6;function aK(){if(o6)return m1;o6=1;var n=S5(),e=iK(),t=Zx(),r=gc();function i(a){return t(a)?n(r(a)):e(a)}return m1=i,m1}var y1,u6;function ya(){if(u6)return y1;u6=1;var n=KX(),e=rK(),t=co(),r=jt(),i=aK();function a(s){return typeof s=="function"?s:s==null?t:typeof s=="object"?r(s)?e(s[0],s[1]):n(s):i(s)}return y1=a,y1}var b1,l6;function k5(){if(l6)return b1;l6=1;var n=t5(),e=$X(),t=ya(),r=jt();function i(a,s){var o=r(a)?n:e;return o(a,t(s,3))}return b1=i,b1}var x1,c6;function sK(){if(c6)return x1;c6=1;var n=Object.prototype,e=n.hasOwnProperty;function t(r,i){return r!=null&&e.call(r,i)}return x1=t,x1}var w1,h6;function C5(){if(h6)return w1;h6=1;var n=sK(),e=E5();function t(r,i){return r!=null&&e(r,i,n)}return w1=t,w1}var E1,d6;function oK(){if(d6)return E1;d6=1;var n=Gx(),e=wu(),t=dc(),r=jt(),i=ma(),a=xu(),s=Yf(),o=fc(),u="[object Map]",l="[object Set]",c=Object.prototype,h=c.hasOwnProperty;function d(f){if(f==null)return!0;if(i(f)&&(r(f)||typeof f=="string"||typeof f.splice=="function"||a(f)||o(f)||t(f)))return!f.length;var g=e(f);if(g==u||g==l)return!f.size;if(s(f))return!n(f).length;for(var p in f)if(h.call(f,p))return!1;return!0}return E1=d,E1}var _1,f6;function A5(){if(f6)return _1;f6=1;function n(e){return e===void 0}return _1=n,_1}var S1,g6;function T5(){if(g6)return S1;g6=1;var n=Kf(),e=ma();function t(r,i){var a=-1,s=e(r)?Array(r.length):[];return n(r,function(o,u,l){s[++a]=i(o,u,l)}),s}return S1=t,S1}var k1,p6;function O5(){if(p6)return k1;p6=1;var n=Zf(),e=ya(),t=T5(),r=jt();function i(a,s){var o=r(a)?n:t;return o(a,e(s,3))}return k1=i,k1}var C1,v6;function uK(){if(v6)return C1;v6=1;function n(e,t,r,i){var a=-1,s=e==null?0:e.length;for(i&&s&&(r=e[++a]);++a<s;)r=t(r,e[a],a,e);return r}return C1=n,C1}var A1,m6;function lK(){if(m6)return A1;m6=1;function n(e,t,r,i,a){return a(e,function(s,o,u){r=i?(i=!1,s):t(r,s,o,u)}),r}return A1=n,A1}var T1,y6;function M5(){if(y6)return T1;y6=1;var n=uK(),e=Kf(),t=ya(),r=lK(),i=jt();function a(s,o,u){var l=i(s)?n:r,c=arguments.length<3;return l(s,t(o,4),u,c,e)}return T1=a,T1}var O1,b6;function cK(){if(b6)return O1;b6=1;var n=oo(),e=jt(),t=Fi(),r="[object String]";function i(a){return typeof a=="string"||!e(a)&&t(a)&&n(a)==r}return O1=i,O1}var M1,x6;function hK(){if(x6)return M1;x6=1;var n=S5(),e=n("length");return M1=e,M1}var P1,w6;function dK(){if(w6)return P1;w6=1;var n="\\ud800-\\udfff",e="\\u0300-\\u036f",t="\\ufe20-\\ufe2f",r="\\u20d0-\\u20ff",i=e+t+r,a="\\ufe0e\\ufe0f",s="\\u200d",o=RegExp("["+s+n+i+a+"]");function u(l){return o.test(l)}return P1=u,P1}var N1,E6;function fK(){if(E6)return N1;E6=1;var n="\\ud800-\\udfff",e="\\u0300-\\u036f",t="\\ufe20-\\ufe2f",r="\\u20d0-\\u20ff",i=e+t+r,a="\\ufe0e\\ufe0f",s="["+n+"]",o="["+i+"]",u="\\ud83c[\\udffb-\\udfff]",l="(?:"+o+"|"+u+")",c="[^"+n+"]",h="(?:\\ud83c[\\udde6-\\uddff]){2}",d="[\\ud800-\\udbff][\\udc00-\\udfff]",f="\\u200d",g=l+"?",p="["+a+"]?",v="(?:"+f+"(?:"+[c,h,d].join("|")+")"+p+g+")*",m=p+g+v,y="(?:"+[c+o+"?",o,h,d,s].join("|")+")",b=RegExp(u+"(?="+u+")|"+y+m,"g");function x(w){for(var E=b.lastIndex=0;b.test(w);)++E;return E}return N1=x,N1}var D1,_6;function gK(){if(_6)return D1;_6=1;var n=hK(),e=dK(),t=fK();function r(i){return e(i)?t(i):n(i)}return D1=r,D1}var R1,S6;function pK(){if(S6)return R1;S6=1;var n=Gx(),e=wu(),t=ma(),r=cK(),i=gK(),a="[object Map]",s="[object Set]";function o(u){if(u==null)return 0;if(t(u))return r(u)?i(u):u.length;var l=e(u);return l==a||l==s?u.size:n(u).length}return R1=o,R1}var L1,k6;function vK(){if(k6)return L1;k6=1;var n=$x(),e=l5(),t=Xx(),r=ya(),i=Xf(),a=jt(),s=xu(),o=cc(),u=Br(),l=fc();function c(h,d,f){var g=a(h),p=g||s(h)||l(h);if(d=r(d,4),f==null){var v=h&&h.constructor;p?f=g?new v:[]:u(h)?f=o(v)?e(i(h)):{}:f={}}return(p?n:t)(h,function(m,y,b){return d(f,m,y,b)}),f}return L1=c,L1}var I1,C6;function mK(){if(C6)return I1;C6=1;var n=bu(),e=dc(),t=jt(),r=n?n.isConcatSpreadable:void 0;function i(a){return t(a)||e(a)||!!(r&&a&&a[r])}return I1=i,I1}var F1,A6;function Jx(){if(A6)return F1;A6=1;var n=Vx(),e=mK();function t(r,i,a,s,o){var u=-1,l=r.length;for(a||(a=e),o||(o=[]);++u<l;){var c=r[u];i>0&&a(c)?i>1?t(c,i-1,a,s,o):n(o,c):s||(o[o.length]=c)}return o}return F1=t,F1}var B1,T6;function yK(){if(T6)return B1;T6=1;function n(e,t,r){switch(r.length){case 0:return e.call(t);case 1:return e.call(t,r[0]);case 2:return e.call(t,r[0],r[1]);case 3:return e.call(t,r[0],r[1],r[2])}return e.apply(t,r)}return B1=n,B1}var z1,O6;function P5(){if(O6)return z1;O6=1;var n=yK(),e=Math.max;function t(r,i,a){return i=e(i===void 0?r.length-1:i,0),function(){for(var s=arguments,o=-1,u=e(s.length-i,0),l=Array(u);++o<u;)l[o]=s[i+o];o=-1;for(var c=Array(i+1);++o<i;)c[o]=s[o];return c[i]=a(l),n(r,this,c)}}return z1=t,z1}var $1,M6;function bK(){if(M6)return $1;M6=1;var n=Hx(),e=KP(),t=co(),r=e?function(i,a){return e(i,"toString",{configurable:!0,enumerable:!1,value:n(a),writable:!0})}:t;return $1=r,$1}var j1,P6;function xK(){if(P6)return j1;P6=1;var n=800,e=16,t=Date.now;function r(i){var a=0,s=0;return function(){var o=t(),u=e-(o-s);if(s=o,u>0){if(++a>=n)return arguments[0]}else a=0;return i.apply(void 0,arguments)}}return j1=r,j1}var q1,N6;function N5(){if(N6)return q1;N6=1;var n=bK(),e=xK(),t=e(n);return q1=t,q1}var G1,D6;function e0(){if(D6)return G1;D6=1;var n=co(),e=P5(),t=N5();function r(i,a){return t(e(i,a,n),i+"")}return G1=r,G1}var W1,R6;function D5(){if(R6)return W1;R6=1;function n(e,t,r,i){for(var a=e.length,s=r+(i?1:-1);i?s--:++s<a;)if(t(e[s],s,e))return s;return-1}return W1=n,W1}var V1,L6;function wK(){if(L6)return V1;L6=1;function n(e){return e!==e}return V1=n,V1}var U1,I6;function EK(){if(I6)return U1;I6=1;function n(e,t,r){for(var i=r-1,a=e.length;++i<a;)if(e[i]===t)return i;return-1}return U1=n,U1}var H1,F6;function _K(){if(F6)return H1;F6=1;var n=D5(),e=wK(),t=EK();function r(i,a,s){return a===a?t(i,a,s):n(i,e,s)}return H1=r,H1}var Y1,B6;function SK(){if(B6)return Y1;B6=1;var n=_K();function e(t,r){var i=t==null?0:t.length;return!!i&&n(t,r,0)>-1}return Y1=e,Y1}var X1,z6;function kK(){if(z6)return X1;z6=1;function n(e,t,r){for(var i=-1,a=e==null?0:e.length;++i<a;)if(r(t,e[i]))return!0;return!1}return X1=n,X1}var K1,$6;function CK(){if($6)return K1;$6=1;function n(){}return K1=n,K1}var Z1,j6;function AK(){if(j6)return Z1;j6=1;var n=s5(),e=CK(),t=Kx(),r=1/0,i=n&&1/t(new n([,-0]))[1]==r?function(a){return new n(a)}:e;return Z1=i,Z1}var J1,q6;function TK(){if(q6)return J1;q6=1;var n=p5(),e=SK(),t=kK(),r=v5(),i=AK(),a=Kx(),s=200;function o(u,l,c){var h=-1,d=e,f=u.length,g=!0,p=[],v=p;if(c)g=!1,d=t;else if(f>=s){var m=l?null:i(u);if(m)return a(m);g=!1,d=r,v=new n}else v=l?[]:p;e:for(;++h<f;){var y=u[h],b=l?l(y):y;if(y=c||y!==0?y:0,g&&b===b){for(var x=v.length;x--;)if(v[x]===b)continue e;l&&v.push(b),p.push(y)}else d(v,b,c)||(v!==p&&v.push(b),p.push(y))}return p}return J1=o,J1}var Q1,G6;function R5(){if(G6)return Q1;G6=1;var n=ma(),e=Fi();function t(r){return e(r)&&n(r)}return Q1=t,Q1}var em,W6;function OK(){if(W6)return em;W6=1;var n=Jx(),e=e0(),t=TK(),r=R5(),i=e(function(a){return t(n(a,1,r,!0))});return em=i,em}var tm,V6;function MK(){if(V6)return tm;V6=1;var n=Zf();function e(t,r){return n(r,function(i){return t[i]})}return tm=e,tm}var nm,U6;function L5(){if(U6)return nm;U6=1;var n=MK(),e=vs();function t(r){return r==null?[]:n(r,e(r))}return nm=t,nm}var rm,H6;function zr(){if(H6)return rm;H6=1;var n;if(typeof Fx=="function")try{n={clone:FX(),constant:Hx(),each:g5(),filter:k5(),has:C5(),isArray:jt(),isEmpty:oK(),isFunction:cc(),isUndefined:A5(),keys:vs(),map:O5(),reduce:M5(),size:pK(),transform:vK(),union:OK(),values:L5()}}catch{}return n||(n=window._),rm=n,rm}var im,Y6;function Qx(){if(Y6)return im;Y6=1;var n=zr();im=i;var e="\0",t="\0",r="";function i(c){this._isDirected=n.has(c,"directed")?c.directed:!0,this._isMultigraph=n.has(c,"multigraph")?c.multigraph:!1,this._isCompound=n.has(c,"compound")?c.compound:!1,this._label=void 0,this._defaultNodeLabelFn=n.constant(void 0),this._defaultEdgeLabelFn=n.constant(void 0),this._nodes={},this._isCompound&&(this._parent={},this._children={},this._children[t]={}),this._in={},this._preds={},this._out={},this._sucs={},this._edgeObjs={},this._edgeLabels={}}i.prototype._nodeCount=0,i.prototype._edgeCount=0,i.prototype.isDirected=function(){return this._isDirected},i.prototype.isMultigraph=function(){return this._isMultigraph},i.prototype.isCompound=function(){return this._isCompound},i.prototype.setGraph=function(c){return this._label=c,this},i.prototype.graph=function(){return this._label},i.prototype.setDefaultNodeLabel=function(c){return n.isFunction(c)||(c=n.constant(c)),this._defaultNodeLabelFn=c,this},i.prototype.nodeCount=function(){return this._nodeCount},i.prototype.nodes=function(){return n.keys(this._nodes)},i.prototype.sources=function(){var c=this;return n.filter(this.nodes(),function(h){return n.isEmpty(c._in[h])})},i.prototype.sinks=function(){var c=this;return n.filter(this.nodes(),function(h){return n.isEmpty(c._out[h])})},i.prototype.setNodes=function(c,h){var d=arguments,f=this;return n.each(c,function(g){d.length>1?f.setNode(g,h):f.setNode(g)}),this},i.prototype.setNode=function(c,h){return n.has(this._nodes,c)?(arguments.length>1&&(this._nodes[c]=h),this):(this._nodes[c]=arguments.length>1?h:this._defaultNodeLabelFn(c),this._isCompound&&(this._parent[c]=t,this._children[c]={},this._children[t][c]=!0),this._in[c]={},this._preds[c]={},this._out[c]={},this._sucs[c]={},++this._nodeCount,this)},i.prototype.node=function(c){return this._nodes[c]},i.prototype.hasNode=function(c){return n.has(this._nodes,c)},i.prototype.removeNode=function(c){var h=this;if(n.has(this._nodes,c)){var d=function(f){h.removeEdge(h._edgeObjs[f])};delete this._nodes[c],this._isCompound&&(this._removeFromParentsChildList(c),delete this._parent[c],n.each(this.children(c),function(f){h.setParent(f)}),delete this._children[c]),n.each(n.keys(this._in[c]),d),delete this._in[c],delete this._preds[c],n.each(n.keys(this._out[c]),d),delete this._out[c],delete this._sucs[c],--this._nodeCount}return this},i.prototype.setParent=function(c,h){if(!this._isCompound)throw new Error("Cannot set parent in a non-compound graph");if(n.isUndefined(h))h=t;else{h+="";for(var d=h;!n.isUndefined(d);d=this.parent(d))if(d===c)throw new Error("Setting "+h+" as parent of "+c+" would create a cycle");this.setNode(h)}return this.setNode(c),this._removeFromParentsChildList(c),this._parent[c]=h,this._children[h][c]=!0,this},i.prototype._removeFromParentsChildList=function(c){delete this._children[this._parent[c]][c]},i.prototype.parent=function(c){if(this._isCompound){var h=this._parent[c];if(h!==t)return h}},i.prototype.children=function(c){if(n.isUndefined(c)&&(c=t),this._isCompound){var h=this._children[c];if(h)return n.keys(h)}else{if(c===t)return this.nodes();if(this.hasNode(c))return[]}},i.prototype.predecessors=function(c){var h=this._preds[c];if(h)return n.keys(h)},i.prototype.successors=function(c){var h=this._sucs[c];if(h)return n.keys(h)},i.prototype.neighbors=function(c){var h=this.predecessors(c);if(h)return n.union(h,this.successors(c))},i.prototype.isLeaf=function(c){var h;return this.isDirected()?h=this.successors(c):h=this.neighbors(c),h.length===0},i.prototype.filterNodes=function(c){var h=new this.constructor({directed:this._isDirected,multigraph:this._isMultigraph,compound:this._isCompound});h.setGraph(this.graph());var d=this;n.each(this._nodes,function(p,v){c(v)&&h.setNode(v,p)}),n.each(this._edgeObjs,function(p){h.hasNode(p.v)&&h.hasNode(p.w)&&h.setEdge(p,d.edge(p))});var f={};function g(p){var v=d.parent(p);return v===void 0||h.hasNode(v)?(f[p]=v,v):v in f?f[v]:g(v)}return this._isCompound&&n.each(h.nodes(),function(p){h.setParent(p,g(p))}),h},i.prototype.setDefaultEdgeLabel=function(c){return n.isFunction(c)||(c=n.constant(c)),this._defaultEdgeLabelFn=c,this},i.prototype.edgeCount=function(){return this._edgeCount},i.prototype.edges=function(){return n.values(this._edgeObjs)},i.prototype.setPath=function(c,h){var d=this,f=arguments;return n.reduce(c,function(g,p){return f.length>1?d.setEdge(g,p,h):d.setEdge(g,p),p}),this},i.prototype.setEdge=function(){var c,h,d,f,g=!1,p=arguments[0];typeof p=="object"&&p!==null&&"v"in p?(c=p.v,h=p.w,d=p.name,arguments.length===2&&(f=arguments[1],g=!0)):(c=p,h=arguments[1],d=arguments[3],arguments.length>2&&(f=arguments[2],g=!0)),c=""+c,h=""+h,n.isUndefined(d)||(d=""+d);var v=o(this._isDirected,c,h,d);if(n.has(this._edgeLabels,v))return g&&(this._edgeLabels[v]=f),this;if(!n.isUndefined(d)&&!this._isMultigraph)throw new Error("Cannot set a named edge when isMultigraph = false");this.setNode(c),this.setNode(h),this._edgeLabels[v]=g?f:this._defaultEdgeLabelFn(c,h,d);var m=u(this._isDirected,c,h,d);return c=m.v,h=m.w,Object.freeze(m),this._edgeObjs[v]=m,a(this._preds[h],c),a(this._sucs[c],h),this._in[h][v]=m,this._out[c][v]=m,this._edgeCount++,this},i.prototype.edge=function(c,h,d){var f=arguments.length===1?l(this._isDirected,arguments[0]):o(this._isDirected,c,h,d);return this._edgeLabels[f]},i.prototype.hasEdge=function(c,h,d){var f=arguments.length===1?l(this._isDirected,arguments[0]):o(this._isDirected,c,h,d);return n.has(this._edgeLabels,f)},i.prototype.removeEdge=function(c,h,d){var f=arguments.length===1?l(this._isDirected,arguments[0]):o(this._isDirected,c,h,d),g=this._edgeObjs[f];return g&&(c=g.v,h=g.w,delete this._edgeLabels[f],delete this._edgeObjs[f],s(this._preds[h],c),s(this._sucs[c],h),delete this._in[h][f],delete this._out[c][f],this._edgeCount--),this},i.prototype.inEdges=function(c,h){var d=this._in[c];if(d){var f=n.values(d);return h?n.filter(f,function(g){return g.v===h}):f}},i.prototype.outEdges=function(c,h){var d=this._out[c];if(d){var f=n.values(d);return h?n.filter(f,function(g){return g.w===h}):f}},i.prototype.nodeEdges=function(c,h){var d=this.inEdges(c,h);if(d)return d.concat(this.outEdges(c,h))};function a(c,h){c[h]?c[h]++:c[h]=1}function s(c,h){--c[h]||delete c[h]}function o(c,h,d,f){var g=""+h,p=""+d;if(!c&&g>p){var v=g;g=p,p=v}return g+r+p+r+(n.isUndefined(f)?e:f)}function u(c,h,d,f){var g=""+h,p=""+d;if(!c&&g>p){var v=g;g=p,p=v}var m={v:g,w:p};return f&&(m.name=f),m}function l(c,h){return o(c,h.v,h.w,h.name)}return im}var am,X6;function PK(){return X6||(X6=1,am="2.1.8"),am}var sm,K6;function NK(){return K6||(K6=1,sm={Graph:Qx(),version:PK()}),sm}var om,Z6;function DK(){if(Z6)return om;Z6=1;var n=zr(),e=Qx();om={write:t,read:a};function t(s){var o={options:{directed:s.isDirected(),multigraph:s.isMultigraph(),compound:s.isCompound()},nodes:r(s),edges:i(s)};return n.isUndefined(s.graph())||(o.value=n.clone(s.graph())),o}function r(s){return n.map(s.nodes(),function(o){var u=s.node(o),l=s.parent(o),c={v:o};return n.isUndefined(u)||(c.value=u),n.isUndefined(l)||(c.parent=l),c})}function i(s){return n.map(s.edges(),function(o){var u=s.edge(o),l={v:o.v,w:o.w};return n.isUndefined(o.name)||(l.name=o.name),n.isUndefined(u)||(l.value=u),l})}function a(s){var o=new e(s.options).setGraph(s.value);return n.each(s.nodes,function(u){o.setNode(u.v,u.value),u.parent&&o.setParent(u.v,u.parent)}),n.each(s.edges,function(u){o.setEdge({v:u.v,w:u.w,name:u.name},u.value)}),o}return om}var um,J6;function RK(){if(J6)return um;J6=1;var n=zr();um=e;function e(t){var r={},i=[],a;function s(o){n.has(r,o)||(r[o]=!0,a.push(o),n.each(t.successors(o),s),n.each(t.predecessors(o),s))}return n.each(t.nodes(),function(o){a=[],s(o),a.length&&i.push(a)}),i}return um}var lm,Q6;function I5(){if(Q6)return lm;Q6=1;var n=zr();lm=e;function e(){this._arr=[],this._keyIndices={}}return e.prototype.size=function(){return this._arr.length},e.prototype.keys=function(){return this._arr.map(function(t){return t.key})},e.prototype.has=function(t){return n.has(this._keyIndices,t)},e.prototype.priority=function(t){var r=this._keyIndices[t];if(r!==void 0)return this._arr[r].priority},e.prototype.min=function(){if(this.size()===0)throw new Error("Queue underflow");return this._arr[0].key},e.prototype.add=function(t,r){var i=this._keyIndices;if(t=String(t),!n.has(i,t)){var a=this._arr,s=a.length;return i[t]=s,a.push({key:t,priority:r}),this._decrease(s),!0}return!1},e.prototype.removeMin=function(){this._swap(0,this._arr.length-1);var t=this._arr.pop();return delete this._keyIndices[t.key],this._heapify(0),t.key},e.prototype.decrease=function(t,r){var i=this._keyIndices[t];if(r>this._arr[i].priority)throw new Error("New priority is greater than current priority. Key: "+t+" Old: "+this._arr[i].priority+" New: "+r);this._arr[i].priority=r,this._decrease(i)},e.prototype._heapify=function(t){var r=this._arr,i=2*t,a=i+1,s=t;i<r.length&&(s=r[i].priority<r[s].priority?i:s,a<r.length&&(s=r[a].priority<r[s].priority?a:s),s!==t&&(this._swap(t,s),this._heapify(s)))},e.prototype._decrease=function(t){for(var r=this._arr,i=r[t].priority,a;t!==0&&(a=t>>1,!(r[a].priority<i));)this._swap(t,a),t=a},e.prototype._swap=function(t,r){var i=this._arr,a=this._keyIndices,s=i[t],o=i[r];i[t]=o,i[r]=s,a[o.key]=t,a[s.key]=r},lm}var cm,eC;function F5(){if(eC)return cm;eC=1;var n=zr(),e=I5();cm=r;var t=n.constant(1);function r(a,s,o,u){return i(a,String(s),o||t,u||function(l){return a.outEdges(l)})}function i(a,s,o,u){var l={},c=new e,h,d,f=function(g){var p=g.v!==h?g.v:g.w,v=l[p],m=o(g),y=d.distance+m;if(m<0)throw new Error("dijkstra does not allow negative edge weights. Bad edge: "+g+" Weight: "+m);y<v.distance&&(v.distance=y,v.predecessor=h,c.decrease(p,y))};for(a.nodes().forEach(function(g){var p=g===s?0:Number.POSITIVE_INFINITY;l[g]={distance:p},c.add(g,p)});c.size()>0&&(h=c.removeMin(),d=l[h],d.distance!==Number.POSITIVE_INFINITY);)u(h).forEach(f);return l}return cm}var hm,tC;function LK(){if(tC)return hm;tC=1;var n=F5(),e=zr();hm=t;function t(r,i,a){return e.transform(r.nodes(),function(s,o){s[o]=n(r,o,i,a)},{})}return hm}var dm,nC;function B5(){if(nC)return dm;nC=1;var n=zr();dm=e;function e(t){var r=0,i=[],a={},s=[];function o(u){var l=a[u]={onStack:!0,lowlink:r,index:r++};if(i.push(u),t.successors(u).forEach(function(d){n.has(a,d)?a[d].onStack&&(l.lowlink=Math.min(l.lowlink,a[d].index)):(o(d),l.lowlink=Math.min(l.lowlink,a[d].lowlink))}),l.lowlink===l.index){var c=[],h;do h=i.pop(),a[h].onStack=!1,c.push(h);while(u!==h);s.push(c)}}return t.nodes().forEach(function(u){n.has(a,u)||o(u)}),s}return dm}var fm,rC;function IK(){if(rC)return fm;rC=1;var n=zr(),e=B5();fm=t;function t(r){return n.filter(e(r),function(i){return i.length>1||i.length===1&&r.hasEdge(i[0],i[0])})}return fm}var gm,iC;function FK(){if(iC)return gm;iC=1;var n=zr();gm=t;var e=n.constant(1);function t(i,a,s){return r(i,a||e,s||function(o){return i.outEdges(o)})}function r(i,a,s){var o={},u=i.nodes();return u.forEach(function(l){o[l]={},o[l][l]={distance:0},u.forEach(function(c){l!==c&&(o[l][c]={distance:Number.POSITIVE_INFINITY})}),s(l).forEach(function(c){var h=c.v===l?c.w:c.v,d=a(c);o[l][h]={distance:d,predecessor:l}})}),u.forEach(function(l){var c=o[l];u.forEach(function(h){var d=o[h];u.forEach(function(f){var g=d[l],p=c[f],v=d[f],m=g.distance+p.distance;m<v.distance&&(v.distance=m,v.predecessor=p.predecessor)})})}),o}return gm}var pm,aC;function z5(){if(aC)return pm;aC=1;var n=zr();pm=e,e.CycleException=t;function e(r){var i={},a={},s=[];function o(u){if(n.has(a,u))throw new t;n.has(i,u)||(a[u]=!0,i[u]=!0,n.each(r.predecessors(u),o),delete a[u],s.push(u))}if(n.each(r.sinks(),o),n.size(i)!==r.nodeCount())throw new t;return s}function t(){}return t.prototype=new Error,pm}var vm,sC;function BK(){if(sC)return vm;sC=1;var n=z5();vm=e;function e(t){try{n(t)}catch(r){if(r instanceof n.CycleException)return!1;throw r}return!0}return vm}var mm,oC;function $5(){if(oC)return mm;oC=1;var n=zr();mm=e;function e(r,i,a){n.isArray(i)||(i=[i]);var s=(r.isDirected()?r.successors:r.neighbors).bind(r),o=[],u={};return n.each(i,function(l){if(!r.hasNode(l))throw new Error("Graph does not have node: "+l);t(r,l,a==="post",u,s,o)}),o}function t(r,i,a,s,o,u){n.has(s,i)||(s[i]=!0,a||u.push(i),n.each(o(i),function(l){t(r,l,a,s,o,u)}),a&&u.push(i))}return mm}var ym,uC;function zK(){if(uC)return ym;uC=1;var n=$5();ym=e;function e(t,r){return n(t,r,"post")}return ym}var bm,lC;function $K(){if(lC)return bm;lC=1;var n=$5();bm=e;function e(t,r){return n(t,r,"pre")}return bm}var xm,cC;function jK(){if(cC)return xm;cC=1;var n=zr(),e=Qx(),t=I5();xm=r;function r(i,a){var s=new e,o={},u=new t,l;function c(d){var f=d.v===l?d.w:d.v,g=u.priority(f);if(g!==void 0){var p=a(d);p<g&&(o[f]=l,u.decrease(f,p))}}if(i.nodeCount()===0)return s;n.each(i.nodes(),function(d){u.add(d,Number.POSITIVE_INFINITY),s.setNode(d)}),u.decrease(i.nodes()[0],0);for(var h=!1;u.size()>0;){if(l=u.removeMin(),n.has(o,l))s.setEdge(l,o[l]);else{if(h)throw new Error("Input graph is not connected: "+i);h=!0}i.nodeEdges(l).forEach(c)}return s}return xm}var wm,hC;function qK(){return hC||(hC=1,wm={components:RK(),dijkstra:F5(),dijkstraAll:LK(),findCycles:IK(),floydWarshall:FK(),isAcyclic:BK(),postorder:zK(),preorder:$K(),prim:jK(),tarjan:B5(),topsort:z5()}),wm}var Em,dC;function GK(){if(dC)return Em;dC=1;var n=NK();return Em={Graph:n.Graph,json:DK(),alg:qK(),version:n.version},Em}var Pd;if(typeof Fx=="function")try{Pd=GK()}catch{}Pd||(Pd=window.graphlib);var ci=Pd,_m,fC;function WK(){if(fC)return _m;fC=1;var n=h5(),e=1,t=4;function r(i){return n(i,e|t)}return _m=r,_m}var Sm,gC;function t0(){if(gC)return Sm;gC=1;var n=yu(),e=ma(),t=Uf(),r=Br();function i(a,s,o){if(!r(o))return!1;var u=typeof s;return(u=="number"?e(o)&&t(s,o.length):u=="string"&&s in o)?n(o[s],a):!1}return Sm=i,Sm}var km,pC;function VK(){if(pC)return km;pC=1;var n=e0(),e=yu(),t=t0(),r=lo(),i=Object.prototype,a=i.hasOwnProperty,s=n(function(o,u){o=Object(o);var l=-1,c=u.length,h=c>2?u[2]:void 0;for(h&&t(u[0],u[1],h)&&(c=1);++l<c;)for(var d=u[l],f=r(d),g=-1,p=f.length;++g<p;){var v=f[g],m=o[v];(m===void 0||e(m,i[v])&&!a.call(o,v))&&(o[v]=d[v])}return o});return km=s,km}var Cm,vC;function UK(){if(vC)return Cm;vC=1;var n=ya(),e=ma(),t=vs();function r(i){return function(a,s,o){var u=Object(a);if(!e(a)){var l=n(s,3);a=t(a),s=function(h){return l(u[h],h,u)}}var c=i(a,s,o);return c>-1?u[l?a[c]:c]:void 0}}return Cm=r,Cm}var Am,mC;function HK(){if(mC)return Am;mC=1;var n=/\s/;function e(t){for(var r=t.length;r--&&n.test(t.charAt(r)););return r}return Am=e,Am}var Tm,yC;function YK(){if(yC)return Tm;yC=1;var n=HK(),e=/^\s+/;function t(r){return r&&r.slice(0,n(r)+1).replace(e,"")}return Tm=t,Tm}var Om,bC;function XK(){if(bC)return Om;bC=1;var n=YK(),e=Br(),t=Eu(),r=0/0,i=/^[-+]0x[0-9a-f]+$/i,a=/^0b[01]+$/i,s=/^0o[0-7]+$/i,o=parseInt;function u(l){if(typeof l=="number")return l;if(t(l))return r;if(e(l)){var c=typeof l.valueOf=="function"?l.valueOf():l;l=e(c)?c+"":c}if(typeof l!="string")return l===0?l:+l;l=n(l);var h=a.test(l);return h||s.test(l)?o(l.slice(2),h?2:8):i.test(l)?r:+l}return Om=u,Om}var Mm,xC;function j5(){if(xC)return Mm;xC=1;var n=XK(),e=1/0,t=17976931348623157e292;function r(i){if(!i)return i===0?i:0;if(i=n(i),i===e||i===-e){var a=i<0?-1:1;return a*t}return i===i?i:0}return Mm=r,Mm}var Pm,wC;function KK(){if(wC)return Pm;wC=1;var n=j5();function e(t){var r=n(t),i=r%1;return r===r?i?r-i:r:0}return Pm=e,Pm}var Nm,EC;function ZK(){if(EC)return Nm;EC=1;var n=D5(),e=ya(),t=KK(),r=Math.max;function i(a,s,o){var u=a==null?0:a.length;if(!u)return-1;var l=o==null?0:t(o);return l<0&&(l=r(u+l,0)),n(a,e(s,3),l)}return Nm=i,Nm}var Dm,_C;function JK(){if(_C)return Dm;_C=1;var n=UK(),e=ZK(),t=n(e);return Dm=t,Dm}var Rm,SC;function q5(){if(SC)return Rm;SC=1;var n=Jx();function e(t){var r=t==null?0:t.length;return r?n(t,1):[]}return Rm=e,Rm}var Lm,kC;function QK(){if(kC)return Lm;kC=1;var n=Yx(),e=d5(),t=lo();function r(i,a){return i==null?i:n(i,e(a),t)}return Lm=r,Lm}var Im,CC;function eZ(){if(CC)return Im;CC=1;function n(e){var t=e==null?0:e.length;return t?e[t-1]:void 0}return Im=n,Im}var Fm,AC;function tZ(){if(AC)return Fm;AC=1;var n=Wf(),e=Xx(),t=ya();function r(i,a){var s={};return a=t(a,3),e(i,function(o,u,l){n(s,u,a(o,u,l))}),s}return Fm=r,Fm}var Bm,TC;function ew(){if(TC)return Bm;TC=1;var n=Eu();function e(t,r,i){for(var a=-1,s=t.length;++a<s;){var o=t[a],u=r(o);if(u!=null&&(l===void 0?u===u&&!n(u):i(u,l)))var l=u,c=o}return c}return Bm=e,Bm}var zm,OC;function nZ(){if(OC)return zm;OC=1;function n(e,t){return e>t}return zm=n,zm}var $m,MC;function rZ(){if(MC)return $m;MC=1;var n=ew(),e=nZ(),t=co();function r(i){return i&&i.length?n(i,t,e):void 0}return $m=r,$m}var jm,PC;function G5(){if(PC)return jm;PC=1;var n=Wf(),e=yu();function t(r,i,a){(a!==void 0&&!e(r[i],a)||a===void 0&&!(i in r))&&n(r,i,a)}return jm=t,jm}var qm,NC;function iZ(){if(NC)return qm;NC=1;var n=oo(),e=Xf(),t=Fi(),r="[object Object]",i=Function.prototype,a=Object.prototype,s=i.toString,o=a.hasOwnProperty,u=s.call(Object);function l(c){if(!t(c)||n(c)!=r)return!1;var h=e(c);if(h===null)return!0;var d=o.call(h,"constructor")&&h.constructor;return typeof d=="function"&&d instanceof d&&s.call(d)==u}return qm=l,qm}var Gm,DC;function W5(){if(DC)return Gm;DC=1;function n(e,t){if(!(t==="constructor"&&typeof e[t]=="function")&&t!="__proto__")return e[t]}return Gm=n,Gm}var Wm,RC;function aZ(){if(RC)return Wm;RC=1;var n=hc(),e=lo();function t(r){return n(r,e(r))}return Wm=t,Wm}var Vm,LC;function sZ(){if(LC)return Vm;LC=1;var n=G5(),e=QP(),t=u5(),r=e5(),i=c5(),a=dc(),s=jt(),o=R5(),u=xu(),l=cc(),c=Br(),h=iZ(),d=fc(),f=W5(),g=aZ();function p(v,m,y,b,x,w,E){var _=f(v,y),S=f(m,y),C=E.get(S);if(C){n(v,y,C);return}var k=w?w(_,S,y+"",v,m,E):void 0,A=k===void 0;if(A){var T=s(S),O=!T&&u(S),P=!T&&!O&&d(S);k=S,T||O||P?s(_)?k=_:o(_)?k=r(_):O?(A=!1,k=e(S,!0)):P?(A=!1,k=t(S,!0)):k=[]:h(S)||a(S)?(k=_,a(_)?k=g(_):(!c(_)||l(_))&&(k=i(S))):A=!1}A&&(E.set(S,k),x(k,S,b,w,E),E.delete(S)),n(v,y,k)}return Vm=p,Vm}var Um,IC;function oZ(){if(IC)return Um;IC=1;var n=Gf(),e=G5(),t=Yx(),r=sZ(),i=Br(),a=lo(),s=W5();function o(u,l,c,h,d){u!==l&&t(l,function(f,g){if(d||(d=new n),i(f))r(u,l,g,c,o,h,d);else{var p=h?h(s(u,g),f,g+"",u,l,d):void 0;p===void 0&&(p=f),e(u,g,p)}},a)}return Um=o,Um}var Hm,FC;function uZ(){if(FC)return Hm;FC=1;var n=e0(),e=t0();function t(r){return n(function(i,a){var s=-1,o=a.length,u=o>1?a[o-1]:void 0,l=o>2?a[2]:void 0;for(u=r.length>3&&typeof u=="function"?(o--,u):void 0,l&&e(a[0],a[1],l)&&(u=o<3?void 0:u,o=1),i=Object(i);++s<o;){var c=a[s];c&&r(i,c,s,u)}return i})}return Hm=t,Hm}var Ym,BC;function lZ(){if(BC)return Ym;BC=1;var n=oZ(),e=uZ(),t=e(function(r,i,a){n(r,i,a)});return Ym=t,Ym}var Xm,zC;function V5(){if(zC)return Xm;zC=1;function n(e,t){return e<t}return Xm=n,Xm}var Km,$C;function cZ(){if($C)return Km;$C=1;var n=ew(),e=V5(),t=co();function r(i){return i&&i.length?n(i,t,e):void 0}return Km=r,Km}var Zm,jC;function hZ(){if(jC)return Zm;jC=1;var n=ew(),e=ya(),t=V5();function r(i,a){return i&&i.length?n(i,e(a,2),t):void 0}return Zm=r,Zm}var Jm,qC;function dZ(){if(qC)return Jm;qC=1;var n=li(),e=function(){return n.Date.now()};return Jm=e,Jm}var Qm,GC;function fZ(){if(GC)return Qm;GC=1;var n=Vf(),e=Jf(),t=Uf(),r=Br(),i=gc();function a(s,o,u,l){if(!r(s))return s;o=e(o,s);for(var c=-1,h=o.length,d=h-1,f=s;f!=null&&++c<h;){var g=i(o[c]),p=u;if(g==="__proto__"||g==="constructor"||g==="prototype")return s;if(c!=d){var v=f[g];p=l?l(v,g,f):void 0,p===void 0&&(p=r(v)?v:t(o[c+1])?[]:{})}n(f,g,p),f=f[g]}return s}return Qm=a,Qm}var ey,WC;function gZ(){if(WC)return ey;WC=1;var n=Qf(),e=fZ(),t=Jf();function r(i,a,s){for(var o=-1,u=a.length,l={};++o<u;){var c=a[o],h=n(i,c);s(h,c)&&e(l,t(c,i),h)}return l}return ey=r,ey}var ty,VC;function pZ(){if(VC)return ty;VC=1;var n=gZ(),e=_5();function t(r,i){return n(r,i,function(a,s){return e(r,s)})}return ty=t,ty}var ny,UC;function vZ(){if(UC)return ny;UC=1;var n=q5(),e=P5(),t=N5();function r(i){return t(e(i,void 0,n),i+"")}return ny=r,ny}var ry,HC;function mZ(){if(HC)return ry;HC=1;var n=pZ(),e=vZ(),t=e(function(r,i){return r==null?{}:n(r,i)});return ry=t,ry}var iy,YC;function yZ(){if(YC)return iy;YC=1;var n=Math.ceil,e=Math.max;function t(r,i,a,s){for(var o=-1,u=e(n((i-r)/(a||1)),0),l=Array(u);u--;)l[s?u:++o]=r,r+=a;return l}return iy=t,iy}var ay,XC;function bZ(){if(XC)return ay;XC=1;var n=yZ(),e=t0(),t=j5();function r(i){return function(a,s,o){return o&&typeof o!="number"&&e(a,s,o)&&(s=o=void 0),a=t(a),s===void 0?(s=a,a=0):s=t(s),o=o===void 0?a<s?1:-1:t(o),n(a,s,o,i)}}return ay=r,ay}var sy,KC;function xZ(){if(KC)return sy;KC=1;var n=bZ(),e=n();return sy=e,sy}var oy,ZC;function wZ(){if(ZC)return oy;ZC=1;function n(e,t){var r=e.length;for(e.sort(t);r--;)e[r]=e[r].value;return e}return oy=n,oy}var uy,JC;function EZ(){if(JC)return uy;JC=1;var n=Eu();function e(t,r){if(t!==r){var i=t!==void 0,a=t===null,s=t===t,o=n(t),u=r!==void 0,l=r===null,c=r===r,h=n(r);if(!l&&!h&&!o&&t>r||o&&u&&c&&!l&&!h||a&&u&&c||!i&&c||!s)return 1;if(!a&&!o&&!h&&t<r||h&&i&&s&&!a&&!o||l&&i&&s||!u&&s||!c)return-1}return 0}return uy=e,uy}var ly,QC;function _Z(){if(QC)return ly;QC=1;var n=EZ();function e(t,r,i){for(var a=-1,s=t.criteria,o=r.criteria,u=s.length,l=i.length;++a<u;){var c=n(s[a],o[a]);if(c){if(a>=l)return c;var h=i[a];return c*(h=="desc"?-1:1)}}return t.index-r.index}return ly=e,ly}var cy,eA;function SZ(){if(eA)return cy;eA=1;var n=Zf(),e=Qf(),t=ya(),r=T5(),i=wZ(),a=Hf(),s=_Z(),o=co(),u=jt();function l(c,h,d){h.length?h=n(h,function(p){return u(p)?function(v){return e(v,p.length===1?p[0]:p)}:p}):h=[o];var f=-1;h=n(h,a(t));var g=r(c,function(p,v,m){var y=n(h,function(b){return b(p)});return{criteria:y,index:++f,value:p}});return i(g,function(p,v){return s(p,v,d)})}return cy=l,cy}var hy,tA;function kZ(){if(tA)return hy;tA=1;var n=Jx(),e=SZ(),t=e0(),r=t0(),i=t(function(a,s){if(a==null)return[];var o=s.length;return o>1&&r(a,s[0],s[1])?s=[]:o>2&&r(s[0],s[1],s[2])&&(s=[s[0]]),e(a,n(s,1),[])});return hy=i,hy}var dy,nA;function CZ(){if(nA)return dy;nA=1;var n=w5(),e=0;function t(r){var i=++e;return n(r)+i}return dy=t,dy}var fy,rA;function AZ(){if(rA)return fy;rA=1;function n(e,t,r){for(var i=-1,a=e.length,s=t.length,o={};++i<a;){var u=i<s?t[i]:void 0;r(o,e[i],u)}return o}return fy=n,fy}var gy,iA;function TZ(){if(iA)return gy;iA=1;var n=Vf(),e=AZ();function t(r,i){return e(r||[],i||[],n)}return gy=t,gy}var Nd;if(typeof Fx=="function")try{Nd={cloneDeep:WK(),constant:Hx(),defaults:VK(),each:g5(),filter:k5(),find:JK(),flatten:q5(),forEach:f5(),forIn:QK(),has:C5(),isUndefined:A5(),last:eZ(),map:O5(),mapValues:tZ(),max:rZ(),merge:lZ(),min:cZ(),minBy:hZ(),now:dZ(),pick:mZ(),range:xZ(),reduce:M5(),sortBy:kZ(),uniqueId:CZ(),values:L5(),zipObject:TZ()}}catch{}Nd||(Nd=window._);var bt=Nd,OZ=n0;function n0(){var n={};n._next=n._prev=n,this._sentinel=n}n0.prototype.dequeue=function(){var n=this._sentinel,e=n._prev;if(e!==n)return U5(e),e};n0.prototype.enqueue=function(n){var e=this._sentinel;n._prev&&n._next&&U5(n),n._next=e._next,e._next._prev=n,e._next=n,n._prev=e};n0.prototype.toString=function(){for(var n=[],e=this._sentinel,t=e._prev;t!==e;)n.push(JSON.stringify(t,MZ)),t=t._prev;return"["+n.join(", ")+"]"};function U5(n){n._prev._next=n._next,n._next._prev=n._prev,delete n._next,delete n._prev}function MZ(n,e){if(n!=="_next"&&n!=="_prev")return e}var ra=bt,PZ=ci.Graph,NZ=OZ,DZ=LZ,RZ=ra.constant(1);function LZ(n,e){if(n.nodeCount()<=1)return[];var t=FZ(n,e||RZ),r=IZ(t.graph,t.buckets,t.zeroIdx);return ra.flatten(ra.map(r,function(i){return n.outEdges(i.v,i.w)}),!0)}function IZ(n,e,t){for(var r=[],i=e[e.length-1],a=e[0],s;n.nodeCount();){for(;s=a.dequeue();)py(n,e,t,s);for(;s=i.dequeue();)py(n,e,t,s);if(n.nodeCount()){for(var o=e.length-2;o>0;--o)if(s=e[o].dequeue(),s){r=r.concat(py(n,e,t,s,!0));break}}}return r}function py(n,e,t,r,i){var a=i?[]:void 0;return ra.forEach(n.inEdges(r.v),function(s){var o=n.edge(s),u=n.node(s.v);i&&a.push({v:s.v,w:s.w}),u.out-=o,Kb(e,t,u)}),ra.forEach(n.outEdges(r.v),function(s){var o=n.edge(s),u=s.w,l=n.node(u);l.in-=o,Kb(e,t,l)}),n.removeNode(r.v),a}function FZ(n,e){var t=new PZ,r=0,i=0;ra.forEach(n.nodes(),function(o){t.setNode(o,{v:o,in:0,out:0})}),ra.forEach(n.edges(),function(o){var u=t.edge(o.v,o.w)||0,l=e(o),c=u+l;t.setEdge(o.v,o.w,c),i=Math.max(i,t.node(o.v).out+=l),r=Math.max(r,t.node(o.w).in+=l)});var a=ra.range(i+r+3).map(function(){return new NZ}),s=r+1;return ra.forEach(t.nodes(),function(o){Kb(a,s,t.node(o))}),{graph:t,buckets:a,zeroIdx:s}}function Kb(n,e,t){t.out?t.in?n[t.out-t.in+e].enqueue(t):n[n.length-1].enqueue(t):n[0].enqueue(t)}var Ls=bt,BZ=DZ,zZ={run:$Z,undo:qZ};function $Z(n){var e=n.graph().acyclicer==="greedy"?BZ(n,t(n)):jZ(n);Ls.forEach(e,function(r){var i=n.edge(r);n.removeEdge(r),i.forwardName=r.name,i.reversed=!0,n.setEdge(r.w,r.v,i,Ls.uniqueId("rev"))});function t(r){return function(i){return r.edge(i).weight}}}function jZ(n){var e=[],t={},r={};function i(a){Ls.has(r,a)||(r[a]=!0,t[a]=!0,Ls.forEach(n.outEdges(a),function(s){Ls.has(t,s.w)?e.push(s):i(s.w)}),delete t[a])}return Ls.forEach(n.nodes(),i),e}function qZ(n){Ls.forEach(n.edges(),function(e){var t=n.edge(e);if(t.reversed){n.removeEdge(e);var r=t.forwardName;delete t.reversed,delete t.forwardName,n.setEdge(e.w,e.v,t,r)}})}var Ge=bt,H5=ci.Graph,Qn={addDummyNode:Y5,simplify:GZ,asNonCompoundGraph:WZ,successorWeights:VZ,predecessorWeights:UZ,intersectRect:HZ,buildLayerMatrix:YZ,normalizeRanks:XZ,removeEmptyRanks:KZ,addBorderNode:ZZ,maxRank:X5,partition:JZ,time:QZ,notime:eJ};function Y5(n,e,t,r){var i;do i=Ge.uniqueId(r);while(n.hasNode(i));return t.dummy=e,n.setNode(i,t),i}function GZ(n){var e=new H5().setGraph(n.graph());return Ge.forEach(n.nodes(),function(t){e.setNode(t,n.node(t))}),Ge.forEach(n.edges(),function(t){var r=e.edge(t.v,t.w)||{weight:0,minlen:1},i=n.edge(t);e.setEdge(t.v,t.w,{weight:r.weight+i.weight,minlen:Math.max(r.minlen,i.minlen)})}),e}function WZ(n){var e=new H5({multigraph:n.isMultigraph()}).setGraph(n.graph());return Ge.forEach(n.nodes(),function(t){n.children(t).length||e.setNode(t,n.node(t))}),Ge.forEach(n.edges(),function(t){e.setEdge(t,n.edge(t))}),e}function VZ(n){var e=Ge.map(n.nodes(),function(t){var r={};return Ge.forEach(n.outEdges(t),function(i){r[i.w]=(r[i.w]||0)+n.edge(i).weight}),r});return Ge.zipObject(n.nodes(),e)}function UZ(n){var e=Ge.map(n.nodes(),function(t){var r={};return Ge.forEach(n.inEdges(t),function(i){r[i.v]=(r[i.v]||0)+n.edge(i).weight}),r});return Ge.zipObject(n.nodes(),e)}function HZ(n,e){var t=n.x,r=n.y,i=e.x-t,a=e.y-r,s=n.width/2,o=n.height/2;if(!i&&!a)throw new Error("Not possible to find intersection inside of the rectangle");var u,l;return Math.abs(a)*s>Math.abs(i)*o?(a<0&&(o=-o),u=o*i/a,l=o):(i<0&&(s=-s),u=s,l=s*a/i),{x:t+u,y:r+l}}function YZ(n){var e=Ge.map(Ge.range(X5(n)+1),function(){return[]});return Ge.forEach(n.nodes(),function(t){var r=n.node(t),i=r.rank;Ge.isUndefined(i)||(e[i][r.order]=t)}),e}function XZ(n){var e=Ge.min(Ge.map(n.nodes(),function(t){return n.node(t).rank}));Ge.forEach(n.nodes(),function(t){var r=n.node(t);Ge.has(r,"rank")&&(r.rank-=e)})}function KZ(n){var e=Ge.min(Ge.map(n.nodes(),function(a){return n.node(a).rank})),t=[];Ge.forEach(n.nodes(),function(a){var s=n.node(a).rank-e;t[s]||(t[s]=[]),t[s].push(a)});var r=0,i=n.graph().nodeRankFactor;Ge.forEach(t,function(a,s){Ge.isUndefined(a)&&s%i!==0?--r:r&&Ge.forEach(a,function(o){n.node(o).rank+=r})})}function ZZ(n,e,t,r){var i={width:0,height:0};return arguments.length>=4&&(i.rank=t,i.order=r),Y5(n,"border",i,e)}function X5(n){return Ge.max(Ge.map(n.nodes(),function(e){var t=n.node(e).rank;if(!Ge.isUndefined(t))return t}))}function JZ(n,e){var t={lhs:[],rhs:[]};return Ge.forEach(n,function(r){e(r)?t.lhs.push(r):t.rhs.push(r)}),t}function QZ(n,e){var t=Ge.now();try{return e()}finally{console.log(n+" time: "+(Ge.now()-t)+"ms")}}function eJ(n,e){return e()}var K5=bt,tJ=Qn,nJ={run:rJ,undo:aJ};function rJ(n){n.graph().dummyChains=[],K5.forEach(n.edges(),function(e){iJ(n,e)})}function iJ(n,e){var t=e.v,r=n.node(t).rank,i=e.w,a=n.node(i).rank,s=e.name,o=n.edge(e),u=o.labelRank;if(a!==r+1){n.removeEdge(e);var l,c,h;for(h=0,++r;r<a;++h,++r)o.points=[],c={width:0,height:0,edgeLabel:o,edgeObj:e,rank:r},l=tJ.addDummyNode(n,"edge",c,"_d"),r===u&&(c.width=o.width,c.height=o.height,c.dummy="edge-label",c.labelpos=o.labelpos),n.setEdge(t,l,{weight:o.weight},s),h===0&&n.graph().dummyChains.push(l),t=l;n.setEdge(t,i,{weight:o.weight},s)}}function aJ(n){K5.forEach(n.graph().dummyChains,function(e){var t=n.node(e),r=t.edgeLabel,i;for(n.setEdge(t.edgeObj,r);t.dummy;)i=n.successors(e)[0],n.removeNode(e),r.points.push({x:t.x,y:t.y}),t.dummy==="edge-label"&&(r.x=t.x,r.y=t.y,r.width=t.width,r.height=t.height),e=i,t=n.node(e)})}var fh=bt,r0={longestPath:sJ,slack:oJ};function sJ(n){var e={};function t(r){var i=n.node(r);if(fh.has(e,r))return i.rank;e[r]=!0;var a=fh.min(fh.map(n.outEdges(r),function(s){return t(s.w)-n.edge(s).minlen}));return(a===Number.POSITIVE_INFINITY||a===void 0||a===null)&&(a=0),i.rank=a}fh.forEach(n.sources(),t)}function oJ(n,e){return n.node(e.w).rank-n.node(e.v).rank-n.edge(e).minlen}var Dd=bt,uJ=ci.Graph,Rd=r0.slack,Z5=lJ;function lJ(n){var e=new uJ({directed:!1}),t=n.nodes()[0],r=n.nodeCount();e.setNode(t,{});for(var i,a;cJ(e,n)<r;)i=hJ(e,n),a=e.hasNode(i.v)?Rd(n,i):-Rd(n,i),dJ(e,n,a);return e}function cJ(n,e){function t(r){Dd.forEach(e.nodeEdges(r),function(i){var a=i.v,s=r===a?i.w:a;!n.hasNode(s)&&!Rd(e,i)&&(n.setNode(s,{}),n.setEdge(r,s,{}),t(s))})}return Dd.forEach(n.nodes(),t),n.nodeCount()}function hJ(n,e){return Dd.minBy(e.edges(),function(t){if(n.hasNode(t.v)!==n.hasNode(t.w))return Rd(e,t)})}function dJ(n,e,t){Dd.forEach(n.nodes(),function(r){e.node(r).rank+=t})}var ha=bt,fJ=Z5,gJ=r0.slack,pJ=r0.longestPath,vJ=ci.alg.preorder,mJ=ci.alg.postorder,yJ=Qn.simplify,bJ=ho;ho.initLowLimValues=nw;ho.initCutValues=tw;ho.calcCutValue=J5;ho.leaveEdge=e8;ho.enterEdge=t8;ho.exchangeEdges=n8;function ho(n){n=yJ(n),pJ(n);var e=fJ(n);nw(e),tw(e,n);for(var t,r;t=e8(e);)r=t8(e,n,t),n8(e,n,t,r)}function tw(n,e){var t=mJ(n,n.nodes());t=t.slice(0,t.length-1),ha.forEach(t,function(r){xJ(n,e,r)})}function xJ(n,e,t){var r=n.node(t),i=r.parent;n.edge(t,i).cutvalue=J5(n,e,t)}function J5(n,e,t){var r=n.node(t),i=r.parent,a=!0,s=e.edge(t,i),o=0;return s||(a=!1,s=e.edge(i,t)),o=s.weight,ha.forEach(e.nodeEdges(t),function(u){var l=u.v===t,c=l?u.w:u.v;if(c!==i){var h=l===a,d=e.edge(u).weight;if(o+=h?d:-d,EJ(n,t,c)){var f=n.edge(t,c).cutvalue;o+=h?-f:f}}}),o}function nw(n,e){arguments.length<2&&(e=n.nodes()[0]),Q5(n,{},1,e)}function Q5(n,e,t,r,i){var a=t,s=n.node(r);return e[r]=!0,ha.forEach(n.neighbors(r),function(o){ha.has(e,o)||(t=Q5(n,e,t,o,r))}),s.low=a,s.lim=t++,i?s.parent=i:delete s.parent,t}function e8(n){return ha.find(n.edges(),function(e){return n.edge(e).cutvalue<0})}function t8(n,e,t){var r=t.v,i=t.w;e.hasEdge(r,i)||(r=t.w,i=t.v);var a=n.node(r),s=n.node(i),o=a,u=!1;a.lim>s.lim&&(o=s,u=!0);var l=ha.filter(e.edges(),function(c){return u===aA(n,n.node(c.v),o)&&u!==aA(n,n.node(c.w),o)});return ha.minBy(l,function(c){return gJ(e,c)})}function n8(n,e,t,r){var i=t.v,a=t.w;n.removeEdge(i,a),n.setEdge(r.v,r.w,{}),nw(n),tw(n,e),wJ(n,e)}function wJ(n,e){var t=ha.find(n.nodes(),function(i){return!e.node(i).parent}),r=vJ(n,t);r=r.slice(1),ha.forEach(r,function(i){var a=n.node(i).parent,s=e.edge(i,a),o=!1;s||(s=e.edge(a,i),o=!0),e.node(i).rank=e.node(a).rank+(o?s.minlen:-s.minlen)})}function EJ(n,e,t){return n.hasEdge(e,t)}function aA(n,e,t){return t.low<=e.lim&&e.lim<=t.lim}var _J=r0,r8=_J.longestPath,SJ=Z5,kJ=bJ,CJ=AJ;function AJ(n){switch(n.graph().ranker){case"network-simplex":sA(n);break;case"tight-tree":OJ(n);break;case"longest-path":TJ(n);break;default:sA(n)}}var TJ=r8;function OJ(n){r8(n),SJ(n)}function sA(n){kJ(n)}var Zb=bt,MJ=PJ;function PJ(n){var e=DJ(n);Zb.forEach(n.graph().dummyChains,function(t){for(var r=n.node(t),i=r.edgeObj,a=NJ(n,e,i.v,i.w),s=a.path,o=a.lca,u=0,l=s[u],c=!0;t!==i.w;){if(r=n.node(t),c){for(;(l=s[u])!==o&&n.node(l).maxRank<r.rank;)u++;l===o&&(c=!1)}if(!c){for(;u<s.length-1&&n.node(l=s[u+1]).minRank<=r.rank;)u++;l=s[u]}n.setParent(t,l),t=n.successors(t)[0]}})}function NJ(n,e,t,r){var i=[],a=[],s=Math.min(e[t].low,e[r].low),o=Math.max(e[t].lim,e[r].lim),u,l;u=t;do u=n.parent(u),i.push(u);while(u&&(e[u].low>s||o>e[u].lim));for(l=u,u=r;(u=n.parent(u))!==l;)a.push(u);return{path:i.concat(a.reverse()),lca:l}}function DJ(n){var e={},t=0;function r(i){var a=t;Zb.forEach(n.children(i),r),e[i]={low:a,lim:t++}}return Zb.forEach(n.children(),r),e}var ia=bt,Jb=Qn,RJ={run:LJ,cleanup:BJ};function LJ(n){var e=Jb.addDummyNode(n,"root",{},"_root"),t=IJ(n),r=ia.max(ia.values(t))-1,i=2*r+1;n.graph().nestingRoot=e,ia.forEach(n.edges(),function(s){n.edge(s).minlen*=i});var a=FJ(n)+1;ia.forEach(n.children(),function(s){i8(n,e,i,a,r,t,s)}),n.graph().nodeRankFactor=i}function i8(n,e,t,r,i,a,s){var o=n.children(s);if(!o.length){s!==e&&n.setEdge(e,s,{weight:0,minlen:t});return}var u=Jb.addBorderNode(n,"_bt"),l=Jb.addBorderNode(n,"_bb"),c=n.node(s);n.setParent(u,s),c.borderTop=u,n.setParent(l,s),c.borderBottom=l,ia.forEach(o,function(h){i8(n,e,t,r,i,a,h);var d=n.node(h),f=d.borderTop?d.borderTop:h,g=d.borderBottom?d.borderBottom:h,p=d.borderTop?r:2*r,v=f!==g?1:i-a[s]+1;n.setEdge(u,f,{weight:p,minlen:v,nestingEdge:!0}),n.setEdge(g,l,{weight:p,minlen:v,nestingEdge:!0})}),n.parent(s)||n.setEdge(e,u,{weight:0,minlen:i+a[s]})}function IJ(n){var e={};function t(r,i){var a=n.children(r);a&&a.length&&ia.forEach(a,function(s){t(s,i+1)}),e[r]=i}return ia.forEach(n.children(),function(r){t(r,1)}),e}function FJ(n){return ia.reduce(n.edges(),function(e,t){return e+n.edge(t).weight},0)}function BJ(n){var e=n.graph();n.removeNode(e.nestingRoot),delete e.nestingRoot,ia.forEach(n.edges(),function(t){var r=n.edge(t);r.nestingEdge&&n.removeEdge(t)})}var vy=bt,zJ=Qn,$J=jJ;function jJ(n){function e(t){var r=n.children(t),i=n.node(t);if(r.length&&vy.forEach(r,e),vy.has(i,"minRank")){i.borderLeft=[],i.borderRight=[];for(var a=i.minRank,s=i.maxRank+1;a<s;++a)oA(n,"borderLeft","_bl",t,i,a),oA(n,"borderRight","_br",t,i,a)}}vy.forEach(n.children(),e)}function oA(n,e,t,r,i,a){var s={width:0,height:0,rank:a,borderType:e},o=i[e][a-1],u=zJ.addDummyNode(n,"border",s,t);i[e][a]=u,n.setParent(u,r),o&&n.setEdge(o,u,{weight:1})}var Ci=bt,qJ={adjust:GJ,undo:WJ};function GJ(n){var e=n.graph().rankdir.toLowerCase();(e==="lr"||e==="rl")&&a8(n)}function WJ(n){var e=n.graph().rankdir.toLowerCase();(e==="bt"||e==="rl")&&VJ(n),(e==="lr"||e==="rl")&&(UJ(n),a8(n))}function a8(n){Ci.forEach(n.nodes(),function(e){uA(n.node(e))}),Ci.forEach(n.edges(),function(e){uA(n.edge(e))})}function uA(n){var e=n.width;n.width=n.height,n.height=e}function VJ(n){Ci.forEach(n.nodes(),function(e){my(n.node(e))}),Ci.forEach(n.edges(),function(e){var t=n.edge(e);Ci.forEach(t.points,my),Ci.has(t,"y")&&my(t)})}function my(n){n.y=-n.y}function UJ(n){Ci.forEach(n.nodes(),function(e){yy(n.node(e))}),Ci.forEach(n.edges(),function(e){var t=n.edge(e);Ci.forEach(t.points,yy),Ci.has(t,"x")&&yy(t)})}function yy(n){var e=n.x;n.x=n.y,n.y=e}var Vi=bt,HJ=YJ;function YJ(n){var e={},t=Vi.filter(n.nodes(),function(o){return!n.children(o).length}),r=Vi.max(Vi.map(t,function(o){return n.node(o).rank})),i=Vi.map(Vi.range(r+1),function(){return[]});function a(o){if(!Vi.has(e,o)){e[o]=!0;var u=n.node(o);i[u.rank].push(o),Vi.forEach(n.successors(o),a)}}var s=Vi.sortBy(t,function(o){return n.node(o).rank});return Vi.forEach(s,a),i}var Ea=bt,XJ=KJ;function KJ(n,e){for(var t=0,r=1;r<e.length;++r)t+=ZJ(n,e[r-1],e[r]);return t}function ZJ(n,e,t){for(var r=Ea.zipObject(t,Ea.map(t,function(l,c){return c})),i=Ea.flatten(Ea.map(e,function(l){return Ea.sortBy(Ea.map(n.outEdges(l),function(c){return{pos:r[c.w],weight:n.edge(c).weight}}),"pos")}),!0),a=1;a<t.length;)a<<=1;var s=2*a-1;a-=1;var o=Ea.map(new Array(s),function(){return 0}),u=0;return Ea.forEach(i.forEach(function(l){var c=l.pos+a;o[c]+=l.weight;for(var h=0;c>0;)c%2&&(h+=o[c+1]),c=c-1>>1,o[c]+=l.weight;u+=l.weight*h})),u}var lA=bt,JJ=QJ;function QJ(n,e){return lA.map(e,function(t){var r=n.inEdges(t);if(r.length){var i=lA.reduce(r,function(a,s){var o=n.edge(s),u=n.node(s.v);return{sum:a.sum+o.weight*u.order,weight:a.weight+o.weight}},{sum:0,weight:0});return{v:t,barycenter:i.sum/i.weight,weight:i.weight}}else return{v:t}})}var lr=bt,eQ=tQ;function tQ(n,e){var t={};lr.forEach(n,function(i,a){var s=t[i.v]={indegree:0,in:[],out:[],vs:[i.v],i:a};lr.isUndefined(i.barycenter)||(s.barycenter=i.barycenter,s.weight=i.weight)}),lr.forEach(e.edges(),function(i){var a=t[i.v],s=t[i.w];!lr.isUndefined(a)&&!lr.isUndefined(s)&&(s.indegree++,a.out.push(t[i.w]))});var r=lr.filter(t,function(i){return!i.indegree});return nQ(r)}function nQ(n){var e=[];function t(a){return function(s){s.merged||(lr.isUndefined(s.barycenter)||lr.isUndefined(a.barycenter)||s.barycenter>=a.barycenter)&&rQ(a,s)}}function r(a){return function(s){s.in.push(a),--s.indegree===0&&n.push(s)}}for(;n.length;){var i=n.pop();e.push(i),lr.forEach(i.in.reverse(),t(i)),lr.forEach(i.out,r(i))}return lr.map(lr.filter(e,function(a){return!a.merged}),function(a){return lr.pick(a,["vs","i","barycenter","weight"])})}function rQ(n,e){var t=0,r=0;n.weight&&(t+=n.barycenter*n.weight,r+=n.weight),e.weight&&(t+=e.barycenter*e.weight,r+=e.weight),n.vs=e.vs.concat(n.vs),n.barycenter=t/r,n.weight=r,n.i=Math.min(e.i,n.i),e.merged=!0}var Zu=bt,iQ=Qn,aQ=sQ;function sQ(n,e){var t=iQ.partition(n,function(c){return Zu.has(c,"barycenter")}),r=t.lhs,i=Zu.sortBy(t.rhs,function(c){return-c.i}),a=[],s=0,o=0,u=0;r.sort(oQ(!!e)),u=cA(a,i,u),Zu.forEach(r,function(c){u+=c.vs.length,a.push(c.vs),s+=c.barycenter*c.weight,o+=c.weight,u=cA(a,i,u)});var l={vs:Zu.flatten(a,!0)};return o&&(l.barycenter=s/o,l.weight=o),l}function cA(n,e,t){for(var r;e.length&&(r=Zu.last(e)).i<=t;)e.pop(),n.push(r.vs),t++;return t}function oQ(n){return function(e,t){return e.barycenter<t.barycenter?-1:e.barycenter>t.barycenter?1:n?t.i-e.i:e.i-t.i}}var Fa=bt,uQ=JJ,lQ=eQ,cQ=aQ,hQ=s8;function s8(n,e,t,r){var i=n.children(e),a=n.node(e),s=a?a.borderLeft:void 0,o=a?a.borderRight:void 0,u={};s&&(i=Fa.filter(i,function(g){return g!==s&&g!==o}));var l=uQ(n,i);Fa.forEach(l,function(g){if(n.children(g.v).length){var p=s8(n,g.v,t,r);u[g.v]=p,Fa.has(p,"barycenter")&&fQ(g,p)}});var c=lQ(l,t);dQ(c,u);var h=cQ(c,r);if(s&&(h.vs=Fa.flatten([s,h.vs,o],!0),n.predecessors(s).length)){var d=n.node(n.predecessors(s)[0]),f=n.node(n.predecessors(o)[0]);Fa.has(h,"barycenter")||(h.barycenter=0,h.weight=0),h.barycenter=(h.barycenter*h.weight+d.order+f.order)/(h.weight+2),h.weight+=2}return h}function dQ(n,e){Fa.forEach(n,function(t){t.vs=Fa.flatten(t.vs.map(function(r){return e[r]?e[r].vs:r}),!0)})}function fQ(n,e){Fa.isUndefined(n.barycenter)?(n.barycenter=e.barycenter,n.weight=e.weight):(n.barycenter=(n.barycenter*n.weight+e.barycenter*e.weight)/(n.weight+e.weight),n.weight+=e.weight)}var Ju=bt,gQ=ci.Graph,pQ=vQ;function vQ(n,e,t){var r=mQ(n),i=new gQ({compound:!0}).setGraph({root:r}).setDefaultNodeLabel(function(a){return n.node(a)});return Ju.forEach(n.nodes(),function(a){var s=n.node(a),o=n.parent(a);(s.rank===e||s.minRank<=e&&e<=s.maxRank)&&(i.setNode(a),i.setParent(a,o||r),Ju.forEach(n[t](a),function(u){var l=u.v===a?u.w:u.v,c=i.edge(l,a),h=Ju.isUndefined(c)?0:c.weight;i.setEdge(l,a,{weight:n.edge(u).weight+h})}),Ju.has(s,"minRank")&&i.setNode(a,{borderLeft:s.borderLeft[e],borderRight:s.borderRight[e]}))}),i}function mQ(n){for(var e;n.hasNode(e=Ju.uniqueId("_root")););return e}var yQ=bt,bQ=xQ;function xQ(n,e,t){var r={},i;yQ.forEach(t,function(a){for(var s=n.parent(a),o,u;s;){if(o=n.parent(s),o?(u=r[o],r[o]=s):(u=i,i=s),u&&u!==s){e.setEdge(u,s);return}s=o}})}var ns=bt,wQ=HJ,EQ=XJ,_Q=hQ,SQ=pQ,kQ=bQ,CQ=ci.Graph,hA=Qn,AQ=TQ;function TQ(n){var e=hA.maxRank(n),t=dA(n,ns.range(1,e+1),"inEdges"),r=dA(n,ns.range(e-1,-1,-1),"outEdges"),i=wQ(n);fA(n,i);for(var a=Number.POSITIVE_INFINITY,s,o=0,u=0;u<4;++o,++u){OQ(o%2?t:r,o%4>=2),i=hA.buildLayerMatrix(n);var l=EQ(n,i);l<a&&(u=0,s=ns.cloneDeep(i),a=l)}fA(n,s)}function dA(n,e,t){return ns.map(e,function(r){return SQ(n,r,t)})}function OQ(n,e){var t=new CQ;ns.forEach(n,function(r){var i=r.graph().root,a=_Q(r,i,t,e);ns.forEach(a.vs,function(s,o){r.node(s).order=o}),kQ(r,t,a.vs)})}function fA(n,e){ns.forEach(e,function(t){ns.forEach(t,function(r,i){n.node(r).order=i})})}var ke=bt,MQ=ci.Graph,PQ=Qn,NQ={positionX:LQ,findType1Conflicts:o8,findType2Conflicts:u8,addConflict:rw,hasConflict:l8,verticalAlignment:c8,horizontalCompaction:h8,alignCoordinates:f8,findSmallestWidthAlignment:d8,balance:g8};function o8(n,e){var t={};function r(i,a){var s=0,o=0,u=i.length,l=ke.last(a);return ke.forEach(a,function(c,h){var d=DQ(n,c),f=d?n.node(d).order:u;(d||c===l)&&(ke.forEach(a.slice(o,h+1),function(g){ke.forEach(n.predecessors(g),function(p){var v=n.node(p),m=v.order;(m<s||f<m)&&!(v.dummy&&n.node(g).dummy)&&rw(t,p,g)})}),o=h+1,s=f)}),a}return ke.reduce(e,r),t}function u8(n,e){var t={};function r(a,s,o,u,l){var c;ke.forEach(ke.range(s,o),function(h){c=a[h],n.node(c).dummy&&ke.forEach(n.predecessors(c),function(d){var f=n.node(d);f.dummy&&(f.order<u||f.order>l)&&rw(t,d,c)})})}function i(a,s){var o=-1,u,l=0;return ke.forEach(s,function(c,h){if(n.node(c).dummy==="border"){var d=n.predecessors(c);d.length&&(u=n.node(d[0]).order,r(s,l,h,o,u),l=h,o=u)}r(s,l,s.length,u,a.length)}),s}return ke.reduce(e,i),t}function DQ(n,e){if(n.node(e).dummy)return ke.find(n.predecessors(e),function(t){return n.node(t).dummy})}function rw(n,e,t){if(e>t){var r=e;e=t,t=r}var i=n[e];i||(n[e]=i={}),i[t]=!0}function l8(n,e,t){if(e>t){var r=e;e=t,t=r}return ke.has(n[e],t)}function c8(n,e,t,r){var i={},a={},s={};return ke.forEach(e,function(o){ke.forEach(o,function(u,l){i[u]=u,a[u]=u,s[u]=l})}),ke.forEach(e,function(o){var u=-1;ke.forEach(o,function(l){var c=r(l);if(c.length){c=ke.sortBy(c,function(p){return s[p]});for(var h=(c.length-1)/2,d=Math.floor(h),f=Math.ceil(h);d<=f;++d){var g=c[d];a[l]===l&&u<s[g]&&!l8(t,l,g)&&(a[g]=l,a[l]=i[l]=i[g],u=s[g])}}})}),{root:i,align:a}}function h8(n,e,t,r,i){var a={},s=RQ(n,e,t,i),o=i?"borderLeft":"borderRight";function u(h,d){for(var f=s.nodes(),g=f.pop(),p={};g;)p[g]?h(g):(p[g]=!0,f.push(g),f=f.concat(d(g))),g=f.pop()}function l(h){a[h]=s.inEdges(h).reduce(function(d,f){return Math.max(d,a[f.v]+s.edge(f))},0)}function c(h){var d=s.outEdges(h).reduce(function(g,p){return Math.min(g,a[p.w]-s.edge(p))},Number.POSITIVE_INFINITY),f=n.node(h);d!==Number.POSITIVE_INFINITY&&f.borderType!==o&&(a[h]=Math.max(a[h],d))}return u(l,s.predecessors.bind(s)),u(c,s.successors.bind(s)),ke.forEach(r,function(h){a[h]=a[t[h]]}),a}function RQ(n,e,t,r){var i=new MQ,a=n.graph(),s=IQ(a.nodesep,a.edgesep,r);return ke.forEach(e,function(o){var u;ke.forEach(o,function(l){var c=t[l];if(i.setNode(c),u){var h=t[u],d=i.edge(h,c);i.setEdge(h,c,Math.max(s(n,l,u),d||0))}u=l})}),i}function d8(n,e){return ke.minBy(ke.values(e),function(t){var r=Number.NEGATIVE_INFINITY,i=Number.POSITIVE_INFINITY;return ke.forIn(t,function(a,s){var o=FQ(n,s)/2;r=Math.max(a+o,r),i=Math.min(a-o,i)}),r-i})}function f8(n,e){var t=ke.values(e),r=ke.min(t),i=ke.max(t);ke.forEach(["u","d"],function(a){ke.forEach(["l","r"],function(s){var o=a+s,u=n[o],l;if(u!==e){var c=ke.values(u);l=s==="l"?r-ke.min(c):i-ke.max(c),l&&(n[o]=ke.mapValues(u,function(h){return h+l}))}})})}function g8(n,e){return ke.mapValues(n.ul,function(t,r){if(e)return n[e.toLowerCase()][r];var i=ke.sortBy(ke.map(n,r));return(i[1]+i[2])/2})}function LQ(n){var e=PQ.buildLayerMatrix(n),t=ke.merge(o8(n,e),u8(n,e)),r={},i;ke.forEach(["u","d"],function(s){i=s==="u"?e:ke.values(e).reverse(),ke.forEach(["l","r"],function(o){o==="r"&&(i=ke.map(i,function(h){return ke.values(h).reverse()}));var u=(s==="u"?n.predecessors:n.successors).bind(n),l=c8(n,i,t,u),c=h8(n,i,l.root,l.align,o==="r");o==="r"&&(c=ke.mapValues(c,function(h){return-h})),r[s+o]=c})});var a=d8(n,r);return f8(r,a),g8(r,n.graph().align)}function IQ(n,e,t){return function(r,i,a){var s=r.node(i),o=r.node(a),u=0,l;if(u+=s.width/2,ke.has(s,"labelpos"))switch(s.labelpos.toLowerCase()){case"l":l=-s.width/2;break;case"r":l=s.width/2;break}if(l&&(u+=t?l:-l),l=0,u+=(s.dummy?e:n)/2,u+=(o.dummy?e:n)/2,u+=o.width/2,ke.has(o,"labelpos"))switch(o.labelpos.toLowerCase()){case"l":l=o.width/2;break;case"r":l=-o.width/2;break}return l&&(u+=t?l:-l),l=0,u}}function FQ(n,e){return n.node(e).width}var Qu=bt,p8=Qn,BQ=NQ.positionX,zQ=$Q;function $Q(n){n=p8.asNonCompoundGraph(n),jQ(n),Qu.forEach(BQ(n),function(e,t){n.node(t).x=e})}function jQ(n){var e=p8.buildLayerMatrix(n),t=n.graph().ranksep,r=0;Qu.forEach(e,function(i){var a=Qu.max(Qu.map(i,function(s){return n.node(s).height}));Qu.forEach(i,function(s){n.node(s).y=r+a/2}),r+=a+t})}var Le=bt,gA=zZ,pA=nJ,qQ=CJ,GQ=Qn.normalizeRanks,WQ=MJ,VQ=Qn.removeEmptyRanks,vA=RJ,UQ=$J,mA=qJ,HQ=AQ,YQ=zQ,us=Qn,XQ=ci.Graph,KQ=ZQ;function ZQ(n,e){var t=e&&e.debugTiming?us.time:us.notime;t("layout",function(){var r=t("  buildLayoutGraph",function(){return uee(n)});t("  runLayout",function(){JQ(r,t)}),t("  updateInputGraph",function(){QQ(n,r)})})}function JQ(n,e){e("    makeSpaceForEdgeLabels",function(){lee(n)}),e("    removeSelfEdges",function(){yee(n)}),e("    acyclic",function(){gA.run(n)}),e("    nestingGraph.run",function(){vA.run(n)}),e("    rank",function(){qQ(us.asNonCompoundGraph(n))}),e("    injectEdgeLabelProxies",function(){cee(n)}),e("    removeEmptyRanks",function(){VQ(n)}),e("    nestingGraph.cleanup",function(){vA.cleanup(n)}),e("    normalizeRanks",function(){GQ(n)}),e("    assignRankMinMax",function(){hee(n)}),e("    removeEdgeLabelProxies",function(){dee(n)}),e("    normalize.run",function(){pA.run(n)}),e("    parentDummyChains",function(){WQ(n)}),e("    addBorderSegments",function(){UQ(n)}),e("    order",function(){HQ(n)}),e("    insertSelfEdges",function(){bee(n)}),e("    adjustCoordinateSystem",function(){mA.adjust(n)}),e("    position",function(){YQ(n)}),e("    positionSelfEdges",function(){xee(n)}),e("    removeBorderNodes",function(){mee(n)}),e("    normalize.undo",function(){pA.undo(n)}),e("    fixupEdgeLabelCoords",function(){pee(n)}),e("    undoCoordinateSystem",function(){mA.undo(n)}),e("    translateGraph",function(){fee(n)}),e("    assignNodeIntersects",function(){gee(n)}),e("    reversePoints",function(){vee(n)}),e("    acyclic.undo",function(){gA.undo(n)})}function QQ(n,e){Le.forEach(n.nodes(),function(t){var r=n.node(t),i=e.node(t);r&&(r.x=i.x,r.y=i.y,e.children(t).length&&(r.width=i.width,r.height=i.height))}),Le.forEach(n.edges(),function(t){var r=n.edge(t),i=e.edge(t);r.points=i.points,Le.has(i,"x")&&(r.x=i.x,r.y=i.y)}),n.graph().width=e.graph().width,n.graph().height=e.graph().height}var eee=["nodesep","edgesep","ranksep","marginx","marginy"],tee={ranksep:50,edgesep:20,nodesep:50,rankdir:"tb"},nee=["acyclicer","ranker","rankdir","align"],ree=["width","height"],iee={width:0,height:0},aee=["minlen","weight","width","height","labeloffset"],see={minlen:1,weight:1,width:0,height:0,labeloffset:10,labelpos:"r"},oee=["labelpos"];function uee(n){var e=new XQ({multigraph:!0,compound:!0}),t=xy(n.graph());return e.setGraph(Le.merge({},tee,by(t,eee),Le.pick(t,nee))),Le.forEach(n.nodes(),function(r){var i=xy(n.node(r));e.setNode(r,Le.defaults(by(i,ree),iee)),e.setParent(r,n.parent(r))}),Le.forEach(n.edges(),function(r){var i=xy(n.edge(r));e.setEdge(r,Le.merge({},see,by(i,aee),Le.pick(i,oee)))}),e}function lee(n){var e=n.graph();e.ranksep/=2,Le.forEach(n.edges(),function(t){var r=n.edge(t);r.minlen*=2,r.labelpos.toLowerCase()!=="c"&&(e.rankdir==="TB"||e.rankdir==="BT"?r.width+=r.labeloffset:r.height+=r.labeloffset)})}function cee(n){Le.forEach(n.edges(),function(e){var t=n.edge(e);if(t.width&&t.height){var r=n.node(e.v),i=n.node(e.w),a={rank:(i.rank-r.rank)/2+r.rank,e};us.addDummyNode(n,"edge-proxy",a,"_ep")}})}function hee(n){var e=0;Le.forEach(n.nodes(),function(t){var r=n.node(t);r.borderTop&&(r.minRank=n.node(r.borderTop).rank,r.maxRank=n.node(r.borderBottom).rank,e=Le.max(e,r.maxRank))}),n.graph().maxRank=e}function dee(n){Le.forEach(n.nodes(),function(e){var t=n.node(e);t.dummy==="edge-proxy"&&(n.edge(t.e).labelRank=t.rank,n.removeNode(e))})}function fee(n){var e=Number.POSITIVE_INFINITY,t=0,r=Number.POSITIVE_INFINITY,i=0,a=n.graph(),s=a.marginx||0,o=a.marginy||0;function u(l){var c=l.x,h=l.y,d=l.width,f=l.height;e=Math.min(e,c-d/2),t=Math.max(t,c+d/2),r=Math.min(r,h-f/2),i=Math.max(i,h+f/2)}Le.forEach(n.nodes(),function(l){u(n.node(l))}),Le.forEach(n.edges(),function(l){var c=n.edge(l);Le.has(c,"x")&&u(c)}),e-=s,r-=o,Le.forEach(n.nodes(),function(l){var c=n.node(l);c.x-=e,c.y-=r}),Le.forEach(n.edges(),function(l){var c=n.edge(l);Le.forEach(c.points,function(h){h.x-=e,h.y-=r}),Le.has(c,"x")&&(c.x-=e),Le.has(c,"y")&&(c.y-=r)}),a.width=t-e+s,a.height=i-r+o}function gee(n){Le.forEach(n.edges(),function(e){var t=n.edge(e),r=n.node(e.v),i=n.node(e.w),a,s;t.points?(a=t.points[0],s=t.points[t.points.length-1]):(t.points=[],a=i,s=r),t.points.unshift(us.intersectRect(r,a)),t.points.push(us.intersectRect(i,s))})}function pee(n){Le.forEach(n.edges(),function(e){var t=n.edge(e);if(Le.has(t,"x"))switch((t.labelpos==="l"||t.labelpos==="r")&&(t.width-=t.labeloffset),t.labelpos){case"l":t.x-=t.width/2+t.labeloffset;break;case"r":t.x+=t.width/2+t.labeloffset;break}})}function vee(n){Le.forEach(n.edges(),function(e){var t=n.edge(e);t.reversed&&t.points.reverse()})}function mee(n){Le.forEach(n.nodes(),function(e){if(n.children(e).length){var t=n.node(e),r=n.node(t.borderTop),i=n.node(t.borderBottom),a=n.node(Le.last(t.borderLeft)),s=n.node(Le.last(t.borderRight));t.width=Math.abs(s.x-a.x),t.height=Math.abs(i.y-r.y),t.x=a.x+t.width/2,t.y=r.y+t.height/2}}),Le.forEach(n.nodes(),function(e){n.node(e).dummy==="border"&&n.removeNode(e)})}function yee(n){Le.forEach(n.edges(),function(e){if(e.v===e.w){var t=n.node(e.v);t.selfEdges||(t.selfEdges=[]),t.selfEdges.push({e,label:n.edge(e)}),n.removeEdge(e)}})}function bee(n){var e=us.buildLayerMatrix(n);Le.forEach(e,function(t){var r=0;Le.forEach(t,function(i,a){var s=n.node(i);s.order=a+r,Le.forEach(s.selfEdges,function(o){us.addDummyNode(n,"selfedge",{width:o.label.width,height:o.label.height,rank:s.rank,order:a+ ++r,e:o.e,label:o.label},"_se")}),delete s.selfEdges})})}function xee(n){Le.forEach(n.nodes(),function(e){var t=n.node(e);if(t.dummy==="selfedge"){var r=n.node(t.e.v),i=r.x+r.width/2,a=r.y,s=t.x-i,o=r.height/2;n.setEdge(t.e,t.label),n.removeNode(e),t.label.points=[{x:i+2*s/3,y:a-o},{x:i+5*s/6,y:a-o},{x:i+s,y:a},{x:i+5*s/6,y:a+o},{x:i+2*s/3,y:a+o}],t.label.x=t.x,t.label.y=t.y}})}function by(n,e){return Le.mapValues(Le.pick(n,e),Number)}function xy(n){var e={};return Le.forEach(n,function(t,r){e[r.toLowerCase()]=t}),e}var gh=bt,wee=Qn,Eee=ci.Graph,_ee={debugOrdering:See};function See(n){var e=wee.buildLayerMatrix(n),t=new Eee({compound:!0,multigraph:!0}).setGraph({});return gh.forEach(n.nodes(),function(r){t.setNode(r,{label:r}),t.setParent(r,"layer"+n.node(r).rank)}),gh.forEach(n.edges(),function(r){t.setEdge(r.v,r.w,{},r.name)}),gh.forEach(e,function(r,i){var a="layer"+i;t.setNode(a,{rank:"same"}),gh.reduce(r,function(s,o){return t.setEdge(s,o,{style:"invis"}),o})}),t}var kee="0.8.5",v8={graphlib:ci,layout:KQ,debug:_ee,util:{time:Qn.time,notime:Qn.notime},version:kee};const Cee=Zd(v8);class i0{constructor(e){this.id="dagre",this.options={},Object.assign(this.options,i0.defaultOptions,e)}execute(e,t){return Pe(this,void 0,void 0,function*(){return this.genericDagreLayout(!1,e,Object.assign(Object.assign({},this.options),t))})}assign(e,t){return Pe(this,void 0,void 0,function*(){yield this.genericDagreLayout(!0,e,Object.assign(Object.assign({},this.options),t))})}genericDagreLayout(e,t,r){return Pe(this,void 0,void 0,function*(){const{nodeSize:i}=r,a=new v8.graphlib.Graph;a.setGraph(r),a.setDefaultEdgeLabel(()=>({}));const s=t.getAllNodes(),o=t.getAllEdges();[...s,...o].some(({id:l})=>re(l))&&console.error("Dagre layout only support string id, it will convert number to string."),t.getAllNodes().forEach(l=>{const{id:c}=l,h=Object.assign({},l.data);if(i!==void 0){const[d,f]=lc(se(i)?i(l):i);Object.assign(h,{width:d,height:f})}a.setNode(c.toString(),h)}),t.getAllEdges().forEach(({id:l,source:c,target:h})=>{a.setEdge(c.toString(),h.toString(),{id:l})}),Cee.layout(a);const u={nodes:[],edges:[]};return a.nodes().forEach(l=>{const c=a.node(l);u.nodes.push({id:l,data:c}),e&&t.mergeNodeData(l,c)}),a.edges().forEach(l=>{const c=a.edge(l),{id:h}=c,d=At(c,["id"]),{v:f,w:g}=l;u.edges.push({id:h,source:f,target:g,data:d}),e&&t.mergeEdgeData(h,d)}),u})}}i0.defaultOptions={};class iw{constructor(e){this.id=e.id||0,this.rx=e.rx,this.ry=e.ry,this.fx=0,this.fy=0,this.mass=e.mass,this.degree=e.degree,this.g=e.g||0}distanceTo(e){const t=this.rx-e.rx,r=this.ry-e.ry;return Math.hypot(t,r)}setPos(e,t){this.rx=e,this.ry=t}resetForce(){this.fx=0,this.fy=0}addForce(e){const t=e.rx-this.rx,r=e.ry-this.ry;let i=Math.hypot(t,r);i=i<1e-4?1e-4:i;const a=this.g*(this.degree+1)*(e.degree+1)/i;this.fx+=a*t/i,this.fy+=a*r/i}in(e){return e.contains(this.rx,this.ry)}add(e){const t=this.mass+e.mass,r=(this.rx*this.mass+e.rx*e.mass)/t,i=(this.ry*this.mass+e.ry*e.mass)/t,a=this.degree+e.degree,s={rx:r,ry:i,mass:t,degree:a};return new iw(s)}}class Fo{constructor(e){this.xmid=e.xmid,this.ymid=e.ymid,this.length=e.length,this.massCenter=e.massCenter||[0,0],this.mass=e.mass||1}getLength(){return this.length}contains(e,t){const r=this.length/2;return e<=this.xmid+r&&e>=this.xmid-r&&t<=this.ymid+r&&t>=this.ymid-r}NW(){const e=this.xmid-this.length/4,t=this.ymid+this.length/4,r=this.length/2,i={xmid:e,ymid:t,length:r};return new Fo(i)}NE(){const e=this.xmid+this.length/4,t=this.ymid+this.length/4,r=this.length/2,i={xmid:e,ymid:t,length:r};return new Fo(i)}SW(){const e=this.xmid-this.length/4,t=this.ymid-this.length/4,r=this.length/2,i={xmid:e,ymid:t,length:r};return new Fo(i)}SE(){const e=this.xmid+this.length/4,t=this.ymid-this.length/4,r=this.length/2,i={xmid:e,ymid:t,length:r};return new Fo(i)}}class Bo{constructor(e){this.body=null,this.quad=null,this.NW=null,this.NE=null,this.SW=null,this.SE=null,this.theta=.5,e!=null&&(this.quad=e)}insert(e){if(this.body==null){this.body=e;return}this._isExternal()?(this.quad&&(this.NW=new Bo(this.quad.NW()),this.NE=new Bo(this.quad.NE()),this.SW=new Bo(this.quad.SW()),this.SE=new Bo(this.quad.SE())),this._putBody(this.body),this._putBody(e),this.body=this.body.add(e)):(this.body=this.body.add(e),this._putBody(e))}_putBody(e){this.quad&&(e.in(this.quad.NW())&&this.NW?this.NW.insert(e):e.in(this.quad.NE())&&this.NE?this.NE.insert(e):e.in(this.quad.SW())&&this.SW?this.SW.insert(e):e.in(this.quad.SE())&&this.SE&&this.SE.insert(e))}_isExternal(){return this.NW==null&&this.NE==null&&this.SW==null&&this.SE==null}updateForce(e){if(!(this.body==null||e===this.body))if(this._isExternal())e.addForce(this.body);else{const t=this.quad?this.quad.getLength():0,r=this.body.distanceTo(e);t/r<this.theta?e.addForce(this.body):(this.NW&&this.NW.updateForce(e),this.NE&&this.NE.updateForce(e),this.SW&&this.SW.updateForce(e),this.SE&&this.SE.updateForce(e))}}}const Aee={center:[0,0],width:300,height:300,kr:5,kg:1,mode:"normal",preventOverlap:!1,dissuadeHubs:!1,maxIteration:0,ks:.1,ksmax:10,tao:.1};class Tee{constructor(e={}){this.options=e,this.id="forceAtlas2",this.options=Object.assign(Object.assign({},Aee),e)}execute(e,t){return Pe(this,void 0,void 0,function*(){return this.genericForceAtlas2Layout(!1,e,t)})}assign(e,t){return Pe(this,void 0,void 0,function*(){yield this.genericForceAtlas2Layout(!0,e,t)})}genericForceAtlas2Layout(e,t,r){return Pe(this,void 0,void 0,function*(){const i=t.getAllEdges(),a=t.getAllNodes(),s=this.formatOptions(r,a.length),{width:o,height:u,prune:l,maxIteration:c,nodeSize:h,center:d}=s;if(!(a!=null&&a.length)||a.length===1)return so(t,e,d);const f=a.map(m=>gr(m,[o,u])),g=i.filter(m=>{const{source:y,target:b}=m;return y!==b}),p=new Xt({nodes:f,edges:g}),v=this.getSizes(p,h);if(this.run(p,t,c,v,e,s),l){for(let y=0;y<g.length;y+=1){const{source:b,target:x}=g[y],w=p.getDegree(b),E=p.getDegree(b);if(w<=1){const _=p.getNode(x);p.mergeNodeData(b,{x:_.data.x,y:_.data.y})}else if(E<=1){const _=p.getNode(b);p.mergeNodeData(x,{x:_.data.x,y:_.data.y})}}const m=Object.assign(Object.assign({},s),{prune:!1,barnesHut:!1});this.run(p,t,100,v,e,m)}return{nodes:f,edges:i}})}getSizes(e,t){const r=e.getAllNodes(),i={};for(let a=0;a<r.length;a+=1){const s=r[a];i[s.id]=Px(t,void 0)(s)}return i}formatOptions(e={},t){const r=Object.assign(Object.assign({},this.options),e),{center:i,width:a,height:s,barnesHut:o,prune:u,maxIteration:l,kr:c,kg:h}=r;return r.width=!a&&typeof window<"u"?window.innerWidth:a,r.height=!s&&typeof window<"u"?window.innerHeight:s,r.center=i||[r.width/2,r.height/2],o===void 0&&t>250&&(r.barnesHut=!0),u===void 0&&t>100&&(r.prune=!0),l===0&&!u?(r.maxIteration=250,t<=200&&t>100?r.maxIteration=1e3:t>200&&(r.maxIteration=1200)):l===0&&u&&(r.maxIteration=100,t<=200&&t>100?r.maxIteration=500:t>200&&(r.maxIteration=950)),c||(r.kr=50,t>100&&t<=500?r.kr=20:t>500&&(r.kr=1)),h||(r.kg=20,t>100&&t<=500?r.kg=10:t>500&&(r.kg=1)),r}run(e,t,r,i,a,s){const{kr:o,barnesHut:u,onTick:l}=s,c=e.getAllNodes();let h=0,d=r;const f={},g={},p={};for(let v=0;v<c.length;v+=1){const{data:m,id:y}=c[v];if(f[y]=[0,0],u){const b={id:v,rx:m.x,ry:m.y,mass:1,g:o,degree:e.getDegree(y)};p[y]=new iw(b)}}for(;d>0;)h=this.oneStep(e,{iter:d,preventOverlapIters:50,krPrime:100,sg:h,forces:f,preForces:g,bodies:p,sizes:i},s),d--,l==null||l({nodes:c,edges:t.getAllEdges()});return e}oneStep(e,t,r){const{iter:i,preventOverlapIters:a,krPrime:s,sg:o,preForces:u,bodies:l,sizes:c}=t;let{forces:h}=t;const{preventOverlap:d,barnesHut:f}=r,g=e.getAllNodes();for(let p=0;p<g.length;p+=1){const{id:v}=g[p];u[v]=[...h[v]],h[v]=[0,0]}return h=this.getAttrForces(e,i,a,c,h,r),f&&(d&&i>a||!d)?h=this.getOptRepGraForces(e,h,l,r):h=this.getRepGraForces(e,i,a,h,s,c,r),this.updatePos(e,h,u,o,r)}getAttrForces(e,t,r,i,a,s){const{preventOverlap:o,dissuadeHubs:u,mode:l,prune:c}=s,h=e.getAllEdges();for(let d=0;d<h.length;d+=1){const{source:f,target:g}=h[d],p=e.getNode(f),v=e.getNode(g),m=e.getDegree(f),y=e.getDegree(g);if(c&&(m<=1||y<=1))continue;const b=[v.data.x-p.data.x,v.data.y-p.data.y];let x=Math.hypot(b[0],b[1]);x=x<1e-4?1e-4:x,b[0]=b[0]/x,b[1]=b[1]/x,o&&t<r&&(x=x-i[f]-i[g]);let w=x,E=w;l==="linlog"&&(w=Math.log(1+x),E=w),u&&(w=x/m,E=x/y),o&&t<r&&x<=0?(w=0,E=0):o&&t<r&&x>0&&(w=x,E=x),a[f][0]+=w*b[0],a[g][0]-=E*b[0],a[f][1]+=w*b[1],a[g][1]-=E*b[1]}return a}getOptRepGraForces(e,t,r,i){const{kg:a,center:s,prune:o}=i,u=e.getAllNodes(),l=u.length;let c=9e10,h=-9e10,d=9e10,f=-9e10;for(let y=0;y<l;y+=1){const{id:b,data:x}=u[y];o&&e.getDegree(b)<=1||(r[b].setPos(x.x,x.y),x.x>=h&&(h=x.x),x.x<=c&&(c=x.x),x.y>=f&&(f=x.y),x.y<=d&&(d=x.y))}const g=Math.max(h-c,f-d),p={xmid:(h+c)/2,ymid:(f+d)/2,length:g,massCenter:s,mass:l},v=new Fo(p),m=new Bo(v);for(let y=0;y<l;y+=1){const{id:b}=u[y];o&&e.getDegree(b)<=1||r[b].in(v)&&m.insert(r[b])}for(let y=0;y<l;y+=1){const{id:b,data:x}=u[y],w=e.getDegree(b);if(o&&w<=1)continue;r[b].resetForce(),m.updateForce(r[b]),t[b][0]-=r[b].fx,t[b][1]-=r[b].fy;const E=[x.x-s[0],x.y-s[1]];let _=Math.hypot(E[0],E[1]);_=_<1e-4?1e-4:_,E[0]=E[0]/_,E[1]=E[1]/_;const S=a*(w+1);t[b][0]-=S*E[0],t[b][1]-=S*E[1]}return t}getRepGraForces(e,t,r,i,a,s,o){const{preventOverlap:u,kr:l,kg:c,center:h,prune:d}=o,f=e.getAllNodes(),g=f.length;for(let p=0;p<g;p+=1){const v=f[p],m=e.getDegree(v.id);for(let w=p+1;w<g;w+=1){const E=f[w],_=e.getDegree(E.id);if(d&&(m<=1||_<=1))continue;const S=[E.data.x-v.data.x,E.data.y-v.data.y];let C=Math.hypot(S[0],S[1]);C=C<1e-4?1e-4:C,S[0]=S[0]/C,S[1]=S[1]/C,u&&t<r&&(C=C-s[v.id]-s[E.id]);let k=l*(m+1)*(_+1)/C;u&&t<r&&C<0?k=a*(m+1)*(_+1):u&&t<r&&C===0?k=0:u&&t<r&&C>0&&(k=l*(m+1)*(_+1)/C),i[v.id][0]-=k*S[0],i[E.id][0]+=k*S[0],i[v.id][1]-=k*S[1],i[E.id][1]+=k*S[1]}const y=[v.data.x-h[0],v.data.y-h[1]],b=Math.hypot(y[0],y[1]);y[0]=y[0]/b,y[1]=y[1]/b;const x=c*(m+1);i[v.id][0]-=x*y[0],i[v.id][1]-=x*y[1]}return i}updatePos(e,t,r,i,a){const{ks:s,tao:o,prune:u,ksmax:l}=a,c=e.getAllNodes(),h=c.length,d=[],f=[];let g=0,p=0,v=i;for(let y=0;y<h;y+=1){const{id:b}=c[y],x=e.getDegree(b);if(u&&x<=1)continue;const w=[t[b][0]-r[b][0],t[b][1]-r[b][1]],E=Math.hypot(w[0],w[1]),_=[t[b][0]+r[b][0],t[b][1]+r[b][1]],S=Math.hypot(_[0],_[1]);d[y]=E,f[y]=S/2,g+=(x+1)*d[y],p+=(x+1)*f[y]}const m=v;v=o*p/g,m!==0&&(v=v>1.5*m?1.5*m:v);for(let y=0;y<h;y+=1){const{id:b,data:x}=c[y],w=e.getDegree(b);if(u&&w<=1||re(x.fx)&&re(x.fy))continue;let E=s*v/(1+v*Math.sqrt(d[y])),_=Math.hypot(t[b][0],t[b][1]);_=_<1e-4?1e-4:_;const S=l/_;E=E>S?S:E;const C=E*t[b][0],k=E*t[b][1];e.mergeNodeData(b,{x:x.x+C,y:x.y+k})}return v}}const Oee={maxIteration:1e3,gravity:10,speed:5,clustering:!1,clusterGravity:10,width:300,height:300,nodeClusterBy:"cluster"},Mee=800;class Pee{constructor(e={}){this.options=e,this.id="fruchterman",this.timeInterval=0,this.running=!1,this.options=Object.assign(Object.assign({},Oee),e)}execute(e,t){return Pe(this,void 0,void 0,function*(){return this.genericFruchtermanLayout(!1,e,t)})}assign(e,t){return Pe(this,void 0,void 0,function*(){yield this.genericFruchtermanLayout(!0,e,t)})}stop(){this.timeInterval&&typeof window<"u"&&window.clearInterval(this.timeInterval),this.running=!1}tick(e=this.options.maxIteration||1){if(this.lastResult)return this.lastResult;for(let r=0;r<e;r++)this.runOneStep(this.lastGraph,this.lastClusterMap,this.lastOptions);const t={nodes:this.lastLayoutNodes,edges:this.lastLayoutEdges};return this.lastAssign&&t.nodes.forEach(r=>this.lastGraph.mergeNodeData(r.id,{x:r.data.x,y:r.data.y,z:this.options.dimensions===3?r.data.z:void 0})),t}genericFruchtermanLayout(e,t,r){return Pe(this,void 0,void 0,function*(){if(this.running)return;const i=this.formatOptions(r),{dimensions:a,width:s,height:o,center:u,clustering:l,nodeClusterBy:c,maxIteration:h,onTick:d}=i,f=t.getAllNodes(),g=t.getAllEdges();if(!(f!=null&&f.length)){const b={nodes:[],edges:g};return this.lastResult=b,b}if(f.length===1){e&&t.mergeNodeData(f[0].id,{x:u[0],y:u[1],z:a===3?u[2]:void 0});const b={nodes:[Object.assign(Object.assign({},f[0]),{data:Object.assign(Object.assign({},f[0].data),{x:u[0],y:u[1],z:a===3?u[2]:void 0})})],edges:g};return this.lastResult=b,b}const p=f.map(b=>gr(b,[s,o])),v=new Xt({nodes:p,edges:g}),m={};if(l&&p.forEach(b=>{const x=b.data[c];m[x]||(m[x]={name:x,cx:0,cy:0,count:0})}),this.lastLayoutNodes=p,this.lastLayoutEdges=g,this.lastAssign=e,this.lastGraph=v,this.lastOptions=i,this.lastClusterMap=m,typeof window>"u")return;let y=0;return new Promise(b=>{this.timeInterval=window.setInterval(()=>{if(!this.running){b({nodes:p,edges:g});return}this.runOneStep(v,m,i),e&&p.forEach(({id:x,data:w})=>t.mergeNodeData(x,{x:w.x,y:w.y,z:a===3?w.z:void 0})),d==null||d({nodes:p,edges:g}),y++,y>=h&&(window.clearInterval(this.timeInterval),b({nodes:p,edges:g}))},0),this.running=!0})})}formatOptions(e={}){const t=Object.assign(Object.assign({},this.options),e),{clustering:r,nodeClusterBy:i}=t,{center:a,width:s,height:o}=t;return t.width=!s&&typeof window<"u"?window.innerWidth:s,t.height=!o&&typeof window<"u"?window.innerHeight:o,t.center=a||[t.width/2,t.height/2],t.clustering=r&&!!i,t}runOneStep(e,t,r){const{dimensions:i,height:a,width:s,gravity:o,center:u,speed:l,clustering:c,nodeClusterBy:h,clusterGravity:d}=r,f=a*s,g=Math.sqrt(f)/10,p=e.getAllNodes(),v=f/(p.length+1),m=Math.sqrt(v),y={};if(this.applyCalculate(e,y,m,v),c){for(const x in t)t[x].cx=0,t[x].cy=0,t[x].count=0;p.forEach(x=>{const{data:w}=x,E=t[w[h]];re(w.x)&&(E.cx+=w.x),re(w.y)&&(E.cy+=w.y),E.count++});for(const x in t)t[x].cx/=t[x].count,t[x].cy/=t[x].count;const b=d||o;p.forEach((x,w)=>{const{id:E,data:_}=x;if(!re(_.x)||!re(_.y))return;const S=t[_[h]],C=Math.sqrt((_.x-S.cx)*(_.x-S.cx)+(_.y-S.cy)*(_.y-S.cy)),k=m*b;y[E].x-=k*(_.x-S.cx)/C,y[E].y-=k*(_.y-S.cy)/C})}p.forEach((b,x)=>{const{id:w,data:E}=b;if(!re(E.x)||!re(E.y))return;const _=.01*m*o;y[w].x-=_*(E.x-u[0]),y[w].y-=_*(E.y-u[1]),i===3&&(y[w].z-=_*(E.z-u[2]))}),p.forEach((b,x)=>{const{id:w,data:E}=b;if(re(E.fx)&&re(E.fy)){E.x=E.fx,E.y=E.fy,i===3&&(E.z=E.fz);return}if(!re(E.x)||!re(E.y))return;const _=Math.sqrt(y[w].x*y[w].x+y[w].y*y[w].y+(i===3?y[w].z*y[w].z:0));if(_>0){const S=Math.min(g*(l/Mee),_);e.mergeNodeData(w,{x:E.x+y[w].x/_*S,y:E.y+y[w].y/_*S,z:i===3?E.z+y[w].z/_*S:void 0})}})}applyCalculate(e,t,r,i){this.calRepulsive(e,t,i),this.calAttractive(e,t,r)}calRepulsive(e,t,r){const i=e.getAllNodes();i.forEach(({data:a,id:s},o)=>{t[s]={x:0,y:0,z:0},i.forEach(({data:u,id:l},c)=>{if(o<=c||!re(a.x)||!re(u.x)||!re(a.y)||!re(u.y))return;let h=a.x-u.x,d=a.y-u.y,f=this.options.dimensions===3?a.z-u.z:0,g=h*h+d*d+f*f;g===0&&(g=1,h=.01,d=.01,f=.01);const p=r/g,v=h*p,m=d*p,y=f*p;t[s].x+=v,t[s].y+=m,t[l].x-=v,t[l].y-=m,this.options.dimensions===3&&(t[s].z+=y,t[l].z-=y)})})}calAttractive(e,t,r){e.getAllEdges().forEach(a=>{const{source:s,target:o}=a;if(!s||!o||s===o)return;const{data:u}=e.getNode(s),{data:l}=e.getNode(o);if(!re(l.x)||!re(u.x)||!re(l.y)||!re(u.y))return;const c=l.x-u.x,h=l.y-u.y,d=this.options.dimensions===3?l.z-u.z:0,f=Math.sqrt(c*c+h*h+d*d)/r,g=c*f,p=h*f,v=d*f;t[s].x+=g,t[s].y+=p,t[o].x-=g,t[o].y-=p,this.options.dimensions===3&&(t[s].z+=v,t[o].z-=v)})}}const Nee={begin:[0,0],preventOverlap:!0,preventOverlapPadding:10,condense:!1,rows:void 0,cols:void 0,position:void 0,sortBy:"degree",nodeSize:30,width:300,height:300};class Dee{constructor(e={}){this.options=e,this.id="grid",this.options=Object.assign(Object.assign({},Nee),e)}execute(e,t){return Pe(this,void 0,void 0,function*(){return this.genericGridLayout(!1,e,t)})}assign(e,t){return Pe(this,void 0,void 0,function*(){yield this.genericGridLayout(!0,e,t)})}genericGridLayout(e,t,r){return Pe(this,void 0,void 0,function*(){const i=Object.assign(Object.assign({},this.options),r),{begin:a=[0,0],condense:s,preventOverlapPadding:o,preventOverlap:u,rows:l,cols:c,nodeSpacing:h,nodeSize:d,width:f,height:g,position:p}=i;let{sortBy:v}=i;const m=t.getAllNodes(),y=t.getAllEdges(),b=m==null?void 0:m.length;if(!b||b===1)return so(t,e,a);const x=m.map(R=>gr(R));v!=="id"&&(!qe(v)||x[0].data[v]===void 0)&&(v="degree"),v==="degree"?x.sort((R,N)=>t.getDegree(N.id,"both")-t.getDegree(R.id,"both")):v==="id"?x.sort((R,N)=>re(N.id)&&re(R.id)?N.id-R.id:`${R.id}`.localeCompare(`${N.id}`)):x.sort((R,N)=>N.data[v]-R.data[v]);const w=!f&&typeof window<"u"?window.innerWidth:f,E=!g&&typeof window<"u"?window.innerHeight:g,_=b,S={rows:l,cols:c};if(l!=null&&c!=null)S.rows=l,S.cols=c;else if(l!=null&&c==null)S.rows=l,S.cols=Math.ceil(_/S.rows);else if(l==null&&c!=null)S.cols=c,S.rows=Math.ceil(_/S.cols);else{const R=Math.sqrt(_*E/w);S.rows=Math.round(R),S.cols=Math.round(w/E*R)}if(S.rows=Math.max(S.rows,1),S.cols=Math.max(S.cols,1),S.cols*S.rows>_){const R=ph(S),N=vh(S);(R-1)*N>=_?ph(S,R-1):(N-1)*R>=_&&vh(S,N-1)}else for(;S.cols*S.rows<_;){const R=ph(S),N=vh(S);(N+1)*R>=_?vh(S,N+1):ph(S,R+1)}let C=s?0:w/S.cols,k=s?0:E/S.rows;if(u||h){const R=Gs(10,h),N=Mx(30,d,!1);x.forEach(D=>{(!D.data.x||!D.data.y)&&(D.data.x=0,D.data.y=0);const M=t.getNode(D.id),[F,j]=lc(N(M)||30),B=R!==void 0?R(D):o,$=F+B,W=j+B;C=Math.max(C,$),k=Math.max(k,W)})}const A={},T={row:0,col:0},O={};for(let R=0;R<x.length;R++){const N=x[R];let D;if(p&&(D=p(t.getNode(N.id))),D&&(D.row!==void 0||D.col!==void 0)){const M={row:D.row,col:D.col};if(M.col===void 0)for(M.col=0;Qb(A,M);)M.col++;else if(M.row===void 0)for(M.row=0;Qb(A,M);)M.row++;O[N.id]=M,m8(A,M)}Ree(N,a,C,k,O,S,T,A)}const P={nodes:x,edges:y};return e&&x.forEach(R=>{t.mergeNodeData(R.id,{x:R.data.x,y:R.data.y})}),P})}}const ph=(n,e)=>{let t;const r=n.rows||5,i=n.cols||5;return e==null?t=Math.min(r,i):Math.min(r,i)===n.rows?n.rows=e:n.cols=e,t},vh=(n,e)=>{let t;const r=n.rows||5,i=n.cols||5;return e==null?t=Math.max(r,i):Math.max(r,i)===n.rows?n.rows=e:n.cols=e,t},Qb=(n,e)=>n[`c-${e.row}-${e.col}`]||!1,m8=(n,e)=>n[`c-${e.row}-${e.col}`]=!0,yA=(n,e)=>{const t=n.cols||5;e.col++,e.col>=t&&(e.col=0,e.row++)},Ree=(n,e,t,r,i,a,s,o)=>{let u,l;const c=i[n.id];if(c)u=c.col*t+t/2+e[0],l=c.row*r+r/2+e[1];else{for(;Qb(o,s);)yA(a,s);u=s.col*t+t/2+e[0],l=s.row*r+r/2+e[1],m8(o,s),yA(a,s)}n.data.x=u,n.data.y=l},Lee=(n,e,t)=>{try{const r=Ua.mul(Ua.pow(e,2),-.5),i=r.mean("row"),a=r.mean("column"),s=r.mean();r.add(s).subRowVector(i).subColumnVector(a);const o=new jP(r),u=Ua.sqrt(o.diagonalMatrix).diagonal();return o.leftSingularVectors.toJSON().map(l=>Ua.mul([l],[u]).toJSON()[0].splice(0,n))}catch{const i=[];for(let a=0;a<e.length;a++){const s=Math.random()*t,o=Math.random()*t;i.push([s,o])}return i}},Iee=800,Fee={iterations:10,height:10,width:10,speed:100,gravity:10,k:5},Bee=(n,e)=>{const t=Object.assign(Object.assign({},Fee),e),{positions:r,iterations:i,width:a,k:s,speed:o=100,strictRadial:u,focusIdx:l,radii:c=[],nodeSizeFunc:h}=t,d=n.getAllNodes(),f=[],g=a/10;for(let p=0;p<i;p++)r.forEach((v,m)=>{f[m]={x:0,y:0}}),zee(d,r,f,s,c,h),$ee(r,f,o,u,l,g,a,c);return r},zee=(n,e,t,r,i,a)=>{e.forEach((s,o)=>{t[o]={x:0,y:0},e.forEach((u,l)=>{if(o===l||i[o]!==i[l])return;let c=s.x-u.x,h=s.y-u.y,d=Math.sqrt(c*c+h*h);if(d===0){d=1;const f=o>l?1:-1;c=.01*f,h=.01*f}if(d<a(n[o])/2+a(n[l])/2){const f=r*r/d;t[o].x+=c/d*f,t[o].y+=h/d*f}})})},$ee=(n,e,t,r,i,a,s,o)=>{const u=a||s/10;return r&&e.forEach((l,c)=>{const h=n[c].x-n[i].x,d=n[c].y-n[i].y,f=Math.sqrt(h*h+d*d);let g=d/f,p=-h/f;const v=Math.sqrt(l.x*l.x+l.y*l.y);let m=Math.acos((g*l.x+p*l.y)/v);m>Math.PI/2&&(m-=Math.PI/2,g*=-1,p*=-1);const y=Math.cos(m)*v;l.x=g*y,l.y=p*y}),n.forEach((l,c)=>{if(c===i)return;const h=Math.sqrt(e[c].x*e[c].x+e[c].y*e[c].y);if(h>0&&c!==i){const d=Math.min(u*(t/Iee),h);if(l.x+=e[c].x/h*d,l.y+=e[c].y/h*d,r){let f=l.x-n[i].x,g=l.y-n[i].y;const p=Math.sqrt(f*f+g*g);f=f/p*o[c],g=g/p*o[c],l.x=n[i].x+f,l.y=n[i].y+g}}}),n},jee={maxIteration:1e3,focusNode:null,unitRadius:null,linkDistance:50,preventOverlap:!1,strictRadial:!0,maxPreventOverlapIteration:200,sortStrength:10};class qee{constructor(e={}){this.options=e,this.id="radial",this.options=Object.assign(Object.assign({},jee),e)}execute(e,t){return Pe(this,void 0,void 0,function*(){return this.genericRadialLayout(!1,e,t)})}assign(e,t){return Pe(this,void 0,void 0,function*(){yield this.genericRadialLayout(!0,e,t)})}genericRadialLayout(e,t,r){return Pe(this,void 0,void 0,function*(){const i=Object.assign(Object.assign({},this.options),r),{width:a,height:s,center:o,focusNode:u,unitRadius:l,nodeSize:c,nodeSpacing:h,strictRadial:d,preventOverlap:f,maxPreventOverlapIteration:g,sortBy:p,linkDistance:v=50,sortStrength:m=10,maxIteration:y=1e3}=i,b=t.getAllNodes(),x=t.getAllEdges(),w=!a&&typeof window<"u"?window.innerWidth:a,E=!s&&typeof window<"u"?window.innerHeight:s,_=o||[w/2,E/2];if(!(b!=null&&b.length)||b.length===1)return so(t,e,_);let S=b[0];if(qe(u)){for(let ie=0;ie<b.length;ie++)if(b[ie].id===u){S=b[ie];break}}else S=u||b[0];const C=Vee(b,S.id),k=TP({nodes:b,edges:x},!1),A=AP(k),T=Hee(A,C);Uee(A,C,T+1);const O=A[C];let P=w-_[0]>_[0]?_[0]:w-_[0],R=E-_[1]>_[1]?_[1]:E-_[1];P===0&&(P=w/2),R===0&&(R=E/2);const N=Math.min(P,R),D=Math.max(...O),M=[],F=l||N/D;O.forEach((ie,_e)=>{M[_e]=ie*F});const j=Gee(b,A,v,M,F,p,m),B=Wee(j),$=Lee(v,j,v);let W=$.map(([ie,_e])=>({x:(isNaN(ie)?Math.random()*v:ie)-$[C][0],y:(isNaN(_e)?Math.random()*v:_e)-$[C][1]}));this.run(y,W,B,j,M,C);let Y;if(f){Y=Px(c,h);const ie={nodes:b,nodeSizeFunc:Y,positions:W,radii:M,height:E,width:w,strictRadial:!!d,focusIdx:C,iterations:g||200,k:W.length/4.5};W=Bee(t,ie)}const K=[];return W.forEach((ie,_e)=>{const Ae=gr(b[_e]);Ae.data.x=ie.x+_[0],Ae.data.y=ie.y+_[1],K.push(Ae)}),e&&K.forEach(ie=>t.mergeNodeData(ie.id,{x:ie.data.x,y:ie.data.y})),{nodes:K,edges:x}})}run(e,t,r,i,a,s){for(let o=0;o<=e;o++){const u=o/e;this.oneIteration(u,t,a,i,r,s)}}oneIteration(e,t,r,i,a,s){const o=1-e;t.forEach((u,l)=>{const c=Q3(u,{x:0,y:0}),h=c===0?0:1/c;if(l===s)return;let d=0,f=0,g=0;t.forEach((v,m)=>{if(l===m)return;const y=Q3(u,v),b=y===0?0:1/y,x=i[m][l];g+=a[l][m],d+=a[l][m]*(v.x+x*(u.x-v.x)*b),f+=a[l][m]*(v.y+x*(u.y-v.y)*b)});const p=r[l]===0?0:1/r[l];g*=o,g+=e*p*p,d*=o,d+=e*p*u.x*h,u.x=d/g,f*=o,f+=e*p*u.y*h,u.y=f/g})}}const Gee=(n,e,t,r,i,a,s)=>{if(!n)return[];const o=[];if(e){const u={};e.forEach((l,c)=>{const h=[];l.forEach((d,f)=>{var g,p;if(c===f)h.push(0);else if(r[c]===r[f])if(a==="data")h.push(d*(Math.abs(c-f)*s)/(r[c]/i));else if(a){let v,m;if(u[n[c].id])v=u[n[c].id];else{const y=(a==="id"?n[c].id:(g=n[c].data)===null||g===void 0?void 0:g[a])||0;qe(y)?v=y.charCodeAt(0):v=y,u[n[c].id]=v}if(u[n[f].id])m=u[n[f].id];else{const y=(a==="id"?n[f].id:(p=n[f].data)===null||p===void 0?void 0:p[a])||0;qe(y)?m=y.charCodeAt(0):m=y,u[n[f].id]=m}h.push(d*(Math.abs(v-m)*s)/(r[c]/i))}else h.push(d*t/(r[c]/i));else{const v=(t+i)/2;h.push(d*v)}}),o.push(h)})}return o},Wee=n=>{const e=n.length,t=n[0].length,r=[];for(let i=0;i<e;i++){const a=[];for(let s=0;s<t;s++)n[i][s]!==0?a.push(1/(n[i][s]*n[i][s])):a.push(0);r.push(a)}return r},Vee=(n,e)=>{let t=-1;return n.forEach((r,i)=>{r.id===e&&(t=i)}),Math.max(t,0)},Uee=(n,e,t)=>{const r=n.length;for(let i=0;i<r;i++)if(n[e][i]===1/0){n[e][i]=t,n[i][e]=t;for(let a=0;a<r;a++)n[i][a]!==1/0&&n[e][a]===1/0&&(n[e][a]=t+n[i][a],n[a][e]=t+n[i][a])}for(let i=0;i<r;i++)if(i!==e){for(let a=0;a<r;a++)if(n[i][a]===1/0){let s=Math.abs(n[e][i]-n[e][a]);s=s===0?1:s,n[i][a]=s}}},Hee=(n,e)=>{let t=0;for(let r=0;r<n[e].length;r++)n[e][r]!==1/0&&(t=n[e][r]>t?n[e][r]:t);return t},Yee={center:[0,0],width:300,height:300};class Xee{constructor(e={}){this.options=e,this.id="random",this.options=Object.assign(Object.assign({},Yee),e)}execute(e,t){return Pe(this,void 0,void 0,function*(){return this.genericRandomLayout(!1,e,t)})}assign(e,t){return Pe(this,void 0,void 0,function*(){yield this.genericRandomLayout(!0,e,t)})}genericRandomLayout(e,t,r){return Pe(this,void 0,void 0,function*(){const i=Object.assign(Object.assign({},this.options),r),{center:a,width:s,height:o}=i,u=t.getAllNodes(),l=.9,c=!s&&typeof window<"u"?window.innerWidth:s,h=!o&&typeof window<"u"?window.innerHeight:o,d=a||[c/2,h/2],f=[];return u&&u.forEach(p=>{f.push({id:p.id,data:{x:(Math.random()-.5)*l*c+d[0],y:(Math.random()-.5)*l*h+d[1]}})}),e&&f.forEach(p=>t.mergeNodeData(p.id,{x:p.data.x,y:p.data.y})),{nodes:f,edges:t.getAllEdges()}})}}/**
 * @license
 * Copyright 2019 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const y8=Symbol("Comlink.proxy"),Kee=Symbol("Comlink.endpoint"),b8=Symbol("Comlink.releaseProxy"),wy=Symbol("Comlink.finalizer"),Gh=Symbol("Comlink.thrown"),x8=n=>typeof n=="object"&&n!==null||typeof n=="function",Zee={canHandle:n=>x8(n)&&n[y8],serialize(n){const{port1:e,port2:t}=new MessageChannel;return E8(n,e),[t,[t]]},deserialize(n){return n.start(),S8(n)}},Jee={canHandle:n=>x8(n)&&Gh in n,serialize({value:n}){let e;return n instanceof Error?e={isError:!0,value:{message:n.message,name:n.name,stack:n.stack}}:e={isError:!1,value:n},[e,[]]},deserialize(n){throw n.isError?Object.assign(new Error(n.value.message),n.value):n.value}},w8=new Map([["proxy",Zee],["throw",Jee]]);function Qee(n,e){for(const t of n)if(e===t||t==="*"||t instanceof RegExp&&t.test(e))return!0;return!1}function E8(n,e=globalThis,t=["*"]){e.addEventListener("message",function r(i){if(!i||!i.data)return;if(!Qee(t,i.origin)){console.warn(`Invalid origin '${i.origin}' for comlink proxy`);return}const{id:a,type:s,path:o}=Object.assign({path:[]},i.data),u=(i.data.argumentList||[]).map(Ts);let l;try{const c=o.slice(0,-1).reduce((d,f)=>d[f],n),h=o.reduce((d,f)=>d[f],n);switch(s){case"GET":l=h;break;case"SET":c[o.slice(-1)[0]]=Ts(i.data.value),l=!0;break;case"APPLY":l=h.apply(c,u);break;case"CONSTRUCT":{const d=new h(...u);l=ate(d)}break;case"ENDPOINT":{const{port1:d,port2:f}=new MessageChannel;E8(n,f),l=ite(d,[d])}break;case"RELEASE":l=void 0;break;default:return}}catch(c){l={value:c,[Gh]:0}}Promise.resolve(l).catch(c=>({value:c,[Gh]:0})).then(c=>{const[h,d]=Fd(c);e.postMessage(Object.assign(Object.assign({},h),{id:a}),d),s==="RELEASE"&&(e.removeEventListener("message",r),_8(e),wy in n&&typeof n[wy]=="function"&&n[wy]())}).catch(c=>{const[h,d]=Fd({value:new TypeError("Unserializable return value"),[Gh]:0});e.postMessage(Object.assign(Object.assign({},h),{id:a}),d)})}),e.start&&e.start()}function ete(n){return n.constructor.name==="MessagePort"}function _8(n){ete(n)&&n.close()}function S8(n,e){const t=new Map;return n.addEventListener("message",function(i){const{data:a}=i;if(!a||!a.id)return;const s=t.get(a.id);if(s)try{s(a)}finally{t.delete(a.id)}}),e2(n,t,[],e)}function mh(n){if(n)throw new Error("Proxy has been released and is not useable")}function k8(n){return Ro(n,new Map,{type:"RELEASE"}).then(()=>{_8(n)})}const Ld=new WeakMap,Id="FinalizationRegistry"in globalThis&&new FinalizationRegistry(n=>{const e=(Ld.get(n)||0)-1;Ld.set(n,e),e===0&&k8(n)});function tte(n,e){const t=(Ld.get(e)||0)+1;Ld.set(e,t),Id&&Id.register(n,e,n)}function nte(n){Id&&Id.unregister(n)}function e2(n,e,t=[],r=function(){}){let i=!1;const a=new Proxy(r,{get(s,o){if(mh(i),o===b8)return()=>{nte(a),k8(n),e.clear(),i=!0};if(o==="then"){if(t.length===0)return{then:()=>a};const u=Ro(n,e,{type:"GET",path:t.map(l=>l.toString())}).then(Ts);return u.then.bind(u)}return e2(n,e,[...t,o])},set(s,o,u){mh(i);const[l,c]=Fd(u);return Ro(n,e,{type:"SET",path:[...t,o].map(h=>h.toString()),value:l},c).then(Ts)},apply(s,o,u){mh(i);const l=t[t.length-1];if(l===Kee)return Ro(n,e,{type:"ENDPOINT"}).then(Ts);if(l==="bind")return e2(n,e,t.slice(0,-1));const[c,h]=bA(u);return Ro(n,e,{type:"APPLY",path:t.map(d=>d.toString()),argumentList:c},h).then(Ts)},construct(s,o){mh(i);const[u,l]=bA(o);return Ro(n,e,{type:"CONSTRUCT",path:t.map(c=>c.toString()),argumentList:u},l).then(Ts)}});return tte(a,n),a}function rte(n){return Array.prototype.concat.apply([],n)}function bA(n){const e=n.map(Fd);return[e.map(t=>t[0]),rte(e.map(t=>t[1]))]}const C8=new WeakMap;function ite(n,e){return C8.set(n,e),n}function ate(n){return Object.assign(n,{[y8]:!0})}function Fd(n){for(const[e,t]of w8)if(t.canHandle(n)){const[r,i]=t.serialize(n);return[{type:"HANDLER",name:e,value:r},i]}return[{type:"RAW",value:n},C8.get(n)||[]]}function Ts(n){switch(n.type){case"HANDLER":return w8.get(n.name).deserialize(n.value);case"RAW":return n.value}}function Ro(n,e,t,r){return new Promise(i=>{const a=ste();e.set(a,i),n.start&&n.start(),n.postMessage(Object.assign({id:a},t),r)})}function ste(){return new Array(4).fill(0).map(()=>Math.floor(Math.random()*Number.MAX_SAFE_INTEGER).toString(16)).join("-")}class ote extends kf{constructor(e,t,r){super(),this.graph=e,this.layout=t,this.options=r,this.spawnWorker()}spawnWorker(){this.proxy=S8(new Worker(new URL("/assets/worker-ebd28499.js",self.location),{type:"module"})),this.running&&(this.running=!1,this.execute())}execute(){var e;return Pe(this,void 0,void 0,function*(){if(this.running)return this;this.running=!0;const t=this.layout.options,r=At(t,["onTick"]),i={};Object.keys(r).forEach(u=>{se(r[u])||(i[u]=r[u])});const a={layout:{id:this.layout.id,options:i,iterations:(e=this.options)===null||e===void 0?void 0:e.iterations},nodes:this.graph.getAllNodes(),edges:this.graph.getAllEdges()},s=new Float32Array([0]),[o]=yield this.proxy.calculateLayout(a,[s]);return o})}stop(){return this.running=!1,this.proxy.stopLayout(),this}kill(){this.proxy[b8]()}isRunning(){return this.running}}var ute=globalThis&&globalThis.__awaiter||function(n,e,t,r){function i(a){return a instanceof t?a:new t(function(s){s(a)})}return new(t||(t=Promise))(function(a,s){function o(c){try{l(r.next(c))}catch(h){s(h)}}function u(c){try{l(r.throw(c))}catch(h){s(h)}}function l(c){c.done?a(c.value):i(c.value).then(o,u)}l((r=r.apply(n,e||[])).next())})};class a0 extends Cf{constructor(){super(...arguments),this.id="fishbone"}getRoot(){const e=this.context.model.getRootsData();if(!(wi(e)||e.length>2))return e[0]}formatSize(e){const t=typeof e=="function"?e:()=>e;return r=>mr(t(r))}doLayout(e,t){const{hGap:r,getRibSep:i,vGap:a,nodeSize:s,height:o}=t,{model:u}=this.context,l=this.formatSize(s);let c=l(e)[0]+i(e);const h=(b,x=0)=>{var w;return x+=r*((b.children||[]).length+1),(w=b.children)===null||w===void 0||w.forEach(E=>{var _;(_=u.getNodeLikeDatum(E).children)===null||_===void 0||_.forEach(C=>{const k=u.getNodeLikeDatum(C);x=h(k,x)})}),x},d=b=>{if(b.depth===1)return c;const x=u.getParentData(b.id,"tree");if(Eo(b)){const w=u.getParentData(x.id,"tree"),E=p(b)-p(w);return d(x)+E*r/a}else{const w=(x.children||[]).indexOf(b.id),E=u.getNodeData((x.children||[]).slice(w));return f(x)-E.reduce((_,S)=>_+h(S),0)-l(x)[0]/2}},f=nb(b=>{if(Ey(b))return l(b)[0]/2;const x=u.getParentData(b.id,"tree");if(Eo(b))return d(b)+h(b)+l(b)[0]/2;{const w=p(b)-p(x),E=r/a;return d(b)+w*E}},b=>b.id),g=b=>p(u.getParentData(b,"tree")),p=nb(b=>{if(Ey(b))return o/2;if(Eo(b)){const x=u.getParentData(b.id,"tree"),w=x.children.indexOf(b.id);if(w===0)return g(x.id)+a;const E=u.getNodeLikeDatum(x.children[w-1]);if(wi(E.children))return p(E)+a;const _=u.getDescendantsData(E.id);return Math.max(..._.map(S=>Eo(S)?g(S.id):p(S)))+a}else{if(wi(b.children))return g(b.id)+a;const x=u.getNodeLikeDatum(b.children.slice(-1)[0]);if(wi(x.children))return p(x)+a;const w=u.getDescendantsData(b.id).slice(-1)[0];return(Eo(w)?g(w.id):p(w))+a}},b=>b.id);let v=0;const m={nodes:[],edges:[]},y=b=>{var x;(x=b.children)===null||x===void 0||x.forEach(C=>y(u.getNodeLikeDatum(C)));const w=p(b),E=f(b);if(m.nodes.push({id:b.id,x:E,y:w}),Ey(b))return;const _=u.getRelatedEdgesData(b.id,"in")[0],S=[d(b),Eo(b)?w:g(b.id)];m.edges.push({id:z(_),controlPoints:[S],relatedNodeId:b.id}),v=Math.max(v,E+i(b)),b.depth===1&&(c=v)};return y(e),m}placeAlterative(e,t){const r=(t.children||[]).filter((o,u)=>u%2!==0);if(r.length===0)return e;const{model:i}=this.context,a=e.nodes.find(o=>o.id===t.id).y,s=o=>{const u=i.getAncestorsData(o,"tree");if(wi(u))return!1;const l=u.length===1?o:u[u.length-2].id;return r.includes(l)};e.nodes.forEach(o=>{s(o.id)&&(o.y=2*a-o.y)}),e.edges.forEach(o=>{s(o.relatedNodeId)&&(o.controlPoints=o.controlPoints.map(u=>[u[0],2*a-u[1]]))})}rightToLeft(e,t){return e.nodes.forEach(r=>r.x=t.width-r.x),e.edges.forEach(r=>{r.controlPoints=r.controlPoints.map(i=>[t.width-i[0],i[1]])}),e}execute(e,t){return ute(this,void 0,void 0,function*(){const r=Object.assign(Object.assign(Object.assign({},a0.defaultOptions),this.options),t),{direction:i,nodeSize:a}=r,s=this.getRoot();if(!s)return e;const o=this.formatSize(a);r.vGap||(r.vGap=Math.max(...(e.nodes||[]).map(d=>o(d)[1]))),r.hGap||(r.hGap=Math.max(...(e.nodes||[]).map(d=>o(d)[0])));let u=this.doLayout(s,r);this.placeAlterative(u,s),i==="RL"&&(u=this.rightToLeft(u,r));const{model:l}=this.context,c=[],h=[];return u.nodes.forEach(d=>{const{id:f,x:g,y:p}=d,v=l.getNodeLikeDatum(f);c.push(xA(v,{x:g,y:p}))}),u.edges.forEach(d=>{const{id:f,controlPoints:g}=d,p=l.getEdgeDatum(f);h.push(xA(p,{controlPoints:g}))}),{nodes:c,edges:h}})}}a0.defaultOptions={direction:"RL",getRibSep:()=>60};const xA=(n,e)=>Object.assign(Object.assign({},n),{style:Object.assign(Object.assign({},n.style||{}),e)}),Ey=n=>n.depth===0,Eo=n=>(n.depth||(n.depth=0))%2===0;var lte=globalThis&&globalThis.__awaiter||function(n,e,t,r){function i(a){return a instanceof t?a:new t(function(s){s(a)})}return new(t||(t=Promise))(function(a,s){function o(c){try{l(r.next(c))}catch(h){s(h)}}function u(c){try{l(r.throw(c))}catch(h){s(h)}}function l(c){c.done?a(c.value):i(c.value).then(o,u)}l((r=r.apply(n,e||[])).next())})};class s0 extends Cf{constructor(){super(...arguments),this.id="snake"}formatSize(e,t){const r=typeof t=="function"?t:()=>t;return e.reduce((i,a)=>{const[s,o]=mr(r(a))||[0,0];return[Math.max(i[0],s),Math.max(i[1],o)]},[0,0])}validate(e){const{nodes:t=[],edges:r=[]}=e,i={},a={},s={};t.forEach(d=>{i[d.id]=0,a[d.id]=0,s[d.id]=[]}),r.forEach(d=>{i[d.target]++,a[d.source]++,s[d.source].push(d.target)});const o=new Set,u=d=>{o.has(d)||(o.add(d),s[d].forEach(u))};if(u(t[0].id),o.size!==t.length)return!1;const l=t.filter(d=>i[d.id]===0),c=t.filter(d=>a[d.id]===0);return!(l.length!==1||c.length!==1||t.filter(d=>i[d.id]===1&&a[d.id]===1).length!==t.length-2)}execute(e,t){return lte(this,void 0,void 0,function*(){var r;if(!this.validate(e))return e;const{nodeSize:i,padding:a,sortBy:s,cols:o,colGap:u,rowGap:l,clockwise:c,width:h,height:d}=Object.assign({},s0.defaultOptions,this.options,t),[f,g,p,v]=Ri(a),m=this.formatSize(e.nodes||[],i),y=Math.ceil((e.nodes||[]).length/o);let b=u||(h-v-g-o*m[0])/(o-1),x=l||(d-f-p-y*m[1])/(y-1);return(x===1/0||x<0)&&(x=0),(b===1/0||b<0)&&(b=0),{nodes:((s?(r=e.nodes)===null||r===void 0?void 0:r.sort(s):cte(e))||[]).map((_,S)=>{const C=Math.floor(S/o),k=S%o,A=c?C%2===0?k:o-1-k:C%2===0?o-1-k:k,T=v+A*(m[0]+b)+m[0]/2,O=f+C*(m[1]+x)+m[1]/2;return{id:_.id,style:{x:T,y:O}}})}})}}s0.defaultOptions={padding:0,cols:5,clockwise:!0};function cte(n){const{nodes:e=[],edges:t=[]}=n,r={},i={};e.forEach(o=>{r[o.id]=0,i[o.id]=[]}),t.forEach(o=>{r[o.target]++,i[o.source].push(o.target)});const a=[],s=[];for(e.forEach(o=>{r[o.id]===0&&a.push(o.id)});a.length>0;){const o=a.shift(),u=e.find(l=>l.id===o);s.push(u),i[o].forEach(l=>{r[l]--,r[l]===0&&a.push(l)})}return s}const hte=["rgb(158, 1, 66)","rgb(213, 62, 79)","rgb(244, 109, 67)","rgb(253, 174, 97)","rgb(254, 224, 139)","rgb(255, 255, 191)","rgb(230, 245, 152)","rgb(171, 221, 164)","rgb(102, 194, 165)","rgb(50, 136, 189)","rgb(94, 79, 162)"],dte=["rgb(78, 121, 167)","rgb(242, 142, 44)","rgb(225, 87, 89)","rgb(118, 183, 178)","rgb(89, 161, 79)","rgb(237, 201, 73)","rgb(175, 122, 161)","rgb(255, 157, 167)","rgb(156, 117, 95)","rgb(186, 176, 171)"],fte=["rgb(255, 245, 235)","rgb(254, 230, 206)","rgb(253, 208, 162)","rgb(253, 174, 107)","rgb(253, 141, 60)","rgb(241, 105, 19)","rgb(217, 72, 1)","rgb(166, 54, 3)","rgb(127, 39, 4)"],gte=["rgb(247, 252, 245)","rgb(229, 245, 224)","rgb(199, 233, 192)","rgb(161, 217, 155)","rgb(116, 196, 118)","rgb(65, 171, 93)","rgb(35, 139, 69)","rgb(0, 109, 44)","rgb(0, 68, 27)"],pte=["rgb(247, 251, 255)","rgb(222, 235, 247)","rgb(198, 219, 239)","rgb(158, 202, 225)","rgb(107, 174, 214)","rgb(66, 146, 198)","rgb(33, 113, 181)","rgb(8, 81, 156)","rgb(8, 48, 107)"];class wn extends gx{}function _u(n,e=!0,t){const r=document.createElement("div");return r.setAttribute("class",`g6-${n}`),Object.assign(r.style,{position:"absolute",display:"block"}),e&&Object.assign(r.style,{position:"unset",gridArea:"1 / 1 / 2 / 2",inset:"0px",height:"100%",width:"100%",overflow:"hidden",pointerEvents:"none"}),t&&Object.assign(r.style,t),r}function t2(n,e="div",t={},r="",i=document.body){const a=document.getElementById(n);a&&a.remove();const s=document.createElement(e);return s.innerHTML=r,s.id=n,Object.assign(s.style,t),i.appendChild(s),s}var vte=globalThis&&globalThis.__awaiter||function(n,e,t,r){function i(a){return a instanceof t?a:new t(function(s){s(a)})}return new(t||(t=Promise))(function(a,s){function o(c){try{l(r.next(c))}catch(h){s(h)}}function u(c){try{l(r.throw(c))}catch(h){s(h)}}function l(c){c.done?a(c.value):i(c.value).then(o,u)}l((r=r.apply(n,e||[])).next())})};class o0 extends wn{constructor(e,t){super(e,Object.assign({},o0.defaultOptions,t)),this.$element=_u("background"),this.context.canvas.getContainer().prepend(this.$element),this.update(t)}update(e){const t=Object.create(null,{update:{get:()=>super.update}});return vte(this,void 0,void 0,function*(){t.update.call(this,e),Object.assign(this.$element.style,K2(this.options,["key","type"]))})}destroy(){super.destroy(),this.$element.remove()}}o0.defaultOptions={transition:"background 0.5s",backgroundSize:"cover",zIndex:"-1"};function aw(n,e,t,r,i,a){const s=n,o=e,u=t-s,l=r-o;let c=i-s,h=a-o,d=c*u+h*l,f=0;d<=0?f=0:(c=u-c,h=l-h,d=c*u+h*l,d<=0?f=0:f=d*d/(u*u+l*l));const g=c*c+h*h-f;return g<0?0:g}function Ya(n,e,t,r){return(n-t)*(n-t)+(e-r)*(e-r)}function wA(n,e,t,r,i){return Ya(n,e,t,r)<i*i}function mte(n){if(!Number.isFinite(n))return t=>t;if(n===0)return Math.round;const e=Math.pow(10,n);return t=>Math.round(t*e)/e}function A8(n){const e=Math.min(n.x1,n.x2),t=Math.max(n.x1,n.x2),r=Math.min(n.y1,n.y2),i=Math.max(n.y1,n.y2);return{x:e,y:r,x2:t,y2:i,width:t-e,height:i-r}}class on{constructor(e,t,r,i){this.x1=e,this.y1=t,this.x2=r,this.y2=i}equals(e){return this.x1===e.x1&&this.y1===e.y1&&this.x2===e.x2&&this.y2===e.y2}draw(e){e.moveTo(this.x1,this.y1),e.lineTo(this.x2,this.y2)}toString(){return`Line(from=(${this.x1},${this.y1}),to=(${this.x2},${this.y2}))`}static from(e){return new on(e.x1,e.y1,e.x2,e.y2)}cuts(e,t){if(this.y1===this.y2||t<this.y1&&t<=this.y2||t>this.y1&&t>=this.y2||e>this.x1&&e>=this.x2)return!1;if(e<this.x1&&e<=this.x2)return!0;const r=this.x1+(t-this.y1)*(this.x2-this.x1)/(this.y2-this.y1);return e<=r}distSquare(e,t){return aw(this.x1,this.y1,this.x2,this.y2,e,t)}ptClose(e,t,r){if(this.x1<this.x2){if(e<this.x1-r||e>this.x2+r)return!1}else if(e<this.x2-r||e>this.x1+r)return!1;if(this.y1<this.y2){if(t<this.y1-r||t>this.y2+r)return!1}else if(t<this.y2-r||t>this.y1+r)return!1;return!0}}var kt;(function(n){n[n.POINT=1]="POINT",n[n.PARALLEL=2]="PARALLEL",n[n.COINCIDENT=3]="COINCIDENT",n[n.NONE=4]="NONE"})(kt||(kt={}));class _y{constructor(e,t=0,r=0){this.state=e,this.x=t,this.y=r}}function yh(n,e){const t=(e.x2-e.x1)*(n.y1-e.y1)-(e.y2-e.y1)*(n.x1-e.x1),r=(n.x2-n.x1)*(n.y1-e.y1)-(n.y2-n.y1)*(n.x1-e.x1),i=(e.y2-e.y1)*(n.x2-n.x1)-(e.x2-e.x1)*(n.y2-n.y1);if(i){const a=t/i,s=r/i;return 0<=a&&a<=1&&0<=s&&s<=1?new _y(kt.POINT,n.x1+a*(n.x2-n.x1),n.y1+a*(n.y2-n.y1)):new _y(kt.NONE)}return new _y(t===0||r===0?kt.COINCIDENT:kt.PARALLEL)}function T8(n,e){const t=(e.x2-e.x1)*(n.y1-e.y1)-(e.y2-e.y1)*(n.x1-e.x1),r=(n.x2-n.x1)*(n.y1-e.y1)-(n.y2-n.y1)*(n.x1-e.x1),i=(e.y2-e.y1)*(n.x2-n.x1)-(e.x2-e.x1)*(n.y2-n.y1);if(i){const a=t/i,s=r/i;if(0<=a&&a<=1&&0<=s&&s<=1)return a}return Number.POSITIVE_INFINITY}function yte(n,e){function t(i,a,s,o){let u=T8(e,new on(i,a,s,o));return u=Math.abs(u-.5),u>=0&&u<=1?1:0}let r=t(n.x,n.y,n.x2,n.y);return r+=t(n.x,n.y,n.x,n.y2),r>1||(r+=t(n.x,n.y2,n.x2,n.y2),r>1)?!0:(r+=t(n.x2,n.y,n.x2,n.y2),r>0)}var Ct;(function(n){n[n.LEFT=0]="LEFT",n[n.TOP=1]="TOP",n[n.RIGHT=2]="RIGHT",n[n.BOTTOM=3]="BOTTOM"})(Ct||(Ct={}));function Wh(n,e,t){const r=new Set;return n.width<=0?(r.add(Ct.LEFT),r.add(Ct.RIGHT)):e<n.x?r.add(Ct.LEFT):e>n.x+n.width&&r.add(Ct.RIGHT),n.height<=0?(r.add(Ct.TOP),r.add(Ct.BOTTOM)):t<n.y?r.add(Ct.TOP):t>n.y+n.height&&r.add(Ct.BOTTOM),r}function O8(n,e){let t=e.x1,r=e.y1;const i=e.x2,a=e.y2,s=Array.from(Wh(n,i,a));if(s.length===0)return!0;let o=Wh(n,t,r);for(;o.size!==0;){for(const u of s)if(o.has(u))return!1;if(o.has(Ct.RIGHT)||o.has(Ct.LEFT)){let u=n.x;o.has(Ct.RIGHT)&&(u+=n.width),r=r+(u-t)*(a-r)/(i-t),t=u}else{let u=n.y;o.has(Ct.BOTTOM)&&(u+=n.height),t=t+(u-r)*(i-t)/(a-r),r=u}o=Wh(n,t,r)}return!0}function bte(n,e){let t=Number.POSITIVE_INFINITY,r=0;function i(a,s,o,u){let l=T8(e,new on(a,s,o,u));l=Math.abs(l-.5),l>=0&&l<=1&&(r++,l<t&&(t=l))}return i(n.x,n.y,n.x2,n.y),i(n.x,n.y,n.x,n.y2),r>1||(i(n.x,n.y2,n.x2,n.y2),r>1)?t:(i(n.x2,n.y,n.x2,n.y2),r===0?-1:t)}function xte(n,e){let t=0;const r=yh(n,new on(e.x,e.y,e.x2,e.y));t+=r.state===kt.POINT?1:0;const i=yh(n,new on(e.x,e.y,e.x,e.y2));t+=i.state===kt.POINT?1:0;const a=yh(n,new on(e.x,e.y2,e.x2,e.y2));t+=a.state===kt.POINT?1:0;const s=yh(n,new on(e.x2,e.y,e.x2,e.y2));return t+=s.state===kt.POINT?1:0,{top:r,left:i,bottom:a,right:s,count:t}}class Cn{constructor(e,t,r,i){this.x=e,this.y=t,this.width=r,this.height=i}get x2(){return this.x+this.width}get y2(){return this.y+this.height}get cx(){return this.x+this.width/2}get cy(){return this.y+this.height/2}get radius(){return Math.max(this.width,this.height)/2}static from(e){return new Cn(e.x,e.y,e.width,e.height)}equals(e){return this.x===e.x&&this.y===e.y&&this.width===e.width&&this.height===e.height}clone(){return new Cn(this.x,this.y,this.width,this.height)}add(e){const t=Math.min(this.x,e.x),r=Math.min(this.y,e.y),i=Math.max(this.x2,e.x+e.width),a=Math.max(this.y2,e.y+e.height);this.x=t,this.y=r,this.width=i-t,this.height=a-r}addPoint(e){const t=Math.min(this.x,e.x),r=Math.min(this.y,e.y),i=Math.max(this.x2,e.x),a=Math.max(this.y2,e.y);this.x=t,this.y=r,this.width=i-t,this.height=a-r}toString(){return`Rectangle[x=${this.x}, y=${this.y}, w=${this.width}, h=${this.height}]`}draw(e){e.rect(this.x,this.y,this.width,this.height)}containsPt(e,t){return e>=this.x&&e<=this.x2&&t>=this.y&&t<=this.y2}get area(){return this.width*this.height}intersects(e){return this.area<=0||e.width<=0||e.height<=0?!1:e.x+e.width>this.x&&e.y+e.height>this.y&&e.x<this.x2&&e.y<this.y2}distSquare(e,t){if(this.containsPt(e,t))return 0;const r=Wh(this,e,t);return r.has(Ct.TOP)?r.has(Ct.LEFT)?Ya(e,t,this.x,this.y):r.has(Ct.RIGHT)?Ya(e,t,this.x2,this.y):(this.y-t)*(this.y-t):r.has(Ct.BOTTOM)?r.has(Ct.LEFT)?Ya(e,t,this.x,this.y2):r.has(Ct.RIGHT)?Ya(e,t,this.x2,this.y2):(t-this.y2)*(t-this.y2):r.has(Ct.LEFT)?(this.x-e)*(this.x-e):r.has(Ct.RIGHT)?(e-this.x2)*(e-this.x2):0}}function wte(n){if(n.length===0)return null;const e=n[0],t=new Cn(e.x,e.y,0,0);for(const r of n)t.addPoint(r);return t}class Bd{constructor(e,t,r){this.cx=e,this.cy=t,this.radius=r}get x(){return this.cx-this.radius}get x2(){return this.cx+this.radius}get width(){return this.radius*2}get y(){return this.cy-this.radius}get y2(){return this.cy+this.radius}get height(){return this.radius*2}static from(e){return new Bd(e.cx,e.cy,e.radius)}containsPt(e,t){return Ya(this.cx,this.cy,e,t)<this.radius*this.radius}distSquare(e,t){const r=Ya(this.cx,this.cy,e,t);if(r<this.radius*this.radius)return 0;const i=Math.sqrt(r)-this.radius;return i*i}draw(e){e.ellipse(this.cx,this.cy,this.radius,this.radius,0,0,Math.PI*2)}}class Vs{constructor(e,t=0,r=0,i=0,a=0,s=10,o=10,u=new Float32Array(Math.max(0,s*o)).fill(0)){this.pixelGroup=e,this.i=t,this.j=r,this.pixelX=i,this.pixelY=a,this.width=s,this.height=o,this.area=u}createSub(e,t){return new Vs(this.pixelGroup,e.x,e.y,t.x,t.y,e.width,e.height)}static fromPixelRegion(e,t){return new Vs(t,0,0,e.x,e.y,Math.ceil(e.width/t),Math.ceil(e.height/t))}copy(e,t){return new Vs(this.pixelGroup,this.scaleX(t.x),this.scaleY(t.y),t.x,t.y,e.width,e.height,e.area)}boundX(e){return e<this.i?this.i:e>=this.width?this.width-1:e}boundY(e){return e<this.j?this.j:e>=this.height?this.height-1:e}scaleX(e){return this.boundX(Math.floor((e-this.pixelX)/this.pixelGroup))}scaleY(e){return this.boundY(Math.floor((e-this.pixelY)/this.pixelGroup))}scale(e){const t=this.scaleX(e.x),r=this.scaleY(e.y),i=this.boundX(Math.ceil((e.x+e.width-this.pixelX)/this.pixelGroup)),a=this.boundY(Math.ceil((e.y+e.height-this.pixelY)/this.pixelGroup)),s=i-t,o=a-r;return new Cn(t,r,s,o)}invertScaleX(e){return Math.round(e*this.pixelGroup+this.pixelX)}invertScaleY(e){return Math.round(e*this.pixelGroup+this.pixelY)}addPadding(e,t){const r=Math.ceil(t/this.pixelGroup),i=this.boundX(e.x-r),a=this.boundY(e.y-r),s=this.boundX(e.x2+r),o=this.boundY(e.y2+r),u=s-i,l=o-a;return new Cn(i,a,u,l)}get(e,t){return e<0||t<0||e>=this.width||t>=this.height?Number.NaN:this.area[e+t*this.width]}inc(e,t,r){e<0||t<0||e>=this.width||t>=this.height||(this.area[e+t*this.width]+=r)}set(e,t,r){e<0||t<0||e>=this.width||t>=this.height||(this.area[e+t*this.width]=r)}incArea(e,t){if(e.width<=0||e.height<=0||t===0)return;const r=this.width,i=e.width,a=Math.max(0,e.i),s=Math.max(0,e.j),o=Math.min(e.i+e.width,r),u=Math.min(e.j+e.height,this.height);if(!(u<=0||o<=0||a>=r||u>=this.height))for(let l=s;l<u;l++){const c=(l-e.j)*i,h=l*r;for(let d=a;d<o;d++){const f=e.area[d-e.i+c];f!==0&&(this.area[d+h]+=t*f)}}}fill(e){this.area.fill(e)}fillArea(e,t){const r=e.x+e.y*this.width;for(let i=0;i<e.height;i++){const a=r+i*this.width;this.area.fill(t,a,a+e.width)}}fillHorizontalLine(e,t,r,i){const a=e+t*this.width;this.area.fill(i,a,a+r)}fillVerticalLine(e,t,r,i){const a=e+t*this.width;for(let s=0;s<r;s++)this.area[a+s*this.width]=i}clear(){this.area.fill(0)}toString(){let e="";for(let t=0;t<this.height;t++){const r=t*this.width;for(let i=0;i<this.width;i++){const a=this.area[r+i];e+=a.toFixed(1).padStart(6),e+=" "}e+=`
`}return e}draw(e,t=!0){if(this.width<=0||this.height<=0)return;e.save(),t&&e.translate(this.pixelX,this.pixelY);const r=this.area.reduce((s,o)=>Math.min(s,o),Number.POSITIVE_INFINITY),i=this.area.reduce((s,o)=>Math.max(s,o),Number.NEGATIVE_INFINITY),a=s=>(s-r)/(i-r);e.scale(this.pixelGroup,this.pixelGroup);for(let s=0;s<this.width;s++)for(let o=0;o<this.height;o++){const u=this.area[s+o*this.width];e.fillStyle=`rgba(0, 0, 0, ${a(u)})`,e.fillRect(s,o,1,1)}e.restore()}drawThreshold(e,t,r=!0){if(!(this.width<=0||this.height<=0)){e.save(),r&&e.translate(this.pixelX,this.pixelY),e.scale(this.pixelGroup,this.pixelGroup);for(let i=0;i<this.width;i++)for(let a=0;a<this.height;a++){const s=this.area[i+a*this.width];e.fillStyle=s>t?"black":"white",e.fillRect(i,a,1,1)}e.restore()}}}function M8(n,e){const t=r=>({x:r.x-e,y:r.y-e,width:r.width+2*e,height:r.height+2*e});return Array.isArray(n)?n.map(t):t(n)}function EA(n,e,t){return P8(Object.assign(A8(n),{distSquare:(r,i)=>aw(n.x1,n.y1,n.x2,n.y2,r,i)}),e,t)}function P8(n,e,t){const r=M8(n,t),i=e.scale(r),a=e.createSub(i,r);return Ete(a,e,t,(s,o)=>n.distSquare(s,o)),a}function Ete(n,e,t,r){const i=t*t;for(let a=0;a<n.height;a++)for(let s=0;s<n.width;s++){const o=e.invertScaleX(n.i+s),u=e.invertScaleY(n.j+a),l=r(o,u);if(l===0){n.set(s,a,i);continue}if(l<i){const c=t-Math.sqrt(l);n.set(s,a,c*c)}}return n}function _te(n,e,t){const r=e.scale(n),i=e.addPadding(r,t),a=e.createSub(i,{x:n.x-t,y:n.y-t}),s=r.x-i.x,o=r.y-i.y,u=i.x2-r.x2,l=i.y2-r.y2,c=i.width-s-u,h=i.height-o-l,d=t*t;a.fillArea({x:s,y:o,width:c+1,height:h+1},d);const f=[0],g=Math.max(o,s,u,l);{const y=e.invertScaleX(r.x+r.width/2);for(let b=1;b<g;b++){const x=e.invertScaleY(r.y-b),w=n.distSquare(y,x);if(w<d){const E=t-Math.sqrt(w);f.push(E*E)}else break}}const p=[],v=Math.max(s,u),m=Math.max(o,u);for(let y=1;y<v;y++){const b=e.invertScaleX(r.x-y),x=[];for(let w=1;w<m;w++){const E=e.invertScaleY(r.y-w),_=n.distSquare(b,E);if(_<d){const S=t-Math.sqrt(_);x.push(S*S)}else x.push(0)}p.push(x)}for(let y=1;y<Math.min(o,f.length);y++){const b=f[y];a.fillHorizontalLine(s,o-y,c+1,b)}for(let y=1;y<Math.min(l,f.length);y++){const b=f[y];a.fillHorizontalLine(s,o+h+y,c+1,b)}for(let y=1;y<Math.min(s,f.length);y++){const b=f[y];a.fillVerticalLine(s-y,o,h+1,b)}for(let y=1;y<Math.min(l,f.length);y++){const b=f[y];a.fillVerticalLine(s+c+y,o,h+1,b)}for(let y=1;y<s;y++){const b=p[y-1],x=s-y;for(let w=1;w<o;w++)a.set(x,o-w,b[w-1]);for(let w=1;w<l;w++)a.set(x,o+h+w,b[w-1])}for(let y=1;y<u;y++){const b=p[y-1],x=s+c+y;for(let w=1;w<o;w++)a.set(x,o-w,b[w-1]);for(let w=1;w<l;w++)a.set(x,o+h+w,b[w-1])}return a}function ct(n,e){return{x:n,y:e}}function Ste(n,e,t,r){if(n.length===0)return[];const i=Ote(n);return i.map((a,s)=>{const o=i.slice(0,s);return kte(e,a,o,t,r)}).flat()}function kte(n,e,t,r,i){const a=ct(e.cx,e.cy),s=Tte(a,t,n);if(s==null)return[];const o=new on(a.x,a.y,s.cx,s.cy),u=Cte(o,n,r,i);return Ate(u,n)}function Cte(n,e,t,r){const i=[],a=[];a.push(n);let s=!0;for(let o=0;o<t&&s;o++)for(s=!1;!s&&a.length>0;){const u=a.pop(),l=N8(e,u),c=l?xte(u,l):null;if(!l||!c||c.count!==2){s||i.push(u);continue}let h=r,d=xh(l,h,c,!0),f=_a(d,a)||_a(d,i),g=bh(d,e);for(;!f&&g&&h>=1;)h/=1.5,d=xh(l,h,c,!0),f=_a(d,a)||_a(d,i),g=bh(d,e);if(d&&!f&&!g&&(a.push(new on(u.x1,u.y1,d.x,d.y)),a.push(new on(d.x,d.y,u.x2,u.y2)),s=!0),s)continue;h=r,d=xh(l,h,c,!1);let p=_a(d,a)||_a(d,i);for(g=bh(d,e);!p&&g&&h>=1;)h/=1.5,d=xh(l,h,c,!1),p=_a(d,a)||_a(d,i),g=bh(d,e);d&&!p&&(a.push(new on(u.x1,u.y1,d.x,d.y)),a.push(new on(d.x,d.y,u.x2,u.y2)),s=!0),s||i.push(u)}for(;a.length>0;)i.push(a.pop());return i}function Ate(n,e){const t=[];for(;n.length>0;){const r=n.pop();if(n.length===0){t.push(r);break}const i=n.pop(),a=new on(r.x1,r.y1,i.x2,i.y2);N8(e,a)?(t.push(r),n.push(i)):n.push(a)}return t}function Tte(n,e,t){let r=Number.POSITIVE_INFINITY;return e.reduce((i,a)=>{const s=Ya(n.x,n.y,a.cx,a.cy);if(s>r)return i;const o=new on(n.x,n.y,a.cx,a.cy),u=Mte(t,o);return s*(u+1)*(u+1)<r&&(i=a,r=s*(u+1)*(u+1)),i},null)}function Ote(n){if(n.length<2)return n;let e=0,t=0;return n.forEach(r=>{e+=r.cx,t+=r.cy}),e/=n.length,t/=n.length,n.map(r=>{const i=e-r.cx,a=t-r.cy,s=i*i+a*a;return[r,s]}).sort((r,i)=>r[1]-i[1]).map(r=>r[0])}function bh(n,e){return e.some(t=>t.containsPt(n.x,n.y))}function _a(n,e){return e.some(t=>!!(wA(t.x1,t.y1,n.x,n.y,.001)||wA(t.x2,t.y2,n.x,n.y,.001)))}function N8(n,e){let t=Number.POSITIVE_INFINITY,r=null;for(const i of n){if(!O8(i,e))continue;const a=bte(i,e);a>=0&&a<t&&(r=i,t=a)}return r}function Mte(n,e){return n.reduce((t,r)=>O8(r,e)&&yte(r,e)?t+1:t,0)}function xh(n,e,t,r){const i=t.top,a=t.left,s=t.bottom,o=t.right;if(r){if(a.state===kt.POINT){if(i.state===kt.POINT)return ct(n.x-e,n.y-e);if(s.state===kt.POINT)return ct(n.x-e,n.y2+e);const d=n.width*n.height;return n.width*((a.y-n.y+(o.y-n.y))*.5)<d*.5?a.y>o.y?ct(n.x-e,n.y-e):ct(n.x2+e,n.y-e):a.y<o.y?ct(n.x-e,n.y2+e):ct(n.x2+e,n.y2+e)}if(o.state===kt.POINT){if(i.state===kt.POINT)return ct(n.x2+e,n.y-e);if(s.state===kt.POINT)return ct(n.x2+e,n.y2+e)}const c=n.height*n.width;return n.height*((i.x-n.x+(o.x-n.x))*.5)<c*.5?i.x>s.x?ct(n.x-e,n.y-e):ct(n.x-e,n.y2+e):i.x<s.x?ct(n.x2+e,n.y-e):ct(n.x2+e,n.y2+e)}if(a.state===kt.POINT){if(i.state===kt.POINT)return ct(n.x2+e,n.y2+e);if(s.state===kt.POINT)return ct(n.x2+e,n.y-e);const c=n.height*n.width;return n.width*((a.y-n.y+(o.y-n.y))*.5)<c*.5?a.y>o.y?ct(n.x2+e,n.y2+e):ct(n.x-e,n.y2+e):a.y<o.y?ct(n.x2+e,n.y-e):ct(n.x-e,n.y-e)}if(o.state===kt.POINT){if(i.state===kt.POINT)return ct(n.x-e,n.y2+e);if(s.state===kt.POINT)return ct(n.x-e,n.y-e)}const u=n.height*n.width;return n.height*((i.x-n.x+(o.x-n.x))*.5)<u*.5?i.x>s.x?ct(n.x2+e,n.y2+e):ct(n.x2+e,n.y-e):i.x<s.x?ct(n.x-e,n.y2+e):ct(n.x-e,n.y-e)}function Pte(n,e,t,r){if(!(n.closed?t<n.length:t<n.length-1))return!1;const a=n.get(e),s=n.get(t+1);for(let o=e+1;o<=t;o++){const u=n.get(o);if(aw(a.x,a.y,s.x,s.y,u.x,u.y)>r)return!1}return!0}function Nte(n=0){return e=>{if(n<0||e.length<3)return e;const t=[];let r=0;const i=n*n;for(;r<e.length;){let a=r+1;for(;Pte(e,r,a,i);)a++;t.push(e.get(r)),r=a}return new Su(t)}}function Dte(n,e){switch(n){case-2:return(((-e+3)*e-3)*e+1)/6;case-1:return((3*e-6)*e*e+4)/6;case 0:return(((-3*e+3)*e+3)*e+1)/6;case 1:return e*e*e/6;default:throw new Error("unknown error")}}function Rte(n=6){function a(s,o,u){let l=0,c=0;for(let h=-2;h<=1;h++){const d=s.get(o+h),f=Dte(h,u);l+=f*d.x,c+=f*d.y}return{x:l,y:c}}return s=>{if(s.length<3)return s;const o=[],u=s.closed,l=s.length+3-1+(u?0:2);o.push(a(s,2-(u?0:2),0));for(let c=2-(u?0:2);c<l;c++)for(let h=1;h<=n;h++)o.push(a(s,c,h/n));return new Su(o)}}function Lte(n=8){return e=>{let t=n,r=e.length;if(t>1)for(r=Math.floor(e.length/t);r<3&&t>1;)t-=1,r=Math.floor(e.length/t);const i=[];for(let a=0,s=0;s<r;s++,a+=t)i.push(e.get(a));return new Su(i)}}class Su{constructor(e=[],t=!0){this.points=e,this.closed=t}get(e){const t=e,r=this.points.length;return e<0?this.closed?this.get(e+r):this.points[0]:e>=r?this.closed?this.get(e-r):this.points[r-1]:this.points[t]}get length(){return this.points.length}toString(e=1/0){const t=this.points;if(t.length===0)return"";const r=typeof e=="function"?e:mte(e);let i="M";for(const a of t)i+=`${r(a.x)},${r(a.y)} L`;return i=i.slice(0,-1),this.closed&&(i+=" Z"),i}draw(e){const t=this.points;if(t.length!==0){e.beginPath(),e.moveTo(t[0].x,t[0].y);for(const r of t)e.lineTo(r.x,r.y);this.closed&&e.closePath()}}sample(e){return Lte(e)(this)}simplify(e){return Nte(e)(this)}bSplines(e){return Rte(e)(this)}apply(e){return e(this)}containsElements(e){const t=wte(this.points);return t?e.every(r=>t.containsPt(r.cx,r.cy)&&this.withinArea(r.cx,r.cy)):!1}withinArea(e,t){if(this.length===0)return!1;let r=0;const i=this.points[0],a=new on(i.x,i.y,i.x,i.y);for(let s=1;s<this.points.length;s++){const o=this.points[s];a.x1=a.x2,a.y1=a.y2,a.x2=o.x,a.y2=o.y,a.cuts(e,t)&&r++}return a.x1=a.x2,a.y1=a.y2,a.x2=i.x,a.y2=i.y,a.cuts(e,t)&&r++,r%2===1}}class Ite{constructor(e=0){this.count=0,this.arr=[],this.set=new Set,this.arr.length=e}add(e){this.set.add(`${e.x}x${e.y}`),this.arr[this.count++]=e}contains(e){return this.set.has(`${e.x}x${e.y}`)}isFirst(e){if(this.count===0)return!1;const t=this.arr[0];return t!=null&&t.x===e.x&&t.y===e.y}path(){return new Su(this.arr.slice(0,this.count))}clear(){this.set.clear(),this.count=0}get(e){return this.arr[e]}get length(){return this.count}}const Ru=0,wh=1,Eh=2,Sy=3;function Fte(n,e){const t=(Math.floor(n.width)+Math.floor(n.height))*2,r=new Ite(t);function i(u,l,c,h){const d=n.get(u,l);return Number.isNaN(d)?Number.NaN:d>e?c+h:c}function a(u,l){let c=Ru;return c=i(u,l,c,1),c=i(u+1,l,c,2),c=i(u,l+1,c,4),c=i(u+1,l+1,c,8),Number.isNaN(c)?-1:c}let s=wh;function o(u,l){let c=u,h=l,d=n.invertScaleX(c),f=n.invertScaleY(h);for(let g=0;g<n.width*n.height;g++){const p={x:d,y:f};if(r.contains(p)){if(r.isFirst(p))return!0}else r.add(p);const v=a(c,h);switch(v){case-1:return!0;case 0:case 3:case 2:case 7:s=Eh;break;case 12:case 14:case 4:s=Sy;break;case 6:s=s===Ru?Sy:Eh;break;case 1:case 13:case 5:s=Ru;break;case 9:s=s===Eh?Ru:wh;break;case 10:case 8:case 11:s=wh;break;default:return console.warn("Marching squares invalid state: "+v),!0}switch(s){case Ru:h--,f-=n.pixelGroup;break;case wh:h++,f+=n.pixelGroup;break;case Sy:c--,d-=n.pixelGroup;break;case Eh:c++,d+=n.pixelGroup;break;default:return console.warn("Marching squares invalid state: "+v),!0}}return!0}for(let u=0;u<n.width;u++)for(let l=0;l<n.height;l++){if(n.get(u,l)<=e)continue;const c=a(u,l);if(!(c<0||c===15)&&o(u,l))return r.path()}return null}const u0={maxRoutingIterations:100,maxMarchingIterations:20,pixelGroup:4,edgeR0:10,edgeR1:20,nodeR0:15,nodeR1:50,morphBuffer:10,threshold:1,memberInfluenceFactor:1,edgeInfluenceFactor:1,nonMemberInfluenceFactor:-.8,virtualEdges:!0};function dl(n){return n!=null&&typeof n.radius=="number"}function _A(n,e){if(dl(n)!==dl(e))return!1;if(dl(n)){const r=e;return n.cx===r.cx&&n.cy===r.cy&&n.radius===r.radius}const t=e;return n.x===t.x&&n.y===t.y&&n.width===t.width&&n.height===t.height}var Vr;(function(n){n[n.MEMBERS=0]="MEMBERS",n[n.NON_MEMBERS=1]="NON_MEMBERS",n[n.EDGES=2]="EDGES"})(Vr||(Vr={}));let SA=class{constructor(e={}){this.dirty=new Set,this.members=[],this.nonMembers=[],this.virtualEdges=[],this.edges=[],this.activeRegion=new Cn(0,0,0,0),this.potentialArea=new Vs(1,0,0,0,0,0,0),this.o=Object.assign({},u0,e)}pushMember(...e){if(e.length!==0){this.dirty.add(Vr.MEMBERS);for(const t of e)this.members.push({raw:t,obj:dl(t)?Bd.from(t):Cn.from(t),area:null})}}removeMember(e){const t=this.members.findIndex(r=>_A(r.raw,e));return t<0?!1:(this.members.splice(t,1),this.dirty.add(Vr.MEMBERS),!0)}removeNonMember(e){const t=this.nonMembers.findIndex(r=>_A(r.raw,e));return t<0?!1:(this.nonMembers.splice(t,1),this.dirty.add(Vr.NON_MEMBERS),!0)}removeEdge(e){const t=this.edges.findIndex(r=>r.obj.equals(e));return t<0?!1:(this.edges.splice(t,1),this.dirty.add(Vr.NON_MEMBERS),!0)}pushNonMember(...e){if(e.length!==0){this.dirty.add(Vr.NON_MEMBERS);for(const t of e)this.nonMembers.push({raw:t,obj:dl(t)?Bd.from(t):Cn.from(t),area:null})}}pushEdge(...e){if(e.length!==0){this.dirty.add(Vr.EDGES);for(const t of e)this.edges.push({raw:t,obj:on.from(t),area:null})}}update(){const e=this.dirty.has(Vr.MEMBERS),t=this.dirty.has(Vr.NON_MEMBERS);let r=this.dirty.has(Vr.EDGES);this.dirty.clear();const i=this.members.map(l=>l.obj);if(this.o.virtualEdges&&(e||t)){const l=this.nonMembers.map(d=>d.obj),c=Ste(i,l,this.o.maxRoutingIterations,this.o.morphBuffer),h=new Map(this.virtualEdges.map(d=>[d.obj.toString(),d.area]));this.virtualEdges=c.map(d=>{var f;return{raw:d,obj:d,area:(f=h.get(d.toString()))!==null&&f!==void 0?f:null}}),r=!0}let a=!1;if(e||r){const l=this.virtualEdges.concat(this.edges).map(f=>f.obj),c=zte(i,l),h=Math.max(this.o.edgeR1,this.o.nodeR1)+this.o.morphBuffer,d=Cn.from(M8(c,h));d.equals(this.activeRegion)||(a=!0,this.activeRegion=d)}if(a){const l=Math.ceil(this.activeRegion.width/this.o.pixelGroup),c=Math.ceil(this.activeRegion.height/this.o.pixelGroup);this.activeRegion.x!==this.potentialArea.pixelX||this.activeRegion.y!==this.potentialArea.pixelY?(this.potentialArea=Vs.fromPixelRegion(this.activeRegion,this.o.pixelGroup),this.members.forEach(h=>h.area=null),this.nonMembers.forEach(h=>h.area=null),this.edges.forEach(h=>h.area=null),this.virtualEdges.forEach(h=>h.area=null)):(l!==this.potentialArea.width||c!==this.potentialArea.height)&&(this.potentialArea=Vs.fromPixelRegion(this.activeRegion,this.o.pixelGroup))}const s=new Map,o=l=>{if(l.area){const c=`${l.obj.width}x${l.obj.height}x${l.obj instanceof Cn?"R":"C"}`;s.set(c,l.area)}},u=l=>{if(l.area)return;const c=`${l.obj.width}x${l.obj.height}x${l.obj instanceof Cn?"R":"C"}`;if(s.has(c)){const d=s.get(c);l.area=this.potentialArea.copy(d,{x:l.obj.x-this.o.nodeR1,y:l.obj.y-this.o.nodeR1});return}const h=l.obj instanceof Cn?_te(l.obj,this.potentialArea,this.o.nodeR1):P8(l.obj,this.potentialArea,this.o.nodeR1);l.area=h,s.set(c,h)};this.members.forEach(o),this.nonMembers.forEach(o),this.members.forEach(u),this.nonMembers.forEach(l=>{this.activeRegion.intersects(l.obj)?u(l):l.area=null}),this.edges.forEach(l=>{l.area||(l.area=EA(l.obj,this.potentialArea,this.o.edgeR1))}),this.virtualEdges.forEach(l=>{l.area||(l.area=EA(l.obj,this.potentialArea,this.o.edgeR1))})}drawMembers(e){for(const t of this.members)t.obj.draw(e)}drawNonMembers(e){for(const t of this.nonMembers)t.obj.draw(e)}drawEdges(e){for(const t of this.edges)t.obj.draw(e)}drawPotentialArea(e,t=!0){this.potentialArea.draw(e,t)}compute(){if(this.members.length===0)return new Su([]);this.dirty.size>0&&this.update();const{o:e,potentialArea:t}=this,r=this.members.map(o=>o.area),i=this.virtualEdges.concat(this.edges).map(o=>o.area),a=this.nonMembers.filter(o=>o.area!=null).map(o=>o.area),s=this.members.map(o=>o.obj);return Bte(t,r,i,a,o=>o.containsElements(s),e)}};function Bte(n,e,t,r,i,a={}){const s=Object.assign({},u0,a);let o=s.threshold,u=s.memberInfluenceFactor,l=s.edgeInfluenceFactor,c=s.nonMemberInfluenceFactor;const h=(s.nodeR0-s.nodeR1)*(s.nodeR0-s.nodeR1),d=(s.edgeR0-s.edgeR1)*(s.edgeR0-s.edgeR1);for(let f=0;f<s.maxMarchingIterations;f++){if(n.clear(),u!==0){const p=u/h;for(const v of e)n.incArea(v,p)}if(l!==0){const p=l/d;for(const v of t)n.incArea(v,p)}if(c!==0){const p=c/h;for(const v of r)n.incArea(v,p)}const g=Fte(n,o);if(g&&i(g))return g;if(o*=.95,f<=s.maxMarchingIterations*.5)u*=1.2,l*=1.2;else if(c!==0&&r.length>0)c*=.8;else break}return new Su([])}function zte(n,e){if(n.length===0)return new Cn(0,0,0,0);const t=Cn.from(n[0]);for(const r of n)t.add(r);for(const r of e)t.add(A8(r));return t}var $te=globalThis&&globalThis.__rest||function(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(n);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(t[r[i]]=n[r[i]]);return t};class l0 extends wn{constructor(e,t){super(e,jn({},l0.defaultOptions,t)),this.members=new Map,this.avoidMembers=new Map,this.bubbleSetOptions={},this.drawBubbleSets=()=>{const{style:r,bubbleSetOptions:i}=this.parseOptions();Dt(this.bubbleSetOptions,i)||this.init(),this.bubbleSetOptions=Object.assign({},i);const a=Object.assign(Object.assign({},r),{d:this.getPath()});this.shape?this.shape.update(a):(this.shape=new ac({style:a}),this.context.canvas.appendChild(this.shape))},this.updateBubbleSetsPath=r=>{if(!this.shape)return;const i=z(r.data);[...this.options.members,...this.options.avoidMembers].includes(i)&&this.shape.update(Object.assign(Object.assign({},this.parseOptions().style),{d:this.getPath(i)}))},this.getPath=r=>{const{graph:i}=this.context,a=this.options.members,s=[...this.members.keys()],o=this.options.avoidMembers,u=[...this.avoidMembers.keys()];if(!r&&Dt(a,s)&&Dt(o,u))return this.path;const{enter:l=[],exit:c=[]}=es(s,a,v=>v),{enter:h=[],exit:d=[]}=es(u,o,v=>v);r&&(c.push(r),l.push(r));const f=(v,m,y)=>{v.forEach(b=>{const x=y?this.members:this.avoidMembers,w=y?"pushMember":"pushNonMember",E=y?"removeMember":"removeNonMember";if(m){let _;i.getElementType(b)==="edge"?([_]=qte(i,b),this.bubbleSets.pushEdge(_)):([_]=jte(i,b),this.bubbleSets[w](_)),x.set(b,_)}else{const _=x.get(b);_&&(i.getElementType(b)==="edge"?this.bubbleSets.removeEdge(_):this.bubbleSets[E](_),x.delete(b))}})};f(c,!1,!0),f(l,!0,!0),f(d,!1,!1),f(h,!0,!1);const p=this.bubbleSets.compute().sample(8).simplify(0).bSplines().simplify(0);return this.path=P4(p.points.map(pn)),this.path},this.bindEvents(),this.bubbleSets=new SA(this.options)}bindEvents(){this.context.graph.on(Z.AFTER_RENDER,this.drawBubbleSets),this.context.graph.on(Z.AFTER_ELEMENT_UPDATE,this.updateBubbleSetsPath)}init(){this.bubbleSets=new SA(this.options),this.members=new Map,this.avoidMembers=new Map}parseOptions(){const e=this.options,{type:t,key:r,members:i,avoidMembers:a}=e,s=$te(e,["type","key","members","avoidMembers"]),o=Object.keys(s).reduce((u,l)=>(l in u0?u.bubbleSetOptions[l]=s[l]:u.style[l]=s[l],u),{style:{},bubbleSetOptions:{}});return Object.assign({type:t,key:r,members:i,avoidMembers:a},o)}addMember(e){const t=Array.isArray(e)?e:[e];t.some(r=>this.options.avoidMembers.includes(r))&&(this.options.avoidMembers=this.options.avoidMembers.filter(r=>!t.includes(r))),this.options.members=[...new Set([...this.options.members,...t])],this.drawBubbleSets()}removeMember(e){const t=Array.isArray(e)?e:[e];this.options.members=this.options.members.filter(r=>!t.includes(r)),this.drawBubbleSets()}updateMember(e){this.options.members=se(e)?e(this.options.members):e,this.drawBubbleSets()}getMember(){return this.options.members}addAvoidMember(e){const t=Array.isArray(e)?e:[e];t.some(r=>this.options.members.includes(r))&&(this.options.members=this.options.members.filter(r=>!t.includes(r))),this.options.avoidMembers=[...new Set([...this.options.avoidMembers,...t])],this.drawBubbleSets()}removeAvoidMember(e){const t=Array.isArray(e)?e:[e];this.options.avoidMembers.some(r=>t.includes(r))&&(this.options.avoidMembers=this.options.avoidMembers.filter(r=>!t.includes(r)),this.drawBubbleSets())}updateAvoidMember(e){this.options.avoidMembers=Array.isArray(e)?e:[e],this.drawBubbleSets()}getAvoidMember(){return this.options.avoidMembers}destroy(){this.context.graph.off(Z.AFTER_RENDER,this.drawBubbleSets),this.context.graph.off(Z.AFTER_ELEMENT_UPDATE,this.updateBubbleSetsPath),this.shape.destroy(),super.destroy()}}l0.defaultOptions=Object.assign({members:[],avoidMembers:[],fill:"lightblue",fillOpacity:.2,stroke:"blue",strokeOpacity:.2},u0);const jte=(n,e)=>(Array.isArray(e)?e:[e]).map(r=>{const i=n.getElementRenderBounds(r);return new Cn(i.min[0],i.min[1],Li(i),Ii(i))}),qte=(n,e)=>(Array.isArray(e)?e:[e]).map(r=>{const i=n.getEdgeData(r),a=n.getElementPosition(i.source),s=n.getElementPosition(i.target);return on.from({x1:a[0],y1:a[1],x2:s[0],y2:s[1]})});function Gte(n){return`
    <ul class="g6-contextmenu-ul">
      ${n.map(e=>`<li  class="g6-contextmenu-li" value="${e.value}">${e.name}</li>`).join("")}
    </ul>
  `}const Wte=`
  .g6-contextmenu {
    font-size: 12px;
    background-color: rgba(255, 255, 255, 0.96);
    border-radius: 4px;
    overflow: hidden;
    box-shadow: rgba(0, 0, 0, 0.12) 0px 6px 12px 0px;
    transition: visibility 0.2s cubic-bezier(0.23, 1, 0.32, 1) 0s, left 0.4s cubic-bezier(0.23, 1, 0.32, 1) 0s, top 0.4s cubic-bezier(0.23, 1, 0.32, 1) 0s;
  }

  .g6-contextmenu-ul {
    max-width: 256px;
    min-width: 96px;
    list-style: none;
    padding: 0;
    margin: 0;
  }

  .g6-contextmenu-li {
    padding: 8px 12px;
    cursor: pointer;
    user-select: none;
  }

  .g6-contextmenu-li:hover {
    background-color: #f5f5f5;
    cursor: pointer;
  }
`;var kA=globalThis&&globalThis.__awaiter||function(n,e,t,r){function i(a){return a instanceof t?a:new t(function(s){s(a)})}return new(t||(t=Promise))(function(a,s){function o(c){try{l(r.next(c))}catch(h){s(h)}}function u(c){try{l(r.throw(c))}catch(h){s(h)}}function l(c){c.done?a(c.value):i(c.value).then(o,u)}l((r=r.apply(n,e||[])).next())})};class c0 extends wn{constructor(e,t){super(e,Object.assign({},c0.defaultOptions,t)),this.targetElement=null,this.onTriggerEvent=r=>{var i;(i=r.preventDefault)===null||i===void 0||i.call(r),this.show(r)},this.onMenuItemClick=r=>{const{onClick:i,trigger:a}=this.options;if(r.target instanceof HTMLElement&&r.target.className.includes("g6-contextmenu-li")){const s=r.target.getAttribute("value");i==null||i(s,r.target,this.targetElement),this.hide()}a!=="click"&&this.hide()},this.initElement(),this.update(t)}initElement(){this.$element=_u("contextmenu",!1,{zIndex:"99"});const{className:e}=this.options;e&&this.$element.classList.add(e),this.context.canvas.getContainer().appendChild(this.$element),t2("g6-contextmenu-css","style",{},Wte,document.head)}show(e){return kA(this,void 0,void 0,function*(){const{enable:t,offset:r}=this.options;if(typeof t=="function"&&!t(e)||!t){this.hide();return}const i=yield this.getDOMContent(e);i instanceof HTMLElement?(this.$element.innerHTML="",this.$element.appendChild(i)):this.$element.innerHTML=i;const a=this.context.graph.getCanvas().getContainer().getBoundingClientRect();this.$element.style.left=`${e.client.x-a.left+r[0]}px`,this.$element.style.top=`${e.client.y-a.top+r[1]}px`,this.$element.style.display="block",this.targetElement=e.target})}hide(){this.$element.style.display="none",this.targetElement=null}update(e){this.unbindEvents(),super.update(e),this.bindEvents()}destroy(){this.unbindEvents(),super.destroy(),this.$element.remove()}getDOMContent(e){return kA(this,void 0,void 0,function*(){const{getContent:t,getItems:r}=this.options;return r?Gte(yield r(e)):yield t(e)})}bindEvents(){const{graph:e}=this.context,{trigger:t}=this.options;e.on(`canvas:${t}`,this.onTriggerEvent),e.on(`node:${t}`,this.onTriggerEvent),e.on(`edge:${t}`,this.onTriggerEvent),e.on(`combo:${t}`,this.onTriggerEvent),document.addEventListener("click",this.onMenuItemClick)}unbindEvents(){const{graph:e}=this.context,{trigger:t}=this.options;e.off(`canvas:${t}`,this.onTriggerEvent),e.off(`node:${t}`,this.onTriggerEvent),e.off(`edge:${t}`,this.onTriggerEvent),e.off(`combo:${t}`,this.onTriggerEvent),document.removeEventListener("click",this.onMenuItemClick)}}c0.defaultOptions={trigger:"contextmenu",offset:[4,4],loadingContent:'<div class="g6-contextmenu-loading">Loading...</div>',getContent:()=>"It is a empty context menu.",enable:()=>!0};class h0 extends wn{constructor(e,t){super(e,Object.assign({},h0.defaultOptions,t)),this.edgeBundles={},this.edgePoints={},this.onBundle=()=>{const{model:r,element:i}=this.context,a=r.getEdgeData();this.divideEdges(this.options.divisions);const{cycles:s,iterRate:o,divRate:u}=this.options;let{lambda:l,divisions:c,iterations:h}=this.options;for(let d=0;d<s;d++){for(let f=0;f<h;f++){const g={};a.forEach(p=>{var v;if(p.source===p.target)return;const m=z(p);g[m]=this.getEdgeForces(p,c,l);for(let y=0;y<c+1;y++)(v=this.edgePoints)[m]||(v[m]=[]),this.edgePoints[m][y]=xe(this.edgePoints[m][y],g[m][y])})}l/=2,c*=u,h*=o,this.divideEdges(c)}a.forEach(d=>{const f=z(d),g=i.getElement(f);g==null||g.update({d:_x(this.edgePoints[f])})})},this.bindEvents()}get nodeMap(){const e=this.context.model.getNodeData();return Object.fromEntries(e.map(t=>[z(t),Js(Ut(t))]))}divideEdges(e){this.context.model.getEdgeData().forEach(r=>{var i;const a=z(r);(i=this.edgePoints)[a]||(i[a]=[]);const s=this.nodeMap[r.source],o=this.nodeMap[r.target];if(e===1)this.edgePoints[a].push(s),this.edgePoints[a].push(oi(xe(s,o),2)),this.edgePoints[a].push(o);else{const l=(this.edgePoints[a].length===0?ot(s,o):Xte(this.edgePoints[a]))/(e+1);let c=l;const h=[s];for(let d=1;d<this.edgePoints[a].length;d++){const f=this.edgePoints[a][d-1],g=this.edgePoints[a][d];let p=ot(g,f);for(;p>c;){const v=c/p,m=xe(f,ni(Ke(g,f),v));h.push(m),p-=c,c=l}c-=p}h.push(o),this.edgePoints[a]=h}})}getVectorPosition(e){const t=this.nodeMap[e.source],r=this.nodeMap[e.target],[i,a]=Ke(r,t),s=ot(t,r);return{source:t,target:r,vx:i,vy:a,length:s}}measureEdgeCompatibility(e,t){const r=this.getVectorPosition(e),i=this.getVectorPosition(t),a=Vte(r,i),s=Ute(r,i),o=Hte(r,i),u=Yte(r,i);return a*s*o*u}getEdgeBundles(){const e={},t=this.options.bundleThreshold,r=this.context.model.getEdgeData();return r.forEach((i,a)=>{r.forEach((s,o)=>{var u,l;if(o<=a)return;this.measureEdgeCompatibility(i,s)>=t&&(e[u=z(i)]||(e[u]=[]),e[z(i)].push(s),e[l=z(s)]||(e[l]=[]),e[z(s)].push(i))})}),e}getSpringForce(e,t){const{pre:r,cur:i,next:a}=e;return ni(Ke(xe(r,a),ni(i,2)),t)}getElectrostaticForce(e,t){wi(this.edgeBundles)&&(this.edgeBundles=this.getEdgeBundles());const r=this.edgeBundles[z(t)];let i=[0,0];return r==null||r.forEach(a=>{const s=this.edgePoints[z(a)][e],o=this.edgePoints[z(t)][e],u=Ke(s,o),l=ot(s,o);i=xe(i,ni(u,1/l))}),i}getEdgeForces(e,t,r){const i=this.nodeMap[e.source],a=this.nodeMap[e.target],s=this.options.K/(ot(i,a)*(t+1)),o=[[0,0]],u=z(e);for(let l=1;l<t;l++){const c=this.getSpringForce({pre:this.edgePoints[u][l-1],cur:this.edgePoints[u][l],next:this.edgePoints[u][l+1]||[0,0]},s),h=this.getElectrostaticForce(l,e);o.push(ni(xe(c,h),r))}return o.push([0,0]),o}bindEvents(){const{graph:e}=this.context;e.on(Z.AFTER_RENDER,this.onBundle)}unbindEvents(){const{graph:e}=this.context;e.off(Z.AFTER_RENDER,this.onBundle)}destroy(){this.unbindEvents(),super.destroy()}}h0.defaultOptions={K:.1,lambda:.1,divisions:1,divRate:2,cycles:6,iterations:90,iterRate:2/3,bundleThreshold:.6};const Vte=(n,e)=>Math.abs(F$([n.vx,n.vy],[e.vx,e.vy])/(n.length*e.length)),Ute=(n,e)=>{const t=(n.length+e.length)/2;return 2/(t/Math.min(n.length,e.length)+Math.max(n.length,e.length)/t)},Hte=(n,e)=>{const t=(n.length+e.length)/2,r=oi(xe(n.source,n.target),2),i=oi(xe(e.source,e.target),2);return t/(t+ot(r,i))},CA=(n,e)=>{if(e.source[0]===e.target[0])return[e.source[0],n[1]];if(e.source[1]===e.target[1])return[n[0],e.source[1]];const t=(e.source[1]-e.target[1])/(e.source[0]-e.target[0]),r=(t*t*e.source[0]+t*(n[1]-e.source[1])+n[0])/(t*t+1),i=t*(r-e.source[0])+e.source[1];return[r,i]},AA=(n,e)=>{const t=CA(e.source,n),r=CA(e.target,n),i=oi(xe(t,r),2),a=oi(xe(n.source,n.target),2);return ot(t,r)===0?0:Math.max(0,1-2*ot(a,i)/ot(t,r))},Yte=(n,e)=>Math.min(AA(n,e),AA(e,n)),Xte=n=>{let e=0;for(let t=1;t<n.length;t++)e+=ot(n[t],n[t-1]);return e},Kte={fill:"#fff",fillOpacity:1,lineWidth:1,stroke:"#000",strokeOpacity:.8,zIndex:-1/0},TA=.05;class d0 extends wn{constructor(e,t){super(e,Object.assign({},d0.defaultOptions,t)),this.shapes=new Map,this.r=this.options.r,this.onEdgeFilter=r=>{if(this.options.trigger==="drag"&&this.isLensOn)return;const i=pn(r.canvas);this.renderLens(i),this.renderFocusElements()},this.renderLens=r=>{const i=Object.assign({},Kte,this.options.style);this.isLensOn||(this.lens=new sc({style:i}),this.canvas.appendChild(this.lens)),Object.assign(i,ri(r),{size:this.r*2}),this.lens.update(i)},this.getFilterData=()=>{const{filter:r}=this.options,{model:i}=this.context,a=i.getData();if(!r)return a;const{nodes:s,edges:o,combos:u}=a;return{nodes:s.filter(l=>r(z(l),"node")),edges:o.filter(l=>r(z(l),"edge")),combos:u.filter(l=>r(z(l),"combo"))}},this.getFocusElements=r=>{const{nodes:i,edges:a}=this.getFilterData(),s=i.filter(l=>ot(Ut(l),r)<this.r),o=s.map(l=>z(l)),u=a.filter(l=>{const{source:c,target:h}=l,d=o.includes(c),f=o.includes(h);switch(this.options.nodeType){case"both":return d&&f;case"either":return d!==f;case"source":return d&&!f;case"target":return!d&&f;default:return!1}});return{nodes:s,edges:u}},this.renderFocusElements=()=>{const{element:r,graph:i}=this.context;if(!this.isLensOn)return;const a=this.lens.getCenter(),{nodes:s,edges:o}=this.getFocusElements(a),u=new Set,l=c=>{const h=z(c);u.add(h);const d=r.getElement(h);if(!d)return;const f=this.shapes.get(h)||d.cloneNode();f.setPosition(d.getPosition()),f.id=d.id,this.shapes.has(h)?Object.entries(d.attributes).forEach(([v,m])=>{f.style[v]!==m&&(f.style[v]=m)}):(this.canvas.appendChild(f),this.shapes.set(h,f));const g=i.getElementType(h),p=this.getElementStyle(g,c);f.update(p)};s.forEach(l),o.forEach(l),this.shapes.forEach((c,h)=>{u.has(h)||(c.destroy(),this.shapes.delete(h))})},this.scaleRByWheel=r=>{var i;this.options.preventDefault&&r.preventDefault();const{clientX:a,clientY:s,deltaX:o,deltaY:u}=r,{graph:l,canvas:c}=this.context,h=l.getCanvasByClient([a,s]),d=(i=this.lens)===null||i===void 0?void 0:i.getCenter();if(!this.isLensOn||ot(h,d)>this.r)return;const{maxR:f,minR:g}=this.options,p=o+u>0?1/(1-TA):1-TA,v=Math.min(...c.getSize())/2;this.r=Math.max(g||0,Math.min(f||v,this.r*p)),this.renderLens(d),this.renderFocusElements()},this.isLensDragging=!1,this.onDragStart=r=>{var i;const a=pn(r.canvas),s=(i=this.lens)===null||i===void 0?void 0:i.getCenter();!this.isLensOn||ot(a,s)>this.r||(this.isLensDragging=!0)},this.onDrag=r=>{if(!this.isLensDragging)return;const i=pn(r.canvas);this.renderLens(i),this.renderFocusElements()},this.onDragEnd=()=>{this.isLensDragging=!1},this.bindEvents()}get canvas(){return this.context.canvas.getLayer("transient")}get isLensOn(){return this.lens&&!this.lens.destroyed}getElementStyle(e,t){const r=e==="node"?this.options.nodeStyle:this.options.edgeStyle;return typeof r=="function"?r(t):r}get graphDom(){return this.context.graph.getCanvas().getContextService().getDomElement()}bindEvents(){var e;const{graph:t}=this.context,{trigger:r,scaleRBy:i}=this.options,a=t.getCanvas().getLayer();["click","drag"].includes(r)&&a.addEventListener(G.CLICK,this.onEdgeFilter),r==="pointermove"?a.addEventListener(G.POINTER_MOVE,this.onEdgeFilter):r==="drag"&&(a.addEventListener(G.DRAG_START,this.onDragStart),a.addEventListener(G.DRAG,this.onDrag),a.addEventListener(G.DRAG_END,this.onDragEnd)),i==="wheel"&&((e=this.graphDom)===null||e===void 0||e.addEventListener(G.WHEEL,this.scaleRByWheel,{passive:!1}))}unbindEvents(){var e;const{graph:t}=this.context,{trigger:r,scaleRBy:i}=this.options,a=t.getCanvas().getLayer();["click","drag"].includes(r)&&a.removeEventListener(G.CLICK,this.onEdgeFilter),r==="pointermove"?a.removeEventListener(G.POINTER_MOVE,this.onEdgeFilter):r==="drag"&&(a.removeEventListener(G.DRAG_START,this.onDragStart),a.removeEventListener(G.DRAG,this.onDrag),a.removeEventListener(G.DRAG_END,this.onDragEnd)),i==="wheel"&&((e=this.graphDom)===null||e===void 0||e.removeEventListener(G.WHEEL,this.scaleRByWheel))}update(e){var t;this.unbindEvents(),super.update(e),this.r=(t=e.r)!==null&&t!==void 0?t:this.r,this.bindEvents()}destroy(){this.unbindEvents(),this.isLensOn&&this.lens.destroy(),this.shapes.forEach((e,t)=>{e.destroy(),this.shapes.delete(t)}),super.destroy()}}d0.defaultOptions={trigger:"pointermove",r:60,nodeType:"both",filter:()=>!0,style:{lineWidth:2},nodeStyle:{label:!1},edgeStyle:{label:!0},scaleRBy:"wheel",preventDefault:!0};const Zte={fill:"#ccc",fillOpacity:.1,lineWidth:2,stroke:"#000",strokeOpacity:.8,labelFontSize:12},OA=.05,MA=.1;class f0 extends wn{constructor(e,t){super(e,Object.assign({},f0.defaultOptions,t)),this.r=this.options.r,this.d=this.options.d,this.onCreateFisheye=r=>{if(this.options.trigger==="drag"&&this.isLensOn)return;const i=pn(r.canvas);this.onMagnify(i)},this.onMagnify=r=>{r.some(isNaN)||(this.renderLens(r),this.renderFocusElements())},this.renderLens=r=>{const i=Object.assign({},Zte,this.options.style);this.isLensOn||(this.lens=new sc({style:i}),this.canvas.appendChild(this.lens)),Object.assign(i,ri(r),{size:this.r*2,label:this.options.showDPercent,labelText:this.getDPercent()}),this.lens.update(i)},this.getDPercent=()=>{const{minD:r,maxD:i}=this.options;return`${Math.round((this.d-r)/(i-r)*100)}%`},this.prevMagnifiedStyleMap=new Map,this.prevOriginStyleMap=new Map,this.renderFocusElements=()=>{if(!this.isLensOn)return;const{graph:r}=this.context,i=this.lens.getCenter(),a=(this.d+1)*this.r,s=new Map,o=new Map;r.getNodeData().forEach(l=>{const c=Ut(l),h=ot(c,i);if(h>this.r)return;const d=a*h/(this.d*h+this.r),[f,g]=c,[p,v]=i,m=(f-p)/h,y=(g-v)/h,b=[p+d*m,v+d*y],x=z(l),w=this.getNodeStyle(l),E=Hs(r.getElementRenderStyle(x),Object.keys(w));s.set(x,Object.assign(Object.assign({},ri(b)),w)),o.set(x,Object.assign(Object.assign({},ri(c)),E))}),this.updateStyle(s,o)},this.getNodeStyle=r=>{const{nodeStyle:i}=this.options;return typeof i=="function"?i(r):i},this.updateStyle=(r,i)=>{const{graph:a,element:s}=this.context,{enter:o,exit:u,keep:l}=es(Array.from(this.prevMagnifiedStyleMap.keys()),Array.from(r.keys()),d=>d),c=new Set,h=(d,f)=>{const g=s.getElement(d);g==null||g.update(f),a.getRelatedEdgesData(d).forEach(p=>{c.add(z(p))})};[...o,...l].forEach(d=>{h(d,r.get(d))}),u.forEach(d=>{h(d,this.prevOriginStyleMap.get(d)),this.prevOriginStyleMap.delete(d)}),c.forEach(d=>{const f=s.getElement(d);f==null||f.update({})}),this.prevMagnifiedStyleMap=r,i.forEach((d,f)=>{this.prevOriginStyleMap.has(f)||this.prevOriginStyleMap.set(f,d)})},this.isWheelValid=r=>{if(this.options.preventDefault&&r.preventDefault(),!this.isLensOn)return!1;const{clientX:i,clientY:a}=r,s=this.context.graph.getCanvasByClient([i,a]),o=this.lens.getCenter();return!(ot(s,o)>this.r)},this.scaleR=r=>{const{maxR:i,minR:a}=this.options,s=r?1/(1-OA):1-OA,o=Math.min(...this.context.canvas.getSize())/2;this.r=Math.max(a||0,Math.min(i||o,this.r*s))},this.scaleD=r=>{const{maxD:i,minD:a}=this.options,s=r?this.d+MA:this.d-MA;this.d=Math.max(a,Math.min(i,s))},this.scaleRByWheel=r=>{if(!this.isWheelValid(r))return;const{deltaX:i,deltaY:a}=r;this.scaleR(i+a>0);const s=this.lens.getCenter();this.onMagnify(s)},this.scaleDByWheel=r=>{if(!this.isWheelValid(r))return;const{deltaX:i,deltaY:a}=r;this.scaleD(i+a>0);const s=this.lens.getCenter();this.onMagnify(s)},this.isDragValid=r=>{if(this.options.preventDefault&&r.preventDefault(),!this.isLensOn)return!1;const i=pn(r.canvas),a=this.lens.getCenter();return!(ot(i,a)>this.r)},this.isLensDragging=!1,this.onDragStart=r=>{this.isDragValid(r)&&(this.isLensDragging=!0)},this.onDrag=r=>{if(!this.isLensDragging)return;const i=pn(r.canvas);this.onMagnify(i)},this.onDragEnd=()=>{this.isLensDragging=!1},this.scaleRByDrag=r=>{if(!this.isLensDragging)return;const{dx:i,dy:a}=r;this.scaleR(i-a>0);const s=this.lens.getCenter();this.onMagnify(s)},this.scaleDByDrag=r=>{if(!this.isLensDragging)return;const{dx:i,dy:a}=r;this.scaleD(i-a>0);const s=this.lens.getCenter();this.onMagnify(s)},this.bindEvents()}get canvas(){return this.context.canvas.getLayer("transient")}get isLensOn(){return this.lens&&!this.lens.destroyed}get graphDom(){return this.context.graph.getCanvas().getContextService().getDomElement()}bindEvents(){var e;const{graph:t}=this.context,{trigger:r,scaleRBy:i,scaleDBy:a}=this.options,s=t.getCanvas().getLayer();if(["click","drag"].includes(r)&&s.addEventListener(G.CLICK,this.onCreateFisheye),r==="pointermove"&&s.addEventListener(G.POINTER_MOVE,this.onCreateFisheye),r==="drag"||i==="drag"||a==="drag"){s.addEventListener(G.DRAG_START,this.onDragStart),s.addEventListener(G.DRAG_END,this.onDragEnd);const o=r==="drag"?this.onDrag:i==="drag"?this.scaleRByDrag:this.scaleDByDrag;s.addEventListener(G.DRAG,o)}if(i==="wheel"||a==="wheel"){const o=i==="wheel"?this.scaleRByWheel:this.scaleDByWheel;(e=this.graphDom)===null||e===void 0||e.addEventListener(G.WHEEL,o,{passive:!1})}}unbindEvents(){var e;const{graph:t}=this.context,{trigger:r,scaleRBy:i,scaleDBy:a}=this.options,s=t.getCanvas().getLayer();if(["click","drag"].includes(r)&&s.removeEventListener(G.CLICK,this.onCreateFisheye),r==="pointermove"&&s.removeEventListener(G.POINTER_MOVE,this.onCreateFisheye),r==="drag"||i==="drag"||a==="drag"){s.removeEventListener(G.DRAG_START,this.onDragStart),s.removeEventListener(G.DRAG_END,this.onDragEnd);const o=r==="drag"?this.onDrag:i==="drag"?this.scaleRByDrag:this.scaleDByDrag;s.removeEventListener(G.DRAG,o)}if(i==="wheel"||a==="wheel"){const o=i==="wheel"?this.scaleRByWheel:this.scaleDByWheel;(e=this.graphDom)===null||e===void 0||e.removeEventListener(G.WHEEL,o)}}update(e){var t,r;this.unbindEvents(),super.update(e),this.r=(t=e.r)!==null&&t!==void 0?t:this.r,this.d=(r=e.d)!==null&&r!==void 0?r:this.d,this.bindEvents()}destroy(){var e;this.unbindEvents(),this.isLensOn&&((e=this.lens)===null||e===void 0||e.destroy()),this.prevMagnifiedStyleMap.clear(),this.prevOriginStyleMap.clear(),super.destroy()}}f0.defaultOptions={trigger:"pointermove",r:120,d:1.5,maxD:5,minD:0,showDPercent:!0,style:{},nodeStyle:{label:!0},preventDefault:!0};class g0 extends wn{constructor(e,t){super(e,Object.assign({},g0.defaultOptions,t)),this.$el=this.context.canvas.getContainer(),this.graphSize=[0,0],this.onFullscreenChange=()=>{var r,i,a,s;const o=!!document.fullscreenElement;this.options.autoFit&&this.setGraphSize(o),o?(i=(r=this.options).onEnter)===null||i===void 0||i.call(r):(s=(a=this.options).onExit)===null||s===void 0||s.call(a)},this.shortcut=new fu(e.graph),this.bindEvents(),this.style=document.createElement("style"),document.head.appendChild(this.style),this.style.innerHTML=`
      :not(:root):fullscreen::backdrop {
        background: transparent;
      }
    `}bindEvents(){this.unbindEvents(),this.shortcut.unbindAll();const{request:e=[],exit:t=[]}=this.options.trigger;this.shortcut.bind(e,this.request),this.shortcut.bind(t,this.exit),["webkitfullscreenchange","mozfullscreenchange","fullscreenchange","MSFullscreenChange"].forEach(i=>{document.addEventListener(i,this.onFullscreenChange,!1)})}unbindEvents(){this.shortcut.unbindAll(),["webkitfullscreenchange","mozfullscreenchange","fullscreenchange","MSFullscreenChange"].forEach(t=>{document.removeEventListener(t,this.onFullscreenChange,!1)})}setGraphSize(e=!0){var t,r;let i,a;e?(i=((t=globalThis.screen)===null||t===void 0?void 0:t.width)||0,a=((r=globalThis.screen)===null||r===void 0?void 0:r.height)||0,this.graphSize=this.context.graph.getSize()):[i,a]=this.graphSize,this.context.graph.setSize(i,a),this.context.graph.render()}request(){document.fullscreenElement||!Jte()||this.$el.requestFullscreen().catch(e=>{Di.warn(`Error attempting to enable full-screen: ${e.message} (${e.name})`)})}exit(){document.fullscreenElement&&document.exitFullscreen()}update(e){this.unbindEvents(),super.update(e),this.bindEvents()}destroy(){this.exit(),this.style.remove(),super.destroy()}}g0.defaultOptions={trigger:{},autoFit:!0};function Jte(){return document.fullscreenEnabled||Reflect.get(document,"webkitFullscreenEnabled")||Reflect.get(document,"mozFullscreenEnabled")||Reflect.get(document,"msFullscreenEnabled")}class p0 extends wn{constructor(e,t){super(e,Object.assign({},p0.defaultOptions,t)),this.$element=_u("grid-line",!0),this.offset=[0,0],this.currentScale=1,this.followZoom=i=>{const{data:{scale:a,origin:s}}=i;if(!a)return;const o=this.currentScale;this.currentScale=a;const u=a/o,l=ni(s||this.context.graph.getCanvasCenter(),1-u),c=this.baseSize*a,h=ni(this.offset,u),d=dg(h,c),f=xe(d,l);this.$element.style.backgroundSize=`${c}px ${c}px`,this.$element.style.backgroundPosition=`${f[0]}px ${f[1]}px`,this.offset=dg(f,c)},this.followTranslate=i=>{if(!this.options.follow)return;const{data:{translate:a}}=i;a&&this.updateOffset(a)},this.onTransform=i=>{const a=this.parseFollow(this.options.follow);a.zoom&&this.followZoom(i),a.translate&&this.followTranslate(i)},this.context.canvas.getContainer().prepend(this.$element),this.baseSize=this.options.size,this.updateStyle(),this.bindEvents()}update(e){super.update(e),e.size!==void 0&&(this.baseSize=e.size),this.updateStyle()}bindEvents(){const{graph:e}=this.context;e.on(Z.AFTER_TRANSFORM,this.onTransform)}updateStyle(){const{stroke:e,lineWidth:t,border:r,borderLineWidth:i,borderStroke:a,borderStyle:s}=this.options,o=this.baseSize*this.currentScale;Object.assign(this.$element.style,{border:r?`${i}px ${s} ${a}`:"none",backgroundImage:`linear-gradient(${e} ${t}px, transparent ${t}px), linear-gradient(90deg, ${e} ${t}px, transparent ${t}px)`,backgroundSize:`${o}px ${o}px`,backgroundRepeat:"repeat"})}updateOffset(e){const t=this.baseSize*this.currentScale;this.offset=dg(xe(this.offset,e),t),this.$element.style.backgroundPosition=`${this.offset[0]}px ${this.offset[1]}px`}parseFollow(e){var t,r;return xl(e)?{translate:e,zoom:e}:{translate:(t=e==null?void 0:e.translate)!==null&&t!==void 0?t:!1,zoom:(r=e==null?void 0:e.zoom)!==null&&r!==void 0?r:!1}}destroy(){this.context.graph.off(Z.AFTER_TRANSFORM,this.onTransform),this.$element.remove(),super.destroy()}}p0.defaultOptions={border:!0,borderLineWidth:1,borderStroke:"#eee",borderStyle:"solid",lineWidth:1,size:20,stroke:"#eee"};function sw(n){const e={Added:new Map,Updated:new Map,Removed:new Map};return n.forEach(t=>{const{type:r,value:i}=t,a=z(i);if(r==="NodeAdded"||r==="EdgeAdded"||r==="ComboAdded")e.Added.set(a,t);else if(r==="NodeUpdated"||r==="EdgeUpdated"||r==="ComboUpdated")if(e.Added.has(a))e.Added.set(a,{type:r.replace("Updated","Added"),value:i});else if(e.Updated.has(a)){const{original:s}=e.Updated.get(a);e.Updated.set(a,{type:r,value:i,original:s})}else e.Removed.has(a)||e.Updated.set(a,t);else(r==="NodeRemoved"||r==="EdgeRemoved"||r==="ComboRemoved")&&(e.Added.has(a)?e.Added.delete(a):(e.Updated.has(a)&&e.Updated.delete(a),e.Removed.set(a,t)))}),[...Array.from(e.Added.values()),...Array.from(e.Updated.values()),...Array.from(e.Removed.values())]}function D8(n){const{NodeAdded:e=[],NodeUpdated:t=[],NodeRemoved:r=[],EdgeAdded:i=[],EdgeUpdated:a=[],EdgeRemoved:s=[],ComboAdded:o=[],ComboUpdated:u=[],ComboRemoved:l=[]}=ef(n,c=>c.type);return{add:{nodes:e,edges:i,combos:o},update:{nodes:t,edges:a,combos:u},remove:{nodes:r,edges:s,combos:l}}}function R8(n,e){for(const t in n)Nt(n[t])&&!Array.isArray(n[t])&&n[t]!==null?(e[t]||(e[t]={}),R8(n[t],e[t])):e[t]===void 0&&(e[t]=Cl(t))}function Qte(n,e=!1,t){const r={animation:e,current:{add:{},update:{},remove:{}},original:{add:{},update:{},remove:{}}},{add:i,update:a,remove:s}=D8(sw(n));return["nodes","edges","combos"].forEach(o=>{a[o]&&a[o].forEach(u=>{var l,c;const h=Object.assign({},u.value);let d=Object.assign({},u.original);if(t){const f=t.graph.getElementType(z(u.original)),g=f==="edge"?"stroke":"fill",p=t.element.getElementComputedStyle(f,u.original);d=Object.assign(Object.assign({},u.original),{style:Object.assign({[g]:p[g]},u.original.style)})}R8(h,d),(l=r.current.update)[o]||(l[o]=[]),r.current.update[o].push(h),(c=r.original.update)[o]||(c[o]=[]),r.original.update[o].push(d)}),i[o]&&i[o].forEach(u=>{var l,c;const h=Object.assign({},u.value);(l=r.current.add)[o]||(l[o]=[]),r.current.add[o].push(h),(c=r.original.remove)[o]||(c[o]=[]),r.original.remove[o].push(h)}),s[o]&&s[o].forEach(u=>{var l,c;const h=Object.assign({},u.value);(l=r.current.remove)[o]||(l[o]=[]),r.current.remove[o].push(h),(c=r.original.add)[o]||(c[o]=[]),r.original.add[o].push(h)})}),r}class v0 extends wn{constructor(e,t){super(e,Object.assign({},v0.defaultOptions,t)),this.batchChanges=null,this.batchAnimation=!1,this.undoStack=[],this.redoStack=[],this.freezed=!1,this.executeCommand=(i,a=!0)=>{var s,o,u;this.freezed=!0,(o=(s=this.options).executeCommand)===null||o===void 0||o.call(s,i);const l=a?i.original:i.current;this.context.graph.addData(l.add),this.context.graph.updateData(l.update),this.context.graph.removeData(p4(l.remove,!1)),(u=this.context.element)===null||u===void 0||u.draw({silence:!0,animation:i.animation}),this.freezed=!1},this.addCommand=i=>{var a;if(!this.freezed){if(i.type===Z.AFTER_DRAW){const{dataChanges:s=[],animation:o=!0}=i.data;if(!((a=this.context.batch)===null||a===void 0)&&a.isBatching){if(!this.batchChanges)return;this.batchChanges.push(s),this.batchAnimation&&(this.batchAnimation=o);return}this.batchChanges=[s],this.batchAnimation=o}this.undoStackPush(Qte(this.batchChanges.flat(),this.batchAnimation,this.context)),this.notify(Da.ADD,this.undoStack[this.undoStack.length-1])}},this.initBatchCommand=i=>{const{initiate:a}=i.data;this.batchAnimation=!1,a?this.batchChanges=[]:this.undoStack.pop()||(this.batchChanges=null)},this.emitter=new kf;const{graph:r}=this.context;r.on(Z.AFTER_DRAW,this.addCommand),r.on(Z.BATCH_START,this.initBatchCommand),r.on(Z.BATCH_END,this.addCommand)}canUndo(){return this.undoStack.length>0}canRedo(){return this.redoStack.length>0}undo(){var e,t,r,i;const a=this.undoStack.pop();if(a){if(this.executeCommand(a),((t=(e=this.options).beforeAddCommand)===null||t===void 0?void 0:t.call(e,a,!1))===!1)return;this.redoStack.push(a),(i=(r=this.options).afterAddCommand)===null||i===void 0||i.call(r,a,!1),this.notify(Da.UNDO,a)}return this}redo(){const e=this.redoStack.pop();return e&&(this.executeCommand(e,!1),this.undoStackPush(e),this.notify(Da.REDO,e)),this}undoAndCancel(){const e=this.undoStack.pop();return e&&(this.executeCommand(e,!1),this.redoStack=[],this.notify(Da.CANCEL,e)),this}undoStackPush(e){var t,r,i,a;const{stackSize:s}=this.options;s!==0&&this.undoStack.length>=s&&this.undoStack.shift(),((r=(t=this.options).beforeAddCommand)===null||r===void 0?void 0:r.call(t,e,!0))!==!1&&(this.undoStack.push(e),(a=(i=this.options).afterAddCommand)===null||a===void 0||a.call(i,e,!0))}clear(){this.undoStack=[],this.redoStack=[],this.batchChanges=null,this.batchAnimation=!1,this.notify(Da.CLEAR,null)}notify(e,t){this.emitter.emit(e,{cmd:t}),this.emitter.emit(Da.CHANGE,{cmd:t})}on(e,t){this.emitter.on(e,t)}destroy(){const{graph:e}=this.context;e.off(Z.AFTER_DRAW,this.addCommand),e.off(Z.BATCH_START,this.initBatchCommand),e.off(Z.BATCH_END,this.addCommand),this.emitter.off(),super.destroy(),this.undoStack=[],this.redoStack=[]}}v0.defaultOptions={stackSize:0};const ky={toXy(n,e){if(!e)return[...n];const t=e[0].slice(1),r=e[1].slice(1);return n.map(i=>[i[t],i[r]])},fromXy(n,e){if(!e)return[...n];const t=e[0].slice(1),r=e[1].slice(1);return n.map(([i,a])=>({[t]:i,[r]:a}))}};let ene=class{constructor(e,t){this._cells=[],this._cellSize=t,this._reverseCellSize=1/t;for(const r of e){const i=this.coordToCellNum(r[0]),a=this.coordToCellNum(r[1]);this._cells[i]||(this._cells[i]=[]),this._cells[i][a]||(this._cells[i][a]=[]),this._cells[i][a].push(r)}}cellPoints(e,t){var r;return((r=this._cells[e])===null||r===void 0?void 0:r[t])||[]}rangePoints(e){const t=this.coordToCellNum(e[0]),r=this.coordToCellNum(e[1]),i=this.coordToCellNum(e[2]),a=this.coordToCellNum(e[3]),s=[];for(let o=t;o<=i;o++)for(let u=r;u<=a;u++){const l=this.cellPoints(o,u);for(const c of l)s.push(c)}return s}removePoint(e){const t=this.coordToCellNum(e[0]),r=this.coordToCellNum(e[1]),i=this._cells[t][r],a=i.findIndex(([s,o])=>s===e[0]&&o===e[1]);return a>-1&&i.splice(a,1),i}trunc(e){return Math.trunc(e)}coordToCellNum(e){return this.trunc(e*this._reverseCellSize)}extendBbox(e,t){return[e[0]-t*this._cellSize,e[1]-t*this._cellSize,e[2]+t*this._cellSize,e[3]+t*this._cellSize]}};function tne(n,e){return new ene(n,e)}const PA=+(Math.pow(2,27)+1);function Vh(n,e,t){const r=n*e,i=PA*n,a=i-n,s=i-a,o=n-s,u=PA*e,l=u-e,c=u-l,h=e-c,g=r-s*c-o*c-s*h,p=o*h-g;return t?(t[0]=p,t[1]=r,t):[p,r]}function nne(n,e,t){const r=n+e,i=r-n,a=r-i,s=e-i,o=n-a;return t?(t[0]=o+s,t[1]=r,t):[o+s,r]}function rne(n,e){const t=n.length;if(t===1){const o=Vh(n[0],e);return o[0]?o:[o[1]]}const r=new Array(2*t),i=[.1,.1],a=[.1,.1];let s=0;Vh(n[0],e,i),i[0]&&(r[s++]=i[0]);for(let o=1;o<t;++o){Vh(n[o],e,a);const u=i[1];nne(u,a[0],i),i[0]&&(r[s++]=i[0]);const l=a[1],c=i[1],h=l+c,d=h-l,f=c-d;i[1]=h,f&&(r[s++]=f)}return i[1]&&(r[s++]=i[1]),s===0&&(r[s++]=0),r.length=s,r}function ine(n,e){const t=n+e,r=t-n,i=t-r,a=e-r,o=n-i+a;return o?[o,t]:[t]}function ane(n,e){const t=n.length|0,r=e.length|0;if(t===1&&r===1)return ine(n[0],-e[0]);const i=t+r,a=new Array(i);let s=0,o=0,u=0;const l=Math.abs;let c=n[o],h=l(c),d=-e[u],f=l(d),g,p;h<f?(p=c,o+=1,o<t&&(c=n[o],h=l(c))):(p=d,u+=1,u<r&&(d=-e[u],f=l(d))),o<t&&h<f||u>=r?(g=c,o+=1,o<t&&(c=n[o],h=l(c))):(g=d,u+=1,u<r&&(d=-e[u],f=l(d)));let v=g+p,m=v-g,y=p-m,b=y,x=v,w,E,_,S,C;for(;o<t&&u<r;)h<f?(g=c,o+=1,o<t&&(c=n[o],h=l(c))):(g=d,u+=1,u<r&&(d=-e[u],f=l(d))),p=b,v=g+p,m=v-g,y=p-m,y&&(a[s++]=y),w=x+v,E=w-x,_=w-E,S=v-E,C=x-_,b=C+S,x=w;for(;o<t;)g=c,p=b,v=g+p,m=v-g,y=p-m,y&&(a[s++]=y),w=x+v,E=w-x,_=w-E,S=v-E,C=x-_,b=C+S,x=w,o+=1,o<t&&(c=n[o]);for(;u<r;)g=d,p=b,v=g+p,m=v-g,y=p-m,y&&(a[s++]=y),w=x+v,E=w-x,_=w-E,S=v-E,C=x-_,b=C+S,x=w,u+=1,u<r&&(d=-e[u]);return b&&(a[s++]=b),x&&(a[s++]=x),s||(a[s++]=0),a.length=s,a}function sne(n,e){const t=n+e,r=t-n,i=t-r,a=e-r,o=n-i+a;return o?[o,t]:[t]}function one(n,e){const t=n.length|0,r=e.length|0;if(t===1&&r===1)return sne(n[0],e[0]);const i=t+r,a=new Array(i);let s=0,o=0,u=0;const l=Math.abs;let c=n[o],h=l(c),d=e[u],f=l(d),g,p;h<f?(p=c,o+=1,o<t&&(c=n[o],h=l(c))):(p=d,u+=1,u<r&&(d=e[u],f=l(d))),o<t&&h<f||u>=r?(g=c,o+=1,o<t&&(c=n[o],h=l(c))):(g=d,u+=1,u<r&&(d=e[u],f=l(d)));let v=g+p,m=v-g,y=p-m,b=y,x=v,w,E,_,S,C;for(;o<t&&u<r;)h<f?(g=c,o+=1,o<t&&(c=n[o],h=l(c))):(g=d,u+=1,u<r&&(d=e[u],f=l(d))),p=b,v=g+p,m=v-g,y=p-m,y&&(a[s++]=y),w=x+v,E=w-x,_=w-E,S=v-E,C=x-_,b=C+S,x=w;for(;o<t;)g=c,p=b,v=g+p,m=v-g,y=p-m,y&&(a[s++]=y),w=x+v,E=w-x,_=w-E,S=v-E,C=x-_,b=C+S,x=w,o+=1,o<t&&(c=n[o]);for(;u<r;)g=d,p=b,v=g+p,m=v-g,y=p-m,y&&(a[s++]=y),w=x+v,E=w-x,_=w-E,S=v-E,C=x-_,b=C+S,x=w,u+=1,u<r&&(d=e[u]);return b&&(a[s++]=b),x&&(a[s++]=x),s||(a[s++]=0),a.length=s,a}const NA=5,zd=11102230246251565e-32,une=(3+16*zd)*zd,lne=(7+56*zd)*zd;function cne(n,e,t,r){return function(a,s,o){const u=n(n(e(s[1],o[0]),e(-o[1],s[0])),n(e(a[1],s[0]),e(-s[1],a[0]))),l=n(e(a[1],o[0]),e(-o[1],a[0])),c=r(u,l);return c[c.length-1]}}function hne(n,e,t,r){return function(a,s,o,u){const l=n(n(t(n(e(o[1],u[0]),e(-u[1],o[0])),s[2]),n(t(n(e(s[1],u[0]),e(-u[1],s[0])),-o[2]),t(n(e(s[1],o[0]),e(-o[1],s[0])),u[2]))),n(t(n(e(s[1],u[0]),e(-u[1],s[0])),a[2]),n(t(n(e(a[1],u[0]),e(-u[1],a[0])),-s[2]),t(n(e(a[1],s[0]),e(-s[1],a[0])),u[2])))),c=n(n(t(n(e(o[1],u[0]),e(-u[1],o[0])),a[2]),n(t(n(e(a[1],u[0]),e(-u[1],a[0])),-o[2]),t(n(e(a[1],o[0]),e(-o[1],a[0])),u[2]))),n(t(n(e(s[1],o[0]),e(-o[1],s[0])),a[2]),n(t(n(e(a[1],o[0]),e(-o[1],a[0])),-s[2]),t(n(e(a[1],s[0]),e(-s[1],a[0])),o[2])))),h=r(l,c);return h[h.length-1]}}function dne(n,e,t,r){return function(a,s,o,u,l){const c=n(n(n(t(n(t(n(e(u[1],l[0]),e(-l[1],u[0])),o[2]),n(t(n(e(o[1],l[0]),e(-l[1],o[0])),-u[2]),t(n(e(o[1],u[0]),e(-u[1],o[0])),l[2]))),s[3]),n(t(n(t(n(e(u[1],l[0]),e(-l[1],u[0])),s[2]),n(t(n(e(s[1],l[0]),e(-l[1],s[0])),-u[2]),t(n(e(s[1],u[0]),e(-u[1],s[0])),l[2]))),-o[3]),t(n(t(n(e(o[1],l[0]),e(-l[1],o[0])),s[2]),n(t(n(e(s[1],l[0]),e(-l[1],s[0])),-o[2]),t(n(e(s[1],o[0]),e(-o[1],s[0])),l[2]))),u[3]))),n(t(n(t(n(e(o[1],u[0]),e(-u[1],o[0])),s[2]),n(t(n(e(s[1],u[0]),e(-u[1],s[0])),-o[2]),t(n(e(s[1],o[0]),e(-o[1],s[0])),u[2]))),-l[3]),n(t(n(t(n(e(u[1],l[0]),e(-l[1],u[0])),s[2]),n(t(n(e(s[1],l[0]),e(-l[1],s[0])),-u[2]),t(n(e(s[1],u[0]),e(-u[1],s[0])),l[2]))),a[3]),t(n(t(n(e(u[1],l[0]),e(-l[1],u[0])),a[2]),n(t(n(e(a[1],l[0]),e(-l[1],a[0])),-u[2]),t(n(e(a[1],u[0]),e(-u[1],a[0])),l[2]))),-s[3])))),n(n(t(n(t(n(e(s[1],l[0]),e(-l[1],s[0])),a[2]),n(t(n(e(a[1],l[0]),e(-l[1],a[0])),-s[2]),t(n(e(a[1],s[0]),e(-s[1],a[0])),l[2]))),u[3]),n(t(n(t(n(e(s[1],u[0]),e(-u[1],s[0])),a[2]),n(t(n(e(a[1],u[0]),e(-u[1],a[0])),-s[2]),t(n(e(a[1],s[0]),e(-s[1],a[0])),u[2]))),-l[3]),t(n(t(n(e(o[1],u[0]),e(-u[1],o[0])),s[2]),n(t(n(e(s[1],u[0]),e(-u[1],s[0])),-o[2]),t(n(e(s[1],o[0]),e(-o[1],s[0])),u[2]))),a[3]))),n(t(n(t(n(e(o[1],u[0]),e(-u[1],o[0])),a[2]),n(t(n(e(a[1],u[0]),e(-u[1],a[0])),-o[2]),t(n(e(a[1],o[0]),e(-o[1],a[0])),u[2]))),-s[3]),n(t(n(t(n(e(s[1],u[0]),e(-u[1],s[0])),a[2]),n(t(n(e(a[1],u[0]),e(-u[1],a[0])),-s[2]),t(n(e(a[1],s[0]),e(-s[1],a[0])),u[2]))),o[3]),t(n(t(n(e(s[1],o[0]),e(-o[1],s[0])),a[2]),n(t(n(e(a[1],o[0]),e(-o[1],a[0])),-s[2]),t(n(e(a[1],s[0]),e(-s[1],a[0])),o[2]))),-u[3]))))),h=n(n(n(t(n(t(n(e(u[1],l[0]),e(-l[1],u[0])),o[2]),n(t(n(e(o[1],l[0]),e(-l[1],o[0])),-u[2]),t(n(e(o[1],u[0]),e(-u[1],o[0])),l[2]))),a[3]),t(n(t(n(e(u[1],l[0]),e(-l[1],u[0])),a[2]),n(t(n(e(a[1],l[0]),e(-l[1],a[0])),-u[2]),t(n(e(a[1],u[0]),e(-u[1],a[0])),l[2]))),-o[3])),n(t(n(t(n(e(o[1],l[0]),e(-l[1],o[0])),a[2]),n(t(n(e(a[1],l[0]),e(-l[1],a[0])),-o[2]),t(n(e(a[1],o[0]),e(-o[1],a[0])),l[2]))),u[3]),t(n(t(n(e(o[1],u[0]),e(-u[1],o[0])),a[2]),n(t(n(e(a[1],u[0]),e(-u[1],a[0])),-o[2]),t(n(e(a[1],o[0]),e(-o[1],a[0])),u[2]))),-l[3]))),n(n(t(n(t(n(e(o[1],l[0]),e(-l[1],o[0])),s[2]),n(t(n(e(s[1],l[0]),e(-l[1],s[0])),-o[2]),t(n(e(s[1],o[0]),e(-o[1],s[0])),l[2]))),a[3]),t(n(t(n(e(o[1],l[0]),e(-l[1],o[0])),a[2]),n(t(n(e(a[1],l[0]),e(-l[1],a[0])),-o[2]),t(n(e(a[1],o[0]),e(-o[1],a[0])),l[2]))),-s[3])),n(t(n(t(n(e(s[1],l[0]),e(-l[1],s[0])),a[2]),n(t(n(e(a[1],l[0]),e(-l[1],a[0])),-s[2]),t(n(e(a[1],s[0]),e(-s[1],a[0])),l[2]))),o[3]),t(n(t(n(e(s[1],o[0]),e(-o[1],s[0])),a[2]),n(t(n(e(a[1],o[0]),e(-o[1],a[0])),-s[2]),t(n(e(a[1],s[0]),e(-s[1],a[0])),o[2]))),-l[3])))),d=r(c,h);return d[d.length-1]}}function m0(n){return(n===3?cne:n===4?hne:dne)(one,Vh,rne,ane)}const fne=m0(3),gne=m0(4),Os=[function(){return 0},function(){return 0},function(e,t){return t[0]-e[0]},function(e,t,r){const i=(e[1]-r[1])*(t[0]-r[0]),a=(e[0]-r[0])*(t[1]-r[1]),s=i-a;let o;if(i>0){if(a<=0)return s;o=i+a}else if(i<0){if(a>=0)return s;o=-(i+a)}else return s;const u=une*o;return s>=u||s<=-u?s:fne(e,t,r)},function(e,t,r,i){const a=e[0]-i[0],s=t[0]-i[0],o=r[0]-i[0],u=e[1]-i[1],l=t[1]-i[1],c=r[1]-i[1],h=e[2]-i[2],d=t[2]-i[2],f=r[2]-i[2],g=s*c,p=o*l,v=o*u,m=a*c,y=a*l,b=s*u,x=h*(g-p)+d*(v-m)+f*(y-b),w=(Math.abs(g)+Math.abs(p))*Math.abs(h)+(Math.abs(v)+Math.abs(m))*Math.abs(d)+(Math.abs(y)+Math.abs(b))*Math.abs(f),E=lne*w;return x>E||-x>E?x:gne(e,t,r,i)}];function pne(n){let e=Os[n.length];return e||(e=Os[n.length]=m0(n.length)),e.apply(void 0,...n)}function vne(n,e,t,r,i,a,s){return function(...u){switch(u.length){case 0:case 1:return 0;case 2:return r(u[0],u[1]);case 3:return i(u[0],u[1],u[2]);case 4:return a(u[0],u[1],u[2],u[3]);case 5:return s(u[0],u[1],u[2],u[3],u[4])}return n(u)}}function mne(){for(;Os.length<=NA;)Os.push(m0(Os.length));const n=vne(void 0,pne,...Os);for(let e=0;e<=NA;++e)n[e]=Os[e];return n}const el=mne(),DA=el[3];function yne(n){const e=n.length;if(e<3){const o=new Array(e);for(let u=0;u<e;++u)o[u]=u;return e===2&&n[0][0]===n[1][0]&&n[0][1]===n[1][1]?[0]:o}const t=new Array(e);for(let o=0;o<e;++o)t[o]=o;t.sort((o,u)=>{const l=n[o][0]-n[u][0];return l||n[o][1]-n[u][1]});const r=[t[0],t[1]],i=[t[0],t[1]];for(let o=2;o<e;++o){const u=t[o],l=n[u];let c=r.length;for(;c>1&&DA(n[r[c-2]],n[r[c-1]],l)<=0;)c-=1,r.pop();for(r.push(u),c=i.length;c>1&&DA(n[i[c-2]],n[i[c-1]],l)>=0;)c-=1,i.pop();i.push(u)}const a=new Array(i.length+r.length-2);let s=0;for(let o=0,u=r.length;o<u;++o)a[s++]=r[o];for(let o=i.length-2;o>0;--o)a[s++]=i[o];return a}function bne(n,e,t,r){for(let i=0;i<2;++i){const a=n[i],s=e[i],[o,u]=[Math.min(a,s),Math.max(a,s)],l=t[i],c=r[i],[h,d]=[Math.min(l,c),Math.max(l,c)];if(d<o||u<h)return!1}return!0}function xne(n,e,t,r){const i=el(n,t,r),a=el(e,t,r);if(i>0&&a>0||i<0&&a<0)return!1;const s=el(t,n,e),o=el(r,n,e);return s>0&&o>0||s<0&&o<0?!1:i===0&&a===0&&s===0&&o===0?bne(n,e,t,r):!0}function wne(n){const e=[n[0]];let t=n[0];for(let r=1;r<n.length;r++){const i=n[r];(t[0]!==i[0]||t[1]!==i[1])&&e.push(i),t=i}return e}function Ene(n){return n.sort(function(e,t){return e[0]-t[0]||e[1]-t[1]})}function n2(n,e){return Math.pow(e[0]-n[0],2)+Math.pow(e[1]-n[1],2)}function RA(n,e,t){const r=[e[0]-n[0],e[1]-n[1]],i=[t[0]-n[0],t[1]-n[1]],a=n2(n,e),s=n2(n,t);return(r[0]*i[0]+r[1]*i[1])/Math.sqrt(a*s)}function LA(n,e){for(let t=0;t<e.length-1;t++){const r=[e[t],e[t+1]];if(!(n[0][0]===r[0][0]&&n[0][1]===r[0][1]||n[0][0]===r[1][0]&&n[0][1]===r[1][1])&&xne(n[0],n[1],r[0],r[1]))return!0}return!1}function _ne(n){let e=1/0,t=1/0,r=-1/0,i=-1/0;for(let a=n.length-1;a>=0;a--)n[a][0]<e&&(e=n[a][0]),n[a][1]<t&&(t=n[a][1]),n[a][0]>r&&(r=n[a][0]),n[a][1]>i&&(i=n[a][1]);return[r-e,i-t]}function Sne(n){return[Math.min(n[0][0],n[1][0]),Math.min(n[0][1],n[1][1]),Math.max(n[0][0],n[1][0]),Math.max(n[0][1],n[1][1])]}function kne(n,e,t){let r=null,i=IA,a=IA,s,o;for(let u=0;u<e.length;u++)s=RA(n[0],n[1],e[u]),o=RA(n[1],n[0],e[u]),s>i&&o>a&&!LA([n[0],e[u]],t)&&!LA([n[1],e[u]],t)&&(i=s,a=o,r=e[u]);return r}function L8(n,e,t,r,i){let a=!1;for(let s=0;s<n.length-1;s++){const o=[n[s],n[s+1]],u=o[0][0]+","+o[0][1]+","+o[1][0]+","+o[1][1];if(n2(o[0],o[1])<e||i.has(u))continue;let l=0,c=Sne(o),h,d,f;do c=r.extendBbox(c,l),h=c[2]-c[0],d=c[3]-c[1],f=kne(o,r.rangePoints(c),n),l++;while(f===null&&(t[0]>h||t[1]>d));h>=t[0]&&d>=t[1]&&i.add(u),f!==null&&(n.splice(s+1,0,f),r.removePoint(f),a=!0)}return a?L8(n,e,t,r,i):n}function Cne(n,e,t){const r=e||20,i=wne(Ene(ky.toXy(n,t)));if(i.length<4){const h=i.concat([i[0]]);return t?ky.fromXy(h,t):h}const a=_ne(i),s=[a[0]*FA,a[1]*FA],o=yne(i).reverse().map(h=>i[h]);o.push(o[0]);const u=i.filter(function(h){return o.indexOf(h)<0}),l=Math.ceil(1/(i.length/(a[0]*a[1]))),c=L8(o,Math.pow(r,2),s,tne(u,l),new Set);return t?ky.fromXy(c,t):c}const IA=Math.cos(90/(180/Math.PI)),FA=.6;function Ane(n,e,t){if(n.length===1)return Tne(n[0],e,t);if(n.length===2)return BA(n,e,t);if(n.length===3){const[r,i,a]=mx(n);if(E4(r,i,a))return BA([r,a],e,t)}switch(t){case"smooth":return Mne(n,e);case"sharp":return Pne(n,e);case"rounded":default:return One(n,e)}}const Tne=(n,e,t)=>{if(t==="sharp")return[["M",n[0]-e,n[1]-e],["L",n[0]+e,n[1]-e],["L",n[0]+e,n[1]+e],["L",n[0]-e,n[1]+e],["Z"]];const r=[e,e,0,0,0];return[["M",n[0],n[1]-e],["A",...r,n[0],n[1]+e],["A",...r,n[0],n[1]-e]]},BA=(n,e,t)=>{const r=[e,e,0,0,0],i=t==="sharp"?xe(n[0],Wa(oa(Ke(n[0],n[1])),e)):n[0],a=t==="sharp"?xe(n[1],Wa(oa(Ke(n[1],n[0])),e)):n[1],s=Wa(oa(uf(Ke(i,a),!1)),e),o=Wa(s,-1),u=xe(i,s),l=xe(a,s),c=xe(a,o),h=xe(i,o);return t==="sharp"?[["M",u[0],u[1]],["L",l[0],l[1]],["L",c[0],c[1]],["L",h[0],h[1]],["Z"]]:[["M",u[0],u[1]],["L",l[0],l[1]],["A",...r,c[0],c[1]],["L",h[0],h[1]],["A",...r,u[0],u[1]]]},One=(n,e)=>{const t=mx(n).map((o,u)=>{const l=(u-2+n.length)%n.length,c=(u-1+n.length)%n.length,h=(u+1)%n.length,d=n[l],f=n[c],g=n[h],p=Ke(d,f),v=Ke(f,o),m=Ke(o,g),y=(_,S)=>px(_,S,!0)<Math.PI,b=y(p,v),x=y(v,m),w=_=>Wa(oa(uf(_,!1)),e),E=w(v);return[{p:Js(b?xe(f,w(p)):xe(f,E)),concave:b&&f},{p:Js(x?xe(o,w(m)):xe(o,E)),concave:x&&o}]}),r=[e,e,0,0,0],i=t.findIndex((o,u)=>!t[(u-1+t.length)%t.length][0].concave&&!t[(u-1+t.length)%t.length][1].concave&&!o[0].concave&&!o[0].concave&&!o[1].concave),a=t.slice(i).concat(t.slice(0,i));let s=[];return a.flatMap((o,u)=>{const l=[],c=a[t.length-1];return u===0&&l.push(["M",...c[1].p]),o[0].concave?s.push(o[0].p,o[1].p):l.push(["A",...r,...o[0].p]),o[1].concave?s.unshift(o[1].p):l.push(["L",...o[1].p]),s.length===3&&(l.pop(),l.push(["C",...s.flat()]),s=[]),l})},Mne=(n,e)=>{const t=mx(n).map((r,i)=>{const a=n[(i+1)%n.length];return{p:r,v:oa(Ke(a,r))}});return t.forEach((r,i)=>{const a=i>0?i-1:n.length-1,s=t[a].v,o=oa(xe(s,Wa(r.v,px(s,r.v,!0)<Math.PI?1:-1)));r.p=xe(r.p,Wa(o,e))}),P4(t.map(r=>r.p))},Pne=(n,e)=>{const r=n.map((a,s)=>{const o=n[s===0?n.length-1:s-1],u=Al(Wa(oa(uf(Ke(o,a),!1)),e));return[xe(o,u),xe(a,u)]}).flat();return r.map((a,s)=>{if(s%2===0)return null;const o=[r[(s-1)%r.length],r[s%r.length]],u=[r[(s+1)%r.length],r[(s+2)%r.length]];return vx(o,u,!0)}).filter(Boolean).map((a,s)=>[s===0?"M":"L",a[0],a[1]]).concat([["Z"]])};var Nne=globalThis&&globalThis.__rest||function(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(n);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(t[r[i]]=n[r[i]]);return t};class y0 extends wn{constructor(e,t){super(e,Object.assign({},y0.defaultOptions,t)),this.hullMemberIds=[],this.drawHull=()=>{if(!this.shape)this.shape=new ac({style:this.getHullStyle()}),this.context.canvas.appendChild(this.shape);else{const r=!Dt(this.optionsCache,this.options);this.shape.update(this.getHullStyle(r))}this.optionsCache=Object.assign({},this.options)},this.updateHullPath=r=>{this.shape&&this.options.members.includes(z(r.data))&&this.shape.update({d:this.getHullPath(!0)})},this.getHullPath=(r=!1)=>{const{graph:i}=this.context,a=this.getMember();if(a.length===0)return"";const s=a.map(l=>i.getNodeData(l)),o=Cne(s.map(Ut),this.options.concavity).slice(1).reverse(),u=o.flatMap(l=>s.filter(c=>Dt(Ut(c),l)).map(z));return Dt(u,this.hullMemberIds)&&!r?this.path:(this.hullMemberIds=u,this.path=Ane(o,this.getPadding(),this.options.corner),this.path)},this.bindEvents()}bindEvents(){this.context.graph.on(Z.AFTER_RENDER,this.drawHull),this.context.graph.on(Z.AFTER_ELEMENT_UPDATE,this.updateHullPath)}getHullStyle(e){const t=this.options,r=Nne(t,["members","padding","corner"]);return Object.assign(Object.assign({},r),{d:this.getHullPath(e)})}getPadding(){const{graph:e}=this.context;return this.hullMemberIds.reduce((r,i)=>{const{halfExtents:a}=e.getElementRenderBounds(i),s=Math.max(a[0],a[1]);return Math.max(r,s)},0)+this.options.padding}addMember(e){const t=Array.isArray(e)?e:[e];this.options.members=[...new Set([...this.options.members,...t])],this.shape.update({d:this.getHullPath()})}removeMember(e){const t=Array.isArray(e)?e:[e];this.options.members=this.options.members.filter(r=>!t.includes(r)),t.some(r=>this.hullMemberIds.includes(r))&&this.shape.update({d:this.getHullPath()})}updateMember(e){this.options.members=se(e)?e(this.options.members):e,this.shape.update(this.getHullStyle(!0))}getMember(){return this.options.members}destroy(){this.context.graph.off(Z.AFTER_DRAW,this.drawHull),this.shape.destroy(),this.hullMemberIds=[],super.destroy()}}y0.defaultOptions={members:[],padding:10,corner:"rounded",concavity:1/0,fill:"lightblue",fillOpacity:.2,labelOpacity:1,stroke:"blue",strokeOpacity:.2};function I8(n,e){e(n),n.children&&n.children.forEach(function(t){t&&I8(t,e)})}function pc(n){b0(n,!0)}function ii(n){b0(n,!1)}function b0(n,e){var t=e?"visible":"hidden";I8(n,function(r){r.attr("visibility",t)})}var Dne=function(n){Ne(e,n);function e(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];var i=n.apply(this,te([],L(t),!1))||this;return i.isMutationObserved=!0,i.addEventListener(De.INSERTED,function(){ii(i)}),i}return e}(Yt);function F8(n){var e=n.appendChild(new Dne({class:"offscreen"}));return ii(e),e}function Rne(n){for(var e=n;e;){if(e.className==="offscreen")return!0;e=e.parent}return!1}var ow=function(n){Ne(e,n);function e(t){t===void 0&&(t={});var r=t.style,i=At(t,["style"]);return n.call(this,V({style:V({text:"",fill:"black",fontFamily:"sans-serif",fontSize:16,fontStyle:"normal",fontVariant:"normal",fontWeight:"normal",lineWidth:1,textAlign:"start",textBaseline:"middle"},r)},i))||this}return Object.defineProperty(e.prototype,"offscreenGroup",{get:function(){return this._offscreen||(this._offscreen=F8(this)),this._offscreen},enumerable:!1,configurable:!0}),e.prototype.disconnectedCallback=function(){var t;(t=this._offscreen)===null||t===void 0||t.destroy()},e}(io);function ou(n){return n*Math.PI/180}function B8(n){return Number((n*180/Math.PI).toPrecision(5))}var $n=function(){function n(e,t,r,i){e===void 0&&(e=0),t===void 0&&(t=0),r===void 0&&(r=0),i===void 0&&(i=0),this.x=0,this.y=0,this.width=0,this.height=0,this.x=e,this.y=t,this.width=r,this.height=i}return Object.defineProperty(n.prototype,"bottom",{get:function(){return this.y+this.height},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"left",{get:function(){return this.x},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"right",{get:function(){return this.x+this.width},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"top",{get:function(){return this.y},enumerable:!1,configurable:!0}),n.fromRect=function(e){return new n(e.x,e.y,e.width,e.height)},n.prototype.toJSON=function(){return{x:this.x,y:this.y,width:this.width,height:this.height,top:this.top,right:this.right,bottom:this.bottom,left:this.left}},n.prototype.isPointIn=function(e,t){return e>=this.left&&e<=this.right&&t>=this.top&&t<=this.bottom},n}();function Lr(n,e){return se(n)?n.apply(void 0,te([],L(e),!1)):n}var hi=function(n,e){var t=function(i){return"".concat(e,"-").concat(i)},r=Object.fromEntries(Object.entries(n).map(function(i){var a=L(i,2),s=a[0],o=a[1],u=t(o);return[s,{name:u,class:".".concat(u),id:"#".concat(u),toString:function(){return u}}]}));return Object.assign(r,{prefix:t}),r},Lne=5,z8=function(n,e,t,r){t===void 0&&(t=0),r===void 0&&(r=Lne),Object.entries(e).forEach(function(i){var a=L(i,2),s=a[0],o=a[1],u=n;Object.prototype.hasOwnProperty.call(e,s)&&(o?tu(o)?(tu(n[s])||(u[s]={}),t<r?z8(n[s],o,t+1,r):u[s]=e[s]):Er(o)?(u[s]=[],u[s]=u[s].concat(o)):u[s]=o:u[s]=o)})},un=function(n){for(var e=[],t=1;t<arguments.length;t++)e[t-1]=arguments[t];for(var r=0;r<e.length;r+=1)z8(n,e[r]);return n},$8=function(n){return n!==void 0&&n!=null&&!Number.isNaN(n)},_h,Ine=nb(function(n,e){var t=e.fontSize,r=e.fontFamily,i=e.fontWeight,a=e.fontStyle,s=e.fontVariant;return _h||(_h=X.offscreenCanvasCreator.getOrCreateContext(void 0)),_h.font=[a,s,i,"".concat(t,"px"),r].join(" "),_h.measureText(n).width},function(n,e){return[n,Object.values(e||j8(n)).join()].join("")},4096),j8=function(n){var e=n.style.fontFamily||"sans-serif",t=n.style.fontWeight||"normal",r=n.style.fontStyle||"normal",i=n.style.fontVariant,a=n.style.fontSize;return a=typeof a=="object"?a.value:a,{fontSize:a,fontFamily:e,fontWeight:t,fontStyle:r,fontVariant:i}};function q8(n){return n.nodeName==="text"?n:n.nodeName==="g"&&n.children.length===1&&n.children[0].nodeName==="text"?n.children[0]:null}function G8(n,e){var t=q8(n);t&&t.attr(e)}function r2(n,e,t){t===void 0&&(t="..."),G8(n,{wordWrap:!0,wordWrapWidth:e,maxLines:1,textOverflow:t})}function Fne(n,e,t,r){t===void 0&&(t=2),r===void 0&&(r="top"),G8(n,{wordWrap:!0,wordWrapWidth:e,maxLines:t,textBaseline:r})}function zA(n){var e=n.canvas,t=n.touches,r=n.offsetX,i=n.offsetY;if(e){var a=e.x,s=e.y;return[a,s]}if(t){var o=t[0],u=o.clientX,l=o.clientY;return[u,l]}return r&&i?[r,i]:[0,0]}function da(n){return typeof n=="function"?n():qe(n)||re(n)?new ow({style:{text:String(n)}}):n}function Bne(n,e){return n.reduce(function(t,r){return(t[r[e]]=t[r[e]]||[]).push(r),t},{})}function yr(n,e,t,r,i){return r===void 0&&(r=!0),i===void 0&&(i=function(a){a.node().removeChildren()}),n?t(e):(r&&i(e),null)}function hn(n,e,t,r,i){return r===void 0&&(r=!0),i===void 0&&(i=!1),r&&n===e||i&&n===t?!0:n>e&&n<t}var zne=function(n,e){return function(t){return n*(1-t)+e*t}};function $ne(n,e){var t=e?e.length:0,r=n?Math.min(t,n.length):0;return function(i){var a=new Array(r),s=new Array(t),o=0;for(o=0;o<r;++o)a[o]=uw(n[o],e[o]);for(;o<t;++o)s[o]=e[o];for(o=0;o<r;++o)s[o]=a[o](i);return s}}function jne(n,e){n===void 0&&(n={}),e===void 0&&(e={});var t={},r={};return Object.entries(e).forEach(function(i){var a=L(i,2),s=a[0],o=a[1];s in n?t[s]=uw(n[s],o):r[s]=o}),function(i){return Object.entries(t).forEach(function(a){var s=L(a,2),o=s[0],u=s[1];return r[o]=u(i)}),r}}function uw(n,e){return typeof n=="number"&&typeof e=="number"?zne(n,e):Array.isArray(n)&&Array.isArray(e)?$ne(n,e):typeof n=="object"&&typeof e=="object"?jne(n,e):function(t){return n}}function qne(n,e,t,r){if(!r)return n.attr("__keyframe_data__",t),null;var i=r.duration,a=i===void 0?0:i,s=uw(e,t),o=Math.ceil(+a/16),u=new Array(o).fill(0).map(function(l,c,h){return{__keyframe_data__:s(c/(h.length-1))}});return n.animate(u,V({fill:"both"},r))}function ea(n,e){return[n[0]*e,n[1]*e]}function tl(n,e){return[n[0]+e[0],n[1]+e[1]]}function Cy(n,e){return[n[0]-e[0],n[1]-e[1]]}function Es(n,e){return[Math.min(n[0],e[0]),Math.min(n[1],e[1])]}function _s(n,e){return[Math.max(n[0],e[0]),Math.max(n[1],e[1])]}function Rl(n,e){return Math.sqrt(Math.pow(n[0]-e[0],2)+Math.pow(n[1]-e[1],2))}function W8(n){if(n[0]===0&&n[1]===0)return[0,0];var e=Math.sqrt(Math.pow(n[0],2)+Math.pow(n[1],2));return[n[0]/e,n[1]/e]}function Gne(n,e){return e?[n[1],-n[0]]:[-n[1],n[0]]}function $A(n,e){return+n.toPrecision(e)}function jA(n,e){var t={},r=Array.isArray(e)?e:[e];for(var i in n)r.includes(i)||(t[i]=n[i]);return t}function Wne(n,e,t,r){var i,a=[],s=!!r,o,u,l=[1/0,1/0],c=[-1/0,-1/0],h,d,f;if(s){i=L(r,2),l=i[0],c=i[1];for(var g=0,p=n.length;g<p;g+=1){var v=n[g];l=Es(l,v),c=_s(c,v)}}for(var g=0,m=n.length;g<m;g+=1){var v=n[g];if(g===0&&!t)f=v;else if(g===m-1&&!t)d=v,a.push(f),a.push(d);else{var y=[g?g-1:m-1,g-1][t?0:1];o=n[y],u=n[t?(g+1)%m:g+1];var b=[0,0];b=Cy(u,o),b=ea(b,e);var x=Rl(v,o),w=Rl(v,u),E=x+w;E!==0&&(x/=E,w/=E);var _=ea(b,-x),S=ea(b,w);d=tl(v,_),h=tl(v,S),h=Es(h,_s(u,v)),h=_s(h,Es(u,v)),_=Cy(h,v),_=ea(_,-x/w),d=tl(v,_),d=Es(d,_s(o,v)),d=_s(d,Es(o,v)),S=Cy(v,d),S=ea(S,w/x),h=tl(v,S),s&&(d=_s(d,l),d=Es(d,c),h=_s(h,l),h=Es(h,c)),a.push(f),a.push(d),f=h}}return t&&a.push(a.shift()),a}function Vne(n,e,t){var r;e===void 0&&(e=!1),t===void 0&&(t=[[0,0],[1,1]]);for(var i=!!e,a=[],s=0,o=n.length;s<o;s+=2)a.push([n[s],n[s+1]]);for(var u=Wne(a,.4,i,t),l=a.length,c=[],h,d,f,s=0;s<l-1;s+=1)h=u[s*2],d=u[s*2+1],f=a[s+1],c.push(["C",h[0],h[1],d[0],d[1],f[0],f[1]]);return i&&(h=u[l],d=u[l+1],r=L(a,1),f=r[0],c.push(["C",h[0],h[1],d[0],d[1],f[0],f[1]])),c}var Une=["$el","cx","cy","d","dx","dy","fill","fillOpacity","filter","fontFamily","fontSize","fontStyle","fontVariant","fontWeight","height","img","increasedLineWidthForHitTesting","innerHTML","isBillboard","billboardRotation","isSizeAttenuation","isClosed","isOverflowing","leading","letterSpacing","lineDash","lineHeight","lineWidth","markerEnd","markerEndOffset","markerMid","markerStart","markerStartOffset","maxLines","metrics","miterLimit","offsetX","offsetY","opacity","path","points","r","radius","rx","ry","shadowColor","src","stroke","strokeOpacity","text","textAlign","textBaseline","textDecorationColor","textDecorationLine","textDecorationStyle","textOverflow","textPath","textPathSide","textPathStartOffset","transform","transformOrigin","visibility","width","wordWrap","wordWrapWidth","x","x1","x2","y","y1","y2","z1","z2","zIndex"];function Hne(n){return Une.includes(n)}function qA(n){var e={};for(var t in n)Hne(t)&&(e[t]=n[t]);return e}function Yne(n,e){if(n.length<=e)return n;for(var t=Math.floor(n.length/e),r=[],i=0;i<n.length;i+=t)r.push(n[i]);return r}function lw(n,e,t){t===void 0&&(t=!1);var r=n.getBBox(),i=r.width,a=r.height,s=e/Math.max(i,a);return t&&(n.style.transform="scale(".concat(s,")")),s}function Xne(n,e){var t=new Map;return n.forEach(function(r){var i=e(r);t.has(i)||t.set(i,[]),t.get(i).push(r)}),t}function Kne(n){throw new Error(n)}var Zne=function(){function n(i,a,s,o,u,l,c){i===void 0&&(i=null),a===void 0&&(a=null),s===void 0&&(s=null),o===void 0&&(o=null),u===void 0&&(u=[null,null,null,null,null]),l===void 0&&(l=[]),c===void 0&&(c=[]),e.add(this),this._elements=Array.from(i),this._data=a,this._parent=s,this._document=o,this._enter=u[0],this._update=u[1],this._exit=u[2],this._merge=u[3],this._split=u[4],this._transitions=l,this._facetElements=c}n.prototype.selectAll=function(i){var a=typeof i=="string"?this._parent.querySelectorAll(i):i;return new t(a,null,this._elements[0],this._document)},n.prototype.selectFacetAll=function(i){var a=typeof i=="string"?this._parent.querySelectorAll(i):i;return new t(this._elements,null,this._parent,this._document,void 0,void 0,a)},n.prototype.select=function(i){var a=typeof i=="string"?this._parent.querySelectorAll(i)[0]||null:i;return new t([a],null,a,this._document)},n.prototype.append=function(i){var a=this,s=typeof i=="function"?i:function(){return a.createElement(i)},o=[];if(this._data!==null){for(var u=0;u<this._data.length;u++){var l=this._data[u],c=L(Array.isArray(l)?l:[l,null],2),h=c[0],d=c[1],f=s(h,u);f.__data__=h,d!==null&&(f.__fromElements__=d),this._parent.appendChild(f),o.push(f)}return new t(o,null,this._parent,this._document)}for(var u=0;u<this._elements.length;u++){var g=this._elements[u],h=g.__data__,f=s(h,u);g.appendChild(f),o.push(f)}return new t(o,null,o[0],this._document)},n.prototype.maybeAppend=function(i,a){var s=H0(this,e,"m",r).call(this,i[0]==="#"?i:"#".concat(i),a);return s.attr("id",i),s},n.prototype.maybeAppendByClassName=function(i,a){var s=i.toString(),o=H0(this,e,"m",r).call(this,s[0]==="."?s:".".concat(s),a);return o.attr("className",s),o},n.prototype.maybeAppendByName=function(i,a){var s=H0(this,e,"m",r).call(this,'[name="'.concat(i,'"]'),a);return s.attr("name",i),s},n.prototype.data=function(i,a,s){var o,u;a===void 0&&(a=function(k){return k}),s===void 0&&(s=function(){return null});for(var l=[],c=[],h=new Set(this._elements),d=[],f=new Set,g=new Map(this._elements.map(function(k,A){return[a(k.__data__,A),k]})),p=new Map(this._facetElements.map(function(k,A){return[a(k.__data__,A),k]})),v=Xne(this._elements,function(k){return s(k.__data__)}),m=0;m<i.length;m++){var y=i[m],b=a(y,m),x=s(y,m);if(g.has(b)){var w=g.get(b);w.__data__=y,w.__facet__=!1,c.push(w),h.delete(w),g.delete(b)}else if(p.has(b)){var w=p.get(b);w.__data__=y,w.__facet__=!0,c.push(w),p.delete(b)}else if(v.has(b)){var E=v.get(b);d.push([y,E]);try{for(var _=(o=void 0,Kl(E)),S=_.next();!S.done;S=_.next()){var w=S.value;h.delete(w)}}catch(k){o={error:k}}finally{try{S&&!S.done&&(u=_.return)&&u.call(_)}finally{if(o)throw o.error}}v.delete(b)}else if(g.has(x)){var w=g.get(x);w.__toData__?w.__toData__.push(y):w.__toData__=[y],f.add(w),h.delete(w)}else l.push(y)}var C=[new t([],l,this._parent,this._document),new t(c,null,this._parent,this._document),new t(h,null,this._parent,this._document),new t([],d,this._parent,this._document),new t(f,null,this._parent,this._document)];return new t(this._elements,null,this._parent,this._document,C)},n.prototype.merge=function(i){var a=te(te([],L(this._elements),!1),L(i._elements),!1),s=te(te([],L(this._transitions),!1),L(i._transitions),!1);return new t(a,null,this._parent,this._document,void 0,s)},n.prototype.createElement=function(i){if(this._document)return this._document.createElement(i,{});var a=t.registry[i];return a?new a:Kne("Unknown node type: ".concat(i))},n.prototype.join=function(i,a,s,o,u){i===void 0&&(i=function(g){return g}),a===void 0&&(a=function(g){return g}),s===void 0&&(s=function(g){return g.remove()}),o===void 0&&(o=function(g){return g}),u===void 0&&(u=function(g){return g.remove()});var l=i(this._enter),c=a(this._update),h=s(this._exit),d=o(this._merge),f=u(this._split);return c.merge(l).merge(h).merge(d).merge(f)},n.prototype.remove=function(){for(var i=function(o){var u=a._elements[o],l=a._transitions[o];l?l.then(function(){return u.remove()}):u.remove()},a=this,s=0;s<this._elements.length;s++)i(s);return new t([],null,this._parent,this._document,void 0,this._transitions)},n.prototype.each=function(i){for(var a=0;a<this._elements.length;a++){var s=this._elements[a],o=s.__data__;i.call(s,o,a)}return this},n.prototype.attr=function(i,a){var s=typeof a!="function"?function(){return a}:a;return this.each(function(o,u){a!==void 0&&(this[i]=s.call(this,o,u))})},n.prototype.style=function(i,a,s){s===void 0&&(s=!0);var o=typeof a!="function"||!s?function(){return a}:a;return this.each(function(u,l){a!==void 0&&(this.style[i]=o.call(this,u,l))})},n.prototype.styles=function(i,a){return i===void 0&&(i={}),a===void 0&&(a=!0),this.each(function(s,o){var u=this;Object.entries(i).forEach(function(l){var c=L(l,2),h=c[0],d=c[1],f=typeof d!="function"||!a?function(){return d}:d;d!==void 0&&u.attr(h,f.call(u,s,o))})})},n.prototype.update=function(i,a){a===void 0&&(a=!0);var s=typeof i!="function"||!a?function(){return i}:i;return this.each(function(o,u){i&&this.update&&this.update(s.call(this,o,u))})},n.prototype.maybeUpdate=function(i,a){a===void 0&&(a=!0);var s=typeof i!="function"||!a?function(){return i}:i;return this.each(function(o,u){i&&this.update&&this.update(s.call(this,o,u))})},n.prototype.transition=function(i){var a=this._transitions;return this.each(function(s,o){a[o]=i.call(this,s,o)})},n.prototype.on=function(i,a){return this.each(function(){this.addEventListener(i,a)}),this},n.prototype.call=function(i){for(var a=[],s=1;s<arguments.length;s++)a[s-1]=arguments[s];return i.call.apply(i,te([this._parent,this],L(a),!1)),this},n.prototype.node=function(){return this._elements[0]},n.prototype.nodes=function(){return this._elements},n.prototype.transitions=function(){return this._transitions.filter(function(i){return!!i})},n.prototype.parent=function(){return this._parent};var e,t,r;return t=n,e=new WeakSet,r=function(a,s){var o=this._elements[0],u=o.querySelector(a);if(u)return new t([u],null,this._parent,this._document);var l=typeof s=="string"?this.createElement(s):s();return o.appendChild(l),new t([l],null,this._parent,this._document)},n.registry={g:Yt,rect:mn,circle:pa,path:fr,text:ow,ellipse:Ql,image:tc,line:Ks,polygon:ro,polyline:af,html:ec},n}();function oe(n){return new Zne([n],null,n,n.ownerDocument)}function Jne(n,e,t){return n.querySelector(e)?oe(n).select(e):oe(n).append(t)}function yn(n){if(re(n))return[n,n,n,n];if(Er(n)){var e=n.length;if(e===1)return[n[0],n[0],n[0],n[0]];if(e===2)return[n[0],n[1],n[0],n[1]];if(e===3)return[n[0],n[1],n[2],n[1]];if(e===4)return n}return[0,0,0,0]}function GA(n){var e=n.getLocalBounds(),t=e.min,r=e.max,i=L([t,r],2),a=L(i[0],2),s=a[0],o=a[1],u=L(i[1],2),l=u[0],c=u[1];return{x:s,y:o,width:l-s,height:c-o,left:s,bottom:c,top:o,right:l}}function Qne(n,e){var t=L(n,2),r=t[0],i=t[1],a=L(e,2),s=a[0],o=a[1];return r!==s&&i===o}function ere(n,e){var t,r,i=e.attributes;try{for(var a=Kl(Object.entries(i)),s=a.next();!s.done;s=a.next()){var o=L(s.value,2),u=o[0],l=o[1];u!=="id"&&u!=="className"&&n.attr(u,l)}}catch(c){t={error:c}}finally{try{s&&!s.done&&(r=a.return)&&r.call(a)}finally{if(t)throw t.error}}}function cw(n){return n.toString().charAt(0).toUpperCase()+n.toString().slice(1)}function tre(n){return n.toString().charAt(0).toLowerCase()+n.toString().slice(1)}function nre(n,e){return"".concat(e).concat(cw(n))}function WA(n,e,t){var r;t===void 0&&(t=!0);var i=e||((r=n.match(/^([a-z][a-z0-9]+)/))===null||r===void 0?void 0:r[0])||"",a=n.replace(new RegExp("^(".concat(i,")")),"");return t?tre(a):a}function rre(n,e){Object.entries(e).forEach(function(t){var r=L(t,2),i=r[0],a=r[1];te([n],L(n.querySelectorAll(i)),!1).filter(function(s){return s.matches(i)}).forEach(function(s){if(s){var o=s;o.style.cssText+=Object.entries(a).reduce(function(u,l){return"".concat(u).concat(l.join(":"),";")},"")}})})}var Sh=function(n,e){if(!(n!=null&&n.startsWith(e)))return!1;var t=n[e.length];return t>="A"&&t<="Z"};function be(n,e,t){t===void 0&&(t=!1);var r={};return Object.entries(n).forEach(function(i){var a=L(i,2),s=a[0],o=a[1];if(!(s==="className"||s==="class")){if(Sh(s,"show")&&Sh(WA(s,"show"),e)!==t)s===nre(e,"show")?r[s]=o:r[s.replace(new RegExp(cw(e)),"")]=o;else if(!Sh(s,"show")&&Sh(s,e)!==t){var u=WA(s,e);u==="filter"&&typeof o=="function"||(r[u]=o)}}}),r}function Lo(n,e){return Object.entries(n).reduce(function(t,r){var i=L(r,2),a=i[0],s=i[1];return a.startsWith("show")?t["show".concat(e).concat(a.slice(4))]=s:t["".concat(e).concat(cw(a))]=s,t},{})}function fa(n,e){e===void 0&&(e=["x","y","class","className"]);var t=["transform","transformOrigin","anchor","visibility","pointerEvents","zIndex","cursor","clipPath","clipPathTargets","offsetPath","offsetPathTargets","offsetDistance","draggable","droppable"],r={},i={};return Object.entries(n).forEach(function(a){var s=L(a,2),o=s[0],u=s[1];e.includes(o)||(t.indexOf(o)!==-1?i[o]=u:r[o]=u)}),[r,i]}function Vn(n,e){var t={YYYY:n.getFullYear(),MM:n.getMonth()+1,DD:n.getDate(),HH:n.getHours(),mm:n.getMinutes(),ss:n.getSeconds()},r=e;return Object.keys(t).forEach(function(i){var a=t[i];r=r.replace(i,i==="YYYY"?"".concat(a):"".concat(a).padStart(2,"0"))}),r}function ire(n,e,t){var r=n.getBBox(),i=r.width,a=r.height,s=L([e,t].map(function(l,c){var h;return l.includes("%")?parseFloat(((h=l.match(/[+-]?([0-9]*[.])?[0-9]+/))===null||h===void 0?void 0:h[0])||"0")/100*(c===0?i:a):l}),2),o=s[0],u=s[1];return[o,u]}function V8(n,e){if(e)try{var t=/translate\(([+-]*[\d]+[%]*),[ ]*([+-]*[\d]+[%]*)\)/g,r=e.replace(t,function(i,a,s){return"translate(".concat(ire(n,a,s),")")});n.attr("transform",r)}catch{}}function are(n){var e;return((e=n[0])===null||e===void 0?void 0:e.map(function(t,r){return n.map(function(i){return i[r]})}))||[]}var VA=function(n,e){if(e==null){n.innerHTML="";return}n.replaceChildren?Array.isArray(e)?n.replaceChildren.apply(n,te([],L(e),!1)):n.replaceChildren(e):(n.innerHTML="",Array.isArray(e)?e.forEach(function(t){return n.appendChild(t)}):n.appendChild(e))};function sre(){b0(this,this.attributes.visibility!=="hidden")}var Tt=function(n){Ne(e,n);function e(t,r){r===void 0&&(r={});var i=n.call(this,un({},{style:r},t))||this;return i.initialized=!1,i._defaultOptions=r,i}return Object.defineProperty(e.prototype,"offscreenGroup",{get:function(){return this._offscreen||(this._offscreen=F8(this)),this._offscreen},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"defaultOptions",{get:function(){return this._defaultOptions},enumerable:!1,configurable:!0}),e.prototype.connectedCallback=function(){this.render(this.attributes,this),this.bindEvents(this.attributes,this),this.initialized=!0},e.prototype.disconnectedCallback=function(){var t;(t=this._offscreen)===null||t===void 0||t.destroy()},e.prototype.attributeChangedCallback=function(t){t==="visibility"&&sre.call(this)},e.prototype.update=function(t,r){var i;return this.attr(un({},this.attributes,t||{})),(i=this.render)===null||i===void 0?void 0:i.call(this,this.attributes,this,r)},e.prototype.clear=function(){this.removeChildren()},e.prototype.bindEvents=function(t,r){},e.prototype.getSubShapeStyle=function(t){t.x,t.y,t.transform,t.transformOrigin,t.class,t.className,t.zIndex;var r=At(t,["x","y","transform","transformOrigin","class","className","zIndex"]);return r},e}(sx),U8=function(n,e,t){return[["M",n-t,e],["A",t,t,0,1,0,n+t,e],["A",t,t,0,1,0,n-t,e],["Z"]]},ore=U8,ure=function(n,e,t){return[["M",n-t,e-t],["L",n+t,e-t],["L",n+t,e+t],["L",n-t,e+t],["Z"]]},lre=function(n,e,t){return[["M",n-t,e],["L",n,e-t],["L",n+t,e],["L",n,e+t],["Z"]]},cre=function(n,e,t){var r=t*Math.sin(.3333333333333333*Math.PI);return[["M",n-t,e+r],["L",n,e-r],["L",n+t,e+r],["Z"]]},hre=function(n,e,t){var r=t*Math.sin(.3333333333333333*Math.PI);return[["M",n-t,e-r],["L",n+t,e-r],["L",n,e+r],["Z"]]},dre=function(n,e,t){var r=t/2*Math.sqrt(3);return[["M",n,e-t],["L",n+r,e-t/2],["L",n+r,e+t/2],["L",n,e+t],["L",n-r,e+t/2],["L",n-r,e-t/2],["Z"]]},fre=function(n,e,t){var r=t-1.5;return[["M",n-t,e-r],["L",n+t,e+r],["L",n+t,e-r],["L",n-t,e+r],["Z"]]},H8=function(n,e,t){return[["M",n,e+t],["L",n,e-t]]},gre=function(n,e,t){return[["M",n-t,e-t],["L",n+t,e+t],["M",n+t,e-t],["L",n-t,e+t]]},pre=function(n,e,t){return[["M",n-t/2,e-t],["L",n+t/2,e-t],["M",n,e-t],["L",n,e+t],["M",n-t/2,e+t],["L",n+t/2,e+t]]},vre=function(n,e,t){return[["M",n-t,e],["L",n+t,e],["M",n,e-t],["L",n,e+t]]},mre=function(n,e,t){return[["M",n-t,e],["L",n+t,e]]},Y8=function(n,e,t){return[["M",n-t,e],["L",n+t,e]]},yre=Y8,bre=function(n,e,t){return[["M",n-t,e],["A",t/2,t/2,0,1,1,n,e],["A",t/2,t/2,0,1,0,n+t,e]]},xre=function(n,e,t){return[["M",n-t-1,e-2.5],["L",n,e-2.5],["L",n,e+2.5],["L",n+t+1,e+2.5]]},wre=function(n,e,t){return[["M",n-t-1,e+2.5],["L",n,e+2.5],["L",n,e-2.5],["L",n+t+1,e-2.5]]},Ere=function(n,e,t){return[["M",n-(t+1),e+2.5],["L",n-t/2,e+2.5],["L",n-t/2,e-2.5],["L",n+t/2,e-2.5],["L",n+t/2,e+2.5],["L",n+t+1,e+2.5]]};function _re(n,e){return[["M",n-5,e+2.5],["L",n-5,e],["L",n,e],["L",n,e-3],["L",n,e+3],["L",n+6.5,e+3]]}var Sre=function(n,e,t){return[["M",n-t,e-t],["L",n+t,e],["L",n-t,e+t],["Z"]]};function kre(n){var e="default";if(Nt(n)&&n instanceof Image)e="image";else if(se(n))e="symbol";else if(qe(n)){var t=new RegExp("data:(image|text)");n.match(t)?e="base64":/^(https?:\/\/(([a-zA-Z0-9]+-?)+[a-zA-Z0-9]+\.)+[a-zA-Z]+)(:\d+)?(\/.*)?(\?.*)?(#.*)?$/.test(n)?e="url":e="symbol"}return e}function Cre(n){var e=kre(n);return["base64","url","image"].includes(e)?"image":n&&e==="symbol"?"path":null}var Qe=function(n){Ne(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.prototype.render=function(t,r){var i=t.x,a=i===void 0?0:i,s=t.y,o=s===void 0?0:s,u=this.getSubShapeStyle(t),l=u.symbol,c=u.size,h=c===void 0?16:c,d=At(u,["symbol","size"]),f=Cre(l);yr(!!f,oe(r),function(g){g.maybeAppendByClassName("marker",f).attr("className","marker ".concat(f,"-marker")).call(function(p){if(f==="image"){var v=h*2;p.styles({img:l,width:v,height:v,x:a-h,y:o-h})}else{var v=h/2,m=se(l)?l:e.getSymbol(l);p.styles(V({d:m==null?void 0:m(a,o,v)},d))}})})},e.MARKER_SYMBOL_MAP=new Map,e.registerSymbol=function(t,r){e.MARKER_SYMBOL_MAP.set(t,r)},e.getSymbol=function(t){return e.MARKER_SYMBOL_MAP.get(t)},e.getSymbols=function(){return Array.from(e.MARKER_SYMBOL_MAP.keys())},e}(Tt);Qe.registerSymbol("cross",gre);Qe.registerSymbol("hyphen",mre);Qe.registerSymbol("line",H8);Qe.registerSymbol("plus",vre);Qe.registerSymbol("tick",pre);Qe.registerSymbol("circle",U8);Qe.registerSymbol("point",ore);Qe.registerSymbol("bowtie",fre);Qe.registerSymbol("hexagon",dre);Qe.registerSymbol("square",ure);Qe.registerSymbol("diamond",lre);Qe.registerSymbol("triangle",cre);Qe.registerSymbol("triangle-down",hre);Qe.registerSymbol("line",H8);Qe.registerSymbol("dot",Y8);Qe.registerSymbol("dash",yre);Qe.registerSymbol("smooth",bre);Qe.registerSymbol("hv",xre);Qe.registerSymbol("vh",wre);Qe.registerSymbol("hvh",Ere);Qe.registerSymbol("vhv",_re);function $d(n,...e){return e.reduce((t,r)=>i=>t(r(i)),n)}function i2(n,e){return e-n?t=>(t-n)/(e-n):t=>.5}function Are(n,e){const t=e<n?e:n,r=n>e?n:e;return i=>Math.min(Math.max(t,i),r)}function Tre(n,e,t,r,i){let a=t||0,s=r||n.length;const o=i||(u=>u);for(;a<s;){const u=Math.floor((a+s)/2);o(n[u])>e?s=u:a=u+1}return a}const UA=Math.sqrt(50),HA=Math.sqrt(10),YA=Math.sqrt(2);function Uh(n,e,t){const r=(e-n)/Math.max(0,t),i=Math.floor(Math.log(r)/Math.LN10),a=r/10**i;return i>=0?(a>=UA?10:a>=HA?5:a>=YA?2:1)*10**i:-(10**-i)/(a>=UA?10:a>=HA?5:a>=YA?2:1)}const Ore=(n,e,t=5)=>{const r=[n,e];let i=0,a=r.length-1,s=r[i],o=r[a],u;return o<s&&([s,o]=[o,s],[i,a]=[a,i]),u=Uh(s,o,t),u>0?(s=Math.floor(s/u)*u,o=Math.ceil(o/u)*u,u=Uh(s,o,t)):u<0&&(s=Math.ceil(s*u)/u,o=Math.floor(o*u)/u,u=Uh(s,o,t)),u>0?(r[i]=Math.floor(s/u)*u,r[a]=Math.ceil(o/u)*u):u<0&&(r[i]=Math.ceil(s*u)/u,r[a]=Math.floor(o*u)/u),r};function XA(n){return!me(n)&&!OI(n)&&!Number.isNaN(n)}var X8={exports:{}},Mre={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]},K8={exports:{}},Pre=function(e){return!e||typeof e=="string"?!1:e instanceof Array||Array.isArray(e)||e.length>=0&&(e.splice instanceof Function||Object.getOwnPropertyDescriptor(e,e.length-1)&&e.constructor.name!=="String")},Nre=Pre,Dre=Array.prototype.concat,Rre=Array.prototype.slice,KA=K8.exports=function(e){for(var t=[],r=0,i=e.length;r<i;r++){var a=e[r];Nre(a)?t=Dre.call(t,Rre.call(a)):t.push(a)}return t};KA.wrap=function(n){return function(){return n(KA(arguments))}};var Lre=K8.exports,fl=Mre,vc=Lre,Z8=Object.hasOwnProperty,J8=Object.create(null);for(var Ay in fl)Z8.call(fl,Ay)&&(J8[fl[Ay]]=Ay);var pr=X8.exports={to:{},get:{}};pr.get=function(n){var e=n.substring(0,3).toLowerCase(),t,r;switch(e){case"hsl":t=pr.get.hsl(n),r="hsl";break;case"hwb":t=pr.get.hwb(n),r="hwb";break;default:t=pr.get.rgb(n),r="rgb";break}return t?{model:r,value:t}:null};pr.get.rgb=function(n){if(!n)return null;var e=/^#([a-f0-9]{3,4})$/i,t=/^#([a-f0-9]{6})([a-f0-9]{2})?$/i,r=/^rgba?\(\s*([+-]?\d+)(?=[\s,])\s*(?:,\s*)?([+-]?\d+)(?=[\s,])\s*(?:,\s*)?([+-]?\d+)\s*(?:[,|\/]\s*([+-]?[\d\.]+)(%?)\s*)?\)$/,i=/^rgba?\(\s*([+-]?[\d\.]+)\%\s*,?\s*([+-]?[\d\.]+)\%\s*,?\s*([+-]?[\d\.]+)\%\s*(?:[,|\/]\s*([+-]?[\d\.]+)(%?)\s*)?\)$/,a=/^(\w+)$/,s=[0,0,0,1],o,u,l;if(o=n.match(t)){for(l=o[2],o=o[1],u=0;u<3;u++){var c=u*2;s[u]=parseInt(o.slice(c,c+2),16)}l&&(s[3]=parseInt(l,16)/255)}else if(o=n.match(e)){for(o=o[1],l=o[3],u=0;u<3;u++)s[u]=parseInt(o[u]+o[u],16);l&&(s[3]=parseInt(l+l,16)/255)}else if(o=n.match(r)){for(u=0;u<3;u++)s[u]=parseInt(o[u+1],0);o[4]&&(o[5]?s[3]=parseFloat(o[4])*.01:s[3]=parseFloat(o[4]))}else if(o=n.match(i)){for(u=0;u<3;u++)s[u]=Math.round(parseFloat(o[u+1])*2.55);o[4]&&(o[5]?s[3]=parseFloat(o[4])*.01:s[3]=parseFloat(o[4]))}else return(o=n.match(a))?o[1]==="transparent"?[0,0,0,0]:Z8.call(fl,o[1])?(s=fl[o[1]],s[3]=1,s):null:null;for(u=0;u<3;u++)s[u]=rs(s[u],0,255);return s[3]=rs(s[3],0,1),s};pr.get.hsl=function(n){if(!n)return null;var e=/^hsla?\(\s*([+-]?(?:\d{0,3}\.)?\d+)(?:deg)?\s*,?\s*([+-]?[\d\.]+)%\s*,?\s*([+-]?[\d\.]+)%\s*(?:[,|\/]\s*([+-]?(?=\.\d|\d)(?:0|[1-9]\d*)?(?:\.\d*)?(?:[eE][+-]?\d+)?)\s*)?\)$/,t=n.match(e);if(t){var r=parseFloat(t[4]),i=(parseFloat(t[1])%360+360)%360,a=rs(parseFloat(t[2]),0,100),s=rs(parseFloat(t[3]),0,100),o=rs(isNaN(r)?1:r,0,1);return[i,a,s,o]}return null};pr.get.hwb=function(n){if(!n)return null;var e=/^hwb\(\s*([+-]?\d{0,3}(?:\.\d+)?)(?:deg)?\s*,\s*([+-]?[\d\.]+)%\s*,\s*([+-]?[\d\.]+)%\s*(?:,\s*([+-]?(?=\.\d|\d)(?:0|[1-9]\d*)?(?:\.\d*)?(?:[eE][+-]?\d+)?)\s*)?\)$/,t=n.match(e);if(t){var r=parseFloat(t[4]),i=(parseFloat(t[1])%360+360)%360,a=rs(parseFloat(t[2]),0,100),s=rs(parseFloat(t[3]),0,100),o=rs(isNaN(r)?1:r,0,1);return[i,a,s,o]}return null};pr.to.hex=function(){var n=vc(arguments);return"#"+kh(n[0])+kh(n[1])+kh(n[2])+(n[3]<1?kh(Math.round(n[3]*255)):"")};pr.to.rgb=function(){var n=vc(arguments);return n.length<4||n[3]===1?"rgb("+Math.round(n[0])+", "+Math.round(n[1])+", "+Math.round(n[2])+")":"rgba("+Math.round(n[0])+", "+Math.round(n[1])+", "+Math.round(n[2])+", "+n[3]+")"};pr.to.rgb.percent=function(){var n=vc(arguments),e=Math.round(n[0]/255*100),t=Math.round(n[1]/255*100),r=Math.round(n[2]/255*100);return n.length<4||n[3]===1?"rgb("+e+"%, "+t+"%, "+r+"%)":"rgba("+e+"%, "+t+"%, "+r+"%, "+n[3]+")"};pr.to.hsl=function(){var n=vc(arguments);return n.length<4||n[3]===1?"hsl("+n[0]+", "+n[1]+"%, "+n[2]+"%)":"hsla("+n[0]+", "+n[1]+"%, "+n[2]+"%, "+n[3]+")"};pr.to.hwb=function(){var n=vc(arguments),e="";return n.length>=4&&n[3]!==1&&(e=", "+n[3]),"hwb("+n[0]+", "+n[1]+"%, "+n[2]+"%"+e+")"};pr.to.keyword=function(n){return J8[n.slice(0,3)]};function rs(n,e,t){return Math.min(Math.max(e,n),t)}function kh(n){var e=Math.round(n).toString(16).toUpperCase();return e.length<2?"0"+e:e}var Ire=X8.exports;const Fre=Zd(Ire);function Ty(n,e,t){let r=t;return r<0&&(r+=1),r>1&&(r-=1),r<1/6?n+(e-n)*6*r:r<1/2?e:r<2/3?n+(e-n)*(2/3-r)*6:n}function Bre(n){const e=n[0]/360,t=n[1]/100,r=n[2]/100,i=n[3];if(t===0)return[r*255,r*255,r*255,i];const a=r<.5?r*(1+t):r+t-r*t,s=2*r-a,o=Ty(s,a,e+1/3),u=Ty(s,a,e),l=Ty(s,a,e-1/3);return[o*255,u*255,l*255,i]}function ZA(n){const e=Fre.get(n);if(!e)return null;const{model:t,value:r}=e;return t==="rgb"?r:t==="hsl"?Bre(r):null}const jd=(n,e)=>t=>n*(1-t)+e*t,zre=(n,e)=>{const t=ZA(n),r=ZA(e);return t===null||r===null?t?()=>n:()=>e:i=>{const a=new Array(4);for(let c=0;c<4;c+=1){const h=t[c],d=r[c];a[c]=h*(1-i)+d*i}const[s,o,u,l]=a;return`rgba(${Math.round(s)}, ${Math.round(o)}, ${Math.round(u)}, ${l})`}},$re=(n,e)=>typeof n=="number"&&typeof e=="number"?jd(n,e):typeof n=="string"&&typeof e=="string"?zre(n,e):()=>n,jre=(n,e)=>{const t=jd(n,e);return r=>Math.round(t(r))};function JA({map:n,initKey:e},t){const r=e(t);return n.has(r)?n.get(r):t}function qre({map:n,initKey:e},t){const r=e(t);return n.has(r)?n.get(r):(n.set(r,t),t)}function Gre({map:n,initKey:e},t){const r=e(t);return n.has(r)&&(t=n.get(r),n.delete(r)),t}function Wre(n){return typeof n=="object"?n.valueOf():n}class QA extends Map{constructor(e){if(super(),this.map=new Map,this.initKey=Wre,e!==null)for(const[t,r]of e)this.set(t,r)}get(e){return super.get(JA({map:this.map,initKey:this.initKey},e))}has(e){return super.has(JA({map:this.map,initKey:this.initKey},e))}set(e,t){return super.set(qre({map:this.map,initKey:this.initKey},e),t)}delete(e){return super.delete(Gre({map:this.map,initKey:this.initKey},e))}}class Q8{constructor(e){this.options=jn({},this.getDefaultOptions()),this.update(e)}getOptions(){return this.options}update(e={}){this.options=jn({},this.options,e),this.rescale(e)}rescale(e){}}const hw=Symbol("defaultUnknown");function eT(n,e,t){for(let r=0;r<e.length;r+=1)n.has(e[r])||n.set(t(e[r]),r)}function tT(n){const{value:e,from:t,to:r,mapper:i,notFoundReturn:a}=n;let s=i.get(e);if(s===void 0){if(a!==hw)return a;s=t.push(e)-1,i.set(e,s)}return r[s%r.length]}function nT(n){return n instanceof Date?e=>`${e}`:typeof n=="object"?e=>JSON.stringify(e):e=>e}class dw extends Q8{getDefaultOptions(){return{domain:[],range:[],unknown:hw}}constructor(e){super(e)}map(e){return this.domainIndexMap.size===0&&eT(this.domainIndexMap,this.getDomain(),this.domainKey),tT({value:this.domainKey(e),mapper:this.domainIndexMap,from:this.getDomain(),to:this.getRange(),notFoundReturn:this.options.unknown})}invert(e){return this.rangeIndexMap.size===0&&eT(this.rangeIndexMap,this.getRange(),this.rangeKey),tT({value:this.rangeKey(e),mapper:this.rangeIndexMap,from:this.getRange(),to:this.getDomain(),notFoundReturn:this.options.unknown})}rescale(e){const[t]=this.options.domain,[r]=this.options.range;if(this.domainKey=nT(t),this.rangeKey=nT(r),!this.rangeIndexMap){this.rangeIndexMap=new Map,this.domainIndexMap=new Map;return}(!e||e.range)&&this.rangeIndexMap.clear(),(!e||e.domain||e.compare)&&(this.domainIndexMap.clear(),this.sortedDomain=void 0)}clone(){return new dw(this.options)}getRange(){return this.options.range}getDomain(){if(this.sortedDomain)return this.sortedDomain;const{domain:e,compare:t}=this.options;return this.sortedDomain=t?[...e].sort(t):e,this.sortedDomain}}function Vre(n){const e=Math.min(...n);return n.map(t=>t/e)}function Ure(n,e){const t=n.length,r=e-t;return r>0?[...n,...new Array(r).fill(1)]:r<0?n.slice(0,e):n}function Hre(n){return Math.round(n*1e12)/1e12}function Yre(n){const{domain:e,range:t,paddingOuter:r,paddingInner:i,flex:a,round:s,align:o}=n,u=e.length,l=Ure(a,u),[c,h]=t,d=h-c,f=2/u*r+1-1/u*i,g=d/f,p=g*i/u,v=g-u*p,m=Vre(l),y=m.reduce((T,O)=>T+O),b=v/y,x=new QA(e.map((T,O)=>{const P=m[O]*b;return[T,s?Math.floor(P):P]})),w=new QA(e.map((T,O)=>{const R=m[O]*b+p;return[T,s?Math.floor(R):R]})),E=Array.from(w.values()).reduce((T,O)=>T+O),S=(d-(E-E/u*i))*o,C=c+S;let k=s?Math.round(C):C;const A=new Array(u);for(let T=0;T<u;T+=1){A[T]=Hre(k);const O=e[T];k+=w.get(O)}return{valueBandWidth:x,valueStep:w,adjustedRange:A}}function Xre(n){var e;const{domain:t}=n,r=t.length;if(r===0)return{valueBandWidth:void 0,valueStep:void 0,adjustedRange:[]};if(!!(!((e=n.flex)===null||e===void 0)&&e.length))return Yre(n);const{range:a,paddingOuter:s,paddingInner:o,round:u,align:l}=n;let c,h,d=a[0];const g=a[1]-d,p=s*2,v=r-o;c=g/Math.max(1,p+v),u&&(c=Math.floor(c)),d+=(g-c*(r-o))*l,h=c*(1-o),u&&(d=Math.round(d),h=Math.round(h));const m=new Array(r).fill(0).map((y,b)=>d+b*c);return{valueStep:c,valueBandWidth:h,adjustedRange:m}}class fw extends dw{getDefaultOptions(){return{domain:[],range:[0,1],align:.5,round:!1,paddingInner:0,paddingOuter:0,padding:0,unknown:hw,flex:[]}}constructor(e){super(e)}clone(){return new fw(this.options)}getStep(e){return this.valueStep===void 0?1:typeof this.valueStep=="number"?this.valueStep:e===void 0?Array.from(this.valueStep.values())[0]:this.valueStep.get(e)}getBandWidth(e){return this.valueBandWidth===void 0?1:typeof this.valueBandWidth=="number"?this.valueBandWidth:e===void 0?Array.from(this.valueBandWidth.values())[0]:this.valueBandWidth.get(e)}getRange(){return this.adjustedRange}getPaddingInner(){const{padding:e,paddingInner:t}=this.options;return e>0?e:t}getPaddingOuter(){const{padding:e,paddingOuter:t}=this.options;return e>0?e:t}rescale(){super.rescale();const{align:e,domain:t,range:r,round:i,flex:a}=this.options,{adjustedRange:s,valueBandWidth:o,valueStep:u}=Xre({align:e,range:r,round:i,flex:a,paddingInner:this.getPaddingInner(),paddingOuter:this.getPaddingOuter(),domain:t});this.valueStep=u,this.valueBandWidth=o,this.adjustedRange=s}}const Kre=(n,e,t)=>{let r,i,a=n,s=e;if(a===s&&t>0)return[a];let o=Uh(a,s,t);if(o===0||!Number.isFinite(o))return[];if(o>0){a=Math.ceil(a/o),s=Math.floor(s/o),i=new Array(r=Math.ceil(s-a+1));for(let u=0;u<r;u+=1)i[u]=(a+u)*o}else{o=-o,a=Math.ceil(a*o),s=Math.floor(s*o),i=new Array(r=Math.ceil(s-a+1));for(let u=0;u<r;u+=1)i[u]=(a+u)/o}return i},Zre=(n,e,t)=>{const[r,i]=n,[a,s]=e;let o,u;return r<i?(o=i2(r,i),u=t(a,s)):(o=i2(i,r),u=t(s,a)),$d(u,o)},Jre=(n,e,t)=>{const r=Math.min(n.length,e.length)-1,i=new Array(r),a=new Array(r),s=n[0]>n[r],o=s?[...n].reverse():n,u=s?[...e].reverse():e;for(let l=0;l<r;l+=1)i[l]=i2(o[l],o[l+1]),a[l]=t(u[l],u[l+1]);return l=>{const c=Tre(n,l,1,r)-1,h=i[c],d=a[c];return $d(d,h)(l)}},rT=(n,e,t,r)=>(Math.min(n.length,e.length)>2?Jre:Zre)(n,e,r?jre:t);class Qre extends Q8{getDefaultOptions(){return{domain:[0,1],range:[0,1],nice:!1,clamp:!1,round:!1,interpolate:jd,tickCount:5}}map(e){return XA(e)?this.output(e):this.options.unknown}invert(e){return XA(e)?this.input(e):this.options.unknown}nice(){if(!this.options.nice)return;const[e,t,r,...i]=this.getTickMethodOptions();this.options.domain=this.chooseNice()(e,t,r,...i)}getTicks(){const{tickMethod:e}=this.options,[t,r,i,...a]=this.getTickMethodOptions();return e(t,r,i,...a)}getTickMethodOptions(){const{domain:e,tickCount:t}=this.options,r=e[0],i=e[e.length-1];return[r,i,t]}chooseNice(){return Ore}rescale(){this.nice();const[e,t]=this.chooseTransforms();this.composeOutput(e,this.chooseClamp(e)),this.composeInput(e,t,this.chooseClamp(t))}chooseClamp(e){const{clamp:t,range:r}=this.options,i=this.options.domain.map(e),a=Math.min(i.length,r.length);return t?Are(i[0],i[a-1]):ib}composeOutput(e,t){const{domain:r,range:i,round:a,interpolate:s}=this.options,o=rT(r.map(e),i,s,a);this.output=$d(o,t,e)}composeInput(e,t,r){const{domain:i,range:a}=this.options,s=rT(a,i.map(e),jd);this.input=$d(t,r,s)}}class gl extends Qre{getDefaultOptions(){return{domain:[0,1],range:[0,1],unknown:void 0,nice:!1,clamp:!1,round:!1,interpolate:$re,tickMethod:Kre,tickCount:5}}chooseTransforms(){return[ib,ib]}clone(){return new gl(this.options)}}var eie=function(n){Ne(e,n);function e(t){var r=this,i=t.style,a=At(t,["style"]);return r=n.call(this,jn({},{type:"column"},V({style:i},a)))||this,r.columnsGroup=new Yt({name:"columns"}),r.appendChild(r.columnsGroup),r.render(),r}return e.prototype.render=function(){var t=this.attributes,r=t.columns,i=t.x,a=t.y;this.columnsGroup.style.transform="translate(".concat(i,", ").concat(a,")"),oe(this.columnsGroup).selectAll(".column").data(r.flat()).join(function(s){return s.append("rect").attr("className","column").each(function(o){this.attr(o)})},function(s){return s.each(function(o){this.attr(o)})},function(s){return s.remove()})},e.prototype.update=function(t){this.attr(un({},this.attributes,t)),this.render()},e.prototype.clear=function(){this.removeChildren()},e}(lt),tie=function(n){Ne(e,n);function e(t){var r=this,i=t.style,a=At(t,["style"]);return r=n.call(this,jn({},{type:"lines"},V({style:i},a)))||this,r.linesGroup=r.appendChild(new Yt),r.areasGroup=r.appendChild(new Yt),r.render(),r}return e.prototype.render=function(){var t=this.attributes,r=t.lines,i=t.areas,a=t.x,s=t.y;this.style.transform="translate(".concat(a,", ").concat(s,")"),r&&this.renderLines(r),i&&this.renderAreas(i)},e.prototype.clear=function(){this.linesGroup.removeChildren(),this.areasGroup.removeChildren()},e.prototype.update=function(t){this.attr(un({},this.attributes,t)),this.render()},e.prototype.renderLines=function(t){oe(this.linesGroup).selectAll(".line").data(t).join(function(r){return r.append("path").attr("className","line").each(function(i){this.attr(i)})},function(r){return r.each(function(i){this.attr(i)})},function(r){return r.remove()})},e.prototype.renderAreas=function(t){oe(this.linesGroup).selectAll(".area").data(t).join(function(r){return r.append("path").attr("className","area").each(function(i){this.attr(i)})},function(r){return r.each(function(i){this.style(i)})},function(r){return r.remove()})},e}(lt);function nie(n,e){var t,r=e.x,i=e.y,a=L(i.getOptions().range||[0,0],2),s=a[0],o=a[1];return o>s&&(t=L([s,o],2),o=t[0],s=t[1]),n.map(function(u){var l=u.map(function(c,h){return[r.map(h),St(i.map(c),o,s)]});return l})}function Ll(n,e){e===void 0&&(e=!1);var t=e?n.length-1:0,r=n.map(function(i,a){return te([a===t?"M":"L"],L(i),!1)});return e?r.reverse():r}function qd(n,e){if(e===void 0&&(e=!1),n.length<=2)return Ll(n);for(var t=[],r=n.length,i=0;i<r;i+=1){var a=e?n[r-i-1]:n[i];Dt(a,t.slice(-2))||t.push.apply(t,te([],L(a),!1))}var s=Vne(t,!1);return e?s.unshift(te(["M"],L(n[r-1]),!1)):s.unshift(te(["M"],L(n[0]),!1)),s}function gw(n,e,t){var r=nu(n);return r.push(["L",e,t],["L",0,t],["Z"]),r}function rie(n,e,t,r){return n.map(function(i){return gw(e?qd(i):Ll(i),t,r)})}function iie(n,e,t){for(var r=[],i=n.length-1;i>=0;i-=1){var a=n[i],s=Ll(a),o=void 0;if(i===0)o=gw(s,e,t);else{var u=n[i-1],l=Ll(u,!0);l[0][0]="L",o=te(te(te([],L(s),!1),L(l),!1),[["Z"]],!1)}r.push(o)}return r}function aie(n,e,t){for(var r=[],i=n.length-1;i>=0;i-=1){var a=n[i],s=qd(a),o=void 0;if(i===0)o=gw(s,e,t);else{var u=n[i-1],l=qd(u,!0),c=a[0];l[0][0]="L",o=te(te(te([],L(s),!1),L(l),!1),[te(["M"],L(c),!1),["Z"]],!1)}r.push(o)}return r}function iT(n){return n.length===0?[0,0]:[od(yI(n,function(e){return od(e)||0})),sd(mI(n,function(e){return sd(e)||0}))]}function aT(n){for(var e=nu(n),t=e[0].length,r=L([Array(t).fill(0),Array(t).fill(0)],2),i=r[0],a=r[1],s=0;s<e.length;s+=1)for(var o=e[s],u=0;u<t;u+=1)o[u]>=0?(o[u]+=i[u],i[u]=o[u]):(o[u]+=a[u],a[u]=o[u]);return e}var sie=function(n){Ne(e,n);function e(t){return n.call(this,t,{type:"line",x:0,y:0,width:200,height:20,isStack:!1,color:["#83daad","#edbf45","#d2cef9","#e290b3","#6f63f4"],smooth:!0,lineLineWidth:1,areaOpacity:0,isGroup:!1,columnLineWidth:1,columnStroke:"#fff",scale:1,spacing:0})||this}return Object.defineProperty(e.prototype,"rawData",{get:function(){var t=this.attributes.data;if(!t||(t==null?void 0:t.length)===0)return[[]];var r=nu(t);return re(r[0])?[r]:r},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"data",{get:function(){return this.attributes.isStack?aT(this.rawData):this.rawData},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"scales",{get:function(){return this.createScales(this.data)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"baseline",{get:function(){var t=this.scales.y,r=L(t.getOptions().domain||[0,0],2),i=r[0],a=r[1];return a<0?t.map(a):t.map(i<0?0:i)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"containerShape",{get:function(){var t=this.attributes,r=t.width,i=t.height;return{width:r,height:i}},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"linesStyle",{get:function(){var t=this,r=this.attributes,i=r.type,a=r.isStack,s=r.smooth;if(i!=="line")throw new Error("linesStyle can only be used in line type");var o=be(this.attributes,"area"),u=be(this.attributes,"line"),l=this.containerShape.width,c=this.data;if(c[0].length===0)return{lines:[],areas:[]};var h=this.scales,d=h.x,f=h.y,g=nie(c,{type:"line",x:d,y:f}),p=[];if(o){var v=this.baseline;a?p=s?aie(g,l,v):iie(g,l,v):p=rie(g,s,l,v)}return{lines:g.map(function(m,y){return V({stroke:t.getColor(y),d:s?qd(m):Ll(m)},u)}),areas:p.map(function(m,y){return V({d:m,fill:t.getColor(y)},o)})}},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"columnsStyle",{get:function(){var t=this,r=be(this.attributes,"column"),i=this.attributes,a=i.isStack,s=i.type,o=i.scale;if(s!=="column")throw new Error("columnsStyle can only be used in column type");var u=this.containerShape.height,l=this.rawData;if(!l)return{columns:[]};a&&(l=aT(l));var c=this.createScales(l),h=c.x,d=c.y,f=L(iT(l),2),g=f[0],p=f[1],v=new gl({domain:[0,p-(g>0?0:g)],range:[0,u*o]}),m=h.getBandWidth(),y=this.rawData;return{columns:l.map(function(b,x){return b.map(function(w,E){var _=m/l.length,S=function(){return{x:h.map(E)+_*x,y:w>=0?d.map(w):d.map(0),width:_,height:v.map(Math.abs(w))}},C=function(){return{x:h.map(E),y:d.map(w),width:m,height:v.map(y[x][E])}};return V(V({fill:t.getColor(x)},r),a?C():S())})})}},enumerable:!1,configurable:!0}),e.prototype.render=function(t,r){Jne(r,".container","rect").attr("className","container").node();var i=t.type,a=t.x,s=t.y,o="spark".concat(i),u=V({x:a,y:s},i==="line"?this.linesStyle:this.columnsStyle);oe(r).selectAll(".spark").data([i]).join(function(l){return l.append(function(c){return c==="line"?new tie({className:o,style:u}):new eie({className:o,style:u})}).attr("className","spark ".concat(o))},function(l){return l.update(u)},function(l){return l.remove()})},e.prototype.getColor=function(t){var r=this.attributes.color;return Er(r)?r[t%r.length]:se(r)?r.call(null,t):r},e.prototype.createScales=function(t){var r,i,a=this.attributes,s=a.type,o=a.scale,u=a.range,l=u===void 0?[]:u,c=a.spacing,h=this.containerShape,d=h.width,f=h.height,g=L(iT(t),2),p=g[0],v=g[1],m=new gl({domain:[(r=l[0])!==null&&r!==void 0?r:p,(i=l[1])!==null&&i!==void 0?i:v],range:[f,f*(1-o)]});return s==="line"?{type:s,x:new gl({domain:[0,t[0].length-1],range:[0,d]}),y:m}:{type:s,x:new fw({domain:t[0].map(function(y,b){return b}),range:[0,d],paddingInner:c,paddingOuter:c/2,align:.5}),y:m}},e.tag="sparkline",e}(Tt);function oie(n){return typeof n=="boolean"?!1:"enter"in n&&"update"in n&&"exit"in n}function sT(n){if(!n)return{enter:!1,update:!1,exit:!1};var e=["enter","update","exit"],t=Object.fromEntries(Object.entries(n).filter(function(r){var i=L(r,1),a=i[0];return!e.includes(a)}));return Object.fromEntries(e.map(function(r){return oie(n)?n[r]===!1?[r,!1]:[r,V(V({},n[r]),t)]:[r,t]}))}function ku(n,e){n?n.finished.then(e):e()}function uie(n,e){n.length===0?e():Promise.all(n.map(function(t){return t==null?void 0:t.finished})).then(e)}function eN(n,e){"update"in n?n.update(e):n.attr(e)}function tN(n,e,t){if(e.length===0)return null;if(!t){var r=e.slice(-1)[0];return eN(n,{style:r}),null}return n.animate(e,t)}function lie(n,e){return!(n.nodeName!=="text"||e.nodeName!=="text"||n.attributes.text!==e.attributes.text)}function cie(n,e,t,r){if(r===void 0&&(r="destroy"),lie(n,e))return n.remove(),[null];var i=function(){r==="destroy"?n.destroy():r==="hide"&&ii(n),e.isVisible()&&pc(e)};if(!t)return i(),[null];var a=t.duration,s=a===void 0?0:a,o=t.delay,u=o===void 0?0:o,l=Math.ceil(+s/2),c=+s/4,h=L(n.getGeometryBounds().center,2),d=h[0],f=h[1],g=L(e.getGeometryBounds().center,2),p=g[0],v=g[1],m=L([(d+p)/2-d,(f+v)/2-f],2),y=m[0],b=m[1],x=n.style.opacity,w=x===void 0?1:x,E=e.style.opacity,_=E===void 0?1:E,S=n.style.transform||"",C=e.style.transform||"",k=n.animate([{opacity:w,transform:"translate(0, 0) ".concat(S)},{opacity:0,transform:"translate(".concat(y,", ").concat(b,") ").concat(S)}],V(V({fill:"both"},t),{duration:u+l+c})),A=e.animate([{opacity:0,transform:"translate(".concat(-y,", ").concat(-b,") ").concat(C),offset:.01},{opacity:_,transform:"translate(0, 0) ".concat(C)}],V(V({fill:"both"},t),{duration:l+c,delay:u+l-c}));return ku(A,i),[k,A]}function ai(n,e,t){var r={},i={};return Object.entries(e).forEach(function(a){var s=L(a,2),o=s[0],u=s[1];if(!de(u)){var l=n.style[o]||n.parsedStyle[o]||0;l!==u&&(r[o]=l,i[o]=u)}}),t?tN(n,[r,i],V({fill:"both"},t)):(eN(n,i),null)}function x0(n,e){return n.style.opacity||(n.style.opacity=1),ai(n,{opacity:0},e)}var nN={fill:"#fff",lineWidth:1,radius:2,size:10,stroke:"#bfbfbf",strokeOpacity:1,zIndex:0},rN={fill:"#000",fillOpacity:.45,fontSize:12,textAlign:"center",textBaseline:"middle",zIndex:1},iN={x:0,y:0,orientation:"horizontal",showLabel:!0,type:"start"},vi=hi({foreground:"foreground",handle:"handle",selection:"selection",sparkline:"sparkline",sparklineGroup:"sparkline-group",track:"track",brushArea:"brush-area"},"slider"),Ba=hi({labelGroup:"label-group",label:"label",iconGroup:"icon-group",icon:"icon",iconRect:"icon-rect",iconLine:"icon-line"},"handle"),hie=function(n){Ne(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.prototype.render=function(t,r){var i=t.x,a=t.y,s=t.size,o=s===void 0?10:s,u=t.radius,l=u===void 0?o/4:u,c=t.orientation,h=At(t,["x","y","size","radius","orientation"]),d=o,f=d*2.4,g=oe(r).maybeAppendByClassName(Ba.iconRect,"rect").styles(V(V({},h),{width:d,height:f,radius:l,x:i-d/2,y:a-f/2,transformOrigin:"center"})),p=i+1/3*d-d/2,v=i+2/3*d-d/2,m=a+1/4*f-f/2,y=a+3/4*f-f/2;g.maybeAppendByClassName("".concat(Ba.iconLine,"-1"),"line").styles(V({x1:p,x2:p,y1:m,y2:y},h)),g.maybeAppendByClassName("".concat(Ba.iconLine,"-2"),"line").styles(V({x1:v,x2:v,y1:m,y2:y},h)),c==="vertical"&&(g.node().style.transform="rotate(90)")},e}(Tt),die=function(n){Ne(e,n);function e(t){return n.call(this,t,iN)||this}return e.prototype.renderLabel=function(t){var r=this,i=this.attributes,a=i.x,s=i.y,o=i.showLabel,u=be(this.attributes,"label"),l=u.x,c=l===void 0?0:l,h=u.y,d=h===void 0?0:h,f=u.transform,g=u.transformOrigin,p=At(u,["x","y","transform","transformOrigin"]),v=L(fa(p,[]),2),m=v[0],y=v[1],b=oe(t).maybeAppendByClassName(Ba.labelGroup,"g").styles(y),x=V(V({},rN),m),w=x.text,E=At(x,["text"]);yr(!!o,b,function(_){r.label=_.maybeAppendByClassName(Ba.label,"text").styles(V(V({},E),{x:a+c,y:s+d,transform:f,transformOrigin:g,text:"".concat(w)})),r.label.on("mousedown",function(S){S.stopPropagation()}),r.label.on("touchstart",function(S){S.stopPropagation()})})},e.prototype.renderIcon=function(t){var r=this.attributes,i=r.x,a=r.y,s=r.orientation,o=r.type,u=V(V({x:i,y:a,orientation:s},nN),be(this.attributes,"icon")),l=this.attributes.iconShape,c=l===void 0?function(){return new hie({style:u})}:l,h=oe(t).maybeAppendByClassName(Ba.iconGroup,"g");h.selectAll(Ba.icon.class).data([c]).join(function(d){return d.append(typeof c=="string"?c:function(){return c(o)}).attr("className",Ba.icon.name)},function(d){return d.update(u)},function(d){return d.remove()})},e.prototype.render=function(t,r){this.renderIcon(r),this.renderLabel(r)},e}(Tt),fie=function(n){Ne(e,n);function e(t){var r=n.call(this,t,V(V(V({x:0,y:0,animate:{duration:100,fill:"both"},brushable:!0,formatter:function(i){return i.toString()},handleSpacing:2,orientation:"horizontal",padding:0,autoFitLabel:!0,scrollable:!0,selectionFill:"#5B8FF9",selectionFillOpacity:.45,selectionZIndex:2,showHandle:!0,showLabel:!0,slidable:!0,trackFill:"#416180",trackLength:200,trackOpacity:.05,trackSize:20,trackZIndex:-1,values:[0,1],type:"range",selectionType:"select",handleIconOffset:0},Lo(iN,"handle")),Lo(nN,"handleIcon")),Lo(rN,"handleLabel")))||this;return r.range=[0,1],r.onDragStart=function(i){return function(a){a.stopPropagation(),r.target=i,r.prevPos=r.getOrientVal(zA(a));var s=r.availableSpace,o=s.x,u=s.y,l=r.getBBox(),c=l.x,h=l.y;r.selectionStartPos=r.getRatio(r.prevPos-r.getOrientVal([o,u])-r.getOrientVal([+c,+h])),r.selectionWidth=0,document.addEventListener("pointermove",r.onDragging),document.addEventListener("pointerup",r.onDragEnd)}},r.onDragging=function(i){var a=r.attributes,s=a.slidable,o=a.brushable,u=a.type;i.stopPropagation();var l=r.getOrientVal(zA(i)),c=l-r.prevPos;if(c){var h=r.getRatio(c);switch(r.target){case"start":s&&r.setValuesOffset(h);break;case"end":s&&r.setValuesOffset(0,h);break;case"selection":s&&r.setValuesOffset(h,h);break;case"track":if(!o)return;r.selectionWidth+=h,u==="range"?r.innerSetValues([r.selectionStartPos,r.selectionStartPos+r.selectionWidth].sort(),!0):r.innerSetValues([0,r.selectionStartPos+r.selectionWidth],!0);break}r.prevPos=l}},r.onDragEnd=function(){document.removeEventListener("pointermove",r.onDragging),document.removeEventListener("pointermove",r.onDragging),document.removeEventListener("pointerup",r.onDragEnd),r.target="",r.updateHandlesPosition(!1)},r.onValueChange=function(i){var a=r.attributes,s=a.onChange,o=a.type,u=o==="range"?i:i[1],l=o==="range"?r.getValues():r.getValues()[1],c=new It("valuechange",{detail:{oldValue:u,value:l}});r.dispatchEvent(c),s==null||s(l)},r.selectionStartPos=0,r.selectionWidth=0,r.prevPos=0,r.target="",r}return Object.defineProperty(e.prototype,"values",{get:function(){return this.attributes.values},set:function(t){this.attributes.values=this.clampValues(t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"sparklineStyle",{get:function(){var t=this.attributes.orientation;if(t!=="horizontal")return null;var r=be(this.attributes,"sparkline");return V(V({zIndex:0},this.availableSpace),r)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"shape",{get:function(){var t=this.attributes,r=t.trackLength,i=t.trackSize,a=L(this.getOrientVal([[r,i],[i,r]]),2),s=a[0],o=a[1];return{width:s,height:o}},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"availableSpace",{get:function(){var t=this.attributes;t.x,t.y;var r=t.padding,i=L(yn(r),4),a=i[0],s=i[1],o=i[2],u=i[3],l=this.shape,c=l.width,h=l.height;return{x:u,y:a,width:c-(u+s),height:h-(a+o)}},enumerable:!1,configurable:!0}),e.prototype.getValues=function(){return this.values},e.prototype.setValues=function(t,r){t===void 0&&(t=[0,0]),r===void 0&&(r=!1),this.attributes.values=t;var i=r===!1?!1:this.attributes.animate;this.updateSelectionArea(i),this.updateHandlesPosition(i)},e.prototype.updateSelectionArea=function(t){var r=this.calcSelectionArea();this.foregroundGroup.selectAll(vi.selection.class).each(function(i,a){ai(this,r[a],t)})},e.prototype.updateHandlesPosition=function(t){this.attributes.showHandle&&(this.startHandle&&ai(this.startHandle,this.getHandleStyle("start"),t),this.endHandle&&ai(this.endHandle,this.getHandleStyle("end"),t))},e.prototype.innerSetValues=function(t,r){t===void 0&&(t=[0,0]),r===void 0&&(r=!1);var i=this.values,a=this.clampValues(t);this.attributes.values=a,this.setValues(a),r&&this.onValueChange(i)},e.prototype.renderTrack=function(t){var r=this.attributes,i=r.x,a=r.y,s=be(this.attributes,"track");this.trackShape=oe(t).maybeAppendByClassName(vi.track,"rect").styles(V(V({x:i,y:a},this.shape),s))},e.prototype.renderBrushArea=function(t){var r=this.attributes,i=r.x,a=r.y,s=r.brushable;this.brushArea=oe(t).maybeAppendByClassName(vi.brushArea,"rect").styles(V({x:i,y:a,fill:"transparent",cursor:s?"crosshair":"default"},this.shape))},e.prototype.renderSparkline=function(t){var r=this,i=this.attributes,a=i.x,s=i.y,o=i.orientation,u=oe(t).maybeAppendByClassName(vi.sparklineGroup,"g");yr(o==="horizontal",u,function(l){var c=V(V({},r.sparklineStyle),{x:a,y:s});l.maybeAppendByClassName(vi.sparkline,function(){return new sie({style:c})}).update(c)})},e.prototype.renderHandles=function(){var t=this,r,i=this.attributes,a=i.showHandle,s=i.type,o=s==="range"?["start","end"]:["end"],u=a?o:[],l=this;(r=this.foregroundGroup)===null||r===void 0||r.selectAll(vi.handle.class).data(u.map(function(c){return{type:c}}),function(c){return c.type}).join(function(c){return c.append(function(h){var d=h.type;return new die({style:t.getHandleStyle(d)})}).each(function(h){var d=h.type;this.attr("class","".concat(vi.handle.name," ").concat(d,"-handle"));var f="".concat(d,"Handle");l[f]=this,this.addEventListener("pointerdown",l.onDragStart(d))})},function(c){return c.each(function(h){var d=h.type;this.update(l.getHandleStyle(d))})},function(c){return c.each(function(h){var d=h.type,f="".concat(d,"Handle");l[f]=void 0}).remove()})},e.prototype.renderSelection=function(t){var r=this.attributes,i=r.x,a=r.y,s=r.type,o=r.selectionType;this.foregroundGroup=oe(t).maybeAppendByClassName(vi.foreground,"g");var u=be(this.attributes,"selection"),l=function(h){return h.style("visibility",function(d){return d.show?"visible":"hidden"}).style("cursor",function(d){return o==="select"?"grab":o==="invert"?"crosshair":"default"}).styles(V(V({},u),{transform:"translate(".concat(i,", ").concat(a,")")}))},c=this;this.foregroundGroup.selectAll(vi.selection.class).data(s==="value"?[]:this.calcSelectionArea().map(function(h,d){return{style:V({},h),index:d,show:o==="select"?d===1:d!==1}}),function(h){return h.index}).join(function(h){return h.append("rect").attr("className",vi.selection.name).call(l).each(function(d,f){var g=this;f===1?(c.selectionShape=oe(this),this.on("pointerdown",function(p){g.attr("cursor","grabbing"),c.onDragStart("selection")(p)}),c.dispatchCustomEvent(this,"pointerenter","selectionMouseenter"),c.dispatchCustomEvent(this,"pointerleave","selectionMouseleave"),c.dispatchCustomEvent(this,"click","selectionClick"),this.addEventListener("pointerdown",function(){g.attr("cursor","grabbing")}),this.addEventListener("pointerup",function(){g.attr("cursor","pointer")}),this.addEventListener("pointerover",function(){g.attr("cursor","pointer")})):this.on("pointerdown",c.onDragStart("track"))})},function(h){return h.call(l)},function(h){return h.remove()}),this.updateSelectionArea(!1),this.renderHandles()},e.prototype.render=function(t,r){this.renderTrack(r),this.renderSparkline(r),this.renderBrushArea(r),this.renderSelection(r)},e.prototype.clampValues=function(t,r){var i;r===void 0&&(r=4);var a=L(this.range,2),s=a[0],o=a[1],u=L(this.getValues().map(function(v){return $A(v,r)}),2),l=u[0],c=u[1],h=Array.isArray(t)?t:[l,t??c],d=L((h||[l,c]).map(function(v){return $A(v,r)}),2),f=d[0],g=d[1];if(this.attributes.type==="value")return[0,St(g,s,o)];f>g&&(i=L([g,f],2),f=i[0],g=i[1]);var p=g-f;return p>o-s?[s,o]:f<s?l===s&&c===g?[s,g]:[s,p+s]:g>o?c===o&&l===f?[f,o]:[o-p,o]:[f,g]},e.prototype.calcSelectionArea=function(t){var r=L(this.clampValues(t),2),i=r[0],a=r[1],s=this.availableSpace,o=s.x,u=s.y,l=s.width,c=s.height;return this.getOrientVal([[{y:u,height:c,x:o,width:i*l},{y:u,height:c,x:i*l+o,width:(a-i)*l},{y:u,height:c,x:a*l,width:(1-a)*l}],[{x:o,width:l,y:u,height:i*c},{x:o,width:l,y:i*c+u,height:(a-i)*c},{x:o,width:l,y:a*c,height:(1-a)*c}]])},e.prototype.calcHandlePosition=function(t){var r=this.attributes.handleIconOffset,i=this.availableSpace,a=i.x,s=i.y,o=i.width,u=i.height,l=L(this.clampValues(),2),c=l[0],h=l[1],d=t==="start"?-r:r,f=(t==="start"?c:h)*this.getOrientVal([o,u])+d;return{x:a+this.getOrientVal([f,o/2]),y:s+this.getOrientVal([u/2,f])}},e.prototype.inferTextStyle=function(t){var r=this.attributes.orientation;return r==="horizontal"?{}:t==="start"?{transformOrigin:"left center",transform:"rotate(90)",textAlign:"start"}:t==="end"?{transformOrigin:"right center",transform:"rotate(90)",textAlign:"end"}:{}},e.prototype.calcHandleText=function(t){var r,i=this.attributes,a=i.type,s=i.orientation,o=i.formatter,u=i.autoFitLabel,l=be(this.attributes,"handle"),c=be(l,"label"),h=l.spacing,d=this.getHandleSize(),f=this.clampValues(),g=t==="start"?f[0]:f[1],p=o(g),v=new ow({style:V(V(V({},c),this.inferTextStyle(t)),{text:p})}),m=v.getBBox(),y=m.width,b=m.height;if(v.destroy(),!u){if(a==="value")return{text:p,x:0,y:-b-h};var x=h+d+(s==="horizontal"?y/2:0);return r={text:p},r[s==="horizontal"?"x":"y"]=t==="start"?-x:x,r}var w=0,E=0,_=this.availableSpace,S=_.width,C=_.height,k=this.calcSelectionArea()[1],A=k.x,T=k.y,O=k.width,P=k.height,R=h+d;if(s==="horizontal"){var N=R+y/2;if(t==="start"){var D=A-R-y;w=D>0?-N:N}else{var M=S-A-O-R>y;w=M?N:-N}}else{var F=R,j=b+R;t==="start"?E=T-d>b?-j:F:E=C-(T+P)-d>b?j:-F}return{x:w,y:E,text:p}},e.prototype.getHandleLabelStyle=function(t){var r=be(this.attributes,"handleLabel");return V(V(V({},r),this.calcHandleText(t)),this.inferTextStyle(t))},e.prototype.getHandleIconStyle=function(){var t=this.attributes.handleIconShape,r=be(this.attributes,"handleIcon"),i=this.getOrientVal(["ew-resize","ns-resize"]),a=this.getHandleSize();return V({cursor:i,shape:t,size:a},r)},e.prototype.getHandleStyle=function(t){var r=this.attributes,i=r.x,a=r.y,s=r.showLabel,o=r.showLabelOnInteraction,u=r.orientation,l=this.calcHandlePosition(t),c=l.x,h=l.y,d=this.calcHandleText(t),f=s;return!s&&o&&(this.target?f=!0:f=!1),V(V(V({},Lo(this.getHandleIconStyle(),"icon")),Lo(V(V({},this.getHandleLabelStyle(t)),d),"label")),{transform:"translate(".concat(c+i,", ").concat(h+a,")"),orientation:u,showLabel:f,type:t,zIndex:3})},e.prototype.getHandleSize=function(){var t=this.attributes,r=t.handleIconSize,i=t.width,a=t.height;return r||Math.floor((this.getOrientVal([+a,+i])+4)/2.4)},e.prototype.getOrientVal=function(t){var r=L(t,2),i=r[0],a=r[1],s=this.attributes.orientation;return s==="horizontal"?i:a},e.prototype.setValuesOffset=function(t,r,i){r===void 0&&(r=0),i===void 0&&(i=!1);var a=this.attributes.type,s=L(this.getValues(),2),o=s[0],u=s[1],l=a==="range"?t:0,c=[o+l,u+r].sort();i?this.setValues(c):this.innerSetValues(c,!0)},e.prototype.getRatio=function(t){var r=this.availableSpace,i=r.width,a=r.height;return t/this.getOrientVal([i,a])},e.prototype.dispatchCustomEvent=function(t,r,i){var a=this;t.on(r,function(s){s.stopPropagation(),a.dispatchEvent(new It(i,{detail:s}))})},e.prototype.bindEvents=function(){this.addEventListener("wheel",this.onScroll);var t=this.brushArea;this.dispatchCustomEvent(t,"click","trackClick"),this.dispatchCustomEvent(t,"pointerenter","trackMouseenter"),this.dispatchCustomEvent(t,"pointerleave","trackMouseleave"),t.on("pointerdown",this.onDragStart("track"))},e.prototype.onScroll=function(t){var r=this.attributes.scrollable;if(r){var i=t.deltaX,a=t.deltaY,s=a||i,o=this.getRatio(s);this.setValuesOffset(o,o,!0)}},e.tag="slider",e}(Tt),pw={data:[],animate:{enter:!1,update:{duration:100,easing:"ease-in-out-sine",fill:"both"},exit:{duration:100,fill:"both"}},showArrow:!0,showGrid:!0,showLabel:!0,showLine:!0,showTick:!0,showTitle:!0,showTrunc:!1,dataThreshold:100,lineLineWidth:1,lineStroke:"black",crossPadding:10,titleFill:"black",titleFontSize:12,titlePosition:"lb",titleSpacing:0,titleTextAlign:"center",titleTextBaseline:"middle",lineArrow:function(){return new fr({style:{d:[["M",10,10],["L",-10,0],["L",10,-10],["L",0,0],["L",10,10],["Z"]],fill:"black",transformOrigin:"center"}})},labelAlign:"parallel",labelDirection:"positive",labelFontSize:12,labelSpacing:0,gridConnect:"line",gridControlAngles:[],gridDirection:"positive",gridLength:0,gridType:"segment",lineArrowOffset:15,lineArrowSize:10,tickDirection:"positive",tickLength:5,tickLineWidth:1,tickStroke:"black",labelOverlap:[]};jn({},pw,{style:{type:"arc"}});jn({},pw,{style:{}});var Xe=hi({mainGroup:"main-group",gridGroup:"grid-group",grid:"grid",lineGroup:"line-group",line:"line",tickGroup:"tick-group",tick:"tick",tickItem:"tick-item",labelGroup:"label-group",label:"label",labelItem:"label-item",titleGroup:"title-group",title:"title",lineFirst:"line-first",lineSecond:"line-second"},"axis"),uu=hi({lineGroup:"line-group",line:"line",regionGroup:"region-group",region:"region"},"grid");function aN(n){return n.reduce(function(e,t,r){return e.push(te([r===0?"M":"L"],L(t),!1)),e},[])}function gie(n,e,t){var r=e.connect,i=r===void 0?"line":r,a=e.center;if(i==="line")return aN(n);if(!a)return[];var s=Rl(n[0],a),o=t?0:1;return n.reduce(function(u,l,c){return c===0?u.push(te(["M"],L(l),!1)):u.push(te(["A",s,s,0,0,o],L(l),!1)),u},[])}function a2(n,e,t){return e.type==="surround"?gie(n,e,t):aN(n)}function pie(n,e,t){var r=t.type,i=t.connect,a=t.center,s=t.closed,o=s?[["Z"]]:[],u=L([a2(n,t),a2(e.slice().reverse(),t,!0)],2),l=u[0],c=u[1],h=L([n[0],e.slice(-1)[0]],2),d=h[0],f=h[1],g=function(y,b){return[l,y,c,b,o].flat()};if(i==="line"||r==="surround")return g([te(["L"],L(f),!1)],[te(["L"],L(d),!1)]);if(!a)throw new Error("Arc grid need to specified center");var p=L([Rl(f,a),Rl(d,a)],2),v=p[0],m=p[1];return g([te(["A",v,v,0,0,1],L(f),!1),te(["L"],L(f),!1)],[te(["A",m,m,0,0,0],L(d),!1),te(["L"],L(d),!1)])}function vie(n,e,t,r){var i=t.animate,a=t.isBillboard,s=e.map(function(o,u){return{id:o.id||"grid-line-".concat(u),d:a2(o.points,t)}});return n.selectAll(uu.line.class).data(s,function(o){return o.id}).join(function(o){return o.append("path").each(function(u,l){var c=Lr(qA(V({d:u.d},r)),[u,l,s]);this.attr(V({class:uu.line.name,stroke:"#D9D9D9",lineWidth:1,lineDash:[4,4],isBillboard:a},c))})},function(o){return o.transition(function(u,l){var c=Lr(qA(V({d:u.d},r)),[u,l,s]);return ai(this,c,i.update)})},function(o){return o.transition(function(){var u=this,l=x0(this,i.exit);return ku(l,function(){return u.remove()}),l})}).transitions()}function mie(n,e,t){var r=t.animate,i=t.connect,a=t.areaFill;if(e.length<2||!a||!i)return[];for(var s=Array.isArray(a)?a:[a,"transparent"],o=function(g){return s[g%s.length]},u=[],l=0;l<e.length-1;l++){var c=L([e[l].points,e[l+1].points],2),h=c[0],d=c[1],f=pie(h,d,t);u.push({d:f,fill:o(l)})}return n.selectAll(uu.region.class).data(u,function(g,p){return p}).join(function(g){return g.append("path").each(function(p,v){var m=Lr(p,[p,v,u]);this.attr(m)}).attr("className",uu.region.name)},function(g){return g.transition(function(p,v){var m=Lr(p,[p,v,u]);return ai(this,m,r.update)})},function(g){return g.transition(function(){var p=this,v=x0(this,r.exit);return ku(v,function(){return p.remove()}),v})}).transitions()}function yie(n){var e=n.data,t=e===void 0?[]:e,r=n.closed;return r?t.map(function(i){var a=i.points,s=L(a,1),o=s[0];return V(V({},i),{points:te(te([],L(a),!1),[o],!1)})}):t}var bie=function(n){Ne(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.prototype.render=function(t,r){t.type,t.center,t.areaFill,t.closed;var i=At(t,["type","center","areaFill","closed"]),a=yie(t),s=oe(r).maybeAppendByClassName(uu.lineGroup,"g"),o=oe(r).maybeAppendByClassName(uu.regionGroup,"g"),u=vie(s,a,t,i),l=mie(o,a,t);return te(te([],L(u),!1),L(l),!1)},e}(Tt);function sN(n,e){return Object.fromEntries(Object.entries(n).map(function(t){var r=L(t,2),i=r[0],a=r[1];return[i,Lr(a,e)]}))}function vw(n,e){return e&&se(e)?n.filter(e):n}function oN(n,e){var t=e.startAngle,r=e.endAngle;return(r-t)*n+t}function w0(n,e){if(e.type==="linear"){var t=L(e.startPos,2),r=t[0],i=t[1],a=L(e.endPos,2),s=a[0],o=a[1],u=L([s-r,o-i],2),l=u[0],c=u[1];return W8([l,c])}var h=ou(oN(n,e));return[-Math.sin(h),Math.cos(h)]}function mw(n,e,t){var r=w0(n,t);return Gne(r,e!=="positive")}function mc(n,e){return mw(n,e.labelDirection,e)}function xie(n,e){var t=L(e.startPos,2),r=t[0],i=t[1],a=L(e.endPos,2),s=a[0],o=a[1],u=L([s-r,o-i],2),l=u[0],c=u[1];return[r+l*n,i+c*n]}function wie(n,e){var t=e.radius,r=L(e.center,2),i=r[0],a=r[1],s=ou(oN(n,e));return[i+t*Math.cos(s),a+t*Math.sin(s)]}function E0(n,e){return e.type==="linear"?xie(n,e):wie(n,e)}function uN(n){return w0(0,n)[1]===0}function lN(n){return w0(0,n)[0]===0}function cN(n,e){return e-n===360}function oT(n,e,t,r,i){var a=e-n,s=L([i,i],2),o=s[0],u=s[1],l=L([ou(n),ou(e)],2),c=l[0],h=l[1],d=function(C){return[t+i*Math.cos(C),r+i*Math.sin(C)]},f=L(d(c),2),g=f[0],p=f[1],v=L(d(h),2),m=v[0],y=v[1];if(cN(n,e)){var b=(h+c)/2,x=L(d(b),2),w=x[0],E=x[1];return[["M",g,p],["A",o,u,0,1,0,w,E],["A",o,u,0,1,0,m,y]]}var _=a>180?1:0,S=n>e?0:1;return"M".concat(g,",").concat(p,",A").concat(o,",").concat(u,",0,").concat(_,",").concat(S,",").concat(m,",").concat(y)}function Eie(n){var e=n.attributes,t=e.startAngle,r=e.endAngle,i=e.center,a=e.radius;return te(te([t,r],L(i),!1),[a],!1)}function _ie(n,e,t,r){var i=e.startAngle,a=e.endAngle,s=e.center,o=e.radius;return n.selectAll(Xe.line.class).data([{d:oT.apply(void 0,te(te([i,a],L(s),!1),[o],!1))}],function(u,l){return l}).join(function(u){return u.append("path").attr("className",Xe.line.name).styles(e).styles({d:function(l){return l.d}})},function(u){return u.transition(function(){var l=this,c=qne(this,Eie(this),te(te([i,a],L(s),!1),[o],!1),r.update);if(c){var h=function(){var d=Fn(l.attributes,"__keyframe_data__");l.style.d=oT.apply(void 0,te([],L(d),!1))};c.onframe=h,c.onfinish=h}return c}).styles(e)},function(u){return u.remove()}).styles(t).transitions()}function Sie(n,e){e.truncRange,e.truncShape,e.lineExtension}function kie(n,e,t){t===void 0&&(t=[0,0]);var r=L([n,e,t],3),i=L(r[0],2),a=i[0],s=i[1],o=L(r[1],2),u=o[0],l=o[1],c=L(r[2],2),h=c[0],d=c[1],f=L([u-a,l-s],2),g=f[0],p=f[1],v=Math.sqrt(Math.pow(g,2)+Math.pow(p,2)),m=L([-h/v,d/v],2),y=m[0],b=m[1];return[y*g,y*p,b*g,b*p]}function uT(n){var e=L(n,2),t=L(e[0],2),r=t[0],i=t[1],a=L(e[1],2),s=a[0],o=a[1];return{x1:r,y1:i,x2:s,y2:o}}function Cie(n,e,t,r){var i=e.showTrunc,a=e.startPos,s=e.endPos,o=e.truncRange,u=e.lineExtension,l=L([a,s],2),c=L(l[0],2),h=c[0],d=c[1],f=L(l[1],2),g=f[0],p=f[1],v=L(u?kie(a,s,u):new Array(4).fill(0),4),m=v[0],y=v[1],b=v[2],x=v[3],w=function(M){return n.selectAll(Xe.line.class).data(M,function(F,j){return j}).join(function(F){return F.append("line").attr("className",function(j){return"".concat(Xe.line.name," ").concat(j.className)}).styles(t).transition(function(j){return ai(this,uT(j.line),!1)})},function(F){return F.styles(t).transition(function(j){var B=j.line;return ai(this,uT(B),r.update)})},function(F){return F.remove()}).transitions()};if(!i||!o)return w([{line:[[h+m,d+y],[g+b,p+x]],className:Xe.line.name}]);var E=L(o,2),_=E[0],S=E[1],C=g-h,k=p-d,A=L([h+C*_,d+k*_],2),T=A[0],O=A[1],P=L([h+C*S,d+k*S],2),R=P[0],N=P[1],D=w([{line:[[h+m,d+y],[T,O]],className:Xe.lineFirst.name},{line:[[R,N],[g+b,p+x]],className:Xe.lineSecond.name}]);return Sie(n,e),D}function Aie(n,e,t,r){var i=t.showArrow,a=t.showTrunc,s=t.lineArrow,o=t.lineArrowOffset,u=t.lineArrowSize,l;if(e==="arc"?l=n.select(Xe.line.class):a?l=n.select(Xe.lineSecond.class):l=n.select(Xe.line.class),!i||!s||t.type==="arc"&&cN(t.startAngle,t.endAngle)){var c=l.node();c&&(c.style.markerEnd=void 0);return}var h=da(s);h.attr(r),lw(h,u,!0),l.style("markerEnd",h).style("markerEndOffset",-o)}function Tie(n,e,t){var r=e.type,i,a=be(e,"line");return r==="linear"?i=Cie(n,e,jA(a,"arrow"),t):i=_ie(n,e,jA(a,"arrow"),t),Aie(n,r,e,a),i}function Oie(n,e){return mw(n,e.gridDirection,e)}function hN(n){var e=n.type,t=n.gridCenter;return e==="linear"?t:t||n.center}function Mie(n,e){var t=e.gridLength;return n.map(function(r,i){var a=r.value,s=L(E0(a,e),2),o=s[0],u=s[1],l=L(ea(Oie(a,e),t),2),c=l[0],h=l[1];return{id:i,points:[[o,u],[o+c,u+h]]}})}function Pie(n,e){var t=e.gridControlAngles,r=hN(e);if(!r)throw new Error("grid center is not provide");if(n.length<2)throw new Error("Invalid grid data");if(!t||t.length===0)throw new Error("Invalid gridControlAngles");var i=L(r,2),a=i[0],s=i[1];return n.map(function(o,u){var l=o.value,c=L(E0(l,e),2),h=c[0],d=c[1],f=L([h-a,d-s],2),g=f[0],p=f[1],v=[];return t.forEach(function(m){var y=ou(m),b=L([Math.cos(y),Math.sin(y)],2),x=b[0],w=b[1],E=g*x-p*w+a,_=g*w+p*x+s;v.push([E,_])}),{points:v,id:u}})}function Nie(n,e,t,r){var i=be(t,"grid"),a=i.type,s=i.areaFill,o=hN(t),u=vw(e,t.gridFilter),l=a==="segment"?Mie(u,t):Pie(u,t),c=V(V({},i),{center:o,areaFill:se(s)?u.map(function(h,d){return Lr(s,[h,d,u])}):s,animate:r,data:l});return n.selectAll(Xe.grid.class).data([1]).join(function(h){return h.append(function(){return new bie({style:c})}).attr("className",Xe.grid.name)},function(h){return h.transition(function(){return this.update(c)})},function(h){return h.remove()}).transitions()}var s2=function(){function n(e,t,r,i){this.set(e,t,r,i)}return Object.defineProperty(n.prototype,"left",{get:function(){return this.x1},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"top",{get:function(){return this.y1},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"right",{get:function(){return this.x2},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"bottom",{get:function(){return this.y2},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"width",{get:function(){return this.defined("x2")&&this.defined("x1")?this.x2-this.x1:void 0},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"height",{get:function(){return this.defined("y2")&&this.defined("y1")?this.y2-this.y1:void 0},enumerable:!1,configurable:!0}),n.prototype.rotatedPoints=function(e,t,r){var i=this,a=i.x1,s=i.y1,o=i.x2,u=i.y2,l=Math.cos(e),c=Math.sin(e),h=t-t*l+r*c,d=r-t*c-r*l,f=[[l*a-c*u+h,c*a+l*u+d],[l*o-c*u+h,c*o+l*u+d],[l*a-c*s+h,c*a+l*s+d],[l*o-c*s+h,c*o+l*s+d]];return f},n.prototype.set=function(e,t,r,i){return r<e?(this.x2=e,this.x1=r):(this.x1=e,this.x2=r),i<t?(this.y2=t,this.y1=i):(this.y1=t,this.y2=i),this},n.prototype.defined=function(e){return this[e]!==Number.MAX_VALUE&&this[e]!==-Number.MAX_VALUE},n}();function o2(n,e){var t=n.getEulerAngles()||0;n.setEulerAngles(0);var r=n.getBounds(),i=L(r.min,2),a=i[0],s=i[1],o=L(r.max,2),u=o[0],l=o[1],c=n.getBBox(),h=c.width,d=c.height,f=d,g=0,p=0,v=a,m=s,y=q8(n);if(y){f-=1.5;var b=y.style.textAlign,x=y.style.textBaseline;b==="center"?v=(a+u)/2:(b==="right"||b==="end")&&(v=u),x==="middle"?m=(s+l)/2:x==="bottom"&&(m=l)}var w=L(yn(e),4),E=w[0],_=E===void 0?0:E,S=w[1],C=S===void 0?0:S,k=w[2],A=k===void 0?_:k,T=w[3],O=T===void 0?C:T,P=new s2((g+=a)-O,(p+=s)-_,g+h+C,p+f+A);return n.setEulerAngles(t),P.rotatedPoints(ou(t),v,m)}function nl(n,e){return e[0]<=Math.max(n[0][0],n[1][0])&&e[0]<=Math.min(n[0][0],n[1][0])&&e[1]<=Math.max(n[0][1],n[1][1])&&e[1]<=Math.min(n[0][1],n[1][1])}function rl(n,e,t){var r=(e[1]-n[1])*(t[0]-e[0])-(e[0]-n[0])*(t[1]-e[1]);return r===0?0:r<0?2:1}function Die(n,e){var t=rl(n[0],n[1],e[0]),r=rl(n[0],n[1],e[1]),i=rl(e[0],e[1],n[0]),a=rl(e[0],e[1],n[1]);return!!(t!==r&&i!==a||t===0&&nl(n,e[0])||r===0&&nl(n,e[1])||i===0&&nl(e,n[0])||a===0&&nl(e,n[1]))}function Rie(n,e){var t=n.length;if(t<3)return!1;var r=[e,[9999,e[1]]],i=0,a=0;do{var s=[n[a],n[(a+1)%t]];if(Die(s,r)){if(rl(s[0],e,s[1])===0)return nl(s,e);i++}a=(a+1)%t}while(a!==0);return!!(i&1)}function Lie(n,e){return e.every(function(t){return Rie(n,t)})}function Iie(n,e,t){var r=n.x1,i=n.x2,a=n.y1,s=n.y2,o=[[r,a],[i,a],[i,s],[r,s]],u=o2(e,t);return Lie(o,u)}function Fie(n,e){var t=L(n,4),r=t[0],i=t[1],a=t[2],s=t[3],o=L(e,4),u=o[0],l=o[1],c=o[2],h=o[3],d=a-r,f=s-i,g=c-u,p=h-l,v=d*p-g*f;if(v===0)return!1;var m=v>0,y=r-u,b=i-l,x=d*b-f*y;if(x<0===m)return!1;var w=g*b-p*y;return!(w<0===m||x>v===m||w>v===m)}function Bie(n,e){var t=[[n[0],n[1],n[2],n[3]],[n[2],n[3],n[4],n[5]],[n[4],n[5],n[6],n[7]],[n[6],n[7],n[0],n[1]]];return t.some(function(r){return Fie(e,r)})}function zie(n,e,t){var r,i,a=o2(n,t).flat(1),s=o2(e,t).flat(1),o=[[a[0],a[1],a[2],a[3]],[a[0],a[1],a[4],a[5]],[a[4],a[5],a[6],a[7]],[a[2],a[3],a[6],a[7]]];try{for(var u=Kl(o),l=u.next();!l.done;l=u.next()){var c=l.value;if(Bie(s,c))return!0}}catch(h){r={error:h}}finally{try{l&&!l.done&&(i=u.return)&&i.call(u)}finally{if(r)throw r.error}}return!1}function $ie(n,e){var t=n.type,r=n.labelDirection,i=n.crossSize;if(!i)return!1;if(t==="arc"){var a=n.center,s=n.radius,o=L(a,2),u=o[0],l=o[1],c=r==="negative"?0:i,h=-s-c,d=s+c,f=L(yn(e),4),g=f[0],p=f[1],v=f[2],m=f[3];return new s2(u+h-m,l+h-g,u+d+p,l+d+v)}var y=L(n.startPos,2),b=y[0],x=y[1],w=L(n.endPos,2),E=w[0],_=w[1],S=L(lN(n)?[-e,0,e,0]:[0,e,0,-e],4),C=S[0],k=S[1],A=S[2],T=S[3],O=mc(0,n),P=ea(O,i),R=new s2(b,x,E,_);return R.x1+=T,R.y1+=C,R.x2+=k+P[0],R.y2+=A+P[1],R}function _0(n,e,t){var r,i,a=e.crossPadding,s=new Set,o=null,u=$ie(e,a),l=function(g){return u?Iie(u,g):!0},c=function(g,p){return!g||!g.firstChild?!0:!zie(g.firstChild,p.firstChild,yn(t))};try{for(var h=Kl(n),d=h.next();!d.done;d=h.next()){var f=d.value;l(f)?!o||c(o,f)?o=f:(s.add(o),s.add(f)):s.add(f)}}catch(g){r={error:g}}finally{try{d&&!d.done&&(i=h.return)&&i.call(h)}finally{if(r)throw r.error}}return Array.from(s)}function Oy(n,e){return e===void 0&&(e={}),de(n)?0:typeof n=="number"?n:Math.floor(Ine(n,e))}function jie(n,e,t,r){if(!(n.length<=1)){var i=e.suffix,a=i===void 0?"...":i,s=e.minLength,o=e.maxLength,u=o===void 0?1/0:o,l=e.step,c=l===void 0?" ":l,h=e.margin,d=h===void 0?[0,0,0,0]:h,f=j8(r.getTextShape(n[0])),g=Oy(c,f),p=s?Oy(s,f):g,v=Oy(u,f);(de(v)||v===1/0)&&(v=Math.max.apply(null,n.map(function(E){return E.getBBox().width})));var m=n.slice(),y=L(d,4);y[0],y[1],y[2],y[3];for(var b=function(E){if(m.forEach(function(_){r.ellipsis(r.getTextShape(_),E,a)}),m=_0(n,t,d),m.length<1)return{value:void 0}},x=v;x>p+g;x-=g){var w=b(x);if(typeof w=="object")return w.value}}}var qie={parity:function(n,e){var t=e.seq,r=t===void 0?2:t;return n.filter(function(i,a){return a%r?(ii(i),!1):!0})}},Gie=function(n){return n.filter($8)};function Wie(n,e,t,r){var i=n.length,a=e.keepHeader,s=e.keepTail;if(!(i<=1||i===2&&a&&s)){var o=qie.parity,u=function(b){return b.forEach(r.show),b},l=2,c=n.slice(),h=n.slice(),d=Math.min.apply(Math,te([1],L(n.map(function(b){return b.getBBox().width})),!1));if(t.type==="linear"&&(uN(t)||lN(t))){var f=GA(n[0]).left,g=GA(n[i-1]).right,p=Math.abs(g-f)||1;l=Math.max(Math.floor(i*d/p),l)}var v,m;for(a&&(v=c.splice(0,1)[0]),s&&(m=c.splice(-1,1)[0],c.reverse()),u(c);l<n.length&&_0(Gie(m?te(te([m],L(h),!1),[v],!1):te([v],L(h),!1)),t,e==null?void 0:e.margin).length;){if(m&&!v&&l%2===0){var y=c.splice(0,1);y.forEach(r.hide)}else if(m&&v){var y=c.splice(0,1);y.forEach(r.hide)}h=o(u(c),{seq:l}),l++}}}function Vie(n,e,t,r){var i,a,s=e.optionalAngles,o=s===void 0?[0,45,90]:s,u=e.margin,l=e.recoverWhenFailed,c=l===void 0?!0:l,h=n.map(function(m){return m.getLocalEulerAngles()}),d=function(){return _0(n,t,u).length<1},f=function(m){return n.forEach(function(y,b){var x=Array.isArray(m)?m[b]:m;r.rotate(y,+x)})};try{for(var g=Kl(o),p=g.next();!p.done;p=g.next()){var v=p.value;if(f(v),d())return}}catch(m){i={error:m}}finally{try{p&&!p.done&&(a=g.return)&&a.call(g)}finally{if(i)throw i.error}}c&&f(h)}function Uie(n){var e=n.type,t=n.labelDirection;return e==="linear"&&uN(n)?t==="negative"?"bottom":"top":"middle"}function Hie(n,e,t,r){var i=e.wordWrapWidth,a=i===void 0?50:i,s=e.maxLines,o=s===void 0?3:s,u=e.recoverWhenFailed,l=u===void 0?!0:u,c=e.margin,h=c===void 0?[0,0,0,0]:c,d=n.map(function(y){return y.attr("maxLines")||1}),f=Math.min.apply(Math,te([],L(d),!1)),g=function(){return _0(n,t,h).length<1},p=Uie(t),v=function(y){return n.forEach(function(b,x){var w=Array.isArray(y)?y[x]:y;r.wrap(b,a,w,p)})};if(!(f>o)){for(var m=f;m<=o;m++)if(v(m),g())return;l&&v(d)}}var Yie=new Map([["hide",Wie],["rotate",Vie],["ellipsis",jie],["wrap",Hie]]);function Xie(n,e,t){return e.labelOverlap.length<1?!1:t==="hide"?!Rne(n[0]):t==="rotate"?!n.some(function(r){var i;return!!(!((i=r.attr("transform"))===null||i===void 0)&&i.includes("rotate"))}):t==="ellipsis"||t==="wrap"?n.filter(function(r){return r.querySelector("text")}).length>1:!0}function Kie(n,e,t){var r=e.labelOverlap,i=r===void 0?[]:r;i.length&&i.forEach(function(a){var s=a.type,o=Yie.get(s);Xie(n,e,s)&&(o==null||o(n,a,e,t))})}function Zie(){for(var n=[],e=0;e<arguments.length;e++)n[e]=arguments[e];var t=function(r){return r==="positive"?-1:1};return n.reduce(function(r,i){return r*t(i)},1)}function lT(n){for(var e=n;e<0;)e+=360;return Math.round(e%360)}function u2(n,e){var t=L(n,2),r=t[0],i=t[1],a=L(e,2),s=a[0],o=a[1],u=L([r*s+i*o,r*o-i*s],2),l=u[0],c=u[1];return Math.atan2(c,l)}function Jie(n){var e=(n+360)%180;return hn(e,-90,90)||(e+=180),e}function Qie(n,e,t){var r,i=t.labelAlign,a=(r=e.style.transform)===null||r===void 0?void 0:r.includes("rotate");if(a)return e.getLocalEulerAngles();var s=0,o=mc(n.value,t),u=w0(n.value,t);return i==="horizontal"?0:(i==="perpendicular"?s=u2([1,0],o):s=u2([u[0]<0?-1:1,0],u),Jie(B8(s)))}function dN(n,e,t){var r=t.type,i=t.labelAlign,a=mc(n,t),s=lT(e),o=lT(B8(u2([1,0],a))),u="center",l="middle";return r==="linear"?[90,270].includes(o)&&s===0?(u="center",l=a[1]===1?"top":"bottom"):!(o%180)&&[90,270].includes(s)?u="center":o===0?(hn(s,0,90,!1,!0)||hn(s,0,90)||hn(s,270,360))&&(u="start"):o===90?hn(s,0,90,!1,!0)?u="start":(hn(s,90,180)||hn(s,270,360))&&(u="end"):o===270?hn(s,0,90,!1,!0)?u="end":(hn(s,90,180)||hn(s,270,360))&&(u="start"):o===180&&(s===90?u="start":(hn(s,0,90)||hn(s,270,360))&&(u="end")):i==="parallel"?hn(o,0,180,!0)?l="top":l="bottom":i==="horizontal"?hn(o,90,270,!1)?u="end":(hn(o,270,360,!1)||hn(o,0,90))&&(u="start"):i==="perpendicular"&&(hn(o,90,270)?u="end":u="start"),{textAlign:u,textBaseline:l}}function eae(n,e,t){e.setLocalEulerAngles(n);var r=e.__data__.value,i=dN(r,n,t),a=e.querySelector(Xe.labelItem.class);a&&fN(a,i)}function cT(n,e,t){var r=t.showTick,i=t.tickLength,a=t.tickDirection,s=t.labelDirection,o=t.labelSpacing,u=e.indexOf(n),l=Lr(o,[n,u,e]),c=L([mc(n.value,t),Zie(s,a)],2),h=c[0],d=c[1],f=d===1?Lr(r?i:0,[n,u,e]):0,g=L(tl(ea(h,l+f),E0(n.value,t)),2),p=g[0],v=g[1];return{x:p,y:v}}function tae(n,e,t,r){var i=r.labelFormatter,a=se(i)?function(){return da(Lr(i,[n,e,t,mc(n.value,r)]))}:function(){return da(n.label||"")};return a}function fN(n,e){n.nodeName==="text"&&n.attr(e)}function hT(n){Kie(this.node().childNodes,n,{hide:ii,show:pc,rotate:function(e,t){eae(+t,e,n)},ellipsis:function(e,t,r){e&&r2(e,t||1/0,r)},wrap:function(e,t,r){e&&Fne(e,t,r)},getTextShape:function(e){return e.querySelector("text")}})}function dT(n,e,t,r,i){var a=t.indexOf(e),s=oe(n).append(tae(e,a,t,i)).attr("className",Xe.labelItem.name).node(),o=L(fa(sN(r,[e,a,t])),2),u=o[0],l=o[1],c=l.transform,h=At(l,["transform"]);V8(s,c);var d=Qie(e,s,i);return s.getLocalEulerAngles()||s.setLocalEulerAngles(d),fN(s,V(V({},dN(e.value,d,i)),u)),n.attr(h),s}function nae(n,e,t,r){var i=vw(e,t.labelFilter),a=be(t,"label");return n.selectAll(Xe.label.class).data(i,function(s,o){return o}).join(function(s){return s.append("g").attr("className",Xe.label.name).transition(function(o){dT(this,o,e,a,t);var u=cT(o,e,t),l=u.x,c=u.y;return this.style.transform="translate(".concat(l,", ").concat(c,")"),null}).call(function(){hT.call(n,t)})},function(s){return s.transition(function(o){var u=this.querySelector(Xe.labelItem.class),l=dT(this,o,e,a,t),c=cie(u,l,r.update),h=cT(o,e,t),d=h.x,f=h.y,g=ai(this,{transform:"translate(".concat(d,", ").concat(f,")")},r.update);return te(te([],L(c),!1),[g],!1)}).call(function(o){var u=Fn(o,"_transitions").flat().filter($8);uie(u,function(){hT.call(n,t)})})},function(s){return s.transition(function(){var o=this,u=x0(this.childNodes[0],r.exit);return ku(u,function(){return oe(o).remove()}),u})}).transitions()}function gN(n,e){return mw(n,e.tickDirection,e)}function rae(n,e){var t=L(n,2),r=t[0],i=t[1];return[[0,0],[r*e,i*e]]}function iae(n,e,t,r,i){var a=i.tickLength,s=L(rae(r,Lr(a,[n,e,t])),2),o=L(s[0],2),u=o[0],l=o[1],c=L(s[1],2),h=c[0],d=c[1];return{x1:u,x2:h,y1:l,y2:d}}function aae(n,e,t,r,i){var a=i.tickFormatter,s=gN(e.value,i),o="line";return se(a)&&(o=function(){return Lr(a,[e,t,r,s])}),n.append(o).attr("className",Xe.tickItem.name)}function sae(n,e,t,r,i,a,s){var o=gN(n.value,a),u=iae(n,e,t,o,a),l=u.x1,c=u.x2,h=u.y1,d=u.y2,f=L(fa(sN(s,[n,e,t,o])),2),g=f[0],p=f[1];r.node().nodeName==="line"&&r.styles(V({x1:l,x2:c,y1:h,y2:d},g)),i.attr(p),r.styles(g)}function fT(n,e,t,r,i,a){var s=aae(oe(this),n,e,t,r);sae(n,e,t,s,this,r,i);var o=L(E0(n.value,r),2),u=o[0],l=o[1];return ai(this,{transform:"translate(".concat(u,", ").concat(l,")")},a)}function oae(n,e,t,r){var i=vw(e,t.tickFilter),a=be(t,"tick");return n.selectAll(Xe.tick.class).data(i,function(s){return s.id||s.label}).join(function(s){return s.append("g").attr("className",Xe.tick.name).transition(function(o,u){return fT.call(this,o,u,i,t,a,!1)})},function(s){return s.transition(function(o,u){return this.removeChildren(),fT.call(this,o,u,i,t,a,r.update)})},function(s){return s.transition(function(){var o=this,u=x0(this.childNodes[0],r.exit);return ku(u,function(){return o.remove()}),u})}).transitions()}var gT=hi({text:"text"},"title");function S0(n){return/\S+-\S+/g.test(n)?n.split("-").map(function(e){return e[0]}):n.length>2?[n[0]]:n.split("")}function uae(n,e){var t=n.attributes,r=t.position,i=t.spacing,a=t.inset,s=t.text,o=n.getBBox(),u=e.getBBox(),l=S0(r),c=L(yn(s?i:0),4),h=c[0],d=c[1],f=c[2],g=c[3],p=L(yn(a),4),v=p[0],m=p[1],y=p[2],b=p[3],x=L([g+d,h+f],2),w=x[0],E=x[1],_=L([b+m,v+y],2),S=_[0],C=_[1];if(l[0]==="l")return new $n(o.x,o.y,u.width+o.width+w+S,Math.max(u.height+C,o.height));if(l[0]==="t")return new $n(o.x,o.y,Math.max(u.width+S,o.width),u.height+o.height+E+C);var k=L([e.attributes.width||u.width,e.attributes.height||u.height],2),A=k[0],T=k[1];return new $n(u.x,u.y,A+o.width+w+S,T+o.height+E+C)}function lae(n,e){var t=Object.entries(e).reduce(function(r,i){var a=L(i,2),s=a[0],o=a[1],u=n.node().attr(s);return u||(r[s]=o),r},{});n.styles(t)}function cae(n){var e,t,r,i,a=n,s=a.width,o=a.height,u=a.position,l=L([+s/2,+o/2],2),c=l[0],h=l[1],d=L([+c,+h,"center","middle"],4),f=d[0],g=d[1],p=d[2],v=d[3],m=S0(u);return m.includes("l")&&(e=L([0,"start"],2),f=e[0],p=e[1]),m.includes("r")&&(t=L([+s,"end"],2),f=t[0],p=t[1]),m.includes("t")&&(r=L([0,"top"],2),g=r[0],v=r[1]),m.includes("b")&&(i=L([+o,"bottom"],2),g=i[0],v=i[1]),{x:f,y:g,textAlign:p,textBaseline:v}}var hae=function(n){Ne(e,n);function e(t){return n.call(this,t,{text:"",width:0,height:0,fill:"#4a505a",fontWeight:"bold",fontSize:12,fontFamily:"sans-serif",inset:0,spacing:0,position:"top-left"})||this}return e.prototype.getAvailableSpace=function(){var t=this,r=this.attributes,i=r.width,a=r.height,s=r.position,o=r.spacing,u=r.inset,l=t.querySelector(gT.text.class);if(!l)return new $n(0,0,+i,+a);var c=l.getBBox(),h=c.width,d=c.height,f=L(yn(o),4),g=f[0],p=f[1],v=f[2],m=f[3],y=L([0,0,+i,+a],4),b=y[0],x=y[1],w=y[2],E=y[3],_=S0(s);if(_.includes("i"))return new $n(b,x,w,E);_.forEach(function(N,D){var M,F,j,B;N==="t"&&(M=L(D===0?[d+v,+a-d-v]:[0,+a],2),x=M[0],E=M[1]),N==="r"&&(F=L([+i-h-m],1),w=F[0]),N==="b"&&(j=L([+a-d-g],1),E=j[0]),N==="l"&&(B=L(D===0?[h+p,+i-h-p]:[0,+i],2),b=B[0],w=B[1])});var S=L(yn(u),4),C=S[0],k=S[1],A=S[2],T=S[3],O=L([T+k,C+A],2),P=O[0],R=O[1];return new $n(b+T,x+C,w-P,E-R)},e.prototype.getBBox=function(){return this.title?this.title.getBBox():new $n(0,0,0,0)},e.prototype.render=function(t,r){var i=this;t.width,t.height,t.position,t.spacing;var a=At(t,["width","height","position","spacing"]),s=L(fa(a),1),o=s[0],u=cae(t),l=u.x,c=u.y,h=u.textAlign,d=u.textBaseline;yr(!!a.text,oe(r),function(f){i.title=f.maybeAppendByClassName(gT.text,"text").styles(o).call(lae,{x:l,y:c,textAlign:h,textBaseline:d}).node()})},e}(Tt);function dae(n,e,t){var r=t.titlePosition,i=r===void 0?"lb":r,a=t.titleSpacing,s=S0(i),o=n.node().getLocalBounds(),u=L(o.min,2),l=u[0],c=u[1],h=L(o.halfExtents,2),d=h[0],f=h[1],g=L(e.node().getLocalBounds().halfExtents,2),p=g[0],v=g[1],m=L([l+d,c+f],2),y=m[0],b=m[1],x=L(yn(a),4),w=x[0],E=x[1],_=x[2],S=x[3];if(["start","end"].includes(i)&&t.type==="linear"){var C=t.startPos,k=t.endPos,A=L(i==="start"?[C,k]:[k,C],2),T=A[0],O=A[1],P=W8([-O[0]+T[0],-O[1]+T[1]]),R=L(ea(P,w),2),N=R[0],D=R[1];return{x:T[0]+N,y:T[1]+D}}return s.includes("t")&&(b-=f+v+w),s.includes("r")&&(y+=d+p+E),s.includes("l")&&(y-=d+p+S),s.includes("b")&&(b+=f+v+_),{x:y,y:b}}function fae(n,e,t){var r=n.getGeometryBounds().halfExtents,i=r[1]*2;if(e==="vertical"){if(t==="left")return"rotate(-90) translate(0, ".concat(i/2,")");if(t==="right")return"rotate(-90) translate(0, -".concat(i/2,")")}return""}function pT(n,e,t,r,i){var a=be(r,"title"),s=L(fa(a),2),o=s[0],u=s[1],l=u.transform,c=u.transformOrigin,h=At(u,["transform","transformOrigin"]);e.styles(h);var d=l||fae(n.node(),o.direction,o.position);n.styles(V(V({},o),{transformOrigin:c})),V8(n.node(),d);var f=dae(oe(t._offscreen||t.querySelector(Xe.mainGroup.class)),e,r),g=f.x,p=f.y,v=ai(e.node(),{transform:"translate(".concat(g,", ").concat(p,")")},i);return v}function gae(n,e,t,r){var i=t.titleText;return n.selectAll(Xe.title.class).data([{title:i}].filter(function(a){return!!a.title}),function(a,s){return a.title}).join(function(a){return a.append(function(){return da(i)}).attr("className",Xe.title.name).transition(function(){return pT(oe(this),n,e,t,r.enter)})},function(a){return a.transition(function(){return pT(oe(this),n,e,t,r.update)})},function(a){return a.remove()}).transitions()}function vT(n,e,t,r){var i=n.showLine,a=n.showTick,s=n.showLabel,o=e.maybeAppendByClassName(Xe.lineGroup,"g"),u=yr(i,o,function(f){return Tie(f,n,r)})||[],l=e.maybeAppendByClassName(Xe.tickGroup,"g"),c=yr(a,l,function(f){return oae(f,t,n,r)})||[],h=e.maybeAppendByClassName(Xe.labelGroup,"g"),d=yr(s,h,function(f){return nae(f,t,n,r)})||[];return te(te(te([],L(u),!1),L(c),!1),L(d),!1).filter(function(f){return!!f})}var pae=function(n){Ne(e,n);function e(t){return n.call(this,t,pw)||this}return e.prototype.render=function(t,r,i){var a=this,s=t.titleText,o=t.data,u=t.animate,l=t.showTitle,c=t.showGrid,h=t.dataThreshold,d=t.truncRange,f=Yne(o,h).filter(function(w){var E=w.value;return!(d&&E>d[0]&&E<d[1])}),g=sT(i===void 0?u:i),p=oe(r).maybeAppendByClassName(Xe.gridGroup,"g"),v=yr(c,p,function(w){return Nie(w,f,t,g)})||[],m=oe(r).maybeAppendByClassName(Xe.mainGroup,"g");s&&(!this.initialized&&g.enter||this.initialized&&g.update)&&vT(t,oe(this.offscreenGroup),f,sT(!1));var y=vT(t,oe(m.node()),f,g),b=oe(r).maybeAppendByClassName(Xe.titleGroup,"g"),x=yr(l,b,function(w){return gae(w,a,t,g)})||[];return te(te(te([],L(v),!1),L(y),!1),L(x),!1).flat().filter(function(w){return!!w})},e}(Tt),Ar=hi({prevBtnGroup:"prev-btn-group",prevBtn:"prev-btn",nextBtnGroup:"next-btn-group",nextBtn:"next-btn",pageInfoGroup:"page-info-group",pageInfo:"page-info",playWindow:"play-window",contentGroup:"content-group",controller:"controller",clipPath:"clip-path"},"navigator"),vae=function(n){Ne(e,n);function e(t){var r=n.call(this,t,{x:0,y:0,animate:{easing:"linear",duration:200,fill:"both"},buttonCursor:"pointer",buttonFill:"black",buttonD:Sre(0,0,6),buttonSize:12,controllerPadding:5,controllerSpacing:5,formatter:function(i,a){return"".concat(i,"/").concat(a)},defaultPage:0,loop:!1,orientation:"horizontal",pageNumFill:"black",pageNumFontSize:12,pageNumTextAlign:"start",pageNumTextBaseline:"middle"})||this;return r.playState="idle",r.contentGroup=r.appendChild(new Yt({class:Ar.contentGroup.name})),r.playWindow=r.contentGroup.appendChild(new Yt({class:Ar.playWindow.name})),r.innerCurrPage=r.defaultPage,r}return Object.defineProperty(e.prototype,"defaultPage",{get:function(){var t=this.attributes.defaultPage;return St(t,0,Math.max(this.pageViews.length-1,0))},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"pageViews",{get:function(){return this.playWindow.children},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"controllerShape",{get:function(){return this.totalPages>1?{width:55,height:0}:{width:0,height:0}},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"pageShape",{get:function(){var t=this.pageViews,r=L(are(t.map(function(h){var d=h.getBBox(),f=d.width,g=d.height;return[f,g]})).map(function(h){return Math.max.apply(Math,te([],L(h),!1))}),2),i=r[0],a=r[1],s=this.attributes,o=s.pageWidth,u=o===void 0?i:o,l=s.pageHeight,c=l===void 0?a:l;return{pageWidth:u,pageHeight:c}},enumerable:!1,configurable:!0}),e.prototype.getContainer=function(){return this.playWindow},Object.defineProperty(e.prototype,"totalPages",{get:function(){return this.pageViews.length},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"currPage",{get:function(){return this.innerCurrPage},enumerable:!1,configurable:!0}),e.prototype.getBBox=function(){var t=n.prototype.getBBox.call(this),r=t.x,i=t.y,a=this.controllerShape,s=this.pageShape,o=s.pageWidth,u=s.pageHeight;return new $n(r,i,o+a.width,u)},e.prototype.goTo=function(t){var r=this,i=this.attributes.animate,a=this,s=a.currPage,o=a.playState,u=a.playWindow,l=a.pageViews;if(o!=="idle"||t<0||l.length<=0||t>=l.length)return null;l[s].setLocalPosition(0,0),this.prepareFollowingPage(t);var c=L(this.getFollowingPageDiff(t),2),h=c[0],d=c[1];this.playState="running";var f=tN(u,[{transform:"translate(0, 0)"},{transform:"translate(".concat(-h,", ").concat(-d,")")}],i);return ku(f,function(){r.innerCurrPage=t,r.playState="idle",r.setVisiblePages([t]),r.updatePageInfo()}),f},e.prototype.prev=function(){var t=this.attributes.loop,r=this.pageViews.length,i=this.currPage;if(!t&&i<=0)return null;var a=t?(i-1+r)%r:St(i-1,0,r);return this.goTo(a)},e.prototype.next=function(){var t=this.attributes.loop,r=this.pageViews.length,i=this.currPage;if(!t&&i>=r-1)return null;var a=t?(i+1)%r:St(i+1,0,r);return this.goTo(a)},e.prototype.renderClipPath=function(t){var r=this.pageShape,i=r.pageWidth,a=r.pageHeight;if(!i||!a){this.contentGroup.style.clipPath=void 0;return}this.clipPath=t.maybeAppendByClassName(Ar.clipPath,"rect").styles({width:i,height:a}),this.contentGroup.attr("clipPath",this.clipPath.node())},e.prototype.setVisiblePages=function(t){this.playWindow.children.forEach(function(r,i){t.includes(i)?pc(r):ii(r)})},e.prototype.adjustControllerLayout=function(){var t=this,r=t.prevBtnGroup,i=t.nextBtnGroup,a=t.pageInfoGroup,s=this.attributes,o=s.orientation,u=s.controllerPadding,l=a.getBBox(),c=l.width;l.height;var h=L(o==="horizontal"?[-180,0]:[-90,90],2),d=h[0],f=h[1];r.setLocalEulerAngles(d),i.setLocalEulerAngles(f);var g=r.getBBox(),p=g.width,v=g.height,m=i.getBBox(),y=m.width,b=m.height,x=Math.max(p,c,y),w=o==="horizontal"?{offset:[[0,0],[p/2+u,0],[p+c+u*2,0]],textAlign:"start"}:{offset:[[x/2,-v-u],[x/2,0],[x/2,b+u]],textAlign:"center"},E=L(w.offset,3),_=L(E[0],2),S=_[0],C=_[1],k=L(E[1],2),A=k[0],T=k[1],O=L(E[2],2),P=O[0],R=O[1],N=w.textAlign,D=a.querySelector("text");D&&(D.style.textAlign=N),r.setLocalPosition(S,C),a.setLocalPosition(A,T),i.setLocalPosition(P,R)},e.prototype.updatePageInfo=function(){var t,r=this,i=r.currPage,a=r.pageViews,s=r.attributes.formatter;a.length<2||((t=this.pageInfoGroup.querySelector(Ar.pageInfo.class))===null||t===void 0||t.attr("text",s(i+1,a.length)),this.adjustControllerLayout())},e.prototype.getFollowingPageDiff=function(t){var r=this.currPage;if(r===t)return[0,0];var i=this.attributes.orientation,a=this.pageShape,s=a.pageWidth,o=a.pageHeight,u=t<r?-1:1;return i==="horizontal"?[u*s,0]:[0,u*o]},e.prototype.prepareFollowingPage=function(t){var r=this,i=r.currPage,a=r.pageViews;if(this.setVisiblePages([t,i]),t!==i){var s=L(this.getFollowingPageDiff(t),2),o=s[0],u=s[1];a[t].setLocalPosition(o,u)}},e.prototype.renderController=function(t){var r=this,i=this.attributes.controllerSpacing,a=this.pageShape,s=a.pageWidth,o=a.pageHeight,u=this.pageViews.length>=2,l=t.maybeAppendByClassName(Ar.controller,"g");if(b0(l.node(),u),!!u){var c=be(this.attributes,"button"),h=be(this.attributes,"pageNum"),d=L(fa(c),2),f=d[0],g=d[1],p=f.size,v=At(f,["size"]),m=!l.select(Ar.prevBtnGroup.class).node(),y=l.maybeAppendByClassName(Ar.prevBtnGroup,"g").styles(g);this.prevBtnGroup=y.node();var b=y.maybeAppendByClassName(Ar.prevBtn,"path"),x=l.maybeAppendByClassName(Ar.nextBtnGroup,"g").styles(g);this.nextBtnGroup=x.node();var w=x.maybeAppendByClassName(Ar.nextBtn,"path");[b,w].forEach(function(_){_.styles(V(V({},v),{transformOrigin:"center"})),lw(_.node(),p,!0)});var E=l.maybeAppendByClassName(Ar.pageInfoGroup,"g");this.pageInfoGroup=E.node(),E.maybeAppendByClassName(Ar.pageInfo,"text").styles(h),this.updatePageInfo(),l.node().setLocalPosition(s+i,o/2),m&&(this.prevBtnGroup.addEventListener("click",function(){r.prev()}),this.nextBtnGroup.addEventListener("click",function(){r.next()}))}},e.prototype.render=function(t,r){var i=t.x,a=i===void 0?0:i,s=t.y,o=s===void 0?0:s;this.attr("transform","translate(".concat(a,", ").concat(o,")"));var u=oe(r);this.renderClipPath(u),this.renderController(u),this.setVisiblePages([this.defaultPage]),this.goTo(this.defaultPage)},e.prototype.bindEvents=function(){var t=this,r=Xl(function(){return t.render(t.attributes,t)},50);this.playWindow.addEventListener(De.INSERTED,r),this.playWindow.addEventListener(De.REMOVED,r)},e}(Tt);function mae(n,e,t){var r=1.4,i=r*t;return[["M",n-t,e-i],["L",n+t,e-i],["L",n+t,e+i],["L",n-t,e+i],["Z"]]}var pN=1.4,vN=.4;function yae(n,e,t){var r=t,i=r*pN,a=r/2,s=r/6,o=n+i*vN;return[["M",n,e],["L",o,e+a],["L",n+i,e+a],["L",n+i,e-a],["L",o,e-a],["Z"],["M",o,e+s],["L",n+i-2,e+s],["M",o,e-s],["L",n+i-2,e-s]]}function bae(n,e,t){var r=t,i=r*pN,a=r/2,s=r/6,o=e+i*vN;return[["M",n,e],["L",n-a,o],["L",n-a,e+i],["L",n+a,e+i],["L",n+a,o],["Z"],["M",n-s,o],["L",n-s,e+i-2],["M",n+s,o],["L",n+s,e+i-2]]}Qe.registerSymbol("hiddenHandle",mae);Qe.registerSymbol("verticalHandle",yae);Qe.registerSymbol("horizontalHandle",bae);function l2(n,e,t){return n===void 0&&(n="horizontal"),n==="horizontal"?e:t}var rr=hi({layout:"flex",markerGroup:"marker-group",marker:"marker",labelGroup:"label-group",label:"label",valueGroup:"value-group",value:"value",backgroundGroup:"background-group",background:"background"},"legend-category-item");function xae(n){var e=n.querySelector(rr.marker.class);return e?e.style:{}}var wae=function(n){Ne(e,n);function e(t){return n.call(this,t,{span:[1,1],marker:function(){return new pa({style:{r:6}})},markerSize:10,labelFill:"#646464",valueFill:"#646464",labelFontSize:12,valueFontSize:12,labelTextBaseline:"middle",valueTextBaseline:"middle"})||this}return Object.defineProperty(e.prototype,"showValue",{get:function(){var t=this.attributes.valueText;return t?typeof t=="string"||typeof t=="number"?t!=="":typeof t=="function"?!0:t.attr("text")!=="":!1},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"actualSpace",{get:function(){var t=this.labelGroup,r=this.valueGroup,i=this.attributes.markerSize,a=t.node().getBBox(),s=a.width,o=a.height,u=r.node().getBBox(),l=u.width,c=u.height;return{markerWidth:i,labelWidth:s,valueWidth:l,height:Math.max(i,o,c)}},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"span",{get:function(){var t=this.attributes.span;if(!t)return[1,1];var r=L(yn(t),2),i=r[0],a=r[1],s=this.showValue?a:0,o=i+s;return[i/o,s/o]},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"shape",{get:function(){var t,r=this.attributes,i=r.markerSize,a=r.width,s=this.actualSpace,o=s.markerWidth,u=s.height,l=this.actualSpace,c=l.labelWidth,h=l.valueWidth,d=L(this.spacing,2),f=d[0],g=d[1];if(a){var p=a-i-f-g,v=L(this.span,2),m=v[0],y=v[1];t=L([m*p,y*p],2),c=t[0],h=t[1]}var b=o+c+h+f+g;return{width:b,height:u,markerWidth:o,labelWidth:c,valueWidth:h}},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"spacing",{get:function(){var t=this.attributes.spacing;if(!t)return[0,0];var r=L(yn(t),2),i=r[0],a=r[1];return this.showValue?[i,a]:[i,0]},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"layout",{get:function(){var t=this.shape,r=t.markerWidth,i=t.labelWidth,a=t.valueWidth,s=t.width,o=t.height,u=L(this.spacing,2),l=u[0],c=u[1];return{height:o,width:s,markerWidth:r,labelWidth:i,valueWidth:a,position:[r/2,r+l,r+i+l+c]}},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"scaleSize",{get:function(){var t=xae(this.markerGroup.node()),r=this.attributes,i=r.markerSize,a=r.markerStrokeWidth,s=a===void 0?t.strokeWidth:a,o=r.markerLineWidth,u=o===void 0?t.lineWidth:o,l=r.markerStroke,c=l===void 0?t.stroke:l,h=+(s||u||(c?1:0))*Math.sqrt(2),d=this.markerGroup.node().getBBox(),f=d.width,g=d.height;return(1-h/Math.max(f,g))*i},enumerable:!1,configurable:!0}),e.prototype.renderMarker=function(t){var r=this,i=this.attributes.marker,a=be(this.attributes,"marker");this.markerGroup=t.maybeAppendByClassName(rr.markerGroup,"g").style("zIndex",0),yr(!!i,this.markerGroup,function(){var s,o=r.markerGroup.node(),u=(s=o.childNodes)===null||s===void 0?void 0:s[0],l=typeof i=="string"?new Qe({style:{symbol:i},className:rr.marker.name}):i();u?l.nodeName===u.nodeName?u instanceof Qe?u.update(V(V({},a),{symbol:i})):(ere(u,l),oe(u).styles(a)):(u.remove(),oe(l).attr("className",rr.marker.name).styles(a),o.appendChild(l)):(l instanceof Qe||oe(l).attr("className",rr.marker.name).styles(a),o.appendChild(l)),r.markerGroup.node().scale(1/r.markerGroup.node().getScale()[0]);var c=lw(r.markerGroup.node(),r.scaleSize,!0);r.markerGroup.node().style._transform="scale(".concat(c,")")})},e.prototype.renderLabel=function(t){var r=be(this.attributes,"label"),i=r.text,a=At(r,["text"]);this.labelGroup=t.maybeAppendByClassName(rr.labelGroup,"g").style("zIndex",0),this.labelGroup.maybeAppendByClassName(rr.label,function(){return da(i)}).styles(a)},e.prototype.renderValue=function(t){var r=this,i=be(this.attributes,"value"),a=i.text,s=At(i,["text"]);this.valueGroup=t.maybeAppendByClassName(rr.valueGroup,"g").style("zIndex",0),yr(this.showValue,this.valueGroup,function(){r.valueGroup.maybeAppendByClassName(rr.value,function(){return da(a)}).styles(s)})},e.prototype.renderBackground=function(t){var r=this.shape,i=r.width,a=r.height,s=be(this.attributes,"background");this.background=t.maybeAppendByClassName(rr.backgroundGroup,"g").style("zIndex",-1),this.background.maybeAppendByClassName(rr.background,"rect").styles(V({width:i,height:a},s))},e.prototype.adjustLayout=function(){var t=this.layout,r=t.labelWidth,i=t.valueWidth,a=t.height,s=L(t.position,3),o=s[0],u=s[1],l=s[2],c=a/2;this.markerGroup.styles({transform:"translate(".concat(o,", ").concat(c,")").concat(this.markerGroup.node().style._transform)}),this.labelGroup.styles({transform:"translate(".concat(u,", ").concat(c,")")}),r2(this.labelGroup.select(rr.label.class).node(),Math.ceil(r)),this.showValue&&(this.valueGroup.styles({transform:"translate(".concat(l,", ").concat(c,")")}),r2(this.valueGroup.select(rr.value.class).node(),Math.ceil(i)))},e.prototype.render=function(t,r){var i=oe(r),a=t.x,s=a===void 0?0:a,o=t.y,u=o===void 0?0:o;i.styles({transform:"translate(".concat(s,", ").concat(u,")")}),this.renderMarker(i),this.renderLabel(i),this.renderValue(i),this.renderBackground(i),this.adjustLayout()},e}(Tt),Ss=hi({page:"item-page",navigator:"navigator",item:"item"},"items"),mT=function(n,e,t){return t===void 0&&(t=!0),n?e(n):t},Eae=function(n){Ne(e,n);function e(t){var r=n.call(this,t,{data:[],gridRow:1/0,gridCol:void 0,padding:0,width:1e3,height:100,rowPadding:0,colPadding:0,layout:"flex",orientation:"horizontal",click:U0,mouseenter:U0,mouseleave:U0})||this;return r.navigatorShape=[0,0],r}return Object.defineProperty(e.prototype,"pageViews",{get:function(){return this.navigator.getContainer()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"grid",{get:function(){var t=this.attributes,r=t.gridRow,i=t.gridCol,a=t.data;if(!r&&!i)throw new Error("gridRow and gridCol can not be set null at the same time");return r&&i?[r,i]:r?[r,a.length]:[a.length,i]},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"renderData",{get:function(){var t=this.attributes,r=t.data,i=t.layout,a=be(this.attributes,"item"),s=r.map(function(o,u){var l=o.id,c=l===void 0?u:l,h=o.label,d=o.value;return{id:"".concat(c),index:u,style:V({layout:i,labelText:h,valueText:d},Object.fromEntries(Object.entries(a).map(function(f){var g=L(f,2),p=g[0],v=g[1];return[p,Lr(v,[o,u,r])]})))}});return s},enumerable:!1,configurable:!0}),e.prototype.getGridLayout=function(){var t=this,r=this.attributes,i=r.orientation,a=r.width,s=r.rowPadding,o=r.colPadding,u=L(this.navigatorShape,1),l=u[0],c=L(this.grid,2),h=c[0],d=c[1],f=d*h,g=0;return this.pageViews.children.map(function(p,v){var m,y,b=Math.floor(v/f),x=v%f,w=t.ifHorizontal(d,h),E=[Math.floor(x/w),x%w];i==="vertical"&&E.reverse();var _=L(E,2),S=_[0],C=_[1],k=(a-l-(d-1)*o)/d,A=p.getBBox().height,T=L([0,0],2),O=T[0],P=T[1];return i==="horizontal"?(m=L([g,S*(A+s)],2),O=m[0],P=m[1],g=C===d-1?0:g+k+o):(y=L([C*(k+o),g],2),O=y[0],P=y[1],g=S===h-1?0:g+A+s),{page:b,index:v,row:S,col:C,pageIndex:x,width:k,height:A,x:O,y:P}})},e.prototype.getFlexLayout=function(){var t=this.attributes,r=t.width,i=t.height,a=t.rowPadding,s=t.colPadding,o=L(this.navigatorShape,1),u=o[0],l=L(this.grid,2),c=l[0],h=l[1],d=L([r-u,i],2),f=d[0],g=d[1],p=L([0,0,0,0,0,0,0,0],8),v=p[0],m=p[1],y=p[2],b=p[3],x=p[4],w=p[5],E=p[6],_=p[7];return this.pageViews.children.map(function(S,C){var k,A,T,O,P=S.getBBox(),R=P.width,N=P.height,D=E===0?0:s,M=E+D+R;if(M<=f&&mT(x,function(j){return j<h}))return k=L([E+D,_,M],3),v=k[0],m=k[1],E=k[2],{width:R,height:N,x:v,y:m,page:y,index:C,pageIndex:b++,row:w,col:x++};A=L([w+1,0,0,_+N+a],4),w=A[0],x=A[1],E=A[2],_=A[3];var F=_+N;return F<=g&&mT(w,function(j){return j<c})?(T=L([E,_,R],3),v=T[0],m=T[1],E=T[2],{width:R,height:N,x:v,y:m,page:y,index:C,pageIndex:b++,row:w,col:x++}):(O=L([0,0,R,0,y+1,0,0,0],8),v=O[0],m=O[1],E=O[2],_=O[3],y=O[4],b=O[5],w=O[6],x=O[7],{width:R,height:N,x:v,y:m,page:y,index:C,pageIndex:b++,row:w,col:x++})})},Object.defineProperty(e.prototype,"itemsLayout",{get:function(){this.navigatorShape=[0,0];var t=this.attributes.layout==="grid"?this.getGridLayout:this.getFlexLayout,r=t.call(this);return r.slice(-1)[0].page>0?(this.navigatorShape=[55,0],t.call(this)):r},enumerable:!1,configurable:!0}),e.prototype.ifHorizontal=function(t,r){var i=this.attributes.orientation;return l2(i,t,r)},e.prototype.flattenPage=function(t){t.querySelectorAll(Ss.item.class).forEach(function(r){t.appendChild(r)}),t.querySelectorAll(Ss.page.class).forEach(function(r){var i=t.removeChild(r);i.destroy()})},e.prototype.renderItems=function(t){var r=this.attributes,i=r.click,a=r.mouseenter,s=r.mouseleave;this.flattenPage(t);var o=this.dispatchCustomEvent.bind(this);oe(t).selectAll(Ss.item.class).data(this.renderData,function(u){return u.id}).join(function(u){return u.append(function(l){var c=l.style;return new wae({style:c})}).attr("className",Ss.item.name).on("click",function(){i==null||i(this),o("itemClick",{item:this})}).on("pointerenter",function(){a==null||a(this),o("itemMouseenter",{item:this})}).on("pointerleave",function(){s==null||s(this),o("itemMouseleave",{item:this})})},function(u){return u.each(function(l){var c=l.style;this.update(c)})},function(u){return u.remove()})},e.prototype.relayoutNavigator=function(){var t,r=this.attributes,i=r.layout,a=r.width,s=((t=this.pageViews.children[0])===null||t===void 0?void 0:t.getBBox().height)||0,o=L(this.navigatorShape,2),u=o[0],l=o[1];this.navigator.update(i==="grid"?{pageWidth:a-u,pageHeight:s-l}:{})},e.prototype.adjustLayout=function(){var t=this,r=Object.entries(Bne(this.itemsLayout,"page")).map(function(a){var s=L(a,2),o=s[0],u=s[1];return{page:o,layouts:u}}),i=te([],L(this.navigator.getContainer().children),!1);r.forEach(function(a){var s=a.layouts,o=t.pageViews.appendChild(new Yt({className:Ss.page.name}));s.forEach(function(u){var l=u.x,c=u.y,h=u.index,d=u.width,f=u.height,g=i[h];o.appendChild(g),wl(g,"__layout__",u),g.update({x:l,y:c,width:d,height:f})})}),this.relayoutNavigator()},e.prototype.renderNavigator=function(t){var r=this.attributes.orientation,i=be(this.attributes,"nav"),a=un({orientation:r},i),s=this;return t.selectAll(Ss.navigator.class).data(["nav"]).join(function(o){return o.append(function(){return new vae({style:a})}).attr("className",Ss.navigator.name).each(function(){s.navigator=this})},function(o){return o.each(function(){this.update(a)})},function(o){return o.remove()}),this.navigator},e.prototype.getBBox=function(){return this.navigator.getBBox()},e.prototype.render=function(t,r){var i=this.attributes.data;if(!(!i||i.length===0)){var a=this.renderNavigator(oe(r));this.renderItems(a.getContainer()),this.adjustLayout()}},e.prototype.dispatchCustomEvent=function(t,r){var i=new It(t,{detail:r});this.dispatchEvent(i)},e}(Tt),Lu=hi({markerGroup:"marker-group",marker:"marker",labelGroup:"label-group",label:"label"},"handle"),mN={showLabel:!0,formatter:function(n){return n.toString()},markerSize:25,markerStroke:"#c5c5c5",markerFill:"#fff",markerLineWidth:1,labelFontSize:12,labelFill:"#c5c5c5",labelText:"",orientation:"vertical",spacing:0};(function(n){Ne(e,n);function e(t){return n.call(this,t,mN)||this}return e.prototype.render=function(t,r){var i=oe(r).maybeAppendByClassName(Lu.markerGroup,"g");this.renderMarker(i);var a=oe(r).maybeAppendByClassName(Lu.labelGroup,"g");this.renderLabel(a)},e.prototype.renderMarker=function(t){var r=this,i=this.attributes,a=i.orientation,s=i.markerSymbol,o=s===void 0?l2(a,"horizontalHandle","verticalHandle"):s;yr(!!o,t,function(u){var l=be(r.attributes,"marker"),c=V({symbol:o},l);r.marker=u.maybeAppendByClassName(Lu.marker,function(){return new Qe({style:c})}).update(c)})},e.prototype.renderLabel=function(t){var r=this,i=this.attributes,a=i.showLabel,s=i.orientation,o=i.spacing,u=o===void 0?0:o,l=i.formatter;yr(a,t,function(c){var h,d=be(r.attributes,"label"),f=d.text,g=At(d,["text"]),p=((h=c.select(Lu.marker.class))===null||h===void 0?void 0:h.node().getBBox())||{},v=p.width,m=v===void 0?0:v,y=p.height,b=y===void 0?0:y,x=L(l2(s,[0,b+u,"center","top"],[m+u,0,"start","middle"]),4),w=x[0],E=x[1],_=x[2],S=x[3];c.maybeAppendByClassName(Lu.label,"text").styles(V(V({},g),{x:w,y:E,text:l(f).toString(),textAlign:_,textBaseline:S}))})},e})(Tt);var yN={showTitle:!0,padding:0,orientation:"horizontal",backgroundFill:"transparent",titleText:"",titleSpacing:4,titlePosition:"top-left",titleFill:"#2C3542",titleFontWeight:"bold",titleFontFamily:"sans-serif",titleFontSize:12},_ae=un({},yN,{});un({},yN,Lo(mN,"handle"),{color:["#d0e3fa","#acc7f6","#8daaf2","#6d8eea","#4d73cd","#325bb1","#5a3e75","#8c3c79","#e23455","#e7655b"],indicatorBackgroundFill:"#262626",indicatorLabelFill:"white",indicatorLabelFontSize:12,indicatorVisibility:"hidden",labelAlign:"value",labelDirection:"positive",labelSpacing:5,showHandle:!0,showIndicator:!0,showLabel:!0,slidable:!0,titleText:"",type:"continuous"});var Iu=hi({title:"title",titleGroup:"title-group",items:"items",itemsGroup:"items-group",contentGroup:"content-group",ribbonGroup:"ribbon-group",ribbon:"ribbon",handlesGroup:"handles-group",handle:"handle",startHandle:"start-handle",endHandle:"end-handle",labelGroup:"label-group",label:"label",indicator:"indicator"},"legend"),Sae=function(n){Ne(e,n);function e(t){return n.call(this,t,_ae)||this}return e.prototype.renderTitle=function(t,r,i){var a=this.attributes,s=a.showTitle,o=a.titleText,u=be(this.attributes,"title"),l=L(fa(u),2),c=l[0],h=l[1];this.titleGroup=t.maybeAppendByClassName(Iu.titleGroup,"g").styles(h);var d=V(V({width:r,height:i},c),{text:s?o:""});this.title=this.titleGroup.maybeAppendByClassName(Iu.title,function(){return new hae({style:d})}).update(d)},e.prototype.renderItems=function(t,r){var i=r.x,a=r.y,s=r.width,o=r.height,u=be(this.attributes,"title",!0),l=L(fa(u),2),c=l[0],h=l[1],d=V(V({},c),{width:s,height:o,x:0,y:0});this.itemsGroup=t.maybeAppendByClassName(Iu.itemsGroup,"g").styles(V(V({},h),{transform:"translate(".concat(i,", ").concat(a,")")}));var f=this;this.itemsGroup.selectAll(Iu.items.class).data(["items"]).join(function(g){return g.append(function(){return new Eae({style:d})}).attr("className",Iu.items.name).each(function(){f.items=oe(this)})},function(g){return g.update(d)},function(g){return g.remove()})},e.prototype.adjustLayout=function(){var t=this.attributes.showTitle;if(t){var r=this.title.node().getAvailableSpace(),i=r.x,a=r.y;this.itemsGroup.node().style.transform="translate(".concat(i,", ").concat(a,")")}},Object.defineProperty(e.prototype,"availableSpace",{get:function(){var t=this.attributes,r=t.showTitle,i=t.width,a=t.height;return r?this.title.node().getAvailableSpace():new $n(0,0,i,a)},enumerable:!1,configurable:!0}),e.prototype.getBBox=function(){var t,r,i=(t=this.title)===null||t===void 0?void 0:t.node(),a=(r=this.items)===null||r===void 0?void 0:r.node();return!i||!a?n.prototype.getBBox.call(this):uae(i,a)},e.prototype.render=function(t,r){var i=this.attributes,a=i.width,s=i.height,o=i.x,u=o===void 0?0:o,l=i.y,c=l===void 0?0:l,h=oe(r);r.style.transform="translate(".concat(u,", ").concat(c,")"),this.renderTitle(h,a,s),this.renderItems(h,this.availableSpace),this.adjustLayout()},e}(Tt),kae={backgroundFill:"#262626",backgroundLineCap:"round",backgroundLineWidth:1,backgroundStroke:"#333",backgroundZIndex:-1,formatter:function(n){return n.toString()},labelFill:"#fff",labelFontSize:12,labelTextBaseline:"middle",padding:[2,4],position:"right",radius:0,zIndex:999},My=hi({background:"background",labelGroup:"label-group",label:"label"},"indicator"),Cae=function(n){Ne(e,n);function e(t){var r=n.call(this,t,kae)||this;return r.point=[0,0],r.group=r.appendChild(new Yt({})),r.isMutationObserved=!0,r}return e.prototype.renderBackground=function(){if(this.label){var t=this.attributes,r=t.position,i=t.padding,a=L(yn(i),4),s=a[0],o=a[1],u=a[2],l=a[3],c=this.label.node().getLocalBounds(),h=c.min,d=c.max,f=new $n(h[0]-l,h[1]-s,d[0]+o-h[0]+l,d[1]+u-h[1]+s),g=this.getPath(r,f),p=be(this.attributes,"background");this.background=oe(this.group).maybeAppendByClassName(My.background,"path").styles(V(V({},p),{d:g})),this.group.appendChild(this.label.node())}},e.prototype.renderLabel=function(){var t=this.attributes,r=t.formatter,i=t.labelText,a=be(this.attributes,"label"),s=L(fa(a),2),o=s[0],u=s[1];o.text;var l=At(o,["text"]);if(this.label=oe(this.group).maybeAppendByClassName(My.labelGroup,"g").styles(u),!!i){var c=this.label.maybeAppendByClassName(My.label,function(){return da(r(i))}).style("text",r(i).toString());c.selectAll("text").styles(l)}},e.prototype.adjustLayout=function(){var t=L(this.point,2),r=t[0],i=t[1],a=this.attributes,s=a.x,o=a.y;this.group.attr("transform","translate(".concat(s-r,", ").concat(o-i,")"))},e.prototype.getPath=function(t,r){var i=this.attributes.radius,a=r.x,s=r.y,o=r.width,u=r.height,l=[["M",a+i,s],["L",a+o-i,s],["A",i,i,0,0,1,a+o,s+i],["L",a+o,s+u-i],["A",i,i,0,0,1,a+o-i,s+u],["L",a+i,s+u],["A",i,i,0,0,1,a,s+u-i],["L",a,s+i],["A",i,i,0,0,1,a+i,s],["Z"]],c={top:4,right:6,bottom:0,left:2},h=c[t],d=this.createCorner([l[h].slice(-2),l[h+1].slice(-2)]);return l.splice.apply(l,te([h+1,1],L(d),!1)),l[0][0]="M",l},e.prototype.createCorner=function(t,r){r===void 0&&(r=10);var i=.8,a=Qne.apply(void 0,te([],L(t),!1)),s=L(t,2),o=L(s[0],2),u=o[0],l=o[1],c=L(s[1],2),h=c[0],d=c[1],f=L(a?[h-u,[u,h]]:[d-l,[l,d]],2),g=f[0],p=L(f[1],2),v=p[0],m=p[1],y=g/2,b=g/Math.abs(g),x=r*b,w=x/2,E=x*Math.sqrt(3)/2*i,_=L([v,v+y-w,v+y,v+y+w,m],5),S=_[0],C=_[1],k=_[2],A=_[3],T=_[4];return a?(this.point=[k,l-E],[["L",S,l],["L",C,l],["L",k,l-E],["L",A,l],["L",T,l]]):(this.point=[u+E,k],[["L",u,S],["L",u,C],["L",u+E,k],["L",u,A],["L",u,T]])},e.prototype.applyVisibility=function(){var t=this.attributes.visibility;t==="hidden"?ii(this):pc(this)},e.prototype.bindEvents=function(){this.label.on(De.BOUNDS_CHANGED,this.renderBackground)},e.prototype.render=function(){this.renderLabel(),this.renderBackground(),this.adjustLayout(),this.applyVisibility()},e}(Tt);function c2(n){return n===void 0&&(n=""),{CONTAINER:"".concat(n,"tooltip"),TITLE:"".concat(n,"tooltip-title"),LIST:"".concat(n,"tooltip-list"),LIST_ITEM:"".concat(n,"tooltip-list-item"),NAME:"".concat(n,"tooltip-list-item-name"),MARKER:"".concat(n,"tooltip-list-item-marker"),NAME_LABEL:"".concat(n,"tooltip-list-item-name-label"),VALUE:"".concat(n,"tooltip-list-item-value"),CROSSHAIR_X:"".concat(n,"tooltip-crosshair-x"),CROSSHAIR_Y:"".concat(n,"tooltip-crosshair-y")}}var yT={overflow:"hidden","white-space":"nowrap","text-overflow":"ellipsis"};function Aae(n){var e;n===void 0&&(n="");var t=c2(n);return e={},e[".".concat(t.CONTAINER)]={position:"absolute",visibility:"visible","z-index":8,transition:"visibility 0.2s cubic-bezier(0.23, 1, 0.32, 1), left 0.4s cubic-bezier(0.23, 1, 0.32, 1), top 0.4s cubic-bezier(0.23, 1, 0.32, 1)","background-color":"rgba(255, 255, 255, 0.96)","box-shadow":"0 6px 12px 0 rgba(0, 0, 0, 0.12)","border-radius":"4px",color:"rgba(0, 0, 0, 0.65)","font-size":"12px","line-height":"20px",padding:"12px","min-width":"120px","max-width":"360px","font-family":"Roboto-Regular"},e[".".concat(t.TITLE)]={color:"rgba(0, 0, 0, 0.45)"},e[".".concat(t.LIST)]={margin:"0px","list-style-type":"none",padding:"0px"},e[".".concat(t.LIST_ITEM)]={"list-style-type":"none",display:"flex","line-height":"2em","align-items":"center","justify-content":"space-between","white-space":"nowrap"},e[".".concat(t.MARKER)]={width:"8px",height:"8px","border-radius":"50%",display:"inline-block","margin-right":"4px"},e[".".concat(t.NAME)]={display:"flex","align-items":"center","max-width":"216px"},e[".".concat(t.NAME_LABEL)]=V({flex:1},yT),e[".".concat(t.VALUE)]=V({display:"inline-block",float:"right",flex:1,"text-align":"right","min-width":"28px","margin-left":"30px",color:"rgba(0, 0, 0, 0.85)"},yT),e[".".concat(t.CROSSHAIR_X)]={position:"absolute",width:"1px","background-color":"rgba(0, 0, 0, 0.25)"},e[".".concat(t.CROSSHAIR_Y)]={position:"absolute",height:"1px","background-color":"rgba(0, 0, 0, 0.25)"},e}var Tae=function(n){Ne(e,n);function e(t){var r=this,i,a,s=(a=(i=t.style)===null||i===void 0?void 0:i.template)===null||a===void 0?void 0:a.prefixCls,o=c2(s);return r=n.call(this,t,{data:[],x:0,y:0,visibility:"visible",title:"",position:"bottom-right",offset:[5,5],enterable:!1,container:{x:0,y:0},bounding:null,template:{prefixCls:"",container:'<div class="'.concat(o.CONTAINER,'"></div>'),title:'<div class="'.concat(o.TITLE,'"></div>'),item:'<li class="'.concat(o.LIST_ITEM,`" data-index={index}>
        <span class="`).concat(o.NAME,`">
          <span class="`).concat(o.MARKER,`" style="background:{color}"></span>
          <span class="`).concat(o.NAME_LABEL,`" title="{name}">{name}</span>
        </span>
        <span class="`).concat(o.VALUE,`" title="{value}">{value}</span>
      </li>`)},style:Aae(s)})||this,r.timestamp=-1,r.prevCustomContentKey=r.attributes.contentKey,r.initShape(),r.render(r.attributes,r),r}return Object.defineProperty(e.prototype,"HTMLTooltipElement",{get:function(){return this.element},enumerable:!1,configurable:!0}),e.prototype.getContainer=function(){return this.element},Object.defineProperty(e.prototype,"elementSize",{get:function(){var t=this.element.offsetWidth,r=this.element.offsetHeight;return{width:t,height:r}},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"HTMLTooltipItemsElements",{get:function(){var t=this.attributes,r=t.data,i=t.template;return r.map(function(a,s){var o=a.name,u=o===void 0?"":o,l=a.color,c=l===void 0?"black":l,h=a.index,d=At(a,["name","color","index"]),f=V({name:u,color:c,index:h??s},d);return ub(EI(i.item,f))})},enumerable:!1,configurable:!0}),e.prototype.render=function(t,r){this.renderHTMLTooltipElement(),this.updatePosition()},e.prototype.destroy=function(){var t;(t=this.element)===null||t===void 0||t.remove(),n.prototype.destroy.call(this)},e.prototype.show=function(t,r){var i=this;if(t!==void 0&&r!==void 0){var a=this.element.style.visibility==="hidden",s=function(){i.attributes.x=t??i.attributes.x,i.attributes.y=r??i.attributes.y,i.updatePosition()};a?this.closeTransition(s):s()}this.element.style.visibility="visible"},e.prototype.hide=function(t,r){t===void 0&&(t=0),r===void 0&&(r=0);var i=this.attributes.enterable;i&&this.isCursorEntered(t,r)||(this.element.style.visibility="hidden")},e.prototype.initShape=function(){var t=this.attributes.template;this.element=ub(t.container),this.id&&this.element.setAttribute("id",this.id)},e.prototype.renderCustomContent=function(){if(!(this.prevCustomContentKey!==void 0&&this.prevCustomContentKey===this.attributes.contentKey)){this.prevCustomContentKey=this.attributes.contentKey;var t=this.attributes.content;t&&(typeof t=="string"?this.element.innerHTML=t:VA(this.element,t))}},e.prototype.renderHTMLTooltipElement=function(){var t,r,i=this.attributes,a=i.template,s=i.title,o=i.enterable,u=i.style,l=i.content,c=c2(a.prefixCls),h=this.element;if(this.element.style.pointerEvents=o?"auto":"none",l)this.renderCustomContent();else{s?(h.innerHTML=a.title,h.getElementsByClassName(c.TITLE)[0].innerHTML=s):(r=(t=h.getElementsByClassName(c.TITLE))===null||t===void 0?void 0:t[0])===null||r===void 0||r.remove();var d=this.HTMLTooltipItemsElements,f=document.createElement("ul");f.className=c.LIST,VA(f,d);var g=this.element.querySelector(".".concat(c.LIST));g?g.replaceWith(f):h.appendChild(f)}rre(h,u)},e.prototype.getRelativeOffsetFromCursor=function(t){var r=this.attributes,i=r.position,a=r.offset,s=t||i,o=s.split("-"),u={left:[-1,0],right:[1,0],top:[0,-1],bottom:[0,1]},l=this.elementSize,c=l.width,h=l.height,d=[-c/2,-h/2];return o.forEach(function(f){var g=L(d,2),p=g[0],v=g[1],m=L(u[f],2),y=m[0],b=m[1];d=[p+(c/2+a[0])*y,v+(h/2+a[1])*b]}),d},e.prototype.setOffsetPosition=function(t){var r=L(t,2),i=r[0],a=r[1],s=this.attributes,o=s.x,u=o===void 0?0:o,l=s.y,c=l===void 0?0:l,h=s.container,d=h.x,f=h.y;this.element.style.left="".concat(+u+d+i,"px"),this.element.style.top="".concat(+c+f+a,"px")},e.prototype.updatePosition=function(){var t=this.attributes.showDelay,r=t===void 0?60:t,i=Date.now();this.timestamp>0&&i-this.timestamp<r||(this.timestamp=i,this.setOffsetPosition(this.autoPosition(this.getRelativeOffsetFromCursor())))},e.prototype.autoPosition=function(t){var r=L(t,2),i=r[0],a=r[1],s=this.attributes,o=s.x,u=s.y,l=s.bounding,c=s.position;if(!l)return[i,a];var h=this.element,d=h.offsetWidth,f=h.offsetHeight,g=L([+o+i,+u+a],2),p=g[0],v=g[1],m={left:"right",right:"left",top:"bottom",bottom:"top"},y=l.x,b=l.y,x=l.width,w=l.height,E={left:p<y,right:p+d>y+x,top:v<b,bottom:v+f>b+w},_=[];c.split("-").forEach(function(C){E[C]?_.push(m[C]):_.push(C)});var S=_.join("-");return this.getRelativeOffsetFromCursor(S)},e.prototype.isCursorEntered=function(t,r){if(this.element){var i=this.element.getBoundingClientRect(),a=i.x,s=i.y,o=i.width,u=i.height;return new $n(a,s,o,u).isPointIn(t,r)}return!1},e.prototype.closeTransition=function(t){var r=this,i=this.element.style.transition;this.element.style.transition="none",t(),setTimeout(function(){r.element.style.transition=i},10)},e.tag="tooltip",e}(Tt),Oae=function(n){Ne(e,n);function e(t){var r=n.call(this,un({},e.defaultOptions,t))||this;return r.hoverColor="#f5f5f5",r.selectedColor="#e6f7ff",r.background=r.appendChild(new mn({})),r.label=r.background.appendChild(new Yt({})),r}return Object.defineProperty(e.prototype,"padding",{get:function(){return yn(this.style.padding)},enumerable:!1,configurable:!0}),e.prototype.renderLabel=function(){var t=this.style,r=t.label,i=t.value,a=be(this.attributes,"label");oe(this.label).maybeAppend(".label",function(){return da(r)}).attr("className","label").styles(a),this.label.attr("__data__",i)},e.prototype.renderBackground=function(){var t=this.label.getBBox(),r=L(this.padding,4),i=r[0],a=r[1],s=r[2],o=r[3],u=t.width,l=t.height,c=u+o+a,h=l+i+s,d=be(this.attributes,"background"),f=this.style,g=f.width,p=g===void 0?0:g,v=f.height,m=v===void 0?0:v,y=f.selected;this.background.attr(V(V({},d),{width:Math.max(c,p),height:Math.max(h,m),fill:y?this.selectedColor:"#fff"})),this.label.attr({transform:"translate(".concat(o,", ").concat((h-l)/2,")")})},e.prototype.render=function(){this.renderLabel(),this.renderBackground()},e.prototype.bindEvents=function(){var t=this;this.addEventListener("pointerenter",function(){t.style.selected||t.background.attr("fill",t.hoverColor)}),this.addEventListener("pointerleave",function(){t.style.selected||t.background.attr("fill",t.style.backgroundFill)});var r=this;this.addEventListener("click",function(){var i=t.style,a=i.label,s=i.value,o=i.onClick;o==null||o(s,{label:a,value:s},r)})},e.defaultOptions={style:{value:"",label:"",cursor:"pointer"}},e}(Tt),Mae=function(n){Ne(e,n);function e(t){var r,i,a=n.call(this,un({},e.defaultOptions,t))||this;a.currentValue=(r=e.defaultOptions.style)===null||r===void 0?void 0:r.defaultValue,a.isPointerInSelect=!1,a.select=a.appendChild(new mn({className:"select",style:{cursor:"pointer",width:0,height:0}})),a.dropdown=a.appendChild(new mn({className:"dropdown"}));var s=a.style.defaultValue;return s&&(!((i=a.style.options)===null||i===void 0)&&i.some(function(o){return o.value===s}))&&(a.currentValue=s),a}return e.prototype.setValue=function(t){this.currentValue=t,this.render()},e.prototype.getValue=function(){return this.currentValue},Object.defineProperty(e.prototype,"dropdownPadding",{get:function(){return yn(this.style.dropdownPadding)},enumerable:!1,configurable:!0}),e.prototype.renderSelect=function(){var t=this,r,i=this.style,a=i.x,s=i.y,o=i.width,u=i.height,l=i.bordered,c=i.showDropdownIcon,h=be(this.attributes,"select"),d=be(this.attributes,"placeholder");this.select.attr(V(V({x:a,y:s,width:o,height:u},h),{fill:"#fff",strokeWidth:l?1:0}));var f=this.dropdownPadding,g=10;c&&oe(this.select).maybeAppend(".dropdown-icon","path").style("d","M-5,-3.5 L0,3.5 L5,-3.5").style("transform","translate(".concat(a+o-g-f[1]-f[3],", ").concat(s+u/2,")")).style("lineWidth",1).style("stroke",this.select.style.stroke);var p=(r=this.style.options)===null||r===void 0?void 0:r.find(function(b){return b.value===t.currentValue}),v=V({x:a+f[3]},d);oe(this.select).selectAll(".placeholder").data(p?[]:[1]).join(function(b){return b.append("text").attr("className","placeholder").styles(v).style("y",function(){var x=this.getBBox();return s+(u-x.height)/2})},function(b){return b.styles(v)},function(b){return b.remove()});var m=be(this.attributes,"optionLabel"),y=V({x:a+f[3]},m);oe(this.select).selectAll(".value").data(p?[p]:[]).join(function(b){return b.append(function(x){return da(x.label)}).attr("className","value").styles(y).style("y",function(){var x=this.getBBox();return s+(u-x.height)/2})},function(b){return b.styles(y)},function(b){return b.remove()})},e.prototype.renderDropdown=function(){var t=this,r,i,a=this.style,s=a.x,o=a.y,u=a.width,l=a.height,c=a.options,h=a.onSelect,d=a.open,f=be(this.attributes,"dropdown"),g=be(this.attributes,"option"),p=this.dropdownPadding;oe(this.dropdown).maybeAppend(".dropdown-container","g").attr("className","dropdown-container").selectAll(".dropdown-item").data(c,function(y){return y.value}).join(function(y){return y.append(function(b){return new Oae({className:"dropdown-item",style:V(V(V({},b),g),{width:u-p[1]-p[3],selected:b.value===t.currentValue,onClick:function(x,w,E){t.setValue(x),h==null||h(x,w,E),t.dispatchEvent(new It("change",{detail:{value:x,option:w,item:E}})),ii(t.dropdown)}})})}).each(function(b,x){var w,E=(w=this.parentNode)===null||w===void 0?void 0:w.children,_=E.reduce(function(S,C,k){return k<x&&(S+=C.getBBox().height),S},0);this.attr("transform","translate(".concat(p[3],", ").concat(p[0]+_,")"))})},function(y){return y.update(function(b){return{selected:b.value===t.currentValue}})},function(y){return y.remove()});var v=(i=(r=this.dropdown.getElementsByClassName("dropdown-container"))===null||r===void 0?void 0:r[0])===null||i===void 0?void 0:i.getBBox(),m=f.spacing;this.dropdown.attr(V({transform:"translate(".concat(s,", ").concat(o+l+m,")"),width:v.width+p[1]+p[3],height:v.height+p[0]+p[2]},f)),!d&&ii(this.dropdown)},e.prototype.render=function(){this.renderSelect(),this.renderDropdown()},e.prototype.bindEvents=function(){var t=this;this.addEventListener("click",function(r){r.stopPropagation()}),this.select.addEventListener("click",function(){t.dropdown.style.visibility==="visible"?ii(t.dropdown):pc(t.dropdown)}),this.addEventListener("pointerenter",function(){t.isPointerInSelect=!0}),this.addEventListener("pointerleave",function(){t.isPointerInSelect=!1}),document==null||document.addEventListener("click",function(){t.isPointerInSelect||ii(t.dropdown)})},e.defaultOptions={style:{x:0,y:0,width:140,height:32,options:[],bordered:!0,defaultValue:"",selectRadius:8,selectStroke:"#d9d9d9",showDropdownIcon:!0,placeholderText:"请选择",placeholderFontSize:12,placeholderTextBaseline:"top",placeholderFill:"#c2c2c2",dropdownFill:"#fff",dropdownStroke:"#d9d9d9",dropdownRadius:8,dropdownShadowBlur:4,dropdownShadowColor:"rgba(0, 0, 0, 0.08)",dropdownPadding:8,dropdownSpacing:10,optionPadding:[8,12],optionFontSize:12,optionTextBaseline:"top",optionBackgroundFill:"#fff",optionBackgroundRadius:4,optionLabelFontSize:12,optionLabelTextBaseline:"top"}},e}(Tt),di=function(n){Ne(e,n);function e(t){var r=n.call(this,un({},{style:{backgroundOpacity:e.backgroundOpacities.default}},e.defaultOptions,t))||this;return r.showBackground=!0,r.background=r.appendChild(new mn({})),r.icon=r.appendChild(new Yt({})),r}return Object.defineProperty(e.prototype,"label",{get:function(){return"BaseIcon"},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"lineWidth",{get:function(){return Math.log10(this.attributes.size)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"padding",{get:function(){return yn(this.attributes.size/5)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"iconSize",{get:function(){var t=this.attributes.size,r=L(this.padding,4),i=r[0],a=r[1],s=r[2],o=r[3];return Math.max(t-Math.max(o+a,i+s),this.lineWidth*2+1)},enumerable:!1,configurable:!0}),e.prototype.renderBackground=function(){var t=this.attributes,r=t.x,i=t.y,a=t.size,s=a/2,o=be(this.attributes,"background");this.background.attr(V({x:r-s,y:i-s,width:a,height:a},o))},e.prototype.showIndicator=function(){if(this.label){var t=this.attributes.size,r=this.background.getBBox(),i=r.x,a=r.y;this.indicator.update({x:i+t/2,y:a-5,labelText:this.label,visibility:"visible"})}},e.prototype.hideIndicator=function(){this.indicator.update({visibility:"hidden"})},e.prototype.connectedCallback=function(){var t;n.prototype.connectedCallback.call(this);var r=this.attributes.size,i=this.background.getBBox(),a=i.x,s=i.y,o=(t=this.ownerDocument)===null||t===void 0?void 0:t.defaultView;o&&(this.indicator=o.appendChild(new Cae({style:{x:a+r/2,y:s-r/2,visibility:"hidden",position:"top",radius:3,zIndex:100}})))},e.prototype.disconnectedCallback=function(){this.indicator.destroy()},e.prototype.render=function(){this.renderIcon(),this.showBackground&&this.renderBackground()},e.prototype.bindEvents=function(){var t=this,r=this.attributes.onClick;if(this.addEventListener("click",function(){r==null||r(t)}),this.showBackground){var i=function(){return t.background.attr({opacity:e.backgroundOpacities.default})},a=function(){return t.background.attr({opacity:e.backgroundOpacities.hover})},s=function(){return t.background.attr({opacity:e.backgroundOpacities.active})};this.addEventListener("pointerenter",function(){a(),t.showIndicator()}),this.addEventListener("pointerleave",function(){i(),t.hideIndicator()}),this.addEventListener("pointerdown",function(){s()}),this.addEventListener("pointerup",function(){i()})}},e.tag="IconBase",e.defaultOptions={style:{x:0,y:0,size:10,color:"#565758",backgroundRadius:4,backgroundFill:"#e2e2e2"}},e.backgroundOpacities={default:0,hover:.8,active:1},e}(Tt),Il=function(n,e){return e===void 0&&(e="#565758"),new fr({style:{fill:e,d:"M ".concat(n,",").concat(n," L -").concat(n,",0 L ").concat(n,",-").concat(n," Z"),transformOrigin:"center"}})},Pae=function(n){Ne(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.prototype.arcPath=function(t,r,i){var a=L([i,i],2),s=a[0],o=a[1],u=function(p){return[t+i*Math.cos(p),r+i*Math.sin(p)]},l=L(u(-5/4*Math.PI),2),c=l[0],h=l[1],d=L(u(1/4*Math.PI),2),f=d[0],g=d[1];return"M".concat(c,",").concat(h,",A").concat(s,",").concat(o,",0,1,1,").concat(f,",").concat(g)},Object.defineProperty(e.prototype,"label",{get:function(){return"重置"},enumerable:!1,configurable:!0}),e.prototype.renderIcon=function(){var t=this.attributes,r=t.x,i=t.y,a=t.color,s=this.iconSize,o=this.lineWidth,u=o+.5;oe(this.icon).maybeAppend(".reset","path").styles({stroke:a,lineWidth:o,d:this.arcPath(r,i,s/2-o),markerStart:Il(u,a)})},e}(di),Nae=function(n){Ne(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return Object.defineProperty(e.prototype,"label",{get:function(){return"快退"},enumerable:!1,configurable:!0}),e.prototype.renderIcon=function(){var t=this.attributes,r=t.x,i=t.y,a=t.color,s=this.iconSize,o=s/2,u=s/2/Math.pow(3,.5),l=[[r,i],[r,i-u],[r-o,i],[r,i+u],[r,i],[r+o,i-u],[r+o,i+u],[r,i]];oe(this.icon).maybeAppend(".backward","polygon").styles({points:l,fill:a})},e}(di),Dae=function(n){Ne(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return Object.defineProperty(e.prototype,"label",{get:function(){return"快进"},enumerable:!1,configurable:!0}),e.prototype.renderIcon=function(){var t=this.attributes,r=t.x,i=t.y,a=t.color,s=this.iconSize,o=s/2,u=s/2/Math.pow(3,.5),l=[[r,i],[r,i-u],[r+o,i],[r,i+u],[r,i],[r-o,i-u],[r-o,i+u],[r,i]];oe(this.icon).maybeAppend(".forward","polygon").styles({points:l,fill:a})},e}(di),Rae=function(n){Ne(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return Object.defineProperty(e.prototype,"label",{get:function(){return"播放"},enumerable:!1,configurable:!0}),e.prototype.renderIcon=function(){var t=this.attributes,r=t.x,i=t.y,a=t.color,s=this.iconSize,o=s/3*Math.pow(3,.5)*.8,u=[[r+o,i],[r-o/2,i-s/2*.8],[r-o/2,i+s/2*.8],[r+o,i]];oe(this.icon).maybeAppend(".play","polygon").styles({points:u,fill:a})},e}(di),Lae=function(n){Ne(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return Object.defineProperty(e.prototype,"label",{get:function(){return"暂停"},enumerable:!1,configurable:!0}),e.prototype.renderIcon=function(){var t=this.attributes,r=t.x,i=t.y,a=t.color,s=this.iconSize,o=s/3,u=[[r-o,i-s/2],[r-o,i+s/2],[r-o/2,i+s/2],[r-o/2,i-s/2],[r-o,i-s/2],[r+o/2,i-s/2],[r+o/2,i+s/2],[r+o,i+s/2],[r+o,i-s/2]];oe(this.icon).maybeAppend(".pause","polygon").styles({points:u,fill:a})},e}(di),Iae=function(n){Ne(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return Object.defineProperty(e.prototype,"label",{get:function(){return"范围时间"},enumerable:!1,configurable:!0}),e.prototype.renderIcon=function(){var t=this.attributes,r=t.x,i=t.y,a=t.color,s=this,o=s.iconSize,u=s.lineWidth,l=u;oe(this.icon).maybeAppend(".left-line","line").styles({x1:r-o/2,y1:i-o/2,x2:r-o/2,y2:i+o/2,stroke:a,lineWidth:u}),oe(this.icon).maybeAppend(".right-line","line").styles({x1:r+o/2,y1:i-o/2,x2:r+o/2,y2:i+o/2,stroke:a,lineWidth:u}),oe(this.icon).maybeAppend(".left-arrow","line").styles({x1:r,y1:i,x2:r-o/2+l*2,y2:i,stroke:a,lineWidth:u,markerEnd:Il(u*2,a)}),oe(this.icon).maybeAppend(".right-arrow","line").styles({x1:r,y1:i,x2:r+o/2-l*2,y2:i,stroke:a,lineWidth:u,markerEnd:Il(u*2,a)})},e}(di),Fae=function(n){Ne(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return Object.defineProperty(e.prototype,"label",{get:function(){return"单一时间"},enumerable:!1,configurable:!0}),e.prototype.renderIcon=function(){var t=this.attributes,r=t.x,i=t.y,a=t.color,s=this,o=s.iconSize,u=s.lineWidth;oe(this.icon).maybeAppend(".line","line").styles({x1:r,y1:i-o/2,x2:r,y2:i+o/2,stroke:a,lineWidth:u});var l=u;oe(this.icon).maybeAppend(".left-arrow","line").styles({x1:r-o/2-l*2,y1:i,x2:r-l*2,y2:i,stroke:a,lineWidth:u,markerEnd:Il(u*2,a)}),oe(this.icon).maybeAppend(".right-arrow","line").styles({x1:r+o/2+l*2,y1:i,x2:r+l*2,y2:i,stroke:a,lineWidth:u,markerEnd:Il(u*2,a)})},e}(di),bN=function(n){return[[-n/2,-n/2],[-n/2,n/2],[n/2,n/2]]},Bae=function(n){Ne(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return Object.defineProperty(e.prototype,"label",{get:function(){return"折线图"},enumerable:!1,configurable:!0}),e.prototype.renderIcon=function(){var t=this.attributes,r=t.x,i=t.y,a=t.color,s=this,o=s.iconSize,u=s.lineWidth,l=u,c=(o-l*2-u)/4,h=(o-l*2-u)/2,d=L([r-o/2+l,i+o/2-l*2],2),f=d[0],g=d[1];oe(this.icon).maybeAppend(".coordinate","polyline").styles({points:bN(o).map(function(p){var v=L(p,2),m=v[0],y=v[1];return[m+r,y+i]}),stroke:a,lineWidth:u}),oe(this.icon).maybeAppend(".line","polyline").styles({points:[[f,g],[f+c,g-h],[f+c*2,g],[f+c*4,g-h*2]],stroke:a,lineWidth:u})},e}(di),zae=function(n){Ne(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return Object.defineProperty(e.prototype,"label",{get:function(){return"条形图"},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"data",{get:function(){return[1,4,2,4,3]},enumerable:!1,configurable:!0}),e.prototype.renderIcon=function(){var t=this.data,r=this.attributes,i=r.x,a=r.y,s=r.color,o=this,u=o.iconSize,l=o.lineWidth,c=l,h=(u-c)/t.length,d=(u-c*2)/4,f=L([i-u/2+c*2,a+u/2-c],2),g=f[0],p=f[1];oe(this.icon).maybeAppend(".coordinate","polyline").styles({points:bN(u).map(function(v){var m=L(v,2),y=m[0],b=m[1];return[y+i,b+a]}),stroke:s,lineWidth:l}),oe(this.icon).maybeAppend(".bars","g").selectAll(".column").data(this.data.map(function(v,m){return{value:v,index:m}})).join(function(v){return v.append("line").attr("className","column").style("x1",function(m){var y=m.index;return g+h*y}).style("y1",p).style("x2",function(m){var y=m.index;return g+h*y}).style("y2",function(m){var y=m.value;return p-d*y}).styles({y1:p,stroke:s,lineWidth:l})})},e}(di),$ae=function(n){Ne(e,n);function e(t){var r=n.call(this,un({},{style:{color:"#d8d9d9"}},t))||this;return r.showBackground=!1,r}return e.prototype.renderIcon=function(){var t=this.attributes,r=t.x,i=t.y,a=t.color,s=this,o=s.iconSize,u=s.lineWidth;oe(this.icon).maybeAppend(".split","line").styles({x1:r,y1:i-o/2,x2:r,y2:i+o/2,stroke:a,lineWidth:u})},e}(di),h2=function(n){Ne(e,n);function e(){var t=n.apply(this,te([],L(arguments),!1))||this;return t.showBackground=!1,t}return Object.defineProperty(e.prototype,"padding",{get:function(){return yn(0)},enumerable:!1,configurable:!0}),e.prototype.renderIcon=function(){var t=this.iconSize,r=this.attributes,i=r.x,a=r.y,s=r.speed,o=s===void 0?1:s,u=K2(this.attributes,["x","y","transform","transformOrigin","width","height","size","color","speed"]),l=St(t,20,1/0),c=20,h=V(V({},u),{x:i-l/2,y:a-c/2,width:l,height:c,defaultValue:o,bordered:!1,showDropdownIcon:!1,selectRadius:2,dropdownPadding:this.padding,dropdownRadius:2,dropdownSpacing:t/5,placeholderFontSize:t/2,optionPadding:0,optionLabelFontSize:t/2,optionBackgroundRadius:1,options:[{label:"1x",value:1},{label:"1.5x",value:1.5},{label:"2x",value:2}]});oe(this.icon).maybeAppend(".speed",function(){return new Mae({style:h})}).attr("className","speed").each(function(){this.update(h)})},e.tag="SpeedSelect",e}(di),yw=function(n){Ne(e,n);function e(t){var r=n.call(this,t)||this;return r.icon=r.appendChild(new Yt({})),r.currentType=r.attributes.type,r}return e.prototype.getType=function(){return this.currentType},e.prototype.render=function(){var t=this,r=this.attributes;r.onChange;var i=At(r,["onChange"]);oe(this.icon).selectAll(".icon").data([this.currentType]).join(function(a){return a.append(function(s){var o,u=(o=t.toggles.find(function(l){var c=L(l,1),h=c[0];return h===s}))===null||o===void 0?void 0:o[1];if(!u)throw new Error("Invalid type: ".concat(s));return new u({})}).attr("className","icon").styles(i,!1).update({})},function(a){return a.styles({restStyles:i}).update({})},function(a){return a.remove()})},e.prototype.bindEvents=function(){var t=this,r=this.attributes.onChange;this.addEventListener("click",function(i){i.preventDefault(),i.stopPropagation();var a=(t.toggles.findIndex(function(o){var u=L(o,1),l=u[0];return l===t.currentType})+1)%t.toggles.length,s=t.toggles[a][0];r==null||r(t.currentType),t.currentType=s,t.render()})},e.tag="ToggleIcon",e}(Tt),d2=function(n){Ne(e,n);function e(t){var r=n.call(this,un({},{style:{type:"play"}},t))||this;return r.toggles=[["play",Rae],["pause",Lae]],r}return e}(yw),f2=function(n){Ne(e,n);function e(t){var r=n.call(this,un({},{style:{type:"range"}},t))||this;return r.toggles=[["range",Iae],["value",Fae]],r}return e}(yw),g2=function(n){Ne(e,n);function e(t){var r=n.call(this,un({},{style:{type:"column"}},t))||this;return r.toggles=[["line",Bae],["column",zae]],r}return e}(yw),jae={reset:Pae,speed:h2,backward:Nae,playPause:d2,forward:Dae,selectionType:f2,chartType:g2,split:$ae},qae=function(n){Ne(e,n);function e(t){var r=n.call(this,un({},e.defaultOptions,t))||this;return r.background=r.appendChild(new mn({})),r.functions=r.appendChild(new Yt({})),r}return Object.defineProperty(e.prototype,"padding",{get:function(){return yn(this.attributes.padding)},enumerable:!1,configurable:!0}),e.prototype.renderBackground=function(){var t=this.style,r=t.x,i=t.y,a=t.width,s=t.height,o=be(this.attributes,"background");this.background.attr(V({x:r,y:i,width:a,height:s},o))},e.prototype.renderFunctions=function(){var t=this,r,i=this.attributes,a=i.functions,s=i.iconSize,o=i.iconSpacing,u=i.x,l=i.y,c=i.width,h=i.height,d=i.align,f=L(this.padding,4),g=f[1],p=f[3],v=a.reduce(function(b,x){return b.length&&x.length?b.concat.apply(b,te(["split"],L(x),!1)):b.concat.apply(b,te([],L(x),!1))},[]),m=v.length*(s+o)-o,y={left:p+s/2,center:(c-m)/2+s/2,right:c-m-p-g+s/2}[d]||0;(r=this.speedSelect)===null||r===void 0||r.destroy(),this.functions.removeChildren(),v.forEach(function(b,x){var w,E=jae[b],_={x:u+x*(s+o)+y,y:l+h/2,size:s};if(E===h2?(_.speed=t.attributes.speed,_.onSelect=function(C){return t.handleFunctionChange(b,{value:C})}):[d2,f2,g2].includes(E)?(_.onChange=function(C){return t.handleFunctionChange(b,{value:C})},E===d2&&(_.type=t.attributes.state==="play"?"pause":"play"),E===f2&&(_.type=t.attributes.selectionType==="range"?"value":"range"),E===g2&&(_.type=t.attributes.chartType==="line"?"column":"line")):_.onClick=function(){return t.handleFunctionChange(b,{value:b})},E===h2){var S=(w=t.ownerDocument)===null||w===void 0?void 0:w.defaultView;S&&(t.speedSelect=new E({style:V(V({},_),{zIndex:100})}),S.appendChild(t.speedSelect))}else t.functions.appendChild(new E({style:_}))})},e.prototype.disconnectedCallback=function(){var t;n.prototype.disconnectedCallback.call(this),(t=this.speedSelect)===null||t===void 0||t.destroy()},e.prototype.render=function(){this.renderBackground(),this.renderFunctions()},e.prototype.handleFunctionChange=function(t,r){var i=this.attributes.onChange;i==null||i(t,r)},e.defaultOptions={style:{x:0,y:0,width:300,height:40,padding:0,align:"center",iconSize:25,iconSpacing:0,speed:1,state:"pause",chartType:"line",selectionType:"range",backgroundFill:"#fbfdff",backgroundStroke:"#ebedf0",functions:[["reset","speed"],["backward","playPause","forward"],["selectionType","chartType"]]}},e}(Tt),Gae=function(n){Ne(e,n);function e(t){var r=n.call(this,un({},e.defaultOptions,t))||this;return r.bindEvents(),r}return e.prototype.bindEvents=function(){var t=this;this.addEventListener("mouseenter",function(){t.attr("lineWidth",Math.ceil(+(t.style.r||0)/2))}),this.addEventListener("mouseleave",function(){t.attr("lineWidth",0)})},e.defaultOptions={style:{r:5,fill:"#3f7cf7",lineWidth:0,stroke:"#3f7cf7",strokeOpacity:.5,cursor:"pointer"}},e}(pa),Wae=function(n){Ne(e,n);function e(t){return n.call(this,un({},e.defaultOptions,t))||this}return e.prototype.renderBackground=function(){var t=this.attributes,r=t.x,i=t.y,a=t.width,s=t.height,o=be(this.attributes,"background");oe(this).maybeAppend("background","rect").attr("className","background").styles(V({x:r-a/2,y:i-s/2,width:a,height:s},o))},e.prototype.renderIcon=function(){var t=this.attributes,r=t.x,i=t.y,a=t.iconSize,s=be(this.attributes,"icon"),o=1,u=a/2;oe(this).maybeAppend("icon-left-line","line").attr("className","icon-left-line").styles(V({x1:r-o,y1:i-u,x2:r-o,y2:i+u},s)),oe(this).maybeAppend("icon-right-line","line").attr("className","icon-right-line").styles(V({x1:r+o,y1:i-u,x2:r+o,y2:i+u},s))},e.prototype.renderBorder=function(){var t=this.attributes,r=t.x,i=t.y,a=t.width,s=t.height,o=t.type,u=be(this.attributes,"border"),l=o==="start"?+a/2:-a/2;oe(this).maybeAppend("border","line").attr("className","border").styles(V({x1:l+r,y1:i-s/2,x2:l+r,y2:i+s/2},u))},e.prototype.render=function(){this.renderBackground(),this.renderIcon(),this.renderBorder()},e.defaultOptions={style:{x:0,y:0,width:10,height:50,iconSize:10,type:"start",backgroundFill:"#fff",backgroundFillOpacity:.5,iconStroke:"#9a9a9a",iconLineWidth:1,borderStroke:"#e8e8e8",borderLineWidth:1}},e}(Tt);function Vae(n,e){return typeof n=="number"?xN(n):Uae(n,e)}function Uae(n,e){var t=new Date(n);switch(e){case"half-hour":case"hour":case"four-hour":return[0,6,12,18].includes(t.getHours())&&t.getMinutes()===0?Vn(t,`HH:mm
YYYY-MM-DD`):Vn(t,"HH:mm");case"half-day":return t.getHours()<12?`AM
`.concat(Vn(t,"YYYY-MM-DD")):"PM";case"day":return[1,10,20].includes(t.getDate())?Vn(t,`DD
YYYY-MM`):Vn(t,"DD");case"week":return t.getDate()<=7?Vn(t,`DD
YYYY-MM`):Vn(t,"DD");case"month":return[0,6].includes(t.getMonth())?Vn(t,`MM月
YYYY`):Vn(t,"MM月");case"season":return[0].includes(t.getMonth())?Vn(t,`MM月
YYYY`):Vn(t,"MM月");case"year":return Vn(t,"YYYY");default:return Vn(t,"YYYY-MM-DD HH:mm")}}function xN(n){var e=String(Math.floor(n/3600)).padStart(2,"0"),t=String(Math.floor(n%3600/60)).padStart(2,"0"),r=String(Math.floor(n%60)).padStart(2,"0");return n<3600?"".concat(t,":").concat(r):"".concat(e,":").concat(t,":").concat(r)}var Hae=function(n){Ne(e,n);function e(t){var r=n.call(this,un({},e.defaultOptions,t))||this;r.axis=r.appendChild(new pae({style:{type:"linear",startPos:[0,0],endPos:[0,0],data:[],showArrow:!1,animate:!1}})),r.timeline=r.appendChild(new fie({style:{onChange:function(h){r.handleSliderChange(h)}}})),r.controller=r.appendChild(new qae({})),r.states={},r.handleSliderChange=function(h){var d=function(){var f=r.states.values;return Array.isArray(f)?te([],L(f),!1):f}();r.setBySliderValues(h),r.dispatchOnChange(d)};var i=r.attributes,a=i.selectionType,s=i.chartType,o=i.speed,u=i.state,l=i.playMode,c=i.values;return r.states={chartType:s,playMode:l,selectionType:a,speed:o,state:u},r.setByTimebarValues(c),r}return Object.defineProperty(e.prototype,"data",{get:function(){var t=this.attributes.data,r=function(i,a){return i.time<a.time?-1:i.time>a.time?1:0};return t.sort(r)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"space",{get:function(){var t=this.attributes,r=t.x,i=t.y,a=t.width,s=t.height,o=t.type,u=t.controllerHeight,l=St(+s-u,0,+s),c=new $n(r,i+ +s-u,+a,u),h,d=0;o==="chart"?(d=35,h=new $n(r,i+l-d,+a,d)):h=new $n;var f=o==="time"?10:l,g=new $n(r,i+(o==="time"?l:l-f),+a,f-d);return{axisBBox:h,controllerBBox:c,timelineBBox:g}},enumerable:!1,configurable:!0}),e.prototype.setBySliderValues=function(t){var r,i,a=this.data,s=L(Array.isArray(t)?t:[0,t],2),o=s[0],u=s[1],l=a.length,c=a[Math.floor(o*l)],h=a[Math.ceil(u*l)-(Array.isArray(t)?0:1)];this.states.values=[(r=c==null?void 0:c.time)!==null&&r!==void 0?r:a[0].time,(i=h==null?void 0:h.time)!==null&&i!==void 0?i:1/0]},e.prototype.setByTimebarValues=function(t){var r,i,a,s=this.data,o=L(Array.isArray(t)?t:[void 0,t],2),u=o[0],l=o[1],c=s.find(function(d){var f=d.time;return f===u}),h=s.find(function(d){var f=d.time;return f===l});this.states.values=[(r=c==null?void 0:c.time)!==null&&r!==void 0?r:(i=s[0])===null||i===void 0?void 0:i.time,(a=h==null?void 0:h.time)!==null&&a!==void 0?a:1/0]},e.prototype.setByIndex=function(t){var r,i,a,s,o=this.data,u=L(t,2),l=u[0],c=u[1];this.states.values=[(i=(r=o[l])===null||r===void 0?void 0:r.time)!==null&&i!==void 0?i:o[0].time,(s=(a=this.data[c])===null||a===void 0?void 0:a.time)!==null&&s!==void 0?s:1/0]},Object.defineProperty(e.prototype,"sliderValues",{get:function(){var t=this.states,r=t.values,i=t.selectionType,a=L(Array.isArray(r)?r:[void 0,r],2),s=a[0],o=a[1],u=this.data,l=u.length,c=i==="value",h=function(){var f=u.findIndex(function(g){var p=g.time;return p===s});return c?0:f>-1?f/l:0},d=function(){if(o===1/0)return 1;var f=u.findIndex(function(g){var p=g.time;return p===o});return f>-1?f/l:c?.5:1};return[h(),d()]},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"values",{get:function(){var t=this.states,r=t.values,i=t.selectionType,a=L(Array.isArray(r)?r:[this.data[0].time,r],2),s=a[0],o=a[1];return i==="value"?o:[s,o]},enumerable:!1,configurable:!0}),e.prototype.getDatumByRatio=function(t){var r=this.data,i=r.length,a=Math.floor(t*(i-1));return r[a]},Object.defineProperty(e.prototype,"chartHandleIconShape",{get:function(){var t=this.states.selectionType,r=this.space.timelineBBox.height;return t==="range"?function(i){return new Wae({style:{type:i,height:r,iconSize:r/6}})}:function(){return new Ks({style:{x1:0,y1:-r/2,x2:0,y2:r/2,lineWidth:2,stroke:"#c8c8c8"}})}},enumerable:!1,configurable:!0}),e.prototype.getChartStyle=function(t){var r=this,i=t.x,a=t.y,s=t.width,o=t.height,u=this.states,l=u.selectionType,c=u.chartType,h=this.data,d=this.attributes,f=d.type,g=d.labelFormatter,p=be(this.attributes,"chart");p.type;var v=At(p,["type"]),m=l==="range";if(f==="time")return V({handleIconShape:function(){return new Gae({})},selectionFill:"#2e7ff8",selectionFillOpacity:1,showLabelOnInteraction:!0,handleLabelDy:m?-15:0,autoFitLabel:m,handleSpacing:m?-15:0,trackFill:"#edeeef",trackLength:s,trackOpacity:.5,trackRadius:o/2,trackSize:o/2,type:l,values:this.sliderValues,formatter:function(x){if(g)return g(x);var w=r.getDatumByRatio(x).time;return typeof w=="number"?xN(w):Vn(w,"YYYY-MM-DD HH:mm:ss")},transform:"translate(".concat(i,", ").concat(a,")"),zIndex:1},v);var y=l==="range"?5:0,b=h.map(function(x){var w=x.value;return w});return V({handleIconOffset:y,handleIconShape:this.chartHandleIconShape,selectionFill:"#fff",selectionFillOpacity:.5,selectionType:"invert",sparklineSpacing:.1,sparklineColumnLineWidth:0,sparklineColor:"#d4e5fd",sparklineAreaOpacity:1,sparklineAreaLineWidth:0,sparklineData:b,sparklineType:c,sparklineScale:.8,trackLength:s,trackSize:o,type:l,values:this.sliderValues,transform:"translate(".concat(i,", ").concat(a,")"),zIndex:1},v)},e.prototype.renderChart=function(t){t===void 0&&(t=this.space.timelineBBox),this.timeline.update(this.getChartStyle(t))},e.prototype.updateSelection=function(){this.timeline.setValues(this.sliderValues,!0),this.handleSliderChange(this.sliderValues)},e.prototype.getAxisStyle=function(t){var r=this.data,i=this.attributes,a=i.interval,s=i.labelFormatter,o=be(this.attributes,"axis"),u=t.x,l=t.y,c=t.width,h=te(te([],L(r),!1),[{time:0}],!1).map(function(f,g,p){var v=f.time;return{label:"".concat(v),value:g/(p.length-1),time:v}}),d=V({startPos:[u,l],endPos:[u+c,l],data:h,labelFilter:function(f,g){return g<h.length-1},labelFormatter:function(f){var g=f.time;return s?s(g):Vae(g,a)}},o);return d},e.prototype.renderAxis=function(t){t===void 0&&(t=this.space.axisBBox);var r=this.attributes.type;r==="chart"&&this.axis.update(this.getAxisStyle(t))},e.prototype.renderController=function(t){t===void 0&&(t=this.space.controllerBBox);var r=this.attributes.type,i=this.states,a=i.state,s=i.speed,o=i.selectionType,u=i.chartType,l=be(this.attributes,"controller"),c=this,h=V(V(V({},t),{iconSize:20,speed:s,state:a,selectionType:o,chartType:u,onChange:function(d,f){var g=f.value;switch(d){case"reset":c.internalReset();break;case"speed":c.handleSpeedChange(g);break;case"backward":c.internalBackward();break;case"playPause":g==="play"?c.internalPlay():c.internalPause();break;case"forward":c.internalForward();break;case"selectionType":c.handleSelectionTypeChange(g);break;case"chartType":c.handleChartTypeChange(g);break}}}),l);r==="time"&&(h.functions=[["reset","speed"],["backward","playPause","forward"],["selectionType"]]),this.controller.update(h)},e.prototype.dispatchOnChange=function(t){var r=this.data,i=this.attributes.onChange,a=this.states,s=a.values,o=a.selectionType,u=L(s,2),l=u[0],c=u[1],h=c===1/0?r.at(-1).time:c,d=o==="range"?[l,h]:h,f=function(g,p){return Array.isArray(g)?Array.isArray(p)?g[0]===p[0]&&(g[1]===p[1]||g[1]===1/0||p[1]===1/0):!1:Array.isArray(p)?!1:g===p};(!t||!f(t,d))&&(i==null||i(o==="range"?[l,h]:h))},e.prototype.internalReset=function(t){var r,i,a=this.states.selectionType;this.internalPause(),this.setBySliderValues(a==="range"?[0,1]:[0,0]),this.renderController(),this.updateSelection(),t||((i=(r=this.attributes)===null||r===void 0?void 0:r.onReset)===null||i===void 0||i.call(r),this.dispatchOnChange())},e.prototype.reset=function(){this.internalReset()},e.prototype.moveSelection=function(t,r){var i=this.data,a=i.length,s=this.states,o=s.values,u=s.selectionType,l=s.playMode,c=L(o,2),h=c[0],d=c[1],f=i.findIndex(function(b){var x=b.time;return x===h}),g=i.findIndex(function(b){var x=b.time;return x===d});g===-1&&(g=a);var p=t==="backward"?-1:1,v;u==="range"?l==="acc"?(v=[f,g+p],p===-1&&f===g&&(v=[f,a])):v=[f+p,g+p]:v=[f,g+p];var m=function(b){var x=L(b.sort(function(S,C){return S-C}),2),w=x[0],E=x[1],_=function(S){return St(S,0,a)};return E>a?u==="value"?[0,0]:l==="acc"?[_(w),_(w)]:[0,_(E-w)]:w<0?l==="acc"?[0,_(E)]:[_(w+a-E),a]:[_(w),_(E)]},y=m(v);return this.setByIndex(y),this.updateSelection(),y},e.prototype.internalBackward=function(t){var r,i,a=this.moveSelection("backward",t);return t||((i=(r=this.attributes)===null||r===void 0?void 0:r.onBackward)===null||i===void 0||i.call(r),this.dispatchOnChange()),a},e.prototype.backward=function(){this.internalBackward()},e.prototype.internalPlay=function(t){var r=this,i,a,s=this.data,o=this.attributes.loop,u=this.states.speed,l=u===void 0?1:u;this.playInterval=window.setInterval(function(){var c=r.internalForward();c[1]===s.length&&!o&&(r.internalPause(),r.renderController())},1e3/l),this.states.state="play",!t&&((a=(i=this.attributes)===null||i===void 0?void 0:i.onPlay)===null||a===void 0||a.call(i))},e.prototype.play=function(){this.internalPlay()},e.prototype.internalPause=function(t){var r,i;clearInterval(this.playInterval),this.states.state="pause",!t&&((i=(r=this.attributes)===null||r===void 0?void 0:r.onPause)===null||i===void 0||i.call(r))},e.prototype.pause=function(){this.internalPause()},e.prototype.internalForward=function(t){var r,i,a=this.moveSelection("forward",t);return t||((i=(r=this.attributes)===null||r===void 0?void 0:r.onForward)===null||i===void 0||i.call(r),this.dispatchOnChange()),a},e.prototype.forward=function(){this.internalForward()},e.prototype.handleSpeedChange=function(t){var r,i;this.states.speed=t;var a=this.states.state;a==="play"&&(this.internalPause(!0),this.internalPlay(!0)),(i=(r=this.attributes)===null||r===void 0?void 0:r.onSpeedChange)===null||i===void 0||i.call(r,t)},e.prototype.handleSelectionTypeChange=function(t){var r,i;this.states.selectionType=t,this.renderChart(),(i=(r=this.attributes)===null||r===void 0?void 0:r.onSelectionTypeChange)===null||i===void 0||i.call(r,t)},e.prototype.handleChartTypeChange=function(t){var r,i;this.states.chartType=t,this.renderChart(),(i=(r=this.attributes)===null||r===void 0?void 0:r.onChartTypeChange)===null||i===void 0||i.call(r,t)},e.prototype.render=function(){var t=this.space,r=t.axisBBox,i=t.controllerBBox,a=t.timelineBBox;this.renderController(i),this.renderAxis(r),this.renderChart(a),this.states.state==="play"&&this.internalPlay()},e.prototype.destroy=function(){n.prototype.destroy.call(this),this.internalPause(!0)},e.defaultOptions={style:{x:0,y:0,axisLabelFill:"#6e6e6e",axisLabelTextAlign:"left",axisLabelTextBaseline:"top",axisLabelTransform:"translate(5, -12)",axisLineLineWidth:1,axisLineStroke:"#cacdd1",axisTickLength:15,axisTickLineWidth:1,axisTickStroke:"#cacdd1",chartShowLabel:!1,chartType:"line",controllerAlign:"center",controllerHeight:40,data:[],interval:"day",loop:!1,playMode:"acc",selectionType:"range",type:"time"}},e}(Tt);function bw(n){const{width:e,height:t,renderer:r}=n,i=Yae(n),a=new Sb({width:e,height:t,container:i,renderer:r||new Tl});return[i,a]}function Yae(n){var e;const{container:t,className:r,graphCanvas:i}=n;if(t)return typeof t=="string"?document.getElementById(t):t;const a=_u(r,!1),{width:s,height:o,containerStyle:u}=n,[l,c]=Xae(n);return Object.assign(a.style,Object.assign({position:"absolute",left:l+"px",top:c+"px",width:s+"px",height:o+"px"},u)),(e=i.getContainer())===null||e===void 0||e.appendChild(a),a}function Xae(n){const{width:e,height:t,placement:r,graphCanvas:i}=n,[a,s]=i.getSize(),[o,u]=x4(r);return[o*(a-e),u*(s-t)]}var Kae=globalThis&&globalThis.__rest||function(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(n);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(t[r[i]]=n[r[i]]);return t};class k0 extends wn{constructor(e,t){super(e,Object.assign({},k0.defaultOptions,t)),this.typePrefix="__data__",this.draw=!1,this.fieldMap={node:new Map,edge:new Map,combo:new Map},this.selectedItems=[],this.bindEvents=()=>{const{graph:r}=this.context;r.on(Z.AFTER_DRAW,this.createElement)},this.changeState=(r,i)=>{const{graph:a}=this.context,{typePrefix:s}=this,o=Fn(r,[s,"id"]),u=Fn(r,[s,"style","labelText"]),[l]=o.split("__"),c=this.fieldMap[l].get(u)||[];a.setElementState(Object.fromEntries(c==null?void 0:c.map(h=>[h,i])))},this.click=r=>{if(this.options.trigger==="hover")return;const i=Fn(r,[this.typePrefix,"id"]);this.selectedItems.includes(i)?(this.selectedItems=this.selectedItems.filter(a=>a!==i),this.changeState(r,[])):(this.selectedItems.push(i),this.changeState(r,"selected"))},this.mouseleave=r=>{this.options.trigger!=="click"&&(this.selectedItems=[],this.changeState(r,[]))},this.mouseenter=r=>{if(this.options.trigger==="click")return;const i=Fn(r,[this.typePrefix,"id"]);this.selectedItems.includes(i)?this.selectedItems=this.selectedItems.filter(a=>a!==i):(this.selectedItems.push(i),this.changeState(r,"active"))},this.setFieldMap=(r,i,a)=>{if(!r)return;const s=this.fieldMap[a];if(s)if(!s.has(r))s.set(r,[i]);else{const o=s.get(r);o&&(o.push(i),s.set(r,o))}},this.getEvents=()=>({mouseenter:this.mouseenter,mouseleave:this.mouseleave,click:this.click}),this.getMarkerData=(r,i)=>{if(!r)return[];const{model:a,element:s}=this.context,{nodes:o,edges:u,combos:l}=a.getData(),c={},h=v=>se(r)?r(v):r,d={node:"circle",edge:"line",combo:"rect"},f={circle:"circle",ellipse:"circle",image:"bowtie",rect:"square",star:"cross",triangle:"triangle",diamond:"diamond",cubic:"dot",line:"hyphen",polyline:"hyphen",quadratic:"hv","cubic-horizontal":"hyphen","cubic-vertical":"line"},g=(v,m)=>s==null?void 0:s.getElementComputedStyle(v,m),p=(v,m)=>{v.forEach(y=>{const{id:b}=y,x=Fn(y,["data",h(y)]),w=(s==null?void 0:s.getElementType(m,y))||"circle",E=g(m,y),_=(m==="edge"?E==null?void 0:E.stroke:E==null?void 0:E.fill)||"#1783ff";b&&x&&x.replace(/\s+/g,"")&&(this.setFieldMap(x,b,m),c[x]||(c[x]={id:`${m}__${b}`,label:x,marker:f[w]||d[m],elementType:m,lineWidth:1,stroke:_,fill:_}))})};switch(i){case"node":p(o,"node");break;case"edge":p(u,"edge");break;case"combo":p(l,"combo");break;default:return[]}return Object.values(c)},this.createElement=()=>{if(this.draw){this.updateElement();return}const r=this.options,{width:i,height:a,nodeField:s,edgeField:o,comboField:u,trigger:l,position:c,container:h,containerStyle:d,className:f}=r,g=Kae(r,["width","height","nodeField","edgeField","comboField","trigger","position","container","containerStyle","className"]),p=this.getMarkerData(s,"node"),v=this.getMarkerData(o,"edge"),m=this.getMarkerData(u,"combo"),y=[...p,...m,...v],b=Object.assign({width:i,height:a,data:y,itemMarkerLineWidth:({lineWidth:E})=>E,itemMarker:({marker:E})=>E,itemMarkerStroke:({stroke:E})=>E,itemMarkerFill:({fill:E})=>E,gridCol:p.length},g,this.getEvents()),x=new Sae({className:"legend",style:b});this.category=x,this.upsertCanvas().appendChild(x),this.draw=!0},this.bindEvents()}update(e){super.update(e),this.clear(),this.createElement()}clear(){var e,t;(e=this.canvas)===null||e===void 0||e.destroy(),(t=this.container)===null||t===void 0||t.remove(),this.canvas=void 0,this.container=void 0,this.draw=!1}updateElement(){this.category&&this.category.update({itemMarkerOpacity:({id:e})=>!this.selectedItems.length||this.selectedItems.includes(e)?1:.5,itemLabelOpacity:({id:e})=>!this.selectedItems.length||this.selectedItems.includes(e)?1:.5})}upsertCanvas(){if(this.canvas)return this.canvas;const e=this.context.canvas,[t,r]=e.getSize(),{width:i=t,height:a=r,position:s,container:o,containerStyle:u,className:l}=this.options,[c,h]=bw({width:i,height:a,graphCanvas:e,container:o,containerStyle:u,placement:s,className:"legend"});return this.container=c,l&&c.classList.add(l),this.canvas=h,this.canvas}destroy(){this.clear(),this.context.graph.off(Z.AFTER_DRAW,this.createElement),super.destroy()}}k0.defaultOptions={position:"bottom",trigger:"hover",orientation:"horizontal",layout:"flex",itemSpacing:4,rowPadding:10,colPadding:10,itemMarkerSize:16,itemLabelFontSize:16,width:240,height:160};class C0 extends wn{constructor(e,t){super(e,Object.assign({},C0.defaultOptions,t)),this.onDraw=r=>{var i;!((i=r==null?void 0:r.data)===null||i===void 0)&&i.render||this.onRender()},this.shapes=new Map,this.landmarkMap=new Map,this.mask=null,this.isMaskDragging=!1,this.onMaskDragStart=r=>{this.mask&&(this.isMaskDragging=!0,this.mask.setPointerCapture(r.pointerId),this.mask.addEventListener("pointermove",this.onMaskDrag),this.mask.addEventListener("pointerup",this.onMaskDragEnd),this.mask.addEventListener("pointercancel",this.onMaskDragEnd))},this.onMaskDrag=r=>{if(!this.mask||!this.isMaskDragging)return;const{size:[i,a]}=this.options,{movementX:s,movementY:o}=r,{left:u,top:l,width:c,height:h}=this.mask.style,[,,d,f]=this.maskBBox;let g=parseInt(u)+s,p=parseInt(l)+o,v=parseInt(c),m=parseInt(h);g<0&&(g=0),p<0&&(p=0),g+v>i&&(g=ka(i-v,0)),p+m>a&&(p=ka(a-m,0)),v<d&&(s>0?(g=ka(g-s,0),v=Sa(v+s,i)):s<0&&(v=Sa(v-s,i))),m<f&&(o>0?(p=ka(p-o,0),m=Sa(m+o,a)):o<0&&(m=Sa(m-o,a))),Object.assign(this.mask.style,{left:g+"px",top:p+"px",width:v+"px",height:m+"px"});const y=parseInt(u)-g,b=parseInt(l)-p;if(y===0&&b===0)return;const x=this.context.canvas.getCamera().getZoom(),w=this.canvas.getCamera().getZoom(),E=x/w;this.context.graph.translateBy([y*E,b*E],!1)},this.onMaskDragEnd=r=>{this.mask&&(this.isMaskDragging=!1,this.mask.releasePointerCapture(r.pointerId),this.mask.removeEventListener("pointermove",this.onMaskDrag),this.mask.removeEventListener("pointerup",this.onMaskDragEnd),this.mask.removeEventListener("pointercancel",this.onMaskDragEnd))},this.onTransform=rM(()=>{this.isMaskDragging||(this.updateMask(),this.setCamera())},32,{leading:!0}),this.setOnRender(),this.bindEvents()}update(e){this.unbindEvents(),super.update(e),"delay"in e&&this.setOnRender(),this.bindEvents()}setOnRender(){this.onRender=Xl(()=>{this.renderMinimap(),this.renderMask()},this.options.delay)}bindEvents(){const{graph:e}=this.context;e.on(Z.AFTER_DRAW,this.onDraw),e.on(Z.AFTER_RENDER,this.onRender),e.on(Z.AFTER_TRANSFORM,this.onTransform)}unbindEvents(){const{graph:e}=this.context;e.off(Z.AFTER_DRAW,this.onDraw),e.off(Z.AFTER_RENDER,this.onRender),e.off(Z.AFTER_TRANSFORM,this.onTransform)}renderMinimap(){const e=this.getElements(),t=this.initCanvas();this.setShapes(t,e)}getElements(){const{filter:e}=this.options,{model:t}=this.context,r=t.getData();if(!e)return r;const{nodes:i,edges:a,combos:s}=r;return{nodes:i.filter(o=>e(z(o),"node")),edges:a.filter(o=>e(z(o),"edge")),combos:s.filter(o=>e(z(o),"combo"))}}setShapes(e,t){const{nodes:r,edges:i,combos:a}=t,{shape:s}=this.options,{element:o}=this.context;if(s==="key"){const l=new Set,c=h=>{const d=z(h);l.add(d);const f=o.getElement(d);if(!f)return;const g=f.getShape("key"),p=this.shapes.get(d)||g.cloneNode();p.setPosition(g.getPosition()),f.style.zIndex&&(p.style.zIndex=f.style.zIndex),p.id=f.id,this.shapes.has(d)?Object.entries(g.attributes).forEach(([v,m])=>{p.style[v]!==m&&(p.style[v]=m)}):(e.appendChild(p),this.shapes.set(d,p))};i.forEach(c),a.forEach(c),r.forEach(c),this.shapes.forEach((h,d)=>{l.has(d)||(e.removeChild(h),this.shapes.delete(d))});return}const u=(l,c)=>{const d=o.getElement(l).getPosition();return c.setPosition(d),c};e.removeChildren(),i.forEach(l=>e.appendChild(s(z(l),"edge"))),a.forEach(l=>{e.appendChild(u(z(l),s(z(l),"combo")))}),r.forEach(l=>{e.appendChild(u(z(l),s(z(l),"node")))})}initCanvas(){const{renderer:e,size:[t,r]}=this.options;if(this.canvas){const{width:i,height:a}=this.canvas.getConfig();(t!==i||r!==a)&&this.canvas.resize(t,r),e&&this.canvas.setRenderer(e)}else{const{className:i,position:a,container:s,containerStyle:o}=this.options,[u,l]=bw({renderer:e,width:t,height:r,placement:a,className:"minimap",container:s,containerStyle:o,graphCanvas:this.context.canvas});i&&u.classList.add(i),this.container=u,this.canvas=l}return this.setCamera(),this.canvas}createLandmark(e,t,r){const i=`${e.join(",")}-${t.join(",")}-${r}`;if(this.landmarkMap.has(i))return this.landmarkMap.get(i);const s=this.canvas.getCamera().createLandmark(i,{position:e,focalPoint:t,zoom:r});return this.landmarkMap.set(i,s),s}setCamera(){var e;const{canvas:t}=this.context,r=(e=this.canvas)===null||e===void 0?void 0:e.getCamera();if(!r)return;const{size:[i,a],padding:s}=this.options,[o,u,l,c]=Ri(s),{min:h,max:d,center:f}=t.getBounds("elements"),g=d[0]-h[0],p=d[1]-h[1],v=i-c-u,m=a-o-l,y=v/g,b=m/p,x=Math.min(y,b),w=this.createLandmark(f,f,x);r.gotoLandmark(w,0)}get maskBBox(){const{canvas:e}=this.context,t=e.getSize(),r=e.getCanvasByViewport([0,0]),i=e.getCanvasByViewport(t),a=this.canvas.canvas2Viewport(ri(r)),s=this.canvas.canvas2Viewport(ri(i)),o=s.x-a.x,u=s.y-a.y;return[a.x,a.y,o,u]}calculateMaskBBox(){const{size:[e,t]}=this.options;let[r,i,a,s]=this.maskBBox;return r<0&&(a=Sa(a+r,e),r=0),i<0&&(s=Sa(s+i,t),i=0),r+a>e&&(a=ka(e-r,0)),i+s>t&&(s=ka(t-i,0)),[Sa(r,e),Sa(i,t),ka(a,0),ka(s,0)]}renderMask(){const{maskStyle:e}=this.options;this.mask||(this.mask=document.createElement("div"),this.mask.addEventListener("pointerdown",this.onMaskDragStart)),this.container.appendChild(this.mask),Object.assign(this.mask.style,Object.assign(Object.assign({},e),{cursor:"move",position:"absolute",pointerEvents:"auto"})),this.updateMask()}updateMask(){if(!this.mask)return;const[e,t,r,i]=this.calculateMaskBBox();Object.assign(this.mask.style,{top:t+"px",left:e+"px",width:r+"px",height:i+"px"})}destroy(){var e;this.unbindEvents(),this.canvas.destroy(),(e=this.mask)===null||e===void 0||e.remove(),super.destroy()}}C0.defaultOptions={size:[240,160],shape:"key",padding:10,position:"right-bottom",maskStyle:{border:"1px solid #ddd",background:"rgba(0, 0, 0, 0.1)"},containerStyle:{border:"1px solid #ddd",background:"#fff"},delay:128};const Sa=(n,e)=>Math.min(n,e),ka=(n,e)=>Math.max(n,e);var Py=globalThis&&globalThis.__awaiter||function(n,e,t,r){function i(a){return a instanceof t?a:new t(function(s){s(a)})}return new(t||(t=Promise))(function(a,s){function o(c){try{l(r.next(c))}catch(h){s(h)}}function u(c){try{l(r.throw(c))}catch(h){s(h)}}function l(c){c.done?a(c.value):i(c.value).then(o,u)}l((r=r.apply(n,e||[])).next())})};const Ny={x1:0,y1:0,x2:0,y2:0,visibility:"hidden"};class A0 extends wn{constructor(e,t){super(e,Object.assign({},A0.defaultOptions,t)),this.initSnapline=()=>{const r=this.context.canvas.getLayer("transient");this.horizontalLine||(this.horizontalLine=r.appendChild(new Ks({style:Object.assign(Object.assign({},Ny),this.options.horizontalLineStyle)}))),this.verticalLine||(this.verticalLine=r.appendChild(new Ks({style:Object.assign(Object.assign({},Ny),this.options.verticalLineStyle)})))},this.isHorizontalSticking=!1,this.isVerticalSticking=!1,this.enableStick=!0,this.autoSnapToLine=(r,i,a)=>Py(this,void 0,void 0,function*(){const{verticalX:s,horizontalY:o}=a,{tolerance:u}=this.options,{min:[l,c],max:[h,d],center:[f,g]}=i;let p=0,v=0;s!==null&&(_n(h,s)<u&&(p=s-h),_n(l,s)<u&&(p=s-l),_n(f,s)<u&&(p=s-f),p!==0&&(this.isVerticalSticking=!0)),o!==null&&(_n(d,o)<u&&(v=o-d),_n(c,o)<u&&(v=o-c),_n(g,o)<u&&(v=o-g),v!==0&&(this.isHorizontalSticking=!0)),(p!==0||v!==0)&&(yield this.context.graph.translateElementBy({[r]:[p,v]},!1))}),this.enableSnap=r=>{const{target:i}=r,a=.5;if(this.isHorizontalSticking||this.isVerticalSticking){const[s,o]=this.getDelta(r);if(this.isHorizontalSticking&&this.isVerticalSticking&&Math.abs(s)<=a&&Math.abs(o)<=a)return this.context.graph.translateElementBy({[i.id]:[-s,-o]},!1),!1;if(this.isHorizontalSticking&&Math.abs(o)<=a)return this.context.graph.translateElementBy({[i.id]:[0,-o]},!1),!1;if(this.isVerticalSticking&&Math.abs(s)<=a)return this.context.graph.translateElementBy({[i.id]:[-s,0]},!1),!1;this.isHorizontalSticking=!1,this.isVerticalSticking=!1,this.enableStick=!1,setTimeout(()=>{this.enableStick=!0},200)}return this.enableStick},this.calcSnaplineMetadata=(r,i)=>{const{tolerance:a,shape:s}=this.options,{min:[o,u],max:[l,c],center:[h,d]}=i;let f=null,g=null,p=null,v=null,m=null,y=null;return this.getNodes().some(b=>{if(Dt(r.id,b.id))return!1;const x=bT(b,s).getRenderBounds(),{min:[w,E],max:[_,S],center:[C,k]}=x;return f===null&&(_n(C,h)<a?f=C:_n(w,o)<a||_n(w,l)<a?f=w:(_n(_,l)<a||_n(_,o)<a)&&(f=_),f!==null&&(g=Math.min(E,u),p=Math.max(S,c))),v===null&&(_n(k,d)<a?v=k:_n(E,u)<a||_n(E,c)<a?v=E:(_n(S,c)<a||_n(S,u)<a)&&(v=S),v!==null&&(m=Math.min(w,o),y=Math.max(_,l))),f!==null&&v!==null}),{verticalX:f,verticalMinY:g,verticalMaxY:p,horizontalY:v,horizontalMinX:m,horizontalMaxX:y}},this.onDragStart=()=>{this.initSnapline()},this.onDrag=r=>Py(this,void 0,void 0,function*(){const{target:i}=r;if(this.options.autoSnap&&!this.enableSnap(r))return;const a=bT(i,this.options.shape).getRenderBounds(),s=this.calcSnaplineMetadata(i,a);this.hideSnapline(),(s.verticalX!==null||s.horizontalY!==null)&&this.updateSnapline(s),this.options.autoSnap&&(yield this.autoSnapToLine(i.id,a,s))}),this.onDragEnd=()=>{this.hideSnapline()},this.bindEvents()}getNodes(){var e;const{filter:t}=this.options,i=(((e=this.context.element)===null||e===void 0?void 0:e.getNodes())||[]).filter(a=>{var s;return Kq(a)&&((s=this.context.viewport)===null||s===void 0?void 0:s.isInViewport(a.getRenderBounds()))});return t?i.filter(a=>t(a)):i}hideSnapline(){this.horizontalLine.style.visibility="hidden",this.verticalLine.style.visibility="hidden"}getLineWidth(e){const{lineWidth:t}=this.options[`${e}LineStyle`];return+(t||Ny.lineWidth||1)/this.context.graph.getZoom()}updateSnapline(e){const{verticalX:t,verticalMinY:r,verticalMaxY:i,horizontalY:a,horizontalMinX:s,horizontalMaxX:o}=e,[u,l]=this.context.canvas.getSize(),{offset:c}=this.options;a!==null?Object.assign(this.horizontalLine.style,{x1:c===1/0?0:s-c,y1:a,x2:c===1/0?u:o+c,y2:a,visibility:"visible",lineWidth:this.getLineWidth("horizontal")}):this.horizontalLine.style.visibility="hidden",t!==null?Object.assign(this.verticalLine.style,{x1:t,y1:c===1/0?0:r-c,x2:t,y2:c===1/0?l:i+c,visibility:"visible",lineWidth:this.getLineWidth("vertical")}):this.verticalLine.style.visibility="hidden"}getDelta(e){const t=this.context.graph.getZoom();return oi([e.dx,e.dy],t)}bindEvents(){return Py(this,void 0,void 0,function*(){const{graph:e}=this.context;e.on(Dr.DRAG_START,this.onDragStart),e.on(Dr.DRAG,this.onDrag),e.on(Dr.DRAG_END,this.onDragEnd)})}unbindEvents(){const{graph:e}=this.context;e.off(Dr.DRAG_START,this.onDragStart),e.off(Dr.DRAG,this.onDrag),e.off(Dr.DRAG_END,this.onDragEnd)}destroyElements(){var e,t;(e=this.horizontalLine)===null||e===void 0||e.destroy(),(t=this.verticalLine)===null||t===void 0||t.destroy()}destroy(){this.destroyElements(),this.unbindEvents(),super.destroy()}}A0.defaultOptions={tolerance:5,offset:20,autoSnap:!0,shape:"key",verticalLineStyle:{stroke:"#1783FF"},horizontalLineStyle:{stroke:"#1783FF"},filter:()=>!0};const _n=(n,e)=>Math.abs(n-e),bT=(n,e)=>typeof e=="function"?e(n):n.getShape(e);var Zae=globalThis&&globalThis.__awaiter||function(n,e,t,r){function i(a){return a instanceof t?a:new t(function(s){s(a)})}return new(t||(t=Promise))(function(a,s){function o(c){try{l(r.next(c))}catch(h){s(h)}}function u(c){try{l(r.throw(c))}catch(h){s(h)}}function l(c){c.done?a(c.value):i(c.value).then(o,u)}l((r=r.apply(n,e||[])).next())})},Jae=globalThis&&globalThis.__rest||function(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(n);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(t[r[i]]=n[r[i]]);return t};const Qae=["timestamp","time","date","datetime"];class T0 extends wn{get padding(){return Ri(this.options.padding)}constructor(e,t){super(e,Object.assign({},T0.defaultOptions,t)),this.backup(),this.upsertTimebar()}play(){var e;(e=this.timebar)===null||e===void 0||e.play()}pause(){var e;(e=this.timebar)===null||e===void 0||e.pause()}forward(){var e;(e=this.timebar)===null||e===void 0||e.forward()}backward(){var e;(e=this.timebar)===null||e===void 0||e.backward()}reset(){var e;(e=this.timebar)===null||e===void 0||e.reset()}update(e){super.update(e),this.backup(),this.upsertTimebar()}backup(){this.originalData=xT(this.context.graph.getData())}upsertTimebar(){const{canvas:e}=this.context,t=this.options,{onChange:r,timebarType:i,data:a,x:s,y:o,width:u,height:l,mode:c}=t,h=Jae(t,["onChange","timebarType","data","x","y","width","height","mode"]),d=e.getSize(),[f]=this.padding;this.upsertCanvas().ready.then(()=>{var g;const p=Object.assign(Object.assign({x:d[0]/2-u/2,y:f,onChange:v=>{const m=(Er(v)?v:[v,v]).map(y=>TI(y)?y.getTime():y);this.options.mode==="modify"?this.filterElements(m):this.hiddenElements(m),r==null||r(m)}},h),{data:a.map(v=>re(v)?{time:v,value:0}:v),width:u,height:l,type:i});this.timebar?this.timebar.update(p):(this.timebar=new Hae({style:p}),(g=this.canvas)===null||g===void 0||g.appendChild(this.timebar))})}upsertCanvas(){if(this.canvas)return this.canvas;const{className:e,height:t,position:r}=this.options,i=this.context.canvas,[a]=i.getSize(),[s,,o]=this.padding,[u,l]=bw({width:a,height:t+s+o,graphCanvas:i,className:"timebar",placement:r});return this.container=u,e&&u.classList.add(e),this.canvas=l,this.canvas}filterElements(e){return Zae(this,void 0,void 0,function*(){var t;if(!this.originalData)return;const{elementTypes:r,getTime:i}=this.options,{graph:a,element:s}=this.context,o=xT(this.originalData);r.forEach(l=>{const c=`${l}s`;o[c]=(this.originalData[c]||[]).filter(h=>{const d=i(h);return!!wT(d,e)})});const u=[...o.nodes,...o.combos].map(l=>z(l));o.edges=o.edges.filter(l=>{const c=l.source,h=l.target;return u.includes(c)&&u.includes(h)}),a.setData(o),yield(t=s.draw({animation:!1,silence:!0}))===null||t===void 0?void 0:t.finished})}hiddenElements(e){const{graph:t}=this.context,{elementTypes:r,getTime:i}=this.options,a=[],s=[];r.forEach(o=>{var u;const l=`${o}s`;(((u=this.originalData)===null||u===void 0?void 0:u[l])||[]).forEach(h=>{const d=z(h),f=i(h);wT(f,e)?s.push(d):a.push(d)})}),t.hideElement(a,!1),t.showElement(s,!1)}destroy(){var e,t,r;const{graph:i}=this.context;this.originalData&&i.setData(Object.assign({},this.originalData)),(e=this.timebar)===null||e===void 0||e.destroy(),(t=this.canvas)===null||t===void 0||t.destroy(),(r=this.container)===null||r===void 0||r.remove(),this.originalData=void 0,this.container=void 0,this.timebar=void 0,this.canvas=void 0,super.destroy()}}T0.defaultOptions={position:"bottom",enable:!0,timebarType:"time",className:"g6-timebar",width:450,height:60,zIndex:3,elementTypes:["node"],padding:10,mode:"modify",getTime:n=>ese(n,Qae,void 0),loop:!1};const xT=n=>{const{nodes:e=[],edges:t=[],combos:r=[]}=n;return{nodes:[...e],edges:[...t],combos:[...r]}},wT=(n,e)=>{if(re(e))return n===e;const[t,r]=e;return n>=t&&n<=r},ese=(n,e,t)=>{var r;for(let i=0;i<e.length;i++){const a=e[i],s=(r=n.data)===null||r===void 0?void 0:r[a];if(s)return s}return t};function tse(n){const e={top:"unset",right:"unset",bottom:"unset",left:"unset"};return n.split("-").forEach(r=>{e[r]="8px"}),e.flexDirection=n.startsWith("top")||n.startsWith("bottom")?"row":"column",e}const nse=`
  .g6-toolbar {
    position: absolute;
    z-index: 100;
    display: flex;
    flex-direction: row;
    align-items: center;
    justify-content: center;
    border-radius: 4px;
    box-shadow: 0px 0px 8px rgba(0, 0, 0, 0.1);
    opacity: 0.65;
  }
  .g6-toolbar .g6-toolbar-item {
    display: inline-block;
    width: 16px;
    height: 16px;
    padding: 4px;
    cursor: pointer;
    box-sizing: content-box;
  }

  .g6-toolbar .g6-toolbar-item:hover {
    background-color: #f0f0f0;
  }

  .g6-toolbar .g6-toolbar-item svg {
    display: inline-block;
    width: 100%;
    height: 100%;
    pointer-events: none;
  }
`,rse=`
  <svg>
    <symbol id="zoom-in" viewBox="64 64 896 896">
      <path d="M637 443H519V309c0-4.4-3.6-8-8-8h-60c-4.4 0-8 3.6-8 8v134H325c-4.4 0-8 3.6-8 8v60c0 4.4 3.6 8 8 8h118v134c0 4.4 3.6 8 8 8h60c4.4 0 8-3.6 8-8V519h118c4.4 0 8-3.6 8-8v-60c0-4.4-3.6-8-8-8zm284 424L775 721c122.1-148.9 113.6-369.5-26-509-148-148.1-388.4-148.1-537 0-148.1 148.6-148.1 389 0 537 139.5 139.6 360.1 148.1 509 26l146 146c3.2 2.8 8.3 2.8 11 0l43-43c2.8-2.7 2.8-7.8 0-11zM696 696c-118.8 118.7-311.2 118.7-430 0-118.7-118.8-118.7-311.2 0-430 118.8-118.7 311.2-118.7 430 0 118.7 118.8 118.7 311.2 0 430z"></path>
    </symbol>
    <symbol id="zoom-out" viewBox="64 64 896 896">
      <path d="M637 443H325c-4.4 0-8 3.6-8 8v60c0 4.4 3.6 8 8 8h312c4.4 0 8-3.6 8-8v-60c0-4.4-3.6-8-8-8zm284 424L775 721c122.1-148.9 113.6-369.5-26-509-148-148.1-388.4-148.1-537 0-148.1 148.6-148.1 389 0 537 139.5 139.6 360.1 148.1 509 26l146 146c3.2 2.8 8.3 2.8 11 0l43-43c2.8-2.7 2.8-7.8 0-11zM696 696c-118.8 118.7-311.2 118.7-430 0-118.7-118.8-118.7-311.2 0-430 118.8-118.7 311.2-118.7 430 0 118.7 118.8 118.7 311.2 0 430z"></path>
    </symbol>
    <symbol id="edit" viewBox="64 64 896 896">
      <path d="M257.7 752c2 0 4-.2 6-.5L431.9 722c2-.4 3.9-1.3 5.3-2.8l423.9-423.9a9.96 9.96 0 000-14.1L694.9 114.9c-1.9-1.9-4.4-2.9-7.1-2.9s-5.2 1-7.1 2.9L256.8 538.8c-1.5 1.5-2.4 3.3-2.8 5.3l-29.5 168.2a33.5 33.5 0 009.4 29.8c6.6 6.4 14.9 9.9 23.8 9.9zm67.4-174.4L687.8 215l73.3 73.3-362.7 362.6-88.9 15.7 15.6-89zM880 836H144c-17.7 0-32 14.3-32 32v36c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-36c0-17.7-14.3-32-32-32z"></path>
    </symbol>
    <symbol id="delete" viewBox="64 64 896 896">
      <path d="M360 184h-8c4.4 0 8-3.6 8-8v8h304v-8c0 4.4 3.6 8 8 8h-8v72h72v-80c0-35.3-28.7-64-64-64H352c-35.3 0-64 28.7-64 64v80h72v-72zm504 72H160c-17.7 0-32 14.3-32 32v32c0 4.4 3.6 8 8 8h60.4l24.7 523c1.6 34.1 29.8 61 63.9 61h454c34.2 0 62.3-26.8 63.9-61l24.7-523H888c4.4 0 8-3.6 8-8v-32c0-17.7-14.3-32-32-32zM731.3 840H292.7l-24.2-512h487l-24.2 512z"></path>
    </symbol>
    <symbol id="redo" viewBox="64 64 896 896">
      <path d="M758.2 839.1C851.8 765.9 912 651.9 912 523.9 912 303 733.5 124.3 512.6 124 291.4 123.7 112 302.8 112 523.9c0 125.2 57.5 236.9 147.6 310.2 3.5 2.8 8.6 2.2 11.4-1.3l39.4-50.5c2.7-3.4 2.1-8.3-1.2-11.1-8.1-6.6-15.9-13.7-23.4-21.2a318.64 318.64 0 01-68.6-101.7C200.4 609 192 567.1 192 523.9s8.4-85.1 25.1-124.5c16.1-38.1 39.2-72.3 68.6-101.7 29.4-29.4 63.6-52.5 101.7-68.6C426.9 212.4 468.8 204 512 204s85.1 8.4 124.5 25.1c38.1 16.1 72.3 39.2 101.7 68.6 29.4 29.4 52.5 63.6 68.6 101.7 16.7 39.4 25.1 81.3 25.1 124.5s-8.4 85.1-25.1 124.5a318.64 318.64 0 01-68.6 101.7c-9.3 9.3-19.1 18-29.3 26L668.2 724a8 8 0 00-14.1 3l-39.6 162.2c-1.2 5 2.6 9.9 7.7 9.9l167 .8c6.7 0 10.5-7.7 6.3-12.9l-37.3-47.9z"></path>
    </symbol>
    <symbol id="undo" viewBox="64 64 896 896">
      <path d="M511.4 124C290.5 124.3 112 303 112 523.9c0 128 60.2 242 153.8 315.2l-37.5 48c-4.1 5.3-.3 13 6.3 12.9l167-.8c5.2 0 9-4.9 7.7-9.9L369.8 727a8 8 0 00-14.1-3L315 776.1c-10.2-8-20-16.7-29.3-26a318.64 318.64 0 01-68.6-101.7C200.4 609 192 567.1 192 523.9s8.4-85.1 25.1-124.5c16.1-38.1 39.2-72.3 68.6-101.7 29.4-29.4 63.6-52.5 101.7-68.6C426.9 212.4 468.8 204 512 204s85.1 8.4 124.5 25.1c38.1 16.1 72.3 39.2 101.7 68.6 29.4 29.4 52.5 63.6 68.6 101.7 16.7 39.4 25.1 81.3 25.1 124.5s-8.4 85.1-25.1 124.5a318.64 318.64 0 01-68.6 101.7c-7.5 7.5-15.3 14.5-23.4 21.2a7.93 7.93 0 00-1.2 11.1l39.4 50.5c2.8 3.5 7.9 4.1 11.4 1.3C854.5 760.8 912 649.1 912 523.9c0-221.1-179.4-400.2-400.6-399.9z"></path>
    </symbol>
    <symbol id="export" viewBox="64 64 896 896">
      <path d="M880 912H144c-17.7 0-32-14.3-32-32V144c0-17.7 14.3-32 32-32h360c4.4 0 8 3.6 8 8v56c0 4.4-3.6 8-8 8H184v656h656V520c0-4.4 3.6-8 8-8h56c4.4 0 8 3.6 8 8v360c0 17.7-14.3 32-32 32zM770.87 199.13l-52.2-52.2a8.01 8.01 0 014.7-13.6l179.4-21c5.1-.6 9.5 3.7 8.9 8.9l-21 179.4c-.8 6.6-8.9 9.4-13.6 4.7l-52.4-52.4-256.2 256.2a8.03 8.03 0 01-11.3 0l-42.4-42.4a8.03 8.03 0 010-11.3l256.1-256.3z"></path>
    </symbol>
    <symbol id="auto-fit" viewBox="64 64 896 896">
      <path d="M952 474H829.8C812.5 327.6 696.4 211.5 550 194.2V72c0-4.4-3.6-8-8-8h-60c-4.4 0-8 3.6-8 8v122.2C327.6 211.5 211.5 327.6 194.2 474H72c-4.4 0-8 3.6-8 8v60c0 4.4 3.6 8 8 8h122.2C211.5 696.4 327.6 812.5 474 829.8V952c0 4.4 3.6 8 8 8h60c4.4 0 8-3.6 8-8V829.8C696.4 812.5 812.5 696.4 829.8 550H952c4.4 0 8-3.6 8-8v-60c0-4.4-3.6-8-8-8zM512 756c-134.8 0-244-109.2-244-244s109.2-244 244-244 244 109.2 244 244-109.2 244-244 244z"></path>
      <path d="M512 392c-32.1 0-62.1 12.4-84.8 35.2-22.7 22.7-35.2 52.7-35.2 84.8s12.5 62.1 35.2 84.8C449.9 619.4 480 632 512 632s62.1-12.5 84.8-35.2C619.4 574.1 632 544 632 512s-12.5-62.1-35.2-84.8A118.57 118.57 0 00512 392z"></path>
    </symbol>
    <symbol id="reset" viewBox="64 64 896 896">
      <path d="M909.1 209.3l-56.4 44.1C775.8 155.1 656.2 92 521.9 92 290 92 102.3 279.5 102 511.5 101.7 743.7 289.8 932 521.9 932c181.3 0 335.8-115 394.6-276.1 1.5-4.2-.7-8.9-4.9-10.3l-56.7-19.5a8 8 0 00-10.1 4.8c-1.8 5-3.8 10-5.9 14.9-17.3 41-42.1 77.8-73.7 109.4A344.77 344.77 0 01655.9 829c-42.3 17.9-87.4 27-133.8 27-46.5 0-91.5-9.1-133.8-27A341.5 341.5 0 01279 755.2a342.16 342.16 0 01-73.7-109.4c-17.9-42.4-27-87.4-27-133.9s9.1-91.5 27-133.9c17.3-41 42.1-77.8 73.7-109.4 31.6-31.6 68.4-56.4 109.3-73.8 42.3-17.9 87.4-27 133.8-27 46.5 0 91.5 9.1 133.8 27a341.5 341.5 0 01109.3 73.8c9.9 9.9 19.2 20.4 27.8 31.4l-60.2 47a8 8 0 003 14.1l175.6 43c5 1.2 9.9-2.6 9.9-7.7l.8-180.9c-.1-6.6-7.8-10.3-13-6.2z"></path>
    </symbol>
    <symbol id="exit-fullscreen" viewBox="0 0 1024 1024">
      <path d="M418.13333333 361.43786666c0 0.2048-0.13653333 0.4096-0.13653334 0.68266667C417.99679999 362.32533333 418.13333333 362.53013333 418.13333333 362.73493333 418.13333333 371.54133333 414.44693333 379.392 408.78079999 385.39946666 408.43946666 385.7408 408.30293333 386.21866666 408.02986666 386.49173333c-1.09226667 1.09226667-2.59413333 1.77493333-3.82293333 2.73066667C398.40426666 393.65973333 391.64586666 396.8 383.93173333 396.8 383.72693333 396.8 383.59039999 396.73173333 383.38559999 396.73173333S382.97599999 396.8 382.77119999 396.8L112.29866666 396.8C92.50133333 396.8 76.79999999 381.50826666 76.79999999 362.66666666 76.66346666 343.89333333 92.63786666 328.53333333 112.16213333 328.53333333l189.44 0L87.44959999 114.51733333C73.59146666 100.59093333 73.25013333 78.5408 86.63039999 65.29706666c13.17546667-13.44853333 35.36213333-12.97066667 49.152 0.88746667l214.08426667 214.08426667L349.86666666 90.89706666C349.79839999 71.23626666 365.22666666 55.46666666 383.99999999 55.46666666 402.77333333 55.33013333 418.13333333 71.30453333 418.13333333 90.8288L418.13333333 361.43786666zM928.90453333 328.53333333l-189.44 0 214.15253333-214.08426667c13.85813333-13.9264 14.19946667-35.90826667 0.88746667-49.22026666-13.17546667-13.44853333-35.36213333-12.97066667-49.152 0.88746666l-214.08426667 214.08426667L691.26826666 90.89706666C691.26826666 71.23626666 675.83999999 55.46666666 657.06666666 55.46666666 638.29333333 55.33013333 622.93333333 71.30453333 622.93333333 90.8288l0 270.60906666c0 0.2048 0.13653333 0.4096 0.13653333 0.68266667C623.06986666 362.32533333 622.93333333 362.53013333 622.93333333 362.73493333 622.93333333 371.54133333 626.61973333 379.392 632.28586666 385.39946666c0.34133333 0.34133333 0.47786667 0.8192 0.8192 1.09226667 1.09226667 1.09226667 2.59413333 1.77493333 3.8912 2.73066667C642.66239999 393.65973333 649.42079999 396.8 657.13493333 396.8c0.2048 0 0.34133333-0.06826667 0.54613333-0.06826667S658.09066666 396.8 658.29546666 396.8l270.5408 0C948.56533333 396.8 964.26666666 381.50826666 964.26666666 362.66666666 964.40319999 343.89333333 948.42879999 328.53333333 928.90453333 328.53333333zM418.13333333 635.73333333c0-8.8064-3.6864-16.5888-9.35253334-22.66453333C408.43946666 612.72746666 408.30293333 612.2496 408.02986666 611.90826666 406.86933333 610.88426666 405.43573333 610.2016 404.20693333 609.24586666 398.47253333 604.80853333 391.64586666 601.6 383.93173333 601.6 383.72693333 601.6 383.59039999 601.73653333 383.38559999 601.73653333S382.97599999 601.6 382.77119999 601.6L112.29866666 601.6C92.50133333 601.6 76.79999999 616.96 76.79999999 635.73333333 76.66346666 654.50666666 92.63786666 669.86666666 112.16213333 669.86666666l189.44 0-214.15253334 214.15253334c-13.85813333 13.85813333-14.19946667 35.84-0.88746666 49.22026666 13.17546667 13.44853333 35.36213333 12.9024 49.152-0.95573333l214.08426666-214.08426667 0 189.37173334c0 19.59253333 15.42826667 35.49866667 34.2016 35.36213333C402.77333333 943.2064 418.13333333 927.232 418.13333333 907.5712L418.13333333 637.09866666c0-0.27306667-0.13653333-0.47786667-0.13653334-0.68266666C417.99679999 636.14293333 418.13333333 635.93813333 418.13333333 635.73333333zM739.46453333 669.86666666l189.44 0c19.456 0 35.49866667-15.36 35.36213333-34.13333333C964.26666666 616.96 948.56533333 601.6 928.76799999 601.6L658.29546666 601.6C658.09066666 601.6 657.88586666 601.73653333 657.68106666 601.73653333S657.33973333 601.6 657.13493333 601.6C649.42079999 601.6 642.59413333 604.80853333 636.85973333 609.24586666 635.63093333 610.2016 634.19733333 610.88426666 633.03679999 611.90826666 632.76373333 612.2496 632.62719999 612.72746666 632.28586666 613.0688 626.61973333 619.14453333 622.93333333 626.92693333 622.93333333 635.73333333c0 0.2048 0.13653333 0.4096 0.13653333 0.68266667C623.06986666 636.6208 622.93333333 636.8256 622.93333333 637.09866666l0 270.5408C622.93333333 927.232 638.29333333 943.2064 657.06666666 942.93333333c18.77333333 0.13653333 34.2016-15.70133333 34.2016-35.36213333l0-189.37173334 214.08426667 214.08426667c13.78986667 13.85813333 35.90826667 14.40426667 49.152 0.95573333 13.312-13.312 12.97066667-35.36213333-0.88746667-49.22026666L739.46453333 669.86666666z"  ></path></symbol>
    <symbol id="request-fullscreen" viewBox="0 0 1024 1024">
      <path d="M69.818182 87.598545v273.128728a34.909091 34.909091 0 0 0 69.818182 0V163.653818l221.928727 222.021818a33.512727 33.512727 0 0 0 47.383273-47.383272L186.926545 116.363636h197.073455a34.909091 34.909091 0 0 0 0-69.818181H110.871273C85.364364 46.545455 69.818182 59.671273 69.818182 87.598545zM938.542545 46.545455H665.413818a34.909091 34.909091 0 0 0 0 69.818181h197.073455L640.465455 338.292364a33.512727 33.512727 0 0 0 47.383272 47.383272l221.928728-222.021818v197.073455a34.909091 34.909091 0 0 0 69.818181 0V87.598545c0-27.927273-15.453091-41.053091-40.96-41.05309z m-827.671272 907.636363h273.128727a34.909091 34.909091 0 0 0 0-69.818182H186.926545l222.021819-221.928727a33.512727 33.512727 0 0 0-47.383273-47.383273L139.636364 837.073455V640a34.909091 34.909091 0 0 0-69.818182 0v273.128727c0 27.927273 15.546182 41.053091 41.053091 41.053091z m868.724363-41.053091V640a34.909091 34.909091 0 0 0-69.818181 0v197.073455L687.941818 615.051636a33.512727 33.512727 0 0 0-47.383273 47.383273L862.487273 884.363636H665.413818a34.909091 34.909091 0 0 0 0 69.818182h273.128727c25.6 0 41.053091-13.125818 41.053091-41.053091z"  ></path></symbol>
  </svg>
`;var ET=globalThis&&globalThis.__awaiter||function(n,e,t,r){function i(a){return a instanceof t?a:new t(function(s){s(a)})}return new(t||(t=Promise))(function(a,s){function o(c){try{l(r.next(c))}catch(h){s(h)}}function u(c){try{l(r.throw(c))}catch(h){s(h)}}function l(c){c.done?a(c.value):i(c.value).then(o,u)}l((r=r.apply(n,e||[])).next())})};class O0 extends wn{constructor(e,t){super(e,Object.assign({},O0.defaultOptions,t)),this.$element=_u("toolbar",!1),this.onToolbarItemClick=i=>{const{onClick:a}=this.options;if(i.target instanceof Element&&i.target.className.includes("g6-toolbar-item")){const s=i.target.getAttribute("value");a==null||a(s,i.target)}};const r=this.context.canvas.getContainer();this.$element.style.display="flex",r.appendChild(this.$element),t2("g6-toolbar-css","style",{},nse,document.head),t2("g6-toolbar-svgicon","div",{display:"none"},rse),this.$element.addEventListener("click",this.onToolbarItemClick),this.update(t)}update(e){const t=Object.create(null,{update:{get:()=>super.update}});return ET(this,void 0,void 0,function*(){t.update.call(this,e);const{className:r,position:i,style:a}=this.options;this.$element.className=`g6-toolbar ${r||""}`,Object.assign(this.$element.style,a,tse(i)),this.$element.innerHTML=yield this.getDOMContent()})}destroy(){this.$element.removeEventListener("click",this.onToolbarItemClick),this.$element.remove(),super.destroy()}getDOMContent(){return ET(this,void 0,void 0,function*(){return(yield this.options.getItems()).map(t=>{var r;return`
          <div class="g6-toolbar-item" value="${t.value}" title="${(r=t.title)!==null&&r!==void 0?r:""}">
            <svg aria-hidden="true" focusable="false">
              <use xlink:href="#${t.id}"></use>
            </svg>
          </div>`}).join("")})}}O0.defaultOptions={position:"top-left"};var _T=globalThis&&globalThis.__awaiter||function(n,e,t,r){function i(a){return a instanceof t?a:new t(function(s){s(a)})}return new(t||(t=Promise))(function(a,s){function o(c){try{l(r.next(c))}catch(h){s(h)}}function u(c){try{l(r.throw(c))}catch(h){s(h)}}function l(c){c.done?a(c.value):i(c.value).then(o,u)}l((r=r.apply(n,e||[])).next())})};class M0 extends wn{constructor(e,t){super(e,Object.assign({},M0.defaultOptions,t)),this.currentTarget=null,this.tooltipElement=null,this.container=null,this.isEnable=(r,i)=>{const{enable:a}=this.options;return typeof a=="function"?a(r,i):a},this.onClick=r=>{const{target:{id:i}}=r;this.currentTarget===i?this.hide(r):this.show(r)},this.onPointerMove=r=>{const{target:i}=r;!this.currentTarget||i.id===this.currentTarget||this.show(r)},this.onPointerLeave=r=>{this.hide(r)},this.onCanvasMove=r=>{this.hide(r)},this.onPointerEnter=r=>{this.show(r)},this.showById=r=>_T(this,void 0,void 0,function*(){const i={target:{id:r}};yield this.show(i)}),this.getElementData=(r,i)=>{const{model:a}=this.context;switch(i){case"node":return a.getNodeData([r]);case"edge":return a.getEdgeData([r]);case"combo":return a.getComboData([r]);default:return[]}},this.show=r=>_T(this,void 0,void 0,function*(){var i,a;const{client:s,target:{id:o}}=r;if(wf(r.target))return;const u=this.context.graph.getElementType(o),{getContent:l,title:c}=this.options,h=this.getElementData(o,u);if(!this.tooltipElement||!this.isEnable(r,h))return;let d={};if(l){if(d.content=yield l(r,h),!d.content)return}else{const p=this.context.graph.getElementRenderStyle(o),v=u==="node"?p.fill:p.stroke;d={title:c||u,data:h.map(m=>({name:"ID",value:m.id||`${m.source} -> ${m.target}`,color:v}))}}this.currentTarget=o;let f,g;if(s)f=s.x,g=s.y;else{const p=Fn(h,"0.style",{x:0,y:0});f=p.x,g=p.y}(a=(i=this.options).onOpenChange)===null||a===void 0||a.call(i,!0),this.tooltipElement.update(Object.assign(Object.assign(Object.assign({},this.tooltipStyleProps),{x:f,y:g,style:{".tooltip":{visibility:"visible"}}}),d))}),this.hide=r=>{var i,a,s,o,u;if(!r){(a=(i=this.options).onOpenChange)===null||a===void 0||a.call(i,!1),(s=this.tooltipElement)===null||s===void 0||s.hide(),this.currentTarget=null;return}if(!this.tooltipElement||!this.currentTarget)return;const{client:{x:l,y:c}}=r;(u=(o=this.options).onOpenChange)===null||u===void 0||u.call(o,!1),this.tooltipElement.hide(l,c),this.currentTarget=null},this.initTooltip=()=>{var r;const i=new Tae({className:"tooltip",style:this.tooltipStyleProps});return(r=this.container)===null||r===void 0||r.appendChild(i.HTMLTooltipElement),i},this.render(),this.bindEvents()}getEvents(){return this.options.trigger==="click"?{"node:click":this.onClick,"edge:click":this.onClick,"combo:click":this.onClick,"canvas:click":this.onPointerLeave,contextmenu:this.onPointerLeave,drag:this.onPointerLeave}:{"node:pointerenter":this.onPointerEnter,"node:pointermove":this.onPointerMove,"canvas:pointermove":this.onCanvasMove,"edge:pointerenter":this.onPointerEnter,"edge:pointermove":this.onPointerMove,"combo:pointerenter":this.onPointerEnter,"combo:pointermove":this.onPointerMove,contextmenu:this.onPointerLeave,"node:drag":this.onPointerLeave}}update(e){var t;this.unbindEvents(),super.update(e),this.tooltipElement&&((t=this.container)===null||t===void 0||t.removeChild(this.tooltipElement.HTMLTooltipElement)),this.tooltipElement=this.initTooltip(),this.bindEvents()}render(){const{canvas:e}=this.context,t=e.getContainer();t&&(this.container=t,this.tooltipElement=this.initTooltip())}unbindEvents(){const{graph:e}=this.context,t=this.getEvents();Object.keys(t).forEach(r=>{e.off(r,t[r])})}bindEvents(){const{graph:e}=this.context,t=this.getEvents();Object.keys(t).forEach(r=>{e.on(r,t[r])})}get tooltipStyleProps(){const{canvas:e}=this.context,{center:t}=e.getBounds(),r=e.getContainer(),{top:i,left:a}=r.getBoundingClientRect(),{style:s,position:o,enterable:u,container:l={x:-a,y:-i},title:c,offset:h}=this.options,[d,f]=t,[g,p]=e.getSize();return{x:d,y:f,container:l,title:c,bounding:{x:0,y:0,width:g,height:p},position:o,enterable:u,offset:h,style:s}}destroy(){var e;this.unbindEvents(),this.tooltipElement&&((e=this.container)===null||e===void 0||e.removeChild(this.tooltipElement.HTMLTooltipElement)),super.destroy()}}M0.defaultOptions={trigger:"hover",position:"top-right",enterable:!1,enable:!0,offset:[10,10],style:{".tooltip":{visibility:"hidden"}}};var wN=globalThis&&globalThis.__awaiter||function(n,e,t,r){function i(a){return a instanceof t?a:new t(function(s){s(a)})}return new(t||(t=Promise))(function(a,s){function o(c){try{l(r.next(c))}catch(h){s(h)}}function u(c){try{l(r.throw(c))}catch(h){s(h)}}function l(c){c.done?a(c.value):i(c.value).then(o,u)}l((r=r.apply(n,e||[])).next())})};let _o;function EN(n,e){return _o||(_o=document.createElement("canvas")),_o.width=n,_o.height=e,_o.getContext("2d").clearRect(0,0,n,e),_o}function ise(n,e,t,r){return wN(this,void 0,void 0,function*(){const i=EN(n,e),a=i.getContext("2d"),{rotate:s,opacity:o,textFill:u,textFontSize:l,textFontFamily:c,textFontVariant:h,textFontWeight:d,textAlign:f,textBaseline:g}=r;return a.textAlign=f,a.textBaseline=g,a.translate(n/2,e/2),a.font=`${l}px ${c} ${h} ${d}`,s&&a.rotate(s),o&&(a.globalAlpha=o),u&&(a.fillStyle=u,a.fillText(`${t}`,0,0)),i.toDataURL()})}function ase(n,e,t,r){return wN(this,void 0,void 0,function*(){const i=EN(n,e),a=i.getContext("2d"),{rotate:s,opacity:o}=r;s&&a.rotate(s),o&&(a.globalAlpha=o);const u=new Image;return u.crossOrigin="anonymous",u.src=t,new Promise(l=>{u.onload=function(){const c=n>u.width?(n-u.width)/2:0,h=e>u.height?(e-u.height)/2:0;a.drawImage(u,0,0,u.width,u.height,c,h,n-c*2,e-h*2),l(i.toDataURL())}})})}var sse=globalThis&&globalThis.__awaiter||function(n,e,t,r){function i(a){return a instanceof t?a:new t(function(s){s(a)})}return new(t||(t=Promise))(function(a,s){function o(c){try{l(r.next(c))}catch(h){s(h)}}function u(c){try{l(r.throw(c))}catch(h){s(h)}}function l(c){c.done?a(c.value):i(c.value).then(o,u)}l((r=r.apply(n,e||[])).next())})},ose=globalThis&&globalThis.__rest||function(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(n);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(t[r[i]]=n[r[i]]);return t};class P0 extends wn{constructor(e,t){super(e,Object.assign({},P0.defaultOptions,t)),this.$element=_u("watermark"),this.context.canvas.getContainer().appendChild(this.$element),this.update(t)}update(e){const t=Object.create(null,{update:{get:()=>super.update}});return sse(this,void 0,void 0,function*(){t.update.call(this,e);const r=this.options,{width:i,height:a,text:s,imageURL:o}=r,u=ose(r,["width","height","text","imageURL"]);Object.keys(u).forEach(c=>{c.startsWith("background")&&(this.$element.style[c]=e[c])});const l=o?yield ase(i,a,o,u):yield ise(i,a,s,u);this.$element.style.backgroundImage=`url(${l})`})}destroy(){super.destroy(),this.$element.remove()}}P0.defaultOptions={width:200,height:100,opacity:.2,rotate:Math.PI/12,text:"",textFill:"#000",textFontSize:16,textAlign:"center",textBaseline:"middle",backgroundRepeat:"repeat"};const use=["#7E92B5","#F4664A","#FFBE3A"],lse={type:"group",color:["#1783FF","#00C9C9","#F08F56","#D580FF","#7863FF","#DB9D0D","#60C42D","#FF80CA","#2491B3","#17C76F"]},cse={type:"group",color:["#99ADD1","#1783FF","#00C9C9","#F08F56","#D580FF","#7863FF","#DB9D0D","#60C42D","#FF80CA","#2491B3","#17C76F"]};function _N(n){const{bgColor:e,textColor:t,nodeColor:r,nodeColorDisabled:i,nodeStroke:a,nodeHaloStrokeOpacityActive:s=.15,nodeHaloStrokeOpacitySelected:o=.25,nodeOpacityDisabled:u=.06,nodeIconOpacityInactive:l=.85,nodeOpacityInactive:c=.25,nodeBadgePalette:h=use,nodePaletteOptions:d=lse,edgeColor:f,edgeColorDisabled:g,edgePaletteOptions:p=cse,comboColor:v,comboColorDisabled:m,comboStroke:y,comboStrokeDisabled:b,edgeColorInactive:x}=n;return{background:e,node:{palette:d,style:{donutOpacity:1,badgeBackgroundOpacity:1,badgeFill:"#fff",badgeFontSize:8,badgePadding:[0,4],badgePalette:h,fill:r,fillOpacity:1,halo:!1,iconFill:"#fff",iconOpacity:1,labelBackground:!1,labelBackgroundFill:e,labelBackgroundLineWidth:0,labelBackgroundOpacity:.75,labelFill:t,labelFillOpacity:.85,labelLineHeight:16,labelPadding:[0,2],labelFontSize:12,labelFontWeight:400,labelOpacity:1,labelOffsetY:2,lineWidth:0,portFill:r,portLineWidth:1,portStroke:a,portStrokeOpacity:.65,size:32,stroke:a,strokeOpacity:1,zIndex:2},state:{selected:{halo:!0,haloLineWidth:24,haloStrokeOpacity:o,labelFontSize:12,labelFontWeight:"bold",lineWidth:4,stroke:a},active:{halo:!0,haloLineWidth:12,haloStrokeOpacity:s},highlight:{labelFontWeight:"bold",lineWidth:4,stroke:a,strokeOpacity:.85},inactive:{badgeBackgroundOpacity:c,donutOpacity:c,fillOpacity:c,iconOpacity:l,labelFill:t,labelFillOpacity:c,strokeOpacity:c},disabled:{badgeBackgroundOpacity:.25,donutOpacity:u,fill:i,fillOpacity:u,iconFill:i,iconOpacity:.25,labelFill:t,labelFillOpacity:.25,strokeOpacity:u}},animation:{enter:"fade",exit:"fade",show:"fade",hide:"fade",expand:"node-expand",collapse:"node-collapse",update:[{fields:["x","y","fill","stroke"]}],translate:[{fields:["x","y"]}]}},edge:{palette:p,style:{badgeBackgroundFill:f,badgeFill:"#fff",badgeFontSize:8,badgeOffsetX:10,fillOpacity:1,halo:!1,haloLineWidth:12,haloStrokeOpacity:1,increasedLineWidthForHitTesting:2,labelBackground:!1,labelBackgroundFill:e,labelBackgroundLineWidth:0,labelBackgroundOpacity:.75,labelBackgroundPadding:[4,4,4,4],labelFill:t,labelFontSize:12,labelFontWeight:400,labelOpacity:1,labelPlacement:"center",labelTextBaseline:"middle",lineWidth:1,stroke:f,strokeOpacity:1,zIndex:1},state:{selected:{halo:!0,haloStrokeOpacity:.25,labelFontSize:14,labelFontWeight:"bold",lineWidth:3},active:{halo:!0,haloStrokeOpacity:.15},highlight:{labelFontWeight:"bold",lineWidth:3},inactive:{stroke:x,fillOpacity:.08,labelOpacity:.25,strokeOpacity:.08,badgeBackgroundOpacity:.25},disabled:{stroke:g,fillOpacity:.45,strokeOpacity:.45,labelOpacity:.25,badgeBackgroundOpacity:.45}},animation:{enter:"fade",exit:"fade",expand:"path-in",collapse:"path-out",show:"fade",hide:"fade",update:[{fields:["sourceNode","targetNode"]},{fields:["stroke"],shape:"key"}],translate:[{fields:["sourceNode","targetNode"]}]}},combo:{style:{collapsedMarkerFill:e,collapsedMarkerFontSize:12,collapsedMarkerFillOpacity:1,collapsedSize:32,collapsedFillOpacity:1,fill:v,halo:!1,haloLineWidth:12,haloStroke:y,haloStrokeOpacity:.25,labelBackground:!1,labelBackgroundFill:e,labelBackgroundLineWidth:0,labelBackgroundOpacity:.75,labelBackgroundPadding:[2,4,2,4],labelFill:t,labelFontSize:12,labelFontWeight:400,labelOpacity:1,lineDash:0,lineWidth:1,fillOpacity:.04,strokeOpacity:1,padding:10,stroke:y},state:{selected:{halo:!0,labelFontSize:14,labelFontWeight:700,lineWidth:4},active:{halo:!0},highlight:{labelFontWeight:700,lineWidth:4},inactive:{fillOpacity:.65,labelOpacity:.25,strokeOpacity:.65},disabled:{fill:m,fillOpacity:.25,labelOpacity:.25,stroke:b,strokeOpacity:.25}},animation:{enter:"fade",exit:"fade",show:"fade",hide:"fade",expand:"combo-expand",collapse:"combo-collapse",update:[{fields:["x","y"]},{fields:["fill","stroke","lineWidth"],shape:"key"}],translate:[{fields:["x","y"]}]}}}}const hse={type:"group",color:["#637088","#0F55A6","#008383","#9C5D38","#8B53A6","#4E40A6","#8F6608","#3E801D","#A65383","#175E75","#0F8248"]},dse={bgColor:"#000000",comboColor:"#fdfdfd",comboColorDisabled:"#d0e4ff",comboStroke:"#99add1",comboStrokeDisabled:"#969696",edgeColor:"#637088",edgeColorDisabled:"#637088",edgeColorInactive:"#D0E4FF",edgePaletteOptions:hse,nodeColor:"#1783ff",nodeColorDisabled:"#D0E4FF",nodeHaloStrokeOpacityActive:.25,nodeHaloStrokeOpacitySelected:.45,nodeIconOpacityInactive:.45,nodeOpacityDisabled:.25,nodeOpacityInactive:.45,nodeStroke:"#d0e4ff",textColor:"#ffffff"},fse=_N(dse),gse={bgColor:"#ffffff",comboColor:"#99ADD1",comboColorDisabled:"#f0f0f0",comboStroke:"#99add1",comboStrokeDisabled:"#d9d9d9",edgeColor:"#99add1",edgeColorDisabled:"#d9d9d9",edgeColorInactive:"#1B324F",nodeColor:"#1783ff",nodeColorDisabled:"#1B324F",nodeHaloStrokeOpacityActive:.15,nodeHaloStrokeOpacitySelected:.25,nodeIconOpacityInactive:.85,nodeOpacityDisabled:.06,nodeOpacityInactive:.25,nodeStroke:"#000000",textColor:"#000000"},pse=_N(gse);class ms extends gx{beforeDraw(e,t){return e}afterLayout(e,t){}}class vse extends ms{beforeDraw(e){const{model:t}=this.context,r=e.add.combos,i=a=>{const s=[];return a.forEach((o,u)=>{const c=t.getAncestorsData(u,"combo").map(h=>z(h)).reverse();s.push([u,o,c.length])}),new Map(s.sort(([,,o],[,,u])=>u-o).map(([o,u])=>[o,u]))};return e.add.combos=i(r),e.update.combos=i(e.update.combos),e}}function vr(n,e,t,r,i){const a=z(r),s=`${t}s`,o=i?r:n.add[s].get(a)||n.update[s].get(a)||n.remove[s].get(a)||r;Object.entries(n).forEach(([u,l])=>{e===u?l[s].set(a,o):l[s].delete(a)})}function Hh(n,e){return Object.keys(n).every(t=>n[t]===e[t])}class mse extends ms{beforeDraw(e,t){if(t.stage==="visibility"||!this.context.model.model.hasTreeStructure(Je))return e;const{model:r}=this.context,{add:i,update:a}=e,s=[...e.update.combos.entries(),...e.add.combos.entries()];for(;s.length;){const[o,u]=s.pop();if(Zn(u)){const l=r.getDescendantsData(o),c=l.map(z),{internal:h,external:d}=Db(c,f=>r.getRelatedEdgesData(f));l.forEach(f=>{const g=z(f),p=s.findIndex(([m])=>m===g);p!==-1&&s.splice(p,1);const v=r.getElementType(g);vr(e,"remove",v,f)}),h.forEach(f=>vr(e,"remove","edge",f)),d.forEach(f=>{var g;const p=z(f);((g=this.context.element)===null||g===void 0?void 0:g.getElement(p))?a.edges.set(p,f):i.edges.set(p,f)})}else{const l=r.getChildrenData(o),c=l.map(z),{edges:h}=Db(c,d=>r.getRelatedEdgesData(d));[...l,...h].forEach(d=>{var f;const g=z(d),p=r.getElementType(g);((f=this.context.element)===null||f===void 0?void 0:f.getElement(g))?vr(e,"update",p,d):vr(e,"add",p,d),p==="combo"&&s.push([g,d])})}}return e}}const ST=(n,e,t,r)=>{const i=`${t}s`,a=z(r);!n.add[i].has(a)&&!n.update[i].has(a)&&n[e][i].set(z(r),r)};class yse extends ms{getElement(e){return this.context.element.getElement(e)}handleExpand(e,t){if(ST(t,"add","node",e),Zn(e))return;const r=z(e);ST(t,"add","node",e),this.context.model.getRelatedEdgesData(r,"out").forEach(s=>{vr(t,"add","edge",s)}),this.context.model.getChildrenData(r).forEach(s=>{this.handleExpand(s,t)})}beforeDraw(e){const{graph:t,model:r}=this.context;if(!r.model.hasTreeStructure(hr))return e;const{add:{nodes:i,edges:a},update:{nodes:s}}=e,o=new Map,u=new Map;i.forEach((c,h)=>{Zn(c)&&o.set(h,c)}),a.forEach(c=>{if(t.getElementType(c.source)!=="node")return;const h=t.getNodeData(c.source);Zn(h)&&o.set(c.source,h)}),s.forEach((c,h)=>{const d=this.getElement(h);if(!d)return;const f=d.attributes.collapsed;Zn(c)?f||o.set(h,c):f&&u.set(h,c)});const l=new Set;return o.forEach((c,h)=>{r.getDescendantsData(h).forEach(f=>{const g=z(f);if(l.has(g))return;vr(e,"remove","node",f),r.getRelatedEdgesData(g).forEach(v=>{vr(e,"remove","edge",v)}),l.add(g)})}),u.forEach((c,h)=>{if(r.getAncestorsData(h,hr).some(Zn)){vr(e,"remove","node",c);return}this.handleExpand(c,e)}),e}}function bse(n,e,t,r=!1){const i=kb[n][e];!r&&i?i!==t&&Di.warn(`The extension ${e} of ${n} has been registered before.`):Object.assign(kb[n],{[e]:t})}/*!
 * @antv/g-plugin-dragndrop
 * @description A G plugin for Drag n Drop implemented with PointerEvents
 * @version 2.0.34
 * @date 4/14/2025, 2:54:47 AM
 * @author AntVis
 * @docs https://g.antv.antgroup.com/
 */var SN=function(){function n(e){U(this,n),this.dragndropPluginOptions=e}return H(n,[{key:"apply",value:function(t){var r=this,i=t.renderingService,a=t.renderingContext,s=a.root.ownerDocument,o=s.defaultView,u=function(c){var h=c.target,d=h===s,f=d&&r.dragndropPluginOptions.isDocumentDraggable?s:h.closest&&h.closest("[draggable=true]");if(f){var g=!1,p=c.timeStamp,v=[c.clientX,c.clientY],m=null,y=[c.clientX,c.clientY],b=function(){var w=as(vn().mark(function E(_){var S,C,k,A,T,O;return vn().wrap(function(R){for(;;)switch(R.prev=R.next){case 0:if(g){R.next=8;break}if(S=_.timeStamp-p,C=Hn([_.clientX,_.clientY],v),!(S<=r.dragndropPluginOptions.dragstartTimeThreshold||C<=r.dragndropPluginOptions.dragstartDistanceThreshold)){R.next=5;break}return R.abrupt("return");case 5:_.type="dragstart",f.dispatchEvent(_),g=!0;case 8:if(_.type="drag",_.dx=_.clientX-y[0],_.dy=_.clientY-y[1],f.dispatchEvent(_),y=[_.clientX,_.clientY],d){R.next=21;break}return k=r.dragndropPluginOptions.overlap==="pointer"?[_.canvasX,_.canvasY]:h.getBounds().center,R.next=17,s.elementsFromPoint(k[0],k[1]);case 17:A=R.sent,T=A[A.indexOf(h)+1],O=(T==null?void 0:T.closest("[droppable=true]"))||(r.dragndropPluginOptions.isDocumentDroppable?s:null),m!==O&&(m&&(_.type="dragleave",_.target=m,m.dispatchEvent(_)),O&&(_.type="dragenter",_.target=O,O.dispatchEvent(_)),m=O,m&&(_.type="dragover",_.target=m,m.dispatchEvent(_)));case 21:case"end":return R.stop()}},E)}));return function(_){return w.apply(this,arguments)}}();o.addEventListener("pointermove",b);var x=function(E){if(g){E.detail={preventClick:!0};var _=E.clone();m&&(_.type="drop",_.target=m,m.dispatchEvent(_)),_.type="dragend",f.dispatchEvent(_),g=!1}o.removeEventListener("pointermove",b)};h.addEventListener("pointerup",x,{once:!0}),h.addEventListener("pointerupoutside",x,{once:!0})}};i.hooks.init.tap(n.tag,function(){o.addEventListener("pointerdown",u)}),i.hooks.destroy.tap(n.tag,function(){o.removeEventListener("pointerdown",u)})}}])}();SN.tag="Dragndrop";var xse=function(n){function e(){var t,r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return U(this,e),t=Te(this,e),t.name="dragndrop",t.options=r,t}return Oe(e,n),H(e,[{key:"init",value:function(){this.addRenderingPlugin(new SN(Ce({overlap:"pointer",isDocumentDraggable:!1,isDocumentDroppable:!1,dragstartDistanceThreshold:0,dragstartTimeThreshold:0},this.options)))}},{key:"destroy",value:function(){this.removeAllRenderingPlugins()}},{key:"setOptions",value:function(r){Object.assign(this.plugins[0].dragndropPluginOptions,r)}}])}(cs),kT=globalThis&&globalThis.__awaiter||function(n,e,t,r){function i(a){return a instanceof t?a:new t(function(s){s(a)})}return new(t||(t=Promise))(function(a,s){function o(c){try{l(r.next(c))}catch(h){s(h)}}function u(c){try{l(r.throw(c))}catch(h){s(h)}}function l(c){c.done?a(c.value):i(c.value).then(o,u)}l((r=r.apply(n,e||[])).next())})},CT=globalThis&&globalThis.__rest||function(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(n);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(t[r[i]]=n[r[i]]);return t};const AT=["main"],TT=["background","main","label","transient"];function wse(n){return n.main}class OT{getConfig(){return this.config}getLayer(e="main"){return this.extends.layers[e]||wse(this.getLayers())}getLayers(){return this.extends.layers}getRenderer(e){return this.extends.renderers[e]}getCamera(e="main"){return this.getLayer(e).getCamera()}getRoot(e="main"){return this.getLayer(e).getRoot()}getContextService(e="main"){return this.getLayer(e).getContextService()}setCursor(e){this.config.cursor=e,this.getLayer().setCursor(e)}get document(){return this.getLayer().document}get context(){return this.getLayer().context}constructor(e){this.config={enableMultiLayer:!0},Object.assign(this.config,e);const t=this.config,{renderer:r,background:i,cursor:a,enableMultiLayer:s}=t,o=CT(t,["renderer","background","cursor","enableMultiLayer"]),u=s?TT:AT,l=MT(r,u),c=Object.fromEntries(u.map(h=>{const d=new Sb(Object.assign(Object.assign({},o),{supportsMutipleCanvasesInOneContainer:s,renderer:l[h],background:s?h==="background"?i:void 0:i}));return[h,d]}));PT(c),this.extends={config:this.config,renderer:r,renderers:l,layers:c}}get ready(){return Promise.all(Object.entries(this.getLayers()).map(([,e])=>e.ready))}resize(e,t){Object.assign(this.extends.config,{width:e,height:t}),Object.values(this.getLayers()).forEach(r=>{const i=r.getCamera(),a=i.getPosition(),s=i.getFocalPoint();r.resize(e,t),i.setPosition(a),i.setFocalPoint(s)})}getBounds(e){return nc(Object.values(this.getLayers()).map(t=>e?t.getRoot().childNodes.find(i=>i.classList.includes(e)):t.getRoot()).filter(t=>(t==null?void 0:t.childNodes.length)>0).map(t=>t.getBounds()))}getContainer(){const e=this.extends.config.container;return typeof e=="string"?document.getElementById(e):e}getSize(){return[this.extends.config.width||0,this.extends.config.height||0]}appendChild(e,t){var r;const i=((r=e.style)===null||r===void 0?void 0:r.$layer)||"main";return this.getLayer(i).appendChild(e,t)}setRenderer(e){if(e===this.extends.renderer)return;const t=MT(e,this.config.enableMultiLayer?TT:AT);this.extends.renderers=t,Object.entries(t).forEach(([r,i])=>this.getLayer(r).setRenderer(i)),PT(this.getLayers())}getCanvasByViewport(e){return pn(this.getLayer().viewport2Canvas(ri(e)))}getViewportByCanvas(e){return pn(this.getLayer().canvas2Viewport(ri(e)))}getViewportByClient(e){return pn(this.getLayer().client2Viewport(ri(e)))}getClientByViewport(e){return pn(this.getLayer().viewport2Client(ri(e)))}getClientByCanvas(e){return this.getClientByViewport(this.getViewportByCanvas(e))}getCanvasByClient(e){const t=this.getLayer(),r=t.client2Viewport(ri(e));return pn(t.viewport2Canvas(r))}toDataURL(){return kT(this,arguments,void 0,function*(e={}){const t=globalThis.devicePixelRatio||1,{mode:r="viewport"}=e,i=CT(e,["mode"]);let[a,s,o,u]=[0,0,0,0];if(r==="viewport")[o,u]=this.getSize();else if(r==="overall"){const m=this.getBounds(),y=hs(m);[a,s]=m.min,[o,u]=y}const l=ub('<div id="virtual-image"></div>'),c=new Sb({width:o,height:u,renderer:new Tl,devicePixelRatio:t,container:l,background:this.extends.config.background});yield c.ready,c.appendChild(this.getLayer("background").getRoot().cloneNode(!0)),c.appendChild(this.getRoot().cloneNode(!0));const h=this.getLayer("label").getRoot().cloneNode(!0),d=c.viewport2Canvas({x:0,y:0}),f=this.getCanvasByViewport([0,0]);h.translate([f[0]-d.x,f[1]-d.y]),h.scale(1/this.getCamera().getZoom()),c.appendChild(h),c.appendChild(this.getLayer("transient").getRoot().cloneNode(!0));const g=this.getCamera(),p=c.getCamera();if(r==="viewport")p.setZoom(g.getZoom()),p.setPosition(g.getPosition()),p.setFocalPoint(g.getFocalPoint());else if(r==="overall"){const[m,y,b]=p.getPosition(),[x,w,E]=p.getFocalPoint();p.setPosition([m+a,y+s,b]),p.setFocalPoint([x+a,w+s,E])}const v=c.getContextService();return new Promise(m=>{c.addEventListener(cr.RERENDER,()=>kT(this,void 0,void 0,function*(){yield new Promise(b=>setTimeout(b,300));const y=yield v.toDataURL(i);m(y)}))})})}destroy(){Object.values(this.getLayers()).forEach(e=>{e.getCamera().cancelLandmarkAnimation(),e.destroy()})}}function MT(n,e){return Object.fromEntries(e.map(t=>{const r=(n==null?void 0:n(t))||new Tl;return r instanceof Tl&&r.setConfig({enableDirtyRectangleRendering:!1}),t==="main"?r.registerPlugin(new xse({isDocumentDraggable:!0,isDocumentDroppable:!0,dragstartDistanceThreshold:10,dragstartTimeThreshold:100})):r.unregisterPlugin(r.getPlugin("dom-interaction")),[t,r]}))}function PT(n){Object.entries(n).forEach(([e,t])=>{const r=t.getContextService().getDomElement();r!=null&&r.style&&(r.style.gridArea="1 / 1 / 2 / 2",r.style.outline="none",r.tabIndex=1,e!=="main"&&(r.style.pointerEvents="none")),r!=null&&r.parentElement&&(r.parentElement.style.display="grid")})}const So=n=>n?parseInt(n):0;function Ese(n){const e=getComputedStyle(n),t=n.clientWidth||So(e.width),r=n.clientHeight||So(e.height),i=So(e.paddingLeft)+So(e.paddingRight),a=So(e.paddingTop)+So(e.paddingBottom);return[t-i,r-a]}function NT(n){if(!n)return[0,0];let e=640,t=480;const[r,i]=Ese(n);e=r||e,t=i||t;const a=1,s=1;return[Math.max(re(e)?e:a,a),Math.max(re(t)?t:s,s)]}class N0{constructor(e){this.type=e}}class Ft extends N0{constructor(e,t){super(e),this.data=t}}class Or extends N0{constructor(e,t,r,i){super(e),this.animationType=t,this.animation=r,this.data=i}}class ko extends N0{constructor(e,t,r){super(e),this.elementType=t,this.data=r}}class Ch extends N0{constructor(e,t){super(e),this.data=t}}function Vt(n,e){n.emit(e.type,e)}function _se(n){if(!n)return null;if(n instanceof UM)return{type:"canvas",element:n};let e=n;for(;e;){if(oc(e))return{type:"node",element:e};if(Q4(e))return{type:"edge",element:e};if(Sx(e))return{type:"combo",element:e};e=e.parentElement}return null}function DT(n){var e;return((e=n==null?void 0:n.style)===null||e===void 0?void 0:e.zIndex)||0}const pl="cachedStyle",xw=n=>`__${n}__`;function Sse(n,e){const t=Array.isArray(e)?e:[e];Fn(n,pl)||wl(n,pl,{}),t.forEach(r=>{wl(Fn(n,pl),xw(r),n.attributes[r])})}function RT(n,e){return Fn(n,[pl,xw(e)])}function kse(n,e){return xw(e)in(Fn(n,pl)||{})}class Cse{constructor(e){this.tasks=[],this.animations=new Set,this.context=e}getTasks(){const e=[...this.tasks];return this.tasks=[],e}add(e,t){this.tasks.push([e,t])}animate(e,t,r){var i,a,s;(i=t==null?void 0:t.before)===null||i===void 0||i.call(t);const o=this.getTasks().map(([l,c])=>{var h,d,f;const{element:g,elementType:p,stage:v}=l,m=Qz(this.context.options,p,v,e);(h=c==null?void 0:c.before)===null||h===void 0||h.call(c);const y=m.length?t$(g,this.inferStyle(l,r),m):null;return y?((d=c==null?void 0:c.beforeAnimate)===null||d===void 0||d.call(c,y),y.finished.then(()=>{var b,x;(b=c==null?void 0:c.afterAnimate)===null||b===void 0||b.call(c,y),(x=c==null?void 0:c.after)===null||x===void 0||x.call(c),this.animations.delete(y)})):(f=c==null?void 0:c.after)===null||f===void 0||f.call(c),y}).filter(Boolean);o.forEach(l=>this.animations.add(l));const u=cx(o);return u?((a=t==null?void 0:t.beforeAnimate)===null||a===void 0||a.call(t,u),u.finished.then(()=>{var l,c;(l=t==null?void 0:t.afterAnimate)===null||l===void 0||l.call(t,u),(c=t==null?void 0:t.after)===null||c===void 0||c.call(t),this.release()})):(s=t==null?void 0:t.after)===null||s===void 0||s.call(t),u}inferStyle(e,t){var r,i;const{element:a,elementType:s,stage:o,originalStyle:u,updatedStyle:l={}}=e;e.modifiedStyle||(e.modifiedStyle=Object.assign(Object.assign({},u),l));const{modifiedStyle:c}=e,h={},d={};if(o==="enter")Object.assign(h,{opacity:0});else if(o==="exit")Object.assign(d,{opacity:0});else if(o==="show")Object.assign(h,{opacity:0}),Object.assign(d,{opacity:(r=RT(a,"opacity"))!==null&&r!==void 0?r:Cl("opacity")});else if(o==="hide")Object.assign(h,{opacity:(i=RT(a,"opacity"))!==null&&i!==void 0?i:Cl("opacity")}),Object.assign(d,{opacity:0});else if(o==="collapse"){const{collapse:f}=t||{},{target:g,descendants:p,position:v}=f;if(s==="node"){if(p.includes(a.id)){const[m,y,b]=v;Object.assign(d,{x:m,y,z:b})}}else if(s==="combo"){if(a.id===g||p.includes(a.id)){const[m,y]=v;Object.assign(d,{x:m,y,childrenNode:u.childrenNode})}}else s==="edge"&&Object.assign(d,{sourceNode:c.sourceNode,targetNode:c.targetNode})}else if(o==="expand"){const{expand:f}=t||{},{target:g,descendants:p,position:v}=f;if(s==="node"){if(a.id===g||p.includes(a.id)){const[m,y,b]=v;Object.assign(h,{x:m,y,z:b})}}else if(s==="combo"){if(a.id===g||p.includes(a.id)){const[m,y,b]=v;Object.assign(h,{x:m,y,z:b,childrenNode:c.childrenNode})}}else s==="edge"&&Object.assign(h,{sourceNode:c.sourceNode,targetNode:c.targetNode})}return[Object.keys(h).length>0?Object.assign({},u,h):u,Object.keys(d).length>0?Object.assign({},c,d):c]}stop(){this.animations.forEach(e=>e.cancel())}clear(){this.tasks=[]}release(){var e,t;const{canvas:r}=this.context,i=(t=(e=r.document)===null||e===void 0?void 0:e.timeline)===null||t===void 0?void 0:t.animationsWithPromises;i&&(r.document.timeline.animationsWithPromises=i.filter(a=>a.playState!=="finished"))}destroy(){this.stop(),this.animations.clear(),this.tasks=[]}}class Ase{constructor(e){this.batchCount=0,this.context=e}emit(e){const{graph:t}=this.context;t.emit(e.type,e)}startBatch(e=!0){this.batchCount++,this.batchCount===1&&this.emit(new Ft(Z.BATCH_START,{initiate:e}))}endBatch(){this.batchCount--,this.batchCount===0&&this.emit(new Ft(Z.BATCH_END))}get isBatching(){return this.batchCount>0}destroy(){this.context=null}}class Tse extends fx{constructor(e){super(e),this.currentTarget=null,this.currentTargetType=null,this.category="behavior",this.forwardCanvasEvents=t=>{const{target:r}=t,i=_se(r);if(!i)return;const{graph:a,canvas:s}=this.context,{type:o,element:u}=i;if("destroyed"in u&&(wf(u)||u.destroyed))return;const{type:l,detail:c,button:h}=t,d=Object.assign(Object.assign({},t),{target:u,targetType:o,originalTarget:r});l===G.POINTER_MOVE&&(this.currentTarget!==u&&(this.currentTarget&&a.emit(`${this.currentTargetType}:${G.POINTER_LEAVE}`,Object.assign(Object.assign({},d),{type:G.POINTER_LEAVE,target:this.currentTarget,targetType:this.currentTargetType})),u&&(Object.assign(d,{type:G.POINTER_ENTER}),a.emit(`${o}:${G.POINTER_ENTER}`,d))),this.currentTarget=u,this.currentTargetType=o),l===G.CLICK&&h===2||(a.emit(`${o}:${l}`,d),a.emit(l,d)),l===G.CLICK&&c===2&&(Object.assign(d,{type:G.DBLCLICK}),a.emit(`${o}:${G.DBLCLICK}`,d),a.emit(G.DBLCLICK,d)),l===G.POINTER_DOWN&&h===2&&(Object.assign(d,{type:G.CONTEXT_MENU,preventDefault:()=>{var f;(f=s.getContainer())===null||f===void 0||f.addEventListener(G.CONTEXT_MENU,g=>g.preventDefault(),{once:!0})}}),a.emit(`${o}:${G.CONTEXT_MENU}`,d),a.emit(G.CONTEXT_MENU,d))},this.forwardContainerEvents=t=>{this.context.graph.emit(t.type,t)},this.forwardEvents(),this.setBehaviors(this.context.options.behaviors||[])}setBehaviors(e){this.setExtensions(e)}forwardEvents(){const e=this.context.canvas.getContainer();e&&[Io.KEY_DOWN,Io.KEY_UP].forEach(r=>{e.addEventListener(r,this.forwardContainerEvents)});const t=this.context.canvas.document;t&&[G.CLICK,G.DBLCLICK,G.POINTER_OVER,G.POINTER_LEAVE,G.POINTER_ENTER,G.POINTER_MOVE,G.POINTER_OUT,G.POINTER_DOWN,G.POINTER_UP,G.CONTEXT_MENU,G.DRAG_START,G.DRAG,G.DRAG_END,G.DRAG_ENTER,G.DRAG_OVER,G.DRAG_LEAVE,G.DROP,G.WHEEL].forEach(r=>{t.addEventListener(r,this.forwardCanvasEvents)})}destroy(){const e=this.context.canvas.getContainer();e&&[Io.KEY_DOWN,Io.KEY_UP].forEach(t=>{e.removeEventListener(t,this.forwardContainerEvents)}),this.context.canvas.document.removeAllEventListeners(),super.destroy()}}var Fl=globalThis&&globalThis.__rest||function(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(n);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(t[r[i]]=n[r[i]]);return t};function Ca(n,e){const{data:t,style:r}=n,i=Fl(n,["data","style"]),{data:a,style:s}=e,o=Fl(e,["data","style"]),u=Object.assign(Object.assign({},i),o);return(t||a)&&Object.assign(u,{data:Object.assign(Object.assign({},t),a)}),(r||s)&&Object.assign(u,{style:Object.assign(Object.assign({},r),s)}),u}function Dy(n){const{data:e,style:t}=n,i=Fl(n,["data","style"]);return e&&(i.data=Object.assign({},e)),t&&(i.style=Object.assign({},t)),i}function Co(n={},e={}){const{states:t=[],data:r={},style:i={},children:a=[]}=n,s=Fl(n,["states","data","style","children"]),{states:o=[],data:u={},style:l={},children:c=[]}=e,h=Fl(e,["states","data","style","children"]),d=(g,p)=>g.length!==p.length?!1:g.every((v,m)=>v===p[m]),f=(g,p)=>{const v=Object.keys(g),m=Object.keys(p);return v.length!==m.length?!1:v.every(y=>g[y]===p[y])};return!(!f(s,h)||!d(a,c)||!d(t,o)||!f(r,u)||!f(i,l))}var Ose=globalThis&&globalThis.__rest||function(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(n);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(t[r[i]]=n[r[i]]);return t};function Ry(n){const{id:e=z(n),style:t,data:r}=n,i=Ose(n,["id","style","data"]),a=Object.assign(Object.assign({},n),{style:Object.assign({},t),data:Object.assign({},r)});return o$(n)?Object.assign({id:e,data:a},i):{id:e,data:a}}function Qt(n){return n.data}function Mse(n){if(n.hasTreeStructure(hr))return;n.attachTreeStructure(hr);const e=n.getAllEdges();for(const t of e){const{source:r,target:i}=t;n.setParent(i,r,hr)}}class Pse{constructor(){this.latestRemovedComboIds=new Set,this.comboIds=new Set,this.changes=[],this.batchCount=0,this.isTraceless=!1,this.enableUpdateNodeLikeHierarchy=!0,this.model=new Xt}pushChange(e){if(this.isTraceless)return;const{type:t}=e;if(t===dt.NodeUpdated||t===dt.EdgeUpdated||t===dt.ComboUpdated){const{value:r,original:i}=e;this.changes.push({value:Dy(r),original:Dy(i),type:t})}else this.changes.push({value:Dy(e.value),type:t})}getChanges(){return this.changes}clearChanges(){this.changes=[]}batch(e){this.batchCount++,this.model.batch(e),this.batchCount--}isBatching(){return this.batchCount>0}silence(e){this.isTraceless=!0,e(),this.isTraceless=!1}isCombo(e){return this.comboIds.has(e)||this.latestRemovedComboIds.has(e)}getData(){return{nodes:this.getNodeData(),edges:this.getEdgeData(),combos:this.getComboData()}}getNodeData(e){return this.model.getAllNodes().reduce((t,r)=>{const i=Qt(r);return this.isCombo(z(i))||(e===void 0||e.includes(z(i)))&&t.push(i),t},[])}getEdgeDatum(e){return Qt(this.model.getEdge(e))}getEdgeData(e){return this.model.getAllEdges().reduce((t,r)=>{const i=Qt(r);return(e===void 0||e.includes(z(i)))&&t.push(i),t},[])}getComboData(e){return this.model.getAllNodes().reduce((t,r)=>{const i=Qt(r);return this.isCombo(z(i))&&(e===void 0||e.includes(z(i)))&&t.push(i),t},[])}getRootsData(e=hr){return this.model.getRoots(e).map(Qt)}getAncestorsData(e,t){const{model:r}=this;return!r.hasNode(e)||!r.hasTreeStructure(t)?[]:r.getAncestors(e,t).map(Qt)}getDescendantsData(e){const t=this.getElementDataById(e),r=[];return Wo(t,i=>{i!==t&&r.push(i)},i=>this.getChildrenData(z(i)),"TB"),r}getParentData(e,t){const{model:r}=this;if(!t){Di.warn("The hierarchy structure key is not specified");return}if(!r.hasNode(e)||!r.hasTreeStructure(t))return;const i=r.getParent(e,t);return i?Qt(i):void 0}getChildrenData(e){const t=this.getElementType(e)==="node"?hr:Je,{model:r}=this;return!r.hasNode(e)||!r.hasTreeStructure(t)?[]:r.getChildren(e,t).map(Qt)}getElementsDataByType(e){return e==="node"?this.getNodeData():e==="edge"?this.getEdgeData():e==="combo"?this.getComboData():[]}getElementDataById(e){return this.getElementType(e)==="edge"?this.getEdgeDatum(e):this.getNodeLikeDatum(e)}getNodeLikeDatum(e){const t=this.model.getNode(e);return Qt(t)}getNodeLikeData(e){return this.model.getAllNodes().reduce((t,r)=>{const i=Qt(r);return e?e.includes(z(i))&&t.push(i):t.push(i),t},[])}getElementDataByState(e,t){return this.getElementsDataByType(e).filter(i=>{var a;return(a=i.states)===null||a===void 0?void 0:a.includes(t)})}getElementState(e){var t;return((t=this.getElementDataById(e))===null||t===void 0?void 0:t.states)||[]}hasNode(e){return this.model.hasNode(e)&&!this.isCombo(e)}hasEdge(e){return this.model.hasEdge(e)}hasCombo(e){return this.model.hasNode(e)&&this.isCombo(e)}getRelatedEdgesData(e,t="both"){return this.model.getRelatedEdges(e,t).map(Qt)}getNeighborNodesData(e){return this.model.getNeighbors(e).map(Qt)}setData(e){const{nodes:t=[],edges:r=[],combos:i=[]}=e,{nodes:a,edges:s,combos:o}=this.getData(),u=es(a,t,h=>z(h),Co),l=es(s,r,h=>z(h),Co),c=es(o,i,h=>z(h),Co);this.batch(()=>{const h={nodes:u.enter,edges:l.enter,combos:c.enter};this.addData(h),this.computeZIndex(h,"add",!0);const d={nodes:u.update,edges:l.update,combos:c.update};this.updateData(d),this.computeZIndex(d,"update",!0);const f={nodes:u.exit.map(z),edges:l.exit.map(z),combos:c.exit.map(z)};this.removeData(f)})}addData(e){const{nodes:t,edges:r,combos:i}=e;this.batch(()=>{this.addComboData(i),this.addNodeData(t),this.addEdgeData(r)}),this.computeZIndex(e,"add")}addNodeData(e=[]){e.length&&(this.model.addNodes(e.map(t=>(this.pushChange({value:t,type:dt.NodeAdded}),Ry(t)))),this.updateNodeLikeHierarchy(e),this.computeZIndex({nodes:e},"add"))}addEdgeData(e=[]){e.length&&(this.model.addEdges(e.map(t=>(this.pushChange({value:t,type:dt.EdgeAdded}),Ry(t)))),this.computeZIndex({edges:e},"add"))}addComboData(e=[]){if(!e.length)return;const{model:t}=this;t.hasTreeStructure(Je)||t.attachTreeStructure(Je),t.addNodes(e.map(r=>(this.comboIds.add(z(r)),this.pushChange({value:r,type:dt.ComboAdded}),Ry(r)))),this.updateNodeLikeHierarchy(e),this.computeZIndex({combos:e},"add")}addChildrenData(e,t){const r=this.getNodeLikeDatum(e),i=t.map(z);this.addNodeData(t),this.updateNodeData([{id:e,children:[...r.children||[],...i]}]),this.addEdgeData(i.map(a=>({source:e,target:a})))}computeZIndex(e,t,r=!1){!r&&this.isBatching()||this.batch(()=>{const{nodes:i=[],edges:a=[],combos:s=[]}=e;s.forEach(o=>{var u,l,c;const h=z(o);if(t==="add"&&re((u=o.style)===null||u===void 0?void 0:u.zIndex)||t==="update"&&!("combo"in o))return;const d=this.getParentData(h,Je),f=d?((c=(l=d.style)===null||l===void 0?void 0:l.zIndex)!==null&&c!==void 0?c:0)+1:0;this.preventUpdateNodeLikeHierarchy(()=>{this.updateComboData([{id:h,style:{zIndex:f}}])})}),i.forEach(o=>{var u,l,c;const h=z(o);if(t==="add"&&re((u=o.style)===null||u===void 0?void 0:u.zIndex)||t==="update"&&!("combo"in o)&&!("children"in o))return;let d=0;const f=this.getParentData(h,Je);if(f)d=(((l=f.style)===null||l===void 0?void 0:l.zIndex)||0)+1;else{const g=this.getParentData(h,hr);g&&(d=((c=g==null?void 0:g.style)===null||c===void 0?void 0:c.zIndex)||0)}this.preventUpdateNodeLikeHierarchy(()=>{this.updateNodeData([{id:h,style:{zIndex:d}}])})}),a.forEach(o=>{var u,l,c,h,d;if(re((u=o.style)===null||u===void 0?void 0:u.zIndex))return;let{id:f,source:g,target:p}=o;if(!f)f=z(o);else{const y=this.getEdgeDatum(f);g=y.source,p=y.target}if(!g||!p)return;const v=((c=(l=this.getNodeLikeDatum(g))===null||l===void 0?void 0:l.style)===null||c===void 0?void 0:c.zIndex)||0,m=((d=(h=this.getNodeLikeDatum(p))===null||h===void 0?void 0:h.style)===null||d===void 0?void 0:d.zIndex)||0;this.updateEdgeData([{id:z(o),style:{zIndex:Math.max(v,m)-1}}])})})}getFrontZIndex(e){var t;const r=this.getElementType(e),i=this.getElementDataById(e),a=this.getData();if(Object.assign(a,{[`${r}s`]:a[`${r}s`].filter(s=>z(s)!==e)}),r==="combo"&&!Zn(i)){const s=new Set(this.getAncestorsData(e,Je).map(z));a.nodes=a.nodes.filter(o=>!s.has(z(o))),a.combos=a.combos.filter(o=>!s.has(z(o))),a.edges=a.edges.filter(({source:o,target:u})=>!s.has(o)&&!s.has(u))}return Math.max(((t=i.style)===null||t===void 0?void 0:t.zIndex)||0,0,...Object.values(a).flat().map(s=>{var o;return(((o=s==null?void 0:s.style)===null||o===void 0?void 0:o.zIndex)||0)+1}))}updateNodeLikeHierarchy(e){if(!this.enableUpdateNodeLikeHierarchy)return;const{model:t}=this;e.forEach(r=>{const i=z(r),a=Zc(r);a!==void 0&&(t.hasTreeStructure(Je)||t.attachTreeStructure(Je),a===null&&this.refreshComboData(i),this.setParent(i,Zc(r),Je));const s=r.children||[];if(s.length){t.hasTreeStructure(hr)||t.attachTreeStructure(hr);const o=s.filter(u=>t.hasNode(u));o.forEach(u=>this.setParent(u,i,hr)),o.length!==s.length&&this.updateNodeData([{id:i,children:o}])}})}preventUpdateNodeLikeHierarchy(e){this.enableUpdateNodeLikeHierarchy=!1,e(),this.enableUpdateNodeLikeHierarchy=!0}updateData(e){const{nodes:t,edges:r,combos:i}=e;this.batch(()=>{this.updateNodeData(t),this.updateComboData(i),this.updateEdgeData(r)}),this.computeZIndex(e,"update")}updateNodeData(e=[]){if(!e.length)return;const{model:t}=this;this.batch(()=>{const r=[];e.forEach(i=>{const a=z(i),s=Qt(t.getNode(a));if(Co(s,i))return;const o=Ca(s,i);this.pushChange({value:o,original:s,type:dt.NodeUpdated}),t.mergeNodeData(a,o),r.push(o)}),this.updateNodeLikeHierarchy(r)}),this.computeZIndex({nodes:e},"update")}refreshData(){const{nodes:e,edges:t,combos:r}=this.getData();e.forEach(i=>{this.pushChange({value:i,original:i,type:dt.NodeUpdated})}),t.forEach(i=>{this.pushChange({value:i,original:i,type:dt.EdgeUpdated})}),r.forEach(i=>{this.pushChange({value:i,original:i,type:dt.ComboUpdated})})}syncNodeLikeDatum(e){const{model:t}=this,r=z(e);if(!t.hasNode(r))return;const i=Qt(t.getNode(r)),a=Ca(i,e);t.mergeNodeData(r,a)}syncEdgeDatum(e){const{model:t}=this,r=z(e);if(!t.hasEdge(r))return;const i=Qt(t.getEdge(r)),a=Ca(i,e);t.mergeEdgeData(r,a)}updateEdgeData(e=[]){if(!e.length)return;const{model:t}=this;this.batch(()=>{e.forEach(r=>{const i=z(r),a=Qt(t.getEdge(i));if(Co(a,r))return;r.source&&a.source!==r.source&&t.updateEdgeSource(i,r.source),r.target&&a.target!==r.target&&t.updateEdgeTarget(i,r.target);const s=Ca(a,r);this.pushChange({value:s,original:a,type:dt.EdgeUpdated}),t.mergeEdgeData(i,s)})}),this.computeZIndex({edges:e},"update")}updateComboData(e=[]){if(!e.length)return;const{model:t}=this;t.batch(()=>{const r=[];e.forEach(i=>{const a=z(i),s=Qt(t.getNode(a));if(Co(s,i))return;const o=Ca(s,i);this.pushChange({value:o,original:s,type:dt.ComboUpdated}),t.mergeNodeData(a,o),r.push(o)}),this.updateNodeLikeHierarchy(r)}),this.computeZIndex({combos:e},"update")}setParent(e,t,r,i=!0){if(e===t)return;const a=this.getNodeLikeDatum(e),s=Zc(a);if(s!==t&&r===Je){const o={id:e,combo:t};this.isCombo(e)?this.syncNodeLikeDatum(o):this.syncNodeLikeDatum(o)}this.model.setParent(e,t,r),i&&r===Je&&fI([s,t]).forEach(o=>{o!==void 0&&this.refreshComboData(o)})}refreshComboData(e){const t=this.getComboData([e])[0],r=this.getAncestorsData(e,Je);t&&this.pushChange({value:t,original:t,type:dt.ComboUpdated}),r.forEach(i=>{this.pushChange({value:i,original:i,type:dt.ComboUpdated})})}getElementPosition(e){const t=this.getElementDataById(e);return Ut(t)}translateNodeLikeBy(e,t){this.isCombo(e)?this.translateComboBy(e,t):this.translateNodeBy(e,t)}translateNodeLikeTo(e,t){this.isCombo(e)?this.translateComboTo(e,t):this.translateNodeTo(e,t)}translateNodeBy(e,t){const r=this.getElementPosition(e),i=xe(r,[...t,0].slice(0,3));this.translateNodeTo(e,i)}translateNodeTo(e,t){const[r=0,i=0,a=0]=t;this.preventUpdateNodeLikeHierarchy(()=>{this.updateNodeData([{id:e,style:{x:r,y:i,z:a}}])})}translateComboBy(e,t){const[r=0,i=0,a=0]=t;if([r,i,a].some(isNaN)||[r,i,a].every(u=>u===0))return;const s=this.getComboData([e])[0];if(!s)return;const o=new Set;Wo(s,u=>{const l=z(u);if(o.has(l))return;o.add(l);const[c,h,d]=Ut(u),f=Ca(u,{style:{x:c+r,y:h+i,z:d+a}});this.pushChange({value:f,original:u,type:this.isCombo(l)?dt.ComboUpdated:dt.NodeUpdated}),this.model.mergeNodeData(l,f)},u=>this.getChildrenData(z(u)),"BT")}translateComboTo(e,t){var r;if(t.some(isNaN))return;const[i=0,a=0,s=0]=t,o=(r=this.getComboData([e]))===null||r===void 0?void 0:r[0];if(!o)return;const[u,l,c]=Ut(o),h=i-u,d=a-l,f=s-c;Wo(o,g=>{const p=z(g),[v,m,y]=Ut(g),b=Ca(g,{style:{x:v+h,y:m+d,z:y+f}});this.pushChange({value:b,original:g,type:this.isCombo(p)?dt.ComboUpdated:dt.NodeUpdated}),this.model.mergeNodeData(p,b)},g=>this.getChildrenData(z(g)),"BT")}removeData(e){const{nodes:t,edges:r,combos:i}=e;this.batch(()=>{this.removeEdgeData(r),this.removeNodeData(t),this.removeComboData(i),this.latestRemovedComboIds=new Set(i)})}removeNodeData(e=[]){e.length&&this.batch(()=>{e.forEach(t=>{this.removeEdgeData(this.getRelatedEdgesData(t).map(z)),this.pushChange({value:this.getNodeData([t])[0],type:dt.NodeRemoved}),this.removeNodeLikeHierarchy(t)}),this.model.removeNodes(e)})}removeEdgeData(e=[]){e.length&&(e.forEach(t=>this.pushChange({value:this.getEdgeData([t])[0],type:dt.EdgeRemoved})),this.model.removeEdges(e))}removeComboData(e=[]){e.length&&this.batch(()=>{e.forEach(t=>{this.pushChange({value:this.getComboData([t])[0],type:dt.ComboRemoved}),this.removeNodeLikeHierarchy(t),this.comboIds.delete(t)}),this.model.removeNodes(e)})}removeNodeLikeHierarchy(e){if(this.model.hasTreeStructure(Je)){const t=Zc(this.getNodeLikeDatum(e));this.setParent(e,void 0,Je,!1),this.model.getChildren(e,Je).forEach(r=>{const i=Qt(r),a=z(i);this.setParent(z(i),t,Je,!1);const s=Ca(i,{id:z(i),combo:t});this.pushChange({value:s,original:i,type:this.isCombo(a)?dt.ComboUpdated:dt.NodeUpdated}),this.model.mergeNodeData(z(i),s)}),de(t)||this.refreshComboData(t)}}getElementType(e){if(this.model.hasNode(e))return this.isCombo(e)?"combo":"node";if(this.model.hasEdge(e))return"edge";throw new Error(na(`Unknown element type of id: ${e}`))}destroy(){const{model:e}=this,t=e.getAllNodes(),r=e.getAllEdges();e.removeEdges(r.map(i=>i.id)),e.removeNodes(t.map(i=>i.id)),this.context={}}}var Fu=globalThis&&globalThis.__awaiter||function(n,e,t,r){function i(a){return a instanceof t?a:new t(function(s){s(a)})}return new(t||(t=Promise))(function(a,s){function o(c){try{l(r.next(c))}catch(h){s(h)}}function u(c){try{l(r.throw(c))}catch(h){s(h)}}function l(c){c.done?a(c.value):i(c.value).then(o,u)}l((r=r.apply(n,e||[])).next())})};class Nse{constructor(e){this.elementMap={},this.shapeTypeMap={},this.paletteStyle={},this.defaultStyle={},this.stateStyle={},this.visibilityCache=new WeakMap,this.context=e}init(){this.initContainer()}initContainer(){if(!this.container||this.container.destroyed){const{canvas:e}=this.context;this.container=e.appendChild(new Yt({className:"elements"}))}}emit(e,t){t.silence||Vt(this.context.graph,e)}forEachElementData(e){Qs.forEach(t=>{const r=this.context.model.getElementsDataByType(t);e(t,r)})}getElementType(e,t){var r;const{options:i,graph:a}=this.context,s=((r=i[e])===null||r===void 0?void 0:r.type)||t.type;return s?typeof s=="string"?s:s.call(a,t):e==="edge"?"line":"circle"}getTheme(e){return i4(this.context.options)[e]||{}}getThemeStyle(e){return this.getTheme(e).style||{}}getThemeStateStyle(e,t){const{state:r={}}=this.getTheme(e);return Object.assign({},...t.map(i=>r[i]||{}))}computePaletteStyle(){const{options:e}=this.context;this.paletteStyle={},this.forEachElementData((t,r)=>{var i,a;const s=Object.assign({},c3((i=this.getTheme(t))===null||i===void 0?void 0:i.palette),c3((a=e[t])===null||a===void 0?void 0:a.palette));s!=null&&s.field&&Object.assign(this.paletteStyle,tj(r,s))})}getPaletteStyle(e,t){const r=this.paletteStyle[t];return r?e==="edge"?{stroke:r}:{fill:r}:{}}computeElementDefaultStyle(e,t){var r;const{options:i}=this.context,a=((r=i[e])===null||r===void 0?void 0:r.style)||{};"transform"in a&&Array.isArray(a.transform)&&(a.transform=[...a.transform]),this.defaultStyle[z(t.datum)]=l3(a,t)}computeElementsDefaultStyle(e){const{graph:t}=this.context;this.forEachElementData((r,i)=>{const a=i.length;for(let s=0;s<a;s++){const o=i[s];(e===void 0||e.includes(z(o)))&&this.computeElementDefaultStyle(r,{datum:o,graph:t})}})}getDefaultStyle(e){return this.defaultStyle[e]||{}}getElementState(e){try{const{model:t}=this.context;return t.getElementState(e)}catch{return[]}}getElementStateStyle(e,t,r){var i,a;const{options:s}=this.context,o=((a=(i=s[e])===null||i===void 0?void 0:i.state)===null||a===void 0?void 0:a[t])||{};return l3(o,r)}computeElementStatesStyle(e,t,r){this.stateStyle[z(r.datum)]=Object.assign({},...t.map(i=>this.getElementStateStyle(e,i,r)))}computeElementsStatesStyle(e){const{graph:t}=this.context;this.forEachElementData((r,i)=>{const a=i.length;for(let s=0;s<a;s++){const o=i[s];if(e===void 0||e.includes(z(o))){const u=this.getElementState(z(o));this.computeElementStatesStyle(r,u,{datum:o,graph:t})}}})}getStateStyle(e){return this.stateStyle[e]||{}}computeStyle(e,t){e&&["translate","zIndex"].includes(e)||(this.computePaletteStyle(),this.computeElementsDefaultStyle(t),this.computeElementsStatesStyle(t))}getElement(e){return this.elementMap[e]}getNodes(){return this.context.model.getNodeData().map(({id:e})=>this.elementMap[e])}getEdges(){return this.context.model.getEdgeData().map(e=>this.elementMap[z(e)])}getCombos(){return this.context.model.getComboData().map(({id:e})=>this.elementMap[e])}getElementComputedStyle(e,t){const r=z(t),i=this.getThemeStyle(e),a=this.getPaletteStyle(e,r),s=t.style||{},o=this.getDefaultStyle(r),u=this.getThemeStateStyle(e,this.getElementState(r)),l=this.getStateStyle(r),c=Object.assign({},i,a,s,o,u,l);if(e==="combo"){const h=this.context.model.getChildrenData(r),f=!!c.collapsed?[]:h.map(z).filter(g=>this.getElement(g));Object.assign(c,{childrenNode:f,childrenData:h})}return c}getDrawData(e){this.init();const t=this.computeChangesAndDrawData(e);if(!t)return null;const{type:r="draw",stage:i=r}=e;return this.markDestroyElement(t.drawData),this.computeStyle(i),{type:r,stage:i,data:t}}draw(e={animation:!0}){const t=this.getDrawData(e);if(!t)return;const{data:{drawData:{add:r,update:i,remove:a}}}=t;return this.destroyElements(a,e),this.createElements(r,e),this.updateElements(i,e),this.setAnimationTask(e,t)}preLayoutDraw(){return Fu(this,arguments,void 0,function*(e={animation:!0}){var t,r;const i=this.getDrawData(e);if(!i)return;const{data:{drawData:a}}=i;yield(r=(t=this.context.layout)===null||t===void 0?void 0:t.preLayout)===null||r===void 0?void 0:r.call(t,a);const{add:s,update:o,remove:u}=a;return this.destroyElements(u,e),this.createElements(s,e),this.updateElements(o,e),this.setAnimationTask(e,i)})}setAnimationTask(e,t){const{animation:r,silence:i}=e,{data:{dataChanges:a,drawData:s},stage:o,type:u}=t;return this.context.animation.animate(r,i?{}:{before:()=>this.emit(new Ft(Z.BEFORE_DRAW,{dataChanges:a,animation:r,stage:o,render:u==="render"}),e),beforeAnimate:l=>this.emit(new Or(Z.BEFORE_ANIMATE,Un.DRAW,l,s),e),afterAnimate:l=>this.emit(new Or(Z.AFTER_ANIMATE,Un.DRAW,l,s),e),after:()=>this.emit(new Ft(Z.AFTER_DRAW,{dataChanges:a,animation:r,stage:o,render:u==="render",firstRender:this.context.graph.rendered===!1}),e)})}computeChangesAndDrawData(e){const{model:t}=this.context,r=t.getChanges(),i=sw(r);if(i.length===0)return null;const{NodeAdded:a=[],NodeUpdated:s=[],NodeRemoved:o=[],EdgeAdded:u=[],EdgeUpdated:l=[],EdgeRemoved:c=[],ComboAdded:h=[],ComboUpdated:d=[],ComboRemoved:f=[]}=ef(i,m=>m.type),g=m=>new Map(m.map(y=>{const b=y.value;return[z(b),b]})),p={add:{nodes:g(a),edges:g(u),combos:g(h)},update:{nodes:g(s),edges:g(l),combos:g(d)},remove:{nodes:g(o),edges:g(c),combos:g(f)}},v=this.transformData(p,e);return t.clearChanges(),{dataChanges:r,drawData:v}}transformData(e,t){const r=this.context.transform.getTransformInstance();return Object.values(r).reduce((i,a)=>a.beforeDraw(i,t),e)}createElement(e,t,r){var i;const a=z(t);if(this.getElement(a))return;const o=this.getElementType(e,t),u=this.getElementComputedStyle(e,t),l=la(e,o);if(!l)return Di.warn(`The element ${o} of ${e} is not registered.`);this.emit(new ko(Z.BEFORE_ELEMENT_CREATE,e,t),r);const c=this.container.appendChild(new l({id:a,context:this.context,style:u}));this.shapeTypeMap[a]=o,this.elementMap[a]=c;const{stage:h="enter"}=r;(i=this.context.animation)===null||i===void 0||i.add({element:c,elementType:e,stage:h,originalStyle:Object.assign({},c.attributes),updatedStyle:u},{after:()=>{var d;this.emit(new ko(Z.AFTER_ELEMENT_CREATE,e,t),r),(d=c.onCreate)===null||d===void 0||d.call(c)}})}createElements(e,t){const{nodes:r,edges:i,combos:a}=e;[["node",r],["combo",a],["edge",i]].forEach(([o,u])=>{u.forEach(l=>this.createElement(o,l,t))})}getUpdateStageStyle(e,t,r){const{stage:i="update"}=r;if(i==="translate")if(e==="node"||e==="combo"){const{style:{x:a=0,y:s=0,z:o=0}={}}=t;return{x:a,y:s,z:o}}else return{};return this.getElementComputedStyle(e,t)}updateElement(e,t,r){var i;const a=z(t),{stage:s="update"}=r,o=this.getElement(a);if(!o)return()=>null;this.emit(new ko(Z.BEFORE_ELEMENT_UPDATE,e,t),r);const u=this.getElementType(e,t),l=this.getUpdateStageStyle(e,t,r);this.shapeTypeMap[a]!==u&&(o.destroy(),delete this.shapeTypeMap[a],delete this.elementMap[a],this.createElement(e,t,{animation:!1,silence:!0}));const c=s!=="visibility"?s:l.visibility==="hidden"?"hide":"show";c==="hide"&&delete l.visibility,(i=this.context.animation)===null||i===void 0||i.add({element:o,elementType:e,stage:c,originalStyle:Object.assign({},o.attributes),updatedStyle:l},{before:()=>{const h=this.elementMap[a];s!=="collapse"&&Lb(h,l),s==="visibility"&&(kse(h,"opacity")||Sse(h,"opacity"),this.visibilityCache.set(h,c==="show"?"visible":"hidden"),c==="show"&&Zs(h,"visible"))},after:()=>{var h;const d=this.elementMap[a];s==="collapse"&&Lb(d,l),c==="hide"&&Zs(d,this.visibilityCache.get(d)),this.emit(new ko(Z.AFTER_ELEMENT_UPDATE,e,t),r),(h=d.onUpdate)===null||h===void 0||h.call(d)}})}updateElements(e,t){const{nodes:r,edges:i,combos:a}=e;[["node",r],["combo",a],["edge",i]].forEach(([o,u])=>{u.forEach(l=>this.updateElement(o,l,t))})}markDestroyElement(e){Object.values(e.remove).forEach(t=>{t.forEach(r=>{const i=z(r),a=this.getElement(i);a&&Qq(a)})})}destroyElement(e,t,r){var i;const{stage:a="exit"}=r,s=z(t),o=this.elementMap[s];if(!o)return()=>null;this.emit(new ko(Z.BEFORE_ELEMENT_DESTROY,e,t),r),(i=this.context.animation)===null||i===void 0||i.add({element:o,elementType:e,stage:a,originalStyle:Object.assign({},o.attributes),updatedStyle:{}},{after:()=>{var u;this.clearElement(s),o.destroy(),(u=o.onDestroy)===null||u===void 0||u.call(o),this.emit(new ko(Z.AFTER_ELEMENT_DESTROY,e,t),r)}})}destroyElements(e,t){const{nodes:r,edges:i,combos:a}=e;[["combo",a],["edge",i],["node",r]].forEach(([o,u])=>{u.forEach(l=>this.destroyElement(o,l,t))})}clearElement(e){delete this.paletteStyle[e],delete this.defaultStyle[e],delete this.stateStyle[e],delete this.elementMap[e],delete this.shapeTypeMap[e]}alignLayoutResultToElement(e,t){var r,i;const a=(r=e.nodes)===null||r===void 0?void 0:r.find(s=>z(s)===t);if(a){const s=Ut(this.context.model.getNodeLikeDatum(t)),o=Ut(a),u=Ke(s,o);(i=e.nodes)===null||i===void 0||i.forEach(l=>{var c,h,d;!((c=l.style)===null||c===void 0)&&c.x&&(l.style.x+=u[0]),!((h=l.style)===null||h===void 0)&&h.y&&(l.style.y+=u[1]),!((d=l.style)===null||d===void 0)&&d.z&&(l.style.z+=u[2]||0)})}}collapseNode(e,t){return Fu(this,void 0,void 0,function*(){var r;const{animation:i,align:a}=t,{model:s,layout:o}=this.context,u=this.computeChangesAndDrawData({stage:"collapse",animation:i});if(!u)return;this.markDestroyElement(u.drawData);const l=yield o.simulate();a&&this.alignLayoutResultToElement(l,e),s.updateData(l);const c=this.computeChangesAndDrawData({stage:"collapse",animation:i});if(!c)return;const{drawData:h}=c,{add:d,remove:f,update:g}=h;this.markDestroyElement(h);const p={animation:i,stage:"collapse",data:h};this.destroyElements(f,p),this.createElements(d,p),this.updateElements(g,p),yield(r=this.context.animation.animate(i,{beforeAnimate:v=>this.emit(new Or(Z.BEFORE_ANIMATE,Un.COLLAPSE,v,h),p),afterAnimate:v=>this.emit(new Or(Z.AFTER_ANIMATE,Un.COLLAPSE,v,h),p)},{collapse:{target:e,descendants:Array.from(f.nodes).map(([,v])=>z(v)),position:Ut(g.nodes.get(e))}}))===null||r===void 0?void 0:r.finished})}expandNode(e,t){return Fu(this,void 0,void 0,function*(){var r;const{model:i,layout:a}=this.context,{animation:s,align:o}=t,u=Ut(i.getNodeData([e])[0]),l=this.computeChangesAndDrawData({stage:"expand",animation:s});if(!l)return;const{drawData:{add:c}}=l;this.createElements(c,{animation:!1,stage:"expand",target:e}),this.context.animation.clear();const h=yield a.simulate();o&&this.alignLayoutResultToElement(h,e),i.updateData(h),this.computeStyle("expand");const d=this.computeChangesAndDrawData({stage:"collapse",animation:s});if(!d)return;const{drawData:f}=d,{update:g}=f,p={animation:s,stage:"expand",data:f};c.edges.forEach(v=>g.edges.set(z(v),v)),c.nodes.forEach(v=>g.nodes.set(z(v),v)),this.updateElements(g,p),yield(r=this.context.animation.animate(s,{beforeAnimate:v=>this.emit(new Or(Z.BEFORE_ANIMATE,Un.EXPAND,v,f),p),afterAnimate:v=>this.emit(new Or(Z.AFTER_ANIMATE,Un.EXPAND,v,f),p)},{expand:{target:e,descendants:Array.from(c.nodes).map(([,v])=>z(v)),position:u}}))===null||r===void 0?void 0:r.finished})}collapseCombo(e,t){return Fu(this,void 0,void 0,function*(){var r;const{model:i,element:a}=this.context;if(i.getAncestorsData(e,Je).some(p=>Zn(p)))return;const s=a.getElement(e),o=s.getComboPosition(Object.assign(Object.assign({},s.attributes),{collapsed:!0})),u=this.computeChangesAndDrawData({stage:"collapse",animation:t});if(!u)return;const{dataChanges:l,drawData:c}=u;this.markDestroyElement(c);const{update:h,remove:d}=c,f={animation:t,stage:"collapse",data:c};this.destroyElements(d,f),this.updateElements(h,f);const g=p=>Array.from(p).map(([,v])=>z(v));yield(r=this.context.animation.animate(t,{before:()=>this.emit(new Ft(Z.BEFORE_DRAW,{dataChanges:l,animation:t}),f),beforeAnimate:p=>this.emit(new Or(Z.BEFORE_ANIMATE,Un.COLLAPSE,p,c),f),afterAnimate:p=>this.emit(new Or(Z.AFTER_ANIMATE,Un.COLLAPSE,p,c),f),after:()=>this.emit(new Ft(Z.AFTER_DRAW,{dataChanges:l,animation:t}),f)},{collapse:{target:e,descendants:[...g(d.nodes),...g(d.combos)],position:o}}))===null||r===void 0?void 0:r.finished})}expandCombo(e,t){return Fu(this,void 0,void 0,function*(){var r;const{model:i}=this.context,a=Ut(i.getComboData([e])[0]);this.computeStyle("expand");const s=this.computeChangesAndDrawData({stage:"expand",animation:t});if(!s)return;const{dataChanges:o,drawData:u}=s,{add:l,update:c}=u,h={animation:t,stage:"expand",data:u,target:e};this.createElements(l,h),this.updateElements(c,h);const d=f=>Array.from(f).map(([,g])=>z(g));yield(r=this.context.animation.animate(t,{before:()=>this.emit(new Ft(Z.BEFORE_DRAW,{dataChanges:o,animation:t}),h),beforeAnimate:f=>this.emit(new Or(Z.BEFORE_ANIMATE,Un.EXPAND,f,u),h),afterAnimate:f=>this.emit(new Or(Z.AFTER_ANIMATE,Un.EXPAND,f,u),h),after:()=>this.emit(new Ft(Z.AFTER_DRAW,{dataChanges:o,animation:t}),h)},{expand:{target:e,descendants:[...d(l.nodes),...d(l.combos)],position:a}}))===null||r===void 0?void 0:r.finished})}clear(){this.container.destroy(),this.initContainer(),this.elementMap={},this.shapeTypeMap={},this.defaultStyle={},this.stateStyle={},this.paletteStyle={}}destroy(){this.clear(),this.container.destroy(),this.context={}}}var Ao=globalThis&&globalThis.__awaiter||function(n,e,t,r){function i(a){return a instanceof t?a:new t(function(s){s(a)})}return new(t||(t=Promise))(function(a,s){function o(c){try{l(r.next(c))}catch(h){s(h)}}function u(c){try{l(r.throw(c))}catch(h){s(h)}}function l(c){c.done?a(c.value):i(c.value).then(o,u)}l((r=r.apply(n,e||[])).next())})},Dse=globalThis&&globalThis.__rest||function(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(n);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(t[r[i]]=n[r[i]]);return t};class Rse{get presetOptions(){return{animation:!!a4(this.context.options,!0)}}get options(){const{options:e}=this.context;return e.layout}constructor(e){this.instances=[],this.context=e}getLayoutInstance(){return this.instances}preLayout(e){return Ao(this,void 0,void 0,function*(){var t,r,i,a;const{graph:s,model:o}=this.context,{add:u}=e;Vt(s,new Ft(Z.BEFORE_LAYOUT,{type:"pre"}));const l=yield(t=this.context.layout)===null||t===void 0?void 0:t.simulate();(r=l==null?void 0:l.nodes)===null||r===void 0||r.forEach(c=>{const h=z(c),d=u.nodes.get(h);o.syncNodeLikeDatum(c),d&&Object.assign(d.style,c.style)}),(i=l==null?void 0:l.edges)===null||i===void 0||i.forEach(c=>{const h=z(c),d=u.edges.get(h);o.syncEdgeDatum(c),d&&Object.assign(d.style,c.style)}),(a=l==null?void 0:l.combos)===null||a===void 0||a.forEach(c=>{const h=z(c),d=u.combos.get(h);o.syncNodeLikeDatum(c),d&&Object.assign(d.style,c.style)}),Vt(s,new Ft(Z.AFTER_LAYOUT,{type:"pre"})),this.transformDataAfterLayout("pre",e)})}postLayout(){return Ao(this,arguments,void 0,function*(e=this.options){if(!e)return;const t=Array.isArray(e)?e:[e],{graph:r}=this.context;Vt(r,new Ft(Z.BEFORE_LAYOUT,{type:"post"}));for(let i=0;i<t.length;i++){const a=t[i],s=this.getLayoutData(a),o=Object.assign(Object.assign({},this.presetOptions),a);Vt(r,new Ft(Z.BEFORE_STAGE_LAYOUT,{options:o,index:i}));const u=yield this.stepLayout(s,o,i);Vt(r,new Ft(Z.AFTER_STAGE_LAYOUT,{options:o,index:i})),a.animation||this.updateElementPosition(u,!1)}Vt(r,new Ft(Z.AFTER_LAYOUT,{type:"post"})),this.transformDataAfterLayout("post")})}transformDataAfterLayout(e,t){const r=this.context.transform.getTransformInstance();Object.values(r).forEach(i=>i.afterLayout(e,t))}simulate(){return Ao(this,void 0,void 0,function*(){if(!this.options)return{};const e=Array.isArray(this.options)?this.options:[this.options];let t={};for(let r=0;r<e.length;r++){const i=e[r],a=this.getLayoutData(i);t=yield this.stepLayout(a,Object.assign(Object.assign(Object.assign({},this.presetOptions),i),{animation:!1}),r)}return t})}stepLayout(e,t,r){return Ao(this,void 0,void 0,function*(){return sG(t)?yield this.treeLayout(e,t,r):yield this.graphLayout(e,t,r)})}graphLayout(e,t,r){return Ao(this,void 0,void 0,function*(){const{animation:i,enableWorker:a,iterations:s=300}=t,o=this.initGraphLayout(t);if(!o)return{};if(this.instances[r]=o,this.instance=o,a){const l=o;return this.supervisor=new ote(l.graphData2LayoutModel(e),l.instance,{iterations:s}),zh(yield this.supervisor.execute())}if(Hb(o))return i?yield o.execute(e,{onTick:l=>{this.updateElementPosition(l,!1)}}):(o.execute(e),o.stop(),o.tick(s));const u=yield o.execute(e);if(i){const l=this.updateElementPosition(u,i);yield l==null?void 0:l.finished}return u})}treeLayout(e,t,r){return Ao(this,void 0,void 0,function*(){const{type:i,animation:a}=t,s=la("layout",i);if(!s)return{};const{nodes:o=[],edges:u=[]}=e,l=new Xt({nodes:o.map(g=>({id:z(g),data:g.data||{}})),edges:u.map(g=>({id:z(g),source:g.source,target:g.target,data:g.data||{}}))});Mse(l);const c={nodes:[],edges:[]},h={nodes:[],edges:[]};l.getRoots(hr).forEach(g=>{Wo(g,b=>{b.children=l.getSuccessors(b.id)},b=>l.getSuccessors(b.id),"TB");const p=s(g,t),{x:v,y:m,z:y=0}=p;Wo(p,b=>{const{id:x,x:w,y:E,z:_=0}=b;c.nodes.push({id:x,style:{x:v,y:m,z:y}}),h.nodes.push({id:x,style:{x:w,y:E,z:_}})},b=>b.children,"TB")});const f=this.inferTreeLayoutOffset(h);if(LT(h,f),a){LT(c,f),this.updateElementPosition(c,!1);const g=this.updateElementPosition(h,a);yield g==null?void 0:g.finished}return h})}inferTreeLayoutOffset(e){var t;let[r,i]=[1/0,-1/0],[a,s]=[1/0,-1/0];(t=e.nodes)===null||t===void 0||t.forEach(p=>{const{x:v=0,y:m=0}=p.style||{};r=Math.min(r,v),i=Math.max(i,v),a=Math.min(a,m),s=Math.max(s,m)});const{canvas:o}=this.context,u=o.getSize(),[l,c]=o.getCanvasByViewport([0,0]),[h,d]=o.getCanvasByViewport(u);if(r>=l&&i<=h&&a>=c&&s<=d)return[0,0];const f=(l+h)/2,g=(c+d)/2;return[f-(r+i)/2,g-(a+s)/2]}stopLayout(){this.instance&&Hb(this.instance)&&(this.instance.stop(),this.instance=void 0),this.supervisor&&(this.supervisor.stop(),this.supervisor=void 0),this.animationResult&&(this.animationResult.finish(),this.animationResult=void 0)}getLayoutData(e){const{nodeFilter:t=()=>!0,preLayout:r=!1,isLayoutInvisibleNodes:i=!1}=e,{nodes:a,edges:s,combos:o}=this.context.model.getData(),{element:u,model:l}=this.context,c=p=>u.getElement(p),h=r?p=>{var v;return!i&&(((v=p.style)===null||v===void 0?void 0:v.visibility)==="hidden"||l.getAncestorsData(p.id,hr).some(Zn)||l.getAncestorsData(p.id,Je).some(Zn))?!1:t(p)}:p=>{const v=z(p),m=c(v);return!m||wf(m)?!1:t(p)},d=a.filter(h),f=new Map(d.map(p=>[z(p),p]));o.forEach(p=>f.set(z(p),p));const g=s.filter(({source:p,target:v})=>f.has(p)&&f.has(v));return{nodes:d,edges:g,combos:o}}initGraphLayout(e){var t;const{element:r,viewport:i}=this.context,{type:a,enableWorker:s,animation:o,iterations:u}=e,l=Dse(e,["type","enableWorker","animation","iterations"]),[c,h]=i.getCanvasSize(),d=[c/2,h/2],f=(t=e==null?void 0:e.nodeSize)!==null&&t!==void 0?t:y=>{const b=r==null?void 0:r.getElement(y.id);return b?b.attributes.size:r==null?void 0:r.getElementComputedStyle("node",y).size},g=la("layout",a);if(!g)return Di.warn(`The layout of ${a} is not registered.`);const p=Object.getPrototypeOf(g.prototype)===Cf.prototype?g:uG(g,this.context),v=new p(this.context),m={nodeSize:f,width:c,height:h,center:d};switch(v.id){case"d3-force":case"d3-force-3d":Object.assign(m,{center:{x:c/2,y:h/2,z:0}});break}return jn(v.options,m,l),v}updateElementPosition(e,t){const{model:r,element:i}=this.context;return i?(r.updateData(e),i.draw({animation:t,silence:!0})):null}destroy(){var e;this.stopLayout(),this.context={},(e=this.supervisor)===null||e===void 0||e.kill(),this.supervisor=void 0,this.instance=void 0,this.instances=[],this.animationResult=void 0}}const LT=(n,e)=>{var t;const[r,i]=e;(t=n.nodes)===null||t===void 0||t.forEach(a=>{if(a.style){const{x:s=0,y:o=0}=a.style;a.style.x=s+r,a.style.y=o+i}else a.style={x:r,y:i}})};function Lse(n){return[Ise].reduce((t,r)=>r(t),n)}function Ise(n){return!n.layout||Array.isArray(n.layout)||"preLayout"in n.layout||["antv-dagre","combo-combined","compact-box","circular","concentric","dagre","fishbone","grid","indented","mds","radial","random","snake","dendrogram","mindmap"].includes(n.layout.type)&&(n.layout.preLayout=!0),n}class Fse extends fx{constructor(e){super(e),this.category="plugin",this.setPlugins(this.context.options.plugins||[])}setPlugins(e){this.setExtensions(e)}getPluginInstance(e){const t=this.extensionMap[e];if(t)return t;Di.warn(`Cannot find the plugin ${e}, will try to find it by type.`);const r=this.extensions.find(i=>i.type===e);if(r)return this.extensionMap[r.key]}}const Ah=["update-related-edges","collapse-expand-node","collapse-expand-combo","get-edge-actual-ends","arrange-draw-order"];class Bse extends fx{constructor(e){super(e),this.category="transform",this.setTransforms(this.context.options.transforms||[])}getTransforms(){}setTransforms(e){this.setExtensions([...Ah.slice(0,Ah.length-1),...e,Ah[Ah.length-1]])}getTransformInstance(e){return e?this.extensionMap[e]:this.extensionMap}}var Bu=globalThis&&globalThis.__awaiter||function(n,e,t,r){function i(a){return a instanceof t?a:new t(function(s){s(a)})}return new(t||(t=Promise))(function(a,s){function o(c){try{l(r.next(c))}catch(h){s(h)}}function u(c){try{l(r.throw(c))}catch(h){s(h)}}function l(c){c.done?a(c.value):i(c.value).then(o,u)}l((r=r.apply(n,e||[])).next())})};class zse{get padding(){return Ri(this.context.options.padding)}get paddingOffset(){const[e,t,r,i]=this.padding,[a,s,o]=[(i-t)/2,(e-r)/2,0];return[a,s,o]}constructor(e){this.landmarkCounter=0,this.context=e;const[t,r]=this.paddingOffset,{zoom:i,rotation:a,x:s=t,y:o=r}=e.options;this.transform({mode:"absolute",scale:i,translate:[s,o],rotate:a},!1)}get camera(){const{canvas:e}=this.context;return new Proxy(e.getCamera(),{get:(t,r)=>{const a=Object.entries(e.getLayers()).filter(([o])=>!["main"].includes(o)).map(([,o])=>o.getCamera()),s=t[r];if(typeof s=="function")return(...o)=>{const u=s.apply(t,o);return a.forEach(l=>{l[r].apply(l,o)}),u}}})}createLandmark(e){return this.camera.createLandmark(`landmark-${this.landmarkCounter++}`,e)}getAnimation(e){const t=a4(this.context.options,e);return t?Hs(Object.assign({},t),["easing","duration"]):!1}getCanvasSize(){const{canvas:e}=this.context,{width:t=0,height:r=0}=e.getConfig();return[t,r]}getCanvasCenter(){const{canvas:e}=this.context,{width:t=0,height:r=0}=e.getConfig();return[t/2,r/2,0]}getViewportCenter(){const[e,t]=this.camera.getPosition();return[e,t,0]}getGraphCenter(){return this.context.graph.getViewportByCanvas(this.getCanvasCenter())}getZoom(){return this.camera.getZoom()}getRotation(){return this.camera.getRoll()}getTranslateOptions(e){const{camera:t}=this,{mode:r,translate:i=[]}=e,a=this.getZoom(),s=t.getPosition(),o=t.getFocalPoint(),[u,l]=this.getCanvasCenter(),[c=0,h=0,d=0]=i,f=oi([-c,-h,-d],a);return r==="relative"?{position:xe(s,f),focalPoint:xe(o,f)}:{position:xe([u,l,s[2]],f),focalPoint:xe([u,l,o[2]],f)}}getRotateOptions(e){const{mode:t,rotate:r=0}=e;return{roll:t==="relative"?this.camera.getRoll()+r:r}}getZoomOptions(e){const{zoomRange:t}=this.context.options,r=this.camera.getZoom(),{mode:i,scale:a=1}=e;return St(i==="relative"?r*a:a,...t)}transform(e,t){return Bu(this,void 0,void 0,function*(){const{graph:r}=this.context,{translate:i,rotate:a,scale:s,origin:o}=e;this.cancelAnimation();const u=this.getAnimation(t);if(Vt(r,new Ch(Z.BEFORE_TRANSFORM,e)),!a&&s&&!i&&o&&!u){this.camera.setZoomByViewportPoint(this.getZoomOptions(e),o),Vt(r,new Ch(Z.AFTER_TRANSFORM,e));return}const l={};if(i&&Object.assign(l,this.getTranslateOptions(e)),re(a)&&Object.assign(l,this.getRotateOptions(e)),re(s)&&Object.assign(l,{zoom:this.getZoomOptions(e)}),u)return Vt(r,new Or(Z.BEFORE_ANIMATE,Un.TRANSFORM,null,e)),new Promise(c=>{this.transformResolver=c,this.camera.gotoLandmark(this.createLandmark(l),Object.assign(Object.assign({},u),{onfinish:()=>{Vt(r,new Or(Z.AFTER_ANIMATE,Un.TRANSFORM,null,e)),Vt(r,new Ch(Z.AFTER_TRANSFORM,e)),this.transformResolver=void 0,c()}}))});this.camera.gotoLandmark(this.createLandmark(l),{duration:0}),Vt(r,new Ch(Z.AFTER_TRANSFORM,e))})}fitView(e,t){return Bu(this,void 0,void 0,function*(){const[r,i,a,s]=this.padding,{when:o="always",direction:u="both"}=e||{},[l,c]=this.context.canvas.getSize(),h=l-s-i,d=c-r-a,f=this.context.canvas.getBounds(),g=this.getBBoxInViewport(f),[p,v]=hs(g),m=u==="x"&&p>=h||u==="y"&&v>=d||u==="both"&&p>=h&&v>=d;if(o==="overflow"&&!m)return yield this.fitCenter({animation:t});const y=h/p,b=d/v,x=u==="x"?y:u==="y"?b:Math.min(y,b),w=this.getAnimation(t);yield this.transform({mode:"relative",scale:x,translate:xe(Ke(this.getCanvasCenter(),this.getBBoxInViewport(f).center),oi(this.paddingOffset,x))},w)})}fitCenter(e){return Bu(this,void 0,void 0,function*(){const t=this.context.canvas.getBounds();yield this.focus(t,e)})}focusElements(e){return Bu(this,arguments,void 0,function*(t,r={}){const{element:i}=this.context;if(!i)return;const a=o=>r.shapes?o.getShape(r.shapes).getRenderBounds():o.getRenderBounds(),s=nc(t.map(o=>a(i.getElement(o))));yield this.focus(s,r)})}focus(e,t){return Bu(this,void 0,void 0,function*(){const r=this.context.graph.getViewportByCanvas(e.center),i=t.position||this.getCanvasCenter(),a=Ke(i,r);yield this.transform({mode:"relative",translate:xe(a,this.paddingOffset)},t.animation)})}getBBoxInViewport(e){const{min:t,max:r}=e,{graph:i}=this.context,[a,s]=i.getViewportByCanvas(t),[o,u]=i.getViewportByCanvas(r),l=new rt;return l.setMinMax([a,s,0],[o,u,0]),l}isInViewport(e,t=!1,r=0){const{graph:i}=this.context,a=this.getCanvasSize(),[s,o]=i.getCanvasByViewport([0,0]),[u,l]=i.getCanvasByViewport(a);let c=new rt;return c.setMinMax([s,o,0],[u,l,0]),r&&(c=ds(c,r)),au(e)?si(e,c):t?c$(e,c):c.intersects(e)}cancelAnimation(){var e,t;!((e=this.camera.landmarks)===null||e===void 0)&&e.length&&this.camera.cancelLandmarkAnimation(),(t=this.transformResolver)===null||t===void 0||t.call(this)}}var et=globalThis&&globalThis.__awaiter||function(n,e,t,r){function i(a){return a instanceof t?a:new t(function(s){s(a)})}return new(t||(t=Promise))(function(a,s){function o(c){try{l(r.next(c))}catch(h){s(h)}}function u(c){try{l(r.throw(c))}catch(h){s(h)}}function l(c){c.done?a(c.value):i(c.value).then(o,u)}l((r=r.apply(n,e||[])).next())})};class D0 extends kf{constructor(e){var t;super(),this.options={},this.rendered=!1,this.destroyed=!1,this.context={model:new Pse},this.isCollapsingExpanding=!1,this.onResize=Xl(()=>{this.resize()},300),this._setOptions(Object.assign({},D0.defaultOptions,e),!0),this.context.graph=this,this.options.autoResize&&((t=globalThis.addEventListener)===null||t===void 0||t.call(globalThis,"resize",this.onResize))}getOptions(){return this.options}setOptions(e){this._setOptions(e,!1)}_setOptions(e,t){if(this.updateCanvas(e),Object.assign(this.options,Lse(e)),t){const{data:d}=e;d&&this.addData(d);return}const{behaviors:r,combo:i,data:a,edge:s,layout:o,node:u,plugins:l,theme:c,transforms:h}=e;r&&this.setBehaviors(r),a&&this.setData(a),u&&this.setNode(u),s&&this.setEdge(s),i&&this.setCombo(i),o&&this.setLayout(o),c&&this.setTheme(c),l&&this.setPlugins(l),h&&this.setTransforms(h)}getSize(){return this.context.canvas?this.context.canvas.getSize():[this.options.width||0,this.options.height||0]}setSize(e,t){e&&(this.options.width=e),t&&(this.options.height=t),this.resize(e,t)}setZoomRange(e){this.options.zoomRange=e}getZoomRange(){return this.options.zoomRange}setNode(e){this.options.node=e,this.context.model.refreshData()}setEdge(e){this.options.edge=e,this.context.model.refreshData()}setCombo(e){this.options.combo=e,this.context.model.refreshData()}getTheme(){return this.options.theme}setTheme(e){this.options.theme=se(e)?e(this.getTheme()):e}setLayout(e){this.options.layout=se(e)?e(this.getLayout()):e}getLayout(){return this.options.layout}setBehaviors(e){var t;this.options.behaviors=se(e)?e(this.getBehaviors()):e,(t=this.context.behavior)===null||t===void 0||t.setBehaviors(this.options.behaviors)}updateBehavior(e){this.setBehaviors(t=>t.map(r=>typeof r=="object"&&r.key===e.key?Object.assign(Object.assign({},r),e):r))}getBehaviors(){return this.options.behaviors||[]}setPlugins(e){var t;this.options.plugins=se(e)?e(this.getPlugins()):e,(t=this.context.plugin)===null||t===void 0||t.setPlugins(this.options.plugins)}updatePlugin(e){this.setPlugins(t=>t.map(r=>typeof r=="object"&&r.key===e.key?Object.assign(Object.assign({},r),e):r))}getPlugins(){return this.options.plugins||[]}getPluginInstance(e){return this.context.plugin.getPluginInstance(e)}setTransforms(e){var t;this.options.transforms=se(e)?e(this.getTransforms()):e,(t=this.context.transform)===null||t===void 0||t.setTransforms(this.options.transforms)}updateTransform(e){this.setTransforms(t=>t.map(r=>typeof r=="object"&&r.key===e.key?Object.assign(Object.assign({},r),e):r)),this.context.model.refreshData()}getTransforms(){return this.options.transforms||[]}getData(){return this.context.model.getData()}getElementData(e){return Array.isArray(e)?e.map(t=>this.context.model.getElementDataById(t)):this.context.model.getElementDataById(e)}getNodeData(e){return e===void 0?this.context.model.getNodeData():Array.isArray(e)?this.context.model.getNodeData(e):this.context.model.getNodeLikeDatum(e)}getEdgeData(e){return e===void 0?this.context.model.getEdgeData():Array.isArray(e)?this.context.model.getEdgeData(e):this.context.model.getEdgeDatum(e)}getComboData(e){return e===void 0?this.context.model.getComboData():Array.isArray(e)?this.context.model.getComboData(e):this.context.model.getNodeLikeDatum(e)}setData(e){this.context.model.setData(se(e)?e(this.getData()):e)}addData(e){this.context.model.addData(se(e)?e(this.getData()):e)}addNodeData(e){this.context.model.addNodeData(se(e)?e(this.getNodeData()):e)}addEdgeData(e){this.context.model.addEdgeData(se(e)?e(this.getEdgeData()):e)}addComboData(e){this.context.model.addComboData(se(e)?e(this.getComboData()):e)}addChildrenData(e,t){this.context.model.addChildrenData(e,t)}updateData(e){this.context.model.updateData(se(e)?e(this.getData()):e)}updateNodeData(e){this.context.model.updateNodeData(se(e)?e(this.getNodeData()):e)}updateEdgeData(e){this.context.model.updateEdgeData(se(e)?e(this.getEdgeData()):e)}updateComboData(e){this.context.model.updateComboData(se(e)?e(this.getComboData()):e)}removeData(e){this.context.model.removeData(se(e)?e(this.getData()):e)}removeNodeData(e){this.context.model.removeNodeData(se(e)?e(this.getNodeData()):e)}removeEdgeData(e){this.context.model.removeEdgeData(se(e)?e(this.getEdgeData()):e)}removeComboData(e){this.context.model.removeComboData(se(e)?e(this.getComboData()):e)}getElementType(e){return this.context.model.getElementType(e)}getRelatedEdgesData(e,t="both"){return this.context.model.getRelatedEdgesData(e,t)}getNeighborNodesData(e){return this.context.model.getNeighborNodesData(e)}getAncestorsData(e,t){return this.context.model.getAncestorsData(e,t)}getParentData(e,t){return this.context.model.getParentData(e,t)}getChildrenData(e){return this.context.model.getChildrenData(e)}getDescendantsData(e){return this.context.model.getDescendantsData(e)}getElementDataByState(e,t){return this.context.model.getElementDataByState(e,t)}initCanvas(){return et(this,void 0,void 0,function*(){var e;if(this.context.canvas)return yield this.context.canvas.ready;const{container:t="container",width:r,height:i,renderer:a,cursor:s,background:o,canvas:u,devicePixelRatio:l=(e=globalThis.devicePixelRatio)!==null&&e!==void 0?e:1}=this.options;if(t instanceof OT)this.context.canvas=t,s&&t.setCursor(s),a&&t.setRenderer(a),yield t.ready;else{const c=qe(t)?document.getElementById(t):t,h=NT(c);this.emit(Z.BEFORE_CANVAS_INIT,{container:c,width:r,height:i});const d=Object.assign(Object.assign({},u),{container:c,width:r||h[0],height:i||h[1],background:o,renderer:a,cursor:s,devicePixelRatio:l}),f=new OT(d);this.context.canvas=f,yield f.ready,this.emit(Z.AFTER_CANVAS_INIT,{canvas:f})}})}updateCanvas(e){var t,r;const{renderer:i,cursor:a,height:s,width:o}=e,u=this.context.canvas;u&&(i&&(this.emit(Z.BEFORE_RENDERER_CHANGE,{renderer:this.options.renderer}),u.setRenderer(i),this.emit(Z.AFTER_RENDERER_CHANGE,{renderer:i})),a&&u.setCursor(a),(re(o)||re(s))&&this.setSize((t=o??this.options.width)!==null&&t!==void 0?t:0,(r=s??this.options.height)!==null&&r!==void 0?r:0))}initRuntime(){this.context.options=this.options,this.context.batch||(this.context.batch=new Ase(this.context)),this.context.plugin||(this.context.plugin=new Fse(this.context)),this.context.viewport||(this.context.viewport=new zse(this.context)),this.context.transform||(this.context.transform=new Bse(this.context)),this.context.element||(this.context.element=new Nse(this.context)),this.context.animation||(this.context.animation=new Cse(this.context)),this.context.layout||(this.context.layout=new Rse(this.context)),this.context.behavior||(this.context.behavior=new Tse(this.context))}prepare(){return et(this,void 0,void 0,function*(){if(yield Promise.resolve(),this.destroyed)throw new Error(na("The graph instance has been destroyed"));yield this.initCanvas(),this.initRuntime()})}render(){return et(this,void 0,void 0,function*(){if(yield this.prepare(),Vt(this,new Ft(Z.BEFORE_RENDER)),this.options.layout)if(!this.rendered&&oG(this.options.layout)){const e=yield this.context.element.preLayoutDraw({type:"render"});yield Promise.all([e==null?void 0:e.finished,this.autoFit()])}else{const e=this.context.element.draw({type:"render"});yield Promise.all([e==null?void 0:e.finished,this.context.layout.postLayout()]),yield this.autoFit()}else{const e=this.context.element.draw({type:"render"});yield Promise.all([e==null?void 0:e.finished,this.autoFit()])}this.rendered=!0,Vt(this,new Ft(Z.AFTER_RENDER))})}draw(){return et(this,void 0,void 0,function*(){var e;yield this.prepare(),yield(e=this.context.element.draw())===null||e===void 0?void 0:e.finished})}layout(e){return et(this,void 0,void 0,function*(){yield this.context.layout.postLayout(e)})}stopLayout(){this.context.layout.stopLayout()}clear(){return et(this,void 0,void 0,function*(){const{model:e,element:t}=this.context;e.setData({}),e.clearChanges(),t==null||t.clear()})}destroy(){var e;Vt(this,new Ft(Z.BEFORE_DESTROY));const{layout:t,animation:r,element:i,model:a,canvas:s,behavior:o,plugin:u}=this.context;u==null||u.destroy(),o==null||o.destroy(),t==null||t.destroy(),r==null||r.destroy(),i==null||i.destroy(),a.destroy(),s==null||s.destroy(),this.options={},this.context={},this.off(),(e=globalThis.removeEventListener)===null||e===void 0||e.call(globalThis,"resize",this.onResize),this.destroyed=!0,Vt(this,new Ft(Z.AFTER_DESTROY))}getCanvas(){return this.context.canvas}resize(e,t){var r;const i=NT((r=this.context.canvas)===null||r===void 0?void 0:r.getContainer()),a=[e||i[0],t||i[1]];if(!this.context.canvas)return;const s=this.context.canvas.getSize();Dt(a,s)||(Vt(this,new Ft(Z.BEFORE_SIZE_CHANGE,{size:a})),this.context.canvas.resize(...a),Vt(this,new Ft(Z.AFTER_SIZE_CHANGE,{size:a})))}fitView(e,t){return et(this,void 0,void 0,function*(){var r;yield(r=this.context.viewport)===null||r===void 0?void 0:r.fitView(e,t)})}fitCenter(e){return et(this,void 0,void 0,function*(){var t;yield(t=this.context.viewport)===null||t===void 0?void 0:t.fitCenter({animation:e})})}autoFit(){return et(this,void 0,void 0,function*(){const{autoFit:e}=this.context.options;if(e)if(qe(e))e==="view"?yield this.fitView():e==="center"&&(yield this.fitCenter());else{const{type:t,animation:r}=e;t==="view"?yield this.fitView(e.options,r):t==="center"&&(yield this.fitCenter(r))}})}focusElement(e,t){return et(this,void 0,void 0,function*(){var r;yield(r=this.context.viewport)===null||r===void 0?void 0:r.focusElements(Array.isArray(e)?e:[e],{animation:t})})}zoomBy(e,t,r){return et(this,void 0,void 0,function*(){yield this.context.viewport.transform({mode:"relative",scale:e,origin:r},t)})}zoomTo(e,t,r){return et(this,void 0,void 0,function*(){yield this.context.viewport.transform({mode:"absolute",scale:e,origin:r},t)})}getZoom(){return this.context.viewport.getZoom()}rotateBy(e,t,r){return et(this,void 0,void 0,function*(){yield this.context.viewport.transform({mode:"relative",rotate:e,origin:r},t)})}rotateTo(e,t,r){return et(this,void 0,void 0,function*(){yield this.context.viewport.transform({mode:"absolute",rotate:e,origin:r},t)})}getRotation(){return this.context.viewport.getRotation()}translateBy(e,t){return et(this,void 0,void 0,function*(){yield this.context.viewport.transform({mode:"relative",translate:e},t)})}translateTo(e,t){return et(this,void 0,void 0,function*(){yield this.context.viewport.transform({mode:"absolute",translate:e},t)})}getPosition(){return Ke([0,0],this.getCanvasByViewport([0,0]))}translateElementBy(e,t){return et(this,arguments,void 0,function*(r,i,a=!0){var s,o;const[u,l]=Nt(r)?[r,(s=i)!==null&&s!==void 0?s:!0]:[{[r]:i},a];Object.entries(u).forEach(([c,h])=>this.context.model.translateNodeLikeBy(c,h)),yield(o=this.context.element.draw({animation:l,stage:"translate"}))===null||o===void 0?void 0:o.finished})}translateElementTo(e,t){return et(this,arguments,void 0,function*(r,i,a=!0){var s,o;const[u,l]=Nt(r)?[r,(s=i)!==null&&s!==void 0?s:!0]:[{[r]:i},a];Object.entries(u).forEach(([c,h])=>this.context.model.translateNodeLikeTo(c,h)),yield(o=this.context.element.draw({animation:l,stage:"translate"}))===null||o===void 0?void 0:o.finished})}getElementPosition(e){return this.context.model.getElementPosition(e)}getElementRenderStyle(e){return K2(this.context.element.getElement(e).attributes,["context"])}setElementVisibility(e,t){return et(this,arguments,void 0,function*(r,i,a=!0){var s,o;const[u,l]=Nt(r)?[r,(s=i)!==null&&s!==void 0?s:!0]:[{[r]:i},a],c={nodes:[],edges:[],combos:[]};Object.entries(u).forEach(([f,g])=>{const p=this.getElementType(f);c[`${p}s`].push({id:f,style:{visibility:g}})});const{model:h,element:d}=this.context;h.preventUpdateNodeLikeHierarchy(()=>{h.updateData(c)}),yield(o=d.draw({animation:l,stage:"visibility"}))===null||o===void 0?void 0:o.finished})}showElement(e,t){return et(this,void 0,void 0,function*(){const r=Array.isArray(e)?e:[e];yield this.setElementVisibility(Object.fromEntries(r.map(i=>[i,"visible"])),t)})}hideElement(e,t){return et(this,void 0,void 0,function*(){const r=Array.isArray(e)?e:[e];yield this.setElementVisibility(Object.fromEntries(r.map(i=>[i,"hidden"])),t)})}getElementVisibility(e){var t,r;const i=this.context.element.getElement(e);return(r=(t=i==null?void 0:i.style)===null||t===void 0?void 0:t.visibility)!==null&&r!==void 0?r:"visible"}setElementZIndex(e,t){return et(this,void 0,void 0,function*(){var r;const i={nodes:[],edges:[],combos:[]},a=Nt(e)?e:{[e]:t};Object.entries(a).forEach(([u,l])=>{const c=this.getElementType(u);i[`${c}s`].push({id:u,style:{zIndex:l}})});const{model:s,element:o}=this.context;s.preventUpdateNodeLikeHierarchy(()=>s.updateData(i)),yield(r=o.draw({animation:!1,stage:"zIndex"}))===null||r===void 0?void 0:r.finished})}frontElement(e){return et(this,void 0,void 0,function*(){const t=Array.isArray(e)?e:[e],{model:r}=this.context,i={};t.map(a=>{const s=r.getFrontZIndex(a);if(r.getElementType(a)==="combo"){const u=r.getAncestorsData(a,Je).at(-1)||this.getComboData(a),l=[u,...r.getDescendantsData(z(u))],c=s-DT(u);l.forEach(d=>{i[z(d)]=this.getElementZIndex(z(d))+c});const{internal:h}=Db(l.map(z),d=>r.getRelatedEdgesData(d));h.forEach(d=>{const f=z(d);i[f]=this.getElementZIndex(f)+c})}else i[a]=s}),yield this.setElementZIndex(i)})}getElementZIndex(e){return DT(this.context.model.getElementDataById(e))}setElementState(e,t){return et(this,arguments,void 0,function*(r,i,a=!0){var s,o;const[u,l]=Nt(r)?[r,(s=i)!==null&&s!==void 0?s:!0]:[{[r]:i},a],c=d=>d?Array.isArray(d)?d:[d]:[],h={nodes:[],edges:[],combos:[]};Object.entries(u).forEach(([d,f])=>{const g=this.getElementType(d);h[`${g}s`].push({id:d,states:c(f)})}),this.updateData(h),yield(o=this.context.element.draw({animation:l,stage:"state"}))===null||o===void 0?void 0:o.finished})}getElementState(e){return this.context.model.getElementState(e)}getElementRenderBounds(e){return this.context.element.getElement(e).getRenderBounds()}collapseElement(e){return et(this,arguments,void 0,function*(t,r=!0){const{model:i,element:a}=this.context;if(Zn(i.getNodeLikeData([t])[0])||this.isCollapsingExpanding)return;typeof r=="boolean"&&(r={animation:r,align:!0});const s=i.getElementType(t);yield this.frontElement(t),this.isCollapsingExpanding=!0,this.setElementCollapsibility(t,!0),s==="node"?yield a.collapseNode(t,r):s==="combo"&&(yield a.collapseCombo(t,!!r.animation)),this.isCollapsingExpanding=!1})}expandElement(e){return et(this,arguments,void 0,function*(t,r=!0){const{model:i,element:a}=this.context;if(!Zn(i.getNodeLikeData([t])[0])||this.isCollapsingExpanding)return;typeof r=="boolean"&&(r={animation:r,align:!0});const s=i.getElementType(t);this.isCollapsingExpanding=!0,this.setElementCollapsibility(t,!1),s==="node"?yield a.expandNode(t,r):s==="combo"&&(yield a.expandCombo(t,!!r.animation)),this.isCollapsingExpanding=!1})}setElementCollapsibility(e,t){const r=this.getElementType(e);r==="node"?this.updateNodeData([{id:e,style:{collapsed:t}}]):r==="combo"&&this.updateComboData([{id:e,style:{collapsed:t}}])}toDataURL(){return et(this,arguments,void 0,function*(e={}){return this.context.canvas.toDataURL(e)})}getCanvasByViewport(e){return this.context.canvas.getCanvasByViewport(e)}getViewportByCanvas(e){return this.context.canvas.getViewportByCanvas(e)}getClientByCanvas(e){return this.context.canvas.getClientByCanvas(e)}getCanvasByClient(e){return this.context.canvas.getCanvasByClient(e)}getViewportCenter(){return this.context.viewport.getViewportCenter()}getCanvasCenter(){return this.context.viewport.getCanvasCenter()}on(e,t,r){return super.on(e,t,r)}once(e,t){return super.once(e,t)}off(e,t){return super.off(e,t)}}D0.defaultOptions={autoResize:!1,theme:"light",rotation:0,zoom:1,zoomRange:[.01,10]};globalThis&&globalThis.__rest;class $se extends ms{beforeDraw(e){const{add:t,update:r}=e,{model:i}=this.context;return[...t.edges.entries(),...r.edges.entries()].forEach(([,a])=>{kN(i,a)}),e}}const kN=(n,e)=>{const{source:t,target:r}=e,i=n.getElementDataById(t),a=n.getElementDataById(r),s=E3(i,h=>n.getParentData(h,Je)),o=E3(a,h=>n.getParentData(h,Je)),u=z(s),l=z(o),c={sourceNode:u,targetNode:l};return e.style?Object.assign(e.style,c):e.style=c,e},jse=(n,e,t)=>{const[r,i]=e,[a,s]=t;if(i===r)return a;const o=(n-r)/(i-r);return a+o*(s-a)},qse=(n,e,t)=>{const[r,i]=e,[a,s]=t,o=Math.log(n-r+1)/Math.log(i-r+1);return a+o*(s-a)},Gse=(n,e,t,r=2)=>{const[i,a]=e,[s,o]=t,u=Math.pow((n-i)/(a-i),r);return s+u*(o-s)},Wse=(n,e,t)=>{const[r,i]=e,[a,s]=t,o=Math.sqrt((n-r)/(i-r));return a+o*(s-a)};class R0 extends ms{constructor(e,t){super(e,jn({},R0.defaultOptions,t)),this.assignSizeByCentrality=(r,i,a,s,o,u)=>{const l=[i,a],c=[s[0],o[0]],h=[s[1],o[1]],d=[s[2],o[2]],f=(g,p)=>{if(typeof u=="function")return u(g,l,p);switch(u){case"linear":return jse(g,l,p);case"log":return qse(g,l,p);case"pow":return Gse(g,l,p,2);case"sqrt":return Wse(g,l,p);default:return p[0]}};return[f(r,c),f(r,h),f(r,d)]}}beforeDraw(e){const{model:t}=this.context,r=t.getNodeData(),i=mr(this.options.maxSize),a=mr(this.options.minSize),s=this.getCentralities(this.options.centrality),o=s.size>0?Math.max(...s.values()):0,u=s.size>0?Math.min(...s.values()):0;return r.forEach(l=>{var c;const h=this.assignSizeByCentrality(s.get(z(l))||0,u,o,a,i,this.options.scale),d=(c=this.context.element)===null||c===void 0?void 0:c.getElement(z(l)),f={size:h};this.assignLabelStyle(f,h,l,d),(!d||!Hh(f,d.attributes))&&vr(e,d?"update":"add","node",jn(l,{style:f}),!0)}),e}assignLabelStyle(e,t,r,i){var a;const s=i?i.config.style:(a=this.context.element)===null||a===void 0?void 0:a.getElementComputedStyle("node",r);if(Object.assign(e,Hs(s,["labelFontSize","labelLineHeight"])),this.options.mapLabelSize){const o=this.getLabelSizeByNodeSize(t,1/0,Number(e.labelFontSize));Object.assign(e,{labelFontSize:o,labelLineHeight:o+l$(e.labelPadding)})}return e}getLabelSizeByNodeSize(e,t,r){const i=Math.min(...e)/2,[a,s]=Array.isArray(this.options.mapLabelSize)?this.options.mapLabelSize:[r,t];return Math.min(s,Math.max(i,a))}getCentralities(e){const{model:t}=this.context,r=t.getData();if(typeof e=="function")return e(r);const i=t.getRelatedEdgesData.bind(t);return v4(r,i,e)}}R0.defaultOptions={centrality:{type:"degree"},maxSize:80,minSize:20,scale:"linear",mapLabelSize:!1};class L0 extends ms{constructor(e,t){super(e,Object.assign({},L0.defaultOptions,t))}get ref(){return this.context.model.getRootsData()[0]}afterLayout(){var e;const t=Ut(this.ref),{graph:r,model:i}=this.context;(e=i.getData().nodes)===null||e===void 0||e.forEach(s=>{var o;if(z(s)===z(this.ref))return;const u=y4(Ke(Ut(s),t)),l=Math.abs(u)>Math.PI/2,c=!s.children||s.children.length===0,h=z(s),d=(o=this.context.element)===null||o===void 0?void 0:o.getElement(h);if(!d||!d.isVisible())return;const f=mr(r.getElementRenderStyle(h).size)[0]/2,g=(c?1:-1)*(f+this.options.offset),p=[["translate",g*Math.cos(u),g*Math.sin(u)],["rotate",l?Yn(u)+180:Yn(u)]];i.updateNodeData([{id:z(s),style:{labelTextAlign:l===c?"right":"left",labelTextBaseline:"middle",labelTransform:p}}])}),r.draw()}}L0.defaultOptions={offset:5};const Vse="quadratic",IT=["top","top-right","right","right-bottom","bottom","bottom-left","left","left-top"];class I0 extends ms{constructor(e,t){super(e,Object.assign({},I0.defaultOptions,t)),this.cacheMergeStyle=new Map,this.getAffectedParallelEdges=r=>{const{add:{edges:i},update:{nodes:a,edges:s,combos:o},remove:{edges:u}}=r,{model:l}=this.context,c=new Map,h=(g,p)=>{l.getRelatedEdgesData(p).forEach(m=>!c.has(z(m))&&c.set(z(m),m))};a.forEach(h),o.forEach(h);const d=g=>{const p=l.getEdgeData().map(m=>kN(l,m));Use(g,p,!0).forEach(m=>!c.has(z(m))&&c.set(z(m),m))};if(u.size&&u.forEach(d),i.size&&i.forEach(d),s.size){const g=D8(sw(l.getChanges())).update.edges;s.forEach(p=>{var v;d(p);const m=(v=g.find(y=>z(y.value)===z(p)))===null||v===void 0?void 0:v.original;m&&!ww(p,m)&&d(m)})}wi(this.options.edges)||c.forEach((g,p)=>!this.options.edges.includes(p)&&c.delete(p));const f=l.getEdgeData().map(z);return new Map([...c].sort((g,p)=>f.indexOf(g[0])-f.indexOf(p[0])))},this.applyBundlingStyle=(r,i,a)=>{const{edgeMap:s,reverses:o}=FT(i);s.forEach(u=>{u.forEach((l,c,h)=>{var d;const f=h.length,g=l.style||{};if(l.source===l.target){const m=IT.length;g.loopPlacement=IT[c%m],g.loopDist=Math.floor(c/m)*a+50}else if(f===1)g.curveOffset=0;else{const m=(c%2===0?1:-1)*(o[`${l.source}|${l.target}|${c}`]?-1:1);g.curveOffset=f%2===1?m*Math.ceil(c/2)*a*2:m*(Math.floor(c/2)*a*2+a)}const p=Object.assign(l,{type:Vse,style:g}),v=(d=this.context.element)===null||d===void 0?void 0:d.getElement(z(l));(!v||!Hh(p.style,v.attributes))&&vr(r,v?"update":"add","edge",p,!0)})})},this.resetEdgeStyle=r=>{const i=r.style||{},a=this.cacheMergeStyle.get(z(r))||{};return Object.keys(a).forEach(s=>{Dt(i[s],a[s])&&(r[s]?i[s]=r[s]:delete i[s])}),Object.assign(r,{style:i})},this.applyMergingStyle=(r,i)=>{const{edgeMap:a,reverses:s}=FT(i);a.forEach(o=>{var u;if(o.length===1){const c=o[0],h=(u=this.context.element)===null||u===void 0?void 0:u.getElement(z(c)),d=this.resetEdgeStyle(c);(!h||!Hh(d,h.attributes))&&vr(r,h?"update":"add","edge",d);return}const l=o.map(({source:c,target:h,style:d={}},f)=>{const{startArrow:g,endArrow:p}=d,v={},[m,y]=s[`${c}|${h}|${f}`]?["endArrow","startArrow"]:["startArrow","endArrow"];return xl(g)&&(v[m]=g),xl(p)&&(v[y]=p),v}).reduce((c,h)=>Object.assign(Object.assign({},c),h),{});o.forEach((c,h,d)=>{var f;if(h!==0){vr(r,"remove","edge",c);return}const g=Object.assign({},se(this.options.style)?this.options.style(d):this.options.style,{childrenData:d});this.cacheMergeStyle.set(z(c),g);const p=Object.assign(Object.assign({},c),{type:"line",style:Object.assign(Object.assign(Object.assign({},c.style),l),g)}),v=(f=this.context.element)===null||f===void 0?void 0:f.getElement(z(c));(!v||!Hh(p.style,v.attributes))&&vr(r,v?"update":"add","edge",p,!0)})})}}beforeDraw(e){const t=this.getAffectedParallelEdges(e);return t.size===0||(this.options.mode==="bundle"?this.applyBundlingStyle(e,t,this.options.distance):this.applyMergingStyle(e,t)),e}}I0.defaultOptions={mode:"bundle",distance:15};const FT=n=>{const e=new Map,t=new Set,r={},i=new Map;for(const[a,s]of n){if(t.has(a))continue;const{source:o,target:u}=s,l=`${o}-${u}`;e.has(l)||(e.set(l,[]),i.set(l,new Set));const c=e.get(l),h=i.get(l);c&&h&&!h.has(a)&&(c.push(s),h.add(a),t.add(a));for(const[d,f]of n)if(!(t.has(d)||d===a)&&ww(s,f)){const g=e.get(l),p=i.get(l);g&&p&&!p.has(d)&&(g.push(f),p.add(d),o===f.target&&u===f.source&&(r[`${f.source}|${f.target}|${g.length-1}`]=!0),t.add(d))}}return{edgeMap:e,reverses:r}},Use=(n,e,t)=>e.filter(r=>(t||z(r)!==z(n))&&ww(r,n)),ww=(n,e)=>{const{sourceNode:t,targetNode:r}=n.style||{},{sourceNode:i,targetNode:a}=e.style||{};return t===i&&r===a||t===a&&r===i};class Hse extends ms{beforeDraw(e,t){const{stage:r}=t;if(r==="visibility")return e;const{model:i}=this.context,{update:{nodes:a,edges:s,combos:o}}=e,u=(l,c)=>{i.getRelatedEdgesData(c).forEach(d=>!s.has(z(d))&&s.set(z(d),d))};return a.forEach(u),o.forEach(u),e}}const Yse={animation:{"combo-collapse":l4,"combo-expand":s$,"node-collapse":o4,"node-expand":i$,"path-in":u4,"path-out":a$,fade:n$,translate:r$},behavior:{"brush-select":rc,"click-select":cf,"collapse-expand":Ef,"create-edge":_f,"drag-canvas":Sf,"drag-element-force":cG,"drag-element":uc,"fix-element-size":Af,"focus-element":Tf,"hover-activate":Of,"lasso-select":dG,"auto-adapt-label":of,"optimize-viewport-transform":Mf,"scroll-canvas":Pf,"zoom-canvas":Nf},combo:{circle:lq,rect:cq},edge:{cubic:ao,line:K4,polyline:bf,quadratic:xf,"cubic-horizontal":vf,"cubic-radial":mf,"cubic-vertical":yf},layout:{"antv-dagre":dU,"combo-combined":dY,"compact-box":lh.compactBox,"d3-force":BY,"force-atlas2":Tee,circular:pU,concentric:Wb,dagre:i0,dendrogram:lh.dendrogram,fishbone:a0,force:NP,fruchterman:Pee,grid:Dee,indented:lh.indented,mds:qP,mindmap:lh.mindmap,radial:qee,random:Xee,snake:s0},node:{circle:sc,diamond:dj,ellipse:ff,hexagon:mj,html:gf,image:G4,rect:oq,star:uq,donut:df,triangle:pf},palette:{spectral:hte,tableau:dte,oranges:fte,greens:gte,blues:pte},theme:{dark:fse,light:pse},plugin:{"bubble-sets":l0,"edge-bundling":h0,"edge-filter-lens":d0,"grid-line":p0,background:o0,contextmenu:c0,fisheye:f0,fullscreen:g0,history:v0,hull:y0,legend:k0,minimap:C0,snapline:A0,timebar:T0,toolbar:O0,tooltip:M0,watermark:P0},transform:{"arrange-draw-order":vse,"collapse-expand-combo":mse,"collapse-expand-node":yse,"get-edge-actual-ends":$se,"map-node-size":R0,"place-radial-labels":L0,"process-parallel-edges":I0,"update-related-edges":Hse},shape:{circle:pa,ellipse:Ql,group:Yt,html:ec,image:yx,line:Ks,path:fr,polygon:ro,polyline:af,rect:mn,text:io,label:fs,badge:gu}};function Xse(){Object.entries(Yse).forEach(([n,e])=>{Object.entries(e).forEach(([t,r])=>{bse(n,t,r)})})}Xse();const Kse={__name:"GraphContainer",props:{graphData:{type:Object,required:!0,default:()=>({nodes:[],edges:[]})}},setup(n){const e=n,t=We(null);let r=null;const i=()=>{r=new D0({container:t.value,width:t.value.offsetWidth,height:t.value.offsetHeight,autoFit:!0,autoResize:!0,layout:{type:"d3-force",preventOverlap:!0,kr:20,collide:{strength:1}},node:{type:"circle",style:{labelText:s=>s.data.label,size:70},palette:{field:"label",color:"tableau"}},edge:{type:"line",style:{labelText:s=>s.data.label,labelBackground:"#fff",endArrow:!0}},behaviors:["drag-element","zoom-canvas","drag-canvas"]})},a=()=>{r||i();const s={nodes:e.graphData.nodes.map(o=>({id:o.id,data:{label:o.name}})),edges:e.graphData.edges.map(o=>({source:o.source_id,target:o.target_id,data:{label:o.type}}))};r.setData(s),r.render()};return Rr(()=>{a(),window.addEventListener("resize",a)}),Tn(()=>e.graphData,a,{deep:!0}),(s,o)=>(ge(),we("div",{ref_key:"container",ref:t,class:"graph-container"},null,512))}},Zse=du(Kse,[["__scopeId","data-v-11ab4f0b"]]);const Jse={key:0,class:"refs"},Qse={class:"tags"},eoe={key:0,class:"item"},toe=["onClick"],noe={class:"fileinfo"},roe={class:"results-list"},ioe={class:"result-meta"},aoe={class:"score-info"},soe={key:0},ooe={class:"result-id"},uoe={class:"result-text"},loe={class:"results-list"},coe={class:"result-meta"},hoe={class:"score-info"},doe={class:"result-url"},foe=["href"],goe={class:"result-content"},poe={class:"result-title"},voe={class:"result-text"},moe={__name:"RefsComponent",props:{message:Object,showRefs:{type:[Array,Boolean],default:()=>!1}},emits:["retry"],setup(n,{emit:e}){const t=e,r=n,i=We(r.message),{copy:a,isSupported:s}=tL(),o=E=>r.showRefs===!0?!0:r.showRefs.includes(E),u=async E=>{if(s)try{await a(E),Ka.success("文本已复制到剪贴板")}catch(_){console.error("复制失败:",_),Ka.error("复制失败，请手动复制")}else console.warn("浏览器不支持自动复制"),Ka.warning("浏览器不支持自动复制，请手动复制")},l=yl({});for(const E in i.value.groupedResults)l[E]=!1;const c=E=>{l[E]=!l[E]},h=fn(()=>(i.value.role=="received"||i.value.role=="assistant")&&i.value.status=="finished"),d=We(!1),f=We(null),g=E=>{y(E)?(f.value=E.refs.graph_base.results,d.value=!0):console.error("无法获取子图数据")},p=We(!1),v=We(null),m=E=>{var _,S;(_=E.refs)!=null&&_.web_search?(v.value=(S=E.refs)==null?void 0:S.web_search.results,p.value=!0):console.error("无法获取网页搜索结果")},y=E=>E.refs&&E.refs.graph_base&&E.refs.graph_base.results.nodes.length>0,b=E=>new Date(E*1e3).toLocaleString(),x=E=>parseFloat((E*100).toFixed(2)),w=()=>{t("retry")};return(E,_)=>{var A,T,O;const S=dr("a-progress"),C=dr("a-drawer"),k=dr("a-modal");return h.value?(ge(),we("div",Jse,[ce("div",Qse,[(A=i.value.meta)!=null&&A.server_model_name?(ge(),we("span",eoe,[le(Ue(JD)),Ln(" "+_t(i.value.meta.server_model_name),1)])):dn("",!0),o("copy")?(ge(),we("span",{key:1,class:"item btn",title:"复制",onClick:_[0]||(_[0]=P=>u(i.value.content))},[le(Ue(ER))])):dn("",!0),o("regenerate")?(ge(),we("span",{key:2,class:"item btn",title:"重新生成",onClick:_[1]||(_[1]=P=>w())},[le(Ue(GD))])):dn("",!0),o("subGraph")&&y(i.value)?(ge(),we("span",{key:3,class:"item btn",onClick:_[2]||(_[2]=P=>g(i.value))},[le(Ue(CR)),_[6]||(_[6]=Ln(" 关系图 "))])):dn("",!0),o("webSearch")&&((T=i.value.refs)==null?void 0:T.web_search.results.length)>0?(ge(),we("span",{key:4,class:"item btn",onClick:_[3]||(_[3]=P=>m(i.value))},[le(Ue(IR)),Ln(" 网页搜索 "+_t((O=i.value.refs.web_search)==null?void 0:O.results.length),1)])):dn("",!0),(ge(!0),we(aa,null,Za(i.value.groupedResults,(P,R)=>(ge(),we("span",{key:R,class:"filetag item btn",onClick:N=>c(R)},[le(Ue(MR)),Ln(" "+_t(R)+" ",1),le(C,{open:l[R],"onUpdate:open":N=>l[R]=N,contentWrapperStyle:{maxWidth:"100%"},title:R,class:"retrieval-detail",placement:"right",rootClassName:"root",width:"700"},{default:an(()=>[ce("div",noe,[ce("p",null,[le(Ue(TR)),Ln(" "+_t(P[0].file.type),1)]),ce("p",null,[le(Ue(iR)),Ln(" "+_t(b(P[0].file.created_at)),1)])]),ce("div",roe,[(ge(!0),we(aa,null,Za(P,N=>(ge(),we("div",{key:N.id,class:"result-item"},[ce("div",ioe,[ce("div",aoe,[ce("span",null,[_[7]||(_[7]=ce("strong",null,"相似度：",-1)),le(S,{percent:x(N.distance)},null,8,["percent"])]),N.rerank_score?(ge(),we("span",soe,[_[8]||(_[8]=ce("strong",null,"重排序：",-1)),le(S,{percent:x(N.rerank_score)},null,8,["percent"])])):dn("",!0)]),ce("div",ooe,"ID: #"+_t(N.id),1)]),ce("div",uoe,_t(N.entity.text),1)]))),128))])]),_:2},1032,["open","onUpdate:open","title"])],8,toe))),128))]),le(k,{open:d.value,"onUpdate:open":_[4]||(_[4]=P=>d.value=P),footer:null,width:800,title:"相关实体与关系"},{default:an(()=>[le(Zse,{graphData:f.value},null,8,["graphData"])]),_:1},8,["open"]),le(C,{open:p.value,"onUpdate:open":_[5]||(_[5]=P=>p.value=P),contentWrapperStyle:{maxWidth:"100%"},class:"web-result-detail",placement:"right",rootClassName:"root",title:"网页搜索结果",width:"700"},{default:an(()=>[ce("div",loe,[(ge(!0),we(aa,null,Za(v.value,P=>(ge(),we("div",{key:P.url,class:"result-item"},[ce("div",coe,[ce("div",hoe,[ce("span",null,[_[9]||(_[9]=ce("strong",null,"相关度：",-1)),le(S,{percent:x(P.score)},null,8,["percent"])])]),ce("div",doe,[ce("a",{href:P.url,target:"_blank"},_t(P.url),9,foe)])]),ce("div",goe,[ce("h3",poe,_t(P.title),1),ce("div",voe,_t(P.content),1)])]))),128))])]),_:1},8,["open"])])):dn("",!0)}}},yoe=du(moe,[["__scopeId","data-v-f6aa2e95"]]),boe=n=>{const e=typeof n;return e!=="function"&&e!=="object"||n===null},xoe=n=>{const e=n.flags===""?void 0:n.flags;return new RegExp(n.source,e)},il=(n,e=new WeakMap)=>{if(n===null||boe(n))return n;if(e.has(n))return e.get(n);if(n instanceof RegExp)return xoe(n);if(n instanceof Date)return new Date(n.getTime());if(n instanceof Function)return n;if(n instanceof Map){const r=new Map;return e.set(n,r),n.forEach((i,a)=>{r.set(a,il(i,e))}),r}if(n instanceof Set){const r=new Set;e.set(n,r);for(const i of n)r.add(il(i,e));return r}if(Array.isArray(n)){const r=[];return e.set(n,r),n.forEach(i=>{r.push(il(i,e))}),r}const t={};e.set(n,t);for(const r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=il(n[r],e));return t},CN=(n,e=200)=>{let t=0;return(...r)=>new Promise(i=>{t&&(clearTimeout(t),i("cancel")),t=window.setTimeout(()=>{n.apply(void 0,r),t=0,i("done")},e)})},p2=()=>`${Date.now().toString(36)}${Math.random().toString(36).substring(2)}`,BT=n=>n!==null&&typeof n=="object"&&!Array.isArray(n),AN=(n,e,t={})=>{const{excludeKeys:r}=t;for(const i in e)r&&r(i)?n[i]=e[i]:BT(e[i])&&BT(n[i])?n[i]=AN(n[i],e[i],t):n[i]=e[i];return n},he="md-editor",woe="https://at.alicdn.com/t/c/font_2605852_cmafimm6hot.js",Eoe="https://at.alicdn.com/t/c/font_2605852_cmafimm6hot.css",pt="https://unpkg.com",_oe=`${pt}/@highlightjs/cdn-assets@11.10.0/highlight.min.js`,zT={main:`${pt}/prettier@3.3.3/standalone.js`,markdown:`${pt}/prettier@3.3.3/plugins/markdown.js`},Soe={css:`${pt}/cropperjs@1.6.2/dist/cropper.min.css`,js:`${pt}/cropperjs@1.6.2/dist/cropper.min.js`},koe=`${pt}/screenfull@5.2.0/dist/screenfull.js`,Coe=`${pt}/mermaid@11.3.0/dist/mermaid.min.js`,Aoe={js:`${pt}/katex@0.16.11/dist/katex.min.js`,css:`${pt}/katex@0.16.11/dist/katex.min.css`},v2={a11y:{light:`${pt}/@highlightjs/cdn-assets@11.10.0/styles/a11y-light.min.css`,dark:`${pt}/@highlightjs/cdn-assets@11.10.0/styles/a11y-dark.min.css`},atom:{light:`${pt}/@highlightjs/cdn-assets@11.10.0/styles/atom-one-light.min.css`,dark:`${pt}/@highlightjs/cdn-assets@11.10.0/styles/atom-one-dark.min.css`},github:{light:`${pt}/@highlightjs/cdn-assets@11.10.0/styles/github.min.css`,dark:`${pt}/@highlightjs/cdn-assets@11.10.0/styles/github-dark.min.css`},gradient:{light:`${pt}/@highlightjs/cdn-assets@11.10.0/styles/gradient-light.min.css`,dark:`${pt}/@highlightjs/cdn-assets@11.10.0/styles/gradient-dark.min.css`},kimbie:{light:`${pt}/@highlightjs/cdn-assets@11.10.0/styles/kimbie-light.min.css`,dark:`${pt}/@highlightjs/cdn-assets@11.10.0/styles/kimbie-dark.min.css`},paraiso:{light:`${pt}/@highlightjs/cdn-assets@11.10.0/styles/paraiso-light.min.css`,dark:`${pt}/@highlightjs/cdn-assets@11.10.0/styles/paraiso-dark.min.css`},qtcreator:{light:`${pt}/@highlightjs/cdn-assets@11.10.0/styles/qtcreator-light.min.css`,dark:`${pt}/@highlightjs/cdn-assets@11.10.0/styles/qtcreator-dark.min.css`},stackoverflow:{light:`${pt}/@highlightjs/cdn-assets@11.10.0/styles/stackoverflow-light.min.css`,dark:`${pt}/@highlightjs/cdn-assets@11.10.0/styles/stackoverflow-dark.min.css`}},Toe=["bold","underline","italic","strikeThrough","-","title","sub","sup","quote","unorderedList","orderedList","task","-","codeRow","code","link","image","table","mermaid","katex","-","revoke","next","save","=","prettier","pageFullscreen","fullscreen","preview","previewOnly","htmlPreview","catalog","github"],Ooe=["markdownTotal","=","scrollSwitch"],$T={"zh-CN":{toolbarTips:{bold:"加粗",underline:"下划线",italic:"斜体",strikeThrough:"删除线",title:"标题",sub:"下标",sup:"上标",quote:"引用",unorderedList:"无序列表",orderedList:"有序列表",task:"任务列表",codeRow:"行内代码",code:"块级代码",link:"链接",image:"图片",table:"表格",mermaid:"mermaid图",katex:"katex公式",revoke:"后退",next:"前进",save:"保存",prettier:"美化",pageFullscreen:"浏览器全屏",fullscreen:"屏幕全屏",preview:"预览",previewOnly:"仅预览",htmlPreview:"html代码预览",catalog:"目录",github:"源码地址"},titleItem:{h1:"一级标题",h2:"二级标题",h3:"三级标题",h4:"四级标题",h5:"五级标题",h6:"六级标题"},imgTitleItem:{link:"添加链接",upload:"上传图片",clip2upload:"裁剪上传"},linkModalTips:{linkTitle:"添加链接",imageTitle:"添加图片",descLabel:"链接描述：",descLabelPlaceHolder:"请输入描述...",urlLabel:"链接地址：",urlLabelPlaceHolder:"请输入链接...",buttonOK:"确定"},clipModalTips:{title:"裁剪图片上传",buttonUpload:"上传"},copyCode:{text:"复制代码",successTips:"已复制！",failTips:"复制失败！"},mermaid:{flow:"流程图",sequence:"时序图",gantt:"甘特图",class:"类图",state:"状态图",pie:"饼图",relationship:"关系图",journey:"旅程图"},katex:{inline:"行内公式",block:"块级公式"},footer:{markdownTotal:"字数",scrollAuto:"同步滚动"}},"en-US":{toolbarTips:{bold:"bold",underline:"underline",italic:"italic",strikeThrough:"strikeThrough",title:"title",sub:"subscript",sup:"superscript",quote:"quote",unorderedList:"unordered list",orderedList:"ordered list",task:"task list",codeRow:"inline code",code:"block-level code",link:"link",image:"image",table:"table",mermaid:"mermaid",katex:"formula",revoke:"revoke",next:"undo revoke",save:"save",prettier:"prettier",pageFullscreen:"fullscreen in page",fullscreen:"fullscreen",preview:"preview",previewOnly:"preview only",htmlPreview:"html preview",catalog:"catalog",github:"source code"},titleItem:{h1:"Lv1 Heading",h2:"Lv2 Heading",h3:"Lv3 Heading",h4:"Lv4 Heading",h5:"Lv5 Heading",h6:"Lv6 Heading"},imgTitleItem:{link:"Add Image Link",upload:"Upload Images",clip2upload:"Clip Upload"},linkModalTips:{linkTitle:"Add Link",imageTitle:"Add Image",descLabel:"Desc:",descLabelPlaceHolder:"Enter a description...",urlLabel:"Link:",urlLabelPlaceHolder:"Enter a link...",buttonOK:"OK"},clipModalTips:{title:"Crop Image",buttonUpload:"Upload"},copyCode:{text:"Copy",successTips:"Copied!",failTips:"Copy failed!"},mermaid:{flow:"flow",sequence:"sequence",gantt:"gantt",class:"class",state:"state",pie:"pie",relationship:"relationship",journey:"journey"},katex:{inline:"inline",block:"block"},footer:{markdownTotal:"Character Count",scrollAuto:"Scroll Auto"}}},br={editorExtensions:{highlight:{js:_oe,css:v2},prettier:{standaloneJs:zT.main,parserMarkdownJs:zT.markdown},cropper:{...Soe},iconfont:woe,iconfontClass:Eoe,screenfull:{js:koe},mermaid:{js:Coe},katex:{...Aoe}},editorExtensionsAttrs:{},editorConfig:{languageUserDefined:{},mermaidTemplate:{},renderDelay:500,zIndex:2e4},codeMirrorExtensions:(n,e)=>e,markdownItConfig:()=>{},markdownItPlugins:n=>n,iconfontType:"svg",mermaidConfig:n=>n,katexConfig:n=>n},Moe=({instance:n,ctx:e,props:t={}},r="default")=>{const i=(n==null?void 0:n.$slots[r])||(e==null?void 0:e.slots[r]);return(i?i(n):"")||t[r]};var Poe=Object.defineProperty,Noe=(n,e,t)=>e in n?Poe(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,Doe=(n,e,t)=>Noe(n,typeof e!="symbol"?e+"":e,t);class Roe{constructor(){Doe(this,"pools",{})}remove(e,t,r){const a=this.pools[e]&&this.pools[e][t];a&&(this.pools[e][t]=a.filter(s=>s!==r))}clear(e){this.pools[e]={}}on(e,t){return this.pools[e]||(this.pools[e]={}),this.pools[e][t.name]||(this.pools[e][t.name]=[]),this.pools[e][t.name].push(t.callback),this.pools[e][t.name].includes(t.callback)}emit(e,t,...r){this.pools[e]||(this.pools[e]={});const a=this.pools[e][t];a&&a.forEach(s=>{try{s(...r)}catch(o){console.error(`${t} monitor event exception！`,o)}})}}const Xi=new Roe,Loe="buildFinished",Ly="catalogChanged",Ioe="pushCatalog",TN="rerender",Foe="taskStateChanged",ga=(n,e,t="")=>{var r;const i=document.getElementById(e.id);if(i)t!==""&&(Reflect.get(window,t)?(r=e.onload)==null||r.call(i,new Event("load")):e.onload&&i.addEventListener("load",e.onload));else{const a={...e};a.onload=null;const s=zoe(n,a);e.onload&&s.addEventListener("load",e.onload),document.head.appendChild(s)}},Boe=(n,e)=>{const t=document.getElementById(e.id);t==null||t.remove(),ga(n,e)},zoe=(n,e)=>{const t=document.createElement(n);return Object.keys(e).forEach(r=>{e[r]!==void 0&&(t[r]=e[r])}),t},jT=(()=>{const n=t=>{if(!t)return;const r=t.firstChild;let i=1,a=0,s=0,o=!1,u,l,c,h=1;const d=()=>{r.style.transform=`translate(${a}px, ${s}px) scale(${i})`};t.addEventListener("touchstart",f=>{f.touches.length===1?(o=!0,u=f.touches[0].clientX-a,l=f.touches[0].clientY-s):f.touches.length===2&&(c=Math.hypot(f.touches[0].clientX-f.touches[1].clientX,f.touches[0].clientY-f.touches[1].clientY),h=i)},{passive:!1}),t.addEventListener("touchmove",f=>{if(f.preventDefault(),o&&f.touches.length===1)a=f.touches[0].clientX-u,s=f.touches[0].clientY-l,d();else if(f.touches.length===2){const p=Math.hypot(f.touches[0].clientX-f.touches[1].clientX,f.touches[0].clientY-f.touches[1].clientY)/c,v=i;i=h*(1+(p-1));const m=(f.touches[0].clientX+f.touches[1].clientX)/2,y=(f.touches[0].clientY+f.touches[1].clientY)/2,b=r.getBoundingClientRect(),x=(m-b.left)/v,w=(y-b.top)/v;a-=x*(i-v),s-=w*(i-v),d()}},{passive:!1}),t.addEventListener("touchend",()=>{o=!1}),t.addEventListener("wheel",f=>{f.preventDefault();const g=.02,p=i;f.deltaY<0?i+=g:i=Math.max(.1,i-g);const v=r.getBoundingClientRect(),m=f.clientX-v.left,y=f.clientY-v.top;a-=m/p*(i-p),s-=y/p*(i-p),d()},{passive:!1}),t.addEventListener("mousedown",f=>{o=!0,u=f.clientX-a,l=f.clientY-s}),t.addEventListener("mousemove",f=>{o&&(a=f.clientX-u,s=f.clientY-l,d())}),t.addEventListener("mouseup",()=>{o=!1}),t.addEventListener("mouseleave",()=>{o=!1})};return t=>{t.forEach(r=>{n(r)})}})(),$oe=(n,e)=>{if(!n)return n;const t=e.split(`
`),r=['<span rn-wrapper aria-hidden="true">'];return t.forEach(()=>{r.push("<span></span>")}),r.push("</span>"),`<span class="${he}-code-block">${n}</span>${r.join("")}`},joe=(()=>{let n=0;return e=>e+ ++n})();/*! medium-zoom 1.1.0 | MIT License | https://github.com/francoischalifour/medium-zoom */var ks=Object.assign||function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},Th=function(e){return e.tagName==="IMG"},qoe=function(e){return NodeList.prototype.isPrototypeOf(e)},Yh=function(e){return e&&e.nodeType===1},qT=function(e){var t=e.currentSrc||e.src;return t.substr(-4).toLowerCase()===".svg"},GT=function(e){try{return Array.isArray(e)?e.filter(Th):qoe(e)?[].slice.call(e).filter(Th):Yh(e)?[e].filter(Th):typeof e=="string"?[].slice.call(document.querySelectorAll(e)).filter(Th):[]}catch{throw new TypeError(`The provided selector is invalid.
Expects a CSS selector, a Node element, a NodeList or an array.
See: https://github.com/francoischalifour/medium-zoom`)}},Goe=function(e){var t=document.createElement("div");return t.classList.add("medium-zoom-overlay"),t.style.background=e,t},Woe=function(e){var t=e.getBoundingClientRect(),r=t.top,i=t.left,a=t.width,s=t.height,o=e.cloneNode(),u=window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop||0,l=window.pageXOffset||document.documentElement.scrollLeft||document.body.scrollLeft||0;return o.removeAttribute("id"),o.style.position="absolute",o.style.top=r+u+"px",o.style.left=i+l+"px",o.style.width=a+"px",o.style.height=s+"px",o.style.transform="",o},To=function(e,t){var r=ks({bubbles:!1,cancelable:!1,detail:void 0},t);if(typeof window.CustomEvent=="function")return new CustomEvent(e,r);var i=document.createEvent("CustomEvent");return i.initCustomEvent(e,r.bubbles,r.cancelable,r.detail),i},Voe=function n(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=window.Promise||function(T){function O(){}T(O,O)},i=function(T){var O=T.target;if(O===C){g();return}b.indexOf(O)!==-1&&p({target:O})},a=function(){if(!(w||!S.original)){var T=window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop||0;Math.abs(E-T)>_.scrollOffset&&setTimeout(g,150)}},s=function(T){var O=T.key||T.keyCode;(O==="Escape"||O==="Esc"||O===27)&&g()},o=function(){var T=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},O=T;if(T.background&&(C.style.background=T.background),T.container&&T.container instanceof Object&&(O.container=ks({},_.container,T.container)),T.template){var P=Yh(T.template)?T.template:document.querySelector(T.template);O.template=P}return _=ks({},_,O),b.forEach(function(R){R.dispatchEvent(To("medium-zoom:update",{detail:{zoom:k}}))}),k},u=function(){var T=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return n(ks({},_,T))},l=function(){for(var T=arguments.length,O=Array(T),P=0;P<T;P++)O[P]=arguments[P];var R=O.reduce(function(N,D){return[].concat(N,GT(D))},[]);return R.filter(function(N){return b.indexOf(N)===-1}).forEach(function(N){b.push(N),N.classList.add("medium-zoom-image")}),x.forEach(function(N){var D=N.type,M=N.listener,F=N.options;R.forEach(function(j){j.addEventListener(D,M,F)})}),k},c=function(){for(var T=arguments.length,O=Array(T),P=0;P<T;P++)O[P]=arguments[P];S.zoomed&&g();var R=O.length>0?O.reduce(function(N,D){return[].concat(N,GT(D))},[]):b;return R.forEach(function(N){N.classList.remove("medium-zoom-image"),N.dispatchEvent(To("medium-zoom:detach",{detail:{zoom:k}}))}),b=b.filter(function(N){return R.indexOf(N)===-1}),k},h=function(T,O){var P=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return b.forEach(function(R){R.addEventListener("medium-zoom:"+T,O,P)}),x.push({type:"medium-zoom:"+T,listener:O,options:P}),k},d=function(T,O){var P=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return b.forEach(function(R){R.removeEventListener("medium-zoom:"+T,O,P)}),x=x.filter(function(R){return!(R.type==="medium-zoom:"+T&&R.listener.toString()===O.toString())}),k},f=function(){var T=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},O=T.target,P=function(){var N={width:document.documentElement.clientWidth,height:document.documentElement.clientHeight,left:0,top:0,right:0,bottom:0},D=void 0,M=void 0;if(_.container)if(_.container instanceof Object)N=ks({},N,_.container),D=N.width-N.left-N.right-_.margin*2,M=N.height-N.top-N.bottom-_.margin*2;else{var F=Yh(_.container)?_.container:document.querySelector(_.container),j=F.getBoundingClientRect(),B=j.width,$=j.height,W=j.left,Y=j.top;N=ks({},N,{width:B,height:$,left:W,top:Y})}D=D||N.width-_.margin*2,M=M||N.height-_.margin*2;var K=S.zoomedHd||S.original,ee=qT(K)?D:K.naturalWidth||D,ie=qT(K)?M:K.naturalHeight||M,_e=K.getBoundingClientRect(),Ae=_e.top,Be=_e.left,Fe=_e.width,Ze=_e.height,Kt=Math.min(Math.max(Fe,ee),D)/Fe,$r=Math.min(Math.max(Ze,ie),M)/Ze,Re=Math.min(Kt,$r),Zt=(-Be+(D-Fe)/2+_.margin+N.left)/Re,ze=(-Ae+(M-Ze)/2+_.margin+N.top)/Re,Pn="scale("+Re+") translate3d("+Zt+"px, "+ze+"px, 0)";S.zoomed.style.transform=Pn,S.zoomedHd&&(S.zoomedHd.style.transform=Pn)};return new r(function(R){if(O&&b.indexOf(O)===-1){R(k);return}var N=function B(){w=!1,S.zoomed.removeEventListener("transitionend",B),S.original.dispatchEvent(To("medium-zoom:opened",{detail:{zoom:k}})),R(k)};if(S.zoomed){R(k);return}if(O)S.original=O;else if(b.length>0){var D=b;S.original=D[0]}else{R(k);return}if(S.original.dispatchEvent(To("medium-zoom:open",{detail:{zoom:k}})),E=window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop||0,w=!0,S.zoomed=Woe(S.original),document.body.appendChild(C),_.template){var M=Yh(_.template)?_.template:document.querySelector(_.template);S.template=document.createElement("div"),S.template.appendChild(M.content.cloneNode(!0)),document.body.appendChild(S.template)}if(S.original.parentElement&&S.original.parentElement.tagName==="PICTURE"&&S.original.currentSrc&&(S.zoomed.src=S.original.currentSrc),document.body.appendChild(S.zoomed),window.requestAnimationFrame(function(){document.body.classList.add("medium-zoom--opened")}),S.original.classList.add("medium-zoom-image--hidden"),S.zoomed.classList.add("medium-zoom-image--opened"),S.zoomed.addEventListener("click",g),S.zoomed.addEventListener("transitionend",N),S.original.getAttribute("data-zoom-src")){S.zoomedHd=S.zoomed.cloneNode(),S.zoomedHd.removeAttribute("srcset"),S.zoomedHd.removeAttribute("sizes"),S.zoomedHd.removeAttribute("loading"),S.zoomedHd.src=S.zoomed.getAttribute("data-zoom-src"),S.zoomedHd.onerror=function(){clearInterval(F),console.warn("Unable to reach the zoom image target "+S.zoomedHd.src),S.zoomedHd=null,P()};var F=setInterval(function(){S.zoomedHd.complete&&(clearInterval(F),S.zoomedHd.classList.add("medium-zoom-image--opened"),S.zoomedHd.addEventListener("click",g),document.body.appendChild(S.zoomedHd),P())},10)}else if(S.original.hasAttribute("srcset")){S.zoomedHd=S.zoomed.cloneNode(),S.zoomedHd.removeAttribute("sizes"),S.zoomedHd.removeAttribute("loading");var j=S.zoomedHd.addEventListener("load",function(){S.zoomedHd.removeEventListener("load",j),S.zoomedHd.classList.add("medium-zoom-image--opened"),S.zoomedHd.addEventListener("click",g),document.body.appendChild(S.zoomedHd),P()})}else P()})},g=function(){return new r(function(T){if(w||!S.original){T(k);return}var O=function P(){S.original.classList.remove("medium-zoom-image--hidden"),document.body.removeChild(S.zoomed),S.zoomedHd&&document.body.removeChild(S.zoomedHd),document.body.removeChild(C),S.zoomed.classList.remove("medium-zoom-image--opened"),S.template&&document.body.removeChild(S.template),w=!1,S.zoomed.removeEventListener("transitionend",P),S.original.dispatchEvent(To("medium-zoom:closed",{detail:{zoom:k}})),S.original=null,S.zoomed=null,S.zoomedHd=null,S.template=null,T(k)};w=!0,document.body.classList.remove("medium-zoom--opened"),S.zoomed.style.transform="",S.zoomedHd&&(S.zoomedHd.style.transform=""),S.template&&(S.template.style.transition="opacity 150ms",S.template.style.opacity=0),S.original.dispatchEvent(To("medium-zoom:close",{detail:{zoom:k}})),S.zoomed.addEventListener("transitionend",O)})},p=function(){var T=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},O=T.target;return S.original?g():f({target:O})},v=function(){return _},m=function(){return b},y=function(){return S.original},b=[],x=[],w=!1,E=0,_=t,S={original:null,zoomed:null,zoomedHd:null,template:null};Object.prototype.toString.call(e)==="[object Object]"?_=e:(e||typeof e=="string")&&l(e),_=ks({margin:0,background:"#fff",scrollOffset:40,container:null,template:null},_);var C=Goe(_.background);document.addEventListener("click",i),document.addEventListener("keyup",s),document.addEventListener("scroll",a),window.addEventListener("resize",g);var k={open:f,close:g,toggle:p,update:o,clone:u,attach:l,detach:c,on:h,off:d,getOptions:v,getImages:m,getZoomedImage:y};return k};function Uoe(n,e){e===void 0&&(e={});var t=e.insertAt;if(!(!n||typeof document>"u")){var r=document.head||document.getElementsByTagName("head")[0],i=document.createElement("style");i.type="text/css",t==="top"&&r.firstChild?r.insertBefore(i,r.firstChild):r.appendChild(i),i.styleSheet?i.styleSheet.cssText=n:i.appendChild(document.createTextNode(n))}}var Hoe=".medium-zoom-overlay{position:fixed;top:0;right:0;bottom:0;left:0;opacity:0;transition:opacity .3s;will-change:opacity}.medium-zoom--opened .medium-zoom-overlay{cursor:pointer;cursor:zoom-out;opacity:1}.medium-zoom-image{cursor:pointer;cursor:zoom-in;transition:transform .3s cubic-bezier(.2,0,.2,1)!important}.medium-zoom-image--hidden{visibility:hidden}.medium-zoom-image--opened{position:relative;cursor:pointer;cursor:zoom-out;will-change:transform}";Uoe(Hoe);const Yoe=Voe;var Xoe=function(){var n=document.getSelection();if(!n.rangeCount)return function(){};for(var e=document.activeElement,t=[],r=0;r<n.rangeCount;r++)t.push(n.getRangeAt(r));switch(e.tagName.toUpperCase()){case"INPUT":case"TEXTAREA":e.blur();break;default:e=null;break}return n.removeAllRanges(),function(){n.type==="Caret"&&n.removeAllRanges(),n.rangeCount||t.forEach(function(i){n.addRange(i)}),e&&e.focus()}},Koe=Xoe,WT={"text/plain":"Text","text/html":"Url",default:"Text"},Zoe="Copy to clipboard: #{key}, Enter";function Joe(n){var e=(/mac os x/i.test(navigator.userAgent)?"⌘":"Ctrl")+"+C";return n.replace(/#{\s*key\s*}/g,e)}function Qoe(n,e){var t,r,i,a,s,o,u=!1;e||(e={}),t=e.debug||!1;try{i=Koe(),a=document.createRange(),s=document.getSelection(),o=document.createElement("span"),o.textContent=n,o.ariaHidden="true",o.style.all="unset",o.style.position="fixed",o.style.top=0,o.style.clip="rect(0, 0, 0, 0)",o.style.whiteSpace="pre",o.style.webkitUserSelect="text",o.style.MozUserSelect="text",o.style.msUserSelect="text",o.style.userSelect="text",o.addEventListener("copy",function(c){if(c.stopPropagation(),e.format)if(c.preventDefault(),typeof c.clipboardData>"u"){t&&console.warn("unable to use e.clipboardData"),t&&console.warn("trying IE specific stuff"),window.clipboardData.clearData();var h=WT[e.format]||WT.default;window.clipboardData.setData(h,n)}else c.clipboardData.clearData(),c.clipboardData.setData(e.format,n);e.onCopy&&(c.preventDefault(),e.onCopy(c.clipboardData))}),document.body.appendChild(o),a.selectNodeContents(o),s.addRange(a);var l=document.execCommand("copy");if(!l)throw new Error("copy command was unsuccessful");u=!0}catch(c){t&&console.error("unable to copy using execCommand: ",c),t&&console.warn("trying IE specific stuff");try{window.clipboardData.setData(e.format||"text",n),e.onCopy&&e.onCopy(window.clipboardData),u=!0}catch(h){t&&console.error("unable to copy using clipboardData: ",h),t&&console.error("falling back to prompt"),r=Joe("message"in e?e.message:Zoe),window.prompt(r,n)}}finally{s&&(typeof s.removeRange=="function"?s.removeRange(a):s.removeAllRanges()),o&&document.body.removeChild(o),i()}return u}var eue=Qoe;const tue=Zd(eue),VT={};function nue(n){let e=VT[n];if(e)return e;e=VT[n]=[];for(let t=0;t<128;t++){const r=String.fromCharCode(t);e.push(r)}for(let t=0;t<n.length;t++){const r=n.charCodeAt(t);e[r]="%"+("0"+r.toString(16).toUpperCase()).slice(-2)}return e}function lu(n,e){typeof e!="string"&&(e=lu.defaultChars);const t=nue(e);return n.replace(/(%[a-f0-9]{2})+/gi,function(r){let i="";for(let a=0,s=r.length;a<s;a+=3){const o=parseInt(r.slice(a+1,a+3),16);if(o<128){i+=t[o];continue}if((o&224)===192&&a+3<s){const u=parseInt(r.slice(a+4,a+6),16);if((u&192)===128){const l=o<<6&1984|u&63;l<128?i+="��":i+=String.fromCharCode(l),a+=3;continue}}if((o&240)===224&&a+6<s){const u=parseInt(r.slice(a+4,a+6),16),l=parseInt(r.slice(a+7,a+9),16);if((u&192)===128&&(l&192)===128){const c=o<<12&61440|u<<6&4032|l&63;c<2048||c>=55296&&c<=57343?i+="���":i+=String.fromCharCode(c),a+=6;continue}}if((o&248)===240&&a+9<s){const u=parseInt(r.slice(a+4,a+6),16),l=parseInt(r.slice(a+7,a+9),16),c=parseInt(r.slice(a+10,a+12),16);if((u&192)===128&&(l&192)===128&&(c&192)===128){let h=o<<18&1835008|u<<12&258048|l<<6&4032|c&63;h<65536||h>1114111?i+="����":(h-=65536,i+=String.fromCharCode(55296+(h>>10),56320+(h&1023))),a+=9;continue}}i+="�"}return i})}lu.defaultChars=";/?:@&=+$,#";lu.componentChars="";const UT={};function rue(n){let e=UT[n];if(e)return e;e=UT[n]=[];for(let t=0;t<128;t++){const r=String.fromCharCode(t);/^[0-9a-z]$/i.test(r)?e.push(r):e.push("%"+("0"+t.toString(16).toUpperCase()).slice(-2))}for(let t=0;t<n.length;t++)e[n.charCodeAt(t)]=n[t];return e}function yc(n,e,t){typeof e!="string"&&(t=e,e=yc.defaultChars),typeof t>"u"&&(t=!0);const r=rue(e);let i="";for(let a=0,s=n.length;a<s;a++){const o=n.charCodeAt(a);if(t&&o===37&&a+2<s&&/^[0-9a-f]{2}$/i.test(n.slice(a+1,a+3))){i+=n.slice(a,a+3),a+=2;continue}if(o<128){i+=r[o];continue}if(o>=55296&&o<=57343){if(o>=55296&&o<=56319&&a+1<s){const u=n.charCodeAt(a+1);if(u>=56320&&u<=57343){i+=encodeURIComponent(n[a]+n[a+1]),a++;continue}}i+="%EF%BF%BD";continue}i+=encodeURIComponent(n[a])}return i}yc.defaultChars=";/?:@&=+$,-_.!~*'()#";yc.componentChars="-_.!~*'()";function Ew(n){let e="";return e+=n.protocol||"",e+=n.slashes?"//":"",e+=n.auth?n.auth+"@":"",n.hostname&&n.hostname.indexOf(":")!==-1?e+="["+n.hostname+"]":e+=n.hostname||"",e+=n.port?":"+n.port:"",e+=n.pathname||"",e+=n.search||"",e+=n.hash||"",e}function Gd(){this.protocol=null,this.slashes=null,this.auth=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.pathname=null}const iue=/^([a-z0-9.+-]+:)/i,aue=/:[0-9]*$/,sue=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,oue=["<",">",'"',"`"," ","\r",`
`,"	"],uue=["{","}","|","\\","^","`"].concat(oue),lue=["'"].concat(uue),HT=["%","/","?",";","#"].concat(lue),YT=["/","?","#"],cue=255,XT=/^[+a-z0-9A-Z_-]{0,63}$/,hue=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,KT={javascript:!0,"javascript:":!0},ZT={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0};function _w(n,e){if(n&&n instanceof Gd)return n;const t=new Gd;return t.parse(n,e),t}Gd.prototype.parse=function(n,e){let t,r,i,a=n;if(a=a.trim(),!e&&n.split("#").length===1){const l=sue.exec(a);if(l)return this.pathname=l[1],l[2]&&(this.search=l[2]),this}let s=iue.exec(a);if(s&&(s=s[0],t=s.toLowerCase(),this.protocol=s,a=a.substr(s.length)),(e||s||a.match(/^\/\/[^@\/]+@[^@\/]+/))&&(i=a.substr(0,2)==="//",i&&!(s&&KT[s])&&(a=a.substr(2),this.slashes=!0)),!KT[s]&&(i||s&&!ZT[s])){let l=-1;for(let g=0;g<YT.length;g++)r=a.indexOf(YT[g]),r!==-1&&(l===-1||r<l)&&(l=r);let c,h;l===-1?h=a.lastIndexOf("@"):h=a.lastIndexOf("@",l),h!==-1&&(c=a.slice(0,h),a=a.slice(h+1),this.auth=c),l=-1;for(let g=0;g<HT.length;g++)r=a.indexOf(HT[g]),r!==-1&&(l===-1||r<l)&&(l=r);l===-1&&(l=a.length),a[l-1]===":"&&l--;const d=a.slice(0,l);a=a.slice(l),this.parseHost(d),this.hostname=this.hostname||"";const f=this.hostname[0]==="["&&this.hostname[this.hostname.length-1]==="]";if(!f){const g=this.hostname.split(/\./);for(let p=0,v=g.length;p<v;p++){const m=g[p];if(m&&!m.match(XT)){let y="";for(let b=0,x=m.length;b<x;b++)m.charCodeAt(b)>127?y+="x":y+=m[b];if(!y.match(XT)){const b=g.slice(0,p),x=g.slice(p+1),w=m.match(hue);w&&(b.push(w[1]),x.unshift(w[2])),x.length&&(a=x.join(".")+a),this.hostname=b.join(".");break}}}}this.hostname.length>cue&&(this.hostname=""),f&&(this.hostname=this.hostname.substr(1,this.hostname.length-2))}const o=a.indexOf("#");o!==-1&&(this.hash=a.substr(o),a=a.slice(0,o));const u=a.indexOf("?");return u!==-1&&(this.search=a.substr(u),a=a.slice(0,u)),a&&(this.pathname=a),ZT[t]&&this.hostname&&!this.pathname&&(this.pathname=""),this};Gd.prototype.parseHost=function(n){let e=aue.exec(n);e&&(e=e[0],e!==":"&&(this.port=e.substr(1)),n=n.substr(0,n.length-e.length)),n&&(this.hostname=n)};const due=Object.freeze(Object.defineProperty({__proto__:null,decode:lu,encode:yc,format:Ew,parse:_w},Symbol.toStringTag,{value:"Module"})),ON=/[\0-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/,MN=/[\0-\x1F\x7F-\x9F]/,fue=/[\xAD\u0600-\u0605\u061C\u06DD\u070F\u0890\u0891\u08E2\u180E\u200B-\u200F\u202A-\u202E\u2060-\u2064\u2066-\u206F\uFEFF\uFFF9-\uFFFB]|\uD804[\uDCBD\uDCCD]|\uD80D[\uDC30-\uDC3F]|\uD82F[\uDCA0-\uDCA3]|\uD834[\uDD73-\uDD7A]|\uDB40[\uDC01\uDC20-\uDC7F]/,Sw=/[!-#%-\*,-\/:;\?@\[-\]_\{\}\xA1\xA7\xAB\xB6\xB7\xBB\xBF\u037E\u0387\u055A-\u055F\u0589\u058A\u05BE\u05C0\u05C3\u05C6\u05F3\u05F4\u0609\u060A\u060C\u060D\u061B\u061D-\u061F\u066A-\u066D\u06D4\u0700-\u070D\u07F7-\u07F9\u0830-\u083E\u085E\u0964\u0965\u0970\u09FD\u0A76\u0AF0\u0C77\u0C84\u0DF4\u0E4F\u0E5A\u0E5B\u0F04-\u0F12\u0F14\u0F3A-\u0F3D\u0F85\u0FD0-\u0FD4\u0FD9\u0FDA\u104A-\u104F\u10FB\u1360-\u1368\u1400\u166E\u169B\u169C\u16EB-\u16ED\u1735\u1736\u17D4-\u17D6\u17D8-\u17DA\u1800-\u180A\u1944\u1945\u1A1E\u1A1F\u1AA0-\u1AA6\u1AA8-\u1AAD\u1B5A-\u1B60\u1B7D\u1B7E\u1BFC-\u1BFF\u1C3B-\u1C3F\u1C7E\u1C7F\u1CC0-\u1CC7\u1CD3\u2010-\u2027\u2030-\u2043\u2045-\u2051\u2053-\u205E\u207D\u207E\u208D\u208E\u2308-\u230B\u2329\u232A\u2768-\u2775\u27C5\u27C6\u27E6-\u27EF\u2983-\u2998\u29D8-\u29DB\u29FC\u29FD\u2CF9-\u2CFC\u2CFE\u2CFF\u2D70\u2E00-\u2E2E\u2E30-\u2E4F\u2E52-\u2E5D\u3001-\u3003\u3008-\u3011\u3014-\u301F\u3030\u303D\u30A0\u30FB\uA4FE\uA4FF\uA60D-\uA60F\uA673\uA67E\uA6F2-\uA6F7\uA874-\uA877\uA8CE\uA8CF\uA8F8-\uA8FA\uA8FC\uA92E\uA92F\uA95F\uA9C1-\uA9CD\uA9DE\uA9DF\uAA5C-\uAA5F\uAADE\uAADF\uAAF0\uAAF1\uABEB\uFD3E\uFD3F\uFE10-\uFE19\uFE30-\uFE52\uFE54-\uFE61\uFE63\uFE68\uFE6A\uFE6B\uFF01-\uFF03\uFF05-\uFF0A\uFF0C-\uFF0F\uFF1A\uFF1B\uFF1F\uFF20\uFF3B-\uFF3D\uFF3F\uFF5B\uFF5D\uFF5F-\uFF65]|\uD800[\uDD00-\uDD02\uDF9F\uDFD0]|\uD801\uDD6F|\uD802[\uDC57\uDD1F\uDD3F\uDE50-\uDE58\uDE7F\uDEF0-\uDEF6\uDF39-\uDF3F\uDF99-\uDF9C]|\uD803[\uDEAD\uDF55-\uDF59\uDF86-\uDF89]|\uD804[\uDC47-\uDC4D\uDCBB\uDCBC\uDCBE-\uDCC1\uDD40-\uDD43\uDD74\uDD75\uDDC5-\uDDC8\uDDCD\uDDDB\uDDDD-\uDDDF\uDE38-\uDE3D\uDEA9]|\uD805[\uDC4B-\uDC4F\uDC5A\uDC5B\uDC5D\uDCC6\uDDC1-\uDDD7\uDE41-\uDE43\uDE60-\uDE6C\uDEB9\uDF3C-\uDF3E]|\uD806[\uDC3B\uDD44-\uDD46\uDDE2\uDE3F-\uDE46\uDE9A-\uDE9C\uDE9E-\uDEA2\uDF00-\uDF09]|\uD807[\uDC41-\uDC45\uDC70\uDC71\uDEF7\uDEF8\uDF43-\uDF4F\uDFFF]|\uD809[\uDC70-\uDC74]|\uD80B[\uDFF1\uDFF2]|\uD81A[\uDE6E\uDE6F\uDEF5\uDF37-\uDF3B\uDF44]|\uD81B[\uDE97-\uDE9A\uDFE2]|\uD82F\uDC9F|\uD836[\uDE87-\uDE8B]|\uD83A[\uDD5E\uDD5F]/,PN=/[\$\+<->\^`\|~\xA2-\xA6\xA8\xA9\xAC\xAE-\xB1\xB4\xB8\xD7\xF7\u02C2-\u02C5\u02D2-\u02DF\u02E5-\u02EB\u02ED\u02EF-\u02FF\u0375\u0384\u0385\u03F6\u0482\u058D-\u058F\u0606-\u0608\u060B\u060E\u060F\u06DE\u06E9\u06FD\u06FE\u07F6\u07FE\u07FF\u0888\u09F2\u09F3\u09FA\u09FB\u0AF1\u0B70\u0BF3-\u0BFA\u0C7F\u0D4F\u0D79\u0E3F\u0F01-\u0F03\u0F13\u0F15-\u0F17\u0F1A-\u0F1F\u0F34\u0F36\u0F38\u0FBE-\u0FC5\u0FC7-\u0FCC\u0FCE\u0FCF\u0FD5-\u0FD8\u109E\u109F\u1390-\u1399\u166D\u17DB\u1940\u19DE-\u19FF\u1B61-\u1B6A\u1B74-\u1B7C\u1FBD\u1FBF-\u1FC1\u1FCD-\u1FCF\u1FDD-\u1FDF\u1FED-\u1FEF\u1FFD\u1FFE\u2044\u2052\u207A-\u207C\u208A-\u208C\u20A0-\u20C0\u2100\u2101\u2103-\u2106\u2108\u2109\u2114\u2116-\u2118\u211E-\u2123\u2125\u2127\u2129\u212E\u213A\u213B\u2140-\u2144\u214A-\u214D\u214F\u218A\u218B\u2190-\u2307\u230C-\u2328\u232B-\u2426\u2440-\u244A\u249C-\u24E9\u2500-\u2767\u2794-\u27C4\u27C7-\u27E5\u27F0-\u2982\u2999-\u29D7\u29DC-\u29FB\u29FE-\u2B73\u2B76-\u2B95\u2B97-\u2BFF\u2CE5-\u2CEA\u2E50\u2E51\u2E80-\u2E99\u2E9B-\u2EF3\u2F00-\u2FD5\u2FF0-\u2FFF\u3004\u3012\u3013\u3020\u3036\u3037\u303E\u303F\u309B\u309C\u3190\u3191\u3196-\u319F\u31C0-\u31E3\u31EF\u3200-\u321E\u322A-\u3247\u3250\u3260-\u327F\u328A-\u32B0\u32C0-\u33FF\u4DC0-\u4DFF\uA490-\uA4C6\uA700-\uA716\uA720\uA721\uA789\uA78A\uA828-\uA82B\uA836-\uA839\uAA77-\uAA79\uAB5B\uAB6A\uAB6B\uFB29\uFBB2-\uFBC2\uFD40-\uFD4F\uFDCF\uFDFC-\uFDFF\uFE62\uFE64-\uFE66\uFE69\uFF04\uFF0B\uFF1C-\uFF1E\uFF3E\uFF40\uFF5C\uFF5E\uFFE0-\uFFE6\uFFE8-\uFFEE\uFFFC\uFFFD]|\uD800[\uDD37-\uDD3F\uDD79-\uDD89\uDD8C-\uDD8E\uDD90-\uDD9C\uDDA0\uDDD0-\uDDFC]|\uD802[\uDC77\uDC78\uDEC8]|\uD805\uDF3F|\uD807[\uDFD5-\uDFF1]|\uD81A[\uDF3C-\uDF3F\uDF45]|\uD82F\uDC9C|\uD833[\uDF50-\uDFC3]|\uD834[\uDC00-\uDCF5\uDD00-\uDD26\uDD29-\uDD64\uDD6A-\uDD6C\uDD83\uDD84\uDD8C-\uDDA9\uDDAE-\uDDEA\uDE00-\uDE41\uDE45\uDF00-\uDF56]|\uD835[\uDEC1\uDEDB\uDEFB\uDF15\uDF35\uDF4F\uDF6F\uDF89\uDFA9\uDFC3]|\uD836[\uDC00-\uDDFF\uDE37-\uDE3A\uDE6D-\uDE74\uDE76-\uDE83\uDE85\uDE86]|\uD838[\uDD4F\uDEFF]|\uD83B[\uDCAC\uDCB0\uDD2E\uDEF0\uDEF1]|\uD83C[\uDC00-\uDC2B\uDC30-\uDC93\uDCA0-\uDCAE\uDCB1-\uDCBF\uDCC1-\uDCCF\uDCD1-\uDCF5\uDD0D-\uDDAD\uDDE6-\uDE02\uDE10-\uDE3B\uDE40-\uDE48\uDE50\uDE51\uDE60-\uDE65\uDF00-\uDFFF]|\uD83D[\uDC00-\uDED7\uDEDC-\uDEEC\uDEF0-\uDEFC\uDF00-\uDF76\uDF7B-\uDFD9\uDFE0-\uDFEB\uDFF0]|\uD83E[\uDC00-\uDC0B\uDC10-\uDC47\uDC50-\uDC59\uDC60-\uDC87\uDC90-\uDCAD\uDCB0\uDCB1\uDD00-\uDE53\uDE60-\uDE6D\uDE70-\uDE7C\uDE80-\uDE88\uDE90-\uDEBD\uDEBF-\uDEC5\uDECE-\uDEDB\uDEE0-\uDEE8\uDEF0-\uDEF8\uDF00-\uDF92\uDF94-\uDFCA]/,NN=/[ \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000]/,gue=Object.freeze(Object.defineProperty({__proto__:null,Any:ON,Cc:MN,Cf:fue,P:Sw,S:PN,Z:NN},Symbol.toStringTag,{value:"Module"})),pue=new Uint16Array('ᵁ<Õıʊҝջאٵ۞ޢߖࠏ੊ઑඡ๭༉༦჊ረዡᐕᒝᓃᓟᔥ\0\0\0\0\0\0ᕫᛍᦍᰒᷝ὾⁠↰⊍⏀⏻⑂⠤⤒ⴈ⹈⿎〖㊺㘹㞬㣾㨨㩱㫠㬮ࠀEMabcfglmnoprstu\\bfms¦³¹ÈÏlig耻Æ䃆P耻&䀦cute耻Á䃁reve;䄂Āiyx}rc耻Â䃂;䐐r;쀀𝔄rave耻À䃀pha;䎑acr;䄀d;橓Āgp¡on;䄄f;쀀𝔸plyFunction;恡ing耻Å䃅Ācs¾Ãr;쀀𝒜ign;扔ilde耻Ã䃃ml耻Ä䃄ЀaceforsuåûþėĜĢħĪĀcrêòkslash;或Ŷöø;櫧ed;挆y;䐑ƀcrtąċĔause;戵noullis;愬a;䎒r;쀀𝔅pf;쀀𝔹eve;䋘còēmpeq;扎܀HOacdefhilorsuōőŖƀƞƢƵƷƺǜȕɳɸɾcy;䐧PY耻©䂩ƀcpyŝŢźute;䄆Ā;iŧŨ拒talDifferentialD;慅leys;愭ȀaeioƉƎƔƘron;䄌dil耻Ç䃇rc;䄈nint;戰ot;䄊ĀdnƧƭilla;䂸terDot;䂷òſi;䎧rcleȀDMPTǇǋǑǖot;抙inus;抖lus;投imes;抗oĀcsǢǸkwiseContourIntegral;戲eCurlyĀDQȃȏoubleQuote;思uote;怙ȀlnpuȞȨɇɕonĀ;eȥȦ户;橴ƀgitȯȶȺruent;扡nt;戯ourIntegral;戮ĀfrɌɎ;愂oduct;成nterClockwiseContourIntegral;戳oss;樯cr;쀀𝒞pĀ;Cʄʅ拓ap;才րDJSZacefiosʠʬʰʴʸˋ˗ˡ˦̳ҍĀ;oŹʥtrahd;椑cy;䐂cy;䐅cy;䐏ƀgrsʿ˄ˇger;怡r;憡hv;櫤Āayː˕ron;䄎;䐔lĀ;t˝˞戇a;䎔r;쀀𝔇Āaf˫̧Ācm˰̢riticalȀADGT̖̜̀̆cute;䂴oŴ̋̍;䋙bleAcute;䋝rave;䁠ilde;䋜ond;拄ferentialD;慆Ѱ̽\0\0\0͔͂\0Ѕf;쀀𝔻ƀ;DE͈͉͍䂨ot;惜qual;扐blèCDLRUVͣͲ΂ϏϢϸontourIntegraìȹoɴ͹\0\0ͻ»͉nArrow;懓Āeo·ΤftƀARTΐΖΡrrow;懐ightArrow;懔eåˊngĀLRΫτeftĀARγιrrow;柸ightArrow;柺ightArrow;柹ightĀATϘϞrrow;懒ee;抨pɁϩ\0\0ϯrrow;懑ownArrow;懕erticalBar;戥ǹABLRTaВЪаўѿͼrrowƀ;BUНОТ憓ar;椓pArrow;懵reve;䌑eft˒к\0ц\0ѐightVector;楐eeVector;楞ectorĀ;Bљњ憽ar;楖ightǔѧ\0ѱeeVector;楟ectorĀ;BѺѻ懁ar;楗eeĀ;A҆҇护rrow;憧ĀctҒҗr;쀀𝒟rok;䄐ࠀNTacdfglmopqstuxҽӀӄӋӞӢӧӮӵԡԯԶՒ՝ՠեG;䅊H耻Ð䃐cute耻É䃉ƀaiyӒӗӜron;䄚rc耻Ê䃊;䐭ot;䄖r;쀀𝔈rave耻È䃈ement;戈ĀapӺӾcr;䄒tyɓԆ\0\0ԒmallSquare;旻erySmallSquare;斫ĀgpԦԪon;䄘f;쀀𝔼silon;䎕uĀaiԼՉlĀ;TՂՃ橵ilde;扂librium;懌Āci՗՚r;愰m;橳a;䎗ml耻Ë䃋Āipժկsts;戃onentialE;慇ʀcfiosօֈ֍ֲ׌y;䐤r;쀀𝔉lledɓ֗\0\0֣mallSquare;旼erySmallSquare;斪Ͱֺ\0ֿ\0\0ׄf;쀀𝔽All;戀riertrf;愱cò׋؀JTabcdfgorstר׬ׯ׺؀ؒؖ؛؝أ٬ٲcy;䐃耻>䀾mmaĀ;d׷׸䎓;䏜reve;䄞ƀeiy؇،ؐdil;䄢rc;䄜;䐓ot;䄠r;쀀𝔊;拙pf;쀀𝔾eater̀EFGLSTصلَٖٛ٦qualĀ;Lؾؿ扥ess;招ullEqual;执reater;檢ess;扷lantEqual;橾ilde;扳cr;쀀𝒢;扫ЀAacfiosuڅڋږڛڞڪھۊRDcy;䐪Āctڐڔek;䋇;䁞irc;䄤r;愌lbertSpace;愋ǰگ\0ڲf;愍izontalLine;攀Āctۃۅòکrok;䄦mpńېۘownHumðįqual;扏܀EJOacdfgmnostuۺ۾܃܇܎ܚܞܡܨ݄ݸދޏޕcy;䐕lig;䄲cy;䐁cute耻Í䃍Āiyܓܘrc耻Î䃎;䐘ot;䄰r;愑rave耻Ì䃌ƀ;apܠܯܿĀcgܴܷr;䄪inaryI;慈lieóϝǴ݉\0ݢĀ;eݍݎ戬Āgrݓݘral;戫section;拂isibleĀCTݬݲomma;恣imes;恢ƀgptݿރވon;䄮f;쀀𝕀a;䎙cr;愐ilde;䄨ǫޚ\0ޞcy;䐆l耻Ï䃏ʀcfosuެ޷޼߂ߐĀiyޱ޵rc;䄴;䐙r;쀀𝔍pf;쀀𝕁ǣ߇\0ߌr;쀀𝒥rcy;䐈kcy;䐄΀HJacfosߤߨ߽߬߱ࠂࠈcy;䐥cy;䐌ppa;䎚Āey߶߻dil;䄶;䐚r;쀀𝔎pf;쀀𝕂cr;쀀𝒦րJTaceflmostࠥࠩࠬࡐࡣ঳সে্਷ੇcy;䐉耻<䀼ʀcmnpr࠷࠼ࡁࡄࡍute;䄹bda;䎛g;柪lacetrf;愒r;憞ƀaeyࡗ࡜ࡡron;䄽dil;䄻;䐛Āfsࡨ॰tԀACDFRTUVarࡾࢩࢱࣦ࣠ࣼयज़ΐ४Ānrࢃ࢏gleBracket;柨rowƀ;BR࢙࢚࢞憐ar;懤ightArrow;懆eiling;挈oǵࢷ\0ࣃbleBracket;柦nǔࣈ\0࣒eeVector;楡ectorĀ;Bࣛࣜ懃ar;楙loor;挊ightĀAV࣯ࣵrrow;憔ector;楎Āerँगeƀ;AVउऊऐ抣rrow;憤ector;楚iangleƀ;BEतथऩ抲ar;槏qual;抴pƀDTVषूौownVector;楑eeVector;楠ectorĀ;Bॖॗ憿ar;楘ectorĀ;B॥०憼ar;楒ightáΜs̀EFGLSTॾঋকঝঢভqualGreater;拚ullEqual;扦reater;扶ess;檡lantEqual;橽ilde;扲r;쀀𝔏Ā;eঽা拘ftarrow;懚idot;䄿ƀnpw৔ਖਛgȀLRlr৞৷ਂਐeftĀAR০৬rrow;柵ightArrow;柷ightArrow;柶eftĀarγਊightáοightáϊf;쀀𝕃erĀLRਢਬeftArrow;憙ightArrow;憘ƀchtਾੀੂòࡌ;憰rok;䅁;扪Ѐacefiosuਗ਼੝੠੷੼અઋ઎p;椅y;䐜Ādl੥੯iumSpace;恟lintrf;愳r;쀀𝔐nusPlus;戓pf;쀀𝕄cò੶;䎜ҀJacefostuણધભીଔଙඑ඗ඞcy;䐊cute;䅃ƀaey઴હાron;䅇dil;䅅;䐝ƀgswે૰଎ativeƀMTV૓૟૨ediumSpace;怋hiĀcn૦૘ë૙eryThiî૙tedĀGL૸ଆreaterGreateòٳessLesóੈLine;䀊r;쀀𝔑ȀBnptଢନଷ଺reak;恠BreakingSpace;䂠f;愕ڀ;CDEGHLNPRSTV୕ୖ୪୼஡௫ఄ౞಄ದ೘ൡඅ櫬Āou୛୤ngruent;扢pCap;扭oubleVerticalBar;戦ƀlqxஃஊ஛ement;戉ualĀ;Tஒஓ扠ilde;쀀≂̸ists;戄reater΀;EFGLSTஶஷ஽௉௓௘௥扯qual;扱ullEqual;쀀≧̸reater;쀀≫̸ess;批lantEqual;쀀⩾̸ilde;扵umpń௲௽ownHump;쀀≎̸qual;쀀≏̸eĀfsఊధtTriangleƀ;BEచఛడ拪ar;쀀⧏̸qual;括s̀;EGLSTవశ఼ౄోౘ扮qual;扰reater;扸ess;쀀≪̸lantEqual;쀀⩽̸ilde;扴estedĀGL౨౹reaterGreater;쀀⪢̸essLess;쀀⪡̸recedesƀ;ESಒಓಛ技qual;쀀⪯̸lantEqual;拠ĀeiಫಹverseElement;戌ghtTriangleƀ;BEೋೌ೒拫ar;쀀⧐̸qual;拭ĀquೝഌuareSuĀbp೨೹setĀ;E೰ೳ쀀⊏̸qual;拢ersetĀ;Eഃആ쀀⊐̸qual;拣ƀbcpഓതൎsetĀ;Eഛഞ쀀⊂⃒qual;抈ceedsȀ;ESTലള഻െ抁qual;쀀⪰̸lantEqual;拡ilde;쀀≿̸ersetĀ;E൘൛쀀⊃⃒qual;抉ildeȀ;EFT൮൯൵ൿ扁qual;扄ullEqual;扇ilde;扉erticalBar;戤cr;쀀𝒩ilde耻Ñ䃑;䎝܀Eacdfgmoprstuvලෂ෉෕ෛ෠෧෼ขภยา฿ไlig;䅒cute耻Ó䃓Āiy෎ීrc耻Ô䃔;䐞blac;䅐r;쀀𝔒rave耻Ò䃒ƀaei෮ෲ෶cr;䅌ga;䎩cron;䎟pf;쀀𝕆enCurlyĀDQฎบoubleQuote;怜uote;怘;橔Āclวฬr;쀀𝒪ash耻Ø䃘iŬื฼de耻Õ䃕es;樷ml耻Ö䃖erĀBP๋๠Āar๐๓r;怾acĀek๚๜;揞et;掴arenthesis;揜Ҁacfhilors๿ງຊຏຒດຝະ໼rtialD;戂y;䐟r;쀀𝔓i;䎦;䎠usMinus;䂱Āipຢອncareplanåڝf;愙Ȁ;eio຺ູ໠໤檻cedesȀ;EST່້໏໚扺qual;檯lantEqual;扼ilde;找me;怳Ādp໩໮uct;戏ortionĀ;aȥ໹l;戝Āci༁༆r;쀀𝒫;䎨ȀUfos༑༖༛༟OT耻"䀢r;쀀𝔔pf;愚cr;쀀𝒬؀BEacefhiorsu༾གྷཇའཱིྦྷྪྭ႖ႩႴႾarr;椐G耻®䂮ƀcnrཎནབute;䅔g;柫rĀ;tཛྷཝ憠l;椖ƀaeyཧཬཱron;䅘dil;䅖;䐠Ā;vླྀཹ愜erseĀEUྂྙĀlq྇ྎement;戋uilibrium;懋pEquilibrium;楯r»ཹo;䎡ghtЀACDFTUVa࿁࿫࿳ဢဨၛႇϘĀnr࿆࿒gleBracket;柩rowƀ;BL࿜࿝࿡憒ar;懥eftArrow;懄eiling;按oǵ࿹\0စbleBracket;柧nǔည\0နeeVector;楝ectorĀ;Bဝသ懂ar;楕loor;挋Āerိ၃eƀ;AVဵံြ抢rrow;憦ector;楛iangleƀ;BEၐၑၕ抳ar;槐qual;抵pƀDTVၣၮၸownVector;楏eeVector;楜ectorĀ;Bႂႃ憾ar;楔ectorĀ;B႑႒懀ar;楓Āpuႛ႞f;愝ndImplies;楰ightarrow;懛ĀchႹႼr;愛;憱leDelayed;槴ڀHOacfhimoqstuფჱჷჽᄙᄞᅑᅖᅡᅧᆵᆻᆿĀCcჩხHcy;䐩y;䐨FTcy;䐬cute;䅚ʀ;aeiyᄈᄉᄎᄓᄗ檼ron;䅠dil;䅞rc;䅜;䐡r;쀀𝔖ortȀDLRUᄪᄴᄾᅉownArrow»ОeftArrow»࢚ightArrow»࿝pArrow;憑gma;䎣allCircle;战pf;쀀𝕊ɲᅭ\0\0ᅰt;戚areȀ;ISUᅻᅼᆉᆯ斡ntersection;抓uĀbpᆏᆞsetĀ;Eᆗᆘ抏qual;抑ersetĀ;Eᆨᆩ抐qual;抒nion;抔cr;쀀𝒮ar;拆ȀbcmpᇈᇛሉላĀ;sᇍᇎ拐etĀ;Eᇍᇕqual;抆ĀchᇠህeedsȀ;ESTᇭᇮᇴᇿ扻qual;檰lantEqual;扽ilde;承Tháྌ;我ƀ;esሒሓሣ拑rsetĀ;Eሜም抃qual;抇et»ሓրHRSacfhiorsሾቄ቉ቕ቞ቱቶኟዂወዑORN耻Þ䃞ADE;愢ĀHc቎ቒcy;䐋y;䐦Ābuቚቜ;䀉;䎤ƀaeyብቪቯron;䅤dil;䅢;䐢r;쀀𝔗Āeiቻ኉ǲኀ\0ኇefore;戴a;䎘Ācn኎ኘkSpace;쀀  Space;怉ldeȀ;EFTካኬኲኼ戼qual;扃ullEqual;扅ilde;扈pf;쀀𝕋ipleDot;惛Āctዖዛr;쀀𝒯rok;䅦ૡዷጎጚጦ\0ጬጱ\0\0\0\0\0ጸጽ፷ᎅ\0᏿ᐄᐊᐐĀcrዻጁute耻Ú䃚rĀ;oጇገ憟cir;楉rǣጓ\0጖y;䐎ve;䅬Āiyጞጣrc耻Û䃛;䐣blac;䅰r;쀀𝔘rave耻Ù䃙acr;䅪Ādiፁ፩erĀBPፈ፝Āarፍፐr;䁟acĀekፗፙ;揟et;掵arenthesis;揝onĀ;P፰፱拃lus;抎Āgp፻፿on;䅲f;쀀𝕌ЀADETadps᎕ᎮᎸᏄϨᏒᏗᏳrrowƀ;BDᅐᎠᎤar;椒ownArrow;懅ownArrow;憕quilibrium;楮eeĀ;AᏋᏌ报rrow;憥ownáϳerĀLRᏞᏨeftArrow;憖ightArrow;憗iĀ;lᏹᏺ䏒on;䎥ing;䅮cr;쀀𝒰ilde;䅨ml耻Ü䃜ҀDbcdefosvᐧᐬᐰᐳᐾᒅᒊᒐᒖash;披ar;櫫y;䐒ashĀ;lᐻᐼ抩;櫦Āerᑃᑅ;拁ƀbtyᑌᑐᑺar;怖Ā;iᑏᑕcalȀBLSTᑡᑥᑪᑴar;戣ine;䁼eparator;杘ilde;所ThinSpace;怊r;쀀𝔙pf;쀀𝕍cr;쀀𝒱dash;抪ʀcefosᒧᒬᒱᒶᒼirc;䅴dge;拀r;쀀𝔚pf;쀀𝕎cr;쀀𝒲Ȁfiosᓋᓐᓒᓘr;쀀𝔛;䎞pf;쀀𝕏cr;쀀𝒳ҀAIUacfosuᓱᓵᓹᓽᔄᔏᔔᔚᔠcy;䐯cy;䐇cy;䐮cute耻Ý䃝Āiyᔉᔍrc;䅶;䐫r;쀀𝔜pf;쀀𝕐cr;쀀𝒴ml;䅸ЀHacdefosᔵᔹᔿᕋᕏᕝᕠᕤcy;䐖cute;䅹Āayᕄᕉron;䅽;䐗ot;䅻ǲᕔ\0ᕛoWidtè૙a;䎖r;愨pf;愤cr;쀀𝒵௡ᖃᖊᖐ\0ᖰᖶᖿ\0\0\0\0ᗆᗛᗫᙟ᙭\0ᚕ᚛ᚲᚹ\0ᚾcute耻á䃡reve;䄃̀;Ediuyᖜᖝᖡᖣᖨᖭ戾;쀀∾̳;房rc耻â䃢te肻´̆;䐰lig耻æ䃦Ā;r²ᖺ;쀀𝔞rave耻à䃠ĀepᗊᗖĀfpᗏᗔsym;愵èᗓha;䎱ĀapᗟcĀclᗤᗧr;䄁g;樿ɤᗰ\0\0ᘊʀ;adsvᗺᗻᗿᘁᘇ戧nd;橕;橜lope;橘;橚΀;elmrszᘘᘙᘛᘞᘿᙏᙙ戠;榤e»ᘙsdĀ;aᘥᘦ戡ѡᘰᘲᘴᘶᘸᘺᘼᘾ;榨;榩;榪;榫;榬;榭;榮;榯tĀ;vᙅᙆ戟bĀ;dᙌᙍ抾;榝Āptᙔᙗh;戢»¹arr;捼Āgpᙣᙧon;䄅f;쀀𝕒΀;Eaeiop዁ᙻᙽᚂᚄᚇᚊ;橰cir;橯;扊d;手s;䀧roxĀ;e዁ᚒñᚃing耻å䃥ƀctyᚡᚦᚨr;쀀𝒶;䀪mpĀ;e዁ᚯñʈilde耻ã䃣ml耻ä䃤Āciᛂᛈoninôɲnt;樑ࠀNabcdefiklnoprsu᛭ᛱᜰ᜼ᝃᝈ᝸᝽០៦ᠹᡐᜍ᤽᥈ᥰot;櫭Ācrᛶ᜞kȀcepsᜀᜅᜍᜓong;扌psilon;䏶rime;怵imĀ;e᜚᜛戽q;拍Ŷᜢᜦee;抽edĀ;gᜬᜭ挅e»ᜭrkĀ;t፜᜷brk;掶Āoyᜁᝁ;䐱quo;怞ʀcmprtᝓ᝛ᝡᝤᝨausĀ;eĊĉptyv;榰séᜌnoõēƀahwᝯ᝱ᝳ;䎲;愶een;扬r;쀀𝔟g΀costuvwឍឝឳេ៕៛៞ƀaiuបពរðݠrc;旯p»፱ƀdptឤឨឭot;樀lus;樁imes;樂ɱឹ\0\0ើcup;樆ar;昅riangleĀdu៍្own;施p;斳plus;樄eåᑄåᒭarow;植ƀako៭ᠦᠵĀcn៲ᠣkƀlst៺֫᠂ozenge;槫riangleȀ;dlr᠒᠓᠘᠝斴own;斾eft;旂ight;斸k;搣Ʊᠫ\0ᠳƲᠯ\0ᠱ;斒;斑4;斓ck;斈ĀeoᠾᡍĀ;qᡃᡆ쀀=⃥uiv;쀀≡⃥t;挐Ȁptwxᡙᡞᡧᡬf;쀀𝕓Ā;tᏋᡣom»Ꮜtie;拈؀DHUVbdhmptuvᢅᢖᢪᢻᣗᣛᣬ᣿ᤅᤊᤐᤡȀLRlrᢎᢐᢒᢔ;敗;敔;敖;敓ʀ;DUduᢡᢢᢤᢦᢨ敐;敦;敩;敤;敧ȀLRlrᢳᢵᢷᢹ;敝;敚;敜;教΀;HLRhlrᣊᣋᣍᣏᣑᣓᣕ救;敬;散;敠;敫;敢;敟ox;槉ȀLRlrᣤᣦᣨᣪ;敕;敒;攐;攌ʀ;DUduڽ᣷᣹᣻᣽;敥;敨;攬;攴inus;抟lus;択imes;抠ȀLRlrᤙᤛᤝ᤟;敛;敘;攘;攔΀;HLRhlrᤰᤱᤳᤵᤷ᤻᤹攂;敪;敡;敞;攼;攤;攜Āevģ᥂bar耻¦䂦Ȁceioᥑᥖᥚᥠr;쀀𝒷mi;恏mĀ;e᜚᜜lƀ;bhᥨᥩᥫ䁜;槅sub;柈Ŭᥴ᥾lĀ;e᥹᥺怢t»᥺pƀ;Eeįᦅᦇ;檮Ā;qۜۛೡᦧ\0᧨ᨑᨕᨲ\0ᨷᩐ\0\0᪴\0\0᫁\0\0ᬡᬮ᭍᭒\0᯽\0ᰌƀcpr᦭ᦲ᧝ute;䄇̀;abcdsᦿᧀᧄ᧊᧕᧙戩nd;橄rcup;橉Āau᧏᧒p;橋p;橇ot;橀;쀀∩︀Āeo᧢᧥t;恁îړȀaeiu᧰᧻ᨁᨅǰ᧵\0᧸s;橍on;䄍dil耻ç䃧rc;䄉psĀ;sᨌᨍ橌m;橐ot;䄋ƀdmnᨛᨠᨦil肻¸ƭptyv;榲t脀¢;eᨭᨮ䂢räƲr;쀀𝔠ƀceiᨽᩀᩍy;䑇ckĀ;mᩇᩈ朓ark»ᩈ;䏇r΀;Ecefms᩟᩠ᩢᩫ᪤᪪᪮旋;槃ƀ;elᩩᩪᩭ䋆q;扗eɡᩴ\0\0᪈rrowĀlr᩼᪁eft;憺ight;憻ʀRSacd᪒᪔᪖᪚᪟»ཇ;擈st;抛irc;抚ash;抝nint;樐id;櫯cir;槂ubsĀ;u᪻᪼晣it»᪼ˬ᫇᫔᫺\0ᬊonĀ;eᫍᫎ䀺Ā;qÇÆɭ᫙\0\0᫢aĀ;t᫞᫟䀬;䁀ƀ;fl᫨᫩᫫戁îᅠeĀmx᫱᫶ent»᫩eóɍǧ᫾\0ᬇĀ;dኻᬂot;橭nôɆƀfryᬐᬔᬗ;쀀𝕔oäɔ脀©;sŕᬝr;愗Āaoᬥᬩrr;憵ss;朗Ācuᬲᬷr;쀀𝒸Ābpᬼ᭄Ā;eᭁᭂ櫏;櫑Ā;eᭉᭊ櫐;櫒dot;拯΀delprvw᭠᭬᭷ᮂᮬᯔ᯹arrĀlr᭨᭪;椸;椵ɰ᭲\0\0᭵r;拞c;拟arrĀ;p᭿ᮀ憶;椽̀;bcdosᮏᮐᮖᮡᮥᮨ截rcap;橈Āauᮛᮞp;橆p;橊ot;抍r;橅;쀀∪︀Ȁalrv᮵ᮿᯞᯣrrĀ;mᮼᮽ憷;椼yƀevwᯇᯔᯘqɰᯎ\0\0ᯒreã᭳uã᭵ee;拎edge;拏en耻¤䂤earrowĀlrᯮ᯳eft»ᮀight»ᮽeäᯝĀciᰁᰇoninôǷnt;戱lcty;挭ঀAHabcdefhijlorstuwz᰸᰻᰿ᱝᱩᱵᲊᲞᲬᲷ᳻᳿ᴍᵻᶑᶫᶻ᷆᷍rò΁ar;楥Ȁglrs᱈ᱍ᱒᱔ger;怠eth;愸òᄳhĀ;vᱚᱛ怐»ऊūᱡᱧarow;椏aã̕Āayᱮᱳron;䄏;䐴ƀ;ao̲ᱼᲄĀgrʿᲁr;懊tseq;橷ƀglmᲑᲔᲘ耻°䂰ta;䎴ptyv;榱ĀirᲣᲨsht;楿;쀀𝔡arĀlrᲳᲵ»ࣜ»သʀaegsv᳂͸᳖᳜᳠mƀ;oș᳊᳔ndĀ;ș᳑uit;晦amma;䏝in;拲ƀ;io᳧᳨᳸䃷de脀÷;o᳧ᳰntimes;拇nø᳷cy;䑒cɯᴆ\0\0ᴊrn;挞op;挍ʀlptuwᴘᴝᴢᵉᵕlar;䀤f;쀀𝕕ʀ;emps̋ᴭᴷᴽᵂqĀ;d͒ᴳot;扑inus;戸lus;戔quare;抡blebarwedgåúnƀadhᄮᵝᵧownarrowóᲃarpoonĀlrᵲᵶefôᲴighôᲶŢᵿᶅkaro÷གɯᶊ\0\0ᶎrn;挟op;挌ƀcotᶘᶣᶦĀryᶝᶡ;쀀𝒹;䑕l;槶rok;䄑Ādrᶰᶴot;拱iĀ;fᶺ᠖斿Āah᷀᷃ròЩaòྦangle;榦Āci᷒ᷕy;䑟grarr;柿ऀDacdefglmnopqrstuxḁḉḙḸոḼṉṡṾấắẽỡἪἷὄ὎὚ĀDoḆᴴoôᲉĀcsḎḔute耻é䃩ter;橮ȀaioyḢḧḱḶron;䄛rĀ;cḭḮ扖耻ê䃪lon;払;䑍ot;䄗ĀDrṁṅot;扒;쀀𝔢ƀ;rsṐṑṗ檚ave耻è䃨Ā;dṜṝ檖ot;檘Ȁ;ilsṪṫṲṴ檙nters;揧;愓Ā;dṹṺ檕ot;檗ƀapsẅẉẗcr;䄓tyƀ;svẒẓẕ戅et»ẓpĀ1;ẝẤĳạả;怄;怅怃ĀgsẪẬ;䅋p;怂ĀgpẴẸon;䄙f;쀀𝕖ƀalsỄỎỒrĀ;sỊị拕l;槣us;橱iƀ;lvỚớở䎵on»ớ;䏵ȀcsuvỪỳἋἣĀioữḱrc»Ḯɩỹ\0\0ỻíՈantĀglἂἆtr»ṝess»Ṻƀaeiἒ἖Ἒls;䀽st;扟vĀ;DȵἠD;橸parsl;槥ĀDaἯἳot;打rr;楱ƀcdiἾὁỸr;愯oô͒ĀahὉὋ;䎷耻ð䃰Āmrὓὗl耻ë䃫o;悬ƀcipὡὤὧl;䀡sôծĀeoὬὴctatioîՙnentialåչৡᾒ\0ᾞ\0ᾡᾧ\0\0ῆῌ\0ΐ\0ῦῪ \0 ⁚llingdotseñṄy;䑄male;晀ƀilrᾭᾳ῁lig;耀ﬃɩᾹ\0\0᾽g;耀ﬀig;耀ﬄ;쀀𝔣lig;耀ﬁlig;쀀fjƀaltῙ῜ῡt;晭ig;耀ﬂns;斱of;䆒ǰ΅\0ῳf;쀀𝕗ĀakֿῷĀ;vῼ´拔;櫙artint;樍Āao‌⁕Ācs‑⁒α‚‰‸⁅⁈\0⁐β•‥‧‪‬\0‮耻½䂽;慓耻¼䂼;慕;慙;慛Ƴ‴\0‶;慔;慖ʴ‾⁁\0\0⁃耻¾䂾;慗;慜5;慘ƶ⁌\0⁎;慚;慝8;慞l;恄wn;挢cr;쀀𝒻ࢀEabcdefgijlnorstv₂₉₟₥₰₴⃰⃵⃺⃿℃ℒℸ̗ℾ⅒↞Ā;lٍ₇;檌ƀcmpₐₕ₝ute;䇵maĀ;dₜ᳚䎳;檆reve;䄟Āiy₪₮rc;䄝;䐳ot;䄡Ȁ;lqsؾق₽⃉ƀ;qsؾٌ⃄lanô٥Ȁ;cdl٥⃒⃥⃕c;檩otĀ;o⃜⃝檀Ā;l⃢⃣檂;檄Ā;e⃪⃭쀀⋛︀s;檔r;쀀𝔤Ā;gٳ؛mel;愷cy;䑓Ȁ;Eajٚℌℎℐ;檒;檥;檤ȀEaesℛℝ℩ℴ;扩pĀ;p℣ℤ檊rox»ℤĀ;q℮ℯ檈Ā;q℮ℛim;拧pf;쀀𝕘Āci⅃ⅆr;愊mƀ;el٫ⅎ⅐;檎;檐茀>;cdlqr׮ⅠⅪⅮⅳⅹĀciⅥⅧ;檧r;橺ot;拗Par;榕uest;橼ʀadelsↄⅪ←ٖ↛ǰ↉\0↎proø₞r;楸qĀlqؿ↖lesó₈ií٫Āen↣↭rtneqq;쀀≩︀Å↪ԀAabcefkosy⇄⇇⇱⇵⇺∘∝∯≨≽ròΠȀilmr⇐⇔⇗⇛rsðᒄf»․ilôکĀdr⇠⇤cy;䑊ƀ;cwࣴ⇫⇯ir;楈;憭ar;意irc;䄥ƀalr∁∎∓rtsĀ;u∉∊晥it»∊lip;怦con;抹r;쀀𝔥sĀew∣∩arow;椥arow;椦ʀamopr∺∾≃≞≣rr;懿tht;戻kĀlr≉≓eftarrow;憩ightarrow;憪f;쀀𝕙bar;怕ƀclt≯≴≸r;쀀𝒽asè⇴rok;䄧Ābp⊂⊇ull;恃hen»ᱛૡ⊣\0⊪\0⊸⋅⋎\0⋕⋳\0\0⋸⌢⍧⍢⍿\0⎆⎪⎴cute耻í䃭ƀ;iyݱ⊰⊵rc耻î䃮;䐸Ācx⊼⊿y;䐵cl耻¡䂡ĀfrΟ⋉;쀀𝔦rave耻ì䃬Ȁ;inoܾ⋝⋩⋮Āin⋢⋦nt;樌t;戭fin;槜ta;愩lig;䄳ƀaop⋾⌚⌝ƀcgt⌅⌈⌗r;䄫ƀelpܟ⌏⌓inåގarôܠh;䄱f;抷ed;䆵ʀ;cfotӴ⌬⌱⌽⍁are;愅inĀ;t⌸⌹戞ie;槝doô⌙ʀ;celpݗ⍌⍐⍛⍡al;抺Āgr⍕⍙eróᕣã⍍arhk;樗rod;樼Ȁcgpt⍯⍲⍶⍻y;䑑on;䄯f;쀀𝕚a;䎹uest耻¿䂿Āci⎊⎏r;쀀𝒾nʀ;EdsvӴ⎛⎝⎡ӳ;拹ot;拵Ā;v⎦⎧拴;拳Ā;iݷ⎮lde;䄩ǫ⎸\0⎼cy;䑖l耻ï䃯̀cfmosu⏌⏗⏜⏡⏧⏵Āiy⏑⏕rc;䄵;䐹r;쀀𝔧ath;䈷pf;쀀𝕛ǣ⏬\0⏱r;쀀𝒿rcy;䑘kcy;䑔Ѐacfghjos␋␖␢␧␭␱␵␻ppaĀ;v␓␔䎺;䏰Āey␛␠dil;䄷;䐺r;쀀𝔨reen;䄸cy;䑅cy;䑜pf;쀀𝕜cr;쀀𝓀஀ABEHabcdefghjlmnoprstuv⑰⒁⒆⒍⒑┎┽╚▀♎♞♥♹♽⚚⚲⛘❝❨➋⟀⠁⠒ƀart⑷⑺⑼rò৆òΕail;椛arr;椎Ā;gঔ⒋;檋ar;楢ॣ⒥\0⒪\0⒱\0\0\0\0\0⒵Ⓔ\0ⓆⓈⓍ\0⓹ute;䄺mptyv;榴raîࡌbda;䎻gƀ;dlࢎⓁⓃ;榑åࢎ;檅uo耻«䂫rЀ;bfhlpst࢙ⓞⓦⓩ⓫⓮⓱⓵Ā;f࢝ⓣs;椟s;椝ë≒p;憫l;椹im;楳l;憢ƀ;ae⓿─┄檫il;椙Ā;s┉┊檭;쀀⪭︀ƀabr┕┙┝rr;椌rk;杲Āak┢┬cĀek┨┪;䁻;䁛Āes┱┳;榋lĀdu┹┻;榏;榍Ȁaeuy╆╋╖╘ron;䄾Ādi═╔il;䄼ìࢰâ┩;䐻Ȁcqrs╣╦╭╽a;椶uoĀ;rนᝆĀdu╲╷har;楧shar;楋h;憲ʀ;fgqs▋▌উ◳◿扤tʀahlrt▘▤▷◂◨rrowĀ;t࢙□aé⓶arpoonĀdu▯▴own»њp»०eftarrows;懇ightƀahs◍◖◞rrowĀ;sࣴࢧarpoonó྘quigarro÷⇰hreetimes;拋ƀ;qs▋ও◺lanôবʀ;cdgsব☊☍☝☨c;檨otĀ;o☔☕橿Ā;r☚☛檁;檃Ā;e☢☥쀀⋚︀s;檓ʀadegs☳☹☽♉♋pproøⓆot;拖qĀgq♃♅ôউgtò⒌ôছiíলƀilr♕࣡♚sht;楼;쀀𝔩Ā;Eজ♣;檑š♩♶rĀdu▲♮Ā;l॥♳;楪lk;斄cy;䑙ʀ;achtੈ⚈⚋⚑⚖rò◁orneòᴈard;楫ri;旺Āio⚟⚤dot;䅀ustĀ;a⚬⚭掰che»⚭ȀEaes⚻⚽⛉⛔;扨pĀ;p⛃⛄檉rox»⛄Ā;q⛎⛏檇Ā;q⛎⚻im;拦Ѐabnoptwz⛩⛴⛷✚✯❁❇❐Ānr⛮⛱g;柬r;懽rëࣁgƀlmr⛿✍✔eftĀar০✇ightá৲apsto;柼ightá৽parrowĀlr✥✩efô⓭ight;憬ƀafl✶✹✽r;榅;쀀𝕝us;樭imes;樴š❋❏st;戗áፎƀ;ef❗❘᠀旊nge»❘arĀ;l❤❥䀨t;榓ʀachmt❳❶❼➅➇ròࢨorneòᶌarĀ;d྘➃;業;怎ri;抿̀achiqt➘➝ੀ➢➮➻quo;怹r;쀀𝓁mƀ;egল➪➬;檍;檏Ābu┪➳oĀ;rฟ➹;怚rok;䅂萀<;cdhilqrࠫ⟒☹⟜⟠⟥⟪⟰Āci⟗⟙;檦r;橹reå◲mes;拉arr;楶uest;橻ĀPi⟵⟹ar;榖ƀ;ef⠀भ᠛旃rĀdu⠇⠍shar;楊har;楦Āen⠗⠡rtneqq;쀀≨︀Å⠞܀Dacdefhilnopsu⡀⡅⢂⢎⢓⢠⢥⢨⣚⣢⣤ઃ⣳⤂Dot;戺Ȁclpr⡎⡒⡣⡽r耻¯䂯Āet⡗⡙;時Ā;e⡞⡟朠se»⡟Ā;sျ⡨toȀ;dluျ⡳⡷⡻owîҌefôएðᏑker;斮Āoy⢇⢌mma;権;䐼ash;怔asuredangle»ᘦr;쀀𝔪o;愧ƀcdn⢯⢴⣉ro耻µ䂵Ȁ;acdᑤ⢽⣀⣄sôᚧir;櫰ot肻·Ƶusƀ;bd⣒ᤃ⣓戒Ā;uᴼ⣘;横ţ⣞⣡p;櫛ò−ðઁĀdp⣩⣮els;抧f;쀀𝕞Āct⣸⣽r;쀀𝓂pos»ᖝƀ;lm⤉⤊⤍䎼timap;抸ఀGLRVabcdefghijlmoprstuvw⥂⥓⥾⦉⦘⧚⧩⨕⨚⩘⩝⪃⪕⪤⪨⬄⬇⭄⭿⮮ⰴⱧⱼ⳩Āgt⥇⥋;쀀⋙̸Ā;v⥐௏쀀≫⃒ƀelt⥚⥲⥶ftĀar⥡⥧rrow;懍ightarrow;懎;쀀⋘̸Ā;v⥻ే쀀≪⃒ightarrow;懏ĀDd⦎⦓ash;抯ash;抮ʀbcnpt⦣⦧⦬⦱⧌la»˞ute;䅄g;쀀∠⃒ʀ;Eiop඄⦼⧀⧅⧈;쀀⩰̸d;쀀≋̸s;䅉roø඄urĀ;a⧓⧔普lĀ;s⧓ସǳ⧟\0⧣p肻 ଷmpĀ;e௹ఀʀaeouy⧴⧾⨃⨐⨓ǰ⧹\0⧻;橃on;䅈dil;䅆ngĀ;dൾ⨊ot;쀀⩭̸p;橂;䐽ash;怓΀;Aadqsxஒ⨩⨭⨻⩁⩅⩐rr;懗rĀhr⨳⨶k;椤Ā;oᏲᏰot;쀀≐̸uiöୣĀei⩊⩎ar;椨í஘istĀ;s஠டr;쀀𝔫ȀEest௅⩦⩹⩼ƀ;qs஼⩭௡ƀ;qs஼௅⩴lanô௢ií௪Ā;rஶ⪁»ஷƀAap⪊⪍⪑rò⥱rr;憮ar;櫲ƀ;svྍ⪜ྌĀ;d⪡⪢拼;拺cy;䑚΀AEadest⪷⪺⪾⫂⫅⫶⫹rò⥦;쀀≦̸rr;憚r;急Ȁ;fqs఻⫎⫣⫯tĀar⫔⫙rro÷⫁ightarro÷⪐ƀ;qs఻⪺⫪lanôౕĀ;sౕ⫴»శiíౝĀ;rవ⫾iĀ;eచథiäඐĀpt⬌⬑f;쀀𝕟膀¬;in⬙⬚⬶䂬nȀ;Edvஉ⬤⬨⬮;쀀⋹̸ot;쀀⋵̸ǡஉ⬳⬵;拷;拶iĀ;vಸ⬼ǡಸ⭁⭃;拾;拽ƀaor⭋⭣⭩rȀ;ast୻⭕⭚⭟lleì୻l;쀀⫽⃥;쀀∂̸lint;樔ƀ;ceಒ⭰⭳uåಥĀ;cಘ⭸Ā;eಒ⭽ñಘȀAait⮈⮋⮝⮧rò⦈rrƀ;cw⮔⮕⮙憛;쀀⤳̸;쀀↝̸ghtarrow»⮕riĀ;eೋೖ΀chimpqu⮽⯍⯙⬄୸⯤⯯Ȁ;cerല⯆ഷ⯉uå൅;쀀𝓃ortɭ⬅\0\0⯖ará⭖mĀ;e൮⯟Ā;q൴൳suĀbp⯫⯭å೸åഋƀbcp⯶ⰑⰙȀ;Ees⯿ⰀഢⰄ抄;쀀⫅̸etĀ;eഛⰋqĀ;qണⰀcĀ;eലⰗñസȀ;EesⰢⰣൟⰧ抅;쀀⫆̸etĀ;e൘ⰮqĀ;qൠⰣȀgilrⰽⰿⱅⱇìௗlde耻ñ䃱çృiangleĀlrⱒⱜeftĀ;eచⱚñదightĀ;eೋⱥñ೗Ā;mⱬⱭ䎽ƀ;esⱴⱵⱹ䀣ro;愖p;怇ҀDHadgilrsⲏⲔⲙⲞⲣⲰⲶⳓⳣash;抭arr;椄p;쀀≍⃒ash;抬ĀetⲨⲬ;쀀≥⃒;쀀>⃒nfin;槞ƀAetⲽⳁⳅrr;椂;쀀≤⃒Ā;rⳊⳍ쀀<⃒ie;쀀⊴⃒ĀAtⳘⳜrr;椃rie;쀀⊵⃒im;쀀∼⃒ƀAan⳰⳴ⴂrr;懖rĀhr⳺⳽k;椣Ā;oᏧᏥear;椧ቓ᪕\0\0\0\0\0\0\0\0\0\0\0\0\0ⴭ\0ⴸⵈⵠⵥ⵲ⶄᬇ\0\0ⶍⶫ\0ⷈⷎ\0ⷜ⸙⸫⸾⹃Ācsⴱ᪗ute耻ó䃳ĀiyⴼⵅrĀ;c᪞ⵂ耻ô䃴;䐾ʀabios᪠ⵒⵗǈⵚlac;䅑v;樸old;榼lig;䅓Ācr⵩⵭ir;榿;쀀𝔬ͯ⵹\0\0⵼\0ⶂn;䋛ave耻ò䃲;槁Ābmⶈ෴ar;榵Ȁacitⶕ⶘ⶥⶨrò᪀Āir⶝ⶠr;榾oss;榻nå๒;槀ƀaeiⶱⶵⶹcr;䅍ga;䏉ƀcdnⷀⷅǍron;䎿;榶pf;쀀𝕠ƀaelⷔ⷗ǒr;榷rp;榹΀;adiosvⷪⷫⷮ⸈⸍⸐⸖戨rò᪆Ȁ;efmⷷⷸ⸂⸅橝rĀ;oⷾⷿ愴f»ⷿ耻ª䂪耻º䂺gof;抶r;橖lope;橗;橛ƀclo⸟⸡⸧ò⸁ash耻ø䃸l;折iŬⸯ⸴de耻õ䃵esĀ;aǛ⸺s;樶ml耻ö䃶bar;挽ૡ⹞\0⹽\0⺀⺝\0⺢⺹\0\0⻋ຜ\0⼓\0\0⼫⾼\0⿈rȀ;astЃ⹧⹲຅脀¶;l⹭⹮䂶leìЃɩ⹸\0\0⹻m;櫳;櫽y;䐿rʀcimpt⺋⺏⺓ᡥ⺗nt;䀥od;䀮il;怰enk;怱r;쀀𝔭ƀimo⺨⺰⺴Ā;v⺭⺮䏆;䏕maô੶ne;明ƀ;tv⺿⻀⻈䏀chfork»´;䏖Āau⻏⻟nĀck⻕⻝kĀ;h⇴⻛;愎ö⇴sҀ;abcdemst⻳⻴ᤈ⻹⻽⼄⼆⼊⼎䀫cir;樣ir;樢Āouᵀ⼂;樥;橲n肻±ຝim;樦wo;樧ƀipu⼙⼠⼥ntint;樕f;쀀𝕡nd耻£䂣Ԁ;Eaceinosu່⼿⽁⽄⽇⾁⾉⾒⽾⾶;檳p;檷uå໙Ā;c໎⽌̀;acens່⽙⽟⽦⽨⽾pproø⽃urlyeñ໙ñ໎ƀaes⽯⽶⽺pprox;檹qq;檵im;拨iíໟmeĀ;s⾈ຮ怲ƀEas⽸⾐⽺ð⽵ƀdfp໬⾙⾯ƀals⾠⾥⾪lar;挮ine;挒urf;挓Ā;t໻⾴ï໻rel;抰Āci⿀⿅r;쀀𝓅;䏈ncsp;怈̀fiopsu⿚⋢⿟⿥⿫⿱r;쀀𝔮pf;쀀𝕢rime;恗cr;쀀𝓆ƀaeo⿸〉〓tĀei⿾々rnionóڰnt;樖stĀ;e【】䀿ñἙô༔઀ABHabcdefhilmnoprstux぀けさすムㄎㄫㅇㅢㅲㆎ㈆㈕㈤㈩㉘㉮㉲㊐㊰㊷ƀartぇおがròႳòϝail;検aròᱥar;楤΀cdenqrtとふへみわゔヌĀeuねぱ;쀀∽̱te;䅕iãᅮmptyv;榳gȀ;del࿑らるろ;榒;榥å࿑uo耻»䂻rր;abcfhlpstw࿜ガクシスゼゾダッデナp;極Ā;f࿠ゴs;椠;椳s;椞ë≝ð✮l;楅im;楴l;憣;憝Āaiパフil;椚oĀ;nホボ戶aló༞ƀabrョリヮrò៥rk;杳ĀakンヽcĀekヹ・;䁽;䁝Āes㄂㄄;榌lĀduㄊㄌ;榎;榐Ȁaeuyㄗㄜㄧㄩron;䅙Ādiㄡㄥil;䅗ì࿲âヺ;䑀Ȁclqsㄴㄷㄽㅄa;椷dhar;楩uoĀ;rȎȍh;憳ƀacgㅎㅟངlȀ;ipsླྀㅘㅛႜnåႻarôྩt;断ƀilrㅩဣㅮsht;楽;쀀𝔯ĀaoㅷㆆrĀduㅽㅿ»ѻĀ;l႑ㆄ;楬Ā;vㆋㆌ䏁;䏱ƀgns㆕ㇹㇼht̀ahlrstㆤㆰ㇂㇘㇤㇮rrowĀ;t࿜ㆭaéトarpoonĀduㆻㆿowîㅾp»႒eftĀah㇊㇐rrowó࿪arpoonóՑightarrows;應quigarro÷ニhreetimes;拌g;䋚ingdotseñἲƀahm㈍㈐㈓rò࿪aòՑ;怏oustĀ;a㈞㈟掱che»㈟mid;櫮Ȁabpt㈲㈽㉀㉒Ānr㈷㈺g;柭r;懾rëဃƀafl㉇㉊㉎r;榆;쀀𝕣us;樮imes;樵Āap㉝㉧rĀ;g㉣㉤䀩t;榔olint;樒arò㇣Ȁachq㉻㊀Ⴜ㊅quo;怺r;쀀𝓇Ābu・㊊oĀ;rȔȓƀhir㊗㊛㊠reåㇸmes;拊iȀ;efl㊪ၙᠡ㊫方tri;槎luhar;楨;愞ൡ㋕㋛㋟㌬㌸㍱\0㍺㎤\0\0㏬㏰\0㐨㑈㑚㒭㒱㓊㓱\0㘖\0\0㘳cute;䅛quï➺Ԁ;Eaceinpsyᇭ㋳㋵㋿㌂㌋㌏㌟㌦㌩;檴ǰ㋺\0㋼;檸on;䅡uåᇾĀ;dᇳ㌇il;䅟rc;䅝ƀEas㌖㌘㌛;檶p;檺im;择olint;樓iíሄ;䑁otƀ;be㌴ᵇ㌵担;橦΀Aacmstx㍆㍊㍗㍛㍞㍣㍭rr;懘rĀhr㍐㍒ë∨Ā;oਸ਼਴t耻§䂧i;䀻war;椩mĀin㍩ðnuóñt;朶rĀ;o㍶⁕쀀𝔰Ȁacoy㎂㎆㎑㎠rp;景Āhy㎋㎏cy;䑉;䑈rtɭ㎙\0\0㎜iäᑤaraì⹯耻­䂭Āgm㎨㎴maƀ;fv㎱㎲㎲䏃;䏂Ѐ;deglnprካ㏅㏉㏎㏖㏞㏡㏦ot;橪Ā;q኱ኰĀ;E㏓㏔檞;檠Ā;E㏛㏜檝;檟e;扆lus;樤arr;楲aròᄽȀaeit㏸㐈㐏㐗Āls㏽㐄lsetmé㍪hp;樳parsl;槤Ādlᑣ㐔e;挣Ā;e㐜㐝檪Ā;s㐢㐣檬;쀀⪬︀ƀflp㐮㐳㑂tcy;䑌Ā;b㐸㐹䀯Ā;a㐾㐿槄r;挿f;쀀𝕤aĀdr㑍ЂesĀ;u㑔㑕晠it»㑕ƀcsu㑠㑹㒟Āau㑥㑯pĀ;sᆈ㑫;쀀⊓︀pĀ;sᆴ㑵;쀀⊔︀uĀbp㑿㒏ƀ;esᆗᆜ㒆etĀ;eᆗ㒍ñᆝƀ;esᆨᆭ㒖etĀ;eᆨ㒝ñᆮƀ;afᅻ㒦ְrť㒫ֱ»ᅼaròᅈȀcemt㒹㒾㓂㓅r;쀀𝓈tmîñiì㐕aræᆾĀar㓎㓕rĀ;f㓔ឿ昆Āan㓚㓭ightĀep㓣㓪psiloîỠhé⺯s»⡒ʀbcmnp㓻㕞ሉ㖋㖎Ҁ;Edemnprs㔎㔏㔑㔕㔞㔣㔬㔱㔶抂;櫅ot;檽Ā;dᇚ㔚ot;櫃ult;櫁ĀEe㔨㔪;櫋;把lus;檿arr;楹ƀeiu㔽㕒㕕tƀ;en㔎㕅㕋qĀ;qᇚ㔏eqĀ;q㔫㔨m;櫇Ābp㕚㕜;櫕;櫓c̀;acensᇭ㕬㕲㕹㕻㌦pproø㋺urlyeñᇾñᇳƀaes㖂㖈㌛pproø㌚qñ㌗g;晪ڀ123;Edehlmnps㖩㖬㖯ሜ㖲㖴㗀㗉㗕㗚㗟㗨㗭耻¹䂹耻²䂲耻³䂳;櫆Āos㖹㖼t;檾ub;櫘Ā;dሢ㗅ot;櫄sĀou㗏㗒l;柉b;櫗arr;楻ult;櫂ĀEe㗤㗦;櫌;抋lus;櫀ƀeiu㗴㘉㘌tƀ;enሜ㗼㘂qĀ;qሢ㖲eqĀ;q㗧㗤m;櫈Ābp㘑㘓;櫔;櫖ƀAan㘜㘠㘭rr;懙rĀhr㘦㘨ë∮Ā;oਫ਩war;椪lig耻ß䃟௡㙑㙝㙠ዎ㙳㙹\0㙾㛂\0\0\0\0\0㛛㜃\0㜉㝬\0\0\0㞇ɲ㙖\0\0㙛get;挖;䏄rë๟ƀaey㙦㙫㙰ron;䅥dil;䅣;䑂lrec;挕r;쀀𝔱Ȁeiko㚆㚝㚵㚼ǲ㚋\0㚑eĀ4fኄኁaƀ;sv㚘㚙㚛䎸ym;䏑Ācn㚢㚲kĀas㚨㚮pproø዁im»ኬsðኞĀas㚺㚮ð዁rn耻þ䃾Ǭ̟㛆⋧es膀×;bd㛏㛐㛘䃗Ā;aᤏ㛕r;樱;樰ƀeps㛡㛣㜀á⩍Ȁ;bcf҆㛬㛰㛴ot;挶ir;櫱Ā;o㛹㛼쀀𝕥rk;櫚á㍢rime;怴ƀaip㜏㜒㝤dåቈ΀adempst㜡㝍㝀㝑㝗㝜㝟ngleʀ;dlqr㜰㜱㜶㝀㝂斵own»ᶻeftĀ;e⠀㜾ñम;扜ightĀ;e㊪㝋ñၚot;旬inus;樺lus;樹b;槍ime;樻ezium;揢ƀcht㝲㝽㞁Āry㝷㝻;쀀𝓉;䑆cy;䑛rok;䅧Āio㞋㞎xô᝷headĀlr㞗㞠eftarro÷ࡏightarrow»ཝऀAHabcdfghlmoprstuw㟐㟓㟗㟤㟰㟼㠎㠜㠣㠴㡑㡝㡫㢩㣌㣒㣪㣶ròϭar;楣Ācr㟜㟢ute耻ú䃺òᅐrǣ㟪\0㟭y;䑞ve;䅭Āiy㟵㟺rc耻û䃻;䑃ƀabh㠃㠆㠋ròᎭlac;䅱aòᏃĀir㠓㠘sht;楾;쀀𝔲rave耻ù䃹š㠧㠱rĀlr㠬㠮»ॗ»ႃlk;斀Āct㠹㡍ɯ㠿\0\0㡊rnĀ;e㡅㡆挜r»㡆op;挏ri;旸Āal㡖㡚cr;䅫肻¨͉Āgp㡢㡦on;䅳f;쀀𝕦̀adhlsuᅋ㡸㡽፲㢑㢠ownáᎳarpoonĀlr㢈㢌efô㠭ighô㠯iƀ;hl㢙㢚㢜䏅»ᏺon»㢚parrows;懈ƀcit㢰㣄㣈ɯ㢶\0\0㣁rnĀ;e㢼㢽挝r»㢽op;挎ng;䅯ri;旹cr;쀀𝓊ƀdir㣙㣝㣢ot;拰lde;䅩iĀ;f㜰㣨»᠓Āam㣯㣲rò㢨l耻ü䃼angle;榧ހABDacdeflnoprsz㤜㤟㤩㤭㦵㦸㦽㧟㧤㧨㧳㧹㧽㨁㨠ròϷarĀ;v㤦㤧櫨;櫩asèϡĀnr㤲㤷grt;榜΀eknprst㓣㥆㥋㥒㥝㥤㦖appá␕othinçẖƀhir㓫⻈㥙opô⾵Ā;hᎷ㥢ïㆍĀiu㥩㥭gmá㎳Ābp㥲㦄setneqĀ;q㥽㦀쀀⊊︀;쀀⫋︀setneqĀ;q㦏㦒쀀⊋︀;쀀⫌︀Āhr㦛㦟etá㚜iangleĀlr㦪㦯eft»थight»ၑy;䐲ash»ံƀelr㧄㧒㧗ƀ;beⷪ㧋㧏ar;抻q;扚lip;拮Ābt㧜ᑨaòᑩr;쀀𝔳tré㦮suĀbp㧯㧱»ജ»൙pf;쀀𝕧roð໻tré㦴Ācu㨆㨋r;쀀𝓋Ābp㨐㨘nĀEe㦀㨖»㥾nĀEe㦒㨞»㦐igzag;榚΀cefoprs㨶㨻㩖㩛㩔㩡㩪irc;䅵Ādi㩀㩑Ābg㩅㩉ar;機eĀ;qᗺ㩏;扙erp;愘r;쀀𝔴pf;쀀𝕨Ā;eᑹ㩦atèᑹcr;쀀𝓌ૣណ㪇\0㪋\0㪐㪛\0\0㪝㪨㪫㪯\0\0㫃㫎\0㫘ៜ៟tré៑r;쀀𝔵ĀAa㪔㪗ròσrò৶;䎾ĀAa㪡㪤ròθrò৫að✓is;拻ƀdptឤ㪵㪾Āfl㪺ឩ;쀀𝕩imåឲĀAa㫇㫊ròώròਁĀcq㫒ីr;쀀𝓍Āpt៖㫜ré។Ѐacefiosu㫰㫽㬈㬌㬑㬕㬛㬡cĀuy㫶㫻te耻ý䃽;䑏Āiy㬂㬆rc;䅷;䑋n耻¥䂥r;쀀𝔶cy;䑗pf;쀀𝕪cr;쀀𝓎Ācm㬦㬩y;䑎l耻ÿ䃿Ԁacdefhiosw㭂㭈㭔㭘㭤㭩㭭㭴㭺㮀cute;䅺Āay㭍㭒ron;䅾;䐷ot;䅼Āet㭝㭡træᕟa;䎶r;쀀𝔷cy;䐶grarr;懝pf;쀀𝕫cr;쀀𝓏Ājn㮅㮇;怍j;怌'.split("").map(n=>n.charCodeAt(0))),vue=new Uint16Array("Ȁaglq	\x1Bɭ\0\0p;䀦os;䀧t;䀾t;䀼uot;䀢".split("").map(n=>n.charCodeAt(0)));var Iy;const mue=new Map([[0,65533],[128,8364],[130,8218],[131,402],[132,8222],[133,8230],[134,8224],[135,8225],[136,710],[137,8240],[138,352],[139,8249],[140,338],[142,381],[145,8216],[146,8217],[147,8220],[148,8221],[149,8226],[150,8211],[151,8212],[152,732],[153,8482],[154,353],[155,8250],[156,339],[158,382],[159,376]]),yue=(Iy=String.fromCodePoint)!==null&&Iy!==void 0?Iy:function(n){let e="";return n>65535&&(n-=65536,e+=String.fromCharCode(n>>>10&1023|55296),n=56320|n&1023),e+=String.fromCharCode(n),e};function bue(n){var e;return n>=55296&&n<=57343||n>1114111?65533:(e=mue.get(n))!==null&&e!==void 0?e:n}var sn;(function(n){n[n.NUM=35]="NUM",n[n.SEMI=59]="SEMI",n[n.EQUALS=61]="EQUALS",n[n.ZERO=48]="ZERO",n[n.NINE=57]="NINE",n[n.LOWER_A=97]="LOWER_A",n[n.LOWER_F=102]="LOWER_F",n[n.LOWER_X=120]="LOWER_X",n[n.LOWER_Z=122]="LOWER_Z",n[n.UPPER_A=65]="UPPER_A",n[n.UPPER_F=70]="UPPER_F",n[n.UPPER_Z=90]="UPPER_Z"})(sn||(sn={}));const xue=32;var Xa;(function(n){n[n.VALUE_LENGTH=49152]="VALUE_LENGTH",n[n.BRANCH_LENGTH=16256]="BRANCH_LENGTH",n[n.JUMP_TABLE=127]="JUMP_TABLE"})(Xa||(Xa={}));function m2(n){return n>=sn.ZERO&&n<=sn.NINE}function wue(n){return n>=sn.UPPER_A&&n<=sn.UPPER_F||n>=sn.LOWER_A&&n<=sn.LOWER_F}function Eue(n){return n>=sn.UPPER_A&&n<=sn.UPPER_Z||n>=sn.LOWER_A&&n<=sn.LOWER_Z||m2(n)}function _ue(n){return n===sn.EQUALS||Eue(n)}var en;(function(n){n[n.EntityStart=0]="EntityStart",n[n.NumericStart=1]="NumericStart",n[n.NumericDecimal=2]="NumericDecimal",n[n.NumericHex=3]="NumericHex",n[n.NamedEntity=4]="NamedEntity"})(en||(en={}));var za;(function(n){n[n.Legacy=0]="Legacy",n[n.Strict=1]="Strict",n[n.Attribute=2]="Attribute"})(za||(za={}));class Sue{constructor(e,t,r){this.decodeTree=e,this.emitCodePoint=t,this.errors=r,this.state=en.EntityStart,this.consumed=1,this.result=0,this.treeIndex=0,this.excess=1,this.decodeMode=za.Strict}startEntity(e){this.decodeMode=e,this.state=en.EntityStart,this.result=0,this.treeIndex=0,this.excess=1,this.consumed=1}write(e,t){switch(this.state){case en.EntityStart:return e.charCodeAt(t)===sn.NUM?(this.state=en.NumericStart,this.consumed+=1,this.stateNumericStart(e,t+1)):(this.state=en.NamedEntity,this.stateNamedEntity(e,t));case en.NumericStart:return this.stateNumericStart(e,t);case en.NumericDecimal:return this.stateNumericDecimal(e,t);case en.NumericHex:return this.stateNumericHex(e,t);case en.NamedEntity:return this.stateNamedEntity(e,t)}}stateNumericStart(e,t){return t>=e.length?-1:(e.charCodeAt(t)|xue)===sn.LOWER_X?(this.state=en.NumericHex,this.consumed+=1,this.stateNumericHex(e,t+1)):(this.state=en.NumericDecimal,this.stateNumericDecimal(e,t))}addToNumericResult(e,t,r,i){if(t!==r){const a=r-t;this.result=this.result*Math.pow(i,a)+parseInt(e.substr(t,a),i),this.consumed+=a}}stateNumericHex(e,t){const r=t;for(;t<e.length;){const i=e.charCodeAt(t);if(m2(i)||wue(i))t+=1;else return this.addToNumericResult(e,r,t,16),this.emitNumericEntity(i,3)}return this.addToNumericResult(e,r,t,16),-1}stateNumericDecimal(e,t){const r=t;for(;t<e.length;){const i=e.charCodeAt(t);if(m2(i))t+=1;else return this.addToNumericResult(e,r,t,10),this.emitNumericEntity(i,2)}return this.addToNumericResult(e,r,t,10),-1}emitNumericEntity(e,t){var r;if(this.consumed<=t)return(r=this.errors)===null||r===void 0||r.absenceOfDigitsInNumericCharacterReference(this.consumed),0;if(e===sn.SEMI)this.consumed+=1;else if(this.decodeMode===za.Strict)return 0;return this.emitCodePoint(bue(this.result),this.consumed),this.errors&&(e!==sn.SEMI&&this.errors.missingSemicolonAfterCharacterReference(),this.errors.validateNumericCharacterReference(this.result)),this.consumed}stateNamedEntity(e,t){const{decodeTree:r}=this;let i=r[this.treeIndex],a=(i&Xa.VALUE_LENGTH)>>14;for(;t<e.length;t++,this.excess++){const s=e.charCodeAt(t);if(this.treeIndex=kue(r,i,this.treeIndex+Math.max(1,a),s),this.treeIndex<0)return this.result===0||this.decodeMode===za.Attribute&&(a===0||_ue(s))?0:this.emitNotTerminatedNamedEntity();if(i=r[this.treeIndex],a=(i&Xa.VALUE_LENGTH)>>14,a!==0){if(s===sn.SEMI)return this.emitNamedEntityData(this.treeIndex,a,this.consumed+this.excess);this.decodeMode!==za.Strict&&(this.result=this.treeIndex,this.consumed+=this.excess,this.excess=0)}}return-1}emitNotTerminatedNamedEntity(){var e;const{result:t,decodeTree:r}=this,i=(r[t]&Xa.VALUE_LENGTH)>>14;return this.emitNamedEntityData(t,i,this.consumed),(e=this.errors)===null||e===void 0||e.missingSemicolonAfterCharacterReference(),this.consumed}emitNamedEntityData(e,t,r){const{decodeTree:i}=this;return this.emitCodePoint(t===1?i[e]&~Xa.VALUE_LENGTH:i[e+1],r),t===3&&this.emitCodePoint(i[e+2],r),r}end(){var e;switch(this.state){case en.NamedEntity:return this.result!==0&&(this.decodeMode!==za.Attribute||this.result===this.treeIndex)?this.emitNotTerminatedNamedEntity():0;case en.NumericDecimal:return this.emitNumericEntity(0,2);case en.NumericHex:return this.emitNumericEntity(0,3);case en.NumericStart:return(e=this.errors)===null||e===void 0||e.absenceOfDigitsInNumericCharacterReference(this.consumed),0;case en.EntityStart:return 0}}}function DN(n){let e="";const t=new Sue(n,r=>e+=yue(r));return function(i,a){let s=0,o=0;for(;(o=i.indexOf("&",o))>=0;){e+=i.slice(s,o),t.startEntity(a);const l=t.write(i,o+1);if(l<0){s=o+t.end();break}s=o+l,o=l===0?s+1:s}const u=e+i.slice(s);return e="",u}}function kue(n,e,t,r){const i=(e&Xa.BRANCH_LENGTH)>>7,a=e&Xa.JUMP_TABLE;if(i===0)return a!==0&&r===a?t:-1;if(a){const u=r-a;return u<0||u>=i?-1:n[t+u]-1}let s=t,o=s+i-1;for(;s<=o;){const u=s+o>>>1,l=n[u];if(l<r)s=u+1;else if(l>r)o=u-1;else return n[u+i]}return-1}const Cue=DN(pue);DN(vue);function RN(n,e=za.Legacy){return Cue(n,e)}function Aue(n){return Object.prototype.toString.call(n)}function kw(n){return Aue(n)==="[object String]"}const Tue=Object.prototype.hasOwnProperty;function Oue(n,e){return Tue.call(n,e)}function F0(n){return Array.prototype.slice.call(arguments,1).forEach(function(t){if(t){if(typeof t!="object")throw new TypeError(t+"must be object");Object.keys(t).forEach(function(r){n[r]=t[r]})}}),n}function LN(n,e,t){return[].concat(n.slice(0,e),t,n.slice(e+1))}function Cw(n){return!(n>=55296&&n<=57343||n>=64976&&n<=65007||(n&65535)===65535||(n&65535)===65534||n>=0&&n<=8||n===11||n>=14&&n<=31||n>=127&&n<=159||n>1114111)}function Wd(n){if(n>65535){n-=65536;const e=55296+(n>>10),t=56320+(n&1023);return String.fromCharCode(e,t)}return String.fromCharCode(n)}const IN=/\\([!"#$%&'()*+,\-./:;<=>?@[\\\]^_`{|}~])/g,Mue=/&([a-z#][a-z0-9]{1,31});/gi,Pue=new RegExp(IN.source+"|"+Mue.source,"gi"),Nue=/^#((?:x[a-f0-9]{1,8}|[0-9]{1,8}))$/i;function Due(n,e){if(e.charCodeAt(0)===35&&Nue.test(e)){const r=e[1].toLowerCase()==="x"?parseInt(e.slice(2),16):parseInt(e.slice(1),10);return Cw(r)?Wd(r):n}const t=RN(n);return t!==n?t:n}function Rue(n){return n.indexOf("\\")<0?n:n.replace(IN,"$1")}function cu(n){return n.indexOf("\\")<0&&n.indexOf("&")<0?n:n.replace(Pue,function(e,t,r){return t||Due(e,r)})}const Lue=/[&<>"]/,Iue=/[&<>"]/g,Fue={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;"};function Bue(n){return Fue[n]}function ls(n){return Lue.test(n)?n.replace(Iue,Bue):n}const zue=/[.?*+^$[\]\\(){}|-]/g;function $ue(n){return n.replace(zue,"\\$&")}function ut(n){switch(n){case 9:case 32:return!0}return!1}function Bl(n){if(n>=8192&&n<=8202)return!0;switch(n){case 9:case 10:case 11:case 12:case 13:case 32:case 160:case 5760:case 8239:case 8287:case 12288:return!0}return!1}function zl(n){return Sw.test(n)||PN.test(n)}function $l(n){switch(n){case 33:case 34:case 35:case 36:case 37:case 38:case 39:case 40:case 41:case 42:case 43:case 44:case 45:case 46:case 47:case 58:case 59:case 60:case 61:case 62:case 63:case 64:case 91:case 92:case 93:case 94:case 95:case 96:case 123:case 124:case 125:case 126:return!0;default:return!1}}function B0(n){return n=n.trim().replace(/\s+/g," "),"ẞ".toLowerCase()==="Ṿ"&&(n=n.replace(/ẞ/g,"ß")),n.toLowerCase().toUpperCase()}const jue={mdurl:due,ucmicro:gue},que=Object.freeze(Object.defineProperty({__proto__:null,arrayReplaceAt:LN,assign:F0,escapeHtml:ls,escapeRE:$ue,fromCodePoint:Wd,has:Oue,isMdAsciiPunct:$l,isPunctChar:zl,isSpace:ut,isString:kw,isValidEntityCode:Cw,isWhiteSpace:Bl,lib:jue,normalizeReference:B0,unescapeAll:cu,unescapeMd:Rue},Symbol.toStringTag,{value:"Module"}));function Gue(n,e,t){let r,i,a,s;const o=n.posMax,u=n.pos;for(n.pos=e+1,r=1;n.pos<o;){if(a=n.src.charCodeAt(n.pos),a===93&&(r--,r===0)){i=!0;break}if(s=n.pos,n.md.inline.skipToken(n),a===91){if(s===n.pos-1)r++;else if(t)return n.pos=u,-1}}let l=-1;return i&&(l=n.pos),n.pos=u,l}function Wue(n,e,t){let r,i=e;const a={ok:!1,pos:0,str:""};if(n.charCodeAt(i)===60){for(i++;i<t;){if(r=n.charCodeAt(i),r===10||r===60)return a;if(r===62)return a.pos=i+1,a.str=cu(n.slice(e+1,i)),a.ok=!0,a;if(r===92&&i+1<t){i+=2;continue}i++}return a}let s=0;for(;i<t&&(r=n.charCodeAt(i),!(r===32||r<32||r===127));){if(r===92&&i+1<t){if(n.charCodeAt(i+1)===32)break;i+=2;continue}if(r===40&&(s++,s>32))return a;if(r===41){if(s===0)break;s--}i++}return e===i||s!==0||(a.str=cu(n.slice(e,i)),a.pos=i,a.ok=!0),a}function Vue(n,e,t,r){let i,a=e;const s={ok:!1,can_continue:!1,pos:0,str:"",marker:0};if(r)s.str=r.str,s.marker=r.marker;else{if(a>=t)return s;let o=n.charCodeAt(a);if(o!==34&&o!==39&&o!==40)return s;e++,a++,o===40&&(o=41),s.marker=o}for(;a<t;){if(i=n.charCodeAt(a),i===s.marker)return s.pos=a+1,s.str+=cu(n.slice(e,a)),s.ok=!0,s;if(i===40&&s.marker===41)return s;i===92&&a+1<t&&a++,a++}return s.can_continue=!0,s.str+=cu(n.slice(e,a)),s}const Uue=Object.freeze(Object.defineProperty({__proto__:null,parseLinkDestination:Wue,parseLinkLabel:Gue,parseLinkTitle:Vue},Symbol.toStringTag,{value:"Module"})),Bi={};Bi.code_inline=function(n,e,t,r,i){const a=n[e];return"<code"+i.renderAttrs(a)+">"+ls(a.content)+"</code>"};Bi.code_block=function(n,e,t,r,i){const a=n[e];return"<pre"+i.renderAttrs(a)+"><code>"+ls(n[e].content)+`</code></pre>
`};Bi.fence=function(n,e,t,r,i){const a=n[e],s=a.info?cu(a.info).trim():"";let o="",u="";if(s){const c=s.split(/(\s+)/g);o=c[0],u=c.slice(2).join("")}let l;if(t.highlight?l=t.highlight(a.content,o,u)||ls(a.content):l=ls(a.content),l.indexOf("<pre")===0)return l+`
`;if(s){const c=a.attrIndex("class"),h=a.attrs?a.attrs.slice():[];c<0?h.push(["class",t.langPrefix+o]):(h[c]=h[c].slice(),h[c][1]+=" "+t.langPrefix+o);const d={attrs:h};return`<pre><code${i.renderAttrs(d)}>${l}</code></pre>
`}return`<pre><code${i.renderAttrs(a)}>${l}</code></pre>
`};Bi.image=function(n,e,t,r,i){const a=n[e];return a.attrs[a.attrIndex("alt")][1]=i.renderInlineAsText(a.children,t,r),i.renderToken(n,e,t)};Bi.hardbreak=function(n,e,t){return t.xhtmlOut?`<br />
`:`<br>
`};Bi.softbreak=function(n,e,t){return t.breaks?t.xhtmlOut?`<br />
`:`<br>
`:`
`};Bi.text=function(n,e){return ls(n[e].content)};Bi.html_block=function(n,e){return n[e].content};Bi.html_inline=function(n,e){return n[e].content};function Cu(){this.rules=F0({},Bi)}Cu.prototype.renderAttrs=function(e){let t,r,i;if(!e.attrs)return"";for(i="",t=0,r=e.attrs.length;t<r;t++)i+=" "+ls(e.attrs[t][0])+'="'+ls(e.attrs[t][1])+'"';return i};Cu.prototype.renderToken=function(e,t,r){const i=e[t];let a="";if(i.hidden)return"";i.block&&i.nesting!==-1&&t&&e[t-1].hidden&&(a+=`
`),a+=(i.nesting===-1?"</":"<")+i.tag,a+=this.renderAttrs(i),i.nesting===0&&r.xhtmlOut&&(a+=" /");let s=!1;if(i.block&&(s=!0,i.nesting===1&&t+1<e.length)){const o=e[t+1];(o.type==="inline"||o.hidden||o.nesting===-1&&o.tag===i.tag)&&(s=!1)}return a+=s?`>
`:">",a};Cu.prototype.renderInline=function(n,e,t){let r="";const i=this.rules;for(let a=0,s=n.length;a<s;a++){const o=n[a].type;typeof i[o]<"u"?r+=i[o](n,a,e,t,this):r+=this.renderToken(n,a,e)}return r};Cu.prototype.renderInlineAsText=function(n,e,t){let r="";for(let i=0,a=n.length;i<a;i++)switch(n[i].type){case"text":r+=n[i].content;break;case"image":r+=this.renderInlineAsText(n[i].children,e,t);break;case"html_inline":case"html_block":r+=n[i].content;break;case"softbreak":case"hardbreak":r+=`
`;break}return r};Cu.prototype.render=function(n,e,t){let r="";const i=this.rules;for(let a=0,s=n.length;a<s;a++){const o=n[a].type;o==="inline"?r+=this.renderInline(n[a].children,e,t):typeof i[o]<"u"?r+=i[o](n,a,e,t,this):r+=this.renderToken(n,a,e,t)}return r};function er(){this.__rules__=[],this.__cache__=null}er.prototype.__find__=function(n){for(let e=0;e<this.__rules__.length;e++)if(this.__rules__[e].name===n)return e;return-1};er.prototype.__compile__=function(){const n=this,e=[""];n.__rules__.forEach(function(t){t.enabled&&t.alt.forEach(function(r){e.indexOf(r)<0&&e.push(r)})}),n.__cache__={},e.forEach(function(t){n.__cache__[t]=[],n.__rules__.forEach(function(r){r.enabled&&(t&&r.alt.indexOf(t)<0||n.__cache__[t].push(r.fn))})})};er.prototype.at=function(n,e,t){const r=this.__find__(n),i=t||{};if(r===-1)throw new Error("Parser rule not found: "+n);this.__rules__[r].fn=e,this.__rules__[r].alt=i.alt||[],this.__cache__=null};er.prototype.before=function(n,e,t,r){const i=this.__find__(n),a=r||{};if(i===-1)throw new Error("Parser rule not found: "+n);this.__rules__.splice(i,0,{name:e,enabled:!0,fn:t,alt:a.alt||[]}),this.__cache__=null};er.prototype.after=function(n,e,t,r){const i=this.__find__(n),a=r||{};if(i===-1)throw new Error("Parser rule not found: "+n);this.__rules__.splice(i+1,0,{name:e,enabled:!0,fn:t,alt:a.alt||[]}),this.__cache__=null};er.prototype.push=function(n,e,t){const r=t||{};this.__rules__.push({name:n,enabled:!0,fn:e,alt:r.alt||[]}),this.__cache__=null};er.prototype.enable=function(n,e){Array.isArray(n)||(n=[n]);const t=[];return n.forEach(function(r){const i=this.__find__(r);if(i<0){if(e)return;throw new Error("Rules manager: invalid rule name "+r)}this.__rules__[i].enabled=!0,t.push(r)},this),this.__cache__=null,t};er.prototype.enableOnly=function(n,e){Array.isArray(n)||(n=[n]),this.__rules__.forEach(function(t){t.enabled=!1}),this.enable(n,e)};er.prototype.disable=function(n,e){Array.isArray(n)||(n=[n]);const t=[];return n.forEach(function(r){const i=this.__find__(r);if(i<0){if(e)return;throw new Error("Rules manager: invalid rule name "+r)}this.__rules__[i].enabled=!1,t.push(r)},this),this.__cache__=null,t};er.prototype.getRules=function(n){return this.__cache__===null&&this.__compile__(),this.__cache__[n]||[]};function fi(n,e,t){this.type=n,this.tag=e,this.attrs=null,this.map=null,this.nesting=t,this.level=0,this.children=null,this.content="",this.markup="",this.info="",this.meta=null,this.block=!1,this.hidden=!1}fi.prototype.attrIndex=function(e){if(!this.attrs)return-1;const t=this.attrs;for(let r=0,i=t.length;r<i;r++)if(t[r][0]===e)return r;return-1};fi.prototype.attrPush=function(e){this.attrs?this.attrs.push(e):this.attrs=[e]};fi.prototype.attrSet=function(e,t){const r=this.attrIndex(e),i=[e,t];r<0?this.attrPush(i):this.attrs[r]=i};fi.prototype.attrGet=function(e){const t=this.attrIndex(e);let r=null;return t>=0&&(r=this.attrs[t][1]),r};fi.prototype.attrJoin=function(e,t){const r=this.attrIndex(e);r<0?this.attrPush([e,t]):this.attrs[r][1]=this.attrs[r][1]+" "+t};function FN(n,e,t){this.src=n,this.env=t,this.tokens=[],this.inlineMode=!1,this.md=e}FN.prototype.Token=fi;const Hue=/\r\n?|\n/g,Yue=/\0/g;function Xue(n){let e;e=n.src.replace(Hue,`
`),e=e.replace(Yue,"�"),n.src=e}function Kue(n){let e;n.inlineMode?(e=new n.Token("inline","",0),e.content=n.src,e.map=[0,1],e.children=[],n.tokens.push(e)):n.md.block.parse(n.src,n.md,n.env,n.tokens)}function Zue(n){const e=n.tokens;for(let t=0,r=e.length;t<r;t++){const i=e[t];i.type==="inline"&&n.md.inline.parse(i.content,n.md,n.env,i.children)}}function Jue(n){return/^<a[>\s]/i.test(n)}function Que(n){return/^<\/a\s*>/i.test(n)}function ele(n){const e=n.tokens;if(n.md.options.linkify)for(let t=0,r=e.length;t<r;t++){if(e[t].type!=="inline"||!n.md.linkify.pretest(e[t].content))continue;let i=e[t].children,a=0;for(let s=i.length-1;s>=0;s--){const o=i[s];if(o.type==="link_close"){for(s--;i[s].level!==o.level&&i[s].type!=="link_open";)s--;continue}if(o.type==="html_inline"&&(Jue(o.content)&&a>0&&a--,Que(o.content)&&a++),!(a>0)&&o.type==="text"&&n.md.linkify.test(o.content)){const u=o.content;let l=n.md.linkify.match(u);const c=[];let h=o.level,d=0;l.length>0&&l[0].index===0&&s>0&&i[s-1].type==="text_special"&&(l=l.slice(1));for(let f=0;f<l.length;f++){const g=l[f].url,p=n.md.normalizeLink(g);if(!n.md.validateLink(p))continue;let v=l[f].text;l[f].schema?l[f].schema==="mailto:"&&!/^mailto:/i.test(v)?v=n.md.normalizeLinkText("mailto:"+v).replace(/^mailto:/,""):v=n.md.normalizeLinkText(v):v=n.md.normalizeLinkText("http://"+v).replace(/^http:\/\//,"");const m=l[f].index;if(m>d){const w=new n.Token("text","",0);w.content=u.slice(d,m),w.level=h,c.push(w)}const y=new n.Token("link_open","a",1);y.attrs=[["href",p]],y.level=h++,y.markup="linkify",y.info="auto",c.push(y);const b=new n.Token("text","",0);b.content=v,b.level=h,c.push(b);const x=new n.Token("link_close","a",-1);x.level=--h,x.markup="linkify",x.info="auto",c.push(x),d=l[f].lastIndex}if(d<u.length){const f=new n.Token("text","",0);f.content=u.slice(d),f.level=h,c.push(f)}e[t].children=i=LN(i,s,c)}}}}const BN=/\+-|\.\.|\?\?\?\?|!!!!|,,|--/,tle=/\((c|tm|r)\)/i,nle=/\((c|tm|r)\)/ig,rle={c:"©",r:"®",tm:"™"};function ile(n,e){return rle[e.toLowerCase()]}function ale(n){let e=0;for(let t=n.length-1;t>=0;t--){const r=n[t];r.type==="text"&&!e&&(r.content=r.content.replace(nle,ile)),r.type==="link_open"&&r.info==="auto"&&e--,r.type==="link_close"&&r.info==="auto"&&e++}}function sle(n){let e=0;for(let t=n.length-1;t>=0;t--){const r=n[t];r.type==="text"&&!e&&BN.test(r.content)&&(r.content=r.content.replace(/\+-/g,"±").replace(/\.{2,}/g,"…").replace(/([?!])…/g,"$1..").replace(/([?!]){4,}/g,"$1$1$1").replace(/,{2,}/g,",").replace(/(^|[^-])---(?=[^-]|$)/mg,"$1—").replace(/(^|\s)--(?=\s|$)/mg,"$1–").replace(/(^|[^-\s])--(?=[^-\s]|$)/mg,"$1–")),r.type==="link_open"&&r.info==="auto"&&e--,r.type==="link_close"&&r.info==="auto"&&e++}}function ole(n){let e;if(n.md.options.typographer)for(e=n.tokens.length-1;e>=0;e--)n.tokens[e].type==="inline"&&(tle.test(n.tokens[e].content)&&ale(n.tokens[e].children),BN.test(n.tokens[e].content)&&sle(n.tokens[e].children))}const ule=/['"]/,JT=/['"]/g,QT="’";function Oh(n,e,t){return n.slice(0,e)+t+n.slice(e+1)}function lle(n,e){let t;const r=[];for(let i=0;i<n.length;i++){const a=n[i],s=n[i].level;for(t=r.length-1;t>=0&&!(r[t].level<=s);t--);if(r.length=t+1,a.type!=="text")continue;let o=a.content,u=0,l=o.length;e:for(;u<l;){JT.lastIndex=u;const c=JT.exec(o);if(!c)break;let h=!0,d=!0;u=c.index+1;const f=c[0]==="'";let g=32;if(c.index-1>=0)g=o.charCodeAt(c.index-1);else for(t=i-1;t>=0&&!(n[t].type==="softbreak"||n[t].type==="hardbreak");t--)if(n[t].content){g=n[t].content.charCodeAt(n[t].content.length-1);break}let p=32;if(u<l)p=o.charCodeAt(u);else for(t=i+1;t<n.length&&!(n[t].type==="softbreak"||n[t].type==="hardbreak");t++)if(n[t].content){p=n[t].content.charCodeAt(0);break}const v=$l(g)||zl(String.fromCharCode(g)),m=$l(p)||zl(String.fromCharCode(p)),y=Bl(g),b=Bl(p);if(b?h=!1:m&&(y||v||(h=!1)),y?d=!1:v&&(b||m||(d=!1)),p===34&&c[0]==='"'&&g>=48&&g<=57&&(d=h=!1),h&&d&&(h=v,d=m),!h&&!d){f&&(a.content=Oh(a.content,c.index,QT));continue}if(d)for(t=r.length-1;t>=0;t--){let x=r[t];if(r[t].level<s)break;if(x.single===f&&r[t].level===s){x=r[t];let w,E;f?(w=e.md.options.quotes[2],E=e.md.options.quotes[3]):(w=e.md.options.quotes[0],E=e.md.options.quotes[1]),a.content=Oh(a.content,c.index,E),n[x.token].content=Oh(n[x.token].content,x.pos,w),u+=E.length-1,x.token===i&&(u+=w.length-1),o=a.content,l=o.length,r.length=t;continue e}}h?r.push({token:i,pos:c.index,single:f,level:s}):d&&f&&(a.content=Oh(a.content,c.index,QT))}}}function cle(n){if(n.md.options.typographer)for(let e=n.tokens.length-1;e>=0;e--)n.tokens[e].type!=="inline"||!ule.test(n.tokens[e].content)||lle(n.tokens[e].children,n)}function hle(n){let e,t;const r=n.tokens,i=r.length;for(let a=0;a<i;a++){if(r[a].type!=="inline")continue;const s=r[a].children,o=s.length;for(e=0;e<o;e++)s[e].type==="text_special"&&(s[e].type="text");for(e=t=0;e<o;e++)s[e].type==="text"&&e+1<o&&s[e+1].type==="text"?s[e+1].content=s[e].content+s[e+1].content:(e!==t&&(s[t]=s[e]),t++);e!==t&&(s.length=t)}}const Fy=[["normalize",Xue],["block",Kue],["inline",Zue],["linkify",ele],["replacements",ole],["smartquotes",cle],["text_join",hle]];function Aw(){this.ruler=new er;for(let n=0;n<Fy.length;n++)this.ruler.push(Fy[n][0],Fy[n][1])}Aw.prototype.process=function(n){const e=this.ruler.getRules("");for(let t=0,r=e.length;t<r;t++)e[t](n)};Aw.prototype.State=FN;function zi(n,e,t,r){this.src=n,this.md=e,this.env=t,this.tokens=r,this.bMarks=[],this.eMarks=[],this.tShift=[],this.sCount=[],this.bsCount=[],this.blkIndent=0,this.line=0,this.lineMax=0,this.tight=!1,this.ddIndent=-1,this.listIndent=-1,this.parentType="root",this.level=0;const i=this.src;for(let a=0,s=0,o=0,u=0,l=i.length,c=!1;s<l;s++){const h=i.charCodeAt(s);if(!c)if(ut(h)){o++,h===9?u+=4-u%4:u++;continue}else c=!0;(h===10||s===l-1)&&(h!==10&&s++,this.bMarks.push(a),this.eMarks.push(s),this.tShift.push(o),this.sCount.push(u),this.bsCount.push(0),c=!1,o=0,u=0,a=s+1)}this.bMarks.push(i.length),this.eMarks.push(i.length),this.tShift.push(0),this.sCount.push(0),this.bsCount.push(0),this.lineMax=this.bMarks.length-1}zi.prototype.push=function(n,e,t){const r=new fi(n,e,t);return r.block=!0,t<0&&this.level--,r.level=this.level,t>0&&this.level++,this.tokens.push(r),r};zi.prototype.isEmpty=function(e){return this.bMarks[e]+this.tShift[e]>=this.eMarks[e]};zi.prototype.skipEmptyLines=function(e){for(let t=this.lineMax;e<t&&!(this.bMarks[e]+this.tShift[e]<this.eMarks[e]);e++);return e};zi.prototype.skipSpaces=function(e){for(let t=this.src.length;e<t;e++){const r=this.src.charCodeAt(e);if(!ut(r))break}return e};zi.prototype.skipSpacesBack=function(e,t){if(e<=t)return e;for(;e>t;)if(!ut(this.src.charCodeAt(--e)))return e+1;return e};zi.prototype.skipChars=function(e,t){for(let r=this.src.length;e<r&&this.src.charCodeAt(e)===t;e++);return e};zi.prototype.skipCharsBack=function(e,t,r){if(e<=r)return e;for(;e>r;)if(t!==this.src.charCodeAt(--e))return e+1;return e};zi.prototype.getLines=function(e,t,r,i){if(e>=t)return"";const a=new Array(t-e);for(let s=0,o=e;o<t;o++,s++){let u=0;const l=this.bMarks[o];let c=l,h;for(o+1<t||i?h=this.eMarks[o]+1:h=this.eMarks[o];c<h&&u<r;){const d=this.src.charCodeAt(c);if(ut(d))d===9?u+=4-(u+this.bsCount[o])%4:u++;else if(c-l<this.tShift[o])u++;else break;c++}u>r?a[s]=new Array(u-r+1).join(" ")+this.src.slice(c,h):a[s]=this.src.slice(c,h)}return a.join("")};zi.prototype.Token=fi;const dle=65536;function By(n,e){const t=n.bMarks[e]+n.tShift[e],r=n.eMarks[e];return n.src.slice(t,r)}function eO(n){const e=[],t=n.length;let r=0,i=n.charCodeAt(r),a=!1,s=0,o="";for(;r<t;)i===124&&(a?(o+=n.substring(s,r-1),s=r):(e.push(o+n.substring(s,r)),o="",s=r+1)),a=i===92,r++,i=n.charCodeAt(r);return e.push(o+n.substring(s)),e}function fle(n,e,t,r){if(e+2>t)return!1;let i=e+1;if(n.sCount[i]<n.blkIndent||n.sCount[i]-n.blkIndent>=4)return!1;let a=n.bMarks[i]+n.tShift[i];if(a>=n.eMarks[i])return!1;const s=n.src.charCodeAt(a++);if(s!==124&&s!==45&&s!==58||a>=n.eMarks[i])return!1;const o=n.src.charCodeAt(a++);if(o!==124&&o!==45&&o!==58&&!ut(o)||s===45&&ut(o))return!1;for(;a<n.eMarks[i];){const x=n.src.charCodeAt(a);if(x!==124&&x!==45&&x!==58&&!ut(x))return!1;a++}let u=By(n,e+1),l=u.split("|");const c=[];for(let x=0;x<l.length;x++){const w=l[x].trim();if(!w){if(x===0||x===l.length-1)continue;return!1}if(!/^:?-+:?$/.test(w))return!1;w.charCodeAt(w.length-1)===58?c.push(w.charCodeAt(0)===58?"center":"right"):w.charCodeAt(0)===58?c.push("left"):c.push("")}if(u=By(n,e).trim(),u.indexOf("|")===-1||n.sCount[e]-n.blkIndent>=4)return!1;l=eO(u),l.length&&l[0]===""&&l.shift(),l.length&&l[l.length-1]===""&&l.pop();const h=l.length;if(h===0||h!==c.length)return!1;if(r)return!0;const d=n.parentType;n.parentType="table";const f=n.md.block.ruler.getRules("blockquote"),g=n.push("table_open","table",1),p=[e,0];g.map=p;const v=n.push("thead_open","thead",1);v.map=[e,e+1];const m=n.push("tr_open","tr",1);m.map=[e,e+1];for(let x=0;x<l.length;x++){const w=n.push("th_open","th",1);c[x]&&(w.attrs=[["style","text-align:"+c[x]]]);const E=n.push("inline","",0);E.content=l[x].trim(),E.children=[],n.push("th_close","th",-1)}n.push("tr_close","tr",-1),n.push("thead_close","thead",-1);let y,b=0;for(i=e+2;i<t&&!(n.sCount[i]<n.blkIndent);i++){let x=!1;for(let E=0,_=f.length;E<_;E++)if(f[E](n,i,t,!0)){x=!0;break}if(x||(u=By(n,i).trim(),!u)||n.sCount[i]-n.blkIndent>=4||(l=eO(u),l.length&&l[0]===""&&l.shift(),l.length&&l[l.length-1]===""&&l.pop(),b+=h-l.length,b>dle))break;if(i===e+2){const E=n.push("tbody_open","tbody",1);E.map=y=[e+2,0]}const w=n.push("tr_open","tr",1);w.map=[i,i+1];for(let E=0;E<h;E++){const _=n.push("td_open","td",1);c[E]&&(_.attrs=[["style","text-align:"+c[E]]]);const S=n.push("inline","",0);S.content=l[E]?l[E].trim():"",S.children=[],n.push("td_close","td",-1)}n.push("tr_close","tr",-1)}return y&&(n.push("tbody_close","tbody",-1),y[1]=i),n.push("table_close","table",-1),p[1]=i,n.parentType=d,n.line=i,!0}function gle(n,e,t){if(n.sCount[e]-n.blkIndent<4)return!1;let r=e+1,i=r;for(;r<t;){if(n.isEmpty(r)){r++;continue}if(n.sCount[r]-n.blkIndent>=4){r++,i=r;continue}break}n.line=i;const a=n.push("code_block","code",0);return a.content=n.getLines(e,i,4+n.blkIndent,!1)+`
`,a.map=[e,n.line],!0}function ple(n,e,t,r){let i=n.bMarks[e]+n.tShift[e],a=n.eMarks[e];if(n.sCount[e]-n.blkIndent>=4||i+3>a)return!1;const s=n.src.charCodeAt(i);if(s!==126&&s!==96)return!1;let o=i;i=n.skipChars(i,s);let u=i-o;if(u<3)return!1;const l=n.src.slice(o,i),c=n.src.slice(i,a);if(s===96&&c.indexOf(String.fromCharCode(s))>=0)return!1;if(r)return!0;let h=e,d=!1;for(;h++,!(h>=t||(i=o=n.bMarks[h]+n.tShift[h],a=n.eMarks[h],i<a&&n.sCount[h]<n.blkIndent));)if(n.src.charCodeAt(i)===s&&!(n.sCount[h]-n.blkIndent>=4)&&(i=n.skipChars(i,s),!(i-o<u)&&(i=n.skipSpaces(i),!(i<a)))){d=!0;break}u=n.sCount[e],n.line=h+(d?1:0);const f=n.push("fence","code",0);return f.info=c,f.content=n.getLines(e+1,h,u,!0),f.markup=l,f.map=[e,n.line],!0}function vle(n,e,t,r){let i=n.bMarks[e]+n.tShift[e],a=n.eMarks[e];const s=n.lineMax;if(n.sCount[e]-n.blkIndent>=4||n.src.charCodeAt(i)!==62)return!1;if(r)return!0;const o=[],u=[],l=[],c=[],h=n.md.block.ruler.getRules("blockquote"),d=n.parentType;n.parentType="blockquote";let f=!1,g;for(g=e;g<t;g++){const b=n.sCount[g]<n.blkIndent;if(i=n.bMarks[g]+n.tShift[g],a=n.eMarks[g],i>=a)break;if(n.src.charCodeAt(i++)===62&&!b){let w=n.sCount[g]+1,E,_;n.src.charCodeAt(i)===32?(i++,w++,_=!1,E=!0):n.src.charCodeAt(i)===9?(E=!0,(n.bsCount[g]+w)%4===3?(i++,w++,_=!1):_=!0):E=!1;let S=w;for(o.push(n.bMarks[g]),n.bMarks[g]=i;i<a;){const C=n.src.charCodeAt(i);if(ut(C))C===9?S+=4-(S+n.bsCount[g]+(_?1:0))%4:S++;else break;i++}f=i>=a,u.push(n.bsCount[g]),n.bsCount[g]=n.sCount[g]+1+(E?1:0),l.push(n.sCount[g]),n.sCount[g]=S-w,c.push(n.tShift[g]),n.tShift[g]=i-n.bMarks[g];continue}if(f)break;let x=!1;for(let w=0,E=h.length;w<E;w++)if(h[w](n,g,t,!0)){x=!0;break}if(x){n.lineMax=g,n.blkIndent!==0&&(o.push(n.bMarks[g]),u.push(n.bsCount[g]),c.push(n.tShift[g]),l.push(n.sCount[g]),n.sCount[g]-=n.blkIndent);break}o.push(n.bMarks[g]),u.push(n.bsCount[g]),c.push(n.tShift[g]),l.push(n.sCount[g]),n.sCount[g]=-1}const p=n.blkIndent;n.blkIndent=0;const v=n.push("blockquote_open","blockquote",1);v.markup=">";const m=[e,0];v.map=m,n.md.block.tokenize(n,e,g);const y=n.push("blockquote_close","blockquote",-1);y.markup=">",n.lineMax=s,n.parentType=d,m[1]=n.line;for(let b=0;b<c.length;b++)n.bMarks[b+e]=o[b],n.tShift[b+e]=c[b],n.sCount[b+e]=l[b],n.bsCount[b+e]=u[b];return n.blkIndent=p,!0}function mle(n,e,t,r){const i=n.eMarks[e];if(n.sCount[e]-n.blkIndent>=4)return!1;let a=n.bMarks[e]+n.tShift[e];const s=n.src.charCodeAt(a++);if(s!==42&&s!==45&&s!==95)return!1;let o=1;for(;a<i;){const l=n.src.charCodeAt(a++);if(l!==s&&!ut(l))return!1;l===s&&o++}if(o<3)return!1;if(r)return!0;n.line=e+1;const u=n.push("hr","hr",0);return u.map=[e,n.line],u.markup=Array(o+1).join(String.fromCharCode(s)),!0}function tO(n,e){const t=n.eMarks[e];let r=n.bMarks[e]+n.tShift[e];const i=n.src.charCodeAt(r++);if(i!==42&&i!==45&&i!==43)return-1;if(r<t){const a=n.src.charCodeAt(r);if(!ut(a))return-1}return r}function nO(n,e){const t=n.bMarks[e]+n.tShift[e],r=n.eMarks[e];let i=t;if(i+1>=r)return-1;let a=n.src.charCodeAt(i++);if(a<48||a>57)return-1;for(;;){if(i>=r)return-1;if(a=n.src.charCodeAt(i++),a>=48&&a<=57){if(i-t>=10)return-1;continue}if(a===41||a===46)break;return-1}return i<r&&(a=n.src.charCodeAt(i),!ut(a))?-1:i}function yle(n,e){const t=n.level+2;for(let r=e+2,i=n.tokens.length-2;r<i;r++)n.tokens[r].level===t&&n.tokens[r].type==="paragraph_open"&&(n.tokens[r+2].hidden=!0,n.tokens[r].hidden=!0,r+=2)}function ble(n,e,t,r){let i,a,s,o,u=e,l=!0;if(n.sCount[u]-n.blkIndent>=4||n.listIndent>=0&&n.sCount[u]-n.listIndent>=4&&n.sCount[u]<n.blkIndent)return!1;let c=!1;r&&n.parentType==="paragraph"&&n.sCount[u]>=n.blkIndent&&(c=!0);let h,d,f;if((f=nO(n,u))>=0){if(h=!0,s=n.bMarks[u]+n.tShift[u],d=Number(n.src.slice(s,f-1)),c&&d!==1)return!1}else if((f=tO(n,u))>=0)h=!1;else return!1;if(c&&n.skipSpaces(f)>=n.eMarks[u])return!1;if(r)return!0;const g=n.src.charCodeAt(f-1),p=n.tokens.length;h?(o=n.push("ordered_list_open","ol",1),d!==1&&(o.attrs=[["start",d]])):o=n.push("bullet_list_open","ul",1);const v=[u,0];o.map=v,o.markup=String.fromCharCode(g);let m=!1;const y=n.md.block.ruler.getRules("list"),b=n.parentType;for(n.parentType="list";u<t;){a=f,i=n.eMarks[u];const x=n.sCount[u]+f-(n.bMarks[u]+n.tShift[u]);let w=x;for(;a<i;){const R=n.src.charCodeAt(a);if(R===9)w+=4-(w+n.bsCount[u])%4;else if(R===32)w++;else break;a++}const E=a;let _;E>=i?_=1:_=w-x,_>4&&(_=1);const S=x+_;o=n.push("list_item_open","li",1),o.markup=String.fromCharCode(g);const C=[u,0];o.map=C,h&&(o.info=n.src.slice(s,f-1));const k=n.tight,A=n.tShift[u],T=n.sCount[u],O=n.listIndent;if(n.listIndent=n.blkIndent,n.blkIndent=S,n.tight=!0,n.tShift[u]=E-n.bMarks[u],n.sCount[u]=w,E>=i&&n.isEmpty(u+1)?n.line=Math.min(n.line+2,t):n.md.block.tokenize(n,u,t,!0),(!n.tight||m)&&(l=!1),m=n.line-u>1&&n.isEmpty(n.line-1),n.blkIndent=n.listIndent,n.listIndent=O,n.tShift[u]=A,n.sCount[u]=T,n.tight=k,o=n.push("list_item_close","li",-1),o.markup=String.fromCharCode(g),u=n.line,C[1]=u,u>=t||n.sCount[u]<n.blkIndent||n.sCount[u]-n.blkIndent>=4)break;let P=!1;for(let R=0,N=y.length;R<N;R++)if(y[R](n,u,t,!0)){P=!0;break}if(P)break;if(h){if(f=nO(n,u),f<0)break;s=n.bMarks[u]+n.tShift[u]}else if(f=tO(n,u),f<0)break;if(g!==n.src.charCodeAt(f-1))break}return h?o=n.push("ordered_list_close","ol",-1):o=n.push("bullet_list_close","ul",-1),o.markup=String.fromCharCode(g),v[1]=u,n.line=u,n.parentType=b,l&&yle(n,p),!0}function xle(n,e,t,r){let i=n.bMarks[e]+n.tShift[e],a=n.eMarks[e],s=e+1;if(n.sCount[e]-n.blkIndent>=4||n.src.charCodeAt(i)!==91)return!1;function o(y){const b=n.lineMax;if(y>=b||n.isEmpty(y))return null;let x=!1;if(n.sCount[y]-n.blkIndent>3&&(x=!0),n.sCount[y]<0&&(x=!0),!x){const _=n.md.block.ruler.getRules("reference"),S=n.parentType;n.parentType="reference";let C=!1;for(let k=0,A=_.length;k<A;k++)if(_[k](n,y,b,!0)){C=!0;break}if(n.parentType=S,C)return null}const w=n.bMarks[y]+n.tShift[y],E=n.eMarks[y];return n.src.slice(w,E+1)}let u=n.src.slice(i,a+1);a=u.length;let l=-1;for(i=1;i<a;i++){const y=u.charCodeAt(i);if(y===91)return!1;if(y===93){l=i;break}else if(y===10){const b=o(s);b!==null&&(u+=b,a=u.length,s++)}else if(y===92&&(i++,i<a&&u.charCodeAt(i)===10)){const b=o(s);b!==null&&(u+=b,a=u.length,s++)}}if(l<0||u.charCodeAt(l+1)!==58)return!1;for(i=l+2;i<a;i++){const y=u.charCodeAt(i);if(y===10){const b=o(s);b!==null&&(u+=b,a=u.length,s++)}else if(!ut(y))break}const c=n.md.helpers.parseLinkDestination(u,i,a);if(!c.ok)return!1;const h=n.md.normalizeLink(c.str);if(!n.md.validateLink(h))return!1;i=c.pos;const d=i,f=s,g=i;for(;i<a;i++){const y=u.charCodeAt(i);if(y===10){const b=o(s);b!==null&&(u+=b,a=u.length,s++)}else if(!ut(y))break}let p=n.md.helpers.parseLinkTitle(u,i,a);for(;p.can_continue;){const y=o(s);if(y===null)break;u+=y,i=a,a=u.length,s++,p=n.md.helpers.parseLinkTitle(u,i,a,p)}let v;for(i<a&&g!==i&&p.ok?(v=p.str,i=p.pos):(v="",i=d,s=f);i<a;){const y=u.charCodeAt(i);if(!ut(y))break;i++}if(i<a&&u.charCodeAt(i)!==10&&v)for(v="",i=d,s=f;i<a;){const y=u.charCodeAt(i);if(!ut(y))break;i++}if(i<a&&u.charCodeAt(i)!==10)return!1;const m=B0(u.slice(1,l));return m?(r||(typeof n.env.references>"u"&&(n.env.references={}),typeof n.env.references[m]>"u"&&(n.env.references[m]={title:v,href:h}),n.line=s),!0):!1}const wle=["address","article","aside","base","basefont","blockquote","body","caption","center","col","colgroup","dd","details","dialog","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hr","html","iframe","legend","li","link","main","menu","menuitem","nav","noframes","ol","optgroup","option","p","param","search","section","summary","table","tbody","td","tfoot","th","thead","title","tr","track","ul"],Ele="[a-zA-Z_:][a-zA-Z0-9:._-]*",_le="[^\"'=<>`\\x00-\\x20]+",Sle="'[^']*'",kle='"[^"]*"',Cle="(?:"+_le+"|"+Sle+"|"+kle+")",Ale="(?:\\s+"+Ele+"(?:\\s*=\\s*"+Cle+")?)",zN="<[A-Za-z][A-Za-z0-9\\-]*"+Ale+"*\\s*\\/?>",$N="<\\/[A-Za-z][A-Za-z0-9\\-]*\\s*>",Tle="<!---?>|<!--(?:[^-]|-[^-]|--[^>])*-->",Ole="<[?][\\s\\S]*?[?]>",Mle="<![A-Za-z][^>]*>",Ple="<!\\[CDATA\\[[\\s\\S]*?\\]\\]>",Nle=new RegExp("^(?:"+zN+"|"+$N+"|"+Tle+"|"+Ole+"|"+Mle+"|"+Ple+")"),Dle=new RegExp("^(?:"+zN+"|"+$N+")"),Oo=[[/^<(script|pre|style|textarea)(?=(\s|>|$))/i,/<\/(script|pre|style|textarea)>/i,!0],[/^<!--/,/-->/,!0],[/^<\?/,/\?>/,!0],[/^<![A-Z]/,/>/,!0],[/^<!\[CDATA\[/,/\]\]>/,!0],[new RegExp("^</?("+wle.join("|")+")(?=(\\s|/?>|$))","i"),/^$/,!0],[new RegExp(Dle.source+"\\s*$"),/^$/,!1]];function Rle(n,e,t,r){let i=n.bMarks[e]+n.tShift[e],a=n.eMarks[e];if(n.sCount[e]-n.blkIndent>=4||!n.md.options.html||n.src.charCodeAt(i)!==60)return!1;let s=n.src.slice(i,a),o=0;for(;o<Oo.length&&!Oo[o][0].test(s);o++);if(o===Oo.length)return!1;if(r)return Oo[o][2];let u=e+1;if(!Oo[o][1].test(s)){for(;u<t&&!(n.sCount[u]<n.blkIndent);u++)if(i=n.bMarks[u]+n.tShift[u],a=n.eMarks[u],s=n.src.slice(i,a),Oo[o][1].test(s)){s.length!==0&&u++;break}}n.line=u;const l=n.push("html_block","",0);return l.map=[e,u],l.content=n.getLines(e,u,n.blkIndent,!0),!0}function Lle(n,e,t,r){let i=n.bMarks[e]+n.tShift[e],a=n.eMarks[e];if(n.sCount[e]-n.blkIndent>=4)return!1;let s=n.src.charCodeAt(i);if(s!==35||i>=a)return!1;let o=1;for(s=n.src.charCodeAt(++i);s===35&&i<a&&o<=6;)o++,s=n.src.charCodeAt(++i);if(o>6||i<a&&!ut(s))return!1;if(r)return!0;a=n.skipSpacesBack(a,i);const u=n.skipCharsBack(a,35,i);u>i&&ut(n.src.charCodeAt(u-1))&&(a=u),n.line=e+1;const l=n.push("heading_open","h"+String(o),1);l.markup="########".slice(0,o),l.map=[e,n.line];const c=n.push("inline","",0);c.content=n.src.slice(i,a).trim(),c.map=[e,n.line],c.children=[];const h=n.push("heading_close","h"+String(o),-1);return h.markup="########".slice(0,o),!0}function Ile(n,e,t){const r=n.md.block.ruler.getRules("paragraph");if(n.sCount[e]-n.blkIndent>=4)return!1;const i=n.parentType;n.parentType="paragraph";let a=0,s,o=e+1;for(;o<t&&!n.isEmpty(o);o++){if(n.sCount[o]-n.blkIndent>3)continue;if(n.sCount[o]>=n.blkIndent){let f=n.bMarks[o]+n.tShift[o];const g=n.eMarks[o];if(f<g&&(s=n.src.charCodeAt(f),(s===45||s===61)&&(f=n.skipChars(f,s),f=n.skipSpaces(f),f>=g))){a=s===61?1:2;break}}if(n.sCount[o]<0)continue;let d=!1;for(let f=0,g=r.length;f<g;f++)if(r[f](n,o,t,!0)){d=!0;break}if(d)break}if(!a)return!1;const u=n.getLines(e,o,n.blkIndent,!1).trim();n.line=o+1;const l=n.push("heading_open","h"+String(a),1);l.markup=String.fromCharCode(s),l.map=[e,n.line];const c=n.push("inline","",0);c.content=u,c.map=[e,n.line-1],c.children=[];const h=n.push("heading_close","h"+String(a),-1);return h.markup=String.fromCharCode(s),n.parentType=i,!0}function Fle(n,e,t){const r=n.md.block.ruler.getRules("paragraph"),i=n.parentType;let a=e+1;for(n.parentType="paragraph";a<t&&!n.isEmpty(a);a++){if(n.sCount[a]-n.blkIndent>3||n.sCount[a]<0)continue;let l=!1;for(let c=0,h=r.length;c<h;c++)if(r[c](n,a,t,!0)){l=!0;break}if(l)break}const s=n.getLines(e,a,n.blkIndent,!1).trim();n.line=a;const o=n.push("paragraph_open","p",1);o.map=[e,n.line];const u=n.push("inline","",0);return u.content=s,u.map=[e,n.line],u.children=[],n.push("paragraph_close","p",-1),n.parentType=i,!0}const Mh=[["table",fle,["paragraph","reference"]],["code",gle],["fence",ple,["paragraph","reference","blockquote","list"]],["blockquote",vle,["paragraph","reference","blockquote","list"]],["hr",mle,["paragraph","reference","blockquote","list"]],["list",ble,["paragraph","reference","blockquote"]],["reference",xle],["html_block",Rle,["paragraph","reference","blockquote"]],["heading",Lle,["paragraph","reference","blockquote"]],["lheading",Ile],["paragraph",Fle]];function z0(){this.ruler=new er;for(let n=0;n<Mh.length;n++)this.ruler.push(Mh[n][0],Mh[n][1],{alt:(Mh[n][2]||[]).slice()})}z0.prototype.tokenize=function(n,e,t){const r=this.ruler.getRules(""),i=r.length,a=n.md.options.maxNesting;let s=e,o=!1;for(;s<t&&(n.line=s=n.skipEmptyLines(s),!(s>=t||n.sCount[s]<n.blkIndent));){if(n.level>=a){n.line=t;break}const u=n.line;let l=!1;for(let c=0;c<i;c++)if(l=r[c](n,s,t,!1),l){if(u>=n.line)throw new Error("block rule didn't increment state.line");break}if(!l)throw new Error("none of the block rules matched");n.tight=!o,n.isEmpty(n.line-1)&&(o=!0),s=n.line,s<t&&n.isEmpty(s)&&(o=!0,s++,n.line=s)}};z0.prototype.parse=function(n,e,t,r){if(!n)return;const i=new this.State(n,e,t,r);this.tokenize(i,i.line,i.lineMax)};z0.prototype.State=zi;function bc(n,e,t,r){this.src=n,this.env=t,this.md=e,this.tokens=r,this.tokens_meta=Array(r.length),this.pos=0,this.posMax=this.src.length,this.level=0,this.pending="",this.pendingLevel=0,this.cache={},this.delimiters=[],this._prev_delimiters=[],this.backticks={},this.backticksScanned=!1,this.linkLevel=0}bc.prototype.pushPending=function(){const n=new fi("text","",0);return n.content=this.pending,n.level=this.pendingLevel,this.tokens.push(n),this.pending="",n};bc.prototype.push=function(n,e,t){this.pending&&this.pushPending();const r=new fi(n,e,t);let i=null;return t<0&&(this.level--,this.delimiters=this._prev_delimiters.pop()),r.level=this.level,t>0&&(this.level++,this._prev_delimiters.push(this.delimiters),this.delimiters=[],i={delimiters:this.delimiters}),this.pendingLevel=this.level,this.tokens.push(r),this.tokens_meta.push(i),r};bc.prototype.scanDelims=function(n,e){const t=this.posMax,r=this.src.charCodeAt(n),i=n>0?this.src.charCodeAt(n-1):32;let a=n;for(;a<t&&this.src.charCodeAt(a)===r;)a++;const s=a-n,o=a<t?this.src.charCodeAt(a):32,u=$l(i)||zl(String.fromCharCode(i)),l=$l(o)||zl(String.fromCharCode(o)),c=Bl(i),h=Bl(o),d=!h&&(!l||c||u),f=!c&&(!u||h||l);return{can_open:d&&(e||!f||u),can_close:f&&(e||!d||l),length:s}};bc.prototype.Token=fi;function Ble(n){switch(n){case 10:case 33:case 35:case 36:case 37:case 38:case 42:case 43:case 45:case 58:case 60:case 61:case 62:case 64:case 91:case 92:case 93:case 94:case 95:case 96:case 123:case 125:case 126:return!0;default:return!1}}function zle(n,e){let t=n.pos;for(;t<n.posMax&&!Ble(n.src.charCodeAt(t));)t++;return t===n.pos?!1:(e||(n.pending+=n.src.slice(n.pos,t)),n.pos=t,!0)}const $le=/(?:^|[^a-z0-9.+-])([a-z][a-z0-9.+-]*)$/i;function jle(n,e){if(!n.md.options.linkify||n.linkLevel>0)return!1;const t=n.pos,r=n.posMax;if(t+3>r||n.src.charCodeAt(t)!==58||n.src.charCodeAt(t+1)!==47||n.src.charCodeAt(t+2)!==47)return!1;const i=n.pending.match($le);if(!i)return!1;const a=i[1],s=n.md.linkify.matchAtStart(n.src.slice(t-a.length));if(!s)return!1;let o=s.url;if(o.length<=a.length)return!1;o=o.replace(/\*+$/,"");const u=n.md.normalizeLink(o);if(!n.md.validateLink(u))return!1;if(!e){n.pending=n.pending.slice(0,-a.length);const l=n.push("link_open","a",1);l.attrs=[["href",u]],l.markup="linkify",l.info="auto";const c=n.push("text","",0);c.content=n.md.normalizeLinkText(o);const h=n.push("link_close","a",-1);h.markup="linkify",h.info="auto"}return n.pos+=o.length-a.length,!0}function qle(n,e){let t=n.pos;if(n.src.charCodeAt(t)!==10)return!1;const r=n.pending.length-1,i=n.posMax;if(!e)if(r>=0&&n.pending.charCodeAt(r)===32)if(r>=1&&n.pending.charCodeAt(r-1)===32){let a=r-1;for(;a>=1&&n.pending.charCodeAt(a-1)===32;)a--;n.pending=n.pending.slice(0,a),n.push("hardbreak","br",0)}else n.pending=n.pending.slice(0,-1),n.push("softbreak","br",0);else n.push("softbreak","br",0);for(t++;t<i&&ut(n.src.charCodeAt(t));)t++;return n.pos=t,!0}const Tw=[];for(let n=0;n<256;n++)Tw.push(0);"\\!\"#$%&'()*+,./:;<=>?@[]^_`{|}~-".split("").forEach(function(n){Tw[n.charCodeAt(0)]=1});function Gle(n,e){let t=n.pos;const r=n.posMax;if(n.src.charCodeAt(t)!==92||(t++,t>=r))return!1;let i=n.src.charCodeAt(t);if(i===10){for(e||n.push("hardbreak","br",0),t++;t<r&&(i=n.src.charCodeAt(t),!!ut(i));)t++;return n.pos=t,!0}let a=n.src[t];if(i>=55296&&i<=56319&&t+1<r){const o=n.src.charCodeAt(t+1);o>=56320&&o<=57343&&(a+=n.src[t+1],t++)}const s="\\"+a;if(!e){const o=n.push("text_special","",0);i<256&&Tw[i]!==0?o.content=a:o.content=s,o.markup=s,o.info="escape"}return n.pos=t+1,!0}function Wle(n,e){let t=n.pos;if(n.src.charCodeAt(t)!==96)return!1;const i=t;t++;const a=n.posMax;for(;t<a&&n.src.charCodeAt(t)===96;)t++;const s=n.src.slice(i,t),o=s.length;if(n.backticksScanned&&(n.backticks[o]||0)<=i)return e||(n.pending+=s),n.pos+=o,!0;let u=t,l;for(;(l=n.src.indexOf("`",u))!==-1;){for(u=l+1;u<a&&n.src.charCodeAt(u)===96;)u++;const c=u-l;if(c===o){if(!e){const h=n.push("code_inline","code",0);h.markup=s,h.content=n.src.slice(t,l).replace(/\n/g," ").replace(/^ (.+) $/,"$1")}return n.pos=u,!0}n.backticks[c]=l}return n.backticksScanned=!0,e||(n.pending+=s),n.pos+=o,!0}function Vle(n,e){const t=n.pos,r=n.src.charCodeAt(t);if(e||r!==126)return!1;const i=n.scanDelims(n.pos,!0);let a=i.length;const s=String.fromCharCode(r);if(a<2)return!1;let o;a%2&&(o=n.push("text","",0),o.content=s,a--);for(let u=0;u<a;u+=2)o=n.push("text","",0),o.content=s+s,n.delimiters.push({marker:r,length:0,token:n.tokens.length-1,end:-1,open:i.can_open,close:i.can_close});return n.pos+=i.length,!0}function rO(n,e){let t;const r=[],i=e.length;for(let a=0;a<i;a++){const s=e[a];if(s.marker!==126||s.end===-1)continue;const o=e[s.end];t=n.tokens[s.token],t.type="s_open",t.tag="s",t.nesting=1,t.markup="~~",t.content="",t=n.tokens[o.token],t.type="s_close",t.tag="s",t.nesting=-1,t.markup="~~",t.content="",n.tokens[o.token-1].type==="text"&&n.tokens[o.token-1].content==="~"&&r.push(o.token-1)}for(;r.length;){const a=r.pop();let s=a+1;for(;s<n.tokens.length&&n.tokens[s].type==="s_close";)s++;s--,a!==s&&(t=n.tokens[s],n.tokens[s]=n.tokens[a],n.tokens[a]=t)}}function Ule(n){const e=n.tokens_meta,t=n.tokens_meta.length;rO(n,n.delimiters);for(let r=0;r<t;r++)e[r]&&e[r].delimiters&&rO(n,e[r].delimiters)}const jN={tokenize:Vle,postProcess:Ule};function Hle(n,e){const t=n.pos,r=n.src.charCodeAt(t);if(e||r!==95&&r!==42)return!1;const i=n.scanDelims(n.pos,r===42);for(let a=0;a<i.length;a++){const s=n.push("text","",0);s.content=String.fromCharCode(r),n.delimiters.push({marker:r,length:i.length,token:n.tokens.length-1,end:-1,open:i.can_open,close:i.can_close})}return n.pos+=i.length,!0}function iO(n,e){const t=e.length;for(let r=t-1;r>=0;r--){const i=e[r];if(i.marker!==95&&i.marker!==42||i.end===-1)continue;const a=e[i.end],s=r>0&&e[r-1].end===i.end+1&&e[r-1].marker===i.marker&&e[r-1].token===i.token-1&&e[i.end+1].token===a.token+1,o=String.fromCharCode(i.marker),u=n.tokens[i.token];u.type=s?"strong_open":"em_open",u.tag=s?"strong":"em",u.nesting=1,u.markup=s?o+o:o,u.content="";const l=n.tokens[a.token];l.type=s?"strong_close":"em_close",l.tag=s?"strong":"em",l.nesting=-1,l.markup=s?o+o:o,l.content="",s&&(n.tokens[e[r-1].token].content="",n.tokens[e[i.end+1].token].content="",r--)}}function Yle(n){const e=n.tokens_meta,t=n.tokens_meta.length;iO(n,n.delimiters);for(let r=0;r<t;r++)e[r]&&e[r].delimiters&&iO(n,e[r].delimiters)}const qN={tokenize:Hle,postProcess:Yle};function Xle(n,e){let t,r,i,a,s="",o="",u=n.pos,l=!0;if(n.src.charCodeAt(n.pos)!==91)return!1;const c=n.pos,h=n.posMax,d=n.pos+1,f=n.md.helpers.parseLinkLabel(n,n.pos,!0);if(f<0)return!1;let g=f+1;if(g<h&&n.src.charCodeAt(g)===40){for(l=!1,g++;g<h&&(t=n.src.charCodeAt(g),!(!ut(t)&&t!==10));g++);if(g>=h)return!1;if(u=g,i=n.md.helpers.parseLinkDestination(n.src,g,n.posMax),i.ok){for(s=n.md.normalizeLink(i.str),n.md.validateLink(s)?g=i.pos:s="",u=g;g<h&&(t=n.src.charCodeAt(g),!(!ut(t)&&t!==10));g++);if(i=n.md.helpers.parseLinkTitle(n.src,g,n.posMax),g<h&&u!==g&&i.ok)for(o=i.str,g=i.pos;g<h&&(t=n.src.charCodeAt(g),!(!ut(t)&&t!==10));g++);}(g>=h||n.src.charCodeAt(g)!==41)&&(l=!0),g++}if(l){if(typeof n.env.references>"u")return!1;if(g<h&&n.src.charCodeAt(g)===91?(u=g+1,g=n.md.helpers.parseLinkLabel(n,g),g>=0?r=n.src.slice(u,g++):g=f+1):g=f+1,r||(r=n.src.slice(d,f)),a=n.env.references[B0(r)],!a)return n.pos=c,!1;s=a.href,o=a.title}if(!e){n.pos=d,n.posMax=f;const p=n.push("link_open","a",1),v=[["href",s]];p.attrs=v,o&&v.push(["title",o]),n.linkLevel++,n.md.inline.tokenize(n),n.linkLevel--,n.push("link_close","a",-1)}return n.pos=g,n.posMax=h,!0}function Kle(n,e){let t,r,i,a,s,o,u,l,c="";const h=n.pos,d=n.posMax;if(n.src.charCodeAt(n.pos)!==33||n.src.charCodeAt(n.pos+1)!==91)return!1;const f=n.pos+2,g=n.md.helpers.parseLinkLabel(n,n.pos+1,!1);if(g<0)return!1;if(a=g+1,a<d&&n.src.charCodeAt(a)===40){for(a++;a<d&&(t=n.src.charCodeAt(a),!(!ut(t)&&t!==10));a++);if(a>=d)return!1;for(l=a,o=n.md.helpers.parseLinkDestination(n.src,a,n.posMax),o.ok&&(c=n.md.normalizeLink(o.str),n.md.validateLink(c)?a=o.pos:c=""),l=a;a<d&&(t=n.src.charCodeAt(a),!(!ut(t)&&t!==10));a++);if(o=n.md.helpers.parseLinkTitle(n.src,a,n.posMax),a<d&&l!==a&&o.ok)for(u=o.str,a=o.pos;a<d&&(t=n.src.charCodeAt(a),!(!ut(t)&&t!==10));a++);else u="";if(a>=d||n.src.charCodeAt(a)!==41)return n.pos=h,!1;a++}else{if(typeof n.env.references>"u")return!1;if(a<d&&n.src.charCodeAt(a)===91?(l=a+1,a=n.md.helpers.parseLinkLabel(n,a),a>=0?i=n.src.slice(l,a++):a=g+1):a=g+1,i||(i=n.src.slice(f,g)),s=n.env.references[B0(i)],!s)return n.pos=h,!1;c=s.href,u=s.title}if(!e){r=n.src.slice(f,g);const p=[];n.md.inline.parse(r,n.md,n.env,p);const v=n.push("image","img",0),m=[["src",c],["alt",""]];v.attrs=m,v.children=p,v.content=r,u&&m.push(["title",u])}return n.pos=a,n.posMax=d,!0}const Zle=/^([a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*)$/,Jle=/^([a-zA-Z][a-zA-Z0-9+.-]{1,31}):([^<>\x00-\x20]*)$/;function Qle(n,e){let t=n.pos;if(n.src.charCodeAt(t)!==60)return!1;const r=n.pos,i=n.posMax;for(;;){if(++t>=i)return!1;const s=n.src.charCodeAt(t);if(s===60)return!1;if(s===62)break}const a=n.src.slice(r+1,t);if(Jle.test(a)){const s=n.md.normalizeLink(a);if(!n.md.validateLink(s))return!1;if(!e){const o=n.push("link_open","a",1);o.attrs=[["href",s]],o.markup="autolink",o.info="auto";const u=n.push("text","",0);u.content=n.md.normalizeLinkText(a);const l=n.push("link_close","a",-1);l.markup="autolink",l.info="auto"}return n.pos+=a.length+2,!0}if(Zle.test(a)){const s=n.md.normalizeLink("mailto:"+a);if(!n.md.validateLink(s))return!1;if(!e){const o=n.push("link_open","a",1);o.attrs=[["href",s]],o.markup="autolink",o.info="auto";const u=n.push("text","",0);u.content=n.md.normalizeLinkText(a);const l=n.push("link_close","a",-1);l.markup="autolink",l.info="auto"}return n.pos+=a.length+2,!0}return!1}function ece(n){return/^<a[>\s]/i.test(n)}function tce(n){return/^<\/a\s*>/i.test(n)}function nce(n){const e=n|32;return e>=97&&e<=122}function rce(n,e){if(!n.md.options.html)return!1;const t=n.posMax,r=n.pos;if(n.src.charCodeAt(r)!==60||r+2>=t)return!1;const i=n.src.charCodeAt(r+1);if(i!==33&&i!==63&&i!==47&&!nce(i))return!1;const a=n.src.slice(r).match(Nle);if(!a)return!1;if(!e){const s=n.push("html_inline","",0);s.content=a[0],ece(s.content)&&n.linkLevel++,tce(s.content)&&n.linkLevel--}return n.pos+=a[0].length,!0}const ice=/^&#((?:x[a-f0-9]{1,6}|[0-9]{1,7}));/i,ace=/^&([a-z][a-z0-9]{1,31});/i;function sce(n,e){const t=n.pos,r=n.posMax;if(n.src.charCodeAt(t)!==38||t+1>=r)return!1;if(n.src.charCodeAt(t+1)===35){const a=n.src.slice(t).match(ice);if(a){if(!e){const s=a[1][0].toLowerCase()==="x"?parseInt(a[1].slice(1),16):parseInt(a[1],10),o=n.push("text_special","",0);o.content=Cw(s)?Wd(s):Wd(65533),o.markup=a[0],o.info="entity"}return n.pos+=a[0].length,!0}}else{const a=n.src.slice(t).match(ace);if(a){const s=RN(a[0]);if(s!==a[0]){if(!e){const o=n.push("text_special","",0);o.content=s,o.markup=a[0],o.info="entity"}return n.pos+=a[0].length,!0}}}return!1}function aO(n){const e={},t=n.length;if(!t)return;let r=0,i=-2;const a=[];for(let s=0;s<t;s++){const o=n[s];if(a.push(0),(n[r].marker!==o.marker||i!==o.token-1)&&(r=s),i=o.token,o.length=o.length||0,!o.close)continue;e.hasOwnProperty(o.marker)||(e[o.marker]=[-1,-1,-1,-1,-1,-1]);const u=e[o.marker][(o.open?3:0)+o.length%3];let l=r-a[r]-1,c=l;for(;l>u;l-=a[l]+1){const h=n[l];if(h.marker===o.marker&&h.open&&h.end<0){let d=!1;if((h.close||o.open)&&(h.length+o.length)%3===0&&(h.length%3!==0||o.length%3!==0)&&(d=!0),!d){const f=l>0&&!n[l-1].open?a[l-1]+1:0;a[s]=s-l+f,a[l]=f,o.open=!1,h.end=s,h.close=!1,c=-1,i=-2;break}}}c!==-1&&(e[o.marker][(o.open?3:0)+(o.length||0)%3]=c)}}function oce(n){const e=n.tokens_meta,t=n.tokens_meta.length;aO(n.delimiters);for(let r=0;r<t;r++)e[r]&&e[r].delimiters&&aO(e[r].delimiters)}function uce(n){let e,t,r=0;const i=n.tokens,a=n.tokens.length;for(e=t=0;e<a;e++)i[e].nesting<0&&r--,i[e].level=r,i[e].nesting>0&&r++,i[e].type==="text"&&e+1<a&&i[e+1].type==="text"?i[e+1].content=i[e].content+i[e+1].content:(e!==t&&(i[t]=i[e]),t++);e!==t&&(i.length=t)}const zy=[["text",zle],["linkify",jle],["newline",qle],["escape",Gle],["backticks",Wle],["strikethrough",jN.tokenize],["emphasis",qN.tokenize],["link",Xle],["image",Kle],["autolink",Qle],["html_inline",rce],["entity",sce]],$y=[["balance_pairs",oce],["strikethrough",jN.postProcess],["emphasis",qN.postProcess],["fragments_join",uce]];function xc(){this.ruler=new er;for(let n=0;n<zy.length;n++)this.ruler.push(zy[n][0],zy[n][1]);this.ruler2=new er;for(let n=0;n<$y.length;n++)this.ruler2.push($y[n][0],$y[n][1])}xc.prototype.skipToken=function(n){const e=n.pos,t=this.ruler.getRules(""),r=t.length,i=n.md.options.maxNesting,a=n.cache;if(typeof a[e]<"u"){n.pos=a[e];return}let s=!1;if(n.level<i){for(let o=0;o<r;o++)if(n.level++,s=t[o](n,!0),n.level--,s){if(e>=n.pos)throw new Error("inline rule didn't increment state.pos");break}}else n.pos=n.posMax;s||n.pos++,a[e]=n.pos};xc.prototype.tokenize=function(n){const e=this.ruler.getRules(""),t=e.length,r=n.posMax,i=n.md.options.maxNesting;for(;n.pos<r;){const a=n.pos;let s=!1;if(n.level<i){for(let o=0;o<t;o++)if(s=e[o](n,!1),s){if(a>=n.pos)throw new Error("inline rule didn't increment state.pos");break}}if(s){if(n.pos>=r)break;continue}n.pending+=n.src[n.pos++]}n.pending&&n.pushPending()};xc.prototype.parse=function(n,e,t,r){const i=new this.State(n,e,t,r);this.tokenize(i);const a=this.ruler2.getRules(""),s=a.length;for(let o=0;o<s;o++)a[o](i)};xc.prototype.State=bc;function lce(n){const e={};n=n||{},e.src_Any=ON.source,e.src_Cc=MN.source,e.src_Z=NN.source,e.src_P=Sw.source,e.src_ZPCc=[e.src_Z,e.src_P,e.src_Cc].join("|"),e.src_ZCc=[e.src_Z,e.src_Cc].join("|");const t="[><｜]";return e.src_pseudo_letter="(?:(?!"+t+"|"+e.src_ZPCc+")"+e.src_Any+")",e.src_ip4="(?:(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\\.){3}(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)",e.src_auth="(?:(?:(?!"+e.src_ZCc+"|[@/\\[\\]()]).)+@)?",e.src_port="(?::(?:6(?:[0-4]\\d{3}|5(?:[0-4]\\d{2}|5(?:[0-2]\\d|3[0-5])))|[1-5]?\\d{1,4}))?",e.src_host_terminator="(?=$|"+t+"|"+e.src_ZPCc+")(?!"+(n["---"]?"-(?!--)|":"-|")+"_|:\\d|\\.-|\\.(?!$|"+e.src_ZPCc+"))",e.src_path="(?:[/?#](?:(?!"+e.src_ZCc+"|"+t+`|[()[\\]{}.,"'?!\\-;]).|\\[(?:(?!`+e.src_ZCc+"|\\]).)*\\]|\\((?:(?!"+e.src_ZCc+"|[)]).)*\\)|\\{(?:(?!"+e.src_ZCc+'|[}]).)*\\}|\\"(?:(?!'+e.src_ZCc+`|["]).)+\\"|\\'(?:(?!`+e.src_ZCc+"|[']).)+\\'|\\'(?="+e.src_pseudo_letter+"|[-])|\\.{2,}[a-zA-Z0-9%/&]|\\.(?!"+e.src_ZCc+"|[.]|$)|"+(n["---"]?"\\-(?!--(?:[^-]|$))(?:-*)|":"\\-+|")+",(?!"+e.src_ZCc+"|$)|;(?!"+e.src_ZCc+"|$)|\\!+(?!"+e.src_ZCc+"|[!]|$)|\\?(?!"+e.src_ZCc+"|[?]|$))+|\\/)?",e.src_email_name='[\\-;:&=\\+\\$,\\.a-zA-Z0-9_][\\-;:&=\\+\\$,\\"\\.a-zA-Z0-9_]*',e.src_xn="xn--[a-z0-9\\-]{1,59}",e.src_domain_root="(?:"+e.src_xn+"|"+e.src_pseudo_letter+"{1,63})",e.src_domain="(?:"+e.src_xn+"|(?:"+e.src_pseudo_letter+")|(?:"+e.src_pseudo_letter+"(?:-|"+e.src_pseudo_letter+"){0,61}"+e.src_pseudo_letter+"))",e.src_host="(?:(?:(?:(?:"+e.src_domain+")\\.)*"+e.src_domain+"))",e.tpl_host_fuzzy="(?:"+e.src_ip4+"|(?:(?:(?:"+e.src_domain+")\\.)+(?:%TLDS%)))",e.tpl_host_no_ip_fuzzy="(?:(?:(?:"+e.src_domain+")\\.)+(?:%TLDS%))",e.src_host_strict=e.src_host+e.src_host_terminator,e.tpl_host_fuzzy_strict=e.tpl_host_fuzzy+e.src_host_terminator,e.src_host_port_strict=e.src_host+e.src_port+e.src_host_terminator,e.tpl_host_port_fuzzy_strict=e.tpl_host_fuzzy+e.src_port+e.src_host_terminator,e.tpl_host_port_no_ip_fuzzy_strict=e.tpl_host_no_ip_fuzzy+e.src_port+e.src_host_terminator,e.tpl_host_fuzzy_test="localhost|www\\.|\\.\\d{1,3}\\.|(?:\\.(?:%TLDS%)(?:"+e.src_ZPCc+"|>|$))",e.tpl_email_fuzzy="(^|"+t+'|"|\\(|'+e.src_ZCc+")("+e.src_email_name+"@"+e.tpl_host_fuzzy_strict+")",e.tpl_link_fuzzy="(^|(?![.:/\\-_@])(?:[$+<=>^`|｜]|"+e.src_ZPCc+"))((?![$+<=>^`|｜])"+e.tpl_host_port_fuzzy_strict+e.src_path+")",e.tpl_link_no_ip_fuzzy="(^|(?![.:/\\-_@])(?:[$+<=>^`|｜]|"+e.src_ZPCc+"))((?![$+<=>^`|｜])"+e.tpl_host_port_no_ip_fuzzy_strict+e.src_path+")",e}function y2(n){return Array.prototype.slice.call(arguments,1).forEach(function(t){t&&Object.keys(t).forEach(function(r){n[r]=t[r]})}),n}function $0(n){return Object.prototype.toString.call(n)}function cce(n){return $0(n)==="[object String]"}function hce(n){return $0(n)==="[object Object]"}function dce(n){return $0(n)==="[object RegExp]"}function sO(n){return $0(n)==="[object Function]"}function fce(n){return n.replace(/[.?*+^$[\]\\(){}|-]/g,"\\$&")}const GN={fuzzyLink:!0,fuzzyEmail:!0,fuzzyIP:!1};function gce(n){return Object.keys(n||{}).reduce(function(e,t){return e||GN.hasOwnProperty(t)},!1)}const pce={"http:":{validate:function(n,e,t){const r=n.slice(e);return t.re.http||(t.re.http=new RegExp("^\\/\\/"+t.re.src_auth+t.re.src_host_port_strict+t.re.src_path,"i")),t.re.http.test(r)?r.match(t.re.http)[0].length:0}},"https:":"http:","ftp:":"http:","//":{validate:function(n,e,t){const r=n.slice(e);return t.re.no_http||(t.re.no_http=new RegExp("^"+t.re.src_auth+"(?:localhost|(?:(?:"+t.re.src_domain+")\\.)+"+t.re.src_domain_root+")"+t.re.src_port+t.re.src_host_terminator+t.re.src_path,"i")),t.re.no_http.test(r)?e>=3&&n[e-3]===":"||e>=3&&n[e-3]==="/"?0:r.match(t.re.no_http)[0].length:0}},"mailto:":{validate:function(n,e,t){const r=n.slice(e);return t.re.mailto||(t.re.mailto=new RegExp("^"+t.re.src_email_name+"@"+t.re.src_host_strict,"i")),t.re.mailto.test(r)?r.match(t.re.mailto)[0].length:0}}},vce="a[cdefgilmnoqrstuwxz]|b[abdefghijmnorstvwyz]|c[acdfghiklmnoruvwxyz]|d[ejkmoz]|e[cegrstu]|f[ijkmor]|g[abdefghilmnpqrstuwy]|h[kmnrtu]|i[delmnoqrst]|j[emop]|k[eghimnprwyz]|l[abcikrstuvy]|m[acdeghklmnopqrstuvwxyz]|n[acefgilopruz]|om|p[aefghklmnrstwy]|qa|r[eosuw]|s[abcdeghijklmnortuvxyz]|t[cdfghjklmnortvwz]|u[agksyz]|v[aceginu]|w[fs]|y[et]|z[amw]",mce="biz|com|edu|gov|net|org|pro|web|xxx|aero|asia|coop|info|museum|name|shop|рф".split("|");function yce(n){n.__index__=-1,n.__text_cache__=""}function bce(n){return function(e,t){const r=e.slice(t);return n.test(r)?r.match(n)[0].length:0}}function oO(){return function(n,e){e.normalize(n)}}function Vd(n){const e=n.re=lce(n.__opts__),t=n.__tlds__.slice();n.onCompile(),n.__tlds_replaced__||t.push(vce),t.push(e.src_xn),e.src_tlds=t.join("|");function r(o){return o.replace("%TLDS%",e.src_tlds)}e.email_fuzzy=RegExp(r(e.tpl_email_fuzzy),"i"),e.link_fuzzy=RegExp(r(e.tpl_link_fuzzy),"i"),e.link_no_ip_fuzzy=RegExp(r(e.tpl_link_no_ip_fuzzy),"i"),e.host_fuzzy_test=RegExp(r(e.tpl_host_fuzzy_test),"i");const i=[];n.__compiled__={};function a(o,u){throw new Error('(LinkifyIt) Invalid schema "'+o+'": '+u)}Object.keys(n.__schemas__).forEach(function(o){const u=n.__schemas__[o];if(u===null)return;const l={validate:null,link:null};if(n.__compiled__[o]=l,hce(u)){dce(u.validate)?l.validate=bce(u.validate):sO(u.validate)?l.validate=u.validate:a(o,u),sO(u.normalize)?l.normalize=u.normalize:u.normalize?a(o,u):l.normalize=oO();return}if(cce(u)){i.push(o);return}a(o,u)}),i.forEach(function(o){n.__compiled__[n.__schemas__[o]]&&(n.__compiled__[o].validate=n.__compiled__[n.__schemas__[o]].validate,n.__compiled__[o].normalize=n.__compiled__[n.__schemas__[o]].normalize)}),n.__compiled__[""]={validate:null,normalize:oO()};const s=Object.keys(n.__compiled__).filter(function(o){return o.length>0&&n.__compiled__[o]}).map(fce).join("|");n.re.schema_test=RegExp("(^|(?!_)(?:[><｜]|"+e.src_ZPCc+"))("+s+")","i"),n.re.schema_search=RegExp("(^|(?!_)(?:[><｜]|"+e.src_ZPCc+"))("+s+")","ig"),n.re.schema_at_start=RegExp("^"+n.re.schema_search.source,"i"),n.re.pretest=RegExp("("+n.re.schema_test.source+")|("+n.re.host_fuzzy_test.source+")|@","i"),yce(n)}function xce(n,e){const t=n.__index__,r=n.__last_index__,i=n.__text_cache__.slice(t,r);this.schema=n.__schema__.toLowerCase(),this.index=t+e,this.lastIndex=r+e,this.raw=i,this.text=i,this.url=i}function b2(n,e){const t=new xce(n,e);return n.__compiled__[t.schema].normalize(t,n),t}function wr(n,e){if(!(this instanceof wr))return new wr(n,e);e||gce(n)&&(e=n,n={}),this.__opts__=y2({},GN,e),this.__index__=-1,this.__last_index__=-1,this.__schema__="",this.__text_cache__="",this.__schemas__=y2({},pce,n),this.__compiled__={},this.__tlds__=mce,this.__tlds_replaced__=!1,this.re={},Vd(this)}wr.prototype.add=function(e,t){return this.__schemas__[e]=t,Vd(this),this};wr.prototype.set=function(e){return this.__opts__=y2(this.__opts__,e),this};wr.prototype.test=function(e){if(this.__text_cache__=e,this.__index__=-1,!e.length)return!1;let t,r,i,a,s,o,u,l,c;if(this.re.schema_test.test(e)){for(u=this.re.schema_search,u.lastIndex=0;(t=u.exec(e))!==null;)if(a=this.testSchemaAt(e,t[2],u.lastIndex),a){this.__schema__=t[2],this.__index__=t.index+t[1].length,this.__last_index__=t.index+t[0].length+a;break}}return this.__opts__.fuzzyLink&&this.__compiled__["http:"]&&(l=e.search(this.re.host_fuzzy_test),l>=0&&(this.__index__<0||l<this.__index__)&&(r=e.match(this.__opts__.fuzzyIP?this.re.link_fuzzy:this.re.link_no_ip_fuzzy))!==null&&(s=r.index+r[1].length,(this.__index__<0||s<this.__index__)&&(this.__schema__="",this.__index__=s,this.__last_index__=r.index+r[0].length))),this.__opts__.fuzzyEmail&&this.__compiled__["mailto:"]&&(c=e.indexOf("@"),c>=0&&(i=e.match(this.re.email_fuzzy))!==null&&(s=i.index+i[1].length,o=i.index+i[0].length,(this.__index__<0||s<this.__index__||s===this.__index__&&o>this.__last_index__)&&(this.__schema__="mailto:",this.__index__=s,this.__last_index__=o))),this.__index__>=0};wr.prototype.pretest=function(e){return this.re.pretest.test(e)};wr.prototype.testSchemaAt=function(e,t,r){return this.__compiled__[t.toLowerCase()]?this.__compiled__[t.toLowerCase()].validate(e,r,this):0};wr.prototype.match=function(e){const t=[];let r=0;this.__index__>=0&&this.__text_cache__===e&&(t.push(b2(this,r)),r=this.__last_index__);let i=r?e.slice(r):e;for(;this.test(i);)t.push(b2(this,r)),i=i.slice(this.__last_index__),r+=this.__last_index__;return t.length?t:null};wr.prototype.matchAtStart=function(e){if(this.__text_cache__=e,this.__index__=-1,!e.length)return null;const t=this.re.schema_at_start.exec(e);if(!t)return null;const r=this.testSchemaAt(e,t[2],t[0].length);return r?(this.__schema__=t[2],this.__index__=t.index+t[1].length,this.__last_index__=t.index+t[0].length+r,b2(this,0)):null};wr.prototype.tlds=function(e,t){return e=Array.isArray(e)?e:[e],t?(this.__tlds__=this.__tlds__.concat(e).sort().filter(function(r,i,a){return r!==a[i-1]}).reverse(),Vd(this),this):(this.__tlds__=e.slice(),this.__tlds_replaced__=!0,Vd(this),this)};wr.prototype.normalize=function(e){e.schema||(e.url="http://"+e.url),e.schema==="mailto:"&&!/^mailto:/i.test(e.url)&&(e.url="mailto:"+e.url)};wr.prototype.onCompile=function(){};const Vo=2147483647,Ai=36,Ow=1,jl=26,wce=38,Ece=700,WN=72,VN=128,UN="-",_ce=/^xn--/,Sce=/[^\0-\x7F]/,kce=/[\x2E\u3002\uFF0E\uFF61]/g,Cce={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},jy=Ai-Ow,Ti=Math.floor,qy=String.fromCharCode;function Ra(n){throw new RangeError(Cce[n])}function Ace(n,e){const t=[];let r=n.length;for(;r--;)t[r]=e(n[r]);return t}function HN(n,e){const t=n.split("@");let r="";t.length>1&&(r=t[0]+"@",n=t[1]),n=n.replace(kce,".");const i=n.split("."),a=Ace(i,e).join(".");return r+a}function YN(n){const e=[];let t=0;const r=n.length;for(;t<r;){const i=n.charCodeAt(t++);if(i>=55296&&i<=56319&&t<r){const a=n.charCodeAt(t++);(a&64512)==56320?e.push(((i&1023)<<10)+(a&1023)+65536):(e.push(i),t--)}else e.push(i)}return e}const Tce=n=>String.fromCodePoint(...n),Oce=function(n){return n>=48&&n<58?26+(n-48):n>=65&&n<91?n-65:n>=97&&n<123?n-97:Ai},uO=function(n,e){return n+22+75*(n<26)-((e!=0)<<5)},XN=function(n,e,t){let r=0;for(n=t?Ti(n/Ece):n>>1,n+=Ti(n/e);n>jy*jl>>1;r+=Ai)n=Ti(n/jy);return Ti(r+(jy+1)*n/(n+wce))},KN=function(n){const e=[],t=n.length;let r=0,i=VN,a=WN,s=n.lastIndexOf(UN);s<0&&(s=0);for(let o=0;o<s;++o)n.charCodeAt(o)>=128&&Ra("not-basic"),e.push(n.charCodeAt(o));for(let o=s>0?s+1:0;o<t;){const u=r;for(let c=1,h=Ai;;h+=Ai){o>=t&&Ra("invalid-input");const d=Oce(n.charCodeAt(o++));d>=Ai&&Ra("invalid-input"),d>Ti((Vo-r)/c)&&Ra("overflow"),r+=d*c;const f=h<=a?Ow:h>=a+jl?jl:h-a;if(d<f)break;const g=Ai-f;c>Ti(Vo/g)&&Ra("overflow"),c*=g}const l=e.length+1;a=XN(r-u,l,u==0),Ti(r/l)>Vo-i&&Ra("overflow"),i+=Ti(r/l),r%=l,e.splice(r++,0,i)}return String.fromCodePoint(...e)},ZN=function(n){const e=[];n=YN(n);const t=n.length;let r=VN,i=0,a=WN;for(const u of n)u<128&&e.push(qy(u));const s=e.length;let o=s;for(s&&e.push(UN);o<t;){let u=Vo;for(const c of n)c>=r&&c<u&&(u=c);const l=o+1;u-r>Ti((Vo-i)/l)&&Ra("overflow"),i+=(u-r)*l,r=u;for(const c of n)if(c<r&&++i>Vo&&Ra("overflow"),c===r){let h=i;for(let d=Ai;;d+=Ai){const f=d<=a?Ow:d>=a+jl?jl:d-a;if(h<f)break;const g=h-f,p=Ai-f;e.push(qy(uO(f+g%p,0))),h=Ti(g/p)}e.push(qy(uO(h,0))),a=XN(i,l,o===s),i=0,++o}++i,++r}return e.join("")},Mce=function(n){return HN(n,function(e){return _ce.test(e)?KN(e.slice(4).toLowerCase()):e})},Pce=function(n){return HN(n,function(e){return Sce.test(e)?"xn--"+ZN(e):e})},JN={version:"2.3.1",ucs2:{decode:YN,encode:Tce},decode:KN,encode:ZN,toASCII:Pce,toUnicode:Mce},Nce={options:{html:!1,xhtmlOut:!1,breaks:!1,langPrefix:"language-",linkify:!1,typographer:!1,quotes:"“”‘’",highlight:null,maxNesting:100},components:{core:{},block:{},inline:{}}},Dce={options:{html:!1,xhtmlOut:!1,breaks:!1,langPrefix:"language-",linkify:!1,typographer:!1,quotes:"“”‘’",highlight:null,maxNesting:20},components:{core:{rules:["normalize","block","inline","text_join"]},block:{rules:["paragraph"]},inline:{rules:["text"],rules2:["balance_pairs","fragments_join"]}}},Rce={options:{html:!0,xhtmlOut:!0,breaks:!1,langPrefix:"language-",linkify:!1,typographer:!1,quotes:"“”‘’",highlight:null,maxNesting:20},components:{core:{rules:["normalize","block","inline","text_join"]},block:{rules:["blockquote","code","fence","heading","hr","html_block","lheading","list","reference","paragraph"]},inline:{rules:["autolink","backticks","emphasis","entity","escape","html_inline","image","link","newline","text"],rules2:["balance_pairs","emphasis","fragments_join"]}}},Lce={default:Nce,zero:Dce,commonmark:Rce},Ice=/^(vbscript|javascript|file|data):/,Fce=/^data:image\/(gif|png|jpeg|webp);/;function Bce(n){const e=n.trim().toLowerCase();return Ice.test(e)?Fce.test(e):!0}const QN=["http:","https:","mailto:"];function zce(n){const e=_w(n,!0);if(e.hostname&&(!e.protocol||QN.indexOf(e.protocol)>=0))try{e.hostname=JN.toASCII(e.hostname)}catch{}return yc(Ew(e))}function $ce(n){const e=_w(n,!0);if(e.hostname&&(!e.protocol||QN.indexOf(e.protocol)>=0))try{e.hostname=JN.toUnicode(e.hostname)}catch{}return lu(Ew(e),lu.defaultChars+"%")}function Ir(n,e){if(!(this instanceof Ir))return new Ir(n,e);e||kw(n)||(e=n||{},n="default"),this.inline=new xc,this.block=new z0,this.core=new Aw,this.renderer=new Cu,this.linkify=new wr,this.validateLink=Bce,this.normalizeLink=zce,this.normalizeLinkText=$ce,this.utils=que,this.helpers=F0({},Uue),this.options={},this.configure(n),e&&this.set(e)}Ir.prototype.set=function(n){return F0(this.options,n),this};Ir.prototype.configure=function(n){const e=this;if(kw(n)){const t=n;if(n=Lce[t],!n)throw new Error('Wrong `markdown-it` preset "'+t+'", check name')}if(!n)throw new Error("Wrong `markdown-it` preset, can't be empty");return n.options&&e.set(n.options),n.components&&Object.keys(n.components).forEach(function(t){n.components[t].rules&&e[t].ruler.enableOnly(n.components[t].rules),n.components[t].rules2&&e[t].ruler2.enableOnly(n.components[t].rules2)}),this};Ir.prototype.enable=function(n,e){let t=[];Array.isArray(n)||(n=[n]),["core","block","inline"].forEach(function(i){t=t.concat(this[i].ruler.enable(n,!0))},this),t=t.concat(this.inline.ruler2.enable(n,!0));const r=n.filter(function(i){return t.indexOf(i)<0});if(r.length&&!e)throw new Error("MarkdownIt. Failed to enable unknown rule(s): "+r);return this};Ir.prototype.disable=function(n,e){let t=[];Array.isArray(n)||(n=[n]),["core","block","inline"].forEach(function(i){t=t.concat(this[i].ruler.disable(n,!0))},this),t=t.concat(this.inline.ruler2.disable(n,!0));const r=n.filter(function(i){return t.indexOf(i)<0});if(r.length&&!e)throw new Error("MarkdownIt. Failed to disable unknown rule(s): "+r);return this};Ir.prototype.use=function(n){const e=[this].concat(Array.prototype.slice.call(arguments,1));return n.apply(n,e),this};Ir.prototype.parse=function(n,e){if(typeof n!="string")throw new Error("Input data should be a String");const t=new this.core.State(n,this,e);return this.core.process(t),t.tokens};Ir.prototype.render=function(n,e){return e=e||{},this.renderer.render(this.parse(n,e),this.options,e)};Ir.prototype.parseInline=function(n,e){const t=new this.core.State(n,this,e);return t.inlineMode=!0,this.core.process(t),t.tokens};Ir.prototype.renderInline=function(n,e){return e=e||{},this.renderer.render(this.parseInline(n,e),this.options,e)};const lO=new Set([!0,!1,"alt","title"]);function eD(n,e){return(Array.isArray(n)?n:[]).filter(([t])=>t!==e)}function tD(n,e){n&&n.attrs&&(n.attrs=eD(n.attrs,e))}function jce(n,e){if(!lO.has(n))throw new TypeError(`figcaption must be one of: ${[...lO]}.`);if(n==="alt")return e.content;const t=e.attrs.find(([r])=>r==="title");return Array.isArray(t)&&t[1]?(tD(e,"title"),t[1]):void 0}function qce(n,e){e=e||{},n.core.ruler.before("linkify","image_figures",function(t){let r=1;for(let i=1,a=t.tokens.length;i<a-1;++i){const s=t.tokens[i];if(s.type!=="inline"||!s.children||s.children.length!==1&&s.children.length!==3||s.children.length===1&&s.children[0].type!=="image")continue;if(s.children.length===3){const[l,c,h]=s.children;if(l.type!=="link_open"||c.type!=="image"||h.type!=="link_close")continue}if(i!==0&&t.tokens[i-1].type!=="paragraph_open"||i!==a-1&&t.tokens[i+1].type!=="paragraph_close")continue;const o=t.tokens[i-1];let u;if(o.type="figure_open",o.tag="figure",t.tokens[i+1].type="figure_close",t.tokens[i+1].tag="figure",e.dataType&&t.tokens[i-1].attrPush(["data-type","image"]),e.link&&s.children.length===1){[u]=s.children;const l=new t.Token("link_open","a",1);l.attrPush(["href",u.attrGet("src")]),s.children.unshift(l),s.children.push(new t.Token("link_close","a",-1))}if(u=s.children.length===1?s.children[0]:s.children[1],e.figcaption){const l=jce(e.figcaption,u);if(l){const[c]=n.parseInline(l,t.env);s.children.push(new t.Token("figcaption_open","figcaption",1)),s.children.push(...c.children),s.children.push(new t.Token("figcaption_close","figcaption",-1)),u.attrs&&(u.attrs=eD(u.attrs,"title"))}}if(e.copyAttrs&&u.attrs){const l=e.copyAttrs===!0?"":e.copyAttrs;o.attrs=u.attrs.filter(([c])=>c.match(l)).map(c=>Array.from(c))}if(e.tabindex&&(t.tokens[i-1].attrPush(["tabindex",r]),r++),e.lazy&&(u.attrs.some(([l])=>l==="loading")||u.attrs.push(["loading","lazy"])),e.async&&(u.attrs.some(([l])=>l==="decoding")||u.attrs.push(["decoding","async"])),e.classes&&typeof e.classes=="string"){let l=!1;for(let c=0,h=u.attrs.length;c<h&&!l;c++){const d=u.attrs[c];d[0]==="class"&&(d[1]=`${d[1]} ${e.classes}`,l=!0)}l||u.attrs.push(["class",e.classes])}if(e.removeSrc){const l=u.attrs.find(([c])=>c==="src");u.attrs.push(["data-src",l[1]]),tD(u,"src")}}})}const Gce=/\\([ \\!"#$%&'()*+,./:;<=>?@[\]^_`{|}~-])/g;function Wce(n,e){const t=n.posMax,r=n.pos;if(n.src.charCodeAt(r)!==126||e||r+2>=t)return!1;n.pos=r+1;let i=!1;for(;n.pos<t;){if(n.src.charCodeAt(n.pos)===126){i=!0;break}n.md.inline.skipToken(n)}if(!i||r+1===n.pos)return n.pos=r,!1;const a=n.src.slice(r+1,n.pos);if(a.match(/(^|[^\\])(\\\\)*\s/))return n.pos=r,!1;n.posMax=n.pos,n.pos=r+1;const s=n.push("sub_open","sub",1);s.markup="~";const o=n.push("text","",0);o.content=a.replace(Gce,"$1");const u=n.push("sub_close","sub",-1);return u.markup="~",n.pos=n.posMax+1,n.posMax=t,!0}function Vce(n){n.inline.ruler.after("emphasis","sub",Wce)}const Uce=/\\([ \\!"#$%&'()*+,./:;<=>?@[\]^_`{|}~-])/g;function Hce(n,e){const t=n.posMax,r=n.pos;if(n.src.charCodeAt(r)!==94||e||r+2>=t)return!1;n.pos=r+1;let i=!1;for(;n.pos<t;){if(n.src.charCodeAt(n.pos)===94){i=!0;break}n.md.inline.skipToken(n)}if(!i||r+1===n.pos)return n.pos=r,!1;const a=n.src.slice(r+1,n.pos);if(a.match(/(^|[^\\])(\\\\)*\s/))return n.pos=r,!1;n.posMax=n.pos,n.pos=r+1;const s=n.push("sup_open","sup",1);s.markup="^";const o=n.push("text","",0);o.content=a.replace(Uce,"$1");const u=n.push("sup_close","sup",-1);return u.markup="^",n.pos=n.posMax+1,n.posMax=t,!0}function Yce(n){n.inline.ruler.after("emphasis","sup",Hce)}const Mo=typeof performance=="object"&&performance&&typeof performance.now=="function"?performance:Date,nD=new Set,x2=typeof process=="object"&&process?process:{},rD=(n,e,t,r)=>{typeof x2.emitWarning=="function"?x2.emitWarning(n,e,t,r):console.error(`[${t}] ${e}: ${n}`)};let Ud=globalThis.AbortController,cO=globalThis.AbortSignal;var bO;if(typeof Ud>"u"){cO=class{constructor(){ve(this,"onabort");ve(this,"_onabort",[]);ve(this,"reason");ve(this,"aborted",!1)}addEventListener(r,i){this._onabort.push(i)}},Ud=class{constructor(){ve(this,"signal",new cO);e()}abort(r){var i,a;if(!this.signal.aborted){this.signal.reason=r,this.signal.aborted=!0;for(const s of this.signal._onabort)s(r);(a=(i=this.signal).onabort)==null||a.call(i,r)}}};let n=((bO=x2.env)==null?void 0:bO.LRU_CACHE_IGNORE_AC_WARNING)!=="1";const e=()=>{n&&(n=!1,rD("AbortController is not defined. If using lru-cache in node 14, load an AbortController polyfill from the `node-abort-controller` package. A minimal polyfill is provided for use by LRUCache.fetch(), but it should not be relied upon in other contexts (eg, passing it to other APIs that use AbortController/AbortSignal might have undesirable effects). You may disable this with LRU_CACHE_IGNORE_AC_WARNING=1 in the env.","NO_ABORT_CONTROLLER","ENOTSUP",e))}}const Xce=n=>!nD.has(n),Ta=n=>n&&n===Math.floor(n)&&n>0&&isFinite(n),iD=n=>Ta(n)?n<=Math.pow(2,8)?Uint8Array:n<=Math.pow(2,16)?Uint16Array:n<=Math.pow(2,32)?Uint32Array:n<=Number.MAX_SAFE_INTEGER?Xh:null:null;class Xh extends Array{constructor(e){super(e),this.fill(0)}}var Uo;const Ms=class Ms{constructor(e,t){ve(this,"heap");ve(this,"length");if(!I(Ms,Uo))throw new TypeError("instantiate Stack using Stack.create(n)");this.heap=new t(e),this.length=0}static create(e){const t=iD(e);if(!t)return[];fe(Ms,Uo,!0);const r=new Ms(e,t);return fe(Ms,Uo,!1),r}push(e){this.heap[this.length++]=e}pop(){return this.heap[--this.length]}};Uo=new WeakMap,ye(Ms,Uo,!1);let w2=Ms;var Ur,ir,Hr,Yr,Ho,Yo,qt,Xr,Lt,ft,Se,Dn,ar,kn,tn,Kr,nn,Zr,Jr,sr,Qr,$a,Rn,Gl,_2,Is,Ki,Wl,or,Kd,aD,Fs,Xo,Vl,yi,Oa,bi,Ma,Ul,S2,ufe,Ko,Kh,Zo,Zh,tt,ht,Hl,k2,Bs,al,xi,Pa,Yl,C2;const Nw=class Nw{constructor(e){ye(this,Gl);ye(this,Kd);ye(this,yi);ye(this,bi);ye(this,Ul);ye(this,Ko);ye(this,Zo);ye(this,tt);ye(this,Hl);ye(this,Bs);ye(this,xi);ye(this,Yl);ye(this,Ur,void 0);ye(this,ir,void 0);ye(this,Hr,void 0);ye(this,Yr,void 0);ye(this,Ho,void 0);ye(this,Yo,void 0);ve(this,"ttl");ve(this,"ttlResolution");ve(this,"ttlAutopurge");ve(this,"updateAgeOnGet");ve(this,"updateAgeOnHas");ve(this,"allowStale");ve(this,"noDisposeOnSet");ve(this,"noUpdateTTL");ve(this,"maxEntrySize");ve(this,"sizeCalculation");ve(this,"noDeleteOnFetchRejection");ve(this,"noDeleteOnStaleGet");ve(this,"allowStaleOnFetchAbort");ve(this,"allowStaleOnFetchRejection");ve(this,"ignoreFetchAbort");ye(this,qt,void 0);ye(this,Xr,void 0);ye(this,Lt,void 0);ye(this,ft,void 0);ye(this,Se,void 0);ye(this,Dn,void 0);ye(this,ar,void 0);ye(this,kn,void 0);ye(this,tn,void 0);ye(this,Kr,void 0);ye(this,nn,void 0);ye(this,Zr,void 0);ye(this,Jr,void 0);ye(this,sr,void 0);ye(this,Qr,void 0);ye(this,$a,void 0);ye(this,Rn,void 0);ye(this,Is,()=>{});ye(this,Ki,()=>{});ye(this,Wl,()=>{});ye(this,or,()=>!1);ye(this,Fs,e=>{});ye(this,Xo,(e,t,r)=>{});ye(this,Vl,(e,t,r,i)=>{if(r||i)throw new TypeError("cannot set size without setting maxSize or maxEntrySize on cache");return 0});ve(this,ufe,"LRUCache");const{max:t=0,ttl:r,ttlResolution:i=1,ttlAutopurge:a,updateAgeOnGet:s,updateAgeOnHas:o,allowStale:u,dispose:l,disposeAfter:c,noDisposeOnSet:h,noUpdateTTL:d,maxSize:f=0,maxEntrySize:g=0,sizeCalculation:p,fetchMethod:v,memoMethod:m,noDeleteOnFetchRejection:y,noDeleteOnStaleGet:b,allowStaleOnFetchRejection:x,allowStaleOnFetchAbort:w,ignoreFetchAbort:E}=e;if(t!==0&&!Ta(t))throw new TypeError("max option must be a nonnegative integer");const _=t?iD(t):Array;if(!_)throw new Error("invalid max value: "+t);if(fe(this,Ur,t),fe(this,ir,f),this.maxEntrySize=g||I(this,ir),this.sizeCalculation=p,this.sizeCalculation){if(!I(this,ir)&&!this.maxEntrySize)throw new TypeError("cannot set sizeCalculation without setting maxSize or maxEntrySize");if(typeof this.sizeCalculation!="function")throw new TypeError("sizeCalculation set to non-function")}if(m!==void 0&&typeof m!="function")throw new TypeError("memoMethod must be a function if defined");if(fe(this,Yo,m),v!==void 0&&typeof v!="function")throw new TypeError("fetchMethod must be a function if specified");if(fe(this,Ho,v),fe(this,$a,!!v),fe(this,Lt,new Map),fe(this,ft,new Array(t).fill(void 0)),fe(this,Se,new Array(t).fill(void 0)),fe(this,Dn,new _(t)),fe(this,ar,new _(t)),fe(this,kn,0),fe(this,tn,0),fe(this,Kr,w2.create(t)),fe(this,qt,0),fe(this,Xr,0),typeof l=="function"&&fe(this,Hr,l),typeof c=="function"?(fe(this,Yr,c),fe(this,nn,[])):(fe(this,Yr,void 0),fe(this,nn,void 0)),fe(this,Qr,!!I(this,Hr)),fe(this,Rn,!!I(this,Yr)),this.noDisposeOnSet=!!h,this.noUpdateTTL=!!d,this.noDeleteOnFetchRejection=!!y,this.allowStaleOnFetchRejection=!!x,this.allowStaleOnFetchAbort=!!w,this.ignoreFetchAbort=!!E,this.maxEntrySize!==0){if(I(this,ir)!==0&&!Ta(I(this,ir)))throw new TypeError("maxSize must be a positive integer if specified");if(!Ta(this.maxEntrySize))throw new TypeError("maxEntrySize must be a positive integer if specified");ue(this,Kd,aD).call(this)}if(this.allowStale=!!u,this.noDeleteOnStaleGet=!!b,this.updateAgeOnGet=!!s,this.updateAgeOnHas=!!o,this.ttlResolution=Ta(i)||i===0?i:1,this.ttlAutopurge=!!a,this.ttl=r||0,this.ttl){if(!Ta(this.ttl))throw new TypeError("ttl must be a positive integer if specified");ue(this,Gl,_2).call(this)}if(I(this,Ur)===0&&this.ttl===0&&I(this,ir)===0)throw new TypeError("At least one of max, maxSize, or ttl is required");if(!this.ttlAutopurge&&!I(this,Ur)&&!I(this,ir)){const S="LRU_CACHE_UNBOUNDED";Xce(S)&&(nD.add(S),rD("TTL caching without ttlAutopurge, max, or maxSize can result in unbounded memory consumption.","UnboundedCacheWarning",S,Nw))}}static unsafeExposeInternals(e){return{starts:I(e,Jr),ttls:I(e,sr),sizes:I(e,Zr),keyMap:I(e,Lt),keyList:I(e,ft),valList:I(e,Se),next:I(e,Dn),prev:I(e,ar),get head(){return I(e,kn)},get tail(){return I(e,tn)},free:I(e,Kr),isBackgroundFetch:t=>{var r;return ue(r=e,tt,ht).call(r,t)},backgroundFetch:(t,r,i,a)=>{var s;return ue(s=e,Zo,Zh).call(s,t,r,i,a)},moveToTail:t=>{var r;return ue(r=e,Bs,al).call(r,t)},indexes:t=>{var r;return ue(r=e,yi,Oa).call(r,t)},rindexes:t=>{var r;return ue(r=e,bi,Ma).call(r,t)},isStale:t=>{var r;return I(r=e,or).call(r,t)}}}get max(){return I(this,Ur)}get maxSize(){return I(this,ir)}get calculatedSize(){return I(this,Xr)}get size(){return I(this,qt)}get fetchMethod(){return I(this,Ho)}get memoMethod(){return I(this,Yo)}get dispose(){return I(this,Hr)}get disposeAfter(){return I(this,Yr)}getRemainingTTL(e){return I(this,Lt).has(e)?1/0:0}*entries(){for(const e of ue(this,yi,Oa).call(this))I(this,Se)[e]!==void 0&&I(this,ft)[e]!==void 0&&!ue(this,tt,ht).call(this,I(this,Se)[e])&&(yield[I(this,ft)[e],I(this,Se)[e]])}*rentries(){for(const e of ue(this,bi,Ma).call(this))I(this,Se)[e]!==void 0&&I(this,ft)[e]!==void 0&&!ue(this,tt,ht).call(this,I(this,Se)[e])&&(yield[I(this,ft)[e],I(this,Se)[e]])}*keys(){for(const e of ue(this,yi,Oa).call(this)){const t=I(this,ft)[e];t!==void 0&&!ue(this,tt,ht).call(this,I(this,Se)[e])&&(yield t)}}*rkeys(){for(const e of ue(this,bi,Ma).call(this)){const t=I(this,ft)[e];t!==void 0&&!ue(this,tt,ht).call(this,I(this,Se)[e])&&(yield t)}}*values(){for(const e of ue(this,yi,Oa).call(this))I(this,Se)[e]!==void 0&&!ue(this,tt,ht).call(this,I(this,Se)[e])&&(yield I(this,Se)[e])}*rvalues(){for(const e of ue(this,bi,Ma).call(this))I(this,Se)[e]!==void 0&&!ue(this,tt,ht).call(this,I(this,Se)[e])&&(yield I(this,Se)[e])}[Symbol.iterator](){return this.entries()}find(e,t={}){for(const r of ue(this,yi,Oa).call(this)){const i=I(this,Se)[r],a=ue(this,tt,ht).call(this,i)?i.__staleWhileFetching:i;if(a!==void 0&&e(a,I(this,ft)[r],this))return this.get(I(this,ft)[r],t)}}forEach(e,t=this){for(const r of ue(this,yi,Oa).call(this)){const i=I(this,Se)[r],a=ue(this,tt,ht).call(this,i)?i.__staleWhileFetching:i;a!==void 0&&e.call(t,a,I(this,ft)[r],this)}}rforEach(e,t=this){for(const r of ue(this,bi,Ma).call(this)){const i=I(this,Se)[r],a=ue(this,tt,ht).call(this,i)?i.__staleWhileFetching:i;a!==void 0&&e.call(t,a,I(this,ft)[r],this)}}purgeStale(){let e=!1;for(const t of ue(this,bi,Ma).call(this,{allowStale:!0}))I(this,or).call(this,t)&&(ue(this,xi,Pa).call(this,I(this,ft)[t],"expire"),e=!0);return e}info(e){const t=I(this,Lt).get(e);if(t===void 0)return;const r=I(this,Se)[t],i=ue(this,tt,ht).call(this,r)?r.__staleWhileFetching:r;if(i===void 0)return;const a={value:i};if(I(this,sr)&&I(this,Jr)){const s=I(this,sr)[t],o=I(this,Jr)[t];if(s&&o){const u=s-(Mo.now()-o);a.ttl=u,a.start=Date.now()}}return I(this,Zr)&&(a.size=I(this,Zr)[t]),a}dump(){const e=[];for(const t of ue(this,yi,Oa).call(this,{allowStale:!0})){const r=I(this,ft)[t],i=I(this,Se)[t],a=ue(this,tt,ht).call(this,i)?i.__staleWhileFetching:i;if(a===void 0||r===void 0)continue;const s={value:a};if(I(this,sr)&&I(this,Jr)){s.ttl=I(this,sr)[t];const o=Mo.now()-I(this,Jr)[t];s.start=Math.floor(Date.now()-o)}I(this,Zr)&&(s.size=I(this,Zr)[t]),e.unshift([r,s])}return e}load(e){this.clear();for(const[t,r]of e){if(r.start){const i=Date.now()-r.start;r.start=Mo.now()-i}this.set(t,r.value,r)}}set(e,t,r={}){var d,f,g,p,v;if(t===void 0)return this.delete(e),this;const{ttl:i=this.ttl,start:a,noDisposeOnSet:s=this.noDisposeOnSet,sizeCalculation:o=this.sizeCalculation,status:u}=r;let{noUpdateTTL:l=this.noUpdateTTL}=r;const c=I(this,Vl).call(this,e,t,r.size||0,o);if(this.maxEntrySize&&c>this.maxEntrySize)return u&&(u.set="miss",u.maxEntrySizeExceeded=!0),ue(this,xi,Pa).call(this,e,"set"),this;let h=I(this,qt)===0?void 0:I(this,Lt).get(e);if(h===void 0)h=I(this,qt)===0?I(this,tn):I(this,Kr).length!==0?I(this,Kr).pop():I(this,qt)===I(this,Ur)?ue(this,Ko,Kh).call(this,!1):I(this,qt),I(this,ft)[h]=e,I(this,Se)[h]=t,I(this,Lt).set(e,h),I(this,Dn)[I(this,tn)]=h,I(this,ar)[h]=I(this,tn),fe(this,tn,h),wc(this,qt)._++,I(this,Xo).call(this,h,c,u),u&&(u.set="add"),l=!1;else{ue(this,Bs,al).call(this,h);const m=I(this,Se)[h];if(t!==m){if(I(this,$a)&&ue(this,tt,ht).call(this,m)){m.__abortController.abort(new Error("replaced"));const{__staleWhileFetching:y}=m;y!==void 0&&!s&&(I(this,Qr)&&((d=I(this,Hr))==null||d.call(this,y,e,"set")),I(this,Rn)&&((f=I(this,nn))==null||f.push([y,e,"set"])))}else s||(I(this,Qr)&&((g=I(this,Hr))==null||g.call(this,m,e,"set")),I(this,Rn)&&((p=I(this,nn))==null||p.push([m,e,"set"])));if(I(this,Fs).call(this,h),I(this,Xo).call(this,h,c,u),I(this,Se)[h]=t,u){u.set="replace";const y=m&&ue(this,tt,ht).call(this,m)?m.__staleWhileFetching:m;y!==void 0&&(u.oldValue=y)}}else u&&(u.set="update")}if(i!==0&&!I(this,sr)&&ue(this,Gl,_2).call(this),I(this,sr)&&(l||I(this,Wl).call(this,h,i,a),u&&I(this,Ki).call(this,u,h)),!s&&I(this,Rn)&&I(this,nn)){const m=I(this,nn);let y;for(;y=m==null?void 0:m.shift();)(v=I(this,Yr))==null||v.call(this,...y)}return this}pop(){var e;try{for(;I(this,qt);){const t=I(this,Se)[I(this,kn)];if(ue(this,Ko,Kh).call(this,!0),ue(this,tt,ht).call(this,t)){if(t.__staleWhileFetching)return t.__staleWhileFetching}else if(t!==void 0)return t}}finally{if(I(this,Rn)&&I(this,nn)){const t=I(this,nn);let r;for(;r=t==null?void 0:t.shift();)(e=I(this,Yr))==null||e.call(this,...r)}}}has(e,t={}){const{updateAgeOnHas:r=this.updateAgeOnHas,status:i}=t,a=I(this,Lt).get(e);if(a!==void 0){const s=I(this,Se)[a];if(ue(this,tt,ht).call(this,s)&&s.__staleWhileFetching===void 0)return!1;if(I(this,or).call(this,a))i&&(i.has="stale",I(this,Ki).call(this,i,a));else return r&&I(this,Is).call(this,a),i&&(i.has="hit",I(this,Ki).call(this,i,a)),!0}else i&&(i.has="miss");return!1}peek(e,t={}){const{allowStale:r=this.allowStale}=t,i=I(this,Lt).get(e);if(i===void 0||!r&&I(this,or).call(this,i))return;const a=I(this,Se)[i];return ue(this,tt,ht).call(this,a)?a.__staleWhileFetching:a}async fetch(e,t={}){const{allowStale:r=this.allowStale,updateAgeOnGet:i=this.updateAgeOnGet,noDeleteOnStaleGet:a=this.noDeleteOnStaleGet,ttl:s=this.ttl,noDisposeOnSet:o=this.noDisposeOnSet,size:u=0,sizeCalculation:l=this.sizeCalculation,noUpdateTTL:c=this.noUpdateTTL,noDeleteOnFetchRejection:h=this.noDeleteOnFetchRejection,allowStaleOnFetchRejection:d=this.allowStaleOnFetchRejection,ignoreFetchAbort:f=this.ignoreFetchAbort,allowStaleOnFetchAbort:g=this.allowStaleOnFetchAbort,context:p,forceRefresh:v=!1,status:m,signal:y}=t;if(!I(this,$a))return m&&(m.fetch="get"),this.get(e,{allowStale:r,updateAgeOnGet:i,noDeleteOnStaleGet:a,status:m});const b={allowStale:r,updateAgeOnGet:i,noDeleteOnStaleGet:a,ttl:s,noDisposeOnSet:o,size:u,sizeCalculation:l,noUpdateTTL:c,noDeleteOnFetchRejection:h,allowStaleOnFetchRejection:d,allowStaleOnFetchAbort:g,ignoreFetchAbort:f,status:m,signal:y};let x=I(this,Lt).get(e);if(x===void 0){m&&(m.fetch="miss");const w=ue(this,Zo,Zh).call(this,e,x,b,p);return w.__returned=w}else{const w=I(this,Se)[x];if(ue(this,tt,ht).call(this,w)){const k=r&&w.__staleWhileFetching!==void 0;return m&&(m.fetch="inflight",k&&(m.returnedStale=!0)),k?w.__staleWhileFetching:w.__returned=w}const E=I(this,or).call(this,x);if(!v&&!E)return m&&(m.fetch="hit"),ue(this,Bs,al).call(this,x),i&&I(this,Is).call(this,x),m&&I(this,Ki).call(this,m,x),w;const _=ue(this,Zo,Zh).call(this,e,x,b,p),C=_.__staleWhileFetching!==void 0&&r;return m&&(m.fetch=E?"stale":"refresh",C&&E&&(m.returnedStale=!0)),C?_.__staleWhileFetching:_.__returned=_}}async forceFetch(e,t={}){const r=await this.fetch(e,t);if(r===void 0)throw new Error("fetch() returned undefined");return r}memo(e,t={}){const r=I(this,Yo);if(!r)throw new Error("no memoMethod provided to constructor");const{context:i,forceRefresh:a,...s}=t,o=this.get(e,s);if(!a&&o!==void 0)return o;const u=r(e,o,{options:s,context:i});return this.set(e,u,s),u}get(e,t={}){const{allowStale:r=this.allowStale,updateAgeOnGet:i=this.updateAgeOnGet,noDeleteOnStaleGet:a=this.noDeleteOnStaleGet,status:s}=t,o=I(this,Lt).get(e);if(o!==void 0){const u=I(this,Se)[o],l=ue(this,tt,ht).call(this,u);return s&&I(this,Ki).call(this,s,o),I(this,or).call(this,o)?(s&&(s.get="stale"),l?(s&&r&&u.__staleWhileFetching!==void 0&&(s.returnedStale=!0),r?u.__staleWhileFetching:void 0):(a||ue(this,xi,Pa).call(this,e,"expire"),s&&r&&(s.returnedStale=!0),r?u:void 0)):(s&&(s.get="hit"),l?u.__staleWhileFetching:(ue(this,Bs,al).call(this,o),i&&I(this,Is).call(this,o),u))}else s&&(s.get="miss")}delete(e){return ue(this,xi,Pa).call(this,e,"delete")}clear(){return ue(this,Yl,C2).call(this,"delete")}};ufe=Symbol.toStringTag,Ur=new WeakMap,ir=new WeakMap,Hr=new WeakMap,Yr=new WeakMap,Ho=new WeakMap,Yo=new WeakMap,qt=new WeakMap,Xr=new WeakMap,Lt=new WeakMap,ft=new WeakMap,Se=new WeakMap,Dn=new WeakMap,ar=new WeakMap,kn=new WeakMap,tn=new WeakMap,Kr=new WeakMap,nn=new WeakMap,Zr=new WeakMap,Jr=new WeakMap,sr=new WeakMap,Qr=new WeakMap,$a=new WeakMap,Rn=new WeakMap,Gl=new WeakSet,_2=function(){const e=new Xh(I(this,Ur)),t=new Xh(I(this,Ur));fe(this,sr,e),fe(this,Jr,t),fe(this,Wl,(a,s,o=Mo.now())=>{if(t[a]=s!==0?o:0,e[a]=s,s!==0&&this.ttlAutopurge){const u=setTimeout(()=>{I(this,or).call(this,a)&&ue(this,xi,Pa).call(this,I(this,ft)[a],"expire")},s+1);u.unref&&u.unref()}}),fe(this,Is,a=>{t[a]=e[a]!==0?Mo.now():0}),fe(this,Ki,(a,s)=>{if(e[s]){const o=e[s],u=t[s];if(!o||!u)return;a.ttl=o,a.start=u,a.now=r||i();const l=a.now-u;a.remainingTTL=o-l}});let r=0;const i=()=>{const a=Mo.now();if(this.ttlResolution>0){r=a;const s=setTimeout(()=>r=0,this.ttlResolution);s.unref&&s.unref()}return a};this.getRemainingTTL=a=>{const s=I(this,Lt).get(a);if(s===void 0)return 0;const o=e[s],u=t[s];if(!o||!u)return 1/0;const l=(r||i())-u;return o-l},fe(this,or,a=>{const s=t[a],o=e[a];return!!o&&!!s&&(r||i())-s>o})},Is=new WeakMap,Ki=new WeakMap,Wl=new WeakMap,or=new WeakMap,Kd=new WeakSet,aD=function(){const e=new Xh(I(this,Ur));fe(this,Xr,0),fe(this,Zr,e),fe(this,Fs,t=>{fe(this,Xr,I(this,Xr)-e[t]),e[t]=0}),fe(this,Vl,(t,r,i,a)=>{if(ue(this,tt,ht).call(this,r))return 0;if(!Ta(i))if(a){if(typeof a!="function")throw new TypeError("sizeCalculation must be a function");if(i=a(r,t),!Ta(i))throw new TypeError("sizeCalculation return invalid (expect positive integer)")}else throw new TypeError("invalid size value (must be positive integer). When maxSize or maxEntrySize is used, sizeCalculation or size must be set.");return i}),fe(this,Xo,(t,r,i)=>{if(e[t]=r,I(this,ir)){const a=I(this,ir)-e[t];for(;I(this,Xr)>a;)ue(this,Ko,Kh).call(this,!0)}fe(this,Xr,I(this,Xr)+e[t]),i&&(i.entrySize=r,i.totalCalculatedSize=I(this,Xr))})},Fs=new WeakMap,Xo=new WeakMap,Vl=new WeakMap,yi=new WeakSet,Oa=function*({allowStale:e=this.allowStale}={}){if(I(this,qt))for(let t=I(this,tn);!(!ue(this,Ul,S2).call(this,t)||((e||!I(this,or).call(this,t))&&(yield t),t===I(this,kn)));)t=I(this,ar)[t]},bi=new WeakSet,Ma=function*({allowStale:e=this.allowStale}={}){if(I(this,qt))for(let t=I(this,kn);!(!ue(this,Ul,S2).call(this,t)||((e||!I(this,or).call(this,t))&&(yield t),t===I(this,tn)));)t=I(this,Dn)[t]},Ul=new WeakSet,S2=function(e){return e!==void 0&&I(this,Lt).get(I(this,ft)[e])===e},Ko=new WeakSet,Kh=function(e){var a,s;const t=I(this,kn),r=I(this,ft)[t],i=I(this,Se)[t];return I(this,$a)&&ue(this,tt,ht).call(this,i)?i.__abortController.abort(new Error("evicted")):(I(this,Qr)||I(this,Rn))&&(I(this,Qr)&&((a=I(this,Hr))==null||a.call(this,i,r,"evict")),I(this,Rn)&&((s=I(this,nn))==null||s.push([i,r,"evict"]))),I(this,Fs).call(this,t),e&&(I(this,ft)[t]=void 0,I(this,Se)[t]=void 0,I(this,Kr).push(t)),I(this,qt)===1?(fe(this,kn,fe(this,tn,0)),I(this,Kr).length=0):fe(this,kn,I(this,Dn)[t]),I(this,Lt).delete(r),wc(this,qt)._--,t},Zo=new WeakSet,Zh=function(e,t,r,i){const a=t===void 0?void 0:I(this,Se)[t];if(ue(this,tt,ht).call(this,a))return a;const s=new Ud,{signal:o}=r;o==null||o.addEventListener("abort",()=>s.abort(o.reason),{signal:s.signal});const u={signal:s.signal,options:r,context:i},l=(p,v=!1)=>{const{aborted:m}=s.signal,y=r.ignoreFetchAbort&&p!==void 0;if(r.status&&(m&&!v?(r.status.fetchAborted=!0,r.status.fetchError=s.signal.reason,y&&(r.status.fetchAbortIgnored=!0)):r.status.fetchResolved=!0),m&&!y&&!v)return h(s.signal.reason);const b=f;return I(this,Se)[t]===f&&(p===void 0?b.__staleWhileFetching?I(this,Se)[t]=b.__staleWhileFetching:ue(this,xi,Pa).call(this,e,"fetch"):(r.status&&(r.status.fetchUpdated=!0),this.set(e,p,u.options))),p},c=p=>(r.status&&(r.status.fetchRejected=!0,r.status.fetchError=p),h(p)),h=p=>{const{aborted:v}=s.signal,m=v&&r.allowStaleOnFetchAbort,y=m||r.allowStaleOnFetchRejection,b=y||r.noDeleteOnFetchRejection,x=f;if(I(this,Se)[t]===f&&(!b||x.__staleWhileFetching===void 0?ue(this,xi,Pa).call(this,e,"fetch"):m||(I(this,Se)[t]=x.__staleWhileFetching)),y)return r.status&&x.__staleWhileFetching!==void 0&&(r.status.returnedStale=!0),x.__staleWhileFetching;if(x.__returned===x)throw p},d=(p,v)=>{var y;const m=(y=I(this,Ho))==null?void 0:y.call(this,e,a,u);m&&m instanceof Promise&&m.then(b=>p(b===void 0?void 0:b),v),s.signal.addEventListener("abort",()=>{(!r.ignoreFetchAbort||r.allowStaleOnFetchAbort)&&(p(void 0),r.allowStaleOnFetchAbort&&(p=b=>l(b,!0)))})};r.status&&(r.status.fetchDispatched=!0);const f=new Promise(d).then(l,c),g=Object.assign(f,{__abortController:s,__staleWhileFetching:a,__returned:void 0});return t===void 0?(this.set(e,g,{...u.options,status:void 0}),t=I(this,Lt).get(e)):I(this,Se)[t]=g,g},tt=new WeakSet,ht=function(e){if(!I(this,$a))return!1;const t=e;return!!t&&t instanceof Promise&&t.hasOwnProperty("__staleWhileFetching")&&t.__abortController instanceof Ud},Hl=new WeakSet,k2=function(e,t){I(this,ar)[t]=e,I(this,Dn)[e]=t},Bs=new WeakSet,al=function(e){e!==I(this,tn)&&(e===I(this,kn)?fe(this,kn,I(this,Dn)[e]):ue(this,Hl,k2).call(this,I(this,ar)[e],I(this,Dn)[e]),ue(this,Hl,k2).call(this,I(this,tn),e),fe(this,tn,e))},xi=new WeakSet,Pa=function(e,t){var i,a,s,o;let r=!1;if(I(this,qt)!==0){const u=I(this,Lt).get(e);if(u!==void 0)if(r=!0,I(this,qt)===1)ue(this,Yl,C2).call(this,t);else{I(this,Fs).call(this,u);const l=I(this,Se)[u];if(ue(this,tt,ht).call(this,l)?l.__abortController.abort(new Error("deleted")):(I(this,Qr)||I(this,Rn))&&(I(this,Qr)&&((i=I(this,Hr))==null||i.call(this,l,e,t)),I(this,Rn)&&((a=I(this,nn))==null||a.push([l,e,t]))),I(this,Lt).delete(e),I(this,ft)[u]=void 0,I(this,Se)[u]=void 0,u===I(this,tn))fe(this,tn,I(this,ar)[u]);else if(u===I(this,kn))fe(this,kn,I(this,Dn)[u]);else{const c=I(this,ar)[u];I(this,Dn)[c]=I(this,Dn)[u];const h=I(this,Dn)[u];I(this,ar)[h]=I(this,ar)[u]}wc(this,qt)._--,I(this,Kr).push(u)}}if(I(this,Rn)&&((s=I(this,nn))!=null&&s.length)){const u=I(this,nn);let l;for(;l=u==null?void 0:u.shift();)(o=I(this,Yr))==null||o.call(this,...l)}return r},Yl=new WeakSet,C2=function(e){var t,r,i;for(const a of ue(this,bi,Ma).call(this,{allowStale:!0})){const s=I(this,Se)[a];if(ue(this,tt,ht).call(this,s))s.__abortController.abort(new Error("deleted"));else{const o=I(this,ft)[a];I(this,Qr)&&((t=I(this,Hr))==null||t.call(this,s,o,e)),I(this,Rn)&&((r=I(this,nn))==null||r.push([s,o,e]))}}if(I(this,Lt).clear(),I(this,Se).fill(void 0),I(this,ft).fill(void 0),I(this,sr)&&I(this,Jr)&&(I(this,sr).fill(0),I(this,Jr).fill(0)),I(this,Zr)&&I(this,Zr).fill(0),fe(this,kn,0),fe(this,tn,0),I(this,Kr).length=0,fe(this,Xr,0),fe(this,qt,0),I(this,Rn)&&I(this,nn)){const a=I(this,nn);let s;for(;s=a==null?void 0:a.shift();)(i=I(this,Yr))==null||i.call(this,...s)}};let E2=Nw;function Kce(n,e){for(var t=0;t<e.length;t++){const r=e[t];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in n)){const a=Object.getOwnPropertyDescriptor(r,i);a&&Object.defineProperty(n,i,a.get?a:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}))}const Zce=(n,e)=>{const t=Gt("editorId"),{noImgZoomIn:r}=n,i=CN(()=>{const a=document.querySelectorAll(`#${t}-preview img:not(.not-zoom):not(.medium-zoom-image)`);a.length!==0&&Yoe(a,{background:"#00000073"})});Rr(()=>{!r&&n.setting.preview&&i()}),Tn([e,EO(n.setting,"preview")],()=>{!r&&n.setting.preview&&i()})},Jce=(n,e,t)=>{const r=Gt("editorId"),i=Gt("rootRef"),a=Gt("usedLanguageText"),s=()=>{i.value.querySelectorAll(`#${r} .${he}-preview .${he}-code`).forEach(l=>{let c=-1;const h=l.querySelector(`.${he}-copy-button`);h&&(h.onclick=d=>{d.preventDefault(),clearTimeout(c);const g=(l.querySelector("input:checked + pre code")||l.querySelector("pre code")).textContent,p=tue(n.formatCopiedText(g)),{text:v,successTips:m,failTips:y}=a.value.copyCode,b=p?m:y;h.dataset.isIcon?h.dataset.tips=b:h.innerHTML=b,c=window.setTimeout(()=>{h.dataset.isIcon?h.dataset.tips=v:h.innerHTML=v},1500)})})},o=()=>{Us(s)},u=l=>{l&&Us(s)};Tn([e,t],o),Tn(()=>n.setting.preview,u),Tn(()=>n.setting.htmlPreview,u),Tn(()=>a.value,s),Rr(s)},Qce=n=>{const e=Gt("highlight"),t=td(br.editorExtensions.highlight.instance);return Rr(()=>{n.noHighlight||t.value||(ga("link",{...e.value.css,rel:"stylesheet",id:`${he}-hlCss`}),ga("script",{...e.value.js,id:`${he}-hljs`,onload(){t.value=window.hljs}},"hljs"))}),Tn(()=>e.value.css,()=>{n.noHighlight||br.editorExtensions.highlight.instance||Boe("link",{...e.value.css,rel:"stylesheet",id:`${he}-hlCss`})}),t},Jh=new E2({max:1e3,ttl:6e5}),ehe=n=>{const e=Gt("theme"),t=Gt("rootRef"),{editorExtensions:r,editorExtensionsAttrs:i,mermaidConfig:a}=br,s=td(r.mermaid.instance),o=td(-1),u=()=>{const c=s.value;!n.noMermaid&&c&&(c.initialize(a({startOnLoad:!1,theme:e.value==="dark"?"dark":"default"})),o.value=o.value+1)};return Tn(()=>e.value,()=>{Jh.clear(),u()}),Rr(()=>{var c,h;if(n.noMermaid||s.value)return;const d=r.mermaid.js;/\.mjs/.test(d)?(ga("link",{...(c=i.mermaid)==null?void 0:c.js,rel:"modulepreload",href:d,id:`${he}-mermaid-m`}),LD(()=>import(d),[]).then(f=>{s.value=f.default,u()})):ga("script",{...(h=i.mermaid)==null?void 0:h.js,src:d,id:`${he}-mermaid`,onload(){s.value=window.mermaid,u()}},"mermaid")}),{mermaidRef:s,reRenderRef:o,replaceMermaid:async()=>{if(!n.noMermaid&&s.value){const c=t.value.querySelectorAll(`div.${he}-mermaid`),h=document.createElement("div"),d=document.body.offsetWidth>1366?document.body.offsetWidth:1366,f=document.body.offsetHeight>768?document.body.offsetHeight:768;h.style.width=d+"px",h.style.height=f+"px",h.style.position="fixed",h.style.zIndex="-10000",h.style.top="-10000";let g=c.length;g>0&&document.body.appendChild(h),await Promise.allSettled(Array.from(c).map(p=>(async m=>{var y;let b=Jh.get(m.innerText);if(!b){const x=p2();let w={svg:""};try{w=await s.value.render(x,m.innerText,h),b=await n.sanitizeMermaid(w.svg);const E=document.createElement("p");E.className=`${he}-mermaid`,E.setAttribute("data-processed",""),E.innerHTML=b,(y=E.children[0])==null||y.removeAttribute("height"),Jh.set(m.innerText,E.innerHTML),m.dataset.line!==void 0&&(E.dataset.line=m.dataset.line),m.replaceWith(E)}catch{}--g===0&&h.remove()}})(p)))}}}},the=n=>{const e=td(br.editorExtensions.katex.instance);return Rr(()=>{if(n.noKatex||e.value)return;const{editorExtensions:t}=br;ga("script",{src:t.katex.js,id:`${he}-katex`,onload(){e.value=window.katex}},"katex"),ga("link",{rel:"stylesheet",href:t.katex.css,id:`${he}-katexCss`})}),e},nhe=(n,e)=>{const t=n.renderer.rules.fence.bind(n.renderer.rules);n.renderer.rules.fence=(r,i,a,s,o)=>{const u=r[i],l=u.content.trim();if(u.info==="mermaid"){let c;r[i].map&&r[i].level===0&&(c=r[i].map[0],r[i].attrSet("data-line",String(c)));const h=Jh.get(l);return h?`<p class="${he}-mermaid" ${c!==void 0?"data-line="+c:""} data-processed>${h}</p>`:`<div class="${he}-mermaid" ${c!==void 0?"data-line="+c:""} data-mermaid-theme=${e.themeRef.value}>${l}</div>`}return t(r,i,a,s,o)}},Hd=(n,e)=>{const t=n.attrs?n.attrs.slice():[];return e.forEach(r=>{const i=n.attrIndex(r[0]);i<0?t.push(r):(t[i]=t[i].slice(),t[i][1]+=` ${r[1]}`)}),t},rhe=(n,e)=>{const t=[{open:"$",close:"$"},{open:"\\(",close:"\\)"}];let r,i,a;for(const s of t)if(n.src.startsWith(s.open,n.pos)){const o=n.pos+s.open.length;for(r=o;(r=n.src.indexOf(s.close,r))!==-1;){for(a=r-1;n.src[a]==="\\";)a-=1;if((r-a)%2==1)break;r+=s.close.length}return r===-1?(e||(n.pending+=s.open),n.pos=o,!0):r-o===0?(e||(n.pending+=s.open+s.close),n.pos=o+s.close.length,!0):(e||(i=n.push("math_inline","math",0),i.markup=s.open,i.content=n.src.slice(o,r)),n.pos=r+s.close.length,!0)}return!1},ihe=(n,e,t,r)=>{const i=[{open:"$$",close:"$$"},{open:"\\[",close:"\\]"}];let a,s,o,u,l=!1,c=n.bMarks[e]+n.tShift[e],h=n.eMarks[e];for(const d of i){if(c+d.open.length>h||n.src.slice(c,c+d.open.length)!==d.open)continue;if(c+=d.open.length,a=n.src.slice(c,h),r)return!0;for(a.trim().slice(-d.close.length)===d.close&&(a=a.trim().slice(0,-d.close.length),l=!0),o=e;!l&&(o++,!(o>=t||(c=n.bMarks[o]+n.tShift[o],h=n.eMarks[o],c<h&&n.tShift[o]<n.blkIndent)));)n.src.slice(c,h).trim().slice(-d.close.length)===d.close&&(u=n.src.slice(0,h).lastIndexOf(d.close),s=n.src.slice(c,u),l=!0);n.line=o+1;const f=n.push("math_block","math",0);return f.block=!0,f.content=(a&&a.trim()?a+`
`:"")+n.getLines(e+1,o,n.tShift[e],!0)+(s&&s.trim()?s:""),f.map=[e,n.line],f.markup=d.open,!0}return!1},ahe=(n,{katexRef:e})=>{const t=(i,a,s,o,u)=>{const l=i[a],c={attrs:Hd(l,[["class",`${he}-katex-inline`]])};if(e.value){const h=e.value.renderToString(l.content,br.katexConfig({throwOnError:!1}));return`<span ${u.renderAttrs(c)} data-processed>${h}</span>`}else return`<span ${u.renderAttrs(c)}>${l.content}</span>`},r=(i,a,s,o,u)=>{const l=i[a],c={attrs:Hd(l,[["class",`${he}-katex-block`]])};if(e.value){const h=e.value.renderToString(l.content,br.katexConfig({throwOnError:!1,displayMode:!0}));return`<p ${u.renderAttrs(c)} data-processed>${h}</p>`}else return`<p ${u.renderAttrs(c)}>${l.content}</p>`};n.inline.ruler.before("escape","math_inline",rhe),n.block.ruler.after("blockquote","math_block",ihe,{alt:["paragraph","reference","blockquote","list"]}),n.renderer.rules.math_inline=t,n.renderer.rules.math_block=r},she=(n,e)=>{e=e||{};const t=3,r=e.marker||"!",i=r.charCodeAt(0),a=r.length;let s="",o="";const u=(c,h,d,f,g)=>{const p=c[h];return p.type==="admonition_open"?c[h].attrPush(["class",`${he}-admonition ${he}-admonition-${p.info}`]):p.type==="admonition_title_open"&&c[h].attrPush(["class",`${he}-admonition-title`]),g.renderToken(c,h,d)},l=c=>{const h=c.trim().split(" ",2);o="",s=h[0],h.length>1&&(o=c.substring(s.length+2))};n.block.ruler.before("code","admonition",(c,h,d,f)=>{let g,p,v,m=!1,y=c.bMarks[h]+c.tShift[h],b=c.eMarks[h];if(i!==c.src.charCodeAt(y))return!1;for(g=y+1;g<=b&&r[(g-y)%a]===c.src[g];g++);const x=Math.floor((g-y)/a);if(x!==t)return!1;g-=(g-y)%a;const w=c.src.slice(y,g),E=c.src.slice(g,b);if(l(E),f)return!0;for(p=h;p++,!(p>=d||(y=c.bMarks[p]+c.tShift[p],b=c.eMarks[p],y<b&&c.sCount[p]<c.blkIndent));)if(i===c.src.charCodeAt(y)&&!(c.sCount[p]-c.blkIndent>=4)){for(g=y+1;g<=b&&r[(g-y)%a]===c.src[g];g++);if(!(Math.floor((g-y)/a)<x)&&(g-=(g-y)%a,g=c.skipSpaces(g),!(g<b))){m=!0;break}}const _=c.parentType,S=c.lineMax;return c.parentType="root",c.lineMax=p,v=c.push("admonition_open","div",1),v.markup=w,v.block=!0,v.info=s,v.map=[h,p],o&&(v=c.push("admonition_title_open","p",1),v.markup=w+" "+s,v.map=[h,p],v=c.push("inline","",0),v.content=o,v.map=[h,c.line-1],v.children=[],v=c.push("admonition_title_close","p",-1),v.markup=w+" "+s),c.md.block.tokenize(c,h+1,p),v=c.push("admonition_close","div",-1),v.markup=c.src.slice(y,g),v.block=!0,c.parentType=_,c.lineMax=S,c.line=p+(m?1:0),!0},{alt:["paragraph","reference","blockquote","list"]}),n.renderer.rules.admonition_open=u,n.renderer.rules.admonition_title_open=u,n.renderer.rules.admonition_title_close=u,n.renderer.rules.admonition_close=u},ohe=(n,e)=>{n.renderer.rules.heading_open=(t,r)=>{var i;const a=t[r],s=((i=t[r+1].children)==null?void 0:i.reduce((u,l)=>u+(["text","code_inline","math_inline"].includes(l.type)&&l.content||""),""))||"",o=a.markup.length;return e.headsRef.value.push({text:s,level:o}),a.map&&a.level===0&&a.attrSet("id",e.mdHeadingId(s,o,e.headsRef.value.length)),n.renderer.renderToken(t,r,e)},n.renderer.rules.heading_close=(t,r,i,a,s)=>s.renderToken(t,r,i)},uhe=(n,e)=>{if(typeof e[n]=="string")return e[n];const t=`<i class="${he}-iconfont ${he}-icon-${n}"></i>`;switch(br.iconfontType){case"svg":return`<svg class="${he}-icon" aria-hidden="true"><use xlink:href="#${he}-icon-${n}"></use></svg>`;default:return t}},lhe=uhe,che=(n,e)=>{const t=n.renderer.rules.fence,r=n.utils.unescapeAll,i=/\[(\w*)(?::([\w ]*))?\]/,a=/::(open|close)/,s=h=>h.info?r(h.info).trim():"",o=h=>{const d=s(h),[f=null,g=""]=(i.exec(d)||[]).slice(1);return[f,g]},u=h=>{const d=s(h);return d?d.split(/(\s+)/g)[0]:""},l=h=>{const d=h.info.match(a)||[],f=d[1]==="open"||d[1]!=="close"&&e.codeFoldable&&h.content.trim().split(`
`).length<e.autoFoldThreshold,g=d[1]||e.codeFoldable?"details":"div",p=d[1]||e.codeFoldable?"summary":"div";return{open:f,tagContainer:g,tagHeader:p}},c=(h,d,f,g,p)=>{var v;if(h[d].hidden)return"";const m=(v=e.usedLanguageTextRef.value)==null?void 0:v.copyCode.text,y=e.customIconRef.value.copy||m,b=!!e.customIconRef.value.copy,x=`<span class="${he}-collapse-tips">${lhe("collapse-tips",e.customIconRef.value)}</span>`,[w]=o(h[d]);if(w===null){const{open:M,tagContainer:F,tagHeader:j}=l(h[d]),B=[["class",`${he}-code`]];M&&B.push(["open",""]);const $={attrs:Hd(h[d],B)};h[d].info=h[d].info.replace(a,"");const W=t(h,d,f,g,p);return`
        <${F} ${p.renderAttrs($)}>
          <${j} class="${he}-code-head">
            <div class="${he}-code-flag"><span></span><span></span><span></span></div>
            <div class="${he}-code-action">
              <span class="${he}-code-lang">${h[d].info.trim()}</span>
              <span class="${he}-copy-button" data-tips="${m}"${b?" data-is-icon=true":""}>${y}</span>
              ${F==="details"?x:""}
            </div>
          </${j}>
          ${W}
        </${F}>
      `}let E,_,S,C,k="",A="",T="";const{open:O,tagContainer:P,tagHeader:R}=l(h[d]),N=[["class",`${he}-code`]];O&&N.push(["open",""]);const D={attrs:Hd(h[d],N)};for(let M=d;M<h.length&&(E=h[M],[_,S]=o(E),_===w);M++){E.info=E.info.replace(i,"").replace(a,""),E.hidden=!0;const F=`${he}-codetab-${e.editorId}-${d}-${M-d}`;C=M-d>0?"":"checked",k+=`
        <li>
          <input
            type="radio"
            id="label-${he}-codetab-label-1-${e.editorId}-${d}-${M-d}"
            name="${he}-codetab-label-${e.editorId}-${d}"
            class="${F}"
            ${C}
          >
          <label
            for="label-${he}-codetab-label-1-${e.editorId}-${d}-${M-d}"
            onclick="this.getRootNode().querySelectorAll('.${F}').forEach(e => e.click())"
          >
            ${S||u(E)}
          </label>
        </li>`,A+=`
        <div role="tabpanel">
          <input
            type="radio"
            name="${he}-codetab-pre-${e.editorId}-${d}"
            class="${F}"
            ${C}
            role="presentation">
          ${t(h,M,f,g,p)}
        </div>`,T+=`
        <input
          type="radio"
          name="${he}-codetab-lang-${e.editorId}-${d}"
          class="${F}"
          ${C}
          role="presentation">
        <span class=${he}-code-lang role="note">${u(E)}</span>`}return`
      <${P} ${p.renderAttrs(D)}>
        <${R} class="${he}-code-head">
          <div class="${he}-code-flag">
            <ul class="${he}-codetab-label" role="tablist">${k}</ul>
          </div>
          <div class="${he}-code-action">
            <span class="${he}-codetab-lang">${T}</span>
            <span class="${he}-copy-button" data-tips="${m}"${b?" data-is-icon=true":""}>${y}</span>
            ${P==="details"?x:""}
          </div>
        </${R}>
        ${A}
      </${P}>
    `};n.renderer.rules.fence=c,n.renderer.rules.code_block=c};function hhe(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var A2={exports:{}},xt={},T2={exports:{}},fo={};function sD(){var n={};return n["align-content"]=!1,n["align-items"]=!1,n["align-self"]=!1,n["alignment-adjust"]=!1,n["alignment-baseline"]=!1,n.all=!1,n["anchor-point"]=!1,n.animation=!1,n["animation-delay"]=!1,n["animation-direction"]=!1,n["animation-duration"]=!1,n["animation-fill-mode"]=!1,n["animation-iteration-count"]=!1,n["animation-name"]=!1,n["animation-play-state"]=!1,n["animation-timing-function"]=!1,n.azimuth=!1,n["backface-visibility"]=!1,n.background=!0,n["background-attachment"]=!0,n["background-clip"]=!0,n["background-color"]=!0,n["background-image"]=!0,n["background-origin"]=!0,n["background-position"]=!0,n["background-repeat"]=!0,n["background-size"]=!0,n["baseline-shift"]=!1,n.binding=!1,n.bleed=!1,n["bookmark-label"]=!1,n["bookmark-level"]=!1,n["bookmark-state"]=!1,n.border=!0,n["border-bottom"]=!0,n["border-bottom-color"]=!0,n["border-bottom-left-radius"]=!0,n["border-bottom-right-radius"]=!0,n["border-bottom-style"]=!0,n["border-bottom-width"]=!0,n["border-collapse"]=!0,n["border-color"]=!0,n["border-image"]=!0,n["border-image-outset"]=!0,n["border-image-repeat"]=!0,n["border-image-slice"]=!0,n["border-image-source"]=!0,n["border-image-width"]=!0,n["border-left"]=!0,n["border-left-color"]=!0,n["border-left-style"]=!0,n["border-left-width"]=!0,n["border-radius"]=!0,n["border-right"]=!0,n["border-right-color"]=!0,n["border-right-style"]=!0,n["border-right-width"]=!0,n["border-spacing"]=!0,n["border-style"]=!0,n["border-top"]=!0,n["border-top-color"]=!0,n["border-top-left-radius"]=!0,n["border-top-right-radius"]=!0,n["border-top-style"]=!0,n["border-top-width"]=!0,n["border-width"]=!0,n.bottom=!1,n["box-decoration-break"]=!0,n["box-shadow"]=!0,n["box-sizing"]=!0,n["box-snap"]=!0,n["box-suppress"]=!0,n["break-after"]=!0,n["break-before"]=!0,n["break-inside"]=!0,n["caption-side"]=!1,n.chains=!1,n.clear=!0,n.clip=!1,n["clip-path"]=!1,n["clip-rule"]=!1,n.color=!0,n["color-interpolation-filters"]=!0,n["column-count"]=!1,n["column-fill"]=!1,n["column-gap"]=!1,n["column-rule"]=!1,n["column-rule-color"]=!1,n["column-rule-style"]=!1,n["column-rule-width"]=!1,n["column-span"]=!1,n["column-width"]=!1,n.columns=!1,n.contain=!1,n.content=!1,n["counter-increment"]=!1,n["counter-reset"]=!1,n["counter-set"]=!1,n.crop=!1,n.cue=!1,n["cue-after"]=!1,n["cue-before"]=!1,n.cursor=!1,n.direction=!1,n.display=!0,n["display-inside"]=!0,n["display-list"]=!0,n["display-outside"]=!0,n["dominant-baseline"]=!1,n.elevation=!1,n["empty-cells"]=!1,n.filter=!1,n.flex=!1,n["flex-basis"]=!1,n["flex-direction"]=!1,n["flex-flow"]=!1,n["flex-grow"]=!1,n["flex-shrink"]=!1,n["flex-wrap"]=!1,n.float=!1,n["float-offset"]=!1,n["flood-color"]=!1,n["flood-opacity"]=!1,n["flow-from"]=!1,n["flow-into"]=!1,n.font=!0,n["font-family"]=!0,n["font-feature-settings"]=!0,n["font-kerning"]=!0,n["font-language-override"]=!0,n["font-size"]=!0,n["font-size-adjust"]=!0,n["font-stretch"]=!0,n["font-style"]=!0,n["font-synthesis"]=!0,n["font-variant"]=!0,n["font-variant-alternates"]=!0,n["font-variant-caps"]=!0,n["font-variant-east-asian"]=!0,n["font-variant-ligatures"]=!0,n["font-variant-numeric"]=!0,n["font-variant-position"]=!0,n["font-weight"]=!0,n.grid=!1,n["grid-area"]=!1,n["grid-auto-columns"]=!1,n["grid-auto-flow"]=!1,n["grid-auto-rows"]=!1,n["grid-column"]=!1,n["grid-column-end"]=!1,n["grid-column-start"]=!1,n["grid-row"]=!1,n["grid-row-end"]=!1,n["grid-row-start"]=!1,n["grid-template"]=!1,n["grid-template-areas"]=!1,n["grid-template-columns"]=!1,n["grid-template-rows"]=!1,n["hanging-punctuation"]=!1,n.height=!0,n.hyphens=!1,n.icon=!1,n["image-orientation"]=!1,n["image-resolution"]=!1,n["ime-mode"]=!1,n["initial-letters"]=!1,n["inline-box-align"]=!1,n["justify-content"]=!1,n["justify-items"]=!1,n["justify-self"]=!1,n.left=!1,n["letter-spacing"]=!0,n["lighting-color"]=!0,n["line-box-contain"]=!1,n["line-break"]=!1,n["line-grid"]=!1,n["line-height"]=!1,n["line-snap"]=!1,n["line-stacking"]=!1,n["line-stacking-ruby"]=!1,n["line-stacking-shift"]=!1,n["line-stacking-strategy"]=!1,n["list-style"]=!0,n["list-style-image"]=!0,n["list-style-position"]=!0,n["list-style-type"]=!0,n.margin=!0,n["margin-bottom"]=!0,n["margin-left"]=!0,n["margin-right"]=!0,n["margin-top"]=!0,n["marker-offset"]=!1,n["marker-side"]=!1,n.marks=!1,n.mask=!1,n["mask-box"]=!1,n["mask-box-outset"]=!1,n["mask-box-repeat"]=!1,n["mask-box-slice"]=!1,n["mask-box-source"]=!1,n["mask-box-width"]=!1,n["mask-clip"]=!1,n["mask-image"]=!1,n["mask-origin"]=!1,n["mask-position"]=!1,n["mask-repeat"]=!1,n["mask-size"]=!1,n["mask-source-type"]=!1,n["mask-type"]=!1,n["max-height"]=!0,n["max-lines"]=!1,n["max-width"]=!0,n["min-height"]=!0,n["min-width"]=!0,n["move-to"]=!1,n["nav-down"]=!1,n["nav-index"]=!1,n["nav-left"]=!1,n["nav-right"]=!1,n["nav-up"]=!1,n["object-fit"]=!1,n["object-position"]=!1,n.opacity=!1,n.order=!1,n.orphans=!1,n.outline=!1,n["outline-color"]=!1,n["outline-offset"]=!1,n["outline-style"]=!1,n["outline-width"]=!1,n.overflow=!1,n["overflow-wrap"]=!1,n["overflow-x"]=!1,n["overflow-y"]=!1,n.padding=!0,n["padding-bottom"]=!0,n["padding-left"]=!0,n["padding-right"]=!0,n["padding-top"]=!0,n.page=!1,n["page-break-after"]=!1,n["page-break-before"]=!1,n["page-break-inside"]=!1,n["page-policy"]=!1,n.pause=!1,n["pause-after"]=!1,n["pause-before"]=!1,n.perspective=!1,n["perspective-origin"]=!1,n.pitch=!1,n["pitch-range"]=!1,n["play-during"]=!1,n.position=!1,n["presentation-level"]=!1,n.quotes=!1,n["region-fragment"]=!1,n.resize=!1,n.rest=!1,n["rest-after"]=!1,n["rest-before"]=!1,n.richness=!1,n.right=!1,n.rotation=!1,n["rotation-point"]=!1,n["ruby-align"]=!1,n["ruby-merge"]=!1,n["ruby-position"]=!1,n["shape-image-threshold"]=!1,n["shape-outside"]=!1,n["shape-margin"]=!1,n.size=!1,n.speak=!1,n["speak-as"]=!1,n["speak-header"]=!1,n["speak-numeral"]=!1,n["speak-punctuation"]=!1,n["speech-rate"]=!1,n.stress=!1,n["string-set"]=!1,n["tab-size"]=!1,n["table-layout"]=!1,n["text-align"]=!0,n["text-align-last"]=!0,n["text-combine-upright"]=!0,n["text-decoration"]=!0,n["text-decoration-color"]=!0,n["text-decoration-line"]=!0,n["text-decoration-skip"]=!0,n["text-decoration-style"]=!0,n["text-emphasis"]=!0,n["text-emphasis-color"]=!0,n["text-emphasis-position"]=!0,n["text-emphasis-style"]=!0,n["text-height"]=!0,n["text-indent"]=!0,n["text-justify"]=!0,n["text-orientation"]=!0,n["text-overflow"]=!0,n["text-shadow"]=!0,n["text-space-collapse"]=!0,n["text-transform"]=!0,n["text-underline-position"]=!0,n["text-wrap"]=!0,n.top=!1,n.transform=!1,n["transform-origin"]=!1,n["transform-style"]=!1,n.transition=!1,n["transition-delay"]=!1,n["transition-duration"]=!1,n["transition-property"]=!1,n["transition-timing-function"]=!1,n["unicode-bidi"]=!1,n["vertical-align"]=!1,n.visibility=!1,n["voice-balance"]=!1,n["voice-duration"]=!1,n["voice-family"]=!1,n["voice-pitch"]=!1,n["voice-range"]=!1,n["voice-rate"]=!1,n["voice-stress"]=!1,n["voice-volume"]=!1,n.volume=!1,n["white-space"]=!1,n.widows=!1,n.width=!0,n["will-change"]=!1,n["word-break"]=!0,n["word-spacing"]=!0,n["word-wrap"]=!0,n["wrap-flow"]=!1,n["wrap-through"]=!1,n["writing-mode"]=!1,n["z-index"]=!1,n}function dhe(n,e,t){}function fhe(n,e,t){}var ghe=/javascript\s*\:/img;function phe(n,e){return ghe.test(e)?"":e}fo.whiteList=sD();fo.getDefaultWhiteList=sD;fo.onAttr=dhe;fo.onIgnoreAttr=fhe;fo.safeAttrValue=phe;var vhe={indexOf:function(n,e){var t,r;if(Array.prototype.indexOf)return n.indexOf(e);for(t=0,r=n.length;t<r;t++)if(n[t]===e)return t;return-1},forEach:function(n,e,t){var r,i;if(Array.prototype.forEach)return n.forEach(e,t);for(r=0,i=n.length;r<i;r++)e.call(t,n[r],r,n)},trim:function(n){return String.prototype.trim?n.trim():n.replace(/(^\s*)|(\s*$)/g,"")},trimRight:function(n){return String.prototype.trimRight?n.trimRight():n.replace(/(\s*$)/g,"")}},zu=vhe;function mhe(n,e){n=zu.trimRight(n),n[n.length-1]!==";"&&(n+=";");var t=n.length,r=!1,i=0,a=0,s="";function o(){if(!r){var c=zu.trim(n.slice(i,a)),h=c.indexOf(":");if(h!==-1){var d=zu.trim(c.slice(0,h)),f=zu.trim(c.slice(h+1));if(d){var g=e(i,s.length,d,f,c);g&&(s+=g+"; ")}}}i=a+1}for(;a<t;a++){var u=n[a];if(u==="/"&&n[a+1]==="*"){var l=n.indexOf("*/",a+2);if(l===-1)break;a=l+1,i=a+1,r=!1}else u==="("?r=!0:u===")"?r=!1:u===";"?r||o():u===`
`&&o()}return zu.trim(s)}var yhe=mhe,Ph=fo,bhe=yhe;function hO(n){return n==null}function xhe(n){var e={};for(var t in n)e[t]=n[t];return e}function oD(n){n=xhe(n||{}),n.whiteList=n.whiteList||Ph.whiteList,n.onAttr=n.onAttr||Ph.onAttr,n.onIgnoreAttr=n.onIgnoreAttr||Ph.onIgnoreAttr,n.safeAttrValue=n.safeAttrValue||Ph.safeAttrValue,this.options=n}oD.prototype.process=function(n){if(n=n||"",n=n.toString(),!n)return"";var e=this,t=e.options,r=t.whiteList,i=t.onAttr,a=t.onIgnoreAttr,s=t.safeAttrValue,o=bhe(n,function(u,l,c,h,d){var f=r[c],g=!1;if(f===!0?g=f:typeof f=="function"?g=f(h):f instanceof RegExp&&(g=f.test(h)),g!==!0&&(g=!1),h=s(c,h),!!h){var p={position:l,sourcePosition:u,source:d,isWhite:g};if(g){var v=i(c,h,p);return hO(v)?c+":"+h:v}else{var v=a(c,h,p);if(!hO(v))return v}}});return o};var whe=oD;(function(n,e){var t=fo,r=whe;function i(s,o){var u=new r(o);return u.process(s)}e=n.exports=i,e.FilterCSS=r;for(var a in t)e[a]=t[a];typeof window<"u"&&(window.filterCSS=n.exports)})(T2,T2.exports);var Mw=T2.exports,Pw={indexOf:function(n,e){var t,r;if(Array.prototype.indexOf)return n.indexOf(e);for(t=0,r=n.length;t<r;t++)if(n[t]===e)return t;return-1},forEach:function(n,e,t){var r,i;if(Array.prototype.forEach)return n.forEach(e,t);for(r=0,i=n.length;r<i;r++)e.call(t,n[r],r,n)},trim:function(n){return String.prototype.trim?n.trim():n.replace(/(^\s*)|(\s*$)/g,"")},spaceIndex:function(n){var e=/\s|\n|\t/,t=e.exec(n);return t?t.index:-1}},Ehe=Mw.FilterCSS,_he=Mw.getDefaultWhiteList,Yd=Pw;function uD(){return{a:["target","href","title"],abbr:["title"],address:[],area:["shape","coords","href","alt"],article:[],aside:[],audio:["autoplay","controls","crossorigin","loop","muted","preload","src"],b:[],bdi:["dir"],bdo:["dir"],big:[],blockquote:["cite"],br:[],caption:[],center:[],cite:[],code:[],col:["align","valign","span","width"],colgroup:["align","valign","span","width"],dd:[],del:["datetime"],details:["open"],div:[],dl:[],dt:[],em:[],figcaption:[],figure:[],font:["color","size","face"],footer:[],h1:[],h2:[],h3:[],h4:[],h5:[],h6:[],header:[],hr:[],i:[],img:["src","alt","title","width","height","loading"],ins:["datetime"],kbd:[],li:[],mark:[],nav:[],ol:[],p:[],pre:[],s:[],section:[],small:[],span:[],sub:[],summary:[],sup:[],strong:[],strike:[],table:["width","border","align","valign"],tbody:["align","valign"],td:["width","rowspan","colspan","align","valign"],tfoot:["align","valign"],th:["width","rowspan","colspan","align","valign"],thead:["align","valign"],tr:["rowspan","align","valign"],tt:[],u:[],ul:[],video:["autoplay","controls","crossorigin","loop","muted","playsinline","poster","preload","src","height","width"]}}var lD=new Ehe;function She(n,e,t){}function khe(n,e,t){}function Che(n,e,t){}function Ahe(n,e,t){}function cD(n){return n.replace(Ohe,"&lt;").replace(Mhe,"&gt;")}function The(n,e,t,r){if(t=vD(t),e==="href"||e==="src"){if(t=Yd.trim(t),t==="#")return"#";if(!(t.substr(0,7)==="http://"||t.substr(0,8)==="https://"||t.substr(0,7)==="mailto:"||t.substr(0,4)==="tel:"||t.substr(0,11)==="data:image/"||t.substr(0,6)==="ftp://"||t.substr(0,2)==="./"||t.substr(0,3)==="../"||t[0]==="#"||t[0]==="/"))return""}else if(e==="background"){if(Nh.lastIndex=0,Nh.test(t))return""}else if(e==="style"){if(dO.lastIndex=0,dO.test(t)||(fO.lastIndex=0,fO.test(t)&&(Nh.lastIndex=0,Nh.test(t))))return"";r!==!1&&(r=r||lD,t=r.process(t))}return t=mD(t),t}var Ohe=/</g,Mhe=/>/g,Phe=/"/g,Nhe=/&quot;/g,Dhe=/&#([a-zA-Z0-9]*);?/gim,Rhe=/&colon;?/gim,Lhe=/&newline;?/gim,Nh=/((j\s*a\s*v\s*a|v\s*b|l\s*i\s*v\s*e)\s*s\s*c\s*r\s*i\s*p\s*t\s*|m\s*o\s*c\s*h\s*a):/gi,dO=/e\s*x\s*p\s*r\s*e\s*s\s*s\s*i\s*o\s*n\s*\(.*/gi,fO=/u\s*r\s*l\s*\(.*/gi;function hD(n){return n.replace(Phe,"&quot;")}function dD(n){return n.replace(Nhe,'"')}function fD(n){return n.replace(Dhe,function(t,r){return r[0]==="x"||r[0]==="X"?String.fromCharCode(parseInt(r.substr(1),16)):String.fromCharCode(parseInt(r,10))})}function gD(n){return n.replace(Rhe,":").replace(Lhe," ")}function pD(n){for(var e="",t=0,r=n.length;t<r;t++)e+=n.charCodeAt(t)<32?" ":n.charAt(t);return Yd.trim(e)}function vD(n){return n=dD(n),n=fD(n),n=gD(n),n=pD(n),n}function mD(n){return n=hD(n),n=cD(n),n}function Ihe(){return""}function Fhe(n,e){typeof e!="function"&&(e=function(){});var t=!Array.isArray(n);function r(s){return t?!0:Yd.indexOf(n,s)!==-1}var i=[],a=!1;return{onIgnoreTag:function(s,o,u){if(r(s))if(u.isClosing){var l="[/removed]",c=u.position+l.length;return i.push([a!==!1?a:u.position,c]),a=!1,l}else return a||(a=u.position),"[removed]";else return e(s,o,u)},remove:function(s){var o="",u=0;return Yd.forEach(i,function(l){o+=s.slice(u,l[0]),u=l[1]}),o+=s.slice(u),o}}}function Bhe(n){for(var e="",t=0;t<n.length;){var r=n.indexOf("<!--",t);if(r===-1){e+=n.slice(t);break}e+=n.slice(t,r);var i=n.indexOf("-->",r);if(i===-1)break;t=i+3}return e}function zhe(n){var e=n.split("");return e=e.filter(function(t){var r=t.charCodeAt(0);return r===127?!1:r<=31?r===10||r===13:!0}),e.join("")}xt.whiteList=uD();xt.getDefaultWhiteList=uD;xt.onTag=She;xt.onIgnoreTag=khe;xt.onTagAttr=Che;xt.onIgnoreTagAttr=Ahe;xt.safeAttrValue=The;xt.escapeHtml=cD;xt.escapeQuote=hD;xt.unescapeQuote=dD;xt.escapeHtmlEntities=fD;xt.escapeDangerHtml5Entities=gD;xt.clearNonPrintableCharacter=pD;xt.friendlyAttrValue=vD;xt.escapeAttrValue=mD;xt.onIgnoreTagStripAll=Ihe;xt.StripTagBody=Fhe;xt.stripCommentTag=Bhe;xt.stripBlankChar=zhe;xt.attributeWrapSign='"';xt.cssFilter=lD;xt.getDefaultCSSWhiteList=_he;var j0={},La=Pw;function $he(n){var e=La.spaceIndex(n),t;return e===-1?t=n.slice(1,-1):t=n.slice(1,e+1),t=La.trim(t).toLowerCase(),t.slice(0,1)==="/"&&(t=t.slice(1)),t.slice(-1)==="/"&&(t=t.slice(0,-1)),t}function jhe(n){return n.slice(0,2)==="</"}function qhe(n,e,t){var r="",i=0,a=!1,s=!1,o=0,u=n.length,l="",c="";e:for(o=0;o<u;o++){var h=n.charAt(o);if(a===!1){if(h==="<"){a=o;continue}}else if(s===!1){if(h==="<"){r+=t(n.slice(i,o)),a=o,i=o;continue}if(h===">"||o===u-1){r+=t(n.slice(i,a)),c=n.slice(a,o+1),l=$he(c),r+=e(a,r.length,l,c,jhe(c)),i=o+1,a=!1;continue}if(h==='"'||h==="'")for(var d=1,f=n.charAt(o-d);f.trim()===""||f==="=";){if(f==="="){s=h;continue e}f=n.charAt(o-++d)}}else if(h===s){s=!1;continue}}return i<u&&(r+=t(n.substr(i))),r}var Ghe=/[^a-zA-Z0-9\\_:.-]/gim;function Whe(n,e){var t=0,r=0,i=[],a=!1,s=n.length;function o(d,f){if(d=La.trim(d),d=d.replace(Ghe,"").toLowerCase(),!(d.length<1)){var g=e(d,f||"");g&&i.push(g)}}for(var u=0;u<s;u++){var l=n.charAt(u),c,h;if(a===!1&&l==="="){a=n.slice(t,u),t=u+1,r=n.charAt(t)==='"'||n.charAt(t)==="'"?t:Uhe(n,u+1);continue}if(a!==!1&&u===r){if(h=n.indexOf(l,u+1),h===-1)break;c=La.trim(n.slice(r+1,h)),o(a,c),a=!1,u=h,t=u+1;continue}if(/\s|\n|\t/.test(l))if(n=n.replace(/\s|\n|\t/g," "),a===!1)if(h=Vhe(n,u),h===-1){c=La.trim(n.slice(t,u)),o(c),a=!1,t=u+1;continue}else{u=h-1;continue}else if(h=Hhe(n,u-1),h===-1){c=La.trim(n.slice(t,u)),c=gO(c),o(a,c),a=!1,t=u+1;continue}else continue}return t<n.length&&(a===!1?o(n.slice(t)):o(a,gO(La.trim(n.slice(t))))),La.trim(i.join(" "))}function Vhe(n,e){for(;e<n.length;e++){var t=n[e];if(t!==" ")return t==="="?e:-1}}function Uhe(n,e){for(;e<n.length;e++){var t=n[e];if(t!==" ")return t==="'"||t==='"'?e:-1}}function Hhe(n,e){for(;e>0;e--){var t=n[e];if(t!==" ")return t==="="?e:-1}}function Yhe(n){return n[0]==='"'&&n[n.length-1]==='"'||n[0]==="'"&&n[n.length-1]==="'"}function gO(n){return Yhe(n)?n.substr(1,n.length-2):n}j0.parseTag=qhe;j0.parseAttr=Whe;var Xhe=Mw.FilterCSS,Nr=xt,yD=j0,Khe=yD.parseTag,Zhe=yD.parseAttr,Qh=Pw;function Dh(n){return n==null}function Jhe(n){var e=Qh.spaceIndex(n);if(e===-1)return{html:"",closing:n[n.length-2]==="/"};n=Qh.trim(n.slice(e+1,-1));var t=n[n.length-1]==="/";return t&&(n=Qh.trim(n.slice(0,-1))),{html:n,closing:t}}function Qhe(n){var e={};for(var t in n)e[t]=n[t];return e}function ede(n){var e={};for(var t in n)Array.isArray(n[t])?e[t.toLowerCase()]=n[t].map(function(r){return r.toLowerCase()}):e[t.toLowerCase()]=n[t];return e}function bD(n){n=Qhe(n||{}),n.stripIgnoreTag&&(n.onIgnoreTag&&console.error('Notes: cannot use these two options "stripIgnoreTag" and "onIgnoreTag" at the same time'),n.onIgnoreTag=Nr.onIgnoreTagStripAll),n.whiteList||n.allowList?n.whiteList=ede(n.whiteList||n.allowList):n.whiteList=Nr.whiteList,this.attributeWrapSign=n.singleQuotedAttributeValue===!0?"'":Nr.attributeWrapSign,n.onTag=n.onTag||Nr.onTag,n.onTagAttr=n.onTagAttr||Nr.onTagAttr,n.onIgnoreTag=n.onIgnoreTag||Nr.onIgnoreTag,n.onIgnoreTagAttr=n.onIgnoreTagAttr||Nr.onIgnoreTagAttr,n.safeAttrValue=n.safeAttrValue||Nr.safeAttrValue,n.escapeHtml=n.escapeHtml||Nr.escapeHtml,this.options=n,n.css===!1?this.cssFilter=!1:(n.css=n.css||{},this.cssFilter=new Xhe(n.css))}bD.prototype.process=function(n){if(n=n||"",n=n.toString(),!n)return"";var e=this,t=e.options,r=t.whiteList,i=t.onTag,a=t.onIgnoreTag,s=t.onTagAttr,o=t.onIgnoreTagAttr,u=t.safeAttrValue,l=t.escapeHtml,c=e.attributeWrapSign,h=e.cssFilter;t.stripBlankChar&&(n=Nr.stripBlankChar(n)),t.allowCommentTag||(n=Nr.stripCommentTag(n));var d=!1;t.stripIgnoreTagBody&&(d=Nr.StripTagBody(t.stripIgnoreTagBody,a),a=d.onIgnoreTag);var f=Khe(n,function(g,p,v,m,y){var b={sourcePosition:g,position:p,isClosing:y,isWhite:Object.prototype.hasOwnProperty.call(r,v)},x=i(v,m,b);if(!Dh(x))return x;if(b.isWhite){if(b.isClosing)return"</"+v+">";var w=Jhe(m),E=r[v],_=Zhe(w.html,function(S,C){var k=Qh.indexOf(E,S)!==-1,A=s(v,S,C,k);return Dh(A)?k?(C=u(v,S,C,h),C?S+"="+c+C+c:S):(A=o(v,S,C,k),Dh(A)?void 0:A):A});return m="<"+v,_&&(m+=" "+_),w.closing&&(m+=" /"),m+=">",m}else return x=a(v,m,b),Dh(x)?l(m):x},l);return d&&(f=d.remove(f)),f};var tde=bD;(function(n,e){var t=xt,r=j0,i=tde;function a(o,u){var l=new i(u);return l.process(o)}e=n.exports=a,e.filterXSS=a,e.FilterXSS=i,function(){for(var o in t)e[o]=t[o];for(var u in r)e[u]=r[u]}(),typeof window<"u"&&(window.filterXSS=n.exports);function s(){return typeof self<"u"&&typeof DedicatedWorkerGlobalScope<"u"&&self instanceof DedicatedWorkerGlobalScope}s()&&(self.filterXSS=n.exports)})(A2,A2.exports);var vl=A2.exports;const nde=hhe(vl),rde=Kce({__proto__:null,default:nde},[vl]),pO={img:["class"],input:["class","disabled","type","checked"],iframe:["class","width","height","src","title","border","frameborder","framespacing","allow","allowfullscreen"]},ide=(n,e)=>{const{extendedWhiteList:t={},xss:r={}}=e;let i;if(typeof r=="function")i=new vl.FilterXSS(r(rde));else{const a=vl.getDefaultWhiteList();[...Object.keys(t),...Object.keys(pO)].forEach(o=>{const u=a[o]||[],l=pO[o]||[],c=t[o]||[];a[o]=[...new Set([...u,...l,...c])]}),i=new vl.FilterXSS({whiteList:a,...r})}n.core.ruler.after("linkify","xss",a=>{for(let s=0;s<a.tokens.length;s++){const o=a.tokens[s];switch(o.type){case"html_block":{o.content=i.process(o.content);break}case"inline":{(o.children||[]).forEach(l=>{l.type==="html_inline"&&(l.content=i.process(l.content))});break}}}})},vO=(n,e,t)=>{const r=n.attrIndex(e),i=[e,t];r<0?n.attrPush(i):(n.attrs=n.attrs||[],n.attrs[r]=i)},ade=n=>n.type==="inline",sde=n=>n.type==="paragraph_open",ode=n=>n.type==="list_item_open",ude=n=>n.content.indexOf("[ ] ")===0||n.content.indexOf("[x] ")===0||n.content.indexOf("[X] ")===0,lde=(n,e)=>ade(n[e])&&sde(n[e-1])&&ode(n[e-2])&&ude(n[e]),cde=(n,e)=>{const t=n[e].level-1;for(let r=e-1;r>=0;r--)if(n[r].level===t)return r;return-1},hde=n=>{const e=new n("html_inline","",0);return e.content="<label>",e},dde=n=>{const e=new n("html_inline","",0);return e.content="</label>",e},fde=(n,e,t)=>{const r=new t("html_inline","",0);return r.content='<label class="task-list-item-label" for="'+e+'">'+n+"</label>",r.attrs=[{for:e}],r},gde=(n,e,t)=>{const r=new e("html_inline","",0),i=t.enabled?" ":' disabled="" ';return n.content.indexOf("[ ] ")===0?r.content='<input class="task-list-item-checkbox"'+i+'type="checkbox">':(n.content.indexOf("[x] ")===0||n.content.indexOf("[X] ")===0)&&(r.content='<input class="task-list-item-checkbox" checked=""'+i+'type="checkbox">'),r},pde=(n,e,t)=>{if(n.children=n.children||[],n.children.unshift(gde(n,e,t)),n.children[1].content=n.children[1].content.slice(3),n.content=n.content.slice(3),t.label)if(t.labelAfter){n.children.pop();const r="task-item-"+Math.ceil(Math.random()*(1e4*1e3)-1e3);n.children[0].content=n.children[0].content.slice(0,-1)+' id="'+r+'">',n.children.push(fde(n.content,r,e))}else n.children.unshift(hde(e)),n.children.push(dde(e))},vde=(n,e={})=>{n.core.ruler.after("inline","github-task-lists",t=>{const r=t.tokens;for(let i=2;i<r.length;i++)lde(r,i)&&(pde(r[i],t.Token,e),vO(r[i-2],"class","task-list-item"+(e.enabled?" enabled":" ")),vO(r[cde(r,i-2)],"class","contains-task-list"))})},mde=n=>{n.core.ruler.push("init-line-number",e=>(e.tokens.forEach(t=>{t.map&&(t.attrs||(t.attrs=[]),t.attrs.push(["data-line",t.map[0].toString()]))}),!0))},yde=(n,e)=>{const{editorConfig:t,markdownItConfig:r,markdownItPlugins:i}=br,a=Gt("editorId"),s=Gt("language"),o=Gt("usedLanguageText"),u=Gt("showCodeRowNumber"),l=Gt("theme"),c=Gt("customIcon"),h=Gt("rootRef"),d=We([]),f=Qce(n),g=the(n),{reRenderRef:p,replaceMermaid:v}=ehe(n),m=Ir({html:!0,breaks:!0,linkify:!0});r(m,{editorId:a});const y=[{type:"image",plugin:qce,options:{figcaption:!0,classes:"md-zoom"}},{type:"admonition",plugin:she,options:{}},{type:"taskList",plugin:vde,options:{}},{type:"heading",plugin:ohe,options:{mdHeadingId:n.mdHeadingId,headsRef:d}},{type:"code",plugin:che,options:{editorId:a,usedLanguageTextRef:o,codeFoldable:n.codeFoldable,autoFoldThreshold:n.autoFoldThreshold,customIconRef:c}},{type:"xss",plugin:ide,options:{}},{type:"sub",plugin:Vce,options:{}},{type:"sup",plugin:Yce,options:{}}];n.noKatex||y.push({type:"katex",plugin:ahe,options:{katexRef:g}}),n.noMermaid||y.push({type:"mermaid",plugin:nhe,options:{themeRef:l}}),i(y,{editorId:a}).forEach(C=>{m.use(C.plugin,C.options)});const b=m.options.highlight;m.set({highlight:(C,k,A)=>{if(b){const P=b(C,k,A);if(P)return P}let T;!n.noHighlight&&f.value?f.value.getLanguage(k)?T=f.value.highlight(C,{language:k,ignoreIllegals:!0}).value:T=f.value.highlightAuto(C).value:T=m.utils.escapeHtml(C);const O=u?$oe(T.replace(/^\n+|\n+$/g,""),C.replace(/^\n+|\n+$/g,"")):`<span class="${he}-code-block">${T.replace(/^\n+|\n+$/g,"")}</span>`;return`<pre><code class="language-${k}" language=${k}>${O}</code></pre>`}}),mde(m);const x=We(`_article-key_${p2()}`),w=We(n.sanitize(m.render(n.modelValue))),E=()=>{Xi.emit(a,Loe,w.value),n.onHtmlChanged(w.value),n.onGetCatalog(d.value),Xi.emit(a,Ly,d.value),Us(()=>{v().then(()=>{jT(h.value.querySelectorAll(`#${a} .${he}-mermaid`))})})};Rr(E);const _=()=>{d.value=[],w.value=n.sanitize(m.render(n.modelValue)),E()},S=fn(()=>(n.noKatex||g.value)&&(n.noHighlight||f.value));return Tn([EO(n,"modelValue"),S,p,s],CN(_,e?0:t.renderDelay)),Tn(()=>n.setting.preview,()=>{n.setting.preview&&Us(()=>{v().then(()=>{jT(h.value.querySelectorAll(`#${a} .${he}-mermaid`))}),Xi.emit(a,Ly,d.value)})}),Rr(()=>{Xi.on(a,{name:Ioe,callback(){Xi.emit(a,Ly,d.value)}}),Xi.on(a,{name:TN,callback:()=>{x.value=`_article-key_${p2()}`,_()}})}),{html:w,key:x}},mO={checked:{regexp:/- \[x\]/,value:"- [ ]"},unChecked:{regexp:/- \[\s\]/,value:"- [x]"}},bde=(n,e)=>{const t=Gt("editorId"),r=Gt("rootRef");let i=()=>{};const a=()=>{if(!r.value)return!1;const s=r.value.querySelectorAll(".task-list-item.enabled"),o=u=>{var l;u.preventDefault();const c=u.target.checked?"unChecked":"checked",h=(l=u.target.parentElement)==null?void 0:l.dataset.line;if(!h)return;const d=Number(h),f=n.modelValue.split(`
`),g=f[Number(d)].replace(mO[c].regexp,mO[c].value);n.previewOnly?(f[Number(d)]=g,n.onChange(f.join(`
`))):Xi.emit(t,Foe,d+1,g)};s.forEach(u=>{u.addEventListener("click",o)}),i=()=>{s.forEach(u=>{u.removeEventListener("click",o)})}};wO(()=>{i()}),Tn([e],()=>{i(),Us(a)},{immediate:!0})},xD={modelValue:{type:String,default:""},onChange:{type:Function,default:()=>{}},setting:{type:Object,default:()=>({preview:!0})},onHtmlChanged:{type:Function,default:()=>{}},onGetCatalog:{type:Function,default:()=>{}},mdHeadingId:{type:Function,default:()=>""},noMermaid:{type:Boolean,default:!1},sanitize:{type:Function,default:n=>n},noKatex:{type:Boolean,default:!1},formatCopiedText:{type:Function,default:n=>n},noHighlight:{type:Boolean,default:!1},previewOnly:{type:Boolean,default:!1},noImgZoomIn:{type:Boolean},sanitizeMermaid:{type:Function},codeFoldable:{type:Boolean},autoFoldThreshold:{type:Number}};({...xD});const xde=O2({name:"ContentPreview",props:xD,setup(n){const e=Gt("editorId"),t=Gt("previewTheme"),r=Gt("showCodeRowNumber"),{html:i,key:a}=yde(n,n.previewOnly);return Jce(n,i,a),Zce(n,i),bde(n,i),()=>le(aa,null,[n.setting.preview&&le("div",{id:`${e}-preview-wrapper`,class:`${he}-preview-wrapper`,key:"content-preview-wrapper"},[le("div",{key:a.value,id:`${e}-preview`,class:[`${he}-preview`,`${t==null?void 0:t.value}-theme`,r&&`${he}-scrn`],innerHTML:i.value},null)]),!n.previewOnly&&n.setting.htmlPreview&&le("div",{id:`${e}-html-wrapper`,class:`${he}-preview-wrapper`,key:"html-preview-wrapper"},[le("div",{class:`${he}-html`},[i.value])])])}}),wde=(n,e)=>{const{editorId:t}=n,r=br.editorExtensions.highlight,i=br.editorExtensionsAttrs.highlight;Wi("editorId",t),Wi("rootRef",e),Wi("theme",fn(()=>n.theme)),Wi("language",fn(()=>n.language)),Wi("highlight",fn(()=>{const{js:s}=r,o={...v2,...r.css},{js:u,css:l={}}=i||{},c=n.codeStyleReverse&&n.codeStyleReverseList.includes(n.previewTheme)?"dark":n.theme,h=o[n.codeTheme]?o[n.codeTheme][c]:v2.atom[c],d=o[n.codeTheme]&&l[n.codeTheme]?l[n.codeTheme][c]:l.atom?l.atom[c]:{};return{js:{src:s,...u},css:{href:h,...d}}})),Wi("showCodeRowNumber",n.showCodeRowNumber);const a=fn(()=>{const s={...$T,...br.editorConfig.languageUserDefined};return AN(il($T["en-US"]),s[n.language]||{})});Wi("usedLanguageText",a),Wi("previewTheme",fn(()=>n.previewTheme)),Wi("customIcon",fn(()=>n.customIcon))},Ede=n=>{Rr(()=>{const{editorExtensions:e,editorExtensionsAttrs:t,iconfontType:r}=br;n.noIconfont||(r==="svg"?ga("script",{...t.iconfont,src:e.iconfont,id:`${he}-icon`}):ga("link",{...t.iconfontClass,rel:"stylesheet",href:e.iconfontClass,id:`${he}-icon-class`}))})},_de=n=>n,wD={modelValue:{type:String,default:""},onChange:{type:Function,default:void 0},theme:{type:String,default:"light"},class:{type:String,default:""},language:{type:String,default:"zh-CN"},onHtmlChanged:{type:Function,default:void 0},onGetCatalog:{type:Function,default:void 0},editorId:{type:String,default:()=>joe("md-editor-v3_")},showCodeRowNumber:{type:Boolean,default:!0},previewTheme:{type:String,default:"default"},style:{type:Object,default:()=>({})},mdHeadingId:{type:Function,default:_de},sanitize:{type:Function,default:n=>n},noMermaid:{type:Boolean,default:!1},noKatex:{type:Boolean,default:!1},codeTheme:{type:String,default:"atom"},noIconfont:{type:Boolean,default:void 0},formatCopiedText:{type:Function,default:n=>n},codeStyleReverse:{type:Boolean,default:!0},codeStyleReverseList:{type:Array,default:["default","mk-cute"]},noHighlight:{type:Boolean,default:!1},noImgZoomIn:{type:Boolean,default:!1},customIcon:{type:Object,default:{}},sanitizeMermaid:{type:Function,default:n=>Promise.resolve(n)},codeFoldable:{type:Boolean,default:!0},autoFoldThreshold:{type:Number,default:30}};({...wD});const ED=["onHtmlChanged","onGetCatalog","onChange","update:modelValue"];[...ED];const Sde=(n,e)=>{const{editorId:t}=n,r={rerender(){Xi.emit(t,TN)}};e.expose(r)},ed=O2({name:"MdPreview",props:wD,emits:ED,setup(n,e){const{editorId:t,noKatex:r,noMermaid:i,noHighlight:a}=n,s=We();return wde(n,s),Ede(n),Sde(n,e),wO(()=>{Xi.clear(t)}),()=>le("div",{id:t,class:[he,n.class,n.theme==="dark"&&`${he}-dark`,`${he}-previewOnly`],style:n.style,ref:s},[le(xde,{modelValue:n.modelValue,onChange:o=>{n.onChange&&n.onChange(o),e.emit("onChange",o),e.emit("update:modelValue",o)},onHtmlChanged:o=>{n.onHtmlChanged?n.onHtmlChanged(o):e.emit("onHtmlChanged",o)},onGetCatalog:o=>{n.onGetCatalog?n.onGetCatalog(o):e.emit("onGetCatalog",o)},mdHeadingId:n.mdHeadingId,noMermaid:i,sanitize:n.sanitize,noKatex:r,formatCopiedText:n.formatCopiedText,noHighlight:a,noImgZoomIn:n.noImgZoomIn,previewOnly:!0,sanitizeMermaid:n.sanitizeMermaid,codeFoldable:n.codeFoldable,autoFoldThreshold:n.autoFoldThreshold},null)])}});ed.install=n=>(n.component(ed.name,ed),n);const kde={onClick:{type:Function,default:void 0}},Gy=O2({name:"NormalFooterToolbar",props:kde,emits:["onClick"],setup(n,e){return()=>{const t=Moe({props:n,ctx:e});return le("div",{class:`${he}-footer-item`,onClick:r=>{n.onClick instanceof Function?n.onClick(r):e.emit("onClick",r)}},[t])}}});Gy.install=n=>(n.component(Gy.name,Gy),n);function Cde(n=""){return n.replace(/<think>([\s\S]*?)<\/think>/gi,"").replace(/<think>([\s\S]*)/gi,"").replace(/([\s\S]*)<\/think>/gi,"").replace(/\n{3,}/g,`

`).trim()}function yO(n=16){const e="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789";let t="";for(let r=0;r<n;r++)t+=e[Math.floor(Math.random()*e.length)];return t}const Ade={key:0,class:"message-text"},Tde={key:1,class:"assistant-message"},Ode={key:0},Mde={key:1,class:"reasoning-box"},Pde={class:"reasoning-content-wrapper"},Nde={class:"thought-index"},Dde={class:"thought-content"},Rde={key:1,class:"empty-thinking"},Lde={key:2,class:"loading-dots"},Ide={key:3,class:"searching-msg"},Fde={key:5,class:"answer-content"},Bde={key:6,class:"empty-block"},zde={key:9,class:"retry-hint"},$de={key:10},jde={__name:"MessageComponent",props:{message:{type:Object,required:!0},isProcessing:{type:Boolean,default:!1},customClasses:{type:Object,default:()=>({})},showRefs:{type:[Array,Boolean],default:()=>!1},debugMode:{type:Boolean,default:!1}},emits:["retry","retryStoppedMessage"],setup(n,{emit:e}){const t=n,r=We(),i=e,a=We(["show"]);fn(()=>{const l=!t.message.content||t.message.content.length===0,c=t.message.status==="init"&&t.isProcessing;return l&&c});const s=fn(()=>t.message.reasoning_content?t.message.reasoning_content.split(`
`).filter(l=>l.trim().length>0):[]),o=fn(()=>t.message.content&&t.message.content.trim().length>0),u=fn(()=>t.isProcessing&&t.message.status==="reasoning"&&!t.message.content);return(l,c)=>{const h=dr("a-collapse-panel"),d=dr("a-collapse");return ge(),we("div",{class:zs([[n.message.role,n.customClasses],"message-box"])},[n.message.role==="user"||n.message.role==="sent"?(ge(),we("p",Ade,_t(n.message.content),1)):n.message.role==="assistant"||n.message.role==="received"?(ge(),we("div",Tde,[n.debugMode?(ge(),we("p",Ode,_t(n.message.status),1)):dn("",!0),n.message.reasoning_content?(ge(),we("div",Mde,[le(d,{activeKey:a.value,"onUpdate:activeKey":c[0]||(c[0]=f=>a.value=f),bordered:!1},{expandIcon:an(({isActive:f})=>[le(Ue(nR),{rotate:f?90:0},null,8,["rotate"])]),default:an(()=>[le(h,{key:"show",header:n.message.status==="reasoning"?"正在思考...":"思考过程",class:"reasoning-header"},{default:an(()=>[ce("div",Pde,[n.message.reasoning_content?(ge(!0),we(aa,{key:0},Za(s.value,(f,g)=>(ge(),we("div",{key:g,class:"thought-item"},[ce("div",Nde,_t(g+1)+".",1),ce("div",Dde,_t(f),1)]))),128)):(ge(),we("div",Rde,"暂无思考记录"))])]),_:1},8,["header"])]),_:1},8,["activeKey"])])):dn("",!0),u.value?(ge(),we("div",Lde,c[5]||(c[5]=[ce("div",null,null,-1),ce("div",null,null,-1),ce("div",null,null,-1)]))):n.message.status==="generating"&&!o.value?(ge(),we("div",Ide,c[6]||(c[6]=[ce("i",null,"正在生成……",-1)]))):n.message.status==="error"?(ge(),we("div",{key:4,class:"err-msg",onClick:c[1]||(c[1]=f=>l.$emit("retry"))}," 1、"+_t(n.message.content),1)):o.value?(ge(),we("div",Fde,[(ge(),ml(Ue(ed),{key:n.message.id,ref_key:"editorRef",ref:r,modelValue:Ue(Cde)(n.message.content),class:"message-md"},null,8,["modelValue"]))])):n.message.reasoning_content?(ge(),we("div",Bde)):n.message.toolCalls&&Object.keys(n.message.toolCalls).length>0?Wy(l.$slots,"tool-calls",{key:7},void 0,!0):(ge(),we("div",{key:8,class:"err-msg",onClick:c[2]||(c[2]=f=>l.$emit("retry"))}," 请求错误，请重试2。"+_t(n.message.message),1)),n.message.isStoppedByUser?(ge(),we("div",zde,[c[7]||(c[7]=Ln(" 你停止生成了本次回答 ")),ce("span",{class:"retry-link",onClick:c[3]||(c[3]=f=>i("retryStoppedMessage",n.message.id))},"重新编辑问题")])):dn("",!0),(n.message.role==="received"||n.message.role==="assistant")&&n.message.status==="finished"&&n.showRefs?(ge(),we("div",$de,[le(yoe,{message:n.message,"show-refs":n.showRefs,onRetry:c[4]||(c[4]=f=>i("retry"))},null,8,["message","show-refs"])])):dn("",!0)])):dn("",!0),Wy(l.$slots,"default",{},void 0,!0)],2)}}},qde=du(jde,[["__scopeId","data-v-0abe0fe7"]]);const Gde={class:"chat-header"},Wde={class:"header__left"},Vde={class:"header__right"},Ude={class:"flex-center"},Hde={key:0,class:"chat-examples"},Yde={key:0},Xde={class:"opts"},Kde=["onClick"],Zde={class:"bottom"},Jde={class:"note"},Qde={__name:"ChatComponent",props:{conv:Object,state:Object},emits:["rename-title","newconv"],setup(n,{emit:e}){const t=We("http://125.35.255.179:39001"),r=We("Bearer I3MGFiMzNlZmIyYzExZWY4YzIxMDI0Mm"),i=We(null),a=n,s=e,o=ID(),{conv:u,state:l}=FD(a),c=We(null),h=We(!1),d=We(!1),f=We(!0),g=We(null),p=We(null),v=We(!1),m={greeting:"您好，我是融小虎，我来自融科联创，可以帮助您解决如下问题：",services:["融科产品方案配置推荐；","产品技术服务问答支持；","业务流程以及数据查询支持；","其他各方面通用问答支持；"],recommendedQuestions:"推荐问题：",examples:["主推产品和解决方案有哪些？","客户有智能问答系统的需求，我们可以推荐什么方案？","RoycomOne方案的详细介绍","生成1000字左右的融科联创的公司介绍"],versionUpdate:"本周我们更新了融小虎2.1版本：",updates:["1、增加了库存查询功能。","2、增加了初步产品方案推荐功能，快速生成服务器产品初步选型与配置方案。","3、提供公司报销相关的问答解析功能。","4、提供人员分工问答功能。"]},y=yl({showPanel:!1,showModelCard:!1,openDetail:!1,databases:[]}),b=yl(JSON.parse(localStorage.getItem("meta"))||{use_graph:!1,use_web:!1,graph_name:"neo4j",selectedKB:null,summary_title:!1,history_round:20,db_id:null,fontSize:"default",wideScreen:!1});nE(g,()=>setTimeout(()=>y.showPanel=!1,30)),nE(p,()=>setTimeout(()=>y.showModelCard=!1,30));const x=(B,$)=>{if(i.value=$,console.log("handleKeyDown:docTxt",$),B.key==="Enter"&&!B.shiftKey)B.preventDefault(),N($);else if(B.key==="Enter"&&B.shiftKey){const W=B.target,Y=W.selectionStart,K=W.selectionEnd;u.value.content=u.value.content.substring(0,Y)+`
`+u.value.content.substring(K),Us(()=>{W.setSelectionRange(Y+1,Y+1)})}},w=()=>{if(b.summary_title){const B="请用一个很短的句子关于下面的对话内容的主题起一个名字，不要带标点符号：",$=u.value.message[0].content,W=u.value.message[1].content,Y=`${B}

问题: ${$}

回复: ${W}，主题是（一句话）：`;console.log("renameTitle:context",Y)}else s("rename-title",u.value.message[0].content)},E=()=>{if(!c.value)return;const B=c.value.scrollHeight-c.value.scrollTop-c.value.clientHeight<20;d.value=!B,f.value=B},_=()=>{!v.value||!f.value||!c.value||setTimeout(()=>{v.value&&c.value&&(c.value.scrollTop=c.value.scrollHeight-c.value.clientHeight)},10)},S=B=>{u.value.message.push({id:yO(16),role:"sent",content:B}),_()},C=(B,$=null)=>{u.value.message.push({id:yO(16),role:"received",content:"",reasoning_content:"正在思考...",status:"reasoning",refs:$,showThinking:"show"}),_()},k=B=>{const $=u.value.message.find(W=>W.id===B.id);$&&(B.reasoning_content&&($.reasoning_content=B.reasoning_content),B.content&&($.content=B.content),$.status=B.status||$.status,$.status==="error"&&($.content=B.content||"发生未知错误。"),_())};let A,T=null,O="";const P=async(B,$,W)=>{O=B,T=new AbortController;const Y=T.signal;A="";const K=Rw("userData"),ee=Rw("chatSessionId");if(!K||!K.agentBaseUrl){Ka.error("登录信息失效，请重新登录"),logout();return}const ie=t.value+K.agentBaseUrl;let Ae={conversation_id:$D(),question:B,quote:!0,session_id:ee};(W==null?void 0:W.uploadResult)!=null&&(Ae={...Ae,doc:W.uploadResult});try{const Be=await fetch(ie,{method:"POST",headers:{"Content-Type":"application/json",Authorization:r.value},body:JSON.stringify(Ae),signal:Y});if(!Be.ok)throw new Error(`HTTP error! status: ${Be.status}`);if(!Be.body)throw new Error("响应数据为空");const Fe=Be.body.getReader(),Ze=new TextDecoder("utf-8");let Kt="",$r=0,Re=0,Zt="reasoning";const ze="data:",Pn=/<think>([\s\S]*?)(<\/think>|$)/i,En=async()=>{try{const{done:$i,value:ji}=await Fe.read();if($i){R($);return}const Gn=[];Gn.push(Ze.decode(ji,{stream:!0})),Kt+=Gn.join("");const mt=Kt.split(`
`);for(let jr=0;jr<mt.length-1;jr++){const Jt=mt[jr].trim();if(Jt)try{let tr=Jt.startsWith(ze)?Jt.substring(ze.length).trim():Jt;const qr=JSON.parse(tr);if(qr.code===0&&qr.data&&qr.data.answer){const cn=qr.data.answer;if(cn.indexOf("**ERROR**:")>-1){k({id:$,content:cn,reasoning_content:"",status:"error"}),h.value=!1;return}const go=cn.includes("</think>")||cn.includes("<think>");let qi="",po=cn;if(go){const Gi=cn.match(Pn);Gi&&(qi=Gi[1].trim(),po=cn.replace(Pn,"").trim(),Zt="generating")}else po=cn,Zt="reasoning";if(A=JSON.stringify(qr.data),Zt==="reasoning"){const Gi=qi.slice(0,Re+1);k({id:$,reasoning_content:Gi,status:"reasoning"}),Re++}else if(Zt==="generating"){const Gi=po.slice(0,$r+1);k({id:$,content:Gi,reasoning_content:qi,status:"generating"}),$r++}if(Zt==="reasoning"&&Re<qi.length){setTimeout(En,50);return}else if(Zt==="generating"&&$r<po.length){setTimeout(En,50);return}}else console.warn("数据结构不符合预期:",qr)}catch(tr){console.error("JSON 解析错误:",tr,"原始数据:",Jt)}}Kt=mt[mt.length-1],await En()}catch($i){$i.name==="AbortError"?console.log("Fetch aborted"):(console.error("读取数据块时出错:",$i),k({id:$,status:"error"})),h.value=!1}};await En()}catch(Be){Be.name==="AbortError"?console.log("请求被中止"):(console.error("获取聊天响应时出错:",Be),Ka.error("获取聊天响应失败，请稍后重试"),k({id:$,status:"error"})),h.value=!1}Tn(h,Be=>{!Be&&T&&T.abort()})};function R(B){console.log("handleCompletion");const $=u.value.message.find(Y=>Y.id===B);console.log("msg:",$),k({showThinking:"show",id:B}),h.value=!1,u.value.message.length===2&&w(),$&&($.status="finished");const W=u.value.message;if(Array.isArray(W)&&W.length>0){const K={title:W[W.length-2].content,messages:A};Dw(K)}}const N=B=>{var Y;console.log("sendMessage:docTxt",B);const $=u.value.content.trim(),W=y.databases.length>0?(Y=y.databases[b.selectedKB])==null?void 0:Y.db_id:null;if(h.value){Ka.error("请等待上一条消息处理完成");return}if($){h.value=!0,S($),C("",null),M();const K=u.value.message[u.value.message.length-1].id;if(u.value.content="",b.db_id=W,P($,K,B),u.value.isFirstAnswer){const ee=localStorage.getItem("firstAnswer");zD({title:$,content:ee}),u.value.isFirstAnswer=!1}}else console.log("请输入消息")},D=B=>{const $=u.value.message.findIndex(Y=>Y.id===B),W=u.value.message[$-1];console.log("retryMessage",B,W),u.value.content=W.content,$!==-1&&(u.value.message=u.value.message.slice(0,$-1)),console.log(u.value.message),N(i.value)};Rr(()=>{v.value=!0,_(),c.value&&c.value.addEventListener("scroll",E),u.value.message&&u.value.message.length>0&&u.value.message.forEach($=>{$.role==="received"&&(!$.content||$.content.trim()==="")&&($.status="error",$.message="内容加载失败")}),console.log(u.value.message);const B=localStorage.getItem("meta");if(B){const $=JSON.parse(B);Object.assign(b,$)}}),BD(()=>{v.value=!1,c.value&&c.value.removeEventListener("scroll",E)});const M=()=>{f.value=!0,c.value&&setTimeout(()=>{c.value.scrollTop=c.value.scrollHeight-c.value.clientHeight},10)};Tn(()=>b,B=>{localStorage.setItem("meta",JSON.stringify(B))},{deep:!0});const F=B=>{if(i.value=B,console.log("handleSendOrStop",B),h.value){h.value=!1;const $=u.value.message[u.value.message.length-1];$&&($.isStoppedByUser=!0,$.status="stopped",$.status="finished"),console.log("停止生成：currentResponseData",A),console.log("停止生成：conv.value",u.value),Dw({title:O||u.value.title,messages:A}),T&&T.abort()}else N(B)},j=B=>{console.log("重试被停止的消息：",B);const $=u.value.message.findIndex(W=>W.id===B);if($>0){const W=u.value.message[$-1];W&&W.role==="sent"&&(u.value.content=W.content,u.value.message=u.value.message.slice(0,$-1))}};return(B,$)=>{var ie,_e,Ae,Be;const W=dr("a-tooltip"),Y=dr("a-select-option"),K=dr("a-select"),ee=dr("a-switch");return ge(),we("div",{ref_key:"chatContainer",ref:c,class:"chat"},[ce("div",Gde,[ce("div",Wde,[Ue(l).isSidebarOpen?dn("",!0):(ge(),we("div",{key:0,class:"close nav-btn nav-btn-icon-only",onClick:$[0]||($[0]=Fe=>Ue(l).isSidebarOpen=!0)},[le(W,{placement:"right",title:"展开侧边栏"},{default:an(()=>$[9]||($[9]=[ce("img",{alt:"设置",class:"iconfont icon-20",src:SO},null,-1)])),_:1})])),ce("div",{class:"newchat nav-btn nav-btn-icon-only",onClick:$[1]||($[1]=Fe=>B.$emit("newconv"))},[le(W,{placement:"right",title:"新建对话"},{default:an(()=>[le(Ue(GR))]),_:1})])]),ce("div",Vde,[ce("div",{class:"nav-btn text",onClick:$[2]||($[2]=Fe=>y.showPanel=!y.showPanel)},[(ge(),ml(Vy(y.showPanel?Ue(NR):Ue(WD)))),$[10]||($[10]=ce("span",{class:"text"},"选项",-1))]),y.showPanel?(ge(),we("div",{key:0,ref_key:"panel",ref:g,class:"my-panal r0 top100 swing-in-top-fwd"},[ce("div",Ude,[$[14]||($[14]=Ln(" 字体大小 ")),le(K,{value:b.fontSize,"onUpdate:value":$[3]||($[3]=Fe=>b.fontSize=Fe),placeholder:"选择字体大小",style:{width:"100px"}},{default:an(()=>[le(Y,{value:"smaller"},{default:an(()=>$[11]||($[11]=[Ln("更小")])),_:1}),le(Y,{value:"default"},{default:an(()=>$[12]||($[12]=[Ln("默认")])),_:1}),le(Y,{value:"larger"},{default:an(()=>$[13]||($[13]=[Ln("更大")])),_:1})]),_:1},8,["value"])]),ce("div",{class:"flex-center",onClick:$[6]||($[6]=Fe=>b.wideScreen=!b.wideScreen)},[$[15]||($[15]=Ln(" 宽屏模式 ")),ce("div",{onClick:$[5]||($[5]=_O(()=>{},["stop"]))},[le(ee,{checked:b.wideScreen,"onUpdate:checked":$[4]||($[4]=Fe=>b.wideScreen=Fe)},null,8,["checked"])])])],512)):dn("",!0)])]),(_e=(ie=Ue(u))==null?void 0:ie.message)!=null&&_e.length?dn("",!0):(ge(),we("div",Hde,[ce("h1",null,_t(m.greeting),1),ce("h3",null,[(ge(!0),we(aa,null,Za(m.services,(Fe,Ze)=>(ge(),we("span",{key:Ze},[Ln(_t(Fe),1),Ze<m.services.length-1?(ge(),we("br",Yde)):dn("",!0)]))),128))]),ce("h3",null,_t(m.recommendedQuestions),1),ce("div",Xde,[(ge(!0),we(aa,null,Za(m.examples,(Fe,Ze)=>(ge(),we("div",{key:Ze,class:"opt__button",onClick:Kt=>Ue(u).content=Fe},_t(Fe),9,Kde))),128))])])),ce("div",{class:zs([{"wide-screen":b.wideScreen,"font-smaller":b.fontSize==="smaller","font-larger":b.fontSize==="larger"},"chat-box"])},[(ge(!0),we(aa,null,Za(Ue(u).message,Fe=>(ge(),ml(qde,{key:Fe.id,"is-processing":h.value,message:Fe,"show-refs":!0,onRetry:Ze=>D(Fe.id),onRetryStoppedMessage:Ze=>j(Fe.id)},null,8,["is-processing","message","onRetry","onRetryStoppedMessage"]))),128))],2),ce("div",Zde,[ce("div",{class:zs([{"wide-screen":b.wideScreen},"message-input-wrapper"])},[le(oL,{modelValue:Ue(u).content,"onUpdate:modelValue":$[8]||($[8]=Fe=>Ue(u).content=Fe),"auto-size":{minRows:2,maxRows:10},"is-loading":h.value,"send-button-disabled":!Ue(u).content&&!h.value,onKeydown:x,onSend:F},{"options-left":an(()=>[Ue(o).config.enable_web_search?(ge(),we("div",{key:0,class:zs({switch:!0,"opt-item":!0,active:b.use_web}),onClick:$[7]||($[7]=Fe=>b.use_web=!b.use_web)},[le(Ue(xR),{style:{"margin-right":"3px"}}),$[16]||($[16]=Ln(" 联网搜索 "))],2)):dn("",!0)]),_:1},8,["modelValue","is-loading","send-button-disabled"]),ce("p",Jde,_t((Ae=Ue(o).config)==null?void 0:Ae.model_provider)+": "+_t((Be=Ue(o).config)==null?void 0:Be.model_name),1)],2)])],512)}}},efe=du(Qde,[["__scopeId","data-v-73c10f3f"]]);const tfe={class:"chat-container"},nfe={class:"actions"},rfe={class:"conversation-list"},ife=["onClick"],afe={class:"conversation__title"},sfe=["onClick"],ofe={__name:"ChatView",setup(n){const e=yl([{id:0,title:"新对话",message:[],name:"新对话",isFirstAnswer:!0}]),t=yl({isSidebarOpen:JSON.parse(localStorage.getItem("chat-sidebar-open")||"true")});Tn(()=>t.isSidebarOpen,l=>{localStorage.setItem("chat-sidebar-open",JSON.stringify(l))});const r=We(0),i=l=>{let c="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789",h="";for(let d=0;d<l;d++)h+=c.charAt(Math.floor(Math.random()*c.length));return h},a=l=>{e[r.value].name=l},s=async l=>{r.value=l;const c=e[r.value].conversation_id;localStorage.setItem("chatSessionId",c)},o=async()=>{r.value=0,!(e.length>0&&e[0].message.length===0)&&(Lw({question:""},"").catch(l=>{console.error("获取 sessionId 失败:",l)}),e.unshift({id:i(8),title:"新对话",message:[],name:"",isFirstAnswer:!0}))},u=(l,c)=>{l<0||l>=e.length||(e.splice(l,1),l<r.value?r.value-=1:l===r.value&&(r.value=0),e.length===0&&o(),r.value>=e.length&&(r.value=0),e[r.value]?qD([c]).catch(d=>{console.error("删除会话失败:",d)}):console.warn("当前会话不存在，跳过删除请求"))};return Tn(()=>e,l=>{localStorage.setItem("chat-convs",JSON.stringify(l))},{deep:!0}),Rr(async()=>{console.log("onMounted------");const c=(await jD()).data.data;console.log("onMounted---savedConvs---",c),Us(async()=>{if(Array.isArray(c)){localStorage.setItem("chatSessionId",c[0].conversation_id);const h=c.map(d=>{if(d.message&&Array.isArray(d.message)){const f=d.message.map(g=>{const p={...g};if(p.content&&typeof p.content=="string"){let v=[];p.content=p.content.replace(/<think>([\s\S]*?)<\/think>|<think>([\s\S]*)|([\s\S]*?)<\/think>/g,(m,y,b,x)=>(y!==void 0?v.push(y):b!==void 0?v.push(b):x!==void 0&&v.push(x),"")),v.length>0&&(p.reasoning_content=v.join(`
`))}return p});return{...d,message:f,full_messages:f}}return d});e.length=0,e.push(...h)}else await Lw({question:""},"")})}),(l,c)=>(ge(),we("div",tfe,[ce("div",{class:zs([{"is-open":t.isSidebarOpen},"conversations"])},[ce("div",nfe,[c[2]||(c[2]=ce("span",{class:"header-title"},"融小虎",-1)),ce("div",{class:"action close",onClick:c[0]||(c[0]=h=>t.isSidebarOpen=!1)},c[1]||(c[1]=[ce("img",{alt:"设置",class:"iconfont icon-20",src:SO},null,-1)]))]),ce("div",rfe,[(ge(!0),we(aa,null,Za(e,(h,d)=>(ge(),we("div",{key:d,class:zs([{active:r.value===d},"conversation"]),onClick:f=>s(d)},[ce("div",afe,[le(Ue(vR)),Ln("  "+_t(h.name),1)]),ce("div",{class:"conversation__delete",onClick:_O(f=>u(d,h.conversation_id),["stop"])},[le(Ue(VD))],8,sfe)],10,ife))),128))])],2),le(efe,{conv:e[r.value],state:t,onNewconv:o,onRenameTitle:a},null,8,["conv","state"])]))}},xfe=du(ofe,[["__scopeId","data-v-67f3dd0d"]]);export{xfe as default};
